(this["webpackJsonp@loopring-web/webapp"]=this["webpackJsonp@loopring-web/webapp"]||[]).push([[12],{1016:function(e,t,a){"use strict";(function(e){a.d(t,"a",(function(){return m}));var n=a(2),c=a(7),r=a(0),o=a.n(r),i=a(118),s=a(6),u=a(154),l=a(62),d=a(121),b=a(404),p=a(401);function m(t){var a=t.pageSize,r=o.a.useState([]),m=Object(c.a)(r,2),f=m[0],O=m[1],j=o.a.useState(1),v=Object(c.a)(j,2),h=v[0],g=v[1],A=o.a.useState(-1),k=Object(c.a)(A,2),x=k[0],w=k[1],y=Object(d.c)().coinMap,I=Object(i.e)(),C=I.ammMap,T=I.status,_=I.statusUnset,S=Object(p.b)(),E=S.tickerMap,P=S.status,N=S.statusUnset,R=S.updateTickers,D=Object(b.b)(),M=(D.status,D.statusUnset,o.a.useCallback((function(e){try{var t=Object(u.b)(C);for(var a in e)t["AMM-"+a]&&(t["AMM-"+a].tradeFloat=Object(n.a)(Object(n.a)({},t["AMM-"+a].tradeFloat),e[a]));O(Object.keys(t).map((function(e){return y&&(t[e].coinAInfo=y[t[e].coinA],t[e].coinBInfo=y[t[e].coinB]),t[e]})))}catch(c){throw new s.m(Object(n.a)(Object(n.a)({},s.r.NO_TOKEN_MAP),{},{options:c}))}}),[C])),L=o.a.useCallback((function(t){-1!==x&&clearTimeout(x),w(setTimeout((function(){L(t)}),6e4)),e(R,t)}),[]),U=o.a.useCallback((function(e){if(g(e),C&&Object.keys(C).length>0){for(var t=[],n=(h-1)*a;n<Object.keys(C).length&&n<(h-1)*a+a;n++)t.push(Object.keys(C)[n]);L(t)}}),[C,a]);return o.a.useEffect((function(){C&&0!==Object.keys(C).length&&U(h)}),[]),o.a.useEffect((function(){switch(P){case"ERROR":console.log("ERROR","get ticker error,ui"),N();break;case"PENDING":break;case"DONE":N(),M(E)}}),[P,N]),o.a.useEffect((function(){switch(T){case"ERROR":console.log("ERROR","get ammMap error,ui"),_();break;case l.a.PENDING:console.log("PENDING","get ammMap error,ui");break;case l.a.DONE:_(),U(1)}}),[T,_,U]),{page:h,rawData:f,updateTickersUI:U}}}).call(this,a(362).setImmediate)},1017:function(e,t,a){"use strict";a.d(t,"a",(function(){return v}));var n=a(4),c=a.n(n),r=a(23),o=a(7),i=a(0),s=a.n(i),u=a(1018),l=a.n(u),d=a(115),b=a(403),p=a(15),m=a(118),f=a(121),O=a(205),j=a(126);function v(){var e=s.a.useState("PENDING"),t=Object(o.a)(e,2),a=t[0],n=t[1],i=Object(b.b)(),u=Object(f.c)(),v=Object(m.e)(),h=Object(j.a)(),g=Object(O.b)();return Object(d.a)(Object(r.a)(c.a.mark((function e(){var t,a,n,r;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=function(e){i.updateSystem({chainId:e}),window.location.reload()},a=function(e){window.location.reload()},e.next=4,l()();case 4:if(!(n=e.sent)){e.next=19;break}return e.t0=Number,e.next=9,n.request({method:"eth_chainId"});case 9:return e.t1=e.sent,r=(0,e.t0)(e.t1),e.next=13,n.request({method:"eth_requestAccounts"});case 13:e.sent,n.on("accountsChanged",a),n.on("chainChanged",(function(){t(r)})),i.updateSystem({chainId:r}),e.next=20;break;case 19:i.updateSystem({chainId:p.e.MAINNET});case 20:case"end":return e.stop()}}),e)}))),[]),s.a.useEffect((function(){switch(i.status){case"ERROR":i.statusUnset(),n("ERROR");break;case"DONE":i.statusUnset()}}),[i]),s.a.useEffect((function(){"ERROR"===v.status||"ERROR"===u.status?(v.statusUnset(),u.statusUnset(),n("ERROR")):"DONE"===v.status&&"DONE"===u.status&&(v.statusUnset(),u.statusUnset(),n("DONE"))}),[v,u,h.accountId,g]),{state:a}}},1019:function(e,t,a){"use strict";a.d(t,"a",(function(){return l}));var n,c=a(13),r=a(684),o=a(1938),i=a(21),s=a(1),u=Object(i.a)(o.a)(n||(n=Object(c.a)(["\n  //background-image: url('./static/images/error_bg.png');\n  //background-repeat: no-repeat;\n  //background-size: contain;\n  //background-position: bottom;\n  //white-space: pre-wrap;\n  ////h2{\n  ////  position: relative;\n  ////}\n  /*\n  Set the color of the icon\n*/\n  svg path,\n  svg rect{\n    fill: ",";\n  }\n"])),(function(e){return e.theme.colorBase.primaryLight})),l=function(){Object(r.a)("layout").t;return Object(s.jsx)(s.Fragment,{children:Object(s.jsx)(u,{flex:1,display:"flex",alignItems:"center",justifyContent:"center",flexDirection:"column",height:"100%",width:"100%",children:Object(s.jsx)("div",{className:"loader loader--style3",title:"2",children:Object(s.jsx)("svg",{version:"1.1",id:"loader-1",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",x:"0px",y:"0px",width:"40px",height:"40px",viewBox:"0 0 50 50",enableBackground:"new 0 0 50 50",xmlSpace:"preserve",children:Object(s.jsx)("path",{fill:"#000",d:"M43.935,25.145c0-10.318-8.364-18.683-18.683-18.683c-10.318,0-18.683,8.365-18.683,18.683h4.068c0-8.071,6.543-14.615,14.615-14.615c8.072,0,14.615,6.543,14.615,14.615H43.935z",children:Object(s.jsx)("animateTransform",{attributeType:"xml",attributeName:"transform",type:"rotate",from:"0 25 25",to:"360 25 25",dur:"0.6s",repeatCount:"indefinite"})})})})})})}},1020:function(e,t,a){"use strict";var n=a(132),c=a(101),r=a(2),o=a(7),i=a(0),s=a.n(i),u=a(25),l=a(6),d=a(1967),b=a(4),p=a.n(b),m=a(23),f=a(684),O=a(126),j=a(462),v=a(38),h=a(115),g=a(155),A=a(39),k=a(15),x=a(235),w=a(279),y=a(61);function I(){var e=Object(y.b)(),t=Object(f.a)("common").t;return{ShowDeposit:Object(i.useCallback)((function(a,n){var c=A.a.getState().account.status===v.b.NOACCOUNT;console.log("isNoAccount: ",c,t("depositTitleAndActive"));var o={isShow:a,props:Object(r.a)({title:t(c?"depositTitleAndActive":"depositTitle"),description:"depositAndActiveDescription"},n)};e(Object(u.ib)(o))}),[e,t]),ShowTransfer:Object(i.useCallback)((function(t,a){return e(Object(u.kb)({isShow:t,props:Object(r.a)({},a)}))}),[e]),ShowWithdraw:Object(i.useCallback)((function(t,a){return e(Object(u.lb)({isShow:t,props:Object(r.a)({},a)}))}),[e]),ShowResetAccount:Object(i.useCallback)((function(t,a){return e(Object(u.jb)({isShow:t,props:Object(r.a)({},a)}))}),[e])}}var C=a(357),T=a.n(C),_=a(43),S=a(157),E=a(121),P=a(28),N=a(347),R=a(205),D=a(46),M=a(1);function L(e,t,a,n){var c=Object(O.a)(),r=c.accountId,s=c.apiKey,u=Object(i.useState)([]),l=Object(o.a)(u,2),d=l[0],b=l[1];return Object(h.a)(Object(m.a)(p.a.mark((function c(){var o,i,u,l;return p.a.wrap((function(c){for(;;)switch(c.prev=c.next){case 0:if(r&&e&&a&&P.a.userAPI){c.next=2;break}return c.abrupt("return");case 2:return o=[],c.prev=3,i=a[e],u={accountId:r,tokenSymbol:e,requestType:t,amount:n?Object(k.L)(n).times("1e"+i.decimals).toFixed(0,0):void 0},c.next=8,P.a.userAPI.getOffchainFeeAmt(u,s);case 8:(l=c.sent)&&(l.raw_data.fees.forEach((function(e,t){var n=e.fee,c=a[e.token],r=k.L(e.fee).div(N.a.pow(k.L(c.decimals))).toNumber();o.push({belong:e.token,fee:r,__raw__:n})})),b(o)),Object(D.a)("response:",l),c.next=16;break;case 13:c.prev=13,c.t0=c.catch(3),Object(k.u)(c.t0);case 16:b(o);case 17:case"end":return c.stop()}}),c,null,[[3,13]])}))),[r,s,P.a.userAPI,t,e,a]),{chargeFeeList:d}}function U(){var e=I(),t=e.ShowDeposit,a=e.ShowTransfer,n=e.ShowWithdraw,c=e.ShowResetAccount,r=Object(O.f)(),s=r.chainId,d=r.isConnected,b=r.connector,f=Object(O.a)(),j=f.account,v=f.apiKey,g=f.accountId,x=f.eddsaKey,w=Object(E.c)(),y=w.totalCoinMap,C=w.tokenMap,N=(w.marketArray,w.marketCoins,w.marketMap,Object(S.a)()),M=Object(R.b)(),U=Object(i.useState)(void 0),B=Object(o.a)(U,2),F=B[0],K=B[1],V=Object(i.useState)(void 0),W=Object(o.a)(V,2),H=W[0],Y=W[1];Object(h.a)((function(){if(N.walletLayer2){var e=Object(_.q)().walletMap;Y(e)}M.walletLayer1&&K(M.walletLayer1)}),[M.walletLayer1,N.walletLayer2]),Object(h.a)((function(){switch(N.status){case"ERROR":N.statusUnset();break;case"DONE":N.statusUnset();var e=Object(_.q)().walletMap;Y(e)}}),[N]),Object(h.a)((function(){switch(M.status){case"ERROR":M.statusUnset();break;case"DONE":M.statusUnset(),K(M.walletLayer1)}}),[M]);var G=Object(i.useState)({belong:void 0,tradeValue:0,balance:0}),q=Object(o.a)(G,2),z=q[0],J=q[1],X=Object(i.useCallback)(function(){var e=Object(m.a)(p.a.mark((function e(t,a){var n,c,r,o,i,u,l,m,f,O;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=A.a.getState().system.exchangeInfo,P.a.exchangeAPI&&C&&d&&b&&(null===n||void 0===n?void 0:n.exchangeAddress)&&(null===n||void 0===n?void 0:n.depositAddress)){e.next=3;break}return e.abrupt("return");case 3:return e.prev=3,r=C[t],e.next=7,b.getProvider();case 7:return o=e.sent,i=new T.a(o),u=j.connectName===k.f.Injected,l=null!==(c=A.a.getState().system.gasPrice)&&void 0!==c?c:20,m=parseInt(r.gasAmounts.deposit),e.next=14,k.C(i,j.accAddr);case 14:return f=e.sent,e.next=17,k.s(i,j.accAddr,r.address,null===n||void 0===n?void 0:n.depositAddress,l,m,s,f,u);case 17:return e.sent,0,e.next=21,k.t(i,j.accAddr,null===n||void 0===n?void 0:n.exchangeAddress,r,a,0,l,m,s,f+1,u);case 21:O=e.sent,Object(D.a)("!!!!deposit r:",O),e.next=28;break;case 25:e.prev=25,e.t0=e.catch(3),Object(k.u)(e.t0);case 28:case"end":return e.stop()}}),e,null,[[3,25]])})));return function(t,a){return e.apply(this,arguments)}}(),[s,d,b,j,C]),Z={tradeData:{belong:void 0},coinMap:y,walletMap:F,depositBtnStatus:u.R.AVAILABLE,onDepositClick:function(e){z&&z.belong&&X(z.belong.toString(),z.tradeValue),t(!1)},handlePanelEvent:function(){var e=Object(m.a)(p.a.mark((function e(t,a){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e){var a;(null===t||void 0===t||null===(a=t.tradeData)||void 0===a?void 0:a.belong)?(z!==t.tradeData&&J(t.tradeData),we(t.tradeData.belong)):J({belong:void 0,tradeValue:0,balance:0}),e()})));case 1:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}()},Q=Object(i.useState)({belong:void 0,tradeValue:0,balance:0}),$=Object(o.a)(Q,2),ee=$[0],te=$[1],ae=Object(i.useState)(""),ne=Object(o.a)(ae,2),ce=ne[0],re=ne[1],oe=L(ce,k.i.TRANSFER,C).chargeFeeList,ie=Object(i.useState)(),se=Object(o.a)(ie,2),ue=se[0],le=se[1],de=Object(i.useState)(),be=Object(o.a)(de,2),pe=be[0],me=be[1];Object(h.a)((function(){oe.length>0&&le(oe[0])}),[oe]);var fe=Object(i.useCallback)(function(){var e=Object(m.a)(p.a.mark((function e(t){var a,n,c,r,o,i,u,l,d,m,f;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=A.a.getState().system.exchangeInfo,P.a.userAPI&&P.a.exchangeAPI&&a&&b&&v&&s&&g&&(null===j||void 0===j?void 0:j.accAddr)){e.next=3;break}return e.abrupt("return");case 3:if(C&&ue&&pe){e.next=6;break}return console.error(ue),e.abrupt("return");case 6:return e.prev=6,n=C[t.belong],c=C[ue.belong],r=Object(k.L)(t.tradeValue).times("1e"+n.decimals).toFixed(0,0),o={accountId:g,sellTokenId:n.tokenId},e.next=13,P.a.userAPI.getNextStorageId(o,v);case 13:return i=e.sent,e.next=16,b.getProvider();case 16:return u=e.sent,l=new T.a(u),d=j.connectName,m={exchange:a.exchangeAddress,payerAddr:j.accAddr,payerId:g,payeeAddr:pe,payeeId:0,storageId:i.offchainId,token:{tokenId:n.tokenId,volume:r},maxFee:{tokenId:c.tokenId,volume:ue.__raw__},validUntil:k.n},e.next=22,P.a.userAPI.submitInternalTransfer(m,l,s,d,x,v,!1);case 22:f=e.sent,Object(D.a)("transfer r:",f),e.next=29;break;case 26:e.prev=26,e.t0=e.catch(6),Object(k.u)(e.t0);case 29:case"end":return e.stop()}}),e,null,[[6,26]])})));return function(t){return e.apply(this,arguments)}}(),[v,C,pe,g,j,b,s,x,ue]),Oe={tradeData:{belong:void 0},coinMap:y,walletMap:H,transferBtnStatus:u.R.AVAILABLE,onTransferClick:function(e){ee&&ee.belong&&fe(ee),a(!1)},handleFeeChange:function(e){le(e)},handlePanelEvent:function(){var e=Object(m.a)(p.a.mark((function e(t,a){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e){var a;(null===t||void 0===t||null===(a=t.tradeData)||void 0===a?void 0:a.belong)?(ee!==t.tradeData&&te(t.tradeData),re(t.tradeData.belong)):te({belong:void 0,tradeValue:0,balance:0}),e()})));case 1:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),chargeFeeToken:"ETH",chargeFeeTokenList:oe,handleOnAddressChange:function(e){Object(D.a)("transfer handleOnAddressChange",e),me(e)},handleAddressError:function(e){return{error:!1,message:""}}},je=Object(i.useState)({belong:void 0,tradeValue:0,balance:0}),ve=Object(o.a)(je,2),he=ve[0],ge=ve[1],Ae=Object(i.useState)(""),ke=Object(o.a)(Ae,2),xe=ke[0],we=ke[1],ye=Object(i.useState)(k.i.OFFCHAIN_WITHDRAWAL),Ie=Object(o.a)(ye,2),Ce=Ie[0],Te=Ie[1],_e=L(xe,Ce,C,he.tradeValue).chargeFeeList,Se=Ce===k.i.FAST_OFFCHAIN_WITHDRAWAL?"Fast":"Standard",Ee=Object(i.useState)(),Pe=Object(o.a)(Ee,2),Ne=Pe[0],Re=Pe[1],De=Object(i.useState)(),Me=Object(o.a)(De,2),Le=Me[0],Ue=Me[1];Object(h.a)((function(){_e.length>0&&Re(_e[0])}),[_e]);var Be=Object(i.useCallback)(function(){var e=Object(m.a)(p.a.mark((function e(t){var a,n,c,r,o,i,u,l,d,m,f;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=A.a.getState().system.exchangeInfo,P.a.userAPI&&j&&j.accountId&&j.accAddr&&b&&s&&v&&a&&a.exchangeAddress&&Ne&&t&&C&&Le){e.next=5;break}return console.error("withdraw return directly!",j,b,s,v,a),console.error("withdraw return directly!",t,Ne,C),e.abrupt("return");case 5:return n=t.belong,c=C[n],r=C[Ne.belong],o=Object(k.L)(t.tradeValue).times("1e"+c.decimals).toFixed(0,0),e.prev=9,i={accountId:j.accountId,sellTokenId:c.tokenId},e.next=13,P.a.userAPI.getNextStorageId(i,v);case 13:return u=e.sent,l={exchange:a.exchangeAddress,owner:j.accAddr,to:Le,accountId:j.accountId,storageId:u.offchainId,token:{tokenId:c.tokenId,volume:o},maxFee:{tokenId:r.tokenId,volume:Ne.__raw__},extraData:"",minGas:0,validUntil:k.n},e.next=17,b.getProvider();case 17:return d=e.sent,m=new T.a(d),e.next=21,P.a.userAPI.submitOffchainWithdraw(l,m,s,k.f.Injected,j.eddsaKey,v,!1);case 21:f=e.sent,Object(D.a)(f),e.next=28;break;case 25:e.prev=25,e.t0=e.catch(9),Object(k.u)(e.t0);case 28:case"end":return e.stop()}}),e,null,[[9,25]])})));return function(t){return e.apply(this,arguments)}}(),[v,j,b,s,Ne,C,Le]),Fe={tradeData:{belong:void 0},coinMap:y,walletMap:H,withdrawBtnStatus:u.R.AVAILABLE,onWithdrawClick:function(e){he&&he.belong&&Be(he),n(!1)},handlePanelEvent:function(){var e=Object(m.a)(p.a.mark((function e(t,a){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e){var a;(null===t||void 0===t||null===(a=t.tradeData)||void 0===a?void 0:a.belong)?(he!==t.tradeData&&ge(t.tradeData),we(t.tradeData.belong)):ge({belong:void 0,tradeValue:0,balance:0}),e()})));case 1:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),withdrawType:Se,withdrawTypes:l.X,chargeFeeToken:"ETH",chargeFeeTokenList:_e,handleFeeChange:function(e){Object(D.a)("handleWithdrawFee",e),Re(e)},handleWithdrawTypeChange:function(e){Object(D.a)("handleWithdrawTypeChange",e);var t=e===l.W.Fast?k.i.FAST_OFFCHAIN_WITHDRAWAL:k.i.OFFCHAIN_WITHDRAWAL;Te(t)},handleOnAddressChange:function(e){Object(D.a)("handleOnAddressChange",e),Ue(e)},handleAddressError:function(e){return{error:!1,message:""}}},Ke=Object(i.useState)({belong:void 0,tradeValue:0,balance:0}),Ve=Object(o.a)(Ke,2),We=Ve[0],He=Ve[1];return{depositProps:Z,withdrawProps:Fe,transferProps:Oe,resetProps:{tradeData:{belong:void 0},coinMap:y,walletMap:H,resetBtnStatus:u.R.AVAILABLE,onResetClick:function(e){We&&We.belong,c(!1)},handlePanelEvent:function(){var e=Object(m.a)(p.a.mark((function e(t,a){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e){var a;(null===t||void 0===t||null===(a=t.tradeData)||void 0===a?void 0:a.belong)?We!==t.tradeData&&He(t.tradeData):He({belong:void 0,tradeValue:0,balance:0}),e()})));case 1:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),fee:{count:234,price:123}},ammProps:{ammDepositData:{coinA:{belong:"ETH",balance:.3,tradeValue:0},coinB:{belong:"LRC",balance:1e3,tradeValue:0},slippage:""},ammWithdrawData:{coinA:{belong:"ETH",balance:.3,tradeValue:0},coinB:{belong:"LRC",balance:1e3,tradeValue:0},slippage:""},ammCalcData:{myCoinA:{belong:"ETH",balance:0,tradeValue:0},myCoinB:{belong:"LRC",balance:0,tradeValue:0},lpCoinA:{belong:"ETH",balance:0,tradeValue:0},lpCoinB:{belong:"LRC",balance:0,tradeValue:0},lpCoin:{belong:"LP-ETH-LRC",balance:0,tradeValue:0},AtoB:50,coinInfoMap:y,slippage:.5,feeJoin:"1",feeExit:"1"},handleAmmAddChangeEvent:function(e,t){Object(D.a)("handleAmmAddChangeEvent",e,t)},handleAmmRemoveChangeEvent:function(e,t){Object(D.a)("handleAmmRemoveChangeEvent",e,t)},onAmmRemoveClick:function(e){Object(D.a)("onAmmRemoveClick",e)},onAmmAddClick:function(e){Object(D.a)("onAmmAddClick",e)}},swapProps:{tradeData:void 0,tradeCalcData:{coinSell:"ETH",coinBuy:"LRC",BtoS:0,StoB:0,sellCoinInfoMap:y,buyCoinInfoMap:y,walletMap:{},slippage:.5,priceImpact:"12",minimumReceived:"1%",fee:"1%"},onSwapClick:function(e){Object(D.a)("Swap button click",e)},handleSwapPanelEvent:function(){var e=Object(m.a)(p.a.mark((function e(t,a){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:Object(D.a)(t,a);case 1:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}()}}}var B=a(154),F=a(34),K=a(2023),V=a(1960),W=["onClose","open","t"],H=Object(K.a)("common")((function(e){var t=e.onClose,a=e.open,n=e.t,c=Object(F.a)(e,W);return Object(M.jsx)(V.a,{open:a,onClose:t,"aria-labelledby":"Account information","aria-describedby":"show layer2 address, unlock/locked loopring wallet, copy address",children:Object(M.jsxs)(u.x,{style:{boxShadow:"24"},minWidth:"var(--modal-width)",children:[Object(M.jsx)(u.w,Object(r.a)({onClose:t},Object(r.a)(Object(r.a)({},c),{},{t:n}))),Object(M.jsx)(u.a,Object(r.a)({},c))]})})})),Y=function(e){var t,a=Object.assign({},e),n=U(),b=n.depositProps,y=n.withdrawProps,C=n.transferProps,T=n.resetProps,_=n.ammProps,S=n.swapProps,E=Object(c.h)(),P=function(){var e=Object(f.a)(["common","layout"]),t=e.i18n,a=e.t,n=Object(u.pb)(),c=n.setTheme,i=n.themeMode,d=n.language,b=n.setLanguage,y=I().ShowDeposit,C=Object(u.ob)(),T=C.modals,_=T.isShowAccountInfo,S=T.isShowConnect,E=C.setShowConnect,P=C.setShowAccountInfo,N=s.a.useReducer((function(e){return!e}),!1)[1],R=Object(O.a)().account,L=Object(O.e)(),U=L.lock,B=L.unlock,F=Object(O.c)().connect,K=Object(w.c)().etherscanUrl,V=[Object(r.a)(Object(r.a)({},l.Z[0]),{},{handleSelect:function(){Object(D.a)("try to connect to ",k.f.Injected),F(k.f.Injected,!0),E({isShow:!1})}}),Object(r.a)(Object(r.a)({},l.Z[1]),{},{handleSelect:function(){F(k.f.WalletConnect,!0),E({isShow:!1})}}),Object(r.a)(Object(r.a)({},l.Z[2]),{},{handleSelect:function(){F(k.f.Ledger,!0),E({isShow:!1})}}),Object(r.a)(Object(r.a)({},l.Z[3]),{},{handleSelect:function(){F(k.f.Trezor,!0),E({isShow:!1})}})],W=s.a.useState(void 0),H=Object(o.a)(W,2),Y=H[0],G=H[1],q=s.a.useCallback(Object(m.a)(p.a.mark((function e(){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:Object(D.a)("onNotification click");case 1:case"end":return e.stop()}}),e)}))),[]),z=s.a.useCallback(Object(m.a)(p.a.mark((function e(){var t;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=A.a.getState().account,Object(D.a)("onWalletBtnConnect click: ".concat(t.status)),e.t0=t.status,e.next=e.t0===v.b.UNCONNNECTED?5:e.t0===v.b.NOACCOUNT||e.t0===v.b.CONNECTED||e.t0===v.b.LOCKED||e.t0===v.b.ACTIVATED?7:9;break;case 5:return E({isShow:!0}),e.abrupt("break",10);case 7:return P({isShow:!0}),e.abrupt("break",10);case 9:return e.abrupt("break",10);case 10:case"end":return e.stop()}}),e)}))),[E,P]),J=s.a.useCallback(function(){var e=Object(m.a)(p.a.mark((function e(t){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t===g.c.dark?c(g.c.light):c(g.c.dark);case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[c]),X=function(e){b(e)};Object(h.a)((function(){l.hb[l.d.WalletConnect]=Object(r.a)(Object(r.a)({},l.hb[l.d.WalletConnect]),{},{handleClick:z}),l.hb[l.d.Theme]=Object(r.a)(Object(r.a)({},l.hb[l.d.Theme]),{},{themeMode:i,handleClick:J}),l.hb[l.d.Language]=Object(r.a)(Object(r.a)({},l.hb[l.d.Language]),{},{handleChange:X})}),[i,d,t,z,J,X,q,a]);var Z=function(e){var t=e.onClick;return Object(M.jsx)(u.l,{className:"unlock",startIcon:Object(M.jsx)(l.S,{fontSize:"large"}),onClick:function(e){t(e)},variant:"outlined",children:Object(M.jsxs)(x.a,{variant:"body2",marginTop:.5,children:["   ",a("labelUnLockLayer2")," "]})})},Q=s.a.useCallback((function(e){U(R)}),[R,U]),$=s.a.useCallback((function(e){B(R)}),[R,B]),ee=function(e){var t=e.onClick;return Object(M.jsx)(u.l,{className:"lock",startIcon:Object(M.jsx)(l.A,{fontSize:"large"}),onClick:function(e){t(e)},variant:"outlined",children:Object(M.jsxs)(x.a,{variant:"body2",marginTop:.5,children:["  ",a("labelLockLayer2")," "]})})};return Object(h.a)((function(){if(!R)return Object(D.a)("account"+R+"* exit"),void G(void 0);var e=R.status,t=Object(j.b)(null===R||void 0===R?void 0:R.accAddr),n=function(e){var a=e.status;l.fb[l.u.Layer2]=Object(r.a)(Object(r.a)({},l.fb[l.u.Layer2]),{},{status:l.v.default});var n=void 0;a===v.b.ACTIVATED?(n={addressShort:t||"",address:null===R||void 0===R?void 0:R.accAddr,level:"VIP 1",etherscanLink:K+(null===R||void 0===R?void 0:R.accAddr),mainBtn:Object(M.jsx)(ee,{onClick:function(e){Q(e)}}),connectBy:""},P({isShow:!1})):a===v.b.LOCKED?(n={addressShort:t||"",address:null===R||void 0===R?void 0:R.accAddr,level:"VIP 1",etherscanLink:K+(null===R||void 0===R?void 0:R.accAddr),mainBtn:Object(M.jsx)(Z,{onClick:function(e){$(e)}}),connectBy:""},P({isShow:!0})):a===v.b.UNACTIVATED||a===v.b.NOACCOUNT||a===v.b.DEPOSITING||a===v.b.DEPOSIT_TO_CONFIREM||a===v.b.ARPROVING||a===v.b.APPROV_TO_CONFIRM?(n={addressShort:t||"",address:null===R||void 0===R?void 0:R.accAddr,level:"VIP 1",etherscanLink:K+(null===R||void 0===R?void 0:R.accAddr),connectBy:""},P({isShow:!1})):P({isShow:!1}),n&&(n.connectBy=R.connectName),a===v.b.NOACCOUNT&&n&&(n.onLock=function(){P({isShow:!1}),y(!0)}),G(n)};switch(e){case v.b.UNCONNNECTED:l.hb[l.d.WalletConnect]=Object(r.a)(Object(r.a)({},l.hb[l.d.WalletConnect]),{},{label:a("labelConnectWallet"),status:l.V.default}),l.fb[l.u.Layer2]=Object(r.a)(Object(r.a)({},l.fb[l.u.Layer2]),{},{status:l.v.hidden}),P({isShow:!1});break;case v.b.LOCKED:l.hb[l.d.WalletConnect]=Object(r.a)(Object(r.a)({},l.hb[l.d.WalletConnect]),{},{label:t,status:l.V.connect}),n({status:e});break;case v.b.ACTIVATED:l.hb[l.d.WalletConnect]=Object(r.a)(Object(r.a)({},l.hb[l.d.WalletConnect]),{},{label:t,status:l.V.unlock}),n({status:e});break;case v.b.UNACTIVATED:case v.b.NOACCOUNT:l.hb[l.d.WalletConnect]=Object(r.a)(Object(r.a)({},l.hb[l.d.WalletConnect]),{},{label:t,status:l.V.noAccount}),n({status:e});break;case v.b.DEPOSITING:case v.b.DEPOSIT_TO_CONFIREM:case v.b.ARPROVING:case v.b.APPROV_TO_CONFIRM:l.hb[l.d.WalletConnect]=Object(r.a)(Object(r.a)({},l.hb[l.d.WalletConnect]),{},{label:t,status:l.V.accountPending}),n({status:e})}N()}),[R,K,G]),{headerToolBarData:l.hb,headerMenuData:l.fb,gatewayList:V,isShowConnect:S,isShowAccountInfo:_,setShowAccountInfo:P,setShowConnect:E,account:R,accountInfoProps:Y}}(),N=P.headerToolBarData,R=P.headerMenuData,L=P.gatewayList,F=P.isShowConnect,K=P.isShowAccountInfo,V=P.setShowAccountInfo,W=P.setShowConnect,Y=P.account,G=P.accountInfoProps,q=Object(O.d)().disconnect,z=Object(f.a)("common").t,J=Object(i.useCallback)((function(){V({isShow:!1}),W({isShow:!0})}),[W,V]),X=Object(i.useState)(!1),Z=Object(o.a)(X,2),Q=Z[0],$=Z[1],ee=Object(i.useState)(!1),te=Object(o.a)(ee,2),ae=te[0],ne=te[1];return Object(M.jsxs)(M.Fragment,{children:[Object(M.jsx)(u.O,{alertText:z("Address Copied to Clipboard!"),open:ae,autoHideDuration:g.b,setOpen:ne,severity:"success"}),Object(M.jsx)(u.z,{open:Q,onClose:function(){return $(!1)},title:"ETH Address",description:null===Y||void 0===Y?void 0:Y.accAddr,url:null!==(t=null===Y||void 0===Y?void 0:Y.accAddr)&&void 0!==t?t:""}),Object(M.jsx)(u.y,{transferProps:C,withDrawProps:y,depositProps:b,resetProps:T,ammProps:_,swapProps:S}),Object(M.jsxs)(u.s,{children:[!1,Object(M.jsx)(u.r,Object(r.a)(Object(r.a)({},a),{},{headerMenuData:R,headerToolBarData:N,selected:"/"===E.pathname?l.gb:E.pathname}))]}),Object(M.jsx)(d.a,{}),Object(M.jsx)(u.A,Object(r.a)({},Object(r.a)(Object(r.a)({},a),{},{gatewayList:L,open:F.isShow,onClose:function(){return W({isShow:!1})}}))),Object(M.jsx)(H,Object(r.a)({open:K.isShow,onClose:function(){V({isShow:!1})},onCopy:function(){Object(B.a)(Y.accAddr),ne(!0)},onViewQRCode:function(){$(!0)},onDisconnect:function(){q(),V({isShow:!1})},onSwitch:J},Object(r.a)(Object(r.a)({},G),a)))]})},G=a(33),q=a(341),z=a(1963),J=a(1938),X=a(16),Z=a(401),Q=a(404),$=a(559),ee=a(59),te=16;function ae(e,t,a,n){var c=arguments.length>4&&void 0!==arguments[4]?arguments[4]:te,r=e/te;return!(t-r>1)&&(c*t<a&&n-4<c*(t+1))}var ne,ce,re=a(1015),oe=a(13),ie=a(21),se=Object(ie.a)(J.a)(ne||(ne=Object(oe.a)(["\n  display: flex;\n  flex-direction: column;\n  width: 100%;\n  //height: 100%;\n  flex: 1;\n  background-color: ",";\n  border-radius: ","px;\n  // padding: ","px  0;\n  margin-bottom: ","px;\n  .title {\n    font-size: ","px;\n    //line-height: 19px;\n    margin-left: ","px;\n    margin-top: ","px;\n    // margin-bottom: ","px;\n  }\n\n  .tableWrapper {\n    display: flex;\n    margin-top: ","px;\n    flex: 1;\n    .rdg {\n      flex: 1;\n    }\n  }\n"])),(function(e){return e.theme.colorBase.background().default}),(function(e){return e.theme.unit}),(function(e){return 3*e.theme.unit}),(function(e){return 2*e.theme.unit}),(function(e){return 3*e.theme.unit}),(function(e){return 3*e.theme.unit}),(function(e){return 3*e.theme.unit}),(function(e){return 2*e.theme.unit}),(function(e){return 3*e.theme.unit})),ue=Object(ie.a)(z.a)(ce||(ce=Object(oe.a)(["\n  &{\n    background-color: ",";\n    border-radius: ","px;\n    .rdg{\n      .rdg-header-row {\n        border-radius: ","px ","px 0 0;\n      }\n    }\n  }\n  ","\n"])),(function(e){return e.theme.colorBase.background().default}),(function(e){return e.theme.unit}),(function(e){return e.theme.unit}),(function(e){return e.theme.unit}),(function(e){var t=e.theme;return Object(u.M)({pLeft:3*t.unit,pRight:3*t.unit})})),le=Object(q.a)(z.a,{target:"e19jzbou0"})("& .MuiGrid-root:not(:last-of-type)>div{margin-right:",(function(e){return 3*e.theme.unit}),"px;}"),de=Object(K.a)("common")((function(e){var t=s.a.useState([]),a=Object(o.a)(t,2),n=a[0],i=a[1],d=s.a.useCallback(function(){var e=Object(m.a)(p.a.mark((function e(t){var a,n;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!P.a.exchangeAPI){e.next=5;break}return e.next=3,P.a.exchangeAPI.getMixCandlestick({market:t,interval:re.TradingInterval.d1,limit:30});case 3:(a=e.sent)&&a.candlesticks&&a.candlesticks.length&&(n=a.candlesticks.map((function(e){return{timeStamp:e.timestamp,low:e.low,high:e.high,open:e.open,close:e.close,volume:e.baseVol,sign:e.close<e.open?-1:1}})),i((function(e){return[].concat(Object(G.a)(e),[{market:t,data:n}])})));case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[]),b=function(){var e=Object(Z.b)(),t=e.tickerMap,a=e.status,n=e.statusUnset,c=e.updateTickers,i=Object(Q.b)(),u=i.sendSocketTopic,d=i.socketEnd,b=A.a.getState().tokenMap,f=b.marketArray,O=b.coinMap,j=f?f.slice(0,4):["LRC-ETH","LRC-ETH","LRC-ETH","LRC-ETH"],v=f?f.filter((function(e){return-1===j.findIndex((function(t){return t===e}))})):[],h=s.a.useState([]),g=Object(o.a)(h,2),x=g[0],w=g[1],y=s.a.useState([]),I=Object(o.a)(y,2),C=I[0],T=I[1],_=s.a.useState([]),S=Object(o.a)(_,2)[1],E=s.a.useState([0,2]),P=Object(o.a)(E,2),N=P[0],R=P[1],D=s.a.useState(-1),M=Object(o.a)(D,2),L=M[0],U=M[1],F=s.a.useMemo((function(){return $.a.onSocket()}),[]),K=s.a.useCallback((function(e,t){C.length&&(C[e].tradeFloat=t,T(C))}),[C]);s.a.useEffect((function(){var e=F.subscribe((function(e){var t=e.tickerMap;t&&Reflect.ownKeys(t).forEach((function(e){var a=j.findIndex((function(t){return t===e}));-1!==a&&K(a,t[e])}))}));return function(){return e.unsubscribe()}}),[F,C]),s.a.useEffect((function(){var e=Object(o.a)(N,2),t=e[0],a=e[1];return V(t,a),Y(t*te),function(){d()}}),[]),s.a.useEffect((function(){switch(a){case"ERROR":console.log("ERROR","get ticker error,ui"),n();break;case"PENDING":break;case"DONE":n(),W(t)}}),[a,n]);var V=s.a.useCallback((function(e,t){if(v){var a=v.slice(e*te,t*te);0===e&&(a=j.concat(a)),c(a)}}),[f,te,j]),W=s.a.useCallback((function(e){var t=[],a=e&&Object.keys(e)?Reflect.ownKeys(e).reduce((function(a,n){var c=n.match(/(\w+)-(\w+)/i),i=Object(o.a)(c,3),s=i[1],u=i[2],l=Object(r.a)(Object(r.a)({},e[n]),{},{pair:{coinA:s,coinB:u}});return-1!==j.findIndex((function(e){return e===n}))&&t.push(Object(B.b)(l)),a.push(l),a}),[]):[];if(w([].concat(Object(G.a)(x),Object(G.a)(a))),0===N[0]&&t.length>0){for(;t.length<4;)t.push(Object(B.b)(t[0]));var n=t.reduce((function(e,t){if(O){var a=t.pair,n=a.coinA,c=a.coinB,r={tradeFloat:t,coinAInfo:O[n],coinBInfo:O[c]};e.push(r)}return e}),[]);T(n)}}),[x,N]),H=s.a.useCallback(Object(ee.debounce)((function(e,t){V(e,t)}),l.eb.wait),[]),Y=s.a.useCallback(Object(ee.debounce)((function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:te;if(e!==L){var a=v.slice(e,e+t);a=[].concat(Object(G.a)(j),Object(G.a)(a)),S(a),u(Object(X.a)({},k.q.ticker,a))}}),2*l.eb.wait),[L]),q=s.a.useCallback(function(){var e=Object(m.a)(p.a.mark((function e(t){var a,n;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=Object(o.a)(N,2),n=a[1],ae(t,n,v.length,x.length,te)&&(console.log("getNextPage......."),R([n,n+1]),H(n,n+1)),U(t),Y(t,te);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[N,te,a,f,x]);return{tickList:x,recommendations:C,onVisibleRowsChange:q}}(),f=b.recommendations,O=b.tickList,j=b.onVisibleRowsChange;s.a.useEffect((function(){var e=f.map((function(e){return"".concat(e.coinAInfo.simpleName,"-").concat(e.coinBInfo.simpleName)}));e.length&&(d(e[0]),d(e[1]),d(e[2]),d(e[3]))}),[f,d]);var v=Object(c.g)(),h=s.a.useCallback((function(e){var t=e.pair,a=t.coinA,n=t.coinB,c="".concat(a,"-").concat(n);v&&v.push({pathname:"/trading/lite/".concat(c)})}),[v]);return Object(M.jsxs)(J.a,{display:"flex",flexDirection:"column",flex:1,children:[Object(M.jsx)(le,{container:!0,children:f.map((function(t,a){var c,o="".concat(t.coinAInfo.simpleName,"-").concat(t.coinBInfo.simpleName),i=null===(c=n.find((function(e){return e.market===o})))||void 0===c?void 0:c.data.sort((function(e,t){return e.timeStamp-t.timeStamp}));return Object(M.jsx)(z.a,{item:!0,xs:3,onClick:function(){v&&v.push({pathname:"/trading/lite/".concat(o)})},children:Object(M.jsx)(u.u,Object(r.a)({},Object(r.a)(Object(r.a)({},t),{},{chartData:i||[]},e)))},a)}))}),Object(M.jsx)(ue,{container:!0,marginY:3,paddingBottom:2,flex:1,children:Object(M.jsx)(z.a,{item:!0,xs:12,display:"flex",children:Object(M.jsx)(u.F,Object(r.a)({onVisibleRowsChange:j,onRowClick:function(e,t,a){return h(t)},rawData:O},Object(r.a)({},e)))})})]})})),be=a(92),pe=a.n(be),me=[{value:u.m.Trend,key:u.m.Trend,label:"label"+u.m.Trend},{value:u.m.Depth,key:u.m.Depth,label:"label"+u.m.Depth}];var fe,Oe,je,ve=a(312),he=["props","coinAInfo","coinBInfo","tradeFloat","marketArray","t"],ge=function(e){e.props;var t=e.coinAInfo,a=e.coinBInfo,n=e.tradeFloat,c=e.marketArray,s=e.t,d=Object(F.a)(e,he),b=function(e,t,a,n,c){var r=me.map((function(e){var t=e.value,a=e.label,n=e.key;return{value:t,tlabel:c(a),key:n,JSX:Object(M.jsx)(M.Fragment,{children:c(a)})}})),s=Object(k.B)(n,null===t||void 0===t?void 0:t.name,null===a||void 0===a?void 0:a.name),d=s.market,b=s.amm,f=Object(i.useState)(u.m.Trend),O=Object(o.a)(f,2),j=O[0],v=O[1],g=Object(i.useState)(l.f.D1),A=Object(o.a)(g,2),x=A[0],w=A[1],y=Object(i.useState)(void 0),I=Object(o.a)(y,2),C=I[0],T=I[1],_=Object(i.useCallback)((function(e,t){T(void 0),v("Trend"===t?u.m.Trend:u.m.Depth)}),[T,v]),S=Object.keys(l.f).reduce((function(e,t){var a={value:l.f[t],key:l.f[t],label:"label"+l.f[t]};return e.push({value:a.value,tlabel:c(a.label?a.label:a.key),key:a.key,JSX:Object(M.jsx)(M.Fragment,{children:c(a.label?a.label:a.key)})}),e}),[]);return Object(h.a)(Object(m.a)(p.a.mark((function e(){var t,a,n,c,r,o,i,s;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=!0,P.a.exchangeAPI&&d&&b){e.next=3;break}return e.abrupt("return");case 3:if(j!==u.m.Trend){e.next=17;break}return a={market:b,interval:k.l.d1,limit:30},e.prev=5,e.next=8,P.a.exchangeAPI.getCandlestick(a);case 8:n=e.sent,t&&(c=n.candlesticks.map((function(e){return{timeStamp:e.timestamp,low:e.low,high:e.high,open:e.open,close:e.close,volume:e.quoteVol,change:(e.close-e.open)/e.open,date:pe()(e.timestamp).format("MMM DD")}})),T(c)),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(5),Object(k.u)(e.t0,"ChartPanel getCandlestick");case 15:e.next=29;break;case 17:return r={market:d},e.prev=18,e.next=21,P.a.exchangeAPI.getMixDepth(r);case 21:o=e.sent,i=o.depth,t&&(s={bidsPrices:i.bids_prices,bidsAmtTotals:i.bids_amtTotals,asksPrices:i.asks_prices,asksAmtTotals:i.asks_amtTotals},T(s)),e.next=29;break;case 26:e.prev=26,e.t1=e.catch(18),Object(k.u)(e.t1);case 29:return e.abrupt("return",(function(){t=!1}));case 30:case"end":return e.stop()}}),e,null,[[5,12],[18,26]])}))),[P.a.exchangeAPI,b,d,j]),{chartUnit:x,chartType:j,tgItemJSXs:r,tgItemJSXsPriceChart:S,handleChange:_,originData:C,handleChartUnitChange:function(e,t){var a="1H"===t?l.f.H1:"1W"===t?l.f.W1:l.f.D1;w(a)}}}(0,t,a,c,s),f=b.chartType,O=b.tgItemJSXs,j=(b.tgItemJSXsPriceChart,b.handleChange),v=b.originData,g=(b.chartUnit,b.handleChartUnitChange,Object(u.pb)().upColor),A=null===t||void 0===t?void 0:t.name,x=null===a||void 0===a?void 0:a.name,w=v&&v.length?v.sort((function(e,t){return e.timeStamp-t.timeStamp})):[],y=v&&t&&v.asksAmtTotals?Object(r.a)(Object(r.a)({},v),{},{asksAmtTotals:v.asksAmtTotals.map((function(e){return Number(Object(ve.a)(e,A))})),bidsAmtTotals:v.bidsAmtTotals.map((function(e){return Number(Object(ve.a)(e,A))}))}):[];return Object(M.jsxs)(M.Fragment,{children:[Object(M.jsx)(z.a,{item:!0,xs:8,children:Object(M.jsx)(u.T,Object(r.a)({},Object(r.a)(Object(r.a)({coinAInfo:t,coinBInfo:a},d),{},{t:s,tradeFloat:n})))}),Object(M.jsx)(z.a,{item:!0,xs:4,display:"flex",justifyContent:"flex-end",alignItems:"flex-end",children:Object(M.jsx)(u.P,Object(r.a)(Object(r.a)({exclusive:!0},Object(r.a)(Object(r.a)({},d),{},{t:s,tgItemJSXs:O,value:f})),{},{handleChange:j}))}),Object(M.jsx)(z.a,{item:!0,xs:12,position:"relative",children:Object(M.jsx)(J.a,{minHeight:256,maxHeight:256,display:"block",style:{height:"100%",width:"100%"},children:Object(M.jsx)(u.H,{type:f,data:f===u.m.Trend?w:y,riseColor:g,extraInfo:x,handleMove:function(){},showXAxis:!0})})})]})},Ae=a(2064),ke=a(2093),xe=function(e){return{id:"simple-tab-".concat(e),"aria-controls":"simple-tabpanel-".concat(e)}},we=ie.a.div(fe||(fe=Object(oe.a)(["\n          position: relative;\n          width: 100%;\n          margin-top: ","px;\n        "])),(function(e){return 4*e.theme.unit})),ye=(Object(ie.a)(u.q)(Oe||(Oe=Object(oe.a)(["\n          position: absolute;\n          top: 0;\n          right: ","px;\n          margin: ","px 0 0 0;\n        "])),(function(e){return e.theme.unit}),(function(e){return e.theme.unit})),Object(K.a)("common")((function(e){var t=e.tradeArray,a=e.myTradeArray,n=e.t,c=Object(i.useState)(1),s=Object(o.a)(c,2),l=s[0],d=s[1];return Object(M.jsxs)(we,{children:[Object(M.jsxs)(Ae.a,{value:l,onChange:function(e,t){d(t)},"aria-label":"tabs switch",children:[Object(M.jsx)(ke.a,Object(r.a)({label:n("labelMyTrade")},xe(0))),Object(M.jsx)(ke.a,Object(r.a)({label:n("labelRecent")},xe(1)))]}),Object(M.jsx)(ue,{marginY:2,paddingBottom:2,flex:1,children:0===l?Object(M.jsx)(u.S,{rawData:a}):Object(M.jsx)(u.S,{rawData:t})})]})}))),Ie=a(657),Ce=a(118),Te=["sell","buy","slippage"],_e=["sell","buy","slippage"],Se=Object(Ie.default)(J.a)(je||(je=Object(oe.a)(["\n  @media only screen and (min-height: 780px ) and (min-width: 1024px) {\n    position: fixed;\n  }\n"]))),Ee=Object(K.a)("common")((function(e){var t=Object.assign({},e),a=function(){var e=Object(f.a)("common").t,t=Object(i.useState)(!1),a=Object(o.a)(t,2),n=a[0],d=a[1],b=Object(i.useState)(),j=Object(o.a)(b,2),x=j[0],w=j[1],y=l.eb.wait,I=Object(c.i)(":symbol"),C=Object(E.c)(),T=C.coinMap,N=C.tokenMap,R=C.marketArray,M=C.marketCoins,L=C.marketMap,U=Object(Ce.e)().ammMap,K=Object(O.a)().account,V=Object(S.a)().delayAndUpdateWalletLayer2,W=Object(S.a)(),H=Object(i.useState)(!1),Y=Object(o.a)(H,2),q=Y[0],z=Y[1],J=s.a.useState(void 0),Z=Object(o.a)(J,2),Q=Z[0],$=Z[1],te=s.a.useState(void 0),ae=Object(o.a)(te,2),ne=ae[0],ce=ae[1],re=s.a.useState([]),oe=Object(o.a)(re,2),ie=oe[0],se=oe[1],ue=s.a.useState([]),le=Object(o.a)(ue,2),de=le[0],be=le[1],pe=s.a.useState(void 0),me=Object(o.a)(pe,2),fe=me[0],Oe=me[1],je=s.a.useState({coinAInfo:void 0,coinBInfo:void 0}),ve=Object(o.a)(je,2),he=ve[0],ge=ve[1],Ae=s.a.useState(void 0),ke=Object(o.a)(Ae,2),xe=ke[0],we=ke[1],ye=s.a.useState(void 0),Ie=Object(o.a)(ye,2),Se=Ie[0],Ee=Ie[1],Pe=Object(i.useState)(),Ne=Object(o.a)(Pe,2),Re=Ne[0],De=Ne[1],Me=Object(i.useState)("0"),Le=Object(o.a)(Me,2),Ue=Le[0],Be=Le[1],Fe=Object(i.useState)("0"),Ke=Object(o.a)(Fe,2),Ve=Ke[0],We=Ke[1];Object(h.a)(Object(m.a)(p.a.mark((function e(){var t,a,n,c,o,i,s,u,l,d,b;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=null===Q||void 0===Q?void 0:Q.sell.belong,a=null===Q||void 0===Q?void 0:Q.buy.belong,P.a.userAPI&&t&&a&&U&&R&&K.status===v.b.ACTIVATED&&K.accountId&&K.apiKey){e.next=4;break}return e.abrupt("return");case 4:if(n=Object(k.B)(R,t,a),c=n.amm){e.next=7;break}return e.abrupt("return");case 7:return o=U[c],i=o.__rawConfig__.feeBips,s={accountId:null===K||void 0===K?void 0:K.accountId,market:c},e.next=12,P.a.userAPI.getMinimumTokenAmt(s,K.apiKey);case 12:u=e.sent,l=u.amountMap,d=l[a].userOrderInfo.takerRate,b=k.L(i).plus(k.L(d)).toString(),Object(D.a)("totalFee:",b),Object(D.a)("takerRate:",d),We(b),Be(d.toString()),ce(Object(r.a)(Object(r.a)({},ne),{},{fee:b}));case 21:case"end":return e.stop()}}),e)}))),[null===Q||void 0===Q?void 0:Q.sell.belong,null===Q||void 0===Q?void 0:Q.buy.belong,R,U,K.status,K.apiKey,K.accountId]),s.a.useEffect((function(){var e,t=null!==(e=null===I||void 0===I?void 0:I.params.symbol)&&void 0!==e?e:void 0;et(t,void 0,void 0,void 0)}),[]),s.a.useEffect((function(){switch(W.status){case"ERROR":W.statusUnset();break;case"DONE":W.statusUnset();var e=Object(_.q)().walletMap;if(ne){var t,a,n,c;ce(Object(r.a)(Object(r.a)({},ne),{},{fee:Ve,walletMap:e})),$({sell:{belong:ne.sellCoinInfoMap?null===(t=ne.sellCoinInfoMap[ne.coinSell])||void 0===t?void 0:t.simpleName:void 0,balance:e?null===(a=e[ne.coinSell])||void 0===a?void 0:a.count:0},buy:{belong:ne.sellCoinInfoMap?null===(n=ne.sellCoinInfoMap[ne.coinBuy])||void 0===n?void 0:n.simpleName:void 0,balance:e?null===(c=e[ne.coinBuy])||void 0===c?void 0:c.count:0}});var o=Object(k.B)(R,ne.coinSell,ne.coinBuy).market;Object(_.h)(o).then((function(e){var t=Object(_.j)(o,e);be(t||[])}))}}}),[W.status,be,R,ne]),Object(h.a)((function(){var e=Object(_.a)(_.c);Ee(e)}),[K.status]);var He=Object(i.useCallback)(function(){var t=Object(m.a)(p.a.mark((function t(a){var n,c,o,i,s,u,l,b,m,f;return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=a.sell,c=a.buy,a.slippage,o=Object(F.a)(a,Te),i=A.a.getState().system.exchangeInfo,z(!0),P.a.userAPI&&N&&i&&Re&&K.status===v.b.ACTIVATED){t.next=8;break}return w(e("labelSwapFailed")),d(!0),z(!1),t.abrupt("return");case 8:return s=N[n.belong],u=N[c.belong],l={accountId:K.accountId,sellTokenId:s.tokenId},t.next=13,P.a.userAPI.getNextStorageId(l,K.apiKey);case 13:return b=t.sent,t.prev=14,m={exchange:i.exchangeAddress,accountId:K.accountId,storageId:b.orderId,sellToken:{tokenId:s.tokenId,volume:Re.amountS},buyToken:{tokenId:u.tokenId,volume:Re.amountBOutSlip.minReceived},allOrNone:!1,validUntil:k.n,maxFeeBips:parseInt(Ve),fillAmountBOrS:!1,orderType:k.j.ClassAmm,eddsaSignature:""},Object(D.a)(m),t.next=19,P.a.userAPI.submitOrder(m,K.eddsaKey,K.apiKey);case 19:return f=t.sent,Object(D.a)(f),t.next=23,V();case 23:$(Object(r.a)(Object(r.a)({},Q),{sell:Object(r.a)(Object(r.a)({},null===Q||void 0===Q?void 0:Q.sell),{},{tradeValue:0}),buy:Object(r.a)(Object(r.a)({},null===Q||void 0===Q?void 0:Q.buy),{},{tradeValue:0})})),w(e("labelSwapSuccess")),d(!0),z(!1),t.next=36;break;case 29:t.prev=29,t.t0=t.catch(14),z(!1),Object(k.u)(t.t0),w(e("labelSwapFailed")),d(!0),z(!1);case 36:De(void 0),o.__cache__&&Object(_.i)(o.__cache__);case 38:case"end":return t.stop()}}),t,null,[[14,29]])})));return function(e){return t.apply(this,arguments)}}(),[Q,Re,N]),Ye=Object.assign(Object(B.b)(_.d),Object(X.a)({},_.f.ACTIVATED,[He])),Ge=s.a.useCallback((function(e){var t=e.sell,a=e.buy,n=e.slippage,c=Object(F.a)(e,_e);Object(_.a)(Ye,[Object(r.a)({sell:t,buy:a,slippage:n},c)])}),[Ye]),qe=function(){var e=Object(m.a)(p.a.mark((function e(t,a){var n;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.tradeData,e.abrupt("return",new Promise((function(e){switch(a){case u.L.SEll_CLICK:case u.L.BUY_CLICK:break;case u.L.SELL_SELECTED:et("".concat(n.sell.belong,"-").concat(n.buy.belong),"sell",n,xe);break;case u.L.BUY_SELECTED:et("".concat(n.sell.belong,"-").concat(n.buy.belong),"buy",n,xe);break;case u.L.EXCHANGE_CLICK:et("".concat(n.sell.belong,"-").concat(n.buy.belong),void 0,void 0,xe)}e(void 0)})));case 2:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),ze=Object(i.useState)(),Je=Object(o.a)(ze,2),Xe=Je[0],Ze=Je[1];Object(i.useEffect)((function(){var e=function(){var e=Object(m.a)(p.a.mark((function e(){var t,a,n,c,r,o;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(he&&P.a.exchangeAPI&&he.coinAInfo){e.next=2;break}return e.abrupt("return");case 2:return c="".concat(null===(t=he.coinAInfo)||void 0===t?void 0:t.simpleName,"-").concat(null===(a=he.coinBInfo)||void 0===a?void 0:a.simpleName),e.next=5,null===(n=P.a.exchangeAPI)||void 0===n?void 0:n.getMixDepth({market:c});case 5:r=e.sent,o=r.depth,Ze(o);case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();e();var t=setInterval((function(){e()}),g.a);return function(){t&&clearInterval(t)}}),[he]);var Qe=function(){var e=Object(m.a)(p.a.mark((function e(t,a,n){var c,o,i,s,u,l,d,b,m,f,O,j;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i="".concat(null===(c=he.coinAInfo)||void 0===c?void 0:c.simpleName,"-").concat(null===(o=he.coinBInfo)||void 0===o?void 0:o.simpleName),R&&N&&L&&Xe&&U&&ne){e.next=5;break}return s=Object(r.a)({},ne),e.abrupt("return",{_tradeData:a,_tradeCalcData:s});case 5:return l=(l=(u="sell"===t)?a.sell.tradeValue:a.buy.tradeValue)?l.toString().trim():"0",d=a.sell.belong,b=a.buy.belong,void 0===(m=a.slippage)&&(m=.5),m=k.L(m).times(100).toString(),f=Object(X.a)({},"AMM-"+i,U["AMM-"+i].__rawConfig__),"0"!==l&&"0."!==l&&console.log(l,"*",d,b,u,Xe,U["AMM-"+i].__rawConfig__.tokens.pooled,null===n||void 0===n?void 0:n.pooled,Ue,m),O=k.F(l,d,b,u,R,N,L,Xe,f,n,Ue,m),De(O),ne.priceImpact=null===O||void 0===O?void 0:O.priceImpact,ne.minimumReceived=null===O||void 0===O?void 0:O.amountBOutSlip.minReceivedVal,u?a.buy.tradeValue=(null===O||void 0===O?void 0:O.output)?parseFloat(null===O||void 0===O?void 0:O.output):0:a.sell.tradeValue=(null===O||void 0===O?void 0:O.output)?parseFloat(null===O||void 0===O?void 0:O.output):0,j=Object(r.a)({},ne),e.abrupt("return",{_tradeData:a,_tradeCalcData:j});case 22:case"end":return e.stop()}}),e)})));return function(t,a,n){return e.apply(this,arguments)}}(),$e=s.a.useCallback(ee.debounce(function(){var e=Object(m.a)(p.a.mark((function e(t,a,n){var c,o,i;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Qe(t,a,n);case 2:c=e.sent,o=c._tradeData,i=c._tradeCalcData,$(o),ce(Object(r.a)(Object(r.a)({},i),{},{fee:Ve}));case 7:case"end":return e.stop()}}),e)})));return function(t,a,n){return e.apply(this,arguments)}}(),2*y),[$,ce,Qe,Ue]),et=function(){var e=Object(m.a)(p.a.mark((function e(t,a,n,c){var i,s,u,d,b,m,f,O,j,v,h,g,A,x;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:ne&&t==="".concat(ne.coinSell,"-").concat(ne.coinBuy)&&n&&a&&(!Q||Q[a].tradeValue!==n[a].tradeValue)?$e(a,n,c):(i={},s=void 0,u=Object(_.e)({coinKey:t,_tradeCalcData:{},tokenMap:N,coinMap:T}),d=Object(k.B)(R,u.coinSell,u.coinBuy),b=d.amm,m=d.market,f=m.match(/(\w+)-(\w+)/i),O=Object(o.a)(f,3),j=O[1],v=O[2],ce(Object(r.a)(Object(r.a)({},ne),{},{fee:Ve},u)),T&&ge({coinAInfo:T[j],coinBInfo:T[v]}),W.walletLayer2&&(h=Object(_.q)(),g=h.walletMap,u.walletMap=g,Object(_.h)(m).then((function(e){var t=Object(_.j)(m,e);be(t||[])}))),A=[],R&&b&&m&&U&&(A=[null===(x=P.a.exchangeAPI)||void 0===x?void 0:x.getMarketTrades({market:m}),Object(_.r)({coinKey:m,ammKey:b,ammMap:U})],Promise.all(Object(G.a)(A)).then((function(e){var t=Object(o.a)(e,2),a=t[0].marketTrades,n=t[1],c=n.ammPoolsBalance,r=n.tickMap;if(we(c),N){var l,d,b,p,f=Object(_.s)({coinKey:"".concat(u.coinSell,"-").concat(u.coinBuy),market:m,ammPoolsBalance:c,tickerData:r[m]?r[m]:{},tokenMap:N,_tradeCalcData:u,coinMap:T,marketCoins:M,fee:Ve})._tradeCalcData;u=f,i=Object(_.n)(r[m]?r[m]:{}),s=Object(_.j)(m,a),ce(u),Oe(i),se(s),$({sell:{belong:u.sellCoinInfoMap?null===(l=u.sellCoinInfoMap[u.coinSell])||void 0===l?void 0:l.simpleName:void 0,balance:u.walletMap?null===(d=u.walletMap[u.coinSell])||void 0===d?void 0:d.count:0},buy:{belong:u.sellCoinInfoMap?null===(b=u.sellCoinInfoMap[u.coinBuy])||void 0===b?void 0:b.simpleName:void 0,balance:u.walletMap?null===(p=u.walletMap[u.coinBuy])||void 0===p?void 0:p.count:0}})}})).catch((function(e){throw new l.m(Object(r.a)(Object(r.a)({},l.r.TRADE_LITE_SET_PAIR_ERROR),{},{options:e}))}))));case 1:case"end":return e.stop()}}),e)})));return function(t,a,n,c){return e.apply(this,arguments)}}();return{swapToastOpen:n,setSwapToastOpen:d,swapAlertText:x,tradeCalcData:ne,tradeFloat:fe,tradeArray:ie,myTradeArray:de,isSwapLoading:q,tradeData:Q,pair:he,marketArray:R,onSwapClick:Ge,swapBtnI18nKey:Se,handleSwapPanelEvent:qe}}(),n=a.tradeCalcData,d=a.tradeData,b=a.tradeFloat,j=a.tradeArray,x=a.myTradeArray,w=a.marketArray,y=a.handleSwapPanelEvent,I=a.onSwapClick,C=a.pair,T=a.swapBtnI18nKey,N=a.isSwapLoading,R=a.swapToastOpen,L=a.setSwapToastOpen,U=a.swapAlertText,K=Object(E.c)().coinMap,V=Object(c.h)().pathname,W=V?V.split("/")[V.split("/").length-1].split("-"):"",H=Array.isArray(W)?W[0]:"",Y=Array.isArray(W)?W[1]:"",q={coinAInfo:K?K[H]:"",coinBInfo:K?K[Y]:""},Z=q.coinAInfo?q:C;return Object(M.jsxs)(M.Fragment,{children:[Object(M.jsx)(u.O,{alertText:U,open:R,autoHideDuration:g.b,setOpen:L}),Object(M.jsxs)(z.a,{container:!0,marginRight:3,alignContent:"flex-start",children:[Object(M.jsx)(ge,Object(r.a)({},Object(r.a)(Object(r.a)(Object(r.a)({},t),Z),{},{marketArray:w,tradeFloat:b,tradeArray:j}))),Object(M.jsx)(ye,{tradeArray:j,myTradeArray:x})]}),Object(M.jsx)(J.a,{display:"flex",style:{minWidth:"var(--swap-box-width)"},children:Object(M.jsx)(Se,{children:Object(M.jsx)(u.K,Object(r.a)({tradeData:d,tradeCalcData:n,onSwapClick:I,swapBtnI18nKey:T,swapBtnStatus:N?u.R.LOADING:u.R.AVAILABLE},Object(r.a)({handleSwapPanelEvent:y},t)))})})]})})),Pe=a(2094),Ne=a(463);var Re,De,Me,Le,Ue,Be,Fe,Ke,Ve,We,He,Ye,Ge=Object(K.a)("common")((function(e){var t=e.t,a=s.a.useRef(null),n=s.a.useState(10),c=Object(o.a)(n,2),l=c[0],d=c[1],b=function(){var e=Object(O.a)(),t=e.accountId,a=e.apiKey,n=Object(i.useState)([]),c=Object(o.a)(n,2),r=c[0],s=c[1],l=function(e){return""===e?u.U.processing:"processed"===e?u.U.processed:"processing"===e?u.U.processing:"received"===e?u.U.received:u.U.failed},d=Object(i.useCallback)(Object(m.a)(p.a.mark((function e(){var n,c,r,o,i,d;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(P.a&&P.a.userAPI&&t&&a)){e.next=10;break}return e.next=3,Promise.all([P.a.userAPI.getUserTranferList({accountId:t},a),P.a.userAPI.getUserDepositHistory({accountId:t},a),P.a.userAPI.getUserOnchainWithdrawalHistory({accountId:t},a)]);case 3:n=e.sent,c=n[0].userTransfers.map((function(e){return{side:u.W.transfer,amount:Number(Object(_.t)(e.symbol,e.amount)),fee:{unit:e.feeTokenSymbol||"",value:Number(Object(_.t)(e.symbol,e.feeAmount||0))},memo:e.memo||"",time:e.timestamp,txnHash:e.hash,status:l(e.status)}})),r=n[1].userDepositHistory.map((function(e){return{side:u.W.deposit,symbol:e.symbol,amount:Number(Object(_.t)(e.symbol,e.amount)),fee:{unit:"",value:0},memo:"",time:e.timestamp,txnHash:e.txHash,status:l(e.status)}})),o=n[2].userOnchainWithdrawalHistory.map((function(e){return{side:u.W.withdraw,amount:Number(Object(_.t)(e.symbol,e.amount)),fee:{unit:e.feeTokenSymbol,value:Number(Object(_.t)(e.feeTokenSymbol,e.feeAmount))},memo:"",time:e.timestamp,txnHash:e.txHash,status:l(e.status)}})),i=[].concat(Object(G.a)(c),Object(G.a)(r),Object(G.a)(o)),d=i.sort((function(e,t){return t.time-e.time})),s(d);case 10:case"end":return e.stop()}}),e)}))),[t,a]);return Object(h.a)((function(){d()}),[d]),{txs:r}}().txs;return s.a.useEffect((function(){var e,t=null===a||void 0===a||null===(e=a.current)||void 0===e?void 0:e.offsetHeight;t&&d(Math.floor((t-120)/44)-2)}),[a,l]),Object(M.jsxs)(se,{ref:a,children:[Object(M.jsx)("div",{className:"title",children:t("labelTxnPageTitle")}),Object(M.jsx)("div",{className:"tableWrapper",children:Object(M.jsx)(u.V,Object(r.a)({},Object(r.a)({rawData:b,pagination:{pageSize:l},showFilter:!0},e)))})]})})),qe=a(1966),ze=["t"],Je=Object(ie.a)(J.a)(Re||(Re=Object(oe.a)(["\n    height: 225px;\n\n    > div {\n        position: relative;\n        width: calc(50% - 6px);\n        height: 100%;\n        background-color: ",";\n        border-radius: ","px;\n        padding: ","px ","px;\n    }\n"])),(function(e){return e.theme.colorBase.background().default}),(function(e){return e.theme.unit}),(function(e){return 2.5*e.theme.unit}),(function(e){return 3*e.theme.unit})),Xe=Object(ie.a)(J.a)(De||(De=Object(oe.a)(["\n    position: absolute;\n    z-index: 10;\n    right: ","px;\n    bottom: ","px;\n"])),(function(e){return 3*e.theme.unit}),(function(e){return 2.5*e.theme.unit})),Ze=[{value:"week",key:"1 W"},{value:"all",key:"ALL"}],Qe=Object(K.a)("common")((function(e){var t=e.t,a=Object(F.a)(e,ze),n=Object(i.useRef)(null),s=Object(i.useState)(10),d=Object(o.a)(s,2),b=d[0],f=d[1],O=Object(i.useState)("week"),j=Object(o.a)(O,2),v=j[0],h=j[1],g=Object(i.useState)([]),w=Object(o.a)(g,2),y=w[0],C=w[1],T=A.a.getState().account.accAddr,S=A.a.getState().walletLayer2.walletLayer2,E=A.a.getState().amm.ammMap.ammMap,N=Object(_.q)(),D=N&&N.walletMap?Object.keys(N.walletMap):[],L=N&&N.walletMap?Object.values(N.walletMap):[],U=D.map((function(e,t){return{token:e,detail:L[t]}})),B=Object(i.useCallback)(Object(m.a)(p.a.mark((function e(){var t,a,n,c=arguments;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=c.length>0&&void 0!==c[0]?c[0]:7,e.next=3,null===(t=P.a.walletAPI)||void 0===t?void 0:t.getUserAssets({wallet:T,assetType:k.d.DEX,limit:a});case 3:(n=e.sent)&&n.userAssets.length&&n.userAssets.length&&C(n.userAssets.map((function(e){return{timeStamp:Number(e.createdAt),close:Number(e.amount)}})));case 5:case"end":return e.stop()}}),e)}))),[T]);Object(i.useEffect)((function(){P.a&&P.a.walletAPI&&S&&B()}),[S,B]),Object(i.useEffect)((function(){var e,t=null===n||void 0===n||null===(e=n.current)||void 0===e?void 0:e.offsetHeight;t&&f(Math.floor((t-120)/44)-1)}),[n,b]);var K=I(),V=K.ShowDeposit,W=K.ShowTransfer,H=K.ShowWithdraw,Y=(K.ShowResetAccount,Object(R.b)().updateWalletLayer1),q=Object(c.g)(),z=Object(i.useCallback)((function(e){Y(),V(!0,{tradeData:{balance:"",belong:e}})}),[V,Y]),X=Object(i.useCallback)((function(e){W(!0,{tradeData:{balance:"",belong:e}})}),[W]),Z=Object(i.useCallback)((function(e){H(!0,{tradeData:{balance:"",belong:e}})}),[H]),Q=Object(i.useCallback)((function(e,t){q&&q.push("/liquidity/pools/coinPair/".concat(e,"?type=").concat(t))}),[q]),$=Object(i.useCallback)((function(e,t){B("week"===t?7:9999)}),[B]),ee=A.a.getState().system.faitPrices,te=ee?Object.entries(ee).map((function(e){return{token:e[0],detail:e[1]}})):[],ae=0;U.filter((function(e){return"LP"===e.token.split("-")[0]})).forEach((function(e){var t=e.token.split("-");t.splice(0,1,"AMM");var a=t.join("-"),n=Object.keys(E).includes(a)&&E[a]&&E[a].amountDollar?Number(E[a].amountDollar):0;ae+=n}));var ne=U.filter((function(e){return"LP"!==e.token.split("-")[0]})).map((function(e){var t,a,n,c,r="DAI"===e.token?1:Number(null===(t=te.find((function(t){return t.token===e.token})))||void 0===t?void 0:t.detail.price)/Number(null===(a=te.find((function(e){return"USDT"===e.token})))||void 0===a?void 0:a.detail.price);return{name:e.token,value:Number(Object(_.t)(e.token,null===(n=e.detail)||void 0===n||null===(c=n.detail)||void 0===c?void 0:c.total))*r}})),ce=[].concat(Object(G.a)(ne),[{name:"LP-Token",value:ae}]),re={assetInfo:{totalAsset:ce.map((function(e){return e.value})).reduce((function(e,t){return e+t}),0),priceTag:l.G.Dollar},onShowDeposit:z,onShowTransfer:X,onShowWithdraw:Z},oe=U.map((function(e){var t,a,n,c,r,o,i=Number(null===(t=te.find((function(t){return t.token===e.token})))||void 0===t?void 0:t.detail.price)/Number(null===(a=te.find((function(e){return"USDT"===e.token})))||void 0===a?void 0:a.detail.price);return{token:{type:"LP"===e.token.split("-")[0]?u.Q.lp:u.Q.single,value:e.token},amount:String(Number(Object(_.t)(e.token,null===(n=e.detail)||void 0===n?void 0:n.detail.total)).toFixed(6))||l.q,available:String(null===(c=e.detail)||void 0===c?void 0:c.count)||l.q,locked:String(null===(r=e.detail)||void 0===r?void 0:r.detail.locked)||l.q,smallBalance:i*Number(Object(_.t)(e.token,null===(o=e.detail)||void 0===o?void 0:o.detail.total))<1}}));return Object(M.jsxs)(M.Fragment,{children:[Object(M.jsx)(J.a,{children:Object(M.jsx)(u.i,Object(r.a)({},Object(r.a)(Object(r.a)({t:t},a),re)))}),Object(M.jsxs)(Je,{display:"flex",justifyContent:"space-between",alignItems:"center",marginTop:2,children:[Object(M.jsxs)(qe.a,{component:"div",children:[Object(M.jsx)(x.a,{component:"span",color:"textSecondary",variant:"body1",children:t("labelAssetsDistribution")}),Object(M.jsx)(u.o,{data:S?ce:[]})]}),Object(M.jsxs)(qe.a,{component:"div",children:[Object(M.jsx)(x.a,{component:"span",color:"textSecondary",variant:"body1",children:t("labelTotalAssets")}),Object(M.jsx)(u.H,{type:u.m.Trend,data:y}),Object(M.jsx)(Xe,{children:Object(M.jsx)(u.P,Object(r.a)({exclusive:!0,size:"small"},Object(r.a)(Object(r.a)({},a),{},{t:t,data:Ze,value:v,setValue:h,onChange:$})))})]})]}),Object(M.jsx)(se,{style:{marginTop:"".concat(2*l.nb,"px")},children:Object(M.jsx)("div",{className:"tableWrapper",ref:n,children:Object(M.jsx)(u.j,Object(r.a)({},Object(r.a)({rawData:oe,pagination:{pageSize:b},showFiliter:!0,onShowDeposit:z,onShowTransfer:X,onShowWithdraw:Z,onLpDeposit:Q,onLpWithdraw:Q},a)))})})]})})),$e=Object(K.a)("common")((function(e){var t=s.a.useRef(null),a=e.t,n=s.a.useState(10),c=Object(o.a)(n,2),d=c[0],b=c[1],f=s.a.useState([]),O=Object(o.a)(f,2),j=O[0],v=O[1],h=A.a.getState().account,g=h.accountId,x=h.apiKey,w=A.a.getState().tokenMap.tokenMap;return Object(i.useEffect)((function(){!function(){var e=Object(m.a)(p.a.mark((function e(){var t;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(P.a&&P.a.userAPI&&g&&x&&w)){e.next=5;break}return e.next=3,P.a.userAPI.getUserTrades({accountId:g},x);case 3:(t=e.sent)&&t.userTrades&&v(t.userTrades.map((function(e){var t,a,n=e.market.split("-"),c=n[n.length-2],r=n[n.length-1],o=(Object(k.L)(e.volume).times(e.price).toString(),e.side===k.k.Buy?c:r);return{side:e.side===k.k.Buy?l.R.Buy:l.R.Sell,price:{key:c,value:Object(k.L)(e.price).toNumber()},fee:{key:o,value:o?null===(t=Object(_.u)(o,e.fee))||void 0===t?void 0:t.toNumber():void 0},time:Number(e.tradeTime),amount:{from:{key:c,value:c?Object(_.t)(c,e.volume):void 0},to:{key:r,value:c?null===(a=Object(_.u)(c,e.volume))||void 0===a?void 0:a.times(e.price).toNumber():void 0}}}})));case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()()}),[g,x,w]),s.a.useEffect((function(){var e,a=null===t||void 0===t||null===(e=t.current)||void 0===e?void 0:e.offsetHeight;a&&b(Math.floor((a-120)/44)-2)}),[t,d]),Object(M.jsx)(M.Fragment,{children:Object(M.jsxs)(se,{ref:t,children:[Object(M.jsx)("div",{className:"title",children:a("labelTradePageTitle")}),Object(M.jsx)("div",{className:"tableWrapper",children:Object(M.jsx)(u.S,Object(r.a)({},Object(r.a)({rawData:j,pagination:{pageSize:d},showFilter:!0},e)))})]})})})),et=["t"],tt=Object(K.a)("common")((function(e){var t=e.t,a=Object(F.a)(e,et),n=s.a.useRef(null),c=s.a.useState(10),l=Object(o.a)(c,2),d=l[0],b=l[1],f=s.a.useState([]),O=Object(o.a)(f,2),j=O[0],v=O[1],h=A.a.getState().account,g=h.accountId,x=h.apiKey,w=A.a.getState().tokenMap.tokenMap,y=s.a.useCallback((function(e){if(w){var t=Object.keys(w),a=Object.values(w).findIndex((function(t){return t.tokenId===e}));return a>-1?t[a]:""}return""}),[w]),I=s.a.useCallback(Object(m.a)(p.a.mark((function e(){var t,a;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(P.a.ammpoolAPI&&g&&x)){e.next=5;break}return e.next=3,P.a.ammpoolAPI.getUserAmmPoolTxs({accountId:g},x);case 3:(t=e.sent)&&t.userAmmPoolTxs&&(a=t.userAmmPoolTxs.map((function(e){var t,a,n,c,r,o,i,s,l,d,b;return{side:e.txType===k.b.JOIN?u.f.Join:u.f.Exit,amount:{from:{key:y(null===(t=e.poolTokens[0])||void 0===t?void 0:t.tokenId),value:String(Object(_.t)(y(null===(a=e.poolTokens[0])||void 0===a?void 0:a.tokenId),null===(n=e.poolTokens[0])||void 0===n?void 0:n.actualAmount))},to:{key:y(null===(c=e.poolTokens[1])||void 0===c?void 0:c.tokenId),value:String(Object(_.t)(y(null===(r=e.poolTokens[1])||void 0===r?void 0:r.tokenId),null===(o=e.poolTokens[1])||void 0===o?void 0:o.actualAmount))}},lpTokenAmount:String(Object(_.t)(y(null===(i=e.lpToken)||void 0===i?void 0:i.tokenId),null===(s=e.lpToken)||void 0===s?void 0:s.actualAmount)),fee:{key:y(null===(l=e.poolTokens[1])||void 0===l?void 0:l.tokenId),value:String(Object(_.t)(y(null===(d=e.poolTokens[1])||void 0===d?void 0:d.tokenId),null===(b=e.poolTokens[1])||void 0===b?void 0:b.feeAmount))},time:e.updatedAt}})),v(a));case 5:case"end":return e.stop()}}),e)}))),[g,x,y]);return Object(i.useEffect)((function(){I()}),[I]),s.a.useEffect((function(){var e,t=null===n||void 0===n||null===(e=n.current)||void 0===e?void 0:e.offsetHeight;t&&b(Math.floor((t-120)/44)-2)}),[n,d]),Object(M.jsx)(M.Fragment,{children:Object(M.jsxs)(se,{ref:n,children:[Object(M.jsx)("div",{className:"title",children:t("labelAmmPageTitle")}),Object(M.jsx)("div",{className:"tableWrapper",children:Object(M.jsx)(u.g,Object(r.a)({},Object(r.a)({rawData:j,pagination:{pageSize:d},showFilter:!0},a)))})]})})})),at=a(2104),nt=a(2099),ct=a(2024),rt=a(140),ot=["t","i18n"],it=Object(ie.a)(z.a)(Me||(Me=Object(oe.a)(["\n  width: 100%;\n  height: 100%;\n  background-color: ",";\n  border-radius: ","px;\n"])),(function(e){return e.theme.colorBase.background().default}),(function(e){return e.theme.unit})),st=Object(ie.a)(at.a)((function(e){var t=e.theme;return{"& .Mui-checked":{color:t.colorBase.textPrimary,"& + .MuiSwitch-track.MuiSwitch-track":{border:"solid ".concat(t.colorBase.success)},"& .MuiSwitch-thumb":{backgroundColor:t.colorBase.success}},"& .MuiSwitch-track":{border:"solid ".concat(t.colorBase.error),opacity:1},"& .MuiSwitch-thumb":{backgroundColor:t.colorBase.error}}})),ut=function(e){var t=e.t,a=e.currency,n=e.label,c=e.handleChange,r=s.a.useState(a||l.l.dollar),i=Object(o.a)(r,2),d=i[0],b=i[1],p=s.a.useCallback((function(e){b(e.target.value),c&&c(e.target.value)}),[c]);return Object(M.jsxs)(u.C,{"aria-label":t(n),IconComponent:l.o,labelId:"language-selected",id:"language-selected",value:d,autoWidth:!0,onChange:p,children:[Object(M.jsxs)(u.D,{value:l.l.dollar,children:["$ ",t("labelUSDollar")]}),Object(M.jsxs)(u.D,{value:l.l.yen,children:["\xa5 ",t("labelCNYYuan")]})]})},lt=Object(ie.a)(nt.a)(Le||(Le=Object(oe.a)(["\n  margin: ","px 0 ","px 0px;\n"])),(function(e){return e.theme.unit}),(function(e){return e.theme.unit})),dt=(Object(ie.a)(nt.a)(Ue||(Ue=Object(oe.a)(["\n  margin: 0;\n  flex: 1;\n  width: 1px;\n  height: ","px;\n  background: ",";\n"])),(function(e){return 3*e.theme.unit}),(function(e){return e.theme.colorBase.focus})),Object(K.a)(["common","layout"])((function(e){var t=e.t,a=e.i18n,n=Object(F.a)(e,ot),c=Object(rt.f)(),o=Object(u.pb)(),i=o.setUpColor,s=o.setLanguage,d=o.setCurrency,b=o.currency,p=o.upColor,m=a.language;return Object(M.jsxs)(z.a,{container:!0,direction:"column",justifyContent:"space-between",alignItems:"stretch",flexWrap:"nowrap",children:[Object(M.jsx)(x.a,{variant:"h4",component:"h3",paddingLeft:2,children:t("labelTitlePreferences")}),Object(M.jsx)(it,{item:!0,xs:12,display:"flex",flexDirection:"column",marginY:2,paddingY:3,children:Object(M.jsxs)(J.a,{component:"section",display:"flex",flexDirection:"column",children:[Object(M.jsxs)(z.a,{container:!0,display:"flex",flexDirection:"row",justifyContent:"stretch",alignItems:"flex-start",paddingX:3,marginBottom:2,children:[Object(M.jsx)(z.a,{item:!0,xs:7,display:"flex",flexDirection:"column",children:Object(M.jsx)(x.a,{variant:"body1",component:"p",children:t("labelLanguage")})}),Object(M.jsx)(z.a,{item:!0,xs:5,display:"flex",flexDirection:"column",justifyContent:"space-evenly",alignItems:"flex-end",alignSelf:"stretch",children:Object(M.jsx)(z.a,{item:!0,children:Object(M.jsx)(u.k,Object(r.a)({},Object(r.a)(Object(r.a)({t:t},n),{},{language:m,label:"languageSetting",handleChange:function(e){s(e),a.changeLanguage(e)}})))})})]}),Object(M.jsx)(lt,{}),Object(M.jsxs)(z.a,{container:!0,display:"flex",flexDirection:"row",justifyContent:"stretch",alignItems:"flex-start",paddingX:3,marginY:2,children:[Object(M.jsx)(z.a,{item:!0,xs:7,display:"flex",flexDirection:"column",children:Object(M.jsx)(x.a,{variant:"body1",component:"p",children:t("labelCurrency")})}),Object(M.jsx)(z.a,{item:!0,xs:5,display:"flex",flexDirection:"column",justifyContent:"space-evenly",alignItems:"flex-end",alignSelf:"stretch",children:Object(M.jsx)(z.a,{item:!0,children:Object(M.jsx)(ut,Object(r.a)({},Object(r.a)(Object(r.a)({t:t},n),{},{currency:b,label:"currencySetting",handleChange:function(e){d(e)}})))})})]}),Object(M.jsx)(lt,{}),Object(M.jsxs)(z.a,{container:!0,display:"flex",flexDirection:"row",justifyContent:"stretch",alignItems:"flex-start",paddingX:3,marginTop:2,children:[Object(M.jsx)(z.a,{item:!0,xs:7,display:"flex",flexDirection:"column",children:Object(M.jsx)(x.a,{variant:"body1",component:"p",children:t("labelColors")})}),Object(M.jsxs)(z.a,{item:!0,xs:5,display:"flex",flexDirection:"row",justifyContent:"flex-end",alignItems:"center",alignSelf:"stretch",children:[Object(M.jsx)(x.a,{variant:"body1",component:"span",paddingX:2,children:Object(M.jsxs)(ct.a,{i18nKey:"whichColorIsUp",children:[Object(M.jsxs)("span",{style:{textTransform:"capitalize",color:p===l.T.green?c.colorBase.success:c.colorBase.error},children:[{up:p===l.T.green?t("labelgreen"):t("labelred")}," up"]}),"and ",Object(M.jsxs)("span",{style:{textTransform:"capitalize",color:p===l.T.green?c.colorBase.error:c.colorBase.success},children:[{down:p===l.T.green?t("labelred"):t("labelgreen")}," down"]})]})}),Object(M.jsx)(st,{checked:p===l.T.green,color:"default",onChange:function(e){e.target.checked?i(l.T.green):i(l.T.red)}})]})]})]})})]})}))),bt=["t"],pt=l.lb,mt=Object(ie.a)(J.a)(Be||(Be=Object(oe.a)(["\n  ","\n   \n"])),(function(e){var t=e.theme;return"\n    background-color: ".concat(t.colorBase.background().default,";\n    width: 100%;\n    min-width:auto;\n    ").concat(t.border.defaultFrame({c_key:"blur"}),";\n    & > div{\n      background-color:initial;\n      border:0;\n      width:auto;\n      min-width: var(--swap-box-width);\n      max-width: 520px;\n    }\n    ")})),ft=Object(K.a)(["common"],{withRef:!0})((function(e){var t=e.t,a=Object(u.ob)().setShowAccountInfo,n=s.a.useCallback((function(){a({isShow:!0})}),[a]);return Object(M.jsx)(u.l,{variant:"contained",size:"large",color:"primary",fullWidth:!0,style:{maxWidth:"280px"},onClick:n,children:t("labelUnlockAccount")})})),Ot=Object(K.a)(["layout","common"],{withRef:!0})(u.J),jt=function(){var e,t=Object(c.i)("/layer2/:item"),a=A.a.getState().account.status,n=Object(f.a)(),o=n.t,i=Object(F.a)(n,bt),s=null!==(e=null===t||void 0===t?void 0:t.params.item)&&void 0!==e?e:"assets",l=U().depositProps;return Object(M.jsxs)(M.Fragment,{children:["  ",a===v.b.UNCONNNECTED?Object(M.jsx)(c.a,{to:"/"}):a===v.b.NOACCOUNT||a===v.b.DEPOSITING||a===v.b.DEPOSIT_TO_CONFIREM?Object(M.jsx)(mt,{display:"flex",flexWrap:"wrap",alignItems:"center",justifyContent:"center",alignContent:"flex-start",children:Object(M.jsx)(u.n,Object(r.a)(Object(r.a)({},Object(r.a)(Object(r.a)(Object(r.a)({},i),l),{},{title:o("depositTitleAndActive"),description:"depositAndActiveDescription"})),{},{children:" "}))}):Object(M.jsxs)(M.Fragment,{children:[Object(M.jsx)(J.a,{width:"200px",display:"flex",justifyContent:"stretch",marginRight:3,marginBottom:2,children:Object(M.jsx)(u.I,{children:Object(M.jsx)(Ot,{selected:s,subMenu:pt})})}),Object(M.jsx)(J.a,{minHeight:420,display:"flex",alignItems:"stretch",flexDirection:"column",marginTop:0,flex:1,children:a===v.b.LOCKED?Object(M.jsx)(M.Fragment,{children:"setting"===s?Object(M.jsx)(dt,{}):Object(M.jsx)(J.a,{flex:1,display:"flex",justifyContent:"center",alignItems:"center",marginTop:-10,children:Object(M.jsx)(ft,{})})}):Object(M.jsxs)(M.Fragment,{children:["assets"===s&&Object(M.jsx)(Qe,{}),"transactions"===s&&Object(M.jsx)(Ge,{}),"trades"===s&&Object(M.jsx)($e,{}),"ammRecords"===s&&Object(M.jsx)(tt,{}),"setting"===s&&Object(M.jsx)(dt,{})]})})]})]})},vt=a(1016),ht=["t","ammActivityMap"],gt=Object(ie.a)(J.a)(Fe||(Fe=Object(oe.a)(["\n  width: 100%;\n  height: 100%;\n  flex: 1;\n  background-color: ",";\n  border-radius: ","px;\n\n  .rdg {\n    flex: 1;\n  }\n\n"])),(function(e){return e.theme.colorBase.background().default}),(function(e){return e.theme.unit})),At=Object(K.a)("common")((function(e){e.t,e.ammActivityMap,Object(F.a)(e,ht);var t=s.a.useRef(null),a=s.a.useState(10),n=Object(o.a)(a,2),c=n[0],r=n[1],i=Object(vt.a)({pageSize:c}),l=i.updateTickersUI,d=i.rawData,b=i.page;s.a.useEffect((function(){var e,a=null===t||void 0===t||null===(e=t.current)||void 0===e?void 0:e.offsetHeight;a&&r(Math.floor((a-120)/44)-1)}),[t,c]);var p=s.a.useCallback((function(e){l(e)}),[l]);return Object(M.jsx)(M.Fragment,{children:Object(M.jsx)(gt,{display:"flex",flexDirection:"column",ref:t,children:Object(M.jsx)(u.E,{rawData:d,handlePageChange:p,page:b,pagination:{pageSize:c}})})})})),kt=a(2073),xt=a(2095),wt=a(2079),yt=["pair","walletMap","ammType","snapShotData"],It=function(e){var t=e.pair,a=e.walletMap,n=e.ammType,c=e.snapShotData,d=Object(F.a)(e,yt),b=function(e){var t,a=e.pair,n=e.walletMap,c=e.ammType,u=e.snapShotData,d=Object(i.useState)(!1),b=Object(o.a)(d,2),j=b[0],x=b[1],w=Object(i.useState)(),I=Object(o.a)(w,2),C=I[0],T=I[1],R=Object(f.a)("common").t,M=Object(E.c)(),L=M.coinMap,U=M.tokenMap,F=Object(Ce.e)().ammMap,K=Object(O.a)().account,V=Object(S.a)().delayAndUpdateWalletLayer2,W=s.a.useState(),H=Object(o.a)(W,2),Y=H[0],G=H[1],q=s.a.useState({coinA:{belong:void 0},coinB:{belong:void 0},slippage:.5}),z=Object(o.a)(q,2),J=z[0],Z=z[1],Q=s.a.useState({coinA:{belong:void 0},coinB:{belong:void 0},slippage:.5}),$=Object(o.a)(Q,2),te=$[0],ae=$[1],ne=s.a.useState(void 0),ce=Object(o.a)(ne,2),re=ce[0],oe=ce[1],ie=s.a.useState(void 0),se=Object(o.a)(ie,2),ue=se[0],le=se[1],de=s.a.useCallback(function(){var e=Object(m.a)(p.a.mark((function e(t){var a;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=Object(_.b)({pair:t,ammType:c,_ammCalcData:{},tokenMap:U,coinMap:L,walletMap:n,ammMap:F,tickerData:null===u||void 0===u?void 0:u.tickerData,ammPoolsBalance:null===u||void 0===u?void 0:u.ammPoolsBalance}),G(Object(r.a)(Object(r.a)({},Y),a)),a.myCoinA&&(Z({coinA:Object(r.a)(Object(r.a)({},a.myCoinA),{},{tradeValue:void 0}),coinB:Object(r.a)(Object(r.a)({},a.myCoinB),{},{tradeValue:void 0}),slippage:.5}),ae({coinA:Object(r.a)(Object(r.a)({},a.lpCoinA),{},{tradeValue:void 0}),coinB:Object(r.a)(Object(r.a)({},a.lpCoinB),{},{tradeValue:void 0}),slippage:.5}));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[u,n,J,te]),be=Object(i.useState)(),pe=Object(o.a)(be,2),me=pe[0],fe=pe[1];Object(h.a)(Object(m.a)(p.a.mark((function e(){var t,n;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=function(){var e=Object(m.a)(p.a.mark((function e(){var t,n,c,r,o,i,s,u,l,d,b,m,f;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((null===(t=a.coinAInfo)||void 0===t?void 0:t.simpleName)&&(null===(n=a.coinBInfo)||void 0===n?void 0:n.simpleName)&&P.a.ammpoolAPI){e.next=3;break}return T(R("labelAmmJoinFailed")),e.abrupt("return");case 3:if(c=A.a.getState().tokenMap,r=c.marketArray,o=c.marketMap,i=A.a.getState().amm.ammMap.ammMap,s=Object(k.B)(r,a.coinAInfo.simpleName,a.coinBInfo.simpleName),u=s.market,l=s.amm,u&&l&&o){e.next=8;break}return e.abrupt("return");case 8:return d=i[l],b={poolAddress:d.address},e.next=12,P.a.ammpoolAPI.getAmmPoolSnapshot(b);case 12:if(m=e.sent){e.next=15;break}return e.abrupt("return");case 15:f=m.ammPoolSnapshot,fe(f);case 17:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),e.next=3,t();case 3:return n=setInterval(Object(m.a)(p.a.mark((function e(){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t();case 1:case"end":return e.stop()}}),e)}))),g.a),e.abrupt("return",(function(){n&&clearInterval(n)}));case 5:case"end":return e.stop()}}),e)}))),[a,P.a.ammpoolAPI]);var Oe=Object(i.useState)(),je=Object(o.a)(Oe,2),ve=je[0],he=je[1],ge=Object(i.useState)(),Ae=Object(o.a)(ge,2),ke=Ae[0],xe=Ae[1],we=Object(y.c)((function(e){return e.account})).status;Object(h.a)(Object(m.a)(p.a.mark((function e(){var t,n,c,o,i,s,u,l,d,b,m;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(P.a.userAPI&&(null===(t=a.coinBInfo)||void 0===t?void 0:t.simpleName)&&we===v.b.ACTIVATED&&Y&&U){e.next=2;break}return e.abrupt("return");case 2:return n=U[a.coinBInfo.simpleName],c=A.a.getState().account,o={accountId:c.accountId,requestType:k.i.AMM_JOIN,tokenSymbol:a.coinBInfo.simpleName},e.next=7,P.a.userAPI.getOffchainFeeAmt(o,c.apiKey);case 7:return i=e.sent,s=i.fees,he(s),u=k.L(s[a.coinBInfo.simpleName].fee).div(N.a.pow(n.decimals)).toString()+" "+a.coinBInfo.simpleName,l={accountId:c.accountId,requestType:k.i.AMM_EXIT,tokenSymbol:a.coinBInfo.simpleName},e.next=14,P.a.userAPI.getOffchainFeeAmt(l,c.apiKey);case 14:d=e.sent,b=d.fees,xe(b),m=k.L(b[a.coinBInfo.simpleName].fee).div(N.a.pow(n.decimals)).toString()+" "+a.coinBInfo.simpleName,Object(D.a)("-> feeJoin:",u," feeExit:",m),G(Object(r.a)(Object(r.a)({},Y),{},{feeJoin:u,feeExit:m}));case 20:case"end":return e.stop()}}),e)}))),[P.a.userAPI,null===(t=a.coinBInfo)||void 0===t?void 0:t.simpleName,Y,we,U]);var ye=Object(i.useState)(),Ie=Object(o.a)(ye,2),Te=Ie[0],_e=Ie[1],Se=s.a.useCallback(Object(ee.debounce)(function(){var e=Object(m.a)(p.a.mark((function e(t,a,n,c){var r,o,i,s,u,l,d,b,m,f,O,j,v,h,g,x,w,y,I,C,T,_,S,E,P;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t&&U&&t.coinA.belong&&t.coinB.belong&&c&&n){e.next=2;break}return e.abrupt("return");case 2:if(Object(D.a)("handlerJoinInDebounce",t,a),r=t.slippage,o=k.L(r).div(100).toString(),i="coinA"===a,s=A.a.getState().account,u=A.a.getState().tokenMap,l=u.idIndex,d=u.marketArray,b=u.marketMap,m=A.a.getState().amm.ammMap.ammMap,f=Object(k.B)(d,t.coinA.belong,t.coinB.belong),O=f.market,j=f.amm,O&&j&&b){e.next=12;break}return e.abrupt("return");case 12:v=b[O],h=m[j],g=U[t.coinA.belong],x=U[t.coinB.belong],w=c.pooled[0],y=c.pooled[1],I=t.coinA.tradeValue?k.L(t.coinA.tradeValue).times(g.decimals).toFixed(0,0):"0",(C=k.r(I,i,w,y)).output,C.ratio,T=t.coinA.tradeValue?t.coinA.tradeValue.toString():0,_=t.coinB.tradeValue?t.coinB.tradeValue.toString():0,S=i?T:_,E=Object(k.J)(S,i,o,s.accAddr,n,m[j],c,U,l,0,0),P=E.request,i?t.coinB.tradeValue=parseFloat(Object(k.L)(P.joinTokens.pooled[1].volume).div("1e"+x.decimals).toFixed(v.precisionForPrice)):t.coinA.tradeValue=parseFloat(Object(k.L)(P.joinTokens.pooled[0].volume).div("1e"+g.decimals).toFixed(v.precisionForPrice)),Z({coinA:t.coinA,coinB:t.coinB,slippage:r}),_e({ammInfo:h,request:P});case 27:case"end":return e.stop()}}),e)})));return function(t,a,n,c){return e.apply(this,arguments)}}(),l.eb.wait),[]),Ee=s.a.useCallback(function(){var e=Object(m.a)(p.a.mark((function e(t,a){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Se(t,a,ve,me);case 2:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),[ve,me]),Pe=s.a.useCallback(function(){var e=Object(m.a)(p.a.mark((function e(t){var a,n,c,o,i,s,u,l,d;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(He(!0),P.a.ammpoolAPI&&P.a.userAPI&&Te){e.next=7;break}return Object(D.a)(" onAmmJoin ammpoolAPI:",P.a.ammpoolAPI,"joinRequest:",Te),T(R("labelJoinAmmFailed")),x(!0),He(!1),e.abrupt("return");case 7:return a=A.a.getState().account,n=Te.ammInfo,c=Te.request,o={chainId:A.a.getState().system.chainId,ammName:n.__rawConfig__.name,poolAddress:n.address,eddsaKey:a.eddsaKey},e.prev=10,i={accountId:a.accountId,sellTokenId:c.joinTokens.pooled[0].tokenId},e.next=14,P.a.userAPI.getNextStorageId(i,a.apiKey);case 14:return s=e.sent,u={accountId:a.accountId,sellTokenId:c.joinTokens.pooled[1].tokenId},e.next=18,P.a.userAPI.getNextStorageId(u,a.apiKey);case 18:return l=e.sent,c.storageIds=[s.offchainId,l.offchainId],Z(Object(r.a)(Object(r.a)({},J),{coinA:Object(r.a)(Object(r.a)({},J.coinA),{},{tradeValue:0}),coinB:Object(r.a)(Object(r.a)({},J.coinB),{},{tradeValue:0})})),e.next=23,P.a.ammpoolAPI.joinAmmPool(c,o,a.apiKey);case 23:return d=e.sent,Object(D.a)("join ammpool response:",d),e.next=27,V();case 27:T(R("labelJoinAmmSuccess")),e.next=34;break;case 30:e.prev=30,e.t0=e.catch(10),Object(k.u)(e.t0),T(R("labelJoinAmmFailed"));case 34:return e.prev=34,x(!0),He(!1),e.finish(34);case 38:t.__cache__&&Object(_.i)(t.__cache__);case 39:case"end":return e.stop()}}),e,null,[[10,30,34,38]])})));return function(t){return e.apply(this,arguments)}}(),[Te,J]),Ne=Object.assign(Object(B.b)(_.d),Object(X.a)({},_.f.ACTIVATED,[Pe])),Re=s.a.useCallback((function(e){Object(_.a)(Ne,[e])}),[Ne]),De=Object(i.useState)(),Me=Object(o.a)(De,2),Le=Me[0],Ue=Me[1],Be=s.a.useCallback(Object(ee.debounce)(function(){var e=Object(m.a)(p.a.mark((function e(t,a,n,c){var r,o,i,s,u,l,d,b,m,f,O,j,v,h,g,x,w,y,I,C,T;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(U&&t.coinA.belong&&t.coinB.belong&&c&&n){e.next=2;break}return e.abrupt("return");case 2:if(Object(D.a)("handleExitInDebounce",t,a),r="coinA"===a,o=A.a.getState().account,i=A.a.getState().tokenMap,s=i.idIndex,u=i.marketArray,l=i.marketMap,d=A.a.getState().amm.ammMap.ammMap,b=Object(k.B)(u,t.coinA.belong,t.coinB.belong),m=b.market,f=b.amm,m&&f&&l){e.next=10;break}return e.abrupt("return");case 10:O=l[m],j=d[f],v=U[t.coinA.belong],h=U[t.coinB.belong],g=c.pooled[0],x=c.pooled[1],w=t.coinA.tradeValue?k.L(t.coinA.tradeValue).times(v.decimals).toFixed(0,0):"0",(y=k.r(w,r,g,x)).output,y.ratio,I=r?t.coinA.tradeValue.toString():t.coinB.tradeValue.toString(),C=Object(k.I)(I,r,"0.001",o.accAddr,n,d[f],c,U,s,0),T=C.request,r?t.coinB.tradeValue=parseFloat(Object(k.L)(T.exitTokens.unPooled[1].volume).div("1e"+h.decimals).toFixed(O.precisionForPrice)):t.coinA.tradeValue=parseFloat(Object(k.L)(T.exitTokens.unPooled[0].volume).div("1e"+v.decimals).toFixed(O.precisionForPrice)),ae({coinA:t.coinA,coinB:t.coinB,slippage:.5}),Ue({rawVal:I,ammInfo:j,request:T});case 23:case"end":return e.stop()}}),e)})));return function(t,a,n,c){return e.apply(this,arguments)}}(),l.eb.wait),[]),Fe=s.a.useCallback(function(){var e=Object(m.a)(p.a.mark((function e(t,a){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Be(t,a,ke,me);case 2:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),[ke,me]);Object(h.a)((function(){var e=Object(_.a)(_.c);oe(e),le(e)}),[K.status,_.c]);var Ke=Object(i.useState)(!1),Ve=Object(o.a)(Ke,2),We=Ve[0],He=Ve[1],Ye=Object(i.useState)(!1),Ge=Object(o.a)(Ye,2),qe=Ge[0],ze=Ge[1],Je=s.a.useCallback(function(){var e=Object(m.a)(p.a.mark((function e(t){var a,n,c,o,i,s,u;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(ze(!0),Object(D.a)("removeAmmCalculator props:",t),P.a.ammpoolAPI&&P.a.userAPI&&Le){e.next=8;break}return Object(D.a)(" onExit ammpoolAPI:",P.a.ammpoolAPI,"exitRequest:",Le),T(R("labelExitAmmFailed")),x(!0),ze(!1),e.abrupt("return");case 8:return a=A.a.getState().account,n=Le.ammInfo,c=Le.request,o={chainId:A.a.getState().system.chainId,ammName:n.__rawConfig__.name,poolAddress:n.address,eddsaKey:a.eddsaKey},i={accountId:a.accountId,sellTokenId:c.exitTokens.burned.tokenId},e.next=14,P.a.userAPI.getNextStorageId(i,a.apiKey);case 14:return s=e.sent,c.storageId=s.offchainId,e.prev=16,Object(D.a)("exit req:",c),ae(Object(r.a)(Object(r.a)({},te),{coinA:Object(r.a)(Object(r.a)({},te.coinA),{},{tradeValue:0}),coinB:Object(r.a)(Object(r.a)({},te.coinB),{},{tradeValue:0})})),e.next=21,P.a.ammpoolAPI.exitAmmPool(c,o,a.apiKey);case 21:return u=e.sent,Object(D.a)("exit ammpool response:",u),e.next=25,V();case 25:T(R("labelExitAmmSuccess")),e.next=32;break;case 28:e.prev=28,e.t0=e.catch(16),Object(k.u)(e.t0),T(R("labelExitAmmFailed"));case 32:return e.prev=32,x(!0),ze(!1),e.finish(32);case 36:case"end":return e.stop()}}),e,null,[[16,28,32,36]])})));return function(t){return e.apply(this,arguments)}}(),[Le,te]),Xe=Object.assign(Object(B.b)(_.d),Object(X.a)({},_.f.ACTIVATED,[Je])),Ze=s.a.useCallback((function(e){Object(D.a)("onAmmRemoveClick, exitRequest:",Le," ammExitData:",te),Object(_.a)(Xe,[e])}),[Le,te]);return s.a.useEffect((function(){u&&de(a)}),[u,a,n]),{ammAlertText:C,ammToastOpen:j,setAmmToastOpen:x,ammCalcData:Y,ammJoinData:J,ammExitData:te,isJoinLoading:We,isExitLoading:qe,handleJoinAmmPoolEvent:Ee,handleExitAmmPoolEvent:Fe,onAmmRemoveClick:Ze,onAmmAddClick:Re,ammDepositBtnI18nKey:re,ammWithdrawBtnI18nKey:ue}}({pair:t,snapShotData:c,walletMap:a,ammType:n||u.d.Deposit}),j=b.ammAlertText,x=b.ammToastOpen,w=b.setAmmToastOpen,I=b.ammCalcData,C=b.ammJoinData,T=b.ammExitData,R=b.handleJoinAmmPoolEvent,L=b.handleExitAmmPoolEvent,U=b.onAmmRemoveClick,K=b.onAmmAddClick,V=b.isJoinLoading,W=b.isExitLoading,H=b.ammDepositBtnI18nKey,Y=b.ammWithdrawBtnI18nKey,G=s.a.useCallback((function(){return!(c&&c.tickerData&&c.ammPoolsBalance||void 0!==H||void 0!==Y)||(!(!V&&!W)||void 0)}),[c,Y,Y,V,W]);return Object(M.jsxs)(M.Fragment,{children:[Object(M.jsx)(u.O,{alertText:j,open:x,autoHideDuration:g.b,setOpen:w}),t?Object(M.jsx)(u.c,Object(r.a)(Object(r.a)({},Object(r.a)({},d)),{},{ammDepositData:C,ammWithdrawData:T,ammCalcData:I,handleAmmAddChangeEvent:R,handleAmmRemoveChangeEvent:L,onAmmRemoveClick:U,onAmmAddClick:K,tabSelected:n||u.d.Deposit,ammDepositBtnI18nKey:H,ammWithdrawBtnI18nKey:Y,ammDepositBtnStatus:G()?u.R.LOADING:u.R.AVAILABLE,ammWithdrawBtnStatus:G()?u.R.LOADING:u.R.AVAILABLE})):Object(M.jsx)(J.a,{width:"var(--swap-box-width)"})]})},Ct=a(348),Tt=a(403),_t=a(303),St=a(251),Et=function(e){var t=e.ammMap,a=e.coinMap,n=e.ammActivityMap,c=e.ammKey;if(t&&a){var r=Object(B.b)(t[c]),o=n[c];return r&&r.coinA&&(r.myCoinA=a[r.coinA],r.myCoinB=a[r.coinB],r.activity=o||{}),r}},Pt=["t","ammActivityMap"],Nt=Object(ie.a)(J.a)(Ke||(Ke=Object(oe.a)(["\n  flex: 1;\n  background-color: ",";\n  border-radius: ","px;\n  padding: ","px;\n  height: 120px;\n  // min-width: 160px;\n  max-width: 210px;\n  // & .MuiAvatar-root {\n    //     height: ",";\n    //     width: ",";\n  // }\n"])),(function(e){return e.theme.colorBase.background().default}),(function(e){return e.theme.unit}),(function(e){return 2*e.theme.unit}),(function(e){return e.theme.fontDefault.h4}),(function(e){return e.theme.fontDefault.h4})),Rt=Object(ie.a)(J.a)(Ve||(Ve=Object(oe.a)(["\n  background-color: ",";\n  border-radius: ","px;\n  padding: ","px;\n  width: var(--swap-box-width);\n  box-sizing: border-box;\n  //height: 120px;\n  //min-width: 160px;\n  // & .MuiAvatar-root {\n    //   height: ",";\n    //   width: ",";\n  // }\n"])),(function(e){return e.theme.colorBase.background().default}),(function(e){return e.theme.unit}),(function(e){return 2*e.theme.unit}),(function(e){return e.theme.fontDefault.h4}),(function(e){return e.theme.fontDefault.h4})),Dt=Object(K.a)("common")((function(e){var t,a,n,i,d,b,f,O,j,v,h,g,w,y,I,C,T,N,R=e.t,D=e.ammActivityMap,L=Object(F.a)(e,Pt),U=Object(u.pb)().currency,B=function(e){var t=Object(c.i)("/liquidity/pools/coinPair/:symbol"),a=Object(E.c)(),n=a.coinMap,i=a.tokenMap,u=a.marketArray,l=(Object(Tt.b)().faitPrices,Object(Ce.e)()),d=Object(St.a)(),b=l.ammMap,f=l.getAmmMap,O=Object(S.a)(),j=s.a.useState(void 0),v=Object(o.a)(j,2),h=v[0],g=v[1],x=s.a.useState([]),w=Object(o.a)(x,2),y=w[0],I=(w[1],s.a.useState([])),C=Object(o.a)(I,2),T=C[0],N=C[1],R=s.a.useState(void 0),D=Object(o.a)(R,2),M=D[0],L=D[1],U=s.a.useState(void 0),B=Object(o.a)(U,2),F=B[0],K=B[1],V=s.a.useState({feeA:0,feeB:0,feeDollar:0,feeYuan:0,reward:0,rewardToken:void 0,balanceA:0,balanceB:0,balanceYuan:0,balanceDollar:0}),W=Object(o.a)(V,2),H=W[0],Y=W[1],G=s.a.useState({myCoinA:void 0,myCoinB:void 0,activity:void 0,totalRewards:void 0,amountDollar:void 0,amountYuan:void 0,totalLPToken:void 0,totalA:void 0,totalB:void 0,rewardToken:void 0,rewardValue:void 0,feeA:void 0,feeB:void 0,isNew:void 0,isActivity:void 0,APY:void 0}),q=Object(o.a)(G,2),z=q[0],J=q[1],X=s.a.useState(void 0),Z=Object(o.a)(X,2),Q=Z[0],$=Z[1],ee=s.a.useState({coinAInfo:void 0,coinBInfo:void 0}),te=Object(o.a)(ee,2),ae=te[0],ne=te[1],ce=s.a.useState([]),re=Object(o.a)(ce,2),oe=re[0],ie=re[1],se=s.a.useCallback((function(e){var t,a=Object(_.q)().walletMap;return g(a),a&&(null===(t=Object(Ct.a)())||void 0===t||t.then((function(t){var a=Object(Ct.d)(e,t);N(a||[])}))),a}),[_.q,Ct.a,Ct.d,u,ae]),ue=s.a.useCallback(Object(m.a)(p.a.mark((function e(){var t,a,n,c,o;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(P.a.exchangeAPI&&z.coinA&&z.coinB)){e.next=8;break}return t=z.myCoinA,a=z.myCoinB,n="".concat(null===t||void 0===t?void 0:t.name,"-").concat(null===a||void 0===a?void 0:a.name),e.next=5,P.a.exchangeAPI.getMixCandlestick({market:n,interval:k.l.d1,limit:30});case 5:c=e.sent,o=c.candlesticks.map((function(e){return Object(r.a)(Object(r.a)({},e),{},{timeStamp:e.timestamp,date:pe()(e.timestamp).format("MMM DD")})})).sort((function(e,t){return e.timeStamp-t.timeStamp})),ie(o);case 8:case"end":return e.stop()}}),e)}))),[z]);return s.a.useEffect((function(){ue()}),[ue]),s.a.useEffect((function(){var a,c=null!==(a=null===t||void 0===t?void 0:t.params.symbol)&&void 0!==a?a:void 0,s={},l=c.match(/(\w+)-(\w+)/i),d=Object(o.a)(l,3),p=d[1],m=d[2],j=Object(k.B)(u,p,m),v=j.amm,h=j.market,g=Et({ammMap:b,coinMap:n,ammActivityMap:e,ammKey:v});if(J(g||{}),n&&ne({coinAInfo:n[p],coinBInfo:n[m]}),O.walletLayer2&&se(h),v&&h&&b){f();var A=[Object(_.r)({coinKey:h,ammKey:v,ammMap:b})];Promise.all([].concat(A)).then((function(e){var t=Object(o.a)(e,1)[0],a=t.ammPoolsBalance,n=t.tickMap;if(i){var c={tickerData:n[h],ammPoolsBalance:a};s=Object(_.n)(n[h]?n[h]:{}),$(s),J(Object(r.a)({},g)),K(c)}})).catch((function(e){throw console.log(e),Error}))}}),[]),s.a.useEffect((function(){var e,t,a=Object(k.B)(u,null===(e=ae.coinAInfo)||void 0===e?void 0:e.simpleName,null===(t=ae.coinBInfo)||void 0===t?void 0:t.simpleName).market;if(a&&F&&F.ammPoolsBalance)switch(O.status){case"ERROR":O.statusUnset();break;case"DONE":O.statusUnset();var n=se(a),c=Object(_t.a)(a,n,M,F);Y(c)}}),[O.status,M]),s.a.useEffect((function(){var e,t,a=Object(k.B)(u,null===(e=ae.coinAInfo)||void 0===e?void 0:e.simpleName,null===(t=ae.coinBInfo)||void 0===t?void 0:t.simpleName).market;if(a)switch(d.status){case"ERROR":d.statusUnset();break;case"DONE":var n=A.a.getState().userRewardsMap.userRewardsMap;L(n);var c=Object(_t.a)(a,h,M,F);Y(c)}}),[d.status]),s.a.useEffect((function(){if("ERROR"===l.status)l.statusUnset();else if("DONE"===l.status){var t,a;if(l.statusUnset(),l.ammMap&&(null===(t=ae.coinAInfo)||void 0===t?void 0:t.simpleName)&&(null===(a=ae.coinBInfo)||void 0===a?void 0:a.simpleName)){var c=Et({ammMap:b,coinMap:n,ammActivityMap:e,ammKey:"AMM-"+ae.coinAInfo.simpleName+ae.coinBInfo.simpleName});J(Object(r.a)(Object(r.a)(Object(r.a)({},z),c),{},{tradeFloat:z.tradeFloat}))}}}),[l.status,l.ammMap,ae,e,i]),{walletMap:h,myAmm:H,coinPairInfo:z,snapShotData:F,pair:ae,tradeFloat:Q,ammMarketArray:y,myAmmMarketArray:T,pairHistory:oe}}({ammActivityMap:D}),K=B.tradeFloat,V=B.snapShotData,W=B.pair,H=B.coinPairInfo,Y=B.walletMap,G=B.ammMarketArray,q=B.myAmmMarketArray,X=B.myAmm,Z=B.pairHistory,Q=s.a.useState(0),$=Object(o.a)(Q,2),ee=$[0],te=($[1],s.a.useState((null===L||void 0===L?void 0:L.page)?L.page:1)),ae=Object(o.a)(te,2),ne=ae[0],ce=ae[1],re=s.a.useCallback((function(e){ce(e)}),[]),oe=Object(u.pb)().coinJson,ie=oe[null===(t=H.myCoinA)||void 0===t?void 0:t.simpleName],ue=oe[null===(a=H.myCoinB)||void 0===a?void 0:a.simpleName];return Object(M.jsxs)(M.Fragment,{children:[Object(M.jsxs)(z.a,{container:!0,children:[Object(M.jsxs)(z.a,{item:!0,xs:7,children:[Object(M.jsxs)(kt.a,{"aria-label":"breadcrumb",children:[Object(M.jsx)(xt.a,{color:"textSecondary",href:"/#/liquidity/pools",children:R("labelAmmList")}),Object(M.jsxs)(x.a,{color:"textSecondary",display:"flex",alignItems:"center",justifyContent:"center",children:[null===(n=W.coinAInfo)||void 0===n?void 0:n.simpleName,"-",null===(i=W.coinBInfo)||void 0===i?void 0:i.simpleName]})]}),Object(M.jsx)(z.a,{item:!0,xs:12,marginTop:2,children:Object(M.jsx)(u.T,Object(r.a)({},Object(r.a)(Object(r.a)(Object(r.a)({},L),{},{t:R},W),{},{tradeFloat:K,isNew:!1})))})]}),Object(M.jsx)(z.a,{item:!0,xs:4,alignItems:"center",justifyContent:"flex-end",display:"flex",children:"undefined"===typeof H.isActivity?"":Object(M.jsxs)(Rt,{paddingY:3,paddingX:2.5,display:"flex",flexDirection:"column",children:[Object(M.jsxs)(J.a,{display:"flex",flexDirection:"row",justifyContent:"space-between",children:[Object(M.jsxs)(x.a,{display:"flex",flexDirection:"column",component:"div",children:[Object(M.jsx)(x.a,{variant:"body2",component:"h5",color:"textSecondary",children:R("labelReward")}),Object(M.jsx)(x.a,{variant:"body1",component:"span",color:"textPrimary",children:"undefined"===typeof H.isActivity?l.q:Object(M.jsxs)(M.Fragment,{children:[Object(M.jsxs)(x.a,{component:"span",children:[H.activity?Object(l.cb)(H.activity.totalRewards):l.q," "]}),Object(M.jsx)(x.a,{component:"span",children:null===(d=H.activity)||void 0===d||null===(b=d.rewardToken)||void 0===b?void 0:b.simpleName})]})})]}),Object(M.jsxs)(x.a,{display:"flex",flexDirection:"column",alignItems:"flex-end",component:"div",children:[Object(M.jsx)(x.a,{variant:"body2",component:"h5",color:"textSecondary",children:R("labelMyReward")}),Object(M.jsx)(x.a,{variant:"body1",component:"span",color:"textPrimary",children:"undefined"===typeof X.reward?l.q:Object(M.jsxs)(M.Fragment,{children:[Object(M.jsxs)(x.a,{component:"span",children:[" ",Object(l.cb)(X.reward)," "]}),Object(M.jsxs)(x.a,{component:"span",children:[" ",null===(f=H.activity)||void 0===f||null===(O=f.rewardToken)||void 0===O?void 0:O.simpleName]})]})})]})]}),Object(M.jsx)(x.a,{alignSelf:"flex-start",variant:"body2",color:"textSecondary",component:"span",marginTop:1,children:"undefined"===typeof H.isActivity?R("labelNoActiveEvent"):Object(M.jsxs)(M.Fragment,{children:[R("labelDate")," :",Object(M.jsxs)(M.Fragment,{children:[" "," "+pe()(null===(j=H.activity)||void 0===j?void 0:j.duration.from).format("L")+" - "+pe()(null===(v=H.activity)||void 0===v?void 0:v.duration.to).format("L")]})]})})]})})]}),Object(M.jsxs)(J.a,{flex:1,display:"flex",alignItems:"stretch",flexDirection:"row",marginTop:3,children:[Object(M.jsxs)(J.a,{flex:1,display:"flex",flexDirection:"column",marginRight:3,justifyContent:"space-between",children:[Object(M.jsx)(J.a,{flex:1,width:"101%",children:Object(M.jsx)(u.H,{type:u.m.Trend,data:Z,extraInfo:null===(h=W.coinBInfo)||void 0===h?void 0:h.simpleName,showXAxis:!0})}),Object(M.jsxs)(J.a,{display:"flex",flexDirection:"row",justifyContent:"space-between",children:[Object(M.jsxs)(Nt,{paddingX:2,display:"flex",flexDirection:"column",children:[Object(M.jsx)(x.a,{component:"p",color:"textSecondary",display:"flex",marginBottom:1.5,children:R("labelAmmTotalToken")}),Object(M.jsxs)(x.a,{component:"span",display:"flex",flexDirection:"row",justifyContent:"space-between",alignItems:"center",style:{textTransform:"capitalize"},color:"textPrimary",children:[Object(M.jsx)(J.a,{component:"span",className:"logo-icon",height:"var(--list-menu-coin-size)",width:"var(--list-menu-coin-size)",alignItems:"center",justifyContent:"center",children:ie?Object(M.jsx)(l.c,{imgx:ie.x,imgy:ie.y,imgheight:ie.height,imgwidth:ie.width,size:24,variant:"circular",alt:null===H||void 0===H||null===(g=H.myCoinA)||void 0===g?void 0:g.simpleName,src:'data:image/svg+xml;utf8,<svg width="36" height="36" viewBox="0 0 36 36" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M0 0H36V36H0V0Z"/></svg>'}):Object(M.jsx)(wt.a,{variant:"circular",alt:null===H||void 0===H||null===(w=H.myCoinA)||void 0===w?void 0:w.simpleName,style:{height:"var(--list-menu-coin-size))",width:"var(--list-menu-coin-size)"},src:"static/images/icon-default.png"})}),Object(M.jsxs)(x.a,{justifyContent:"center",display:"flex",children:[Object(M.jsx)(x.a,{component:"span",alignSelf:"right",height:24,lineHeight:"24px",children:Object(l.cb)(H.totalA,6)}),Object(M.jsx)(x.a,{component:"span",marginLeft:1,alignSelf:"right",height:24,lineHeight:"24px",children:null===(y=H.myCoinA)||void 0===y?void 0:y.simpleName})]})]}),Object(M.jsxs)(x.a,{component:"span",display:"flex",flexDirection:"row",justifyContent:"space-between",alignItems:"center",marginTop:1,style:{textTransform:"capitalize"},children:[Object(M.jsx)(J.a,{component:"span",className:"logo-icon",height:"var(--list-menu-coin-size)",width:"var(--list-menu-coin-size)",alignItems:"center",justifyContent:"center",children:ue?Object(M.jsx)(l.c,{imgx:ue.x,imgy:ue.y,imgheight:ue.height,imgwidth:ue.width,size:24,variant:"circular",alt:null===H||void 0===H||null===(I=H.myCoinB)||void 0===I?void 0:I.simpleName,src:'data:image/svg+xml;utf8,<svg width="36" height="36" viewBox="0 0 36 36" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M0 0H36V36H0V0Z"/></svg>'}):Object(M.jsx)(wt.a,{variant:"circular",alt:null===H||void 0===H||null===(C=H.myCoinB)||void 0===C?void 0:C.simpleName,style:{height:"var(--list-menu-coin-size)",width:"var(--list-menu-coin-size)"},src:"static/images/icon-default.png"})}),Object(M.jsxs)(x.a,{justifyContent:"center",display:"flex",children:[Object(M.jsx)(x.a,{component:"span",alignSelf:"right",height:24,lineHeight:"24px",children:Object(l.cb)(H.totalB,6)}),Object(M.jsx)(x.a,{component:"span",marginLeft:1,alignSelf:"right",height:24,lineHeight:"24px",children:null===(T=H.myCoinB)||void 0===T?void 0:T.simpleName})]})]})]}),Object(M.jsxs)(Nt,{paddingX:2,display:"flex",flexDirection:"column",children:[Object(M.jsx)(x.a,{component:"p",color:"textSecondary",display:"flex",children:R("label24Volume")}),Object(M.jsx)(x.a,{variant:"h4",marginTop:4,component:"span",children:U===l.l.dollar?l.G.Dollar+Object(l.cb)(K&&K.priceDollar?K.priceDollar:0,2):l.G.Yuan+Object(l.cb)(K&&K.priceYuan?K.priceYuan:0,2)})]}),Object(M.jsxs)(Nt,{paddingX:2,display:"flex",flexDirection:"column",children:[Object(M.jsx)(x.a,{component:"p",color:"textSecondary",display:"flex",children:R("labelTVL")}),Object(M.jsxs)(x.a,{variant:"h4",marginTop:4,component:"span",children:[" ","undefined"===typeof H.amountDollar?l.q:U===l.l.dollar?l.G.Dollar+Object(l.cb)(H.amountDollar,2):l.G.Yuan+Object(l.cb)(H.amountYuan?H.amountYuan:0,2)]})]}),Object(M.jsxs)(Nt,{paddingX:2,display:"flex",flexDirection:"column",children:[Object(M.jsx)(x.a,{component:"p",color:"textSecondary",display:"flex",children:R("labelAPY")}),Object(M.jsxs)(x.a,{variant:"h4",marginTop:4,component:"span",children:[" ",H.APY?H.APY:l.q,"%"]})]})]})]}),Object(M.jsx)(J.a,{display:"flex",children:Object(M.jsx)(It,{pair:W,walletMap:Y,snapShotData:V})})]}),Object(M.jsx)(z.a,{container:!0,marginY:3,children:Object(M.jsxs)(z.a,{item:!0,xs:12,children:[Object(M.jsx)(Ae.a,{value:ee,"aria-label":"tabs switch",children:Object(M.jsx)(ke.a,Object(r.a)({label:R("labelMe")},(N=1,{id:"simple-tab-".concat(N),"aria-controls":"tabpanel-".concat(N)})))}),Object(M.jsx)(se,{style:{marginTop:"".concat(2*l.nb,"px")},children:0===ee?Object(M.jsx)(u.e,{rawData:G,handlePageChange:re,page:ne}):Object(M.jsx)(u.e,{rawData:q,handlePageChange:re,page:ne})})]})})]})})),Mt=["ammProps","t","ammActivityMap"],Lt=s.a.memo(s.a.forwardRef((function(e,t){var a="".concat(e.coinAInfo.name,"-").concat(e.coinBInfo.name);return e?Object(M.jsx)(u.b,Object(r.a)(Object(r.a)({ref:t},e),{},{handleClick:function(){return e.handleClick(a)}})):Object(M.jsx)(M.Fragment,{})}))),Ut=function(e){var t=e.ammActivityViewMap,a=Object(c.g)(),n=s.a.useCallback((function(e){a&&a.push("/liquidity/pools/coinPair/".concat(e))}),[a]);return Object(M.jsxs)(M.Fragment,{children:[t.length?t.map((function(e,t){return Object(M.jsx)(z.a,{item:!0,xs:12,sm:6,lg:4,children:Object(M.jsx)(Lt,Object(r.a)({handleClick:n},e))},t)})):Object(M.jsxs)(J.a,{flex:1,display:"flex",alignItems:"center",justifyContent:"center",flexDirection:"column",children:[Object(M.jsx)(u.p,{height:"calc(100% - 35px)",marginTop:10,display:"flex",flexWrap:"nowrap",alignItems:"center",justifyContent:"center",flexDirection:"column",message:function(){return Object(M.jsx)(ct.a,{i18nKey:"labelEmptyDefault",children:"Content is Empty"})}})," "]}),"   "]})},Bt=Object(K.a)("common")((function(e){e.ammProps;var t=e.t,a=e.ammActivityMap,n=(Object(F.a)(e,Mt),function(e){var t=e.ammActivityMap,a=Object(St.a)(),n=s.a.useState([]),c=Object(o.a)(n,2),r=c[0],i=c[1],u=s.a.useState([]),l=Object(o.a)(u,2),d=l[0],b=l[1];return s.a.useEffect((function(){t&&Object.keys(t).length>0&&(i(Object(_.p)({ammActivityMap:t,type:"AMM_MINING",ammPoolActivityStatus:[k.a.NotStarted,k.a.InProgress]},a.userRewardsMap)),b(Object(_.p)({ammActivityMap:t,type:"AMM_MINING",ammPoolActivityStatus:[k.a.EndOfGame]},a.userRewardsMap)))}),[t]),s.a.useEffect((function(){"ERROR"===a.status?a.statusUnset():"DONE"===a.status&&(a.statusUnset(),i(Object(_.p)({ammActivityMap:t,type:"AMM_MINING",ammPoolActivityStatus:[k.a.NotStarted,k.a.InProgress]},a.userRewardsMap)),b(Object(_.p)({ammActivityMap:t,type:"AMM_MINING",ammPoolActivityStatus:[k.a.EndOfGame]},a.userRewardsMap)))}),[a.status]),{ammActivityViewMap:r,ammActivityPastViewMap:d}}({ammActivityMap:a})),c=n.ammActivityViewMap,r=n.ammActivityPastViewMap,i=s.a.useState(0),u=Object(o.a)(i,2),l=u[0],d=u[1];return Object(M.jsxs)(z.a,{container:!0,spacing:2,children:[Object(M.jsx)(z.a,{item:!0,xs:12,children:Object(M.jsxs)(Ae.a,{value:l,onChange:function(e,t){d(t)},"aria-label":"tabs switch",children:[Object(M.jsx)(ke.a,{label:t("labelCurrentActivities")}),Object(M.jsx)(ke.a,{label:t("labelPastActivities")})]})}),Object(M.jsx)(Ut,{ammActivityViewMap:0===l?c:r})]})})),Ft=a(451),Kt=["t","ammActivityMap"],Vt=(Object(ie.a)(J.a)(We||(We=Object(oe.a)(["\n  width: 100%;\n  height: 100%;\n  flex: 1;\n"]))),Object(ie.a)(z.a)(He||(He=Object(oe.a)(["\n  position: relative;\n  width: 100%;\n  background-color: ",";\n  border-radius: ","px;\n"])),(function(e){return e.theme.colorBase.background().default}),(function(e){return e.theme.unit}))),Wt=(Object(ie.a)(J.a)(Ye||(Ye=Object(oe.a)(["\n  position: absolute;\n  z-index: 99;\n  top: ","px;\n  width: 100%;\n"])),(function(e){return e.theme.unit})),Object(K.a)("common")((function(e){var t=e.t,a=e.ammActivityMap,n=(Object(F.a)(e,Kt),s.a.useState("ALL")),r=Object(o.a)(n,2),i=(r[0],r[1],s.a.useState(1)),d=Object(o.a)(i,2),b=d[0],p=d[1],m=Object(u.pb)().currency,f=Object(c.g)(),O=s.a.useCallback((function(e,t){f&&f.push("/liquidity/pools/coinPair/".concat(e,"?type=").concat(t))}),[f]),j=s.a.useCallback((function(e){p(e)}),[]),v=function(e){e.ammActivityMap;var t=Object(S.a)(),a=Object(St.a)(),n=Object(E.c)().marketArray,c=Object(Ce.e)(),r=c.ammMap,i=s.a.useState(void 0),u=Object(o.a)(i,2),l=(u[0],u[1]),d=s.a.useState(void 0),b=Object(o.a)(d,2),p=b[0],m=b[1],f=s.a.useState([]),O=Object(o.a)(f,2),j=O[0],v=O[1],h=s.a.useState([]),g=Object(o.a)(h,2),A=g[0],k=g[1],x=s.a.useCallback((function(){var e,t=Object(Ft.a)().walletMap;return l(t),t&&(null===(e=Object(_.g)())||void 0===e||e.then((function(e){var t=Object(_.k)(void 0,e);k(t||[])}))),t}),[Ft.a,_.g,_.k,n]),w=s.a.useCallback((function(e){return e&&r?Reflect.ownKeys(e).reduce((function(t,n){if(/LP-/i.test(n)){var c,o=n.replace("LP-","AMM-"),i=n.replace("LP-","");void 0!==(c=Object(_.l)({ammDetail:r[o],walletMap:e,market:i,ammUserRewardMap:a.userRewardsMap}))&&t.push(c)}return t}),[]):[]}),[r,a.userRewardsMap]);return s.a.useEffect((function(){if(t.walletLayer2){var e=x();if(r){var a=w(e);v(a)}}}),[]),s.a.useEffect((function(){switch(t.status){case"ERROR":t.statusUnset();break;case"DONE":t.statusUnset();var e=x();if(c.ammMap){var a=w(e);v(a)}}}),[t.status]),s.a.useEffect((function(){if("ERROR"===c.status)c.statusUnset();else if("DONE"===c.status&&(c.statusUnset(),t.walletLayer2)){var e=x(),a=w(e);v(a)}}),[c.status]),s.a.useEffect((function(){if("ERROR"===a.status)a.statusUnset();else if("DONE"===a.status){a.statusUnset();var e=Object(_.m)({userRewardsMap:a.userRewardsMap});if(m(e),t.walletLayer2&&c.ammMap){var n=w(t.walletLayer2);v(n)}}}),[a.status]),{myAmmMarketArray:A,summaryReward:p,myPoolRow:j}}({ammActivityMap:a}),h=v.myAmmMarketArray,g=v.summaryReward,A=v.myPoolRow;return Object(M.jsxs)(M.Fragment,{children:[Object(M.jsxs)(Vt,{container:!0,spacing:1,padding:3,margin:0,children:[Object(M.jsxs)(z.a,{display:"flex",flexDirection:"column",justifyContent:"space-around",item:!0,sm:3,children:[Object(M.jsx)(x.a,{variant:"body1",component:"h5",color:"textSecondary",children:t("labelTotalPositionValue")}),Object(M.jsx)(x.a,{variant:"h4",marginTop:1,children:void 0===g?l.q:m===l.l.dollar?l.G.Dollar+Object(l.cb)(void 0!==g.rewardDollar?g.rewardDollar:0)+Object(l.cb)(void 0!==g.feeDollar?g.feeDollar:0):l.G.Yuan+Object(l.cb)(g.rewardYuan?g.rewardYuan:0)+Object(l.cb)(g.feeYuan?g.feeYuan:0)})]}),Object(M.jsxs)(z.a,{display:"flex",flexDirection:"column",justifyContent:"space-around",item:!0,sm:3,children:[Object(M.jsx)(x.a,{variant:"body1",component:"h5",color:"textSecondary",children:t("labelFeeRewards")}),Object(M.jsx)(x.a,{variant:"h4",marginTop:1,children:void 0===g?l.q:m===l.l.dollar?l.G.Dollar+Object(l.cb)(g.feeDollar?g.feeDollar:0):l.G.Yuan+Object(l.cb)(g.feeYuan?g.feeYuan:0)})]}),Object(M.jsxs)(z.a,{display:"flex",flexDirection:"column",justifyContent:"space-around",item:!0,sm:3,children:[Object(M.jsx)(x.a,{variant:"body1",component:"h5",color:"textSecondary",children:t("labelMiningRewards")}),Object(M.jsx)(x.a,{variant:"h4",marginTop:1,children:void 0===g?l.q:m===l.l.dollar?l.G.Dollar+Object(l.cb)(g.rewardDollar?g.rewardDollar:0):l.G.Yuan+Object(l.cb)(g.rewardYuan?g.rewardYuan:0)})]})]}),Object(M.jsx)(x.a,{paddingLeft:2,marginTop:2,variant:"h4",children:t("labelMyAmm")}),Object(M.jsx)(ue,{container:!0,marginY:2,paddingBottom:2,flex:1,height:568,children:Object(M.jsx)(z.a,{item:!0,xs:12,display:"flex",flexDirection:"column",children:Object(M.jsx)(u.B,{rawData:A,pagination:{pageSize:5},handleDeposit:function(e){var t="".concat(e.ammDetail.coinAInfo.name,"-").concat(e.ammDetail.coinBInfo.name);O(t,"add")},handleWithdraw:function(e){var t="".concat(e.ammDetail.coinAInfo.name,"-").concat(e.ammDetail.coinBInfo.name);O(t,"remove")},handlePageChange:function(){}})})}),Object(M.jsx)(x.a,{paddingLeft:2,variant:"h4",children:t("labelMyAmmRecord")}),Object(M.jsx)(ue,{container:!0,marginTop:2,paddingBottom:2,flex:1,children:Object(M.jsx)(z.a,{item:!0,xs:12,display:"flex",flexDirection:"column",children:Object(M.jsx)(u.e,{rawData:h,handlePageChange:j,page:b})})})]})}))),Ht=a(402),Yt=l.mb,Gt=Object(K.a)(["layout","common"],{withRef:!0})(u.J),qt=function(){var e,t,a=function(){var e=Object(Ht.c)(),t=Object(St.a)().getUserRewards,a=Object(O.a)().account,n=Object(Ce.e)(),c=n.ammMap,r=n.getAmmMap,i=s.a.useState(e.ammActivityMap),u=Object(o.a)(i,2),l=u[0],d=u[1];return s.a.useEffect((function(){c&&0!==Object.keys(c).length||r()}),[]),s.a.useEffect((function(){switch(e.status){case"ERROR":e.statusUnset();break;case"DONE":e.statusUnset(),d(e.ammActivityMap)}}),[e.status]),s.a.useEffect((function(){a.accountId&&t()}),[a.accountId]),{ammActivityMap:l}}().ammActivityMap,n=Object(c.i)(["/liquidity/:item",":next/"]),r=null!==(e=null===n||void 0===n?void 0:n.params.item)&&void 0!==e?e:"pools",i=Object(c.i)(["/liquidity/:item/:next/:symbol"]),l=void 0;return i&&(null===i||void 0===i||null===(t=i.params)||void 0===t?void 0:t.next)&&"pools"===i.params.item&&(l=i.params.symbol?i.params.symbol:"LRC-ETH"),Object(M.jsxs)(M.Fragment,{children:[l&&Object(M.jsx)(J.a,{display:"flex",flexDirection:"column",flex:1,alignSelf:"flex-start",children:Object(M.jsx)(Dt,{ammActivityMap:a})}),!l&&Object(M.jsxs)(M.Fragment,{children:["  ",Object(M.jsx)(J.a,{width:"200px",display:"flex",justifyContent:"stretch",marginRight:3,marginBottom:3,children:Object(M.jsx)(u.I,{children:Object(M.jsx)(Gt,{selected:r,subMenu:Yt})})}),Object(M.jsxs)(J.a,{minHeight:420,display:"flex",alignItems:"stretch",justifyContent:"stretch",flexDirection:"column",marginTop:0,flex:1,marginBottom:3,children:["pools"===r&&!l&&Object(M.jsx)(At,{ammActivityMap:a}),"amm-mining"===r&&!l&&Object(M.jsx)(Bt,{ammActivityMap:a}),"my-liquidity"===r&&!l&&Object(M.jsx)(Wt,{ammActivityMap:a}),"orderBook-Mining"===r&&Object(M.jsx)(Bt,{ammActivityMap:a})]})]})]})};t.a=function(){return Object(M.jsxs)(n.a,{children:[Object(M.jsx)(Y,{}),Object(M.jsx)(Pe.a,{maxWidth:"lg",style:{minHeight:"calc(100% - 64px - 32px)",display:"flex",flexDirection:"column"},children:Object(M.jsx)(J.a,{display:"flex",flex:1,alignItems:"stretch",flexDirection:"row",marginTop:3,children:Object(M.jsxs)(c.d,{children:[Object(M.jsx)(c.b,{exact:!0,component:Ee,path:"/"}),Object(M.jsx)(c.b,{exact:!0,component:de,path:"/markets"}),Object(M.jsx)(c.b,{component:Ee,path:"/trading/lite"}),Object(M.jsx)(c.b,{component:Ee,path:"/trading/lite(/:symbol)"}),Object(M.jsx)(c.b,{exact:!0,component:jt,path:"/layer2"}),Object(M.jsx)(c.b,{exact:!0,component:jt,path:"/layer2/assets"}),Object(M.jsx)(c.b,{exact:!0,component:jt,path:"/layer2/transactions"}),Object(M.jsx)(c.b,{exact:!0,component:jt,path:"/layer2/trades"}),Object(M.jsx)(c.b,{exact:!0,component:jt,path:"/layer2/ammRecords"}),Object(M.jsx)(c.b,{exact:!0,component:jt,path:"/layer2/setting"}),Object(M.jsx)(c.b,{exact:!0,component:qt,path:"/liquidity"}),Object(M.jsx)(c.b,{exact:!0,component:qt,path:"/liquidity/pools/*"}),Object(M.jsx)(c.b,{exact:!0,component:qt,path:"/liquidity/pools"}),Object(M.jsx)(c.b,{exact:!0,component:qt,path:"/liquidity/amm-mining"}),Object(M.jsx)(c.b,{exact:!0,component:qt,path:"/liquidity/my-liquidity"}),Object(M.jsx)(c.b,{exact:!0,component:qt,path:"/liquidity/orderBook-Mining"}),Object(M.jsx)(c.b,{exact:!0,component:qt,path:"/liquidity/maker-rebates"}),Object(M.jsx)(Ne.a,{children:Object(M.jsx)(c.b,{exact:!0,path:"/debug"})})]})})})]})}},1026:function(e,t,a){"use strict";a.d(t,"a",(function(){return m}));var n=a(13),c=a(684),r=a(2024),o=a(1938),i=a(2094),s=a(235),u=a(2095),l=a(21);a(350);var d,b=a(1),p=Object(l.a)(o.a)(d||(d=Object(n.a)(["\n  background-image: url('./static/images/error_bg.png');\n  background-repeat: no-repeat;\n  background-size: contain;\n  background-position: bottom;\n  white-space: pre-wrap;\n  //h2{\n  //  position: relative;\n  //}\n"]))),m=function(e){var t=e.messageKey,a=Object(c.a)("error").t;return Object(b.jsx)(b.Fragment,{children:Object(b.jsx)(i.a,{children:Object(b.jsx)(p,{flex:1,display:"flex",alignItems:"flex-start",justifyContent:"center",flexDirection:"column",marginTop:4,height:680,maxWidth:1200,children:Object(b.jsxs)(o.a,{textAlign:"center",position:"relative",left:128,top:-64,children:[Object(b.jsx)(s.a,{component:"h2",variant:"h2",children:a(t)}),Object(b.jsx)(s.a,{marginY:2,component:"p",variant:"body1",color:"textSecondary",children:Object(b.jsxs)(r.a,{i18nKey:"labelConnectUs",children:["If you believe this is indeed a bug, please ",Object(b.jsx)(u.a,{component:"a",onClick:function(e){window.location.href=function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"report to loopring website",a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"Body Content",n=null!==(e=Object({NODE_ENV:"production",PUBLIC_URL:".",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_RPC_URL_1:"https://mainnet.eth.loopring.network",REACT_APP_MAGIC_API_KEY:"pk_test_398B82F5F0E88874",REACT_APP_API_URL:"api.loopring.network",REACT_APP_RPC_URL_5:"https://goerli.infura.io/v3/84842078b09946638c03157f83405213",REACT_APP_TEST_INTERVAL:"4hr",REACT_APP_API_URL_UAT:"uat2.loopring.io",REACT_APP_PORTIS_DAPP_ID:"e9be171c-2b7f-4ff0-8db9-327707511ee2",REACT_APP_FORTMATIC_API_KEY:"pk_test_A6260FCBAA2EBDFB"}).CONTACT_US_EMAIL)&&void 0!==e?e:"contact@loopring.io";return"mailto:".concat(n,"?subject=").concat(t,"&body=").concat(a)}(),e.preventDefault()},children:"contact us"})," ",Object(b.jsx)("br",{})," We would appreciate your feedback"]})})]})})})})}},105:function(e,t,a){"use strict";a.d(t,"a",(function(){return o})),a.d(t,"b",(function(){return i}));var n=a(39),c=a(15),r=a(347),o=function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:n.a.getState().tokenMap.tokenMap,c=i(e,t,a);return c?c.toNumber():void 0},i=function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:n.a.getState().tokenMap.tokenMap;if(a&&a[e]&&"undefined"!==typeof t)try{return Object(c.L)(t).div(r.a.pow(a[e].decimals))}catch(o){throw o}}},115:function(e,t,a){"use strict";a.d(t,"a",(function(){return c}));var n=a(1961);function c(e,t){Object(n.a)(e,[t||{}])}},118:function(e,t,a){"use strict";a.d(t,"e",(function(){return s})),a.d(t,"a",(function(){return i.a})),a.d(t,"b",(function(){return i.b})),a.d(t,"c",(function(){return i.d})),a.d(t,"d",(function(){return i.e}));var n=a(2),c=a(61),r=a(0),o=a.n(r),i=a(193),s=function(){var e=Object(c.c)((function(e){return e.amm.ammMap})),t=Object(c.b)();return Object(n.a)(Object(n.a)({},e),{},{statusUnset:o.a.useCallback((function(){return t(Object(i.d)(void 0))}),[t]),getAmmMap:o.a.useCallback((function(){return t(Object(i.b)(void 0))}),[t])})}},121:function(e,t,a){"use strict";a.d(t,"c",(function(){return s})),a.d(t,"b",(function(){return r.d})),a.d(t,"a",(function(){return r.a}));var n=a(2),c=a(61),r=a(276),o=a(0),i=a.n(o);function s(){var e=Object(c.c)((function(e){return e.tokenMap})),t=Object(c.b)();return Object(n.a)(Object(n.a)({},e),{},{statusUnset:i.a.useCallback((function(){return t(Object(r.c)(void 0))}),[t]),getTokenMap:i.a.useCallback((function(e){return t(Object(r.a)(e))}),[t])})}},126:function(e,t,a){"use strict";a.d(t,"f",(function(){return P})),a.d(t,"a",(function(){return N})),a.d(t,"c",(function(){return D})),a.d(t,"d",(function(){return M})),a.d(t,"e",(function(){return L})),a.d(t,"b",(function(){return U}));var n,c=a(4),r=a.n(c),o=a(23),i=a(7),s=a(0),u=a(61),l=a(115),d=a(279),b=a(38),p=a(15),m=a(16),f=a(167),O=(n={},Object(m.a)(n,p.f.Unknown,void 0),Object(m.a)(n,p.f.Injected,f.b),Object(m.a)(n,p.f.Network,f.d),Object(m.a)(n,p.f.WalletConnect,f.f),Object(m.a)(n,p.f.WalletLink,f.g),Object(m.a)(n,p.f.Ledger,f.c),Object(m.a)(n,p.f.Trezor,f.e),Object(m.a)(n,p.f.Authereum,f.a),n),j=a(142),v=a(1008),h=a.n(v),g=a(2057),A=a(357),k=a.n(A),x=a(146),w=a(39),y=a(205),I=a(157),C=a(121),T=a(59),_=a.n(T),S=a(46),E=a(28);function P(){var e=Object(d.a)(),t=e.connector,a=e.library,n=e.account,c=e.chainId,r=e.active,o=e.error;return{account:n,connector:t,library:a,chainId:c,active:r,isConnected:r&&!h.a.isBlank(n),error:o}}function N(){var e=Object(u.c)((function(e){return e.account})),t=Object(s.useCallback)((function(){return e.status===b.b.NOACCOUNT}),[e.status]),a=Object(s.useCallback)((function(){return e.status===b.b.ACTIVATED}),[e.status]);return{account:e,isNoAccount:t,isActivated:a,apiKey:e.apiKey,eddsaKey:e.eddsaKey,accountId:e.accountId}}function R(){var e,t=Object(u.b)(),a=(e=Object(b.a)(),function(t,a){var n=e.states[t];if(void 0===n)throw new Error("No transitions defined for ".concat(t));var c=n[a];if(void 0===c)throw new Error("Unknown transition for event ".concat(a," in state ").concat(t));return c});return{sendEvent:Object(s.useCallback)((function(e,n){var c=a(e.status,n);c&&t(Object(j.e)(c))}),[a,t])}}function D(){var e=Object(d.a)().activate,t=R().sendEvent,a=Object(u.b)(),n=Object(s.useState)(),c=Object(i.a)(n,2),r=c[0],o=c[1];return{connect:Object(s.useCallback)((function(n){var c=arguments.length>1&&void 0!==arguments[1]&&arguments[1];c&&(Object(S.a)("try Connecting... isSwitch Reset"),t(w.a.getState().account,b.c.Reset));var r=O[n];Object(S.a)("newConnector:",r),o(r),e(r),x.a.setConnectorName(n),a(Object(j.g)(n)),t(w.a.getState().account,b.c.Connecting)}),[e,a,t,o]),activatingConnector:r}}function M(){var e=Object(d.a)().deactivate,t=Object(u.b)();return{disconnect:Object(s.useCallback)((function(){e(),console.log("disconnect!!!----\x3e"),t(Object(j.b)(void 0))}),[e,t])}}function L(){var e=Object(u.b)(),t=P().chainId,a=P().connector,n=R().sendEvent,c=Object(I.a)().resetLayer2,i=Object(s.useCallback)(function(){var e=Object(o.a)(r.a.mark((function e(t){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:c(),n(t,b.c.Lock);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[n,c]),l=Object(u.c)((function(e){return e.system.exchangeInfo}));return{lock:i,unlock:Object(s.useCallback)(function(){var c=Object(o.a)(r.a.mark((function c(o){var i,s,u,d,m,f,O,v,h,g,A,x,w,y,I;return r.a.wrap((function(c){for(;;)switch(c.prev=c.next){case 0:if(E.a.userAPI&&E.a.exchangeAPI&&a&&o.accountId&&(null===l||void 0===l?void 0:l.exchangeAddress)&&t&&o.status===b.b.LOCKED){c.next=2;break}return c.abrupt("return");case 2:if(o.status===b.b.LOCKED){c.next=4;break}throw Error("unexpected status:"+o.status);case 4:return Object(S.a)("try to unlock!",o),s=void 0,u=void 0,d=void 0,c.next=10,a.getProvider();case 10:if(m=c.sent,f=new k.a(m),c.prev=12,O=o.nonce-1<0?0:o.nonce-1,Object(S.a)("try to unlock! nonce:",O),o.eddsaKey){c.next=22;break}return c.next=18,p.w(f,o.accAddr,null===l||void 0===l?void 0:l.exchangeAddress,O,o.connectName);case 18:v=c.sent,u=v.sk,c.next=23;break;case 22:u=o.eddsaKey;case 23:return Object(S.a)("useUnlock account:",o," sk:",u),c.next=26,E.a.userAPI.getUserApiKey({accountId:o.accountId},u);case 26:d=c.sent,s=b.c.Unlock,c.next=53;break;case 30:if(c.prev=30,c.t0=c.catch(12),Object(S.a)("got :",c.t0),Object(p.u)(c.t0),100001!==(null===c.t0||void 0===c.t0||null===(h=c.t0.response)||void 0===h||null===(g=h.data)||void 0===g||null===(A=g.resultInfo)||void 0===A?void 0:A.code)){c.next=52;break}return c.prev=35,x={ETH:"529000000000000",LRC:"34000000000000000000",USDT:"7850000",DAI:"98100000000000000000"},c.next=39,p.w(f,o.accAddr,null===l||void 0===l?void 0:l.exchangeAddress,o.nonce,o.connectName);case 39:return w=c.sent,y={exchange:null===l||void 0===l?void 0:l.exchangeAddress,owner:o.accAddr,accountId:o.accountId,publicKey:{x:w.formatedPx,y:w.formatedPy},maxFee:{tokenId:0,volume:x.ETH},validUntil:p.n,nonce:o.nonce},c.next=43,E.a.userAPI.updateAccount(y,f,t,o.connectName,!1);case 43:return I=c.sent,Object(S.a)("updateAccountResponse:",I),c.next=47,Object(p.K)(1e3);case 47:c.next=52;break;case 49:c.prev=49,c.t1=c.catch(35),Object(p.u)(c.t1);case 52:s=b.c.Reset;case 53:u&&e(Object(j.h)(u)),(null===(i=d)||void 0===i?void 0:i.apiKey)&&e(Object(j.f)(d.apiKey)),s&&n(o,s);case 56:case"end":return c.stop()}}),c,null,[[12,30],[35,49]])})));return function(e){return c.apply(this,arguments)}}(),[e,n,a,t,null===l||void 0===l?void 0:l.exchangeAddress])}}function U(){var e,t=Object(u.b)(),a=R().sendEvent,n=P(),c=n.account,i=n.active,s=n.isConnected,d=n.chainId,m=n.connector,f=Object(C.c)().marketArray,O=c,v=Object(g.a)(d),h=(Object(g.a)(c),Object(y.b)()),A=h.updateWalletLayer1,k=h.resetLayer1,T=Object(I.a)(),N=T.updateWalletLayer2,D=T.resetLayer2;Object(l.a)(Object(o.a)(r.a.mark((function e(){var n,c,u,l,v,h;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return h=function(){return(h=Object(o.a)(r.a.mark((function e(){var n,o,v;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(c&&O&&E.a.userAPI&&E.a.exchangeAPI&&d&&m&&u){e.next=2;break}return e.abrupt("return");case 2:l(),e.t0=c.status,e.next=e.t0===b.b.UNCONNNECTED?6:e.t0===b.b.CONNECTED?9:e.t0===b.b.NOACCOUNT?25:e.t0===b.b.DEPOSITING?28:e.t0===b.b.DEPOSIT_TO_CONFIREM?31:e.t0===b.b.UNACTIVATED?32:e.t0===b.b.ARPROVING?35:e.t0===b.b.APPROV_TO_CONFIRM?38:e.t0===b.b.LOCKED?41:e.t0===b.b.ACTIVATED?43:48;break;case 6:return Object(S.a)("---\x3e render UNCONNNECTED active:",i," isConnected:",s),i&&s&&(x.a.getConnectorName()===p.f.Injected&&t(Object(j.g)(p.f.Injected)),a(c,b.c.Connecting)),e.abrupt("break",49);case 9:return Object(S.a)("---\x3e render CONNECTED account:",c),e.prev=10,e.next=13,E.a.exchangeAPI.getAccount({owner:O});case 13:n=e.sent,o=n.accInfo,c.accAddr&&c.eddsaKey&&o.owner===c.accAddr||(t(Object(j.d)(o)),(null===f||void 0===f?void 0:f.length)&&A()),a(c,b.c.HasPubkey),e.next=24;break;case 19:e.prev=19,e.t1=e.catch(10),Object(p.u)(e.t1),O&&t(Object(j.c)(O)),e.t1.response&&e.t1.response.data&&e.t1.response.data.resultInfo&&101002===e.t1.response.data.resultInfo.code&&a(c,b.c.ErrorResponse);case 24:return e.abrupt("break",49);case 25:return Object(S.a)("NOACCOUNT before wait 30s!"),_.a.delay((function(){a(c,b.c.Reconnect),Object(S.a)("NOACCOUNT wait 15s to reconnect again!")}),3e4),e.abrupt("break",49);case 28:return!0,a(c,b.c.FinishDeposit),e.abrupt("break",49);case 31:return e.abrupt("break",49);case 32:return!1,e.abrupt("break",49);case 35:return!1,e.abrupt("break",49);case 38:return!1,e.abrupt("break",49);case 41:return k(),e.abrupt("break",49);case 43:return x.a.checkTimeout(!0),v=setInterval((function(){var e=x.a.checkTimeout();c.status===b.b.ACTIVATED&&e&&(clearInterval(v),a(c,b.c.Lock))}),1e3),x.a.setHandler(v),N(),e.abrupt("break",49);case 48:return e.abrupt("break",49);case 49:case"end":return e.stop()}}),e,null,[[10,19]])})))).apply(this,arguments)},v=function(){return h.apply(this,arguments)},c=w.a.getState().account,u=null===(n=w.a.getState().system.exchangeInfo)||void 0===n?void 0:n.exchangeAddress,l=function(){var e=x.a.getHandler();c.status!==b.b.ACTIVATED&&e&&clearInterval(e)},v(),e.abrupt("return",(function(){l()}));case 7:case"end":return e.stop()}}),e)}))),[A,N,k,D,E.a.userAPI,E.a.exchangeAPI,w.a.getState().account.status,v,d,O,t,m,null===(e=w.a.getState().system.exchangeInfo)||void 0===e?void 0:e.exchangeAddress])}},142:function(e,t,a){"use strict";a.d(t,"b",(function(){return d})),a.d(t,"c",(function(){return b})),a.d(t,"f",(function(){return p})),a.d(t,"g",(function(){return m})),a.d(t,"d",(function(){return f})),a.d(t,"e",(function(){return O})),a.d(t,"h",(function(){return j}));var n=a(95),c=a(15),r=a(38),o=a(146),i=a(46),s=function(){var e=Object({NODE_ENV:"production",PUBLIC_URL:".",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_RPC_URL_1:"https://mainnet.eth.loopring.network",REACT_APP_MAGIC_API_KEY:"pk_test_398B82F5F0E88874",REACT_APP_API_URL:"api.loopring.network",REACT_APP_RPC_URL_5:"https://goerli.infura.io/v3/84842078b09946638c03157f83405213",REACT_APP_TEST_INTERVAL:"4hr",REACT_APP_API_URL_UAT:"uat2.loopring.io",REACT_APP_PORTIS_DAPP_ID:"e9be171c-2b7f-4ff0-8db9-327707511ee2",REACT_APP_FORTMATIC_API_KEY:"pk_test_A6260FCBAA2EBDFB"}).REACT_APP_TEST_ACCOUND_ID?Object({NODE_ENV:"production",PUBLIC_URL:".",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_RPC_URL_1:"https://mainnet.eth.loopring.network",REACT_APP_MAGIC_API_KEY:"pk_test_398B82F5F0E88874",REACT_APP_API_URL:"api.loopring.network",REACT_APP_RPC_URL_5:"https://goerli.infura.io/v3/84842078b09946638c03157f83405213",REACT_APP_TEST_INTERVAL:"4hr",REACT_APP_API_URL_UAT:"uat2.loopring.io",REACT_APP_PORTIS_DAPP_ID:"e9be171c-2b7f-4ff0-8db9-327707511ee2",REACT_APP_FORTMATIC_API_KEY:"pk_test_A6260FCBAA2EBDFB"}).REACT_APP_TEST_ACCOUND_ID:o.a.getAccountId(),t=Object({NODE_ENV:"production",PUBLIC_URL:".",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_RPC_URL_1:"https://mainnet.eth.loopring.network",REACT_APP_MAGIC_API_KEY:"pk_test_398B82F5F0E88874",REACT_APP_API_URL:"api.loopring.network",REACT_APP_RPC_URL_5:"https://goerli.infura.io/v3/84842078b09946638c03157f83405213",REACT_APP_TEST_INTERVAL:"4hr",REACT_APP_API_URL_UAT:"uat2.loopring.io",REACT_APP_PORTIS_DAPP_ID:"e9be171c-2b7f-4ff0-8db9-327707511ee2",REACT_APP_FORTMATIC_API_KEY:"pk_test_A6260FCBAA2EBDFB"}).REACT_APP_TEST_API_KEY?Object({NODE_ENV:"production",PUBLIC_URL:".",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_RPC_URL_1:"https://mainnet.eth.loopring.network",REACT_APP_MAGIC_API_KEY:"pk_test_398B82F5F0E88874",REACT_APP_API_URL:"api.loopring.network",REACT_APP_RPC_URL_5:"https://goerli.infura.io/v3/84842078b09946638c03157f83405213",REACT_APP_TEST_INTERVAL:"4hr",REACT_APP_API_URL_UAT:"uat2.loopring.io",REACT_APP_PORTIS_DAPP_ID:"e9be171c-2b7f-4ff0-8db9-327707511ee2",REACT_APP_FORTMATIC_API_KEY:"pk_test_A6260FCBAA2EBDFB"}).REACT_APP_TEST_API_KEY:o.a.getApikey(),a=Object({NODE_ENV:"production",PUBLIC_URL:".",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_RPC_URL_1:"https://mainnet.eth.loopring.network",REACT_APP_MAGIC_API_KEY:"pk_test_398B82F5F0E88874",REACT_APP_API_URL:"api.loopring.network",REACT_APP_RPC_URL_5:"https://goerli.infura.io/v3/84842078b09946638c03157f83405213",REACT_APP_TEST_INTERVAL:"4hr",REACT_APP_API_URL_UAT:"uat2.loopring.io",REACT_APP_PORTIS_DAPP_ID:"e9be171c-2b7f-4ff0-8db9-327707511ee2",REACT_APP_FORTMATIC_API_KEY:"pk_test_A6260FCBAA2EBDFB"}).REACT_APP_TEST_OWNER?Object({NODE_ENV:"production",PUBLIC_URL:".",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_RPC_URL_1:"https://mainnet.eth.loopring.network",REACT_APP_MAGIC_API_KEY:"pk_test_398B82F5F0E88874",REACT_APP_API_URL:"api.loopring.network",REACT_APP_RPC_URL_5:"https://goerli.infura.io/v3/84842078b09946638c03157f83405213",REACT_APP_TEST_INTERVAL:"4hr",REACT_APP_API_URL_UAT:"uat2.loopring.io",REACT_APP_PORTIS_DAPP_ID:"e9be171c-2b7f-4ff0-8db9-327707511ee2",REACT_APP_FORTMATIC_API_KEY:"pk_test_A6260FCBAA2EBDFB"}).REACT_APP_TEST_OWNER:o.a.getAccount(),n=Object({NODE_ENV:"production",PUBLIC_URL:".",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_RPC_URL_1:"https://mainnet.eth.loopring.network",REACT_APP_MAGIC_API_KEY:"pk_test_398B82F5F0E88874",REACT_APP_API_URL:"api.loopring.network",REACT_APP_RPC_URL_5:"https://goerli.infura.io/v3/84842078b09946638c03157f83405213",REACT_APP_TEST_INTERVAL:"4hr",REACT_APP_API_URL_UAT:"uat2.loopring.io",REACT_APP_PORTIS_DAPP_ID:"e9be171c-2b7f-4ff0-8db9-327707511ee2",REACT_APP_FORTMATIC_API_KEY:"pk_test_A6260FCBAA2EBDFB"}).REACT_APP_TEST_EDDSA_KEY?Object({NODE_ENV:"production",PUBLIC_URL:".",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_RPC_URL_1:"https://mainnet.eth.loopring.network",REACT_APP_MAGIC_API_KEY:"pk_test_398B82F5F0E88874",REACT_APP_API_URL:"api.loopring.network",REACT_APP_RPC_URL_5:"https://goerli.infura.io/v3/84842078b09946638c03157f83405213",REACT_APP_TEST_INTERVAL:"4hr",REACT_APP_API_URL_UAT:"uat2.loopring.io",REACT_APP_PORTIS_DAPP_ID:"e9be171c-2b7f-4ff0-8db9-327707511ee2",REACT_APP_FORTMATIC_API_KEY:"pk_test_A6260FCBAA2EBDFB"}).REACT_APP_TEST_EDDSA_KEY:o.a.getEddsakey();return{accAddr:a,status:r.b.UNCONNNECTED,accountId:e,publicKey:{},nonce:0,isContractAddress:!1,apiKey:t,eddsaKey:n,connectName:c.f.Unknown}},u=Object(n.c)({name:"account",initialState:s(),reducers:{reset:function(e){Object(i.a)("try to reset account !!!!!!!!!");var t=s();Object.assign(e,t)},setAccAddr:function(e,t){e.accAddr=t.payload},setAccountInfo:function(e,t){e.accAddr=t.payload.owner,e.accountId=t.payload.accountId,e.nonce=t.payload.nonce,e.publicKey=t.payload.publicKey},setApikey:function(e,t){e.apiKey=t.payload},setAccountStatus:function(e,t){e.status=t.payload},setEddsaKey:function(e,t){e.eddsaKey=t.payload},setConnectName:function(e,t){e.connectName=t.payload},setIsContractAddress:function(e,t){e.isContractAddress=t.payload}}}),l=u.actions,d=l.reset,b=l.setAccAddr,p=l.setApikey,m=l.setConnectName,f=l.setAccountInfo,O=l.setAccountStatus,j=l.setEddsaKey;l.setIsContractAddress;t.a=u},146:function(e,t,a){"use strict";a.d(t,"a",(function(){return i}));var n,c=a(9),r=a(12),o=a(46);!function(e){e.Handler="handler",e.AccountId="account_id",e.Account="account",e.Apikey="apikey",e.Eddsakey="eddsakey",e.ActiveTime="active_time",e.AmmOrder="amm_order",e.HardwareAddresses="hardware_addresses",e.ConnectorName="connector_name"}(n||(n={}));var i=function(){function e(){Object(c.a)(this,e)}return Object(r.a)(e,null,[{key:"getHandler",value:function(){var e=sessionStorage.getItem(n.Handler);try{if(void 0!==e&&null!==e)return parseInt(e)}catch(t){}}},{key:"setConnectorName",value:function(e){sessionStorage.setItem(n.ConnectorName,e)}},{key:"getConnectorName",value:function(){return sessionStorage.getItem(n.ConnectorName)}},{key:"clearConnectorName",value:function(){sessionStorage.removeItem(n.ConnectorName)}},{key:"setHandler",value:function(e){sessionStorage.setItem(n.Handler,e)}},{key:"clearHandler",value:function(){sessionStorage.removeItem(n.Handler)}},{key:"checkTimeout",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=localStorage.getItem(n.ActiveTime),a=(new Date).getTime();if(null===t||e)localStorage.setItem(n.ActiveTime,a.toString());else{var c=new Date(parseInt(t));if(a-c.getTime()>6e5)return Object(o.a)("TIMEOUT! now:".concat(a," dateTimeStr:").concat(t," delta:").concat(a-c.getTime())),sessionStorage.clear(),localStorage.setItem(n.ActiveTime,a.toString()),!0}return!1}},{key:"getAccountId",value:function(){var e=sessionStorage.getItem(n.AccountId);try{if(e)return parseInt(e)}catch(t){}}},{key:"setAccountId",value:function(e){sessionStorage.setItem(n.AccountId,e.toString())}},{key:"getAccount",value:function(){return sessionStorage.getItem(n.Account)}},{key:"setAccount",value:function(e){sessionStorage.setItem(n.Account,e)}},{key:"getApikey",value:function(){return sessionStorage.getItem(n.Apikey)}},{key:"setApikey",value:function(e){sessionStorage.setItem(n.Apikey,e)}},{key:"getEddsakey",value:function(){return sessionStorage.getItem(n.Eddsakey)}},{key:"setEddsakey",value:function(e){sessionStorage.setItem(n.Eddsakey,e)}},{key:"getAmmOrder",value:function(){var e=localStorage.getItem(n.AmmOrder);return e||""}},{key:"setAmmOrder",value:function(e){localStorage.setItem(n.AmmOrder,e)}},{key:"clearAmmOrder",value:function(){localStorage.removeItem(n.AmmOrder)}},{key:"isHardwareAddress",value:function(e){var t=localStorage.getItem(n.HardwareAddresses);return!(!t||!t.includes(e.toLowerCase()))}},{key:"saveHardwareAddress",value:function(e){var t=localStorage.getItem(n.HardwareAddresses);if(t){if(!0!==t.includes(e.toLowerCase())){var a=t+","+e.toLowerCase();localStorage.setItem(n.HardwareAddresses,a)}}else localStorage.setItem(n.HardwareAddresses,e.toLowerCase())}}]),e}()},154:function(e,t,a){"use strict";a.d(t,"b",(function(){return o})),a.d(t,"a",(function(){return i}));var n=a(4),c=a.n(n),r=a(23);function o(e){if(!e||!(e instanceof Object)||"function"==typeof e)return e||void 0;var t=new(0,e.constructor);for(var a in e)e.hasOwnProperty(a)&&(t[a]=o(e[a]));return t}function i(e){return s.apply(this,arguments)}function s(){return(s=Object(r.a)(c.a.mark((function e(t){var a;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(document.execCommand&&(a=document.createElement("textarea"),document.body.appendChild(a),a.value=t,a.select(),document.execCommand("copy"),document.body.removeChild(a)),!navigator.clipboard){e.next=4;break}return e.next=4,navigator.clipboard.writeText(t);case 4:if(!window.clipboardData){e.next=8;break}return window.clipboardData.setData("Text",t),console.log("clipboardData:",t),e.abrupt("return",!0);case 8:return e.abrupt("return",!1);case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}},155:function(e,t,a){"use strict";var n,c,r,o;a.d(t,"c",(function(){return n})),a.d(t,"a",(function(){return i})),a.d(t,"d",(function(){return s})),a.d(t,"b",(function(){return u})),function(e){e.dark="dark",e.light="light"}(n||(n={})),function(e){e.en="en_US",e.cn="zh_CN"}(c||(c={})),function(e){e[e.NORMAL=0]="NORMAL",e[e.ERROR=1]="ERROR",e[e.UNKNOWN=2]="UNKNOWN"}(r||(r={})),function(e){e[e.UNKNOWN=0]="UNKNOWN",e[e.LOADING=1]="LOADING",e[e.WALLET=2]="WALLET"}(o||(o={}));var i=1e4,s=2500,u=3e3},157:function(e,t,a){"use strict";a.d(t,"a",(function(){return f})),a.d(t,"b",(function(){return s.e}));var n=a(4),c=a.n(n),r=a(23),o=a(2),i=a(61),s=a(232),u=a(46),l=a(59),d=a.n(l),b=a(0),p=a.n(b),m=a(155);function f(){var e=Object(i.c)((function(e){return e.walletLayer2})),t=Object(i.b)();return Object(o.a)(Object(o.a)({},e),{},{resetLayer2:p.a.useCallback((function(){Object(u.a)("resetLayer2 resetLayer2 resetLayer2"),t(Object(s.b)(void 0))}),[t]),statusUnset:p.a.useCallback((function(){return t(Object(s.c)(void 0))}),[t]),updateWalletLayer2:p.a.useCallback((function(){return t(Object(s.d)(void 0))}),[t]),delayAndUpdateWalletLayer2:p.a.useCallback(Object(r.a)(c.a.mark((function e(){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:Object(u.a)("try to delayAndUpdateWalletLayer2!"+(new Date).getTime()),d.a.delay((function(){return t(Object(s.d)(void 0)),Object(u.a)("try to delayAndUpdateWalletLayer2 updated!"+(new Date).getTime()),Promise.resolve()}),m.d);case 2:case"end":return e.stop()}}),e)}))),[t])})}},167:function(e,t,a){"use strict";a.d(t,"b",(function(){return p})),a.d(t,"d",(function(){return m})),a.d(t,"f",(function(){return f})),a.d(t,"g",(function(){return O})),a.d(t,"c",(function(){return j})),a.d(t,"e",(function(){return v})),a.d(t,"a",(function(){return h}));var n=a(460),c=a(1002),r=a(551),o=a(1003),i=a(1004),s=a(1006),u=a(1007),l=a(46),d=12e3,b={1:"https://mainnet.eth.loopring.network",5:"https://goerli.infura.io/v3/84842078b09946638c03157f83405213"};Object(l.a)("RPC_URLS 1:",b[1]),Object(l.a)("RPC_URLS 5:",b[5]);var p=new n.a({supportedChainIds:[1,5]}),m=new c.a({urls:b,defaultChainId:1}),f=new r.b({rpc:b,bridge:"https://bridge.walletconnect.org",qrcode:!0,pollingInterval:d}),O=new o.a({url:b[1],appName:"Loopring DEX"}),j=new i.a({chainId:1,url:b[1],pollingInterval:d}),v=new s.a({chainId:1,url:b[1],pollingInterval:d,manifestEmail:"dummy@abc.xyz",manifestAppUrl:"http://localhost:1234"}),h=new u.a({chainId:42})},193:function(e,t,a){"use strict";a.d(t,"a",(function(){return o})),a.d(t,"b",(function(){return s})),a.d(t,"c",(function(){return u})),a.d(t,"d",(function(){return l})),a.d(t,"e",(function(){return d}));var n=a(95),c=a(62),r={ammMap:void 0,__timer__:-1,status:"UNSET",errorMessage:null},o=Object(n.c)({name:"ammMap",initialState:r,reducers:{getAmmMap:function(e,t){e.status=c.a.PENDING},getAmmMapStatus:function(e,t){t.error&&(e.status=c.a.ERROR,e.errorMessage=t.error);var a=t.payload,n=a.ammMap,r=a.__timer__;n&&(e.ammMap=n),r&&(e.__timer__=r),e.status=c.a.DONE},updateRealTimeAmmMap:function(e,t){e.status=c.a.PENDING},statusUnset:function(e){e.status=c.a.UNSET}}}),i=o.actions,s=i.getAmmMap,u=i.getAmmMapStatus,l=i.statusUnset,d=i.updateRealTimeAmmMap},1935:function(e,t,a){"use strict";a.r(t);var n=a(61),c=a(153),r=a.n(c),o=a(945),i=a(192),s=a(39),u=a(462),l=a(15),d=a(6),b=a(2105),p=a(224),m=a(2058),f=a(140),O=a(2059),j=a(1),v=Object(i.c)(l.h),h=[Object(d.jb)(p.b,{dateAdapter:m.a}),Object(d.jb)(O.a,{i18n:d.ib}),Object(d.jb)(b.a,{theme:Object(d.bb)("dark")}),Object(d.jb)(f.c,{theme:Object(d.bb)("dark")}),Object(d.jb)(n.a,{store:s.a})];r.a.render(Object(j.jsx)(d.H,{providers:h,children:Object(j.jsx)(i.b,{getLibrary:u.a,children:Object(j.jsx)(v,{getLibrary:u.a,children:Object(j.jsx)(o.a,{})})})}),document.getElementById("root"))},205:function(e,t,a){"use strict";a.d(t,"b",(function(){return u})),a.d(t,"c",(function(){return r.e})),a.d(t,"a",(function(){return r.d}));var n=a(2),c=a(61),r=a(259),o=a(0),i=a.n(o),s=a(46);function u(){var e=Object(c.c)((function(e){return e.walletLayer1})),t=Object(c.b)();return Object(n.a)(Object(n.a)({},e),{},{resetLayer1:i.a.useCallback((function(){Object(s.a)("resetLayer1 resetLayer1 resetLayer1"),t(Object(r.b)(void 0))}),[t]),statusUnset:i.a.useCallback((function(){return t(Object(r.c)(void 0))}),[t]),updateWalletLayer1:i.a.useCallback((function(){return t(Object(r.d)(void 0))}),[t])})}},210:function(e,t,a){"use strict";a.d(t,"d",(function(){return r})),a.d(t,"a",(function(){return i})),a.d(t,"b",(function(){return s})),a.d(t,"c",(function(){return u}));var n=a(95),c=a(62),r=Object(n.c)({name:"socket",initialState:{socket:{},status:"UNSET",errorMessage:null},reducers:{socketEnd:function(e,t){e.socket={},e.status=c.a.PENDING},sendSocketTopic:function(e,t){e.socket=t.payload.socket},getSocketStatus:function(e,t){t.error&&(e.status=c.a.ERROR,e.errorMessage=t.error),e.status=c.a.DONE},statusUnset:function(e){e.status=c.a.UNSET}}}),o=r.actions,i=o.getSocketStatus,s=o.sendSocketTopic,u=o.socketEnd;o.statusUnset},231:function(e,t,a){"use strict";a.d(t,"e",(function(){return r})),a.d(t,"a",(function(){return i})),a.d(t,"c",(function(){return s})),a.d(t,"b",(function(){return u})),a.d(t,"d",(function(){return l}));var n=a(95),c=a(62),r=Object(n.c)({name:"tickerMap",initialState:{tickerMap:{},status:"UNSET",errorMessage:null},reducers:{getTicker:function(e,t){e.status=c.a.PENDING},getTickers:function(e,t){e.status=c.a.PENDING},getTickerStatus:function(e,t){t.error&&(e.status=c.a.ERROR,e.errorMessage=t.error),e.tickerMap=t.payload.tickerMap,e.status=c.a.DONE},statusUnset:function(e){e.status=c.a.UNSET}}}),o=r.actions,i=o.getTicker,s=o.getTickers,u=o.getTickerStatus,l=o.statusUnset},232:function(e,t,a){"use strict";a.d(t,"e",(function(){return i})),a.d(t,"d",(function(){return u})),a.d(t,"a",(function(){return l})),a.d(t,"c",(function(){return d})),a.d(t,"b",(function(){return b}));var n=a(2),c=a(95),r=a(62),o={walletLayer2:void 0,status:"UNSET",errorMessage:null},i=Object(c.c)({name:"walletLayer2",initialState:o,reducers:{updateWalletLayer2:function(e,t){e.status=r.a.PENDING},reset:function(e,t){e.walletLayer2=void 0,e.status=r.a.UNSET},getWalletLayer2Status:function(e,t){t.error&&(e.status=r.a.ERROR,e.errorMessage=t.error),e.walletLayer2=Object(n.a)({},t.payload.walletLayer2),e.status=r.a.DONE},statusUnset:function(e){e.status=r.a.UNSET}}}),s=i.actions,u=s.updateWalletLayer2,l=s.getWalletLayer2Status,d=s.statusUnset,b=s.reset},251:function(e,t,a){"use strict";a.d(t,"a",(function(){return s})),a.d(t,"b",(function(){return r.d}));var n=a(2),c=a(61),r=a(260),o=a(0),i=a.n(o);function s(){var e=Object(c.c)((function(e){return e.userRewardsMap})),t=Object(c.b)();return Object(n.a)(Object(n.a)({},e),{},{statusUnset:i.a.useCallback((function(){return t(Object(r.c)(void 0))}),[t]),getUserRewards:i.a.useCallback((function(){return t(Object(r.a)(void 0))}),[t])})}},258:function(e,t,a){"use strict";var n,c;a.d(t,"a",(function(){return n})),a.d(t,"b",(function(){return c})),function(e){e.DEV="DEV",e.UAT="UAT",e.PROD="PROD"}(n||(n={})),function(e){e.NONETWORK="unknown"}(c||(c={}))},259:function(e,t,a){"use strict";a.d(t,"e",(function(){return i})),a.d(t,"d",(function(){return u})),a.d(t,"a",(function(){return l})),a.d(t,"c",(function(){return d})),a.d(t,"b",(function(){return b}));var n=a(2),c=a(95),r=a(62),o={walletLayer1:void 0,status:"UNSET",errorMessage:null},i=Object(c.c)({name:"walletLayer1",initialState:o,reducers:{updateWalletLayer1:function(e,t){e.status=r.a.PENDING},reset:function(e,t){e.walletLayer1=void 0,e.status=r.a.UNSET},getWalletLayer1Status:function(e,t){t.error&&(e.status=r.a.ERROR,e.errorMessage=t.error),e.walletLayer1=Object(n.a)({},t.payload.walletLayer1),e.status=r.a.DONE},statusUnset:function(e){e.status=r.a.UNSET}}}),s=i.actions,u=s.updateWalletLayer1,l=s.getWalletLayer1Status,d=s.statusUnset,b=s.reset},260:function(e,t,a){"use strict";a.d(t,"d",(function(){return i})),a.d(t,"a",(function(){return u})),a.d(t,"b",(function(){return l})),a.d(t,"c",(function(){return d}));var n=a(2),c=a(95),r=a(62),o={userRewardsMap:void 0,status:"UNSET",errorMessage:null,__timer__:-1},i=Object(c.c)({name:"userRewardsMap",initialState:o,reducers:{getUserRewards:function(e,t){e.status=r.a.PENDING},getUserRewardsStatus:function(e,t){t.error&&(e.status=r.a.ERROR,e.errorMessage=t.error),e.userRewardsMap=Object(n.a)(Object(n.a)({},e.userRewardsMap),t.payload.userRewardsMap),t.payload.__timer__&&(e.__timer__=t.payload.__timer__),e.status=r.a.DONE},statusUnset:function(e){e.status=r.a.UNSET}}}),s=i.actions,u=s.getUserRewards,l=s.getUserRewardsStatus,d=s.statusUnset},275:function(e,t,a){"use strict";a.d(t,"a",(function(){return o})),a.d(t,"b",(function(){return s})),a.d(t,"c",(function(){return u})),a.d(t,"d",(function(){return l}));var n=a(2),c=a(95),r=a(62),o=Object(c.c)({name:"ammActivityMap",initialState:{ammActivityMap:{},status:"UNSET",errorMessage:null},reducers:{getAmmActivityMap:function(e,t){e.status=r.a.PENDING},getAmmActivityMapStatus:function(e,t){t.error&&(e.status=r.a.ERROR,e.errorMessage=t.error),e.ammActivityMap=Object(n.a)({},t.payload.ammActivityMap),e.status=r.a.DONE},statusUnset:function(e){e.status=r.a.UNSET}}}),i=o.actions,s=i.getAmmActivityMap,u=i.getAmmActivityMapStatus,l=i.statusUnset},276:function(e,t,a){"use strict";a.d(t,"d",(function(){return o})),a.d(t,"a",(function(){return s})),a.d(t,"b",(function(){return u})),a.d(t,"c",(function(){return l}));var n=a(95),c=a(62),r={coinMap:{},totalCoinMap:{},addressIndex:void 0,tokenMap:void 0,marketMap:void 0,idIndex:void 0,status:"UNSET",errorMessage:null},o=Object(n.c)({name:"tokenMap",initialState:r,reducers:{getTokenMap:function(e,t){e.status=c.a.PENDING},getTokenMapStatus:function(e,t){t.error&&(e.status=c.a.ERROR,e.errorMessage=t.error);var a=t.payload,n=a.tokenMap,r=a.totalCoinMap,o=a.marketMap,i=a.addressIndex,s=a.idIndex,u=a.coinMap,l=a.marketArray,d=a.marketCoins;n&&(e.tokenMap=n),o&&(e.marketMap=o),i&&(e.addressIndex=i),s&&(e.idIndex=s),u&&(e.coinMap=u),r&&(e.totalCoinMap=r),l&&(e.marketArray=l),d&&(e.marketCoins=d),e.status=c.a.DONE},statusUnset:function(e){e.status=c.a.UNSET}}}),i=o.actions,s=i.getTokenMap,u=i.getTokenMapStatus,l=i.statusUnset},277:function(e,t,a){"use strict";a.d(t,"b",(function(){return i})),a.d(t,"d",(function(){return u})),a.d(t,"a",(function(){return l})),a.d(t,"c",(function(){return d}));var n=a(95),c=a(258),r=a(62),o={env:c.a.PROD,chainId:"unknown",baseURL:"",socketURL:"",faitPrices:void 0,gasPrice:void 0,forex:void 0,__timer__:-1,status:"UNSET",errorMessage:null,exchangeInfo:void 0,topics:[]},i=Object(n.c)({name:"system",initialState:o,reducers:{updateSystem:function(e,t){e.chainId=t.payload.chainId,e.status=r.a.PENDING},updateRealTimeObj:function(e,t){var a=t.payload,n=a.forex,c=a.faitPrices,r=a.gasPrice;n&&(e.forex=n),c&&(e.faitPrices=c),r&&(e.gasPrice=r)},getSystemStatus:function(e,t){t.error&&(e.status=r.a.ERROR,e.errorMessage=t.error);var a=t.payload,n=a.env,c=a.baseURL,o=a.socketURL,i=a.faitPrices,s=a.gasPrice,u=a.forex,l=a.exchangeInfo,d=a.__timer__;n&&(e.env=n),o&&(e.socketURL=o),c&&(e.baseURL=c),i&&(e.faitPrices=i),s&&(e.gasPrice=s),u&&(e.forex=u),l&&(e.exchangeInfo=l),d&&(e.__timer__=d),e.status=r.a.DONE},statusUnset:function(e){e.status=r.a.UNSET}}}),s=i.actions,u=s.updateSystem,l=(s.setTopics,s.getSystemStatus),d=(s.statusUnset,s.updateRealTimeObj)},279:function(e,t,a){"use strict";a.d(t,"a",(function(){return b})),a.d(t,"c",(function(){return p})),a.d(t,"b",(function(){return m})),a.d(t,"d",(function(){return f}));var n=a(7),c=a(0),r=a(61),o=a(192),i=a(1001),s=a(167),u=a(15),l=a(46),d=a(146);function b(){var e=Object(o.d)(),t=Object(o.d)(u.h);return e.active?e:t}function p(){var e=b().chainId,t=Object(c.useState)(""),a=Object(n.a)(t,2),r=a[0],o=a[1];return Object(c.useEffect)((function(){switch(e){case u.e.MAINNET:o("https://etherscan.io/address/");break;default:o("https://goerli.etherscan.io/address/")}}),[e]),{etherscanUrl:r}}function m(){var e=Object(o.d)(),t=e.activate,a=e.active,b=Object(c.useState)(!1),p=Object(n.a)(b,2),m=p[0],f=p[1],O=Object(r.b)();return Object(c.useEffect)((function(){s.b.isAuthorized().then((function(e){e?(Object(l.a)("useEagerConnect isAuthorized"),t(s.b,void 0,!0).then((function(){Object(l.a)("--------------------\x3e>>>>>>dispatch 1"),d.a.setConnectorName(u.f.Injected)})).catch((function(){f(!0)}))):i.isMobile&&window.ethereum?t(s.b,void 0,!0).then((function(){Object(l.a)("--------------------\x3e>>>>>>dispatch 2"),d.a.setConnectorName(u.f.Injected)})).catch((function(){f(!0)})):f(!0)}))}),[t,O]),Object(c.useEffect)((function(){a&&f(!0)}),[a]),m}function f(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:void 0,t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],a=Object(o.d)(),n=a.active,r=a.error,i=a.activate;Object(c.useEffect)((function(){var a=window.ethereum,c=function(){i(s.b),e&&e()};if(a&&a.on&&!n&&!r&&!t){var o=function(e){Object(l.a)("Handling 'chainChanged' event with payload",e),c()},u=function(e){Object(l.a)("---------------------------------------------"),Object(l.a)("Handling 'accountsChanged' event with payload",e),e.length>0&&c()};return a.on("chainChanged",o),a.on("accountsChanged",u),function(){a.removeListener&&(a.removeListener("chainChanged",o),a.removeListener("accountsChanged",u))}}}),[n,r,t,i,e])}},28:function(e,t,a){"use strict";a.d(t,"d",(function(){return i})),a.d(t,"c",(function(){return s})),a.d(t,"b",(function(){return u})),a.d(t,"a",(function(){return l}));var n=a(9),c=a(15),r=a(39);function o(){return r.a.getState().system.chainId}var i=function(){return new c.m(o())},s=function(){return new c.g(o())},u=function(){return new c.c(o())},l=function e(){Object(n.a)(this,e)};l.userAPI=void 0,l.exchangeAPI=void 0,l.ammpoolAPI=void 0,l.walletAPI=void 0,l.wsAPI=void 0,l.InitApi=function(e){l.userAPI=new c.m(e),l.exchangeAPI=new c.g(e),l.ammpoolAPI=new c.c(e),l.walletAPI=new c.o(e),l.wsAPI=new c.p(e)}},303:function(e,t,a){"use strict";a.d(t,"d",(function(){return m})),a.d(t,"c",(function(){return O})),a.d(t,"a",(function(){return v})),a.d(t,"b",(function(){return h}));var n=a(7),c=a(33),r=a(2),o=a(15),i=a(39),s=a(154),u=a(130),l=a.n(u),d=a(105),b=a(25),p=a(312),m=function(e,t){var a=e.ammActivityMap,n=e.type,c=e.ammPoolActivityStatus,r=i.a.getState().tokenMap,s=r.coinMap,u=r.tokenMap,l=r.idIndex,b={};return a&&a[n]&&c.forEach((function(e){a[n][e]&&a[n][e].reduce((function(a,n){if(s&&n.awardRules[0]&&l&&u){var c,r=l[n.awardRules[0].tokenId],i=Object(p.a)(n.awardRules[0].volume,r),b={rewardToken:s[r],totalRewards:Number(i),myRewards:e===o.a.InProgress&&t&&t[n.market]?Object(d.a)(r,null===(c=t[n.market])||void 0===c?void 0:c.currentRewards[0].volume):0,duration:{from:new Date(null===n||void 0===n?void 0:n.rangeFrom),to:new Date(null===n||void 0===n?void 0:n.rangeTo)},isPass:o.a.EndOfGame===e};a[n.market]?a[n.market].push(b):a[n.market]=[b]}return a}),b)})),f(b)},f=function(e,t){var a=i.a.getState().tokenMap.coinMap,n=i.a.getState().amm.ammMap.ammMap;try{return e&&a?Reflect.ownKeys(e).reduce((function(t,o){var i=n[o];if(i&&i.coinA&&a&&e[o]){var u=e[o].map((function(e){return Object(r.a)(Object(r.a)({},Object(s.b)(i)),{},{coinAInfo:a[i.coinA],coinBInfo:a[i.coinB],activity:e})}));t=[].concat(Object(c.a)(t),Object(c.a)(u))}return t}),[]):[]}catch(o){return console.log(o),[]}},O=function(e){var t=e.userRewardsMap,a=i.a.getState().tokenMap,c=a.coinMap,r=a.idIndex,s=a.tokenMap,u=i.a.getState().system,l=u.faitPrices,d=u.forex;if(t&&r&&c&&s&&l&&d)return Object.keys(t).reduce((function(e,a){if(/AMM-/i.test(a)){var c=a.match(/AMM-(\w+)-(\w+)/i),i=Object(n.a)(c,3),s=i[1],u=i[2],b=t[a],p=j({coinB:u,coinA:s,ammUserReward:b,idIndex:r,faitPrices:l,forex:d}),m=p.rewardDollar,f=p.rewardYuan,O=p.feeDollar,v=p.feeYuan;e.rewardDollar=m?Object(o.L)(m).plus(e.rewardDollar).toNumber():0,e.rewardYuan=f?Object(o.L)(f).plus(e.rewardYuan).toNumber():0,e.feeDollar=O?Object(o.L)(O).plus(e.feeDollar).toNumber():0,e.feeYuan=v?Object(o.L)(v).plus(e.feeYuan).toNumber():0}return e}),{rewardDollar:0,rewardYuan:0,feeDollar:0,feeYuan:0})},j=function(e){var t,a,n,c,r,i,s,u,p,m,f,O,j,v,h=e.coinA,g=e.coinB,A=e.ammUserReward,k=e.idIndex,x=e.faitPrices,w=e.forex,y=e.walletMap,I=e.snapShotData;if(A&&(t=A.currentRewards[0]?k[A.currentRewards[0].tokenId]:void 0,a=A.currentRewards[1]?k[A.currentRewards[1].tokenId]:void 0,n=A?Object(d.b)(h,A.feeRewards[0]):Object(o.L)(0),c=A?Object(d.b)(g,A.feeRewards[1]):Object(o.L)(0),n=n||Object(o.L)(0),c=c||Object(o.L)(0),i=(r=n.times(x[h]?x[h].price:0).plus(c.times(x[g]?x[g].price:0))).times(w),s=t?Object(d.b)(t,A.currentRewards[0].volume):Object(o.L)(0),u=a?Object(d.b)(a,A.currentRewards[1].volume):Object(o.L)(0),s=s||Object(o.L)(0),u=u||Object(o.L)(0),m=(p=s.times(t?x[t].price:1).plus(u.times(a?x[a].price:1))).times(w)),y&&y["LP-"+h+"-"+g]&&I){var C=new l.a(y["LP-"+h+"-"+g].count).div(I.ammPoolsBalance.lp.volume);f=C.times(Object(d.b)(h,I.ammPoolsBalance.pooled[0].volume)||1),O=C.times(Object(d.b)(g,I.ammPoolsBalance.pooled[1].volume)||1),v=(j=f.times(x[h].price).plus(O.times(x[g].price))).times(w)}return{feeA:n?n.toNumber():void 0,feeB:c?c.toNumber():void 0,reward:s?s.toNumber():void 0,rewardToken:t?b.ab[t]:void 0,reward2:u?u.toNumber():void 0,rewardToken2:a?b.ab[a]:void 0,rewardDollar:p?p.toNumber():void 0,rewardYuan:m?m.toNumber():void 0,feeDollar:r?r.toNumber():void 0,feeYuan:i?i.toNumber():void 0,ammDetail:{coinAInfo:b.ab[h],coinBInfo:b.ab[g]},balanceA:f?f.toNumber():void 0,balanceB:O?O.toNumber():void 0,balanceDollar:j?j.toNumber():void 0,balanceYuan:v?v.toNumber():void 0}},v=function(e,t,a,c){var r=i.a.getState().tokenMap,o=r.coinMap,s=r.idIndex,u=r.tokenMap,l=i.a.getState().system,d=l.faitPrices,b=l.forex,p=e.match(/(\w+)-(\w+)/i),m=Object(n.a)(p,3),f=m[1],O=m[2];if(a&&a["AMM-"+e]&&c&&c.ammPoolsBalance){var v=a["AMM-"+e];if(o&&u&&s&&b&&d)return j({coinA:f,coinB:O,ammUserReward:v,idIndex:s,faitPrices:d,forex:b,walletMap:t,snapShotData:c})}return{feeA:void 0,feeB:void 0,feeDollar:void 0,feeYuan:void 0,reward:void 0,rewardToken:void 0,balanceA:void 0,balanceB:void 0,balanceYuan:void 0,balanceDollar:void 0}},h=function(e,t,a,c){var s,u,b,p,m=i.a.getState().tokenMap,f=m.coinMap,O=m.idIndex,j=m.tokenMap,v=i.a.getState().system,h=v.faitPrices,g=v.forex,A=e.match(/(\w+)-(\w+)/i),k=Object(n.a)(A,3),x=k[1],w=k[2],y={};if(t&&t["LP-"+x+"-"+w]&&g){var I=new l.a(t["LP-"+x+"-"+w].count).div(c.totalLPToken);s=I.times(Object(d.b)(x,c.totalA?c.totalA:0)||1),u=I.times(Object(d.b)(w,c.totalB?c.totalB:0)||1),p=(b=s.times(h[x]?h[x].price:0).plus(u.times(h[w]?h[w].price:0))).times(g),y={balanceA:s.toNumber(),balanceB:u.toNumber(),balanceYuan:p.toNumber(),balanceDollar:b.toNumber()}}if(a&&a["AMM-"+e]&&c&&g){var C,T,_,S,E,P,N,R,D,M,L=a["AMM-"+e];return f&&j&&O&&g&&h&&L&&(C=L.currentRewards[0]?O[L.currentRewards[0].tokenId]:void 0,T=L.currentRewards[1]?O[L.currentRewards[1].tokenId]:void 0,_=L?Object(d.b)(x,L.feeRewards[0]):Object(o.L)(0),S=L?Object(d.b)(w,L.feeRewards[1]):Object(o.L)(0),_=_||Object(o.L)(0),S=S||Object(o.L)(0),P=(E=_.times(h[x]?h[x].price:0).plus(S.times(h[w]?h[w].price:0))).times(g),N=C?Object(d.b)(C,L.currentRewards[0].volume):Object(o.L)(0),R=T?Object(d.b)(T,L.currentRewards[1].volume):Object(o.L)(0),N=N||Object(o.L)(0),R=R||Object(o.L)(0),M=(D=N.times(C?h[C].price:1).plus(R.times(T?h[T].price:1))).times(g),y=Object(r.a)(Object(r.a)({},y),{},{feeA:_?_.toNumber():void 0,feeB:S?S.toNumber():void 0,reward:N?N.toNumber():void 0,rewardToken:C?f[C]:void 0,reward2:R?R.toNumber():void 0,rewardToken2:T?f[T]:void 0,rewardDollar:D?D.toNumber():void 0,rewardYuan:M?M.toNumber():void 0,feeDollar:E?E.toNumber():void 0,feeYuan:P?P.toNumber():void 0,ammDetail:{coinAInfo:x?f[x]:void 0,coinBInfo:w?f[w]:void 0}})),y}return{feeA:void 0,feeB:void 0,feeDollar:void 0,feeYuan:void 0,reward:void 0,rewardToken:void 0,balanceA:void 0,balanceB:void 0,balanceYuan:void 0,balanceDollar:void 0}}},312:function(e,t,a){"use strict";a.d(t,"a",(function(){return o}));var n=a(15),c=a(39),r=function(e){var t=c.a.getState().tokenMap.tokenMap;if(t&&t[e])return t[e]};function o(e,t){var a=r(t);if(a)return void 0===e||null===e||""===e.trim()?0:Object(n.L)(e).div("1e"+a.decimals).toFixed(a.precision,0)}},347:function(e,t,a){"use strict";a.d(t,"a",(function(){return r}));var n,c=a(15);!function(e){e.processed="processed",e.no_such_order="no_such_order",e.too_many_times="too_many_times"}(n||(n={}));Object(c.L)(0),Object(c.L)(1);var r=Object(c.L)(10);Object(c.L)(1e4)},348:function(e,t,a){"use strict";a.d(t,"b",(function(){return l})),a.d(t,"c",(function(){return d})),a.d(t,"a",(function(){return b})),a.d(t,"d",(function(){return p}));var n=a(7),c=a(15),r=a(39),o=a(6),i=a(28),s=a(25),u=a(105),l=function(e){var t=Object(i.d)(),a=r.a.getState().account,n=a.accountId,c=a.apiKey;return t.getUserTrades({accountId:n},c).then((function(e){return e.userTrades}))},d=function(e,t){var a=[];return t.forEach((function(e){try{var t=Object(c.z)(e.market),n=t.base,i=t.quote;r.a.getState().system.forex,r.a.getState().settings.currency;if(r.a.getState().tokenMap.tokenMap){var s,l,d=e.side===c.k.Buy?n:i;a.push({side:e.side===c.k.Sell?o.R.Sell:o.R.Buy,amount:{from:{key:n,value:n?Object(u.a)(n,e.volume):void 0},to:{key:i,value:n?null===(s=Object(u.b)(n,e.volume))||void 0===s?void 0:s.times(e.price).toNumber():void 0}},price:{key:"",value:c.L(e.price).toNumber()},fee:{key:d||"--",value:d?null===(l=Object(u.b)(d,e.fee))||void 0===l?void 0:l.toNumber():void 0},time:parseInt(e.tradeTime.toString())})}}catch(b){console.log(b)}})),a},b=function(){var e,t=r.a.getState().account,a=t.accountId,n=t.apiKey;return null===(e=i.a.ammpoolAPI)||void 0===e?void 0:e.getUserAmmPoolTxs({accountId:a},n).then((function(e){return e.userAmmPoolTxs}))},p=function(e,t){var a=[],o=r.a.getState().tokenMap,i=o.tokenMap,l=o.coinMap,d=o.idIndex;return t.forEach((function(t){try{var o=r.a.getState().system.forex;if(l&&i&&d&&(!e||i["LP-"+e].tokenId===t.lpToken.tokenId)){var b,p,m=d[t.lpToken.tokenId].match(/LP-(\w+)-(\w+)/i),f=Object(n.a)(m,3),O=f[1],j=f[2];a.push({type:t.txType===c.b.JOIN?s.h.add:s.h.remove,totalDollar:1e3,totalYuan:1e3/Number(o),amountA:Object(u.a)(O,null===(b=t.poolTokens[0])||void 0===b?void 0:b.actualAmount),amountB:Object(u.a)(O,null===(p=t.poolTokens[1])||void 0===p?void 0:p.actualAmount),time:Number(t.updatedAt),coinA:l[O],coinB:l[j],status:t.txStatus})}return a}catch(v){console.log(v)}})),a}},38:function(e,t,a){"use strict";var n,c;a.d(t,"b",(function(){return n})),a.d(t,"c",(function(){return c})),a.d(t,"a",(function(){return r})),function(e){e.UNKNOWN="UNKNOWN",e.UNCONNNECTED="UNCONNNECTED",e.CONNECTED="CONNECTED",e.NOACCOUNT="NOACCOUNT",e.DEPOSITING="DEPOSITING",e.DEPOSIT_TO_CONFIREM="DEPOSIT_TO_CONFIREM",e.UNACTIVATED="UNACTIVATED",e.ARPROVING="ARPROVING",e.APPROV_TO_CONFIRM="APPROV_TO_CONFIRM",e.LOCKED="LOCKED",e.ACTIVATED="ACTIVATED"}(n||(n={})),function(e){e.Reset="Reset",e.Connecting="Connecting",e.HasPubkey="HasPubkey",e.HasNoPubkey="HasNoPubkey",e.ErrorResponse="ErrorResponse",e.Reconnect="Reconnect",e.FinishDeposit="FinishDeposit",e.DepositConfirmed="DepositConfirmed",e.IsSmartWallet="IsSmartWallet",e.ApproveSubmit="ApproveSubmit",e.ApproveConfirmed="ApproveConfirmed",e.Unlock="Unlock",e.Lock="Lock"}(c||(c={}));var r=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:n.UNCONNNECTED;return{initialState:e,states:{UNCONNNECTED:{Connecting:n.CONNECTED,Reset:n.UNCONNNECTED},CONNECTED:{HasPubkey:n.LOCKED,HasNoPubkey:n.UNACTIVATED,ErrorResponse:n.NOACCOUNT,Reset:n.UNCONNNECTED},NOACCOUNT:{ErrorResponse:n.NOACCOUNT,Reconnect:n.CONNECTED,Reset:n.UNCONNNECTED},DEPOSITING:{FinishDeposit:n.DEPOSIT_TO_CONFIREM,Reset:n.UNCONNNECTED},DEPOSIT_TO_CONFIREM:{HasPubkey:n.ACTIVATED,HasNoPubkey:n.DEPOSIT_TO_CONFIREM,ErrorResponse:n.DEPOSIT_TO_CONFIREM,Reset:n.UNCONNNECTED},UNACTIVATED:{IsSmartWallet:n.ARPROVING,Reset:n.UNCONNNECTED},ARPROVING:{ApproveSubmit:n.APPROV_TO_CONFIRM,Reset:n.UNCONNNECTED},APPROV_TO_CONFIRM:{ApproveConfirmed:n.ACTIVATED,Reset:n.UNCONNNECTED},LOCKED:{Unlock:n.ACTIVATED,Reset:n.UNCONNNECTED},ACTIVATED:{Lock:n.LOCKED,Reset:n.UNCONNNECTED}}}}},39:function(e,t,a){"use strict";var n=a(33),c=a(207),r=a(95),o=(a(61),a(696)),i=a(1011),s=a(535),u=a(1012),l=Object(r.b)("global/updateVersion"),d=a(142),b=a(25),p=a(118),m=a(402),f=a(4),O=a.n(f),j=a(23),v=a(42),h=a(275),g=a(28),A=O.a.mark(w),k=O.a.mark(y),x=function(){var e=Object(j.a)(O.a.mark((function e(){var t,a;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!g.a.ammpoolAPI){e.next=8;break}return e.next=3,g.a.ammpoolAPI.getAmmPoolActivityRules();case 3:return t=e.sent,a=t.groupByRuleTypeAndStatus,e.abrupt("return",{data:a});case 8:return e.abrupt("return",{data:void 0});case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();function w(){var e,t;return O.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,Object(v.b)(x);case 3:return e=a.sent,t=e.data,a.next=7,Object(v.d)(Object(h.c)({ammActivityMap:t}));case 7:a.next=13;break;case 9:return a.prev=9,a.t0=a.catch(0),a.next=13,Object(v.d)(Object(h.c)(a.t0));case 13:case"end":return a.stop()}}),A,null,[[0,9]])}function y(){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(v.a)([Object(v.f)(h.b,w)]);case 2:case"end":return e.stop()}}),k)}var I=a(2),C=a(7),T=a(193),_=a(15),S=a(43),E=O.a.mark(L),P=O.a.mark(U),N=O.a.mark(B),R=O.a.mark(F),D=function(e){var t=e.ammPoolState,a=e.keyPair,n=xt.getState().tokenMap.idIndex,c=a.match(/(\w+)-(\w+)/i),r=Object(C.a)(c,3),o=r[1],i=r[2],s=xt.getState().system,u=s.forex,l=s.faitPrices;if(n&&o&&i&&l&&u){var d={amountDollar:parseFloat(t.liquidityUSD),amountYuan:parseFloat(t.liquidityUSD)/(u||6.5),totalLPToken:Object(S.t)("LP-"+a,t.lpLiquidity),totalA:Object(S.t)(o,t.liquidity[0]),totalB:Object(S.t)(i,t.liquidity[1]),rewardValue:t.rewards[0]?Object(S.t)(n[t.rewards[0].tokenId],t.rewards[0].volume):void 0,rewardToken:t.rewards[0]?n[t.rewards[0].tokenId]:void 0,rewardValue2:t.rewards[1]?Object(S.t)(n[t.rewards[1].tokenId],t.rewards[1].volume):void 0,rewardToken2:t.rewards[1]?n[t.rewards[1].tokenId]:void 0},b=Object(S.u)(o,t.fees[0]),p=Object(S.u)(i,t.fees[1]),m=l[o]&&l[i]?Object(_.L)(b||0).times(l[o].price).plus(Object(_.L)(p||0).times(l[i].price)):void 0,f=m?m.times(u):void 0;return Object(I.a)(Object(I.a)({},d),{},{feeA:null===b||void 0===b?void 0:b.toNumber(),feeB:null===p||void 0===p?void 0:p.toNumber(),feeDollar:m?m.toNumber():void 0,feeYuan:f?f.toNumber():void 0,tradeFloat:{change:void 0,timeUnit:"24h"},APY:1*parseInt(t.apyBips)/100})}},M=function(){var e=Object(j.a)(O.a.mark((function e(t){var a,n,c,r,o,i,s,u;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.ammpools,n={},e.next=4,Object(g.b)().getAmmPoolStats();case 4:return c=e.sent,r=c.ammPoolStats,(o=xt.getState().amm.ammMap.__timer__)&&-1!==o&&clearInterval(o),o=setInterval(Object(j.a)(O.a.mark((function e(){var t;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(g.b)().getAmmPoolStats();case 2:t=e.sent.ammPoolStats,xt.dispatch(Object(T.e)({ammPoolStats:t}));case 4:case"end":return e.stop()}}),e)}))),9e5),i=xt.getState(),s=i.tokenMap,s.coinMap,u=s.idIndex,Reflect.ownKeys(a).forEach(function(){var e=Object(j.a)(O.a.mark((function e(t){var c,o,i,s;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:(c=a[t]).market===t&&c.tokens.pooled&&u&&(o=u[c.tokens.pooled[0]],i=u[c.tokens.pooled[1]],s=Object(I.a)(Object(I.a)({coinA:o,coinB:i,isNew:!(Date.now()-Number(c.createdAt)>2592e5),isActivity:7===c.status,address:c.address},D({ammPoolState:r[t],keyPair:"".concat(o,"-").concat(i)})),{},{__rawConfig__:c}),n[c.market]=s);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),e.abrupt("return",{ammMap:n,__timer__:o});case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();function L(e){var t,a,n,c,r;return O.a.wrap((function(o){for(;;)switch(o.prev=o.next){case 0:return t=e.payload,o.prev=1,a=t.ammpools,o.next=5,Object(v.b)(M,{ammpools:a});case 5:return n=o.sent,c=n.ammMap,r=n.__timer__,o.next=10,Object(v.d)(Object(T.c)({ammMap:c,__timer__:r}));case 10:o.next=16;break;case 12:return o.prev=12,o.t0=o.catch(1),o.next=16,Object(v.d)(Object(T.c)(o.t0));case 16:case"end":return o.stop()}}),E,null,[[1,12]])}function U(e){var t,a,n;return O.a.wrap((function(c){for(;;)switch(c.prev=c.next){case 0:return t=e.payload,c.prev=1,a=t.ammPoolStats,n=xt.getState().amm.ammMap.ammMap,a&&Reflect.ownKeys(a).map((function(e){var t=e.replace("AMM-","");return n[e]=Object(I.a)(Object(I.a)({},n[e]),D({ammPoolState:a[e],keyPair:t})),n})),c.next=7,Object(v.d)(Object(T.c)({ammMap:n}));case 7:c.next=13;break;case 9:return c.prev=9,c.t0=c.catch(1),c.next=13,Object(v.d)(Object(T.c)(c.t0));case 13:case"end":return c.stop()}}),P,null,[[1,9]])}function B(){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(v.a)([Object(v.f)(T.b,L)]);case 2:case"end":return e.stop()}}),N)}function F(){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(v.a)([Object(v.f)(T.e,U)]);case 2:case"end":return e.stop()}}),R)}var K=[Object(v.c)(B),Object(v.c)(F)],V=Object(c.b)({ammMap:p.a.reducer,ammActivityMap:m.a.reducer}),W=[Object(v.c)(y)].concat(Object(n.a)(K)),H=a(121),Y=a(16),G=a(276),q=a(2083);function z(e){if(e){var t=q.a.getAddress(e.address);return"https://exchange.loopring.io/assets/images/ethereum/assets/".concat(t,"/logo.png")}return""}var J=O.a.mark(Q),X=O.a.mark($),Z=function(){var e=Object(j.a)(O.a.mark((function e(t){var a,n,c,r,o,i,s,u,l;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.tokensMap,n=t.pairs,c=t.marketArr,r=t.tokenArr,o={},i={},s=a,u={},l={},Reflect.ownKeys(a).forEach((function(e){var t,c,r={icon:(t=e,c=a,z(c[t])),name:e,simpleName:e,description:"",company:""};e.startsWith("LP-")||(o[e]=r),i[e]=r,n[e]&&n[e].tokenList&&(a[e].tradePairs=n[e].tokenList),u=Object(I.a)(Object(I.a)({},u),{},Object(Y.a)({},a[e].address,e)),l=Object(I.a)(Object(I.a)({},l),{},Object(Y.a)({},a[e].tokenId,e))})),e.abrupt("return",{data:{coinMap:o,totalCoinMap:i,addressIndex:u,idIndex:l,tokenMap:s,marketArray:c,marketCoins:r}});case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();function Q(e){var t,a,n,c,r,o,i,s;return O.a.wrap((function(u){for(;;)switch(u.prev=u.next){case 0:return t=e.payload,u.prev=1,a=t.tokensMap,n=t.marketMap,c=t.pairs,r=t.marketArr,o=t.tokenArr,u.next=5,Object(v.b)(Z,{tokensMap:a,pairs:c,marketArr:r,tokenArr:o});case 5:return i=u.sent,s=i.data,u.next=9,Object(v.d)(Object(G.b)(Object(I.a)(Object(I.a)({},s),{},{marketMap:n})));case 9:u.next=15;break;case 11:return u.prev=11,u.t0=u.catch(1),u.next=15,Object(v.d)(Object(G.b)(u.t0));case 15:case"end":return u.stop()}}),J,null,[[1,11]])}function $(){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(v.a)([Object(v.f)(G.a,Q)]);case 2:case"end":return e.stop()}}),X)}var ee=[Object(v.c)($)],te=a(231),ae=a(6),ne=O.a.mark(ie),ce=O.a.mark(se),re=O.a.mark(ue),oe=function(){var e=Object(j.a)(O.a.mark((function e(t){var a,n;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(g.c)().getMixTicker({market:t.join(",")});case 2:return a=e.sent,n=Object(S.o)({tickerMap:a.tickMap}),e.abrupt("return",{data:n});case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();function ie(e){var t,a,n,c,r;return O.a.wrap((function(o){for(;;)switch(o.prev=o.next){case 0:if(t=e.payload,o.prev=1,a=t.tickerKey,n=t.tickerKeys,!(a||n&&n.length)){o.next=12;break}return o.next=6,Object(v.b)(oe,a?[a]:n);case 6:return c=o.sent,r=c.data,o.next=10,Object(v.d)(Object(te.b)({tickerMap:r}));case 10:o.next=13;break;case 12:throw new ae.m(ae.r.NO_TOKEN_KEY_LIST);case 13:o.next=19;break;case 15:return o.prev=15,o.t0=o.catch(1),o.next=19,Object(v.d)(Object(te.b)(o.t0));case 19:case"end":return o.stop()}}),ne,null,[[1,15]])}function se(){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(v.a)([Object(v.f)(te.a,ie)]);case 2:case"end":return e.stop()}}),ce)}function ue(){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(v.a)([Object(v.f)(te.c,ie)]);case 2:case"end":return e.stop()}}),re)}var le,de,be=[Object(v.c)(se),Object(v.c)(ue)],pe=a(277),me=a(258),fe=a(205),Oe=a(2061),je=a(9),ve=a(12),he=a(559),ge=new(a(1968).a),Ae=function(e){return ge.next({ammPoolMap:e})};!function(e){e.pingpong="pingpong",e.account="account",e.order="order",e.orderbook="orderbook",e.trade="trade",e.ticker="ticker",e.candlestick="candlestick",e.ammpool="ammpool"}(de||(de={}));var ke=function(){function e(t){var a=this;Object(je.a)(this,e),this._socketCallbackMap=void 0,this._loopringSocket=void 0,this.__wsTimer__={timer:-1,count:0},this._baseUrl=void 0,this.socketSendMessage=function(){var e=Object(j.a)(O.a.mark((function e(t){var n,c,r,o,i;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.socket,c=t.apiKey,e.prev=1,!n||!Reflect.ownKeys(n).length){e.next=15;break}if(a.clearInitTimer(!0),a.resetSocketEvents(),r=a.makeMessageArray({socket:n}),o=r.topics,a.isConnectSocket()){e.next=11;break}return e.next=9,a.socketConnect({topics:o,apiKey:c});case 9:e.next=12;break;case 11:null===(i=a._loopringSocket)||void 0===i||i.send(a.makeTopics(o));case 12:return e.abrupt("return",!0);case 15:return a.isConnectSocket()||a.socketClose(),e.abrupt("return",!1);case 17:e.next=22;break;case 19:throw e.prev=19,e.t0=e.catch(1),new ae.m(ae.r.SOCKET_ERROR);case 22:case"end":return e.stop()}}),e,null,[[1,19]])})));return function(t){return e.apply(this,arguments)}}(),this.socketClose=Object(j.a)(O.a.mark((function e(){var t;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=a._loopringSocket,e.abrupt("return",new Promise((function(e){t?(t.onclose=function(t){e("Socket is closed, ".concat(t.reason))},t.close()):Promise.resolve("no websocket")})));case 2:case"end":return e.stop()}}),e)}))),this.removeSocketEvents=function(e){a._socketCallbackMap&&a._socketCallbackMap[e]&&delete a._socketCallbackMap[e]},this.makeMessageArray=function(e){var t=e.socket,c=[],r=[];return Reflect.ownKeys(t).forEach((function(e){switch(e){case de.ticker:(r=t[de.ticker].map((function(e){return Object(_.G)(e)})))&&r.length&&(a.addSocketEvents(de.ticker),c=[].concat(Object(n.a)(c),Object(n.a)(r)));break;case de.account:t[de.account]&&(r=[Object(_.x)()]),r&&r.length&&(a.addSocketEvents(de.account),c=[].concat(Object(n.a)(c),Object(n.a)(r)));break;case de.order:(r=t[de.order].map((function(e){return Object(_.D)(e)})))&&r.length&&(a.addSocketEvents(de.order),c=[].concat(Object(n.a)(c),Object(n.a)(r)));break;case de.orderbook:(r=t[de.orderbook].map((function(e){return Object(_.E)(e,0)})))&&r.length&&(a.addSocketEvents(de.orderbook),c=[].concat(Object(n.a)(c),Object(n.a)(r)));break;case de.trade:(r=t[de.trade].map((function(e){return Object(_.H)(e)})))&&r.length&&(a.addSocketEvents(de.trade),c=[].concat(Object(n.a)(c),Object(n.a)(r)));break;case de.candlestick:(r=t[de.candlestick].map((function(e){return Object(_.A)(e)})))&&r.length&&(a.addSocketEvents(de.candlestick),c=[].concat(Object(n.a)(c),Object(n.a)(r)));break;case de.ammpool:(r=t[de.ammpool].map((function(e){return Object(_.y)(e)})))&&r.length&&(a.addSocketEvents(de.ammpool),c=[].concat(Object(n.a)(c),Object(n.a)(r)))}})),{topics:c}},this.isConnectSocket=function(){return!(!a._loopringSocket||!a._loopringSocket.send)},this.makeTopics=function(e,t){var a={op:"sub",unsubscribeAll:"true",topics:e};return t&&(a.apiKey=t),JSON.stringify(a)},this.addSocketEvents=function(t,n){a._socketCallbackMap=Object(I.a)(Object(I.a)({},a._socketCallbackMap),{},Object(Y.a)({},t,{fn:e.SocketEventMap[t],deps:n||[]}))},this.socketConnect=function(){var e=Object(j.a)(O.a.mark((function e(t){var c,r,o,i,s;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(c=t.topics,r=t.apiKey,e.prev=1,o=a,!g.a.wsAPI||!c){e.next=13;break}return e.next=6,g.a.wsAPI.getWsKey();case 6:i=e.sent,s=i.wsKey,a._loopringSocket=new WebSocket("".concat(a._baseUrl,"?wsApiKey=").concat(s)),a._loopringSocket.onopen=function(){console.warn("Socket>>Socket","WebSocket is open now."),o._loopringSocket&&o._loopringSocket.readyState===WebSocket.OPEN&&o._loopringSocket.send(o.makeTopics(c))},a._loopringSocket.onmessage=function(e){var t=e.data;if("ping"===t&&o._socketCallbackMap){var a,c,r;null===(a=o._socketCallbackMap)||void 0===a||null===(c=a.pingpong)||void 0===c||(r=c.fn).call.apply(r,[o,t].concat(Object(n.a)(o._socketCallbackMap.pingpong.deps)))}else{var i=JSON.parse(t),s=(i.topics,i.topic);if(s&&s.topic&&o._socketCallbackMap){var u,l,d=i.topic.topic,b=i.data;null===(u=o._socketCallbackMap[d.topic])||void 0===u||(l=u.fn).call.apply(l,[o,b].concat(Object(n.a)(o._socketCallbackMap[d.topic].deps)))}}return!1},a._loopringSocket.onclose=function(){var e=Object(j.a)(O.a.mark((function e(t){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:o._loopringSocket&&(o._loopringSocket=void 0),console.log("Socket>>Socket","Socket is closed. Reconnect will be attempted in 1 second.",t.reason),o.clearInitTimer(),o.__wsTimer__.count<5&&(o.__wsTimer__.timer=setTimeout((function(){o.socketConnect.call(o,{topics:c,apiKey:r})}),1e3*o.__wsTimer__.count));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),a._loopringSocket.onerror=function(e){console.error("Socket>>Socket","Socket encountered error:","Closing socket",e)};case 13:e.next=19;break;case 15:e.prev=15,e.t0=e.catch(1),console.error("Socket>>Socket","connect error, not from reconnect"),a._loopringSocket&&a._loopringSocket.close();case 19:case"end":return e.stop()}}),e,null,[[1,15]])})));return function(t){return e.apply(this,arguments)}}(),this.clearInitTimer=function(e){a.__wsTimer__&&(-1!==a.__wsTimer__.timer&&clearTimeout(a.__wsTimer__.timer),a.__wsTimer__.timer=-1,a.__wsTimer__.count++),e&&(a.__wsTimer__={timer:-1,count:0})},this.resetSocketEvents=function(){a._socketCallbackMap=void 0,a.addSocketEvents(de.pingpong,[a])},this._baseUrl=t}return Object(ve.a)(e,[{key:"loopringSocket",get:function(){return this._loopringSocket}},{key:"socketCallbackMap",get:function(){return this._socketCallbackMap}}]),e}();ke.SocketEventMap=(le={},Object(Y.a)(le,de.account,(function(e){})),Object(Y.a)(le,de.order,(function(e){})),Object(Y.a)(le,de.orderbook,(function(e){})),Object(Y.a)(le,de.trade,(function(e){})),Object(Y.a)(le,de.ticker,(function(e){var t=Object(C.a)(e,11),a=t[0],n=t[1],c=t[2],r=t[3],o=t[4],i=t[5],s=t[6],u=t[7],l=t[8],d=t[9],b=t[10],p=a.match(/(\w+)-(\w+)/i),m=Object(C.a)(p,3),f=m[1],O=m[2],j=c,v=r,h=void 0===o||0===Number(o)?void 0:Object(_.L)(u).minus(o).div(o);he.a.sendTicker(Object(Y.a)({},a,{symbol:a,base:f,quote:O,base_token_volume:j,quote_token_volume:v,timestamp:Number(n),change:h,base_fee_amt:void 0,quote_fee_amt:void 0,open:o,high:i,low:s,close:u,count:l,bid:d,ask:b}))})),Object(Y.a)(le,de.candlestick,(function(e){})),Object(Y.a)(le,de.candlestick,(function(e){})),Object(Y.a)(le,de.ammpool,(function(e){var t=Object(C.a)(e,5),a=t[0],n=t[1],c=t[2],r=Object(C.a)(t[3],2),o=r[0],i=r[1],s=t[4];Ae({poolName:a,poolAddress:n,pooled:c,lp:{tokenId:o,volume:i},risky:s})})),Object(Y.a)(le,de.pingpong,(function(e,t){"ping"===e&&t.loopringSocket.send("pong")})),le);var xe=a(46),we=O.a.mark(Te),ye=O.a.mark(_e),Ie=O.a.mark((function e(t){var a,n,c,r,o,i,s,u,l,b,f,h;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Object(xe.a)("initConfig initConfig initConfig"),xt.dispatch(Object(d.b)(void 0)),e.next=4,Object(v.b)(Object(j.a)(O.a.mark((function e(){var t;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,null===(t=g.a.exchangeAPI)||void 0===t?void 0:t.getTokens();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)}))));case 4:return a=e.sent,n=a.tokenSymbolMap,e.next=8,Object(v.b)(Object(j.a)(O.a.mark((function e(){var t;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,null===(t=g.a.ammpoolAPI)||void 0===t?void 0:t.getAmmPoolConf();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)}))));case 8:return c=e.sent,r=c.ammpools,e.next=12,Object(v.b)(Object(j.a)(O.a.mark((function e(){var t;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",null===(t=g.a.exchangeAPI)||void 0===t?void 0:t.getMixMarkets());case 1:case"end":return e.stop()}}),e)}))));case 12:return o=e.sent,i=o.pairs,s=o.marketArr,u=o.tokenArr,l=o.markets,xt.dispatch(Object(H.a)({tokensMap:n,marketMap:l,pairs:i,marketArr:s,tokenArr:u})),e.next=20,Object(v.e)("tokenMap/getTokenMapStatus");case 20:return xt.dispatch(Object(p.b)({ammpools:r})),xt.dispatch(Object(m.b)({ammpools:r})),xt.getState().tokenMap.status,e.next=25,Object(Oe.a)(10);case 25:b=xt.getState(),f=b.account,h=b.walletLayer1,f.accAddr&&void 0===h.walletLayer1&&xt.dispatch(Object(fe.a)(void 0));case 27:case"end":return e.stop()}}),e)})),Ce=function(){var e=Object(j.a)(O.a.mark((function e(t){var a,n,c,r,o,i,s,u,l,d;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a="localhost"===window.location.hostname?me.a.DEV:_.e.GORLI===t?me.a.UAT:me.a.PROD,(t=_.e.GORLI===t?_.e.GORLI:_.e.MAINNET===t?_.e.MAINNET:me.b.NONETWORK)!==me.b.NONETWORK){e.next=6;break}throw new ae.m(ae.r.NO_NETWORK_ERROR);case 6:if(g.a.InitApi(t),!g.a.exchangeAPI){e.next=29;break}return e.next=10,g.a.exchangeAPI.getExchangeInfo();case 10:return n=e.sent,c=n.exchangeInfo,e.next=14,g.a.exchangeAPI.getFiatPrice({legal:"USD"});case 14:return r=e.sent.fiatPrices,e.next=17,g.a.exchangeAPI.getFiatPrice({legal:"CNY"});case 17:return o=e.sent.fiatPrices,e.next=20,Object(g.c)().getGasPrice();case 20:return e.t0=e.sent.gasPrice,i=e.t0/1e9,s=_.e.MAINNET===t?"https://".concat("api.loopring.network"):"https:/".concat("uat2.loopring.io"),u=_.e.MAINNET===t?"wss://ws.".concat("api.loopring.network","/v3/ws"):"wss://ws.".concat("uat2.loopring.io","/v3/ws"),window.loopringSocket=new ke(u),l=o.USDT.price,d=function(e){return e&&-1!==e&&clearInterval(e),setInterval(Object(j.a)(O.a.mark((function e(){var t,a,n,c;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(g.c)().getFiatPrice({legal:"CNY"});case 2:return a=e.sent.fiatPrices,e.next=5,Object(g.c)().getGasPrice();case 5:e.t0=e.sent.gasPrice,n=e.t0/1e9,c=null===(t=a.USDT)||void 0===t?void 0:t.price,xt.dispatch(Object(p.d)(void 0)),xt.dispatch(Object(pe.c)({faitPrices:a,gasPrice:n,forex:c}));case 10:case"end":return e.stop()}}),e)}))),3e5)}(d=xt.getState().system.__timer__),e.abrupt("return",{chainId:t,env:a,baseURL:s,socketURL:u,faitPrices:r,gasPrice:i,forex:l,exchangeInfo:c,__timer__:d});case 29:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();function Te(e){var t,a,n,c,r,o,i,s,u,l;return O.a.wrap((function(d){for(;;)switch(d.prev=d.next){case 0:return t=e.payload,d.prev=1,a=t.chainId,d.next=5,Object(v.b)(Ce,a);case 5:return n=d.sent,c=n.env,r=n.baseURL,o=n.faitPrices,i=n.gasPrice,s=n.forex,u=n.exchangeInfo,l=n.__timer__,d.next=15,Object(v.d)(Object(pe.a)({env:c,baseURL:r,faitPrices:o,gasPrice:i,forex:s,exchangeInfo:u,__timer__:l}));case 15:return d.next=17,Object(v.b)(Ie,a);case 17:d.next=23;break;case 19:return d.prev=19,d.t0=d.catch(1),d.next=23,Object(v.d)(Object(pe.a)(d.t0));case 23:case"end":return d.stop()}}),we,null,[[1,19]])}function _e(){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(v.a)([Object(v.f)(pe.d,Te)]);case 2:case"end":return e.stop()}}),ye)}var Se=[Object(v.c)(_e)],Ee=a(259),Pe=O.a.mark(De),Ne=O.a.mark(Me),Re=function(){var e=Object(j.a)(O.a.mark((function e(){var t,a,n,c,r,o,i,s,u,l,d;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=Object(g.c)(),a=xt.getState().account,n=a.accAddr,a.accountId,c=xt.getState().tokenMap,r=c.tokenMap,o=c.marketCoins,e.next=5,t.getEthBalances({owner:n});case 5:return i=e.sent,s=i.ethBalance,e.next=9,t.getTokenBalances({owner:n,token:o.join()},r);case 9:return u=e.sent,(l=u.tokenBalances).ETH=s,l&&(d=Reflect.ownKeys(l).reduce((function(e,t){return Object(I.a)(Object(I.a)({},e),{},Object(Y.a)({},t,{belong:t,count:Object(_.v)(r,t,l[t])}))}),{})),e.abrupt("return",{walletLayer1:d});case 14:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();function De(){var e,t;return O.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,Object(v.b)(Re);case 3:return e=a.sent,t=e.walletLayer1,a.next=7,Object(v.d)(Object(Ee.a)({walletLayer1:t}));case 7:a.next=13;break;case 9:return a.prev=9,a.t0=a.catch(0),a.next=13,Object(v.d)(Object(Ee.a)(a.t0));case 13:case"end":return a.stop()}}),Pe,null,[[0,9]])}function Me(){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(v.a)([Object(v.f)(Ee.d,De)]);case 2:case"end":return e.stop()}}),Ne)}var Le=[Object(v.c)(Me)],Ue=a(232),Be=O.a.mark(Ve),Fe=O.a.mark(We),Ke=function(){var e=Object(j.a)(O.a.mark((function e(){var t,a,n,c,r,o,i,s,u;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=Object(g.d)(),a=xt.getState().account,n=a.accountId,c=a.apiKey,r=xt.getState().tokenMap,r.tokenMap,o=r.idIndex,r.marketCoins,!c||!n){e.next=9;break}return e.next=6,t.getUserBalances({accountId:n,tokens:""},c);case 6:s=e.sent,(u=s.userBalances)&&(i=Reflect.ownKeys(u).reduce((function(e,t){return Object(I.a)(Object(I.a)({},e),{},Object(Y.a)({},o[t],u[Number(t)]))}),{}));case 9:return e.abrupt("return",{walletLayer2:i});case 10:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();function Ve(){var e,t;return O.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,Object(v.b)(Ke);case 3:return e=a.sent,t=e.walletLayer2,a.next=7,Object(v.d)(Object(Ue.a)({walletLayer2:t}));case 7:a.next=13;break;case 9:return a.prev=9,a.t0=a.catch(0),a.next=13,Object(v.d)(Object(Ue.a)(a.t0));case 13:case"end":return a.stop()}}),Be,null,[[0,9]])}function We(){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(v.a)([Object(v.f)(Ue.d,Ve)]);case 2:case"end":return e.stop()}}),Fe)}var He=[Object(v.c)(We)],Ye=a(260),Ge=O.a.mark(Je),qe=O.a.mark(Xe),ze=function(){var e=Object(j.a)(O.a.mark((function e(t){var a,n;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=xt.getState().account.accountId,n=xt.getState().userRewardsMap.__timer__,!g.a.ammpoolAPI){e.next=7;break}return n=function(e){return e&&-1!==e&&clearInterval(e),setTimeout(Object(j.a)(O.a.mark((function e(){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:xt.dispatch(Object(Ye.a)(void 0));case 1:case"end":return e.stop()}}),e)}))),12e5)}(n),e.abrupt("return",g.a.ammpoolAPI.getAmmPoolUserRewards({owner:a}).then((function(e){return{data:e.ammUserRewardMap,__timer__:n}})));case 7:return e.abrupt("return",Promise.reject({data:void 0,__timer__:n}));case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();function Je(e){var t,a,n;return O.a.wrap((function(c){for(;;)switch(c.prev=c.next){case 0:return e.payload,c.prev=1,c.next=4,Object(v.b)(ze);case 4:return t=c.sent,a=t.data,n=t.__timer__,c.next=9,Object(v.d)(Object(Ye.b)({userRewardsMap:a,__timer__:n}));case 9:c.next=15;break;case 11:return c.prev=11,c.t0=c.catch(1),c.next=15,Object(v.d)(Object(Ye.b)(c.t0));case 15:case"end":return c.stop()}}),Ge,null,[[1,11]])}function Xe(){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(v.a)([Object(v.f)(Ye.a,Je)]);case 2:case"end":return e.stop()}}),qe)}var Ze=[Object(v.c)(Xe)],Qe=a(210),$e=O.a.mark(nt),et=O.a.mark(ct),tt=O.a.mark(rt),at=O.a.mark(ot);function nt(){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!window.loopringSocket){e.next=4;break}return e.next=4,Object(v.b)(window.loopringSocket.socketClose);case 4:return e.next=6,Object(v.d)(Object(Qe.a)(void 0));case 6:e.next=12;break;case 8:return e.prev=8,e.t0=e.catch(0),e.next=12,Object(v.d)(Object(Qe.a)(e.t0));case 12:case"end":return e.stop()}}),$e,null,[[0,8]])}function ct(e){var t,a,n;return O.a.wrap((function(c){for(;;)switch(c.prev=c.next){case 0:if(t=e.payload,c.prev=1,a=xt.getState().account.apiKey,n=t.socket,!window.loopringSocket){c.next=7;break}return c.next=7,Object(v.b)(window.loopringSocket.socketSendMessage,{socket:n,apiKey:a});case 7:return c.next=9,Object(v.d)(Object(Qe.a)(void 0));case 9:c.next=15;break;case 11:return c.prev=11,c.t0=c.catch(1),c.next=15,Object(v.d)(Object(Qe.a)(c.t0));case 15:case"end":return c.stop()}}),et,null,[[1,11]])}function rt(){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(v.a)([Object(v.f)(Qe.c,nt)]);case 2:case"end":return e.stop()}}),tt)}function ot(){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(v.a)([Object(v.f)(Qe.b,ct)]);case 2:case"end":return e.stop()}}),at)}var it=[Object(v.c)(rt),Object(v.c)(ot)],st=O.a.mark(ut);function ut(){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(v.a)([].concat(Object(n.a)(ee),Object(n.a)(Le),Object(n.a)(He),Object(n.a)(Se),Object(n.a)(W),Object(n.a)(be),Object(n.a)(Ze),Object(n.a)(it)));case 2:case"end":return e.stop()}}),st)}var lt=ut,dt=a(401),bt=a(403),pt=a(157),mt=a(404),ft=a(251),Ot=Object(r.c)({name:"favoriteMarket",initialState:[],reducers:{clearAll:function(e,t){[]},removeMarket:function(e,t){var a=t.payload;a&&(e=e.filter((function(e){return e===a})))},addMarket:function(e,t){var a=t.payload;a&&-1===e.findIndex((function(e){return e===a}))&&(e=[].concat(Object(n.a)(e),[a]))},addMarkets:function(e,t){var a=t.payload;a.length&&(e=[].concat(Object(n.a)(e),Object(n.a)(a.reduce((function(t,a){return a&&-1===e.findIndex((function(e){return e===a}))&&t.push(a),t}),[]))))}}}),jt=Ot.actions,vt=(jt.clearAll,jt.removeMarket,jt.addMarket,jt.addMarkets,a(0),Object(c.b)({favoriteMarket:Ot.reducer})),ht=Object(i.a)(),gt=Object(c.b)({account:d.a.reducer,socket:mt.a.reducer,settings:b.nb.reducer,system:bt.a.reducer,modals:b.db.reducer,userRewardsMap:ft.b.reducer,amm:V,tokenMap:H.b.reducer,walletLayer2:pt.b.reducer,walletLayer1:fe.c.reducer,tickerMap:dt.a.reducer,localStore:vt}),At=["settings","localStore"],kt=Object(r.a)({reducer:gt,middleware:[].concat(Object(n.a)(Object(r.d)({thunk:!1,serializableCheck:!1})),[Object(o.save)({states:At}),ht]),devTools:!1,enhancers:[u.reduxBatch],preloadedState:Object(o.load)({states:At})});kt.dispatch(l()),kt.dispatch(Object(b.fb)(kt.getState().settings.language)),kt.dispatch(Object(b.eb)(s.a)),ht.run(lt,kt.dispatch);var xt=t.a=kt},401:function(e,t,a){"use strict";a.d(t,"b",(function(){return s})),a.d(t,"a",(function(){return r.e}));var n=a(2),c=a(61),r=a(231),o=a(0),i=a.n(o);function s(){var e=Object(c.c)((function(e){return e.tickerMap})),t=Object(c.b)();return Object(n.a)(Object(n.a)({},e),{},{statusUnset:i.a.useCallback((function(){return t(Object(r.d)(void 0))}),[t]),updateTickers:i.a.useCallback((function(e){return t(Object(r.c)({tickerKeys:e}))}),[t]),updateTicker:i.a.useCallback((function(e){return t(Object(r.a)({tickerKey:e}))}),[t])})}},402:function(e,t,a){"use strict";a.d(t,"c",(function(){return s})),a.d(t,"a",(function(){return r.a})),a.d(t,"b",(function(){return r.b}));var n=a(2),c=a(61),r=a(275),o=a(0),i=a.n(o);function s(){var e=Object(c.c)((function(e){return e.amm.ammActivityMap})),t=Object(c.b)();return Object(n.a)(Object(n.a)({},e),{},{statusUnset:i.a.useCallback((function(){return t(Object(r.d)(void 0))}),[t]),getAmmActivityMap:i.a.useCallback((function(){return t(Object(r.b)(void 0))}),[t])})}},403:function(e,t,a){"use strict";a.d(t,"b",(function(){return u})),a.d(t,"a",(function(){return r.b}));var n=a(2),c=a(61),r=a(277),o=a(0),i=a.n(o),s=a(118);function u(){var e=Object(c.c)((function(e){return e.system})),t=Object(c.b)();return Object(n.a)(Object(n.a)({},e),{},{statusUnset:i.a.useCallback((function(){return t(Object(s.c)(void 0))}),[t]),updateSystem:i.a.useCallback((function(e){return t(Object(r.d)(e))}),[t])})}a(258)},404:function(e,t,a){"use strict";a.d(t,"b",(function(){return u})),a.d(t,"a",(function(){return r.d}));var n=a(2),c=a(61),r=a(210),o=a(0),i=a.n(o),s=a(118);function u(){var e=Object(c.c)((function(e){return e.socket})),t=Object(c.b)();return Object(n.a)(Object(n.a)({},e),{},{statusUnset:i.a.useCallback((function(){return t(Object(s.c)(void 0))}),[t]),sendSocketTopic:i.a.useCallback((function(e){return t(Object(r.b)({socket:e}))}),[t]),socketEnd:i.a.useCallback((function(){return t(Object(r.c)(void 0))}),[t])})}},43:function(e,t,a){"use strict";a.d(t,"b",(function(){return c})),a.d(t,"e",(function(){return o})),a.d(t,"f",(function(){return u})),a.d(t,"a",(function(){return f})),a.d(t,"c",(function(){return O})),a.d(t,"d",(function(){return j})),a.d(t,"i",(function(){return v})),a.d(t,"l",(function(){return g})),a.d(t,"n",(function(){return y})),a.d(t,"o",(function(){return I})),a.d(t,"p",(function(){return h.d})),a.d(t,"m",(function(){return h.c})),a.d(t,"q",(function(){return C.a})),a.d(t,"h",(function(){return T.b})),a.d(t,"j",(function(){return T.c})),a.d(t,"g",(function(){return T.a})),a.d(t,"k",(function(){return T.d})),a.d(t,"r",(function(){return S})),a.d(t,"s",(function(){return E})),a.d(t,"t",(function(){return n.a})),a.d(t,"u",(function(){return n.b}));var n=a(105),c=function(e){var t=e.pair,a=e._ammCalcData,c=(e.ammType,e.tokenMap,e.coinMap),r=e.walletMap,o=e.ammMap,i=e.tickerData,s=e.ammPoolsBalance;if(a.coinInfoMap=c,i&&(a.AtoB=Number(i.close)),isNaN(a.AtoB)&&s){var u=Object(n.b)(t.coinAInfo.simpleName,s.pooled[0].volume),l=Object(n.b)(t.coinBInfo.simpleName,s.pooled[1].volume);a.AtoB=l&&u&&parseFloat(l.div(u).toFixed(7,0))}if(t.coinAInfo){var d,b;a.myCoinA={belong:t.coinAInfo.simpleName,balance:r?null===(d=r[t.coinAInfo.simpleName])||void 0===d?void 0:d.count:0},a.myCoinB={belong:t.coinBInfo.simpleName,balance:r?null===(b=r[t.coinBInfo.simpleName])||void 0===b?void 0:b.count:0};var p="".concat(t.coinAInfo.simpleName,"-").concat(t.coinBInfo.simpleName),m=0,f=0;if(r){var O,j=r?null===(O=r["LP-"+p])||void 0===O?void 0:O.count:0,v=o["AMM-"+p],h=v.totalLPToken,g=v.totalA,A=v.totalB;g&&h&&A&&(m=g/h*j,f=A/h*j),a.lpCoin=j}a.lpCoinA={belong:t.coinAInfo.simpleName,balance:m},a.lpCoinB={belong:t.coinBInfo.simpleName,balance:f}}return a},r=a(7);function o(e){var t=e.coinKey,a=e._tradeCalcData,n=e.tokenMap,c=e.coinMap;if(t){var o=t.match(/(\w+)-(\w+)/i),i=Object(r.a)(o,3),s=(i[0],i[1]),u=i[2];if(s&&c&&c[s]&&(a.coinSell=s),s!==u&&u&&-1!==n[s].tradePairs.findIndex((function(e){return e===u})))return a.coinBuy=u,a}return a.coinSell&&""!==a.coinSell?(a.coinBuy&&""!==a.coinBuy&&"undefined"!==a.coinBuy||(n&&n[a.coinSell].tradePairs?a.coinBuy=n[a.coinSell].tradePairs[0]:(a.coinSell="LRC",a.coinBuy="ETH")),a):(a.coinSell="LRC",a.coinBuy="ETH",a)}var i,s,u,l=a(16),d=a(33),b=a(39),p=a(38),m=a(25);!function(e){e[e.UNKNOWN=0]="UNKNOWN",e[e.UNCONNNECTED=1]="UNCONNNECTED",e[e.CONNECTED=2]="CONNECTED",e[e.NOACCOUNT=3]="NOACCOUNT",e[e.DEPOSITING=4]="DEPOSITING",e[e.DEPOSIT_TO_CONFIREM=5]="DEPOSIT_TO_CONFIREM",e[e.UNACTIVATED=6]="UNACTIVATED",e[e.ARPROVING=7]="ARPROVING",e[e.APPROV_TO_CONFIRM=8]="APPROV_TO_CONFIRM",e[e.LOCKED=9]="LOCKED",e[e.ACTIVATED=10]="ACTIVATED",e[e.DEFAULT=11]="DEFAULT"}(u||(u={}));var f=function(e,t){var a,n,c;switch(b.a.getState().account.status){case p.b.UNKNOWN:var o=e[u.UNKNOWN]?e[u.UNKNOWN]:[],i=Object(r.a)(o,2);a=i[0],n=i[1];break;case p.b.UNCONNNECTED:var s=e[u.UNCONNNECTED]?e[u.UNCONNNECTED]:[],l=Object(r.a)(s,2);a=l[0],n=l[1];break;case p.b.CONNECTED:var m=e[u.CONNECTED]?e[u.CONNECTED]:[],f=Object(r.a)(m,2);a=f[0],n=f[1];break;case p.b.NOACCOUNT:var O=e[u.NOACCOUNT]?e[u.NOACCOUNT]:[],j=Object(r.a)(O,2);a=j[0],n=j[1];break;case p.b.DEPOSITING:var v=e[u.DEPOSITING]?e[u.DEPOSITING]:[],h=Object(r.a)(v,2);a=h[0],n=h[1];break;case p.b.DEPOSIT_TO_CONFIREM:var g=e[u.DEPOSIT_TO_CONFIREM]?e[u.DEPOSIT_TO_CONFIREM]:[],A=Object(r.a)(g,2);a=A[0],n=A[1];break;case p.b.UNACTIVATED:var k=e[u.UNACTIVATED]?e[u.UNACTIVATED]:[],x=Object(r.a)(k,2);a=x[0],n=x[1];break;case p.b.ARPROVING:var w=e[u.ARPROVING]?e[u.ARPROVING]:[],y=Object(r.a)(w,2);a=y[0],n=y[1];break;case p.b.APPROV_TO_CONFIRM:var I=e[u.APPROV_TO_CONFIRM]?e[u.APPROV_TO_CONFIRM]:[],C=Object(r.a)(I,2);a=C[0],n=C[1];break;case p.b.LOCKED:var T=e[u.LOCKED]?e[u.LOCKED]:[],_=Object(r.a)(T,2);a=_[0],n=_[1];break;case p.b.ACTIVATED:var S=e[u.ACTIVATED]?e[u.ACTIVATED]:[],E=Object(r.a)(S,2);a=E[0],n=E[1]}if(void 0===a){var P=e[u.DEFAULT]?e[u.DEFAULT]:[],N=Object(r.a)(P,2);a=N[0],n=N[1]}if("function"===typeof a)return n=[].concat(Object(d.a)(null!==(c=n)&&void 0!==c?c:[]),Object(d.a)(null!==t&&void 0!==t?t:[])),a.apply(undefined,n)},O=(i={},Object(l.a)(i,u.UNCONNNECTED,[function(){return"labelConnectWallet"}]),Object(l.a)(i,u.DEFAULT,[function(){return"depositTitleAndActive"}]),Object(l.a)(i,u.ACTIVATED,[function(){}]),Object(l.a)(i,u.LOCKED,[function(){return"labelUnLockLayer2"}]),i),j=(s={},Object(l.a)(s,u.UNCONNNECTED,[function(){b.a.dispatch(Object(m.hb)({isShow:!0}))}]),Object(l.a)(s,u.DEFAULT,[function(){b.a.dispatch(Object(m.ib)({isShow:!0}))}]),Object(l.a)(s,u.LOCKED,[function(){b.a.dispatch(Object(m.gb)({isShow:!0}))}]),s),v=function(e){void 0!==typeof e.customSlippage&&b.a.dispatch(Object(m.mb)(e.customSlippage))},h=a(303),g=function(e){var t=e.market,a=e.ammDetail,n=e.walletMap,c=e.ammUserRewardMap;if(n&&a)return Object(h.b)(t,n,c,a)},A=a(2),k=a(15),x=a(6),w=a(312),y=function(e){var t=b.a.getState().system,a=t.faitPrices,n=t.forex,c=isNaN(e.close)||isNaN(e.open)||e.open===e.close?x.t.none:e.close>e.open?x.t.increase:x.t.decrease,r={change:(e.close-e.open)/e.open,timeUnit:"24h",priceYuan:0,priceDollar:0,floatTag:c,reward:0,close:isNaN(e.close)?void 0:e.close,high:0===e.high?void 0:e.high,low:0===e.low?void 0:e.low};if(a&&n){var o=Object(w.a)(e.base_token_volume,e.base),i=Object(k.L)(e.close).times(a[e.quote]?a[e.quote].price:0),s=i.times(n),u=a[e.quote].price?a[e.quote].price:0;r=Object(A.a)(Object(A.a)({},r),{},{changeDollar:Object(k.L)(e.close-e.open).times(u).toNumber(),changeYuan:Object(k.L)(e.close-e.open).times(u).times(n).toNumber(),volume:o?Number(o):void 0,closeDollar:i.toNumber(),closeYuan:s.toNumber()})}return r},I=function(e){var t=e.tickerMap,a=b.a.getState().system,n=a.faitPrices,c=a.forex;return Reflect.ownKeys(t).reduce((function(e,a){var r=t[a];if(r&&r.base&&c&&n&&(n[r.base]||n.USDT)){var o=Object(w.a)(r.base_token_volume,r.base),i=Object(k.L)(o||0).times(n[r.base]?n[r.base].price:n.USDT.price),s=null===i||void 0===i?void 0:i.times(c),u=r.change&&0!==r.change?100*r.change:void 0;e[a]={timeUnit:"24h",priceDollar:0===(null===i||void 0===i?void 0:i.toNumber())||null===i||void 0===i?void 0:i.toNumber(),priceYuan:0===(null===s||void 0===s?void 0:s.toNumber())||null===s||void 0===s?void 0:s.toNumber(),volume:o?Number(o):void 0,floatTag:r.close>r.open?"increase":"decrease",change:u,close:isNaN(r.close)?void 0:r.close,high:0===r.high?void 0:r.high,low:0===r.low?void 0:r.low,reward:0,rewardToken:"",__rawTicker__:r}}return e}),{})},C=a(451),T=a(348),_=a(28),S=function(e){var t=e.coinKey,a=e.ammKey,n=e.ammMap;return new Promise((function(e,c){_.a.ammpoolAPI&&_.a.exchangeAPI?Promise.all([_.a.ammpoolAPI.getAmmPoolSnapshot({poolAddress:n[a].address}),_.a.exchangeAPI.getMixTicker({market:t})]).then((function(t){var a=Object(r.a)(t,2),n=a[0].ammPoolSnapshot,c=a[1].tickMap;e({ammPoolsBalance:n,tickMap:c})})):c(new x.m(x.r.NO_SDK))}))},E=function(e){var t,a,c=e.coinKey,o=(e.market,e.ammPoolsBalance),i=e.fee,s=e.tokenMap,u=e.tickerData,d=e._tradeCalcData,b=e.coinMap,p=e.marketCoins,m=c.match(/(\w+)-(\w+)/i),f=Object(r.a)(m,3),O=f[1];f[2];if(a=u.base===O?Number(u.close):0!==Number(u.close)?1/Number(u.close):0,isNaN(a)&&o){var j,v=Object(k.z)(c),h=v.base,g=v.quote,w=o.pooled[0],y=o.pooled[1];if(h&&g&&s[h].tokenId===w.tokenId)j=[[h,w.volume],[g,y.volume]];else{if(!h||!g||s[h].tokenId!==y.tokenId)throw new x.m(x.r.NO_SUPPORT_PAIR);j=[[g,y.volume],[h,w.volume]]}var I,C=j,T=Object(r.a)(C,2),_=T[0],S=T[1];if(_&&S)a=parseFloat(null===(I=Object(n.b)(S[0],S[1]))||void 0===I?void 0:I.div(Object(n.b)(_[0],_[1])||1).toFixed(7,0))}return d.StoB=a,d.BtoS=0!==a&&void 0!==a?1/(1*a):0,d.sellCoinInfoMap=b&&(null===p||void 0===p?void 0:p.reduce((function(e,t){return Object(A.a)(Object(A.a)({},e),{},Object(l.a)({},t,b[t]))}),{})),d.buyCoinInfoMap=b&&s&&(null===(t=s[d.coinSell].tradePairs)||void 0===t?void 0:t.reduce((function(e,t){return Object(A.a)(Object(A.a)({},e),{},Object(l.a)({},t,b[t]))}),{})),d.fee=i,{_tradeCalcData:d}}},451:function(e,t,a){"use strict";a.d(t,"a",(function(){return i}));var n=a(16),c=a(2),r=a(39),o=a(15),i=function(){var e,t=r.a.getState().walletLayer2.walletLayer2,a=r.a.getState().tokenMap.tokenMap;return t&&(e=Reflect.ownKeys(t).reduce((function(e,r){var i=t[r],s=i.total,u=i.locked,l=(i.pending.withdraw,o.L(s).minus(o.L(u)).toString());return Object(c.a)(Object(c.a)({},e),{},Object(n.a)({},r,{belong:r,count:o.v(a,r,l),detail:t[r]}))}),{})),{walletMap:e}}},46:function(e,t,a){"use strict";function n(e){}a.d(t,"a",(function(){return n}))},462:function(e,t,a){"use strict";a.d(t,"a",(function(){return c})),a.d(t,"b",(function(){return r}));a(4),a(23),a(388),a(66),a(1957),a(89);var n=a(1959);a(192),a(460),a(551);function c(e){var t=new n.a(e,"number"===typeof e.chainId?e.chainId:"string"===typeof e.chainId?parseInt(e.chainId):"any");return t.pollingInterval=15e3,t}function r(e){if(e&&void 0!==e&&null!==e&&""!==e.trim())return e.substr(0,6)+"..."+e.substr(e.length-4);console.log("getShortAddr got empty!")}},463:function(e,t,a){"use strict";a.d(t,"b",(function(){return b})),a.d(t,"c",(function(){return y})),a.d(t,"a",(function(){return I}));var n,c=a(59),r=a(0),o=a.n(r),i=a(146),s=a(126),u=a(1);!function(e){e.Click="click",e.Scroll="scroll",e.Mouseover="mouseover"}(n||(n={}));var l=[n.Click,n.Scroll],d=Object(c.debounce)((function(){i.a.checkTimeout(!0)}),100),b=function(e){var t=e.children;return Object(s.b)(),Object(r.useEffect)((function(){return l.forEach((function(e){document.addEventListener(e,d)})),function(){l.forEach((function(e){document.removeEventListener(e,d)}))}}),[]),Object(u.jsx)(o.a.Fragment,{children:t})},p=a(7),m=a(341),f=a(684),O=a(192),j=a(167),v=a(279),h=a(142),g=a(15),A=a(61),k=a(46);var x=Object(m.a)("div",{target:"e1vtmr5h1"})({name:"17nbj0f",styles:"display:flex;align-items:center;justify-content:center;height:20rem"}),w=Object(m.a)("h2",{target:"e1vtmr5h0"})("color:",(function(e){return e.theme.colorBase.error}),";");function y(e){var t=e.children,a=Object(f.a)().t,n=Object(O.d)().active,c=Object(O.d)(g.h),o=c.active,i=c.error,s=c.activate,l=Object(v.b)();Object(r.useEffect)((function(){!l||o||i||n?Object(k.a)(l,!o,!i,!n):(Object(k.a)("--------------------\x3e>>>>>>"),s(j.d))}),[l,o,i,s,n]);var d=Object(A.b)();Object(v.d)((function(){Object(k.a)("1111 ------------\x3e onReConnectInjected"),d(Object(h.b)(void 0))}),!l);var b=Object(r.useState)(!1),m=Object(p.a)(b,2),y=m[0],I=m[1];return Object(r.useEffect)((function(){var e=setTimeout((function(){I(!0)}),600);return function(){clearTimeout(e)}}),[]),l?!n&&i?Object(u.jsx)(x,{children:Object(u.jsx)(w,{children:a("unknownError")})}):n||o?t:y?Object(u.jsx)(x,{}):null:null}var I=function(e){e.children;return Object(u.jsx)(o.a.Fragment,{children:null})}},559:function(e,t,a){"use strict";a.d(t,"a",(function(){return o}));var n=a(1968),c=a(43),r=new n.a,o={sendTicker:function(e){var t=Object(c.o)({tickerMap:e});r.next({tickerMap:t})},onSocket:function(){return r.asObservable()}}},62:function(e,t,a){"use strict";var n;a.d(t,"a",(function(){return n})),function(e){e.UNSET="UNSET",e.PENDING="PENDING",e.ERROR="ERROR",e.DONE="DONE"}(n||(n={}))}},[[1935,15,7,5,14,8,4,1,6,3,11,2,13,9,10]]]);
//# sourceMappingURL=main~a97bfcba.93ef8ff5.chunk.js.map