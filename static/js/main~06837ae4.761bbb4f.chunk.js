(this["webpackJsonp@loopring-web/webapp"]=this["webpackJsonp@loopring-web/webapp"]||[]).push([[0],{1583:function(e,t,a){"use strict";a.r(t);var n,c,r,o,i,s=a(49),u=a(143),l=a.n(u),d=a(2),b=a(13),p=a(117),m=a(92),f=a(25),v=a(5),j=a(1610),O=a(3),h=a.n(O),k=a(9),x=a(12),g=a(0),w=a.n(g),y=a(72),A={accAddress:"",readyState:v.a.UN_CONNECT,accountId:-1,apiKey:"",eddsaKey:"",publicKey:{},level:"",nonce:void 0,keyNonce:void 0,connectName:v.k.unknown,_chainId:1,status:"PENDING",errorMessage:null},S=Object(y.c)({name:"account",initialState:A,reducers:{updateAccountStatus:function(e,t){e.status=v.J.PENDING},changeShowModel:function(e,t){var a=t.payload._userOnModel;e._userOnModel=a},nextAccountStatus:function(e,t){if(t.error)e.status=v.J.ERROR,e.errorMessage=t.error;else{var a=t.payload,n=a.accAddress,c=a.readyState,r=a.accountId,o=a.wrongChain,i=a.level,s=a.apiKey,u=a.eddsaKey,l=a._chainId,d=a.nonce,b=a.connectName;void 0!==n&&(e.accAddress=n),void 0!==o&&(e.wrongChain=o),c&&(e.readyState=c),void 0!==r&&(e.accountId=r),void 0!==i&&(e.level=i),void 0!==s&&(e.apiKey=s),void 0!==u&&(e.eddsaKey=u),void 0!==b&&(e.connectName=b),void 0!==l&&(e._chainId=l),void 0!==d&&(e.nonce=d),e.status=v.J.DONE}},cleanAccountStatus:function(e,t){e.status=v.J.PENDING},statusUnset:function(e){e.status=v.J.UNSET}}}),I=S,C=S.actions,N=C.updateAccountStatus,T=C.changeShowModel,M=C.cleanAccountStatus,E=C.nextAccountStatus,D=C.statusUnset,P=["status","errorMessage"];function _(){var e=Object(s.c)((function(e){return e.account})),t=e.status,a=e.errorMessage,n=Object(f.a)(e,P),c=Object(s.b)(),r=w.a.useCallback((function(e){c(M(e))}),[c]),o=w.a.useCallback((function(e){c(N(e))}),[c]),i=w.a.useMemo((function(){return n._userOnModel}),[n]),u=w.a.useCallback((function(e){c(T({_userOnModel:e}))}),[c]);return{account:n,resetAccount:r,shouldShow:i,setShouldShow:u,updateAccount:o,statusUnset:w.a.useCallback((function(){c(D(void 0))}),[c]),status:t,errorMessage:a}}!function(e){e.dark="dark",e.light="light"}(n||(n={})),function(e){e.en="en_US",e.cn="zh_CN"}(c||(c={})),function(e){e[e.NORMAL=0]="NORMAL",e[e.ERROR=1]="ERROR",e[e.UNKNOWN=2]="UNKNOWN"}(r||(r={})),function(e){e[e.UNKNOWN=0]="UNKNOWN",e[e.LOADING=1]="LOADING",e[e.WALLET=2]="WALLET"}(o||(o={})),function(e){e[e.NoError=0]="NoError",e[e.DataNotReady=1]="DataNotReady",e[e.GetAccError=2]="GetAccError",e[e.GenEddsaKeyError=3]="GenEddsaKeyError",e[e.UpdateAccoutError=4]="UpdateAccoutError",e[e.ApproveFailed=5]="ApproveFailed",e[e.DepositFailed=6]="DepositFailed"}(i||(i={}));var R=1e3,L=3e3,B=a(11),U=a(30),F=a(137),K=a(477),J=a(860),W=a.n(J),H=a(590),V=a.n(H),G=a(861),Y=a(443),q=a(862),z=Object(y.b)("global/updateVersion"),X={ammMap:void 0,__timer__:-1,status:"PENDING",errorMessage:null},Q=Object(y.c)({name:"ammMap",initialState:X,reducers:{getAmmMap:function(e,t){e.status=v.J.PENDING},getAmmMapStatus:function(e,t){t.error&&(e.status=v.J.ERROR,e.errorMessage=t.error);var a=t.payload,n=a.ammMap,c=a.__timer__;n&&(e.ammMap=n),c&&(e.__timer__=c),e.status=v.J.DONE},updateRealTimeAmmMap:function(e,t){e.status=v.J.PENDING},statusUnset:function(e){e.status=v.J.UNSET}}}),Z=Q.actions,$=Z.getAmmMap,ee=Z.getAmmMapStatus,te=Z.statusUnset,ae=Z.updateRealTimeAmmMap,ne=function(){var e=Object(s.c)((function(e){return e.amm.ammMap})),t=Object(s.b)();return Object(d.a)(Object(d.a)({},e),{},{statusUnset:w.a.useCallback((function(){return t(te(void 0))}),[t]),getAmmMap:w.a.useCallback((function(){return t($(void 0))}),[t])})},ce=Object(y.c)({name:"ammActivityMap",initialState:{ammActivityMap:{},status:"PENDING",errorMessage:null},reducers:{getAmmActivityMap:function(e,t){e.status=v.J.PENDING},getAmmActivityMapStatus:function(e,t){t.error&&(e.status=v.J.ERROR,e.errorMessage=t.error),e.ammActivityMap=Object(d.a)({},t.payload.ammActivityMap),e.status=v.J.DONE},statusUnset:function(e){e.status=v.J.UNSET}}}),re=ce.actions,oe=re.getAmmActivityMap,ie=re.getAmmActivityMapStatus,se=re.statusUnset;function ue(){var e=Object(s.c)((function(e){return e.amm.ammActivityMap})),t=Object(s.b)();return Object(d.a)(Object(d.a)({},e),{},{statusUnset:w.a.useCallback((function(){return t(se(void 0))}),[t]),getAmmActivityMap:w.a.useCallback((function(){return t(oe(void 0))}),[t])})}var le=a(36),de=a(14),be=a(18);function pe(){return{chainId:Dn.getState().system.chainId}}var me=function(){return new be.k(pe())},fe=function(){return new be.f(pe())},ve=function(){return new be.c(pe())},je=function e(){Object(de.a)(this,e)};je.userAPI=void 0,je.exchangeAPI=void 0,je.ammpoolAPI=void 0,je.walletAPI=void 0,je.wsAPI=void 0,je.InitApi=function(e){je.userAPI=new be.k({chainId:e}),je.exchangeAPI=new be.f({chainId:e}),je.ammpoolAPI=new be.c({chainId:e}),je.walletAPI=new be.m({chainId:e}),je.wsAPI=new be.n({chainId:e})};var Oe=h.a.mark(xe),he=h.a.mark(ge),ke=function(){var e=Object(k.a)(h.a.mark((function e(){var t,a;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!je.ammpoolAPI){e.next=8;break}return e.next=3,je.ammpoolAPI.getAmmPoolActivityRules();case 3:return t=e.sent,a=t.groupByRuleTypeAndStatus,e.abrupt("return",{data:a});case 8:return e.abrupt("return",{data:void 0});case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();function xe(){var e,t;return h.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,Object(le.b)(ke);case 3:return e=a.sent,t=e.data,a.next=7,Object(le.d)(ie({ammActivityMap:t}));case 7:a.next=13;break;case 9:return a.prev=9,a.t0=a.catch(0),a.next=13,Object(le.d)(ie(a.t0));case 13:case"end":return a.stop()}}),Oe,null,[[0,9]])}function ge(){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(le.a)([Object(le.f)(oe,xe)]);case 2:case"end":return e.stop()}}),he)}var we=a(7),ye=h.a.mark(Te),Ae=h.a.mark(Me),Se=h.a.mark(Ee),Ie=h.a.mark(De),Ce=function(e){var t=e.ammPoolState,a=e.keyPair,n=Dn.getState().tokenMap.idIndex,c=a.match(/(\w+)-(\w+)/i),r=Object(we.a)(c,3),o=r[1],i=r[2],s=Dn.getState().system,u=s.forex,l=s.faitPrices;if(n&&o&&i&&l&&u){var b={amountDollar:parseFloat(t.liquidityUSD),amountYuan:parseFloat(t.liquidityUSD)/(u||6.5),totalLPToken:Pn("LP-"+a,t.lpLiquidity),totalA:Pn(o,t.liquidity[0]),totalB:Pn(i,t.liquidity[1]),rewardValue:t.rewards[0]?Pn(n[t.rewards[0].tokenId],t.rewards[0].volume):void 0,rewardToken:t.rewards[0]?n[t.rewards[0].tokenId]:void 0,rewardValue2:t.rewards[1]?Pn(n[t.rewards[1].tokenId],t.rewards[1].volume):void 0,rewardToken2:t.rewards[1]?n[t.rewards[1].tokenId]:void 0},p=_n(o,t.fees[0]),m=_n(i,t.fees[1]),f=l[o]&&l[i]?Object(be.J)(p||0).times(l[o].price).plus(Object(be.J)(m||0).times(l[i].price)):void 0,v=f?f.times(u):void 0;return Object(d.a)(Object(d.a)({},b),{},{feeA:null===p||void 0===p?void 0:p.toNumber(),feeB:null===m||void 0===m?void 0:m.toNumber(),feeDollar:f?f.toNumber():void 0,feeYuan:v?v.toNumber():void 0,tradeFloat:{change:void 0,timeUnit:"24h"},APY:1*parseInt(t.apyBips)/100})}},Ne=function(){var e=Object(k.a)(h.a.mark((function e(t){var a,n,c,r,o,i,s,u;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.ammpools,n={},e.next=4,ve().getAmmPoolStats();case 4:return c=e.sent,r=c.ammPoolStats,(o=Dn.getState().amm.ammMap.__timer__)&&-1!==o&&clearInterval(o),o=setInterval(Object(k.a)(h.a.mark((function e(){var t;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ve().getAmmPoolStats();case 2:t=e.sent.ammPoolStats,Dn.dispatch(ae({ammPoolStats:t}));case 4:case"end":return e.stop()}}),e)}))),9e5),i=Dn.getState(),s=i.tokenMap,s.coinMap,u=s.idIndex,Reflect.ownKeys(a).forEach(function(){var e=Object(k.a)(h.a.mark((function e(t){var c,o,i,s;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:(c=a[t]).market===t&&c.tokens.pooled&&u&&(o=u[c.tokens.pooled[0]],i=u[c.tokens.pooled[1]],s=Object(d.a)(Object(d.a)({coinA:o,coinB:i,isNew:!(Date.now()-Number(c.createdAt)>2592e5),isActivity:7===c.status,address:c.address},Ce({ammPoolState:r[t],keyPair:"".concat(o,"-").concat(i)})),{},{__rawConfig__:c}),n[c.market]=s);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),e.abrupt("return",{ammMap:n,__timer__:o});case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();function Te(e){var t,a,n,c,r;return h.a.wrap((function(o){for(;;)switch(o.prev=o.next){case 0:return t=e.payload,o.prev=1,a=t.ammpools,o.next=5,Object(le.b)(Ne,{ammpools:a});case 5:return n=o.sent,c=n.ammMap,r=n.__timer__,o.next=10,Object(le.d)(ee({ammMap:c,__timer__:r}));case 10:o.next=16;break;case 12:return o.prev=12,o.t0=o.catch(1),o.next=16,Object(le.d)(ee(o.t0));case 16:case"end":return o.stop()}}),ye,null,[[1,12]])}function Me(e){var t,a,n;return h.a.wrap((function(c){for(;;)switch(c.prev=c.next){case 0:return t=e.payload,c.prev=1,a=t.ammPoolStats,n=Dn.getState().amm.ammMap.ammMap,a&&Reflect.ownKeys(a).map((function(e){var t=e.replace("AMM-","");return n[e]=Object(d.a)(Object(d.a)({},n[e]),Ce({ammPoolState:a[e],keyPair:t})),n})),c.next=7,Object(le.d)(ee({ammMap:n}));case 7:c.next=13;break;case 9:return c.prev=9,c.t0=c.catch(1),c.next=13,Object(le.d)(ee(c.t0));case 13:case"end":return c.stop()}}),Ae,null,[[1,9]])}function Ee(){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(le.a)([Object(le.f)($,Te)]);case 2:case"end":return e.stop()}}),Se)}function De(){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(le.a)([Object(le.f)(ae,Me)]);case 2:case"end":return e.stop()}}),Ie)}var Pe=[Object(le.c)(Ee),Object(le.c)(De)],_e=Object(F.b)({ammMap:Q.reducer,ammActivityMap:ce.reducer}),Re=[Object(le.c)(ge)].concat(Object(U.a)(Pe)),Le={coinMap:{},totalCoinMap:{},addressIndex:void 0,tokenMap:void 0,marketMap:void 0,idIndex:void 0,status:"PENDING",errorMessage:null},Be=Object(y.c)({name:"tokenMap",initialState:Le,reducers:{getTokenMap:function(e,t){e.status=v.J.PENDING},getTokenMapStatus:function(e,t){t.error&&(e.status=v.J.ERROR,e.errorMessage=t.error);var a=t.payload,n=a.tokenMap,c=a.totalCoinMap,r=a.marketMap,o=a.addressIndex,i=a.idIndex,s=a.coinMap,u=a.marketArray,l=a.marketCoins;n&&(e.tokenMap=n),r&&(e.marketMap=r),o&&(e.addressIndex=o),i&&(e.idIndex=i),s&&(e.coinMap=s),c&&(e.totalCoinMap=c),u&&(e.marketArray=u),l&&(e.marketCoins=l),e.status=v.J.DONE},statusUnset:function(e){e.status=v.J.UNSET}}}),Ue=Be.actions,Fe=Ue.getTokenMap,Ke=Ue.getTokenMapStatus,Je=Ue.statusUnset;function We(){var e=Object(s.c)((function(e){return e.tokenMap})),t=Object(s.b)();return Object(d.a)(Object(d.a)({},e),{},{statusUnset:w.a.useCallback((function(){return t(Je(void 0))}),[t]),getTokenMap:w.a.useCallback((function(e){return t(Fe(e))}),[t])})}var He=a(1723);function Ve(e){if(e){var t=He.a.getAddress(e.address);return"https://exchange.loopring.io/assets/images/ethereum/assets/".concat(t,"/logo.png")}return""}var Ge=h.a.mark(ze),Ye=h.a.mark(Xe),qe=function(){var e=Object(k.a)(h.a.mark((function e(t){var a,n,c,r,o,i,s,u,l;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.tokensMap,n=t.pairs,c=t.marketArr,r=t.tokenArr,o={},i={},s=a,u={},l={},Reflect.ownKeys(a).forEach((function(e){var t,c,r={icon:(t=e,c=a,Ve(c[t])),name:e,simpleName:e,description:"",company:""};e.startsWith("LP-")||(o[e]=r),i[e]=r,n[e]&&n[e].tokenList&&(a[e].tradePairs=n[e].tokenList),u=Object(d.a)(Object(d.a)({},u),{},Object(x.a)({},a[e].address,e)),l=Object(d.a)(Object(d.a)({},l),{},Object(x.a)({},a[e].tokenId,e))})),e.abrupt("return",{data:{coinMap:o,totalCoinMap:i,addressIndex:u,idIndex:l,tokenMap:s,marketArray:c,marketCoins:r}});case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();function ze(e){var t,a,n,c,r,o,i,s;return h.a.wrap((function(u){for(;;)switch(u.prev=u.next){case 0:return t=e.payload,u.prev=1,a=t.tokensMap,n=t.marketMap,c=t.pairs,r=t.marketArr,o=t.tokenArr,u.next=5,Object(le.b)(qe,{tokensMap:a,pairs:c,marketArr:r,tokenArr:o});case 5:return i=u.sent,s=i.data,u.next=9,Object(le.d)(Ke(Object(d.a)(Object(d.a)({},s),{},{marketMap:n})));case 9:u.next=15;break;case 11:return u.prev=11,u.t0=u.catch(1),u.next=15,Object(le.d)(Ke(u.t0));case 15:case"end":return u.stop()}}),Ge,null,[[1,11]])}function Xe(){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(le.a)([Object(le.f)(Fe,ze)]);case 2:case"end":return e.stop()}}),Ye)}var Qe=[Object(le.c)(Xe)],Ze=Object(y.c)({name:"tickerMap",initialState:{tickerMap:{},status:"PENDING",errorMessage:null},reducers:{getTicker:function(e,t){e.status=v.J.PENDING},getTickers:function(e,t){e.status=v.J.PENDING},getTickerStatus:function(e,t){t.error&&(e.status=v.J.ERROR,e.errorMessage=t.error),e.tickerMap=t.payload.tickerMap,e.status=v.J.DONE},statusUnset:function(e){e.status=v.J.UNSET}}}),$e=Ze.actions,et=$e.getTicker,tt=$e.getTickers,at=$e.getTickerStatus,nt=$e.statusUnset,ct=h.a.mark(st),rt=h.a.mark(ut),ot=h.a.mark(lt),it=function(){var e=Object(k.a)(h.a.mark((function e(t){var a,n;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fe().getMixTicker({market:t.join(",")});case 2:return a=e.sent,n=ic({tickerMap:a.tickMap}),e.abrupt("return",{data:n});case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();function st(e){var t,a,n,c,r;return h.a.wrap((function(o){for(;;)switch(o.prev=o.next){case 0:if(t=e.payload,o.prev=1,a=t.tickerKey,n=t.tickerKeys,!(a||n&&n.length)){o.next=12;break}return o.next=6,Object(le.b)(it,a?[a]:n);case 6:return c=o.sent,r=c.data,o.next=10,Object(le.d)(at({tickerMap:r}));case 10:o.next=13;break;case 12:throw new v.n(v.t.NO_TOKEN_KEY_LIST);case 13:o.next=19;break;case 15:return o.prev=15,o.t0=o.catch(1),o.next=19,Object(le.d)(at(o.t0));case 19:case"end":return o.stop()}}),ct,null,[[1,15]])}function ut(){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(le.a)([Object(le.f)(et,st)]);case 2:case"end":return e.stop()}}),rt)}function lt(){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(le.a)([Object(le.f)(tt,st)]);case 2:case"end":return e.stop()}}),ot)}var dt,bt,pt=[Object(le.c)(ut),Object(le.c)(lt)];!function(e){e.DEV="DEV",e.UAT="UAT",e.PROD="PROD"}(dt||(dt={})),function(e){e.NONETWORK="unknown"}(bt||(bt={}));var mt={env:dt.PROD,chainId:"unknown",baseURL:"",socketURL:"",etherscanUrl:"",faitPrices:void 0,gasPrice:void 0,forex:void 0,__timer__:-1,status:"PENDING",errorMessage:null,exchangeInfo:void 0,topics:[]},ft=Object(y.c)({name:"system",initialState:mt,reducers:{updateSystem:function(e,t){e.chainId=t.payload.chainId,e.status=v.J.PENDING},updateRealTimeObj:function(e,t){var a=t.payload,n=a.forex,c=a.faitPrices,r=a.gasPrice;n&&(e.forex=n),c&&(e.faitPrices=c),r&&(e.gasPrice=r)},getSystemStatus:function(e,t){t.error&&(e.status=v.J.ERROR,e.errorMessage=t.error);var a=t.payload,n=a.env,c=a.baseURL,r=a.socketURL,o=a.faitPrices,i=a.gasPrice,s=a.forex,u=a.exchangeInfo,l=a.__timer__,d=a.etherscanUrl;n&&(e.env=n),r&&(e.socketURL=r),c&&(e.baseURL=c),o&&(e.faitPrices=o),i&&(e.gasPrice=i),s&&(e.forex=s),u&&(e.exchangeInfo=u),d&&(e.etherscanUrl=d),l&&(e.__timer__=l),e.status=v.J.DONE},statusUnset:function(e){e.status=v.J.UNSET}}}),vt=ft.actions,jt=vt.updateSystem,Ot=(vt.setTopics,vt.getSystemStatus),ht=(vt.statusUnset,vt.updateRealTimeObj),kt={walletLayer1:void 0,status:"DONE",errorMessage:null},xt=Object(y.c)({name:"walletLayer1",initialState:kt,reducers:{updateWalletLayer1:function(e,t){e.status=v.J.PENDING},reset:function(e,t){e.walletLayer1=void 0,e.status=v.J.UNSET},getWalletLayer1Status:function(e,t){t.error&&(e.status=v.J.ERROR,e.errorMessage=t.error),e.walletLayer1=Object(d.a)({},t.payload.walletLayer1),e.status=v.J.DONE},statusUnset:function(e){e.status=v.J.UNSET}}}),gt=xt.actions,wt=gt.updateWalletLayer1,yt=gt.getWalletLayer1Status,At=gt.statusUnset,St=gt.reset;function It(){var e=Object(s.c)((function(e){return e.walletLayer1})),t=Object(s.b)();return Object(d.a)(Object(d.a)({},e),{},{resetLayer1:w.a.useCallback((function(){t(St(void 0))}),[t]),statusUnset:w.a.useCallback((function(){return t(At(void 0))}),[t]),updateWalletLayer1:w.a.useCallback((function(){return t(wt(void 0))}),[t])})}var Ct,Nt,Tt=a(1700),Mt=a(15),Et=a(1747),Dt=new Et.a,Pt=function(e){var t=ic({tickerMap:e});Dt.next({tickerMap:t})},_t=function(){return Dt.asObservable()},Rt=new Et.a,Lt=function(e){return Rt.next({ammPoolMap:e})};!function(e){e.pingpong="pingpong",e.account="account",e.order="order",e.orderbook="orderbook",e.trade="trade",e.ticker="ticker",e.candlestick="candlestick",e.ammpool="ammpool"}(Nt||(Nt={}));var Bt=function(){function e(t){var a=this;Object(de.a)(this,e),this._socketCallbackMap=void 0,this._loopringSocket=void 0,this.__wsTimer__={timer:-1,count:0},this._baseUrl=void 0,this.socketSendMessage=function(){var e=Object(k.a)(h.a.mark((function e(t){var n,c,r,o,i;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.socket,c=t.apiKey,e.prev=1,!n||!Reflect.ownKeys(n).length){e.next=15;break}if(a.clearInitTimer(!0),a.resetSocketEvents(),r=a.makeMessageArray({socket:n}),o=r.topics,a.isConnectSocket()){e.next=11;break}return e.next=9,a.socketConnect({topics:o,apiKey:c});case 9:e.next=12;break;case 11:null===(i=a._loopringSocket)||void 0===i||i.send(a.makeTopics(o));case 12:return e.abrupt("return",!0);case 15:return a.isConnectSocket()||a.socketClose(),e.abrupt("return",!1);case 17:e.next=22;break;case 19:throw e.prev=19,e.t0=e.catch(1),new v.n(v.t.SOCKET_ERROR);case 22:case"end":return e.stop()}}),e,null,[[1,19]])})));return function(t){return e.apply(this,arguments)}}(),this.socketClose=Object(k.a)(h.a.mark((function e(){var t;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=a._loopringSocket,e.abrupt("return",new Promise((function(e){t?(t.onclose=function(t){e("Socket is closed, ".concat(t.reason))},t.close()):Promise.resolve("no websocket")})));case 2:case"end":return e.stop()}}),e)}))),this.removeSocketEvents=function(e){a._socketCallbackMap&&a._socketCallbackMap[e]&&delete a._socketCallbackMap[e]},this.makeMessageArray=function(e){var t=e.socket,n=[],c=[];return Reflect.ownKeys(t).forEach((function(e){switch(e){case Nt.ticker:(c=t[Nt.ticker].map((function(e){return Object(be.E)(e)})))&&c.length&&(a.addSocketEvents(Nt.ticker),n=[].concat(Object(U.a)(n),Object(U.a)(c)));break;case Nt.account:t[Nt.account]&&(c=[Object(be.v)()]),c&&c.length&&(a.addSocketEvents(Nt.account),n=[].concat(Object(U.a)(n),Object(U.a)(c)));break;case Nt.order:(c=t[Nt.order].map((function(e){return Object(be.B)(e)})))&&c.length&&(a.addSocketEvents(Nt.order),n=[].concat(Object(U.a)(n),Object(U.a)(c)));break;case Nt.orderbook:(c=t[Nt.orderbook].map((function(e){return Object(be.C)(e,0)})))&&c.length&&(a.addSocketEvents(Nt.orderbook),n=[].concat(Object(U.a)(n),Object(U.a)(c)));break;case Nt.trade:(c=t[Nt.trade].map((function(e){return Object(be.F)(e)})))&&c.length&&(a.addSocketEvents(Nt.trade),n=[].concat(Object(U.a)(n),Object(U.a)(c)));break;case Nt.candlestick:(c=t[Nt.candlestick].map((function(e){return Object(be.y)(e)})))&&c.length&&(a.addSocketEvents(Nt.candlestick),n=[].concat(Object(U.a)(n),Object(U.a)(c)));break;case Nt.ammpool:(c=t[Nt.ammpool].map((function(e){return Object(be.w)(e)})))&&c.length&&(a.addSocketEvents(Nt.ammpool),n=[].concat(Object(U.a)(n),Object(U.a)(c)))}})),{topics:n}},this.isConnectSocket=function(){return!(!a._loopringSocket||!a._loopringSocket.send)},this.makeTopics=function(e,t){var a={op:"sub",unsubscribeAll:"true",topics:e};return t&&(a.apiKey=t),JSON.stringify(a)},this.addSocketEvents=function(t,n){a._socketCallbackMap=Object(d.a)(Object(d.a)({},a._socketCallbackMap),{},Object(x.a)({},t,{fn:e.SocketEventMap[t],deps:n||[]}))},this.socketConnect=function(){var e=Object(k.a)(h.a.mark((function e(t){var n,c,r,o,i;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.topics,c=t.apiKey,e.prev=1,r=a,!je.wsAPI||!n){e.next=13;break}return e.next=6,je.wsAPI.getWsKey();case 6:o=e.sent,i=o.wsKey,a._loopringSocket=new WebSocket("".concat(a._baseUrl,"?wsApiKey=").concat(i)),a._loopringSocket.onopen=function(){console.warn("Socket>>Socket","WebSocket is open now."),r._loopringSocket&&r._loopringSocket.readyState===WebSocket.OPEN&&r._loopringSocket.send(r.makeTopics(n))},a._loopringSocket.onmessage=function(e){var t=e.data;if("ping"===t&&r._socketCallbackMap){var a,n,c;null===(a=r._socketCallbackMap)||void 0===a||null===(n=a.pingpong)||void 0===n||(c=n.fn).call.apply(c,[r,t].concat(Object(U.a)(r._socketCallbackMap.pingpong.deps)))}else{var o=JSON.parse(t),i=(o.topics,o.topic);if(i&&i.topic&&r._socketCallbackMap){var s,u,l=o.topic.topic,d=o.data;null===(s=r._socketCallbackMap[l.topic])||void 0===s||(u=s.fn).call.apply(u,[r,d].concat(Object(U.a)(r._socketCallbackMap[l.topic].deps)))}}return!1},a._loopringSocket.onclose=function(){var e=Object(k.a)(h.a.mark((function e(t){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r._loopringSocket&&(r._loopringSocket=void 0),console.log("Socket>>Socket","Socket is closed. Reconnect will be attempted in 1 second.",t.reason),r.clearInitTimer(),r.__wsTimer__.count<5&&(r.__wsTimer__.timer=setTimeout((function(){r.socketConnect.call(r,{topics:n,apiKey:c})}),1e3*r.__wsTimer__.count));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),a._loopringSocket.onerror=function(e){console.error("Socket>>Socket","Socket encountered error:","Closing socket",e)};case 13:e.next=19;break;case 15:e.prev=15,e.t0=e.catch(1),console.error("Socket>>Socket","connect error, not from reconnect"),a._loopringSocket&&a._loopringSocket.close();case 19:case"end":return e.stop()}}),e,null,[[1,15]])})));return function(t){return e.apply(this,arguments)}}(),this.clearInitTimer=function(e){a.__wsTimer__&&(-1!==a.__wsTimer__.timer&&clearTimeout(a.__wsTimer__.timer),a.__wsTimer__.timer=-1,a.__wsTimer__.count++),e&&(a.__wsTimer__={timer:-1,count:0})},this.resetSocketEvents=function(){a._socketCallbackMap=void 0,a.addSocketEvents(Nt.pingpong,[a])},this._baseUrl=t}return Object(Mt.a)(e,[{key:"loopringSocket",get:function(){return this._loopringSocket}},{key:"socketCallbackMap",get:function(){return this._socketCallbackMap}}]),e}();Bt.SocketEventMap=(Ct={},Object(x.a)(Ct,Nt.account,(function(e){})),Object(x.a)(Ct,Nt.order,(function(e){})),Object(x.a)(Ct,Nt.orderbook,(function(e){})),Object(x.a)(Ct,Nt.trade,(function(e){})),Object(x.a)(Ct,Nt.ticker,(function(e){var t=Object(we.a)(e,11),a=t[0],n=t[1],c=t[2],r=t[3],o=t[4],i=t[5],s=t[6],u=t[7],l=t[8],d=t[9],b=t[10],p=a.match(/(\w+)-(\w+)/i),m=Object(we.a)(p,3),f=m[1],v=m[2],j=c,O=r,h=void 0===o||0===Number(o)?void 0:Object(be.J)(u).minus(o).div(o);Pt(Object(x.a)({},a,{symbol:a,base:f,quote:v,base_token_volume:j,quote_token_volume:O,timestamp:Number(n),change:h,base_fee_amt:void 0,quote_fee_amt:void 0,open:o,high:i,low:s,close:u,count:l,bid:d,ask:b}))})),Object(x.a)(Ct,Nt.candlestick,(function(e){})),Object(x.a)(Ct,Nt.candlestick,(function(e){})),Object(x.a)(Ct,Nt.ammpool,(function(e){var t=Object(we.a)(e,5),a=t[0],n=t[1],c=t[2],r=Object(we.a)(t[3],2),o=r[0],i=r[1],s=t[4];Lt({poolName:a,poolAddress:n,pooled:c,lp:{tokenId:o,volume:i},risky:s})})),Object(x.a)(Ct,Nt.pingpong,(function(e,t){"ping"===e&&t.loopringSocket.send("pong")})),Ct);var Ut=h.a.mark(Wt),Ft=h.a.mark(Ht),Kt=h.a.mark((function e(t){var a,n,c,r,o,i,s,u,l,d,b,p;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(le.b)(Object(k.a)(h.a.mark((function e(){var t;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,null===(t=je.exchangeAPI)||void 0===t?void 0:t.getTokens();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)}))));case 2:return a=e.sent,n=a.tokenSymbolMap,e.next=6,Object(le.b)(Object(k.a)(h.a.mark((function e(){var t;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,null===(t=je.ammpoolAPI)||void 0===t?void 0:t.getAmmPoolConf();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)}))));case 6:return c=e.sent,r=c.ammpools,e.next=10,Object(le.b)(Object(k.a)(h.a.mark((function e(){var t;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",null===(t=je.exchangeAPI)||void 0===t?void 0:t.getMixMarkets());case 1:case"end":return e.stop()}}),e)}))));case 10:return o=e.sent,i=o.pairs,s=o.marketArr,u=o.tokenArr,l=o.markets,Dn.dispatch(Fe({tokensMap:n,marketMap:l,pairs:i,marketArr:s,tokenArr:u})),e.next=18,Object(le.e)("tokenMap/getTokenMapStatus");case 18:return Dn.dispatch($({ammpools:r})),Dn.dispatch(oe({ammpools:r})),Dn.getState().tokenMap.status,e.next=23,Object(Tt.a)(10);case 23:d=Dn.getState(),b=d.account,p=d.walletLayer1,b.accAddress&&void 0===p.walletLayer1&&Dn.dispatch(wt(void 0)),Dn.dispatch(D(void 0));case 26:case"end":return e.stop()}}),e)})),Jt=function(){var e=Object(k.a)(h.a.mark((function e(t){var a,n,c,r,o,i,s,u,l,d,b;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a="localhost"===window.location.hostname?dt.DEV:be.e.GOERLI===t?dt.UAT:dt.PROD,(t=be.e.GOERLI===t?be.e.GOERLI:be.e.MAINNET===t?be.e.MAINNET:bt.NONETWORK)!==bt.NONETWORK){e.next=6;break}throw new v.n(v.t.NO_NETWORK_ERROR);case 6:if(je.InitApi(t),!je.exchangeAPI){e.next=30;break}return e.next=10,je.exchangeAPI.getExchangeInfo();case 10:return n=e.sent,c=n.exchangeInfo,e.next=14,je.exchangeAPI.getFiatPrice({legal:"USD"});case 14:return r=e.sent.fiatPrices,e.next=17,je.exchangeAPI.getFiatPrice({legal:"CNY"});case 17:return o=e.sent.fiatPrices,e.next=20,fe().getGasPrice();case 20:return e.t0=e.sent.gasPrice,i=e.t0/1e9,s=be.e.MAINNET===t?"https://".concat("api.loopring.network"):"https:/".concat("uat2.loopring.io"),u=be.e.MAINNET===t?"wss://ws.".concat("api.loopring.network","/v3/ws"):"wss://ws.".concat("uat2.loopring.io","/v3/ws"),l=be.e.MAINNET===t?"https://etherscan.io/address/":"https://goerli.etherscan.io/address/",window.loopringSocket=new Bt(u),d=o.USDT.price,b=function(e){return e&&-1!==e&&clearInterval(e),setInterval(Object(k.a)(h.a.mark((function e(){var t,a,n,c;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fe().getFiatPrice({legal:"CNY"});case 2:return a=e.sent.fiatPrices,e.next=5,fe().getGasPrice();case 5:e.t0=e.sent.gasPrice,n=e.t0/1e9,c=null===(t=a.USDT)||void 0===t?void 0:t.price,Dn.dispatch(ae(void 0)),Dn.dispatch(ht({faitPrices:a,gasPrice:n,forex:c}));case 10:case"end":return e.stop()}}),e)}))),3e5)}(b=Dn.getState().system.__timer__),e.abrupt("return",{chainId:t,etherscanUrl:l,env:a,baseURL:s,socketURL:u,faitPrices:r,gasPrice:i,forex:d,exchangeInfo:c,__timer__:b});case 30:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();function Wt(e){var t,a,n,c,r,o,i,s,u,l,d;return h.a.wrap((function(b){for(;;)switch(b.prev=b.next){case 0:return t=e.payload,b.prev=1,a=t.chainId,b.next=5,Object(le.b)(Jt,a);case 5:return n=b.sent,c=n.env,r=n.baseURL,o=n.faitPrices,i=n.gasPrice,s=n.forex,u=n.exchangeInfo,l=n.etherscanUrl,d=n.__timer__,b.next=16,Object(le.d)(Ot({env:c,baseURL:r,faitPrices:o,gasPrice:i,forex:s,exchangeInfo:u,etherscanUrl:l,__timer__:d}));case 16:return b.next=18,Object(le.b)(Kt,a);case 18:b.next=24;break;case 20:return b.prev=20,b.t0=b.catch(1),b.next=24,Object(le.d)(Ot(b.t0));case 24:case"end":return b.stop()}}),Ut,null,[[1,20]])}function Ht(){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(le.a)([Object(le.f)(jt,Wt)]);case 2:case"end":return e.stop()}}),Ft)}var Vt=[Object(le.c)(Ht)],Gt=h.a.mark(zt),Yt=h.a.mark(Xt),qt=function(){var e=Object(k.a)(h.a.mark((function e(){var t,a,n,c,r,o,i,s,u,l;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=fe(),a=Dn.getState().account.accAddress,n=Dn.getState().tokenMap,c=n.tokenMap,!(r=n.marketCoins)||!c){e.next=15;break}return e.next=6,t.getEthBalances({owner:a});case 6:return o=e.sent,i=o.ethBalance,e.next=10,t.getTokenBalances({owner:a,token:r.join()},c);case 10:return s=e.sent,(u=s.tokenBalances).ETH=i,u&&(l=Reflect.ownKeys(u).reduce((function(e,t){return Object(d.a)(Object(d.a)({},e),{},Object(x.a)({},t,{belong:t,count:Object(be.t)(c,t,u[t])}))}),{})),e.abrupt("return",{walletLayer1:l});case 15:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();function zt(){var e,t;return h.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,Object(le.b)(qt);case 3:return e=a.sent,t=e.walletLayer1,a.next=7,Object(le.d)(yt({walletLayer1:t}));case 7:a.next=13;break;case 9:return a.prev=9,a.t0=a.catch(0),a.next=13,Object(le.d)(yt(a.t0));case 13:case"end":return a.stop()}}),Gt,null,[[0,9]])}function Xt(){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(le.a)([Object(le.f)(wt,zt)]);case 2:case"end":return e.stop()}}),Yt)}var Qt=[Object(le.c)(Xt)],Zt={walletLayer2:void 0,status:"DONE",errorMessage:null},$t=Object(y.c)({name:"walletLayer2",initialState:Zt,reducers:{updateWalletLayer2:function(e,t){e.status=v.J.PENDING},reset:function(e,t){e.walletLayer2=void 0,e.status=v.J.UNSET},getWalletLayer2Status:function(e,t){t.error&&(e.status=v.J.ERROR,e.errorMessage=t.error),e.walletLayer2=Object(d.a)({},t.payload.walletLayer2),e.status=v.J.DONE},statusUnset:function(e){e.status=v.J.UNSET}}}),ea=$t.actions,ta=ea.updateWalletLayer2,aa=ea.getWalletLayer2Status,na=ea.statusUnset,ca=ea.reset,ra=h.a.mark(sa),oa=h.a.mark(ua),ia=function(){var e=Object(k.a)(h.a.mark((function e(){var t,a,n,c,r,o,i,s,u;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=me(),a=Dn.getState().account,n=a.accountId,c=a.apiKey,r=Dn.getState().tokenMap,r.tokenMap,o=r.idIndex,r.marketCoins,!c||!n){e.next=9;break}return e.next=6,t.getUserBalances({accountId:n,tokens:""},c);case 6:s=e.sent,(u=s.userBalances)&&(i=Reflect.ownKeys(u).reduce((function(e,t){return Object(d.a)(Object(d.a)({},e),{},Object(x.a)({},o[t],u[Number(t)]))}),{}));case 9:return e.abrupt("return",{walletLayer2:i});case 10:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();function sa(){var e,t;return h.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,Object(le.b)(ia);case 3:return e=a.sent,t=e.walletLayer2,a.next=7,Object(le.d)(aa({walletLayer2:t}));case 7:a.next=13;break;case 9:return a.prev=9,a.t0=a.catch(0),a.next=13,Object(le.d)(aa(a.t0));case 13:case"end":return a.stop()}}),ra,null,[[0,9]])}function ua(){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(le.a)([Object(le.f)(ta,sa)]);case 2:case"end":return e.stop()}}),oa)}var la=[Object(le.c)(ua)],da={userRewardsMap:void 0,status:"PENDING",errorMessage:null,__timer__:-1},ba=Object(y.c)({name:"userRewardsMap",initialState:da,reducers:{getUserRewards:function(e,t){e.status=v.J.PENDING},getUserRewardsStatus:function(e,t){t.error&&(e.status=v.J.ERROR,e.errorMessage=t.error),e.userRewardsMap=Object(d.a)(Object(d.a)({},e.userRewardsMap),t.payload.userRewardsMap),t.payload.__timer__&&(e.__timer__=t.payload.__timer__),e.status=v.J.DONE},statusUnset:function(e){e.status=v.J.UNSET}}}),pa=ba.actions,ma=pa.getUserRewards,fa=pa.getUserRewardsStatus,va=pa.statusUnset,ja=h.a.mark(ka),Oa=h.a.mark(xa),ha=function(){var e=Object(k.a)(h.a.mark((function e(t){var a,n;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=Dn.getState().account.accountId,n=Dn.getState().userRewardsMap.__timer__,!je.ammpoolAPI||!a){e.next=7;break}return n=function(e){return e&&-1!==e&&clearInterval(e),setTimeout(Object(k.a)(h.a.mark((function e(){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:Dn.dispatch(ma(void 0));case 1:case"end":return e.stop()}}),e)}))),12e5)}(n),e.abrupt("return",je.ammpoolAPI.getAmmPoolUserRewards({owner:a}).then((function(e){return{data:e.ammUserRewardMap,__timer__:n}})));case 7:if(n&&-1!==n&&clearInterval(n),!a){e.next=12;break}return e.abrupt("return",Promise.reject({data:void 0,__timer__:-1}));case 12:return e.abrupt("return",Promise.resolve({data:void 0,__timer__:-1}));case 13:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();function ka(e){var t,a,n;return h.a.wrap((function(c){for(;;)switch(c.prev=c.next){case 0:return e.payload,c.prev=1,c.next=4,Object(le.b)(ha);case 4:return t=c.sent,a=t.data,n=t.__timer__,c.next=9,Object(le.d)(fa({userRewardsMap:a,__timer__:n}));case 9:c.next=15;break;case 11:return c.prev=11,c.t0=c.catch(1),c.next=15,Object(le.d)(fa(c.t0));case 15:case"end":return c.stop()}}),ja,null,[[1,11]])}function xa(){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(le.a)([Object(le.f)(ma,ka)]);case 2:case"end":return e.stop()}}),Oa)}var ga=[Object(le.c)(xa)],wa=Object(y.c)({name:"socket",initialState:{socket:{},status:"PENDING",errorMessage:null},reducers:{socketEnd:function(e,t){e.socket={},e.status=v.J.PENDING},sendSocketTopic:function(e,t){e.socket=t.payload.socket},getSocketStatus:function(e,t){t.error&&(e.status=v.J.ERROR,e.errorMessage=t.error),e.status=v.J.DONE},statusUnset:function(e){e.status=v.J.UNSET}}}),ya=wa.actions,Aa=ya.getSocketStatus,Sa=ya.sendSocketTopic,Ia=ya.socketEnd,Ca=(ya.statusUnset,h.a.mark(Ea)),Na=h.a.mark(Da),Ta=h.a.mark(Pa),Ma=h.a.mark(_a);function Ea(){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!window.loopringSocket){e.next=4;break}return e.next=4,Object(le.b)(window.loopringSocket.socketClose);case 4:return e.next=6,Object(le.d)(Aa(void 0));case 6:e.next=12;break;case 8:return e.prev=8,e.t0=e.catch(0),e.next=12,Object(le.d)(Aa(e.t0));case 12:case"end":return e.stop()}}),Ca,null,[[0,8]])}function Da(e){var t,a,n;return h.a.wrap((function(c){for(;;)switch(c.prev=c.next){case 0:if(t=e.payload,c.prev=1,a=Dn.getState().account.apiKey,n=t.socket,!window.loopringSocket){c.next=7;break}return c.next=7,Object(le.b)(window.loopringSocket.socketSendMessage,{socket:n,apiKey:a});case 7:return c.next=9,Object(le.d)(Aa(void 0));case 9:c.next=15;break;case 11:return c.prev=11,c.t0=c.catch(1),c.next=15,Object(le.d)(Aa(c.t0));case 15:case"end":return c.stop()}}),Na,null,[[1,11]])}function Pa(){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(le.a)([Object(le.f)(Ia,Ea)]);case 2:case"end":return e.stop()}}),Ta)}function _a(){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(le.a)([Object(le.f)(Sa,Da)]);case 2:case"end":return e.stop()}}),Ma)}var Ra=[Object(le.c)(Pa),Object(le.c)(_a)],La=a(68),Ba=h.a.mark(Ja),Ua=h.a.mark(Wa),Fa=h.a.mark(Ha),Ka=h.a.mark(Va);function Ja(e){var t,a;return h.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return t=e.payload,n.prev=1,a=t,n.next=5,Object(le.d)(E(Object(d.a)({},a)));case 5:n.next=11;break;case 7:return n.prev=7,n.t0=n.catch(1),n.next=11,Object(le.d)(E(n.t0));case 11:case"end":return n.stop()}}),Ba,null,[[1,7]])}function Wa(e){var t,a;return h.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(t=e.payload,n.prev=1,a={accAddress:"",readyState:v.a.UN_CONNECT,accountId:-1,apiKey:"",eddsaKey:"",publicKey:{},level:"",nonce:-1},!t||!t.shouldUpdateProvider){n.next=7;break}return n.next=6,Object(le.b)(Object(k.a)(h.a.mark((function e(){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,La.a.clear();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)}))));case 6:a=Object(d.a)(Object(d.a)({},a),{},{connectName:v.k.unknown});case 7:return n.next=9,Object(le.d)(E(Object(d.a)({},a)));case 9:n.next=15;break;case 11:return n.prev=11,n.t0=n.catch(1),n.next=15,Object(le.d)(E(n.t0));case 15:case"end":return n.stop()}}),Ua,null,[[1,11]])}function Ha(){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(le.a)([Object(le.f)(N,Ja)]);case 2:case"end":return e.stop()}}),Fa)}function Va(){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(le.a)([Object(le.f)(M,Wa)]);case 2:case"end":return e.stop()}}),Ka)}var Ga=[Object(le.c)(Ha),Object(le.c)(Va)],Ya=h.a.mark(qa);function qa(){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(le.a)([].concat(Object(U.a)(Qe),Object(U.a)(Qt),Object(U.a)(la),Object(U.a)(Vt),Object(U.a)(Re),Object(U.a)(pt),Object(U.a)(ga),Object(U.a)(Ra),Object(U.a)(Ga)));case 2:case"end":return e.stop()}}),Ya)}var za=qa;function Xa(){var e=Object(s.c)((function(e){return e.tickerMap})),t=Object(s.b)();return Object(d.a)(Object(d.a)({},e),{},{statusUnset:w.a.useCallback((function(){return t(nt(void 0))}),[t]),updateTickers:w.a.useCallback((function(e){return t(tt({tickerKeys:e}))}),[t]),updateTicker:w.a.useCallback((function(e){return t(et({tickerKey:e}))}),[t])})}function Qa(){var e=Object(s.c)((function(e){return e.system})),t=Object(s.b)();return Object(d.a)(Object(d.a)({},e),{},{statusUnset:w.a.useCallback((function(){return t(te(void 0))}),[t]),updateSystem:w.a.useCallback((function(e){return t(jt(e))}),[t])})}var Za=function(e){},$a=function(e){},en=a(88),tn=a.n(en);function an(){var e=Object(s.c)((function(e){return e.walletLayer2})),t=Object(s.b)();return Object(d.a)(Object(d.a)({},e),{},{resetLayer2:w.a.useCallback((function(){t(ca(void 0))}),[t]),statusUnset:w.a.useCallback((function(){return t(na(void 0))}),[t]),updateWalletLayer2:w.a.useCallback((function(){return t(ta(void 0))}),[t]),delayAndUpdateWalletLayer2:w.a.useCallback(Object(k.a)(h.a.mark((function e(){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:Za("try to delayAndUpdateWalletLayer2!"+(new Date).getTime()),tn.a.delay((function(){return t(ta(void 0)),Za("try to delayAndUpdateWalletLayer2 updated!"+(new Date).getTime()),Promise.resolve()}),2500);case 2:case"end":return e.stop()}}),e)}))),[t])})}function nn(){var e=Object(s.c)((function(e){return e.socket})),t=Object(s.b)();return Object(d.a)(Object(d.a)({},e),{},{statusUnset:w.a.useCallback((function(){return t(te(void 0))}),[t]),sendSocketTopic:w.a.useCallback((function(e){return t(Sa({socket:e}))}),[t]),socketEnd:w.a.useCallback((function(){return t(Ia(void 0))}),[t])})}function cn(){var e=Object(s.c)((function(e){return e.userRewardsMap})),t=Object(s.b)();return Object(d.a)(Object(d.a)({},e),{},{statusUnset:w.a.useCallback((function(){return t(va(void 0))}),[t]),getUserRewards:w.a.useCallback((function(){return t(ma(void 0))}),[t])})}var rn=Object(y.c)({name:"confirmation",initialState:{confirmed:!1},reducers:{confirm:function(e,t){e.confirmed=!0}}}),on=rn.actions.confirm,sn=Object(y.c)({name:"favoriteMarket",initialState:[],reducers:{clearAll:function(e,t){e.length=0},removeMarket:function(e,t){var a=t.payload;if(a&&e.includes(a)){var n=e.findIndex((function(e){return e===a}));e.splice(n,1)}},addMarket:function(e,t){var a=t.payload;a&&-1===e.findIndex((function(e){return e===a}))&&e.push(a)},addMarkets:function(e,t){var a=t.payload;a.length&&a.forEach((function(t){t&&-1===e.findIndex((function(e){return e===t}))&&e.push(t)}))}}}),un=sn.actions,ln=un.clearAll,dn=un.removeMarket,bn=un.addMarket,pn=un.addMarkets,mn={depositHash:void 0,withdrawHash:[]},fn=Object(y.c)({name:"onchainHashInfo",initialState:mn,reducers:{clearAll:function(e,t){mn},clearDepositHash:function(e,t){e.depositHash=void 0},updateDepositHash:function(e,t){e.depositHash=t.payload}}}),vn=fn.actions,jn=(vn.clearAll,vn.clearDepositHash,vn.updateDepositHash,Object(F.b)({favoriteMarket:sn.reducer,onchainHashInfo:fn.reducer,confirmation:rn.reducer})),On=a(430),hn=Object(G.a)(),kn=9e5,xn={key:"account",storage:W.a,timeout:kn},gn={key:"settings",storage:V.a,timeout:kn},wn={key:"localStore",storage:V.a,timeout:kn},yn=Object(K.a)(xn,I.reducer),An=Object(K.a)(gn,B.Qb.reducer),Sn=Object(K.a)(wn,jn),In=Object(F.b)({account:yn,socket:wa.reducer,settings:An,system:ft.reducer,modals:B.Gb.reducer,userRewardsMap:ba.reducer,amm:_e,tokenMap:Be.reducer,walletLayer2:$t.reducer,walletLayer1:xt.reducer,tickerMap:Ze.reducer,localStore:Sn}),Cn=Object(y.a)({reducer:In,middleware:[].concat(Object(U.a)(Object(y.d)({thunk:!1,serializableCheck:!1})),[hn]),devTools:!1,enhancers:[q.reduxBatch]});Cn.dispatch(z()),Cn.dispatch(Object(B.Ib)(Cn.getState().settings.language)),Cn.dispatch(Object(B.Hb)(Y.a)),hn.run(za,Cn.dispatch);var Nn,Tn,Mn,En=Object(On.a)(Cn),Dn=Cn,Pn=function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Dn.getState().tokenMap.tokenMap,n=_n(e,t,a);return n?n.toNumber():void 0},_n=function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Dn.getState().tokenMap.tokenMap;if(a&&a[e]&&"undefined"!==typeof t)try{return Object(be.J)(t).div("1e"+a[e].decimals)}catch(n){throw n}},Rn=function(e){var t=e.pair,a=e._ammCalcData,n=(e.ammType,e.tokenMap,e.coinMap),c=e.walletMap,r=e.ammMap,o=e.tickerData,i=e.ammPoolsBalance;if(a.coinInfoMap=n,o&&(a.AtoB=Number(o.close)),isNaN(a.AtoB)&&i){var s=_n(t.coinAInfo.simpleName,i.pooled[0].volume),u=_n(t.coinBInfo.simpleName,i.pooled[1].volume);a.AtoB=u&&s&&parseFloat(u.div(s).toFixed(7,0))}if(t.coinAInfo){var l,d;a.myCoinA={belong:t.coinAInfo.simpleName,balance:c?null===(l=c[t.coinAInfo.simpleName])||void 0===l?void 0:l.count:0},a.myCoinB={belong:t.coinBInfo.simpleName,balance:c?null===(d=c[t.coinBInfo.simpleName])||void 0===d?void 0:d.count:0};var b="".concat(t.coinAInfo.simpleName,"-").concat(t.coinBInfo.simpleName),p=0,m=0;if(c){var f,v=c?null===(f=c["LP-"+b])||void 0===f?void 0:f.count:0,j=r["AMM-"+b],O=j.totalLPToken,h=j.totalA,k=j.totalB;h&&O&&k&&(p=h/O*v,m=k/O*v),a.lpCoin=v}a.lpCoinA={belong:t.coinAInfo.simpleName,balance:p},a.lpCoinB={belong:t.coinBInfo.simpleName,balance:m}}return a};function Ln(){return Bn.apply(this,arguments)}function Bn(){return(Bn=Object(k.a)(h.a.mark((function e(){var t,a,n,c,r,o;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=Dn.getState().account,a=Dn.getState().system.exchangeInfo,Wn.sendSign(),!a||!je.userAPI||void 0===t.nonce){e.next=20;break}return e.prev=4,e.next=7,Object(be.u)(La.a.usedWeb3,t.accAddress,a.exchangeAddress,t.nonce-1,t.connectName);case 7:return n=e.sent,c=Object(be.K)(Object(be.J)(n.keyPair.secretKey)),e.next=11,je.userAPI.getUserApiKey({accountId:t.accountId},c);case 11:r=e.sent,o=r.apiKey,Za("After connect >>,unlockAccount: step2 apiKey",o),Wn.sendAccountSigned(o,n),e.next=20;break;case 17:e.prev=17,e.t0=e.catch(4),Wn.sendErrorUnlock();case 20:case"end":return e.stop()}}),e,null,[[4,17]])})))).apply(this,arguments)}!function(e){e.ErrorNetwork="ErrorNetwork",e.LockAccount="LockAccount",e.NoAccount="NoAccount",e.DepositingAccount="DepositingAccount",e.ErrorApproveToken="ErrorApproveToken",e.ErrorDepositSign="ErrorDepositSign",e.ProcessDeposit="ProcessDeposit",e.SignAccount="SignAccount",e.ErrorSign="ErrorSign",e.ProcessSign="ProcessSign",e.ProcessAccountCheck="ProcessAccountCheck",e.AccountUnlocked="AccountUnlocked"}(Nn||(Nn={})),function(e){e.FailedConnect="FailedConnect"}(Tn||(Tn={})),function(e){e.waiting="waiting",e.nextStep="nextStep"}(Mn||(Mn={}));var Un,Fn,Kn=void 0,Jn=new Et.a,Wn={sendSign:function(){var e=Object(k.a)(h.a.mark((function e(){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:Jn.next({status:Nn.ProcessSign,data:void 0});case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),sendErrorUnlock:function(){Jn.next({status:Nn.ErrorSign,data:void 0})},sendUpdateAccStatusAndReset:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1;if(Dn.dispatch(N({accountId:t,readyState:e,apiKey:"",eddsaKey:"",publicKey:"",nonce:void 0})),e===v.a.ERROR_NETWORK)Jn.next({status:Nn.ErrorNetwork,data:void 0});else{var a=Dn.getState().account.accAddress;Wn.sendCheckAccount(a)}},sendAccountLock:function(e){var t=e?{readyState:v.a.LOCKED,accountId:e.accountId,nonce:e.nonce,level:e.tags}:{readyState:v.a.LOCKED,apiKey:"",eddsaKey:"",publicKey:"",nonce:void 0};Dn.dispatch(N(t)),Jn.next({status:Nn.LockAccount,data:void 0})},sendActiveAccountDeposit:function(){},sendAccountSigned:function(e,t){var a=e&&t?{apiKey:e,eddsaKey:t,publicKey:{x:be.K(be.J(t.keyPair.publicKeyX)),y:be.K(be.J(t.keyPair.publicKeyY))},readyState:v.a.ACTIVATED}:{readyState:v.a.ACTIVATED};Dn.dispatch(N(a)),Jn.next({status:Nn.AccountUnlocked,data:void 0})},sendNoAccount:function(){Dn.dispatch(N({readyState:v.a.NO_ACCOUNT})),Jn.next({status:Nn.NoAccount,data:void 0})},sendNeedUpdateAccount:function(){var e=Object(k.a)(h.a.mark((function e(t){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:Za("sendNeedUpdateAccount accInfo:",t),Dn.dispatch(N({readyState:v.a.DEPOSITING})),Jn.next({status:Nn.SignAccount,data:t});case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),sendCheckAcc:function(){var e=Object(k.a)(h.a.mark((function e(){var t,a,n;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Kn,!Dn){e.next=18;break}if(t=Dn.getState().account,!je.exchangeAPI){e.next=18;break}return e.next=6,je.exchangeAPI.getAccount({owner:t.accAddress});case 6:if(a=e.sent,void 0!==(n=a.accInfo)){e.next=12;break}Wn.sendNoAccount(),e.next=18;break;case 12:if(!t.accountId){e.next=16;break}t.publicKey.x&&t.publicKey.y?(Za("-------need unlockAccount!"),Ln()):(Za("-------need update account!"),Wn.sendNeedUpdateAccount(n)),e.next=18;break;case 16:throw Za("unexpected accInfo:",n),Error("unexpected accinfo:"+n);case 18:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),sendCheckAccount:function(){var e=Object(k.a)(h.a.mark((function e(t){var a,n;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Kn,Za("After connect >>,checkAccount: step3 processAccountCheck",t),Dn.dispatch(N({accAddress:t,readyState:v.a.UN_CONNECT})),Jn.next({status:Nn.ProcessAccountCheck,data:void 0}),!je.exchangeAPI){e.next=20;break}return e.next=7,je.exchangeAPI.getAccount({owner:t});case 7:if(a=e.sent,n=a.accInfo,Za("After connect >>,checkAccount: step3",n),void 0!==n){e.next=14;break}Wn.sendNoAccount(),e.next=20;break;case 14:if(!n.accountId){e.next=18;break}n.publicKey.x&&n.publicKey.y?Wn.sendAccountLock(n):(Za("-------need update account!"),Wn.sendNeedUpdateAccount(n)),e.next=20;break;case 18:throw Za("unexpected accInfo:",n),Error("unexpected accinfo:"+n);case 20:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),onSocket:function(){return Jn.asObservable()}},Hn=function(e,t){var a,n,c,r=Dn.getState().account.readyState,o=e[r]?e[r]:[],i=Object(we.a)(o,2);if(a=i[0],n=i[1],Za("accountStaticCallBack:",r),"function"===typeof a)return n=[].concat(Object(U.a)(null!==(c=n)&&void 0!==c?c:[]),Object(U.a)(null!==t&&void 0!==t?t:[])),a.apply(undefined,n)},Vn=(Un={},Object(x.a)(Un,v.bb.UN_CONNECT,[function(){return"labelConnectWallet"}]),Object(x.a)(Un,v.bb.ERROR_NETWORK,[function(){return"labelWrongNetwork"}]),Object(x.a)(Un,v.bb.DEFAULT,[function(){return"depositTitleAndActive"}]),Object(x.a)(Un,v.bb.ACTIVATED,[function(){}]),Object(x.a)(Un,v.bb.LOCKED,[function(){return"labelUnLockLayer2"}]),Un),Gn=(Fn={},Object(x.a)(Fn,v.bb.ERROR_NETWORK,[function(){Za("get error network!")}]),Object(x.a)(Fn,v.bb.UN_CONNECT,[function(){Dn.dispatch(T({_userOnModel:!0})),Dn.dispatch(Object(B.Kb)({isShow:!0,step:B.Ab.Provider}))}]),Object(x.a)(Fn,v.bb.NO_ACCOUNT,[function(){Za("NO_ACCOUNT! sendCheckAcc"),Wn.sendCheckAcc()}]),Object(x.a)(Fn,v.bb.DEPOSITING,[function(){Za("DEPOSITING! sendCheckAcc"),Wn.sendCheckAcc()}]),Object(x.a)(Fn,v.bb.LOCKED,[function(){Dn.dispatch(T({_userOnModel:!0})),Dn.dispatch(Object(B.Jb)({isShow:!0,step:B.a.HadAccount}))}]),Fn),Yn=function(e){void 0!==typeof e.customSlippage&&Dn.dispatch(Object(B.Pb)(e.customSlippage))};function qn(e){if(!e||!(e instanceof Object)||"function"==typeof e)return e||void 0;var t=new(0,e.constructor);for(var a in e)e.hasOwnProperty(a)&&(t[a]=qn(e[a]));return t}function zn(e){return Xn.apply(this,arguments)}function Xn(){return(Xn=Object(k.a)(h.a.mark((function e(t){var a;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(document.execCommand&&(a=document.createElement("textarea"),document.body.appendChild(a),a.value=t,a.select(),document.execCommand("copy"),document.body.removeChild(a)),!navigator.clipboard){e.next=4;break}return e.next=4,navigator.clipboard.writeText(t);case 4:if(!window.clipboardData){e.next=8;break}return window.clipboardData.setData("Text",t),console.log("clipboardData:",t),e.abrupt("return",!0);case 8:return e.abrupt("return",!1);case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Qn=a(116),Zn=a.n(Qn),$n=function(e){var t=Dn.getState().tokenMap.tokenMap;if(t&&t[e])return t[e]};function ec(e,t){var a=$n(t);if(a)return void 0===e||null===e||""===e.trim()?0:be.J(e).div("1e"+a.decimals).toFixed(a.precision,0)}var tc=function(e,t){var a=e.ammActivityMap,n=e.type,c=e.ammPoolActivityStatus,r=Dn.getState().tokenMap,o=r.coinMap,i=r.tokenMap,s=r.idIndex,u={};return a&&a[n]&&c.forEach((function(e){a[n][e]&&a[n][e].reduce((function(a,n){if(o&&n.awardRules[0]&&s&&i){var c,r=s[n.awardRules[0].tokenId],u=ec(n.awardRules[0].volume,r),l={rewardToken:o[r],totalRewards:Number(u),myRewards:e===be.a.InProgress&&t&&t[n.market]?Pn(r,null===(c=t[n.market])||void 0===c?void 0:c.currentRewards[0].volume):0,duration:{from:new Date(null===n||void 0===n?void 0:n.rangeFrom),to:new Date(null===n||void 0===n?void 0:n.rangeTo)},isPass:be.a.EndOfGame===e};a[n.market]?a[n.market].push(l):a[n.market]=[l]}return a}),u)})),ac(u)},ac=function(e,t){var a=Dn.getState().tokenMap.coinMap,n=Dn.getState().amm.ammMap.ammMap;try{return e&&a?Reflect.ownKeys(e).reduce((function(t,c){var r=n[c];if(r&&r.coinA&&a&&e[c]){var o=e[c].map((function(e){return Object(d.a)(Object(d.a)({},qn(r)),{},{coinAInfo:a[r.coinA],coinBInfo:a[r.coinB],activity:e})}));t=[].concat(Object(U.a)(t),Object(U.a)(o))}return t}),[]):[]}catch(c){return console.log(c),[]}},nc=function(e){var t,a,n,c,r,o,i,s,u,l,d,b,p,m,f=e.coinA,v=e.coinB,j=e.ammUserReward,O=e.idIndex,h=e.faitPrices,k=e.forex,x=e.walletMap,g=e.snapShotData;if(j&&(t=j.currentRewards[0]?O[j.currentRewards[0].tokenId]:void 0,a=j.currentRewards[1]?O[j.currentRewards[1].tokenId]:void 0,n=j?_n(f,j.feeRewards[0]):Object(be.J)(0),c=j?_n(v,j.feeRewards[1]):Object(be.J)(0),n=n||Object(be.J)(0),c=c||Object(be.J)(0),o=(r=n.times(h[f]?h[f].price:0).plus(c.times(h[v]?h[v].price:0))).times(k),i=t?_n(t,j.currentRewards[0].volume):Object(be.J)(0),s=a?_n(a,j.currentRewards[1].volume):Object(be.J)(0),i=i||Object(be.J)(0),s=s||Object(be.J)(0),l=(u=i.times(t?h[t].price:1).plus(s.times(a?h[a].price:1))).times(k)),x&&x["LP-"+f+"-"+v]&&g){var w=new Zn.a(x["LP-"+f+"-"+v].count).div(g.ammPoolsBalance.lp.volume);d=w.times(_n(f,g.ammPoolsBalance.pooled[0].volume)||1),b=w.times(_n(v,g.ammPoolsBalance.pooled[1].volume)||1),m=(p=d.times(h[f].price).plus(b.times(h[v].price))).times(k)}return{feeA:n?n.toNumber():void 0,feeB:c?c.toNumber():void 0,reward:i?i.toNumber():void 0,rewardToken:t?B.Eb[t]:void 0,reward2:s?s.toNumber():void 0,rewardToken2:a?B.Eb[a]:void 0,rewardDollar:u?u.toNumber():void 0,rewardYuan:l?l.toNumber():void 0,feeDollar:r?r.toNumber():void 0,feeYuan:o?o.toNumber():void 0,ammDetail:{coinAInfo:B.Eb[f],coinBInfo:B.Eb[v]},balanceA:d?d.toNumber():void 0,balanceB:b?b.toNumber():void 0,balanceDollar:p?p.toNumber():void 0,balanceYuan:m?m.toNumber():void 0}},cc=function(e,t,a,n){var c=Dn.getState().tokenMap,r=c.coinMap,o=c.idIndex,i=c.tokenMap,s=Dn.getState().system,u=s.faitPrices,l=s.forex,d=e.match(/(\w+)-(\w+)/i),b=Object(we.a)(d,3),p=b[1],m=b[2];if(a&&a["AMM-"+e]&&n&&n.ammPoolsBalance){var f=a["AMM-"+e];if(r&&i&&o&&l&&u)return nc({coinA:p,coinB:m,ammUserReward:f,idIndex:o,faitPrices:u,forex:l,walletMap:t,snapShotData:n})}return{feeA:void 0,feeB:void 0,feeDollar:void 0,feeYuan:void 0,reward:void 0,rewardToken:void 0,balanceA:void 0,balanceB:void 0,balanceYuan:void 0,balanceDollar:void 0}},rc=function(e){var t=e.market,a=e.ammDetail,n=e.walletMap,c=e.ammUserRewardMap;if(n&&a)return function(e,t,a,n){var c,r,o,i,s=Dn.getState().tokenMap,u=s.coinMap,l=s.idIndex,b=s.tokenMap,p=Dn.getState().system,m=p.faitPrices,f=p.forex,v=e.match(/(\w+)-(\w+)/i),j=Object(we.a)(v,3),O=j[1],h=j[2],k={};if(t&&t["LP-"+O+"-"+h]&&f){var x=new Zn.a(t["LP-"+O+"-"+h].count).div(n.totalLPToken);c=x.times(_n(O,n.totalA?n.totalA:0)||1),r=x.times(_n(h,n.totalB?n.totalB:0)||1),i=(o=c.times(m[O]?m[O].price:0).plus(r.times(m[h]?m[h].price:0))).times(f),k={balanceA:c.toNumber(),balanceB:r.toNumber(),balanceYuan:i.toNumber(),balanceDollar:o.toNumber()}}if(a&&a["AMM-"+e]&&n&&f){var g,w,y,A,S,I,C,N,T,M,E=a["AMM-"+e];return u&&b&&l&&f&&m&&E&&(g=E.currentRewards[0]?l[E.currentRewards[0].tokenId]:void 0,w=E.currentRewards[1]?l[E.currentRewards[1].tokenId]:void 0,y=E?_n(O,E.feeRewards[0]):Object(be.J)(0),A=E?_n(h,E.feeRewards[1]):Object(be.J)(0),y=y||Object(be.J)(0),A=A||Object(be.J)(0),I=(S=y.times(m[O]?m[O].price:0).plus(A.times(m[h]?m[h].price:0))).times(f),C=g?_n(g,E.currentRewards[0].volume):Object(be.J)(0),N=w?_n(w,E.currentRewards[1].volume):Object(be.J)(0),C=C||Object(be.J)(0),N=N||Object(be.J)(0),M=(T=C.times(g?m[g].price:1).plus(N.times(w?m[w].price:1))).times(f),k=Object(d.a)(Object(d.a)({},k),{},{feeA:y?y.toNumber():void 0,feeB:A?A.toNumber():void 0,reward:C?C.toNumber():void 0,rewardToken:g?u[g]:void 0,reward2:N?N.toNumber():void 0,rewardToken2:w?u[w]:void 0,rewardDollar:T?T.toNumber():void 0,rewardYuan:M?M.toNumber():void 0,feeDollar:S?S.toNumber():void 0,feeYuan:I?I.toNumber():void 0,ammDetail:{coinAInfo:O?u[O]:void 0,coinBInfo:h?u[h]:void 0}})),k}return{feeA:void 0,feeB:void 0,feeDollar:void 0,feeYuan:void 0,reward:void 0,rewardToken:void 0,balanceA:void 0,balanceB:void 0,balanceYuan:void 0,balanceDollar:void 0}}(t,n,c,a)},oc=function(e){var t=Dn.getState().system,a=t.faitPrices,n=t.forex,c=isNaN(e.close)||isNaN(e.open)||e.open===e.close?v.v.none:e.close>e.open?v.v.increase:v.v.decrease,r={change:(e.close-e.open)/e.open,timeUnit:"24h",priceYuan:0,priceDollar:0,floatTag:c,reward:0,close:isNaN(e.close)?void 0:e.close,high:0===e.high?void 0:e.high,low:0===e.low?void 0:e.low};if(a&&n){var o=ec(e.base_token_volume,e.base),i=Object(be.J)(e.close).times(a[e.quote]?a[e.quote].price:0),s=i.times(n),u=a[e.quote].price?a[e.quote].price:0;r=Object(d.a)(Object(d.a)({},r),{},{changeDollar:Object(be.J)(e.close-e.open).times(u).toNumber(),changeYuan:Object(be.J)(e.close-e.open).times(u).times(n).toNumber(),volume:o?Number(o):void 0,closeDollar:i.toNumber(),closeYuan:s.toNumber()})}return r},ic=function(e){var t=e.tickerMap,a=Dn.getState().system,n=a.faitPrices,c=a.forex;return Reflect.ownKeys(t).reduce((function(e,a){var r=t[a];if(r&&r.base&&c&&n&&(n[r.base]||n.USDT)){var o=ec(r.base_token_volume,r.base),i=Object(be.J)(o||0).times(n[r.base]?n[r.base].price:n.USDT.price),s=null===i||void 0===i?void 0:i.times(c),u=r.change&&0!==r.change?100*r.change:void 0;e[a]={timeUnit:"24h",priceDollar:0===(null===i||void 0===i?void 0:i.toNumber())||null===i||void 0===i?void 0:i.toNumber(),priceYuan:0===(null===s||void 0===s?void 0:s.toNumber())||null===s||void 0===s?void 0:s.toNumber(),volume:o?Number(o):void 0,floatTag:r.close>r.open?"increase":"decrease",change:u,close:isNaN(r.close)?void 0:r.close,high:0===r.high?void 0:r.high,low:0===r.low?void 0:r.low,reward:0,rewardToken:"",__rawTicker__:r}}return e}),{})},sc=function(){var e,t=Dn.getState().walletLayer2.walletLayer2,a=Dn.getState().tokenMap.tokenMap;return t&&(e=Reflect.ownKeys(t).reduce((function(e,n){var c=t[n],r=c.total,o=c.locked,i=(c.pending.withdraw,be.J(r).minus(be.J(o)).toString());return Object(d.a)(Object(d.a)({},e),{},Object(x.a)({},n,{belong:n,count:be.t(a,n,i),detail:t[n]}))}),{})),{walletMap:e}},uc=function(e){var t=me(),a=Dn.getState().account,n=a.accountId,c=a.apiKey;return t.getUserTrades({accountId:n},c).then((function(e){return e.userTrades}))},lc=function(e,t){var a=[];return t.forEach((function(e){try{var t=be.x(e.market),n=t.base,c=t.quote;Dn.getState().system.forex,Dn.getState().settings.currency;if(Dn.getState().tokenMap.tokenMap){var r,o,i=e.side===be.i.Buy?n:c;a.push({side:e.side===be.i.Sell?v.U.Sell:v.U.Buy,amount:{from:{key:n,value:n?Pn(n,e.volume):void 0},to:{key:c,value:n?null===(r=_n(n,e.volume))||void 0===r?void 0:r.times(e.price).toNumber():void 0}},price:{key:"",value:be.J(e.price).toNumber()},fee:{key:i||"--",value:i?null===(o=_n(i,e.fee))||void 0===o?void 0:o.toNumber():void 0},time:parseInt(e.tradeTime.toString())})}}catch(s){console.log(s)}})),a},dc=function(){var e,t=Dn.getState().account,a=t.accountId,n=t.apiKey;return null===(e=je.ammpoolAPI)||void 0===e?void 0:e.getUserAmmPoolTxs({accountId:a},n).then((function(e){return e.userAmmPoolTxs}))},bc=function(e,t){var a=[],n=Dn.getState().tokenMap,c=n.tokenMap,r=n.coinMap,o=n.idIndex;return t.forEach((function(t){try{var n=Dn.getState().system.forex;if(r&&c&&o&&(!e||c["LP-"+e].tokenId===t.lpToken.tokenId)){var i,s,u=o[t.lpToken.tokenId].match(/LP-(\w+)-(\w+)/i),l=Object(we.a)(u,3),d=l[1],b=l[2];a.push({type:t.txType===be.b.JOIN?B.i.add:B.i.remove,totalDollar:1e3,totalYuan:1e3/Number(n),amountA:Pn(d,null===(i=t.poolTokens[0])||void 0===i?void 0:i.actualAmount),amountB:Pn(d,null===(s=t.poolTokens[1])||void 0===s?void 0:s.actualAmount),time:Number(t.updatedAt),coinA:r[d],coinB:r[b],status:t.txStatus})}return a}catch(p){console.log(p)}})),a},pc=function(e){var t=e.coinKey,a=e.ammKey,n=e.ammMap;return new Promise((function(e,c){je.ammpoolAPI&&je.exchangeAPI?Promise.all([je.ammpoolAPI.getAmmPoolSnapshot({poolAddress:n[a].address}),je.exchangeAPI.getMixTicker({market:t})]).then((function(t){var a=Object(we.a)(t,2),n=a[0].ammPoolSnapshot,c=a[1].tickMap;e({ammPoolsBalance:n,tickMap:c})})):c(new v.n(v.t.NO_SDK))}))},mc=a(1662),fc=a(1),vc=["t"],jc=Object(mc.a)("common")((function(e){var t=e.t,a=Object(f.a)(e,vc),c=Object(m.g)(),r=function(){var e=Object(B.Sb)(),t=e.setTheme,a=e.themeMode,c=e.setLanguage,r=_(),o=_(),i=o.account,s=o.setShouldShow,u=o.status,l=Object(B.Rb)().setShowAccount,b=Object.assign(qn(Gn),Object(x.a)({},v.bb.ACTIVATED,[function(){s(!0),l({isShow:!0,step:B.a.HadAccount})}])),p=w.a.useCallback(Object(k.a)(h.a.mark((function e(){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:Za("onWalletBtnConnect click: ".concat(i.readyState)),s(!0),Hn(b,[]);case 3:case"end":return e.stop()}}),e)}))),[i,s,b]),m=w.a.useCallback((function(e){e===n.dark?t(n.light):t(n.dark)}),[t]),f=function(e){c(e)};w.a.useEffect((function(){v.lb[v.d.WalletConnect]=Object(d.a)(Object(d.a)({},v.lb[v.d.WalletConnect]),{},{accountState:r,handleClick:p}),v.lb[v.d.Theme]=Object(d.a)(Object(d.a)({},v.lb[v.d.Theme]),{},{themeMode:a,handleClick:m}),v.lb[v.d.Language]=Object(d.a)(Object(d.a)({},v.lb[v.d.Language]),{},{handleChange:f})}));var j=w.a.useCallback((function(){v.lb[v.d.WalletConnect]=Object(d.a)(Object(d.a)({},v.lb[v.d.WalletConnect]),{},{accountState:r})}),[v.lb,r]);return w.a.useEffect((function(){u&&"UNSET"===u&&j()}),[u]),{headerToolBarData:v.lb,headerMenuData:v.jb,account:i}}(),o=r.headerToolBarData,i=r.headerMenuData,u=function(){var e=Object(s.c)((function(e){return e.localStore.confirmation})),t=Object(s.b)();return{confirmation:e,confirmWrapper:w.a.useCallback((function(){t(on(void 0))}),[t])}}(),l=u.confirmWrapper,b=u.confirmation;return Object(fc.jsxs)(fc.Fragment,{children:[Object(fc.jsx)(B.D,{children:Object(fc.jsx)(B.C,Object(d.a)(Object(d.a)({},a),{},{headerMenuData:i,headerToolBarData:o,selected:"/"===c.pathname?v.kb:c.pathname}))}),Object(fc.jsx)(j.a,{}),Object(fc.jsx)(B.n,{isShow:!(null===b||void 0===b?void 0:b.confirmed),content:t("agreeLoopringTxt"),btnTxt:t("labelCookiesAgree"),clickToConfirm:function(){return l()}})]})})),Oc=a(323),hc=a(1609),kc=a(1657),xc=a(1702),gc=a(1731),wc=a(1740),yc=16;var Ac,Sc,Ic=a(875),Cc=a(16),Nc=Object(Cc.a)(kc.a)(Ac||(Ac=Object(b.a)(["\n  display: flex;\n  flex-direction: column;\n  width: 100%;\n  //height: 100%;\n  flex: 1;\n  background: var(--color-box);\n  border-radius: ","px;\n  // padding: ","px  0;\n  margin-bottom: ","px;\n  .title {\n    font-size: ","px;\n    //line-height: 19px;\n    margin-left: ","px;\n    margin-top: ","px;\n    // margin-bottom: ","px;\n  }\n\n  .tableWrapper {\n    display: flex;\n    margin-top: ","px;\n    flex: 1;\n    .rdg {\n      flex: 1;\n    }\n  }\n\n  .extraTradeClass {\n    .rdg-header-row {\n      background-color: inherit !important;\n    }\n  }\n"])),(function(e){return e.theme.unit}),(function(e){return 3*e.theme.unit}),(function(e){return 2*e.theme.unit}),(function(e){return 3*e.theme.unit}),(function(e){return 3*e.theme.unit}),(function(e){return 3*e.theme.unit}),(function(e){return 2*e.theme.unit}),(function(e){return 3*e.theme.unit})),Tc=Object(Cc.a)(hc.a)(Sc||(Sc=Object(b.a)(["\n \n  &{\n    background: var(--color-box);\n    border-radius: ","px;\n    .rdg{\n      .rdg-header-row {\n        border-radius: ","px ","px 0 0;\n      }\n    }\n  }\n  ","\n"])),(function(e){return e.theme.unit}),(function(e){return e.theme.unit}),(function(e){return e.theme.unit}),(function(e){var t=e.theme;return Object(B.ib)({pLeft:3*t.unit,pRight:3*t.unit})}));var Mc,Ec=Object(Oc.a)(hc.a,{target:"e19jzbou2"})("& .MuiGrid-root:not(:last-of-type)>div{margin-right:",(function(e){return 2*e.theme.unit}),"px;}"),Dc=Object(Oc.a)(kc.a,{target:"e19jzbou1"})("position:absolute;top:0.9rem;right:",(function(e){return 2*e.theme.unit}),"px;"),Pc=Object(Oc.a)(kc.a,{target:"e19jzbou0"})({name:"2n1ryy",styles:"position:relative;padding:0.8rem 0.8rem 0 1rem"});!function(e){e.all="all",e.favourite="favourite",e.ranking="ranking"}(Mc||(Mc={}));var _c=Object(mc.a)("common")((function(e){var t=w.a.useState([]),a=Object(we.a)(t,2),n=a[0],c=a[1],r=w.a.useState([]),o=Object(we.a)(r,2),i=o[0],u=o[1],l=w.a.useState("all"),b=Object(we.a)(l,2),p=b[0],f=b[1],j=w.a.useState([]),O=Object(we.a)(j,2),y=O[0],A=O[1],S=w.a.useState(""),I=Object(we.a)(S,2),C=I[0],N=I[1],T=w.a.useState([]),M=Object(we.a)(T,2),E=M[0],D=M[1],P=w.a.useState(0),_=Object(we.a)(P,2),R=_[0],L=_[1],F=function(){var e=Object(s.c)((function(e){return e.localStore.favoriteMarket})),t=Object(s.b)();return{favoriteMarket:e,clearAll:w.a.useCallback((function(){return t(ln(void 0))}),[t]),removeMarket:w.a.useCallback((function(e){return t(dn(e))}),[t]),addMarket:w.a.useCallback((function(e){return t(bn(e))}),[t]),addMarkets:w.a.useCallback((function(e){return t(pn(e))}),[t])}}(),K=F.favoriteMarket,J=F.removeMarket,W=F.addMarket,H=e.t,V=w.a.useCallback(Object(k.a)(h.a.mark((function e(){var t;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!je.ammpoolAPI){e.next=5;break}return e.next=3,je.ammpoolAPI.getAmmPoolActivityRules();case 3:(t=e.sent)&&t.groupByRuleType&&t.groupByRuleType.SWAP_VOLUME_RANKING&&t.groupByRuleType.SWAP_VOLUME_RANKING.length&&D(t.groupByRuleType.SWAP_VOLUME_RANKING);case 5:case"end":return e.stop()}}),e)}))),[]),G=w.a.useCallback(function(){var e=Object(k.a)(h.a.mark((function e(t){var a,n;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!je.exchangeAPI){e.next=5;break}return e.next=3,je.exchangeAPI.getMixCandlestick({market:t,interval:Ic.TradingInterval.d1,limit:30});case 3:(a=e.sent)&&a.candlesticks&&a.candlesticks.length&&(n=a.candlesticks.map((function(e){return{timeStamp:e.timestamp,low:e.low,high:e.high,open:e.open,close:e.close,volume:e.baseVol,sign:e.close<e.open?-1:1}})),c((function(e){return[].concat(Object(U.a)(e),[{market:t,data:n}])})));case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[]),Y=function(){var e=Xa(),t=e.tickerMap,a=e.status,n=e.statusUnset,c=e.updateTickers,r=nn(),o=r.sendSocketTopic,i=r.socketEnd,s=w.a.useState([]),u=Object(we.a)(s,2),l=u[0],b=u[1],p=Dn.getState().tokenMap,m=p.marketArray,f=p.coinMap,j=w.a.useState([]),O=Object(we.a)(j,2),y=O[0],A=O[1],S=w.a.useState([]),I=Object(we.a)(S,2),C=I[0],N=I[1],T=w.a.useState([]),M=(Object(we.a)(T,2)[1],w.a.useState([0,2])),E=Object(we.a)(M,2),D=E[0],P=(E[1],w.a.useState(-1)),_=Object(we.a)(P,2),R=_[0],L=(_[1],w.a.useMemo((function(){return _t()}),[])),B=w.a.useCallback((function(e,t){C.length&&(C[e].tradeFloat=t,N(C))}),[C]);w.a.useEffect((function(){var e=L.subscribe((function(e){var t=e.tickerMap;t&&Reflect.ownKeys(t).forEach((function(e){var a=l.findIndex((function(t){return t===e}));-1!==a&&B(a,t[e])}))}));return function(){return e.unsubscribe()}}),[L,l]);var F=Object(g.useCallback)(Object(k.a)(h.a.mark((function e(){var t,a;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!je.exchangeAPI){e.next=14;break}return e.prev=1,e.next=4,je.exchangeAPI.getRecommendedMarkets();case 4:return t=e.sent,a=t.recommended,b(a),e.abrupt("return",a||[]);case 10:e.prev=10,e.t0=e.catch(1),$a(e.t0);case 13:return e.abrupt("return",[]);case 14:case"end":return e.stop()}}),e,null,[[1,10]])}))),[]);w.a.useEffect((function(){F()}),[F]),w.a.useEffect((function(){var e=Object(we.a)(D,2),t=e[0],a=e[1];return K(t,a),W(t*yc),function(){i()}}),[]),w.a.useEffect((function(){switch(a){case"ERROR":console.log("ERROR","get ticker error,ui"),n();break;case"PENDING":break;case"DONE":n(),J(t)}}),[a,n]);var K=w.a.useCallback((function(e,t){c(m||[])}),[m,yc]),J=w.a.useCallback(function(){var e=Object(k.a)(h.a.mark((function e(t){var a,n,c,r,o,i;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,F();case 2:if(a=e.sent,n=[],c=[],r=t&&Object.keys(t)?Reflect.ownKeys(t).reduce((function(e,r){var o=r.match(/(\w+)-(\w+)/i),i=Object(we.a)(o,3),s=i[1],u=i[2],l=Object(d.a)(Object(d.a)({},t[r]),{},{pair:{coinA:s,coinB:u}});return-1!==a.findIndex((function(e){return e===r}))&&n.push(qn(l)),m&&-1!==m.findIndex((function(e){return e===r}))&&c.push(qn(l)),e.push(l),e}),[]):[],A([].concat(Object(U.a)(y),Object(U.a)(r))),0===D[0]){for((n=n.filter((function(e){var t=e.pair,a=t.coinA,n=t.coinB;return f&&f[a]&&f[n]}))).length<4&&(o=c.filter((function(e){var t="".concat(e.pair.coinA,"-").concat(e.pair.coinB);return!a.includes(t)})),n=n.concat(o.slice(0,4-n.length)));n.length<4;)n.push(qn(n[0]));i=n.reduce((function(e,t){if(f&&t){var a=t.pair,n=a.coinA,c=a.coinB,r={tradeFloat:t,coinAInfo:f[n],coinBInfo:f[c]};e.push(r)}return e}),[]),N(i)}case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[y,D]),W=w.a.useCallback(Object(en.debounce)((function(e){e!==R&&o(Object(x.a)({},be.o.ticker,m))}),2*v.ib.wait),[R]);return{tickList:y,recommendations:C}}(),q=Y.recommendations,z=Y.tickList,X=w.a.useCallback((function(){var e=window.innerHeight;L(e-64-117-56-120-20)}),[]);w.a.useEffect((function(){return X(),window.addEventListener("resize",X),function(){window.removeEventListener("resize",X)}}),[X]),w.a.useEffect((function(){var e=q.map((function(e){return"".concat(e.coinAInfo.simpleName,"-").concat(e.coinBInfo.simpleName)}));e.length&&(G(e[0]),G(e[1]),G(e[2]),G(e[3]))}),[q,G]);var Q=Object(g.useCallback)(Object(k.a)(h.a.mark((function e(){var t,a,n;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!je.ammpoolAPI){e.next=6;break}return e.next=3,null===(t=je.ammpoolAPI)||void 0===t?void 0:t.getAmmPoolBalances();case 3:a=e.sent,n=a.raw_data.map((function(e){return Object(d.a)(Object(d.a)({},e),{},{poolName:e.poolName.replace("AMM-","")})})),u(n);case 6:case"end":return e.stop()}}),e)}))),[]);w.a.useEffect((function(){Q()}),[Q]),w.a.useEffect((function(){V()}),[V]);var Z=Object(m.f)(),$=Object(g.useCallback)((function(){return i.length&&z&&z.length?z.filter((function(e){var t="".concat(e.pair.coinA,"-").concat(e.pair.coinB);return!i.find((function(e){return e.poolName===t}))||!i.find((function(e){return e.poolName===t})).risky})):[]}),[z,i]);Object(g.useEffect)((function(){var e=$();A(e)}),[$]);var ee=Object(g.useCallback)((function(e){var t=e.type,a=void 0===t?Mc.all:t,n=e.keyword,c=void 0===n?"":n,r=Object(en.cloneDeep)(z);a===Mc.favourite&&(r=r.filter((function(e){var t="".concat(e.pair.coinA,"-").concat(e.pair.coinB);return null===K||void 0===K?void 0:K.includes(t)}))),a===Mc.ranking&&(r=r.filter((function(e){var t="".concat(e.pair.coinA,"-").concat(e.pair.coinB);return E.find((function(e){return e.market===t}))}))),r=r.filter((function(e){var t=null===c||void 0===c?void 0:c.toLocaleLowerCase(),a=e.pair.coinA.toLowerCase(),n=e.pair.coinB.toLowerCase();return""===c||((null===a||void 0===a?void 0:a.includes(t))||(null===n||void 0===n?void 0:n.includes(t)))})),a!==Mc.all||c||(r=$()),A(r)}),[$,K,E,z]),te=Object(g.useCallback)((function(e){var t=e.pair,a=t.coinA,n=t.coinB,c="".concat(a,"-").concat(n);Z&&Z.push({pathname:"/trading/lite/".concat(c)})}),[Z]),ae=Object(g.useCallback)((function(e,t){f(t),ee({type:"favourite"===t?Mc.favourite:"tradeRanking"===t?Mc.ranking:Mc.all,keyword:C})}),[ee,C]),ne=w.a.useCallback((function(e){N(e);var t="favourite"===p?Mc.favourite:"tradeRanking"===p?Mc.ranking:Mc.all;ee({keyword:e,type:t})}),[ee,p]);return Object(fc.jsxs)(kc.a,{display:"flex",flexDirection:"column",flex:1,children:[Object(fc.jsx)(Ec,{container:!0,children:q.map((function(t,a){var c,r="".concat(t.coinAInfo.simpleName,"-").concat(t.coinBInfo.simpleName),o=null===(c=n.find((function(e){return e.market===r})))||void 0===c?void 0:c.data.sort((function(e,t){return e.timeStamp-t.timeStamp}));return Object(fc.jsx)(hc.a,{item:!0,xs:3,onClick:function(){Z&&Z.push({pathname:"/trading/lite/".concat(r)})},children:Object(fc.jsx)(B.G,Object(d.a)({},Object(d.a)(Object(d.a)({},t),{},{chartData:o||[]},e)))},a)}))}),Object(fc.jsx)(Tc,{container:!0,marginY:3,paddingBottom:2,flex:1,children:Object(fc.jsxs)(hc.a,{item:!0,xs:12,children:[Object(fc.jsxs)(Pc,{children:[Object(fc.jsxs)(xc.a,{value:p,onChange:ae,"aria-label":"disabled tabs example",children:[Object(fc.jsx)(gc.a,{label:H("labelQuotePageFavourite"),value:"favourite"}),Object(fc.jsx)(gc.a,{label:H("labelAll"),value:"all"}),Object(fc.jsx)(gc.a,{label:H("labelQuotePageTradeRanking"),value:"tradeRanking"})]}),Object(fc.jsx)(Dc,{children:Object(fc.jsx)(B.F,{value:C,onChange:ne})})]}),Object(fc.jsx)(wc.a,{}),Object(fc.jsx)(B.X,Object(d.a)({onRowClick:function(e,t,a){return te(t)},rawData:y,favoriteMarket:K,addFavoriteMarket:W,removeFavoriteMarket:J,currentHeight:R},Object(d.a)({showLoading:z&&!z.length},e)))]})})]})})),Rc=a(80),Lc=a.n(Rc),Bc=a(1722);function Uc(e,t){Object(Bc.a)(e,[t||{}])}var Fc=[{value:B.q.Trend,key:B.q.Trend,label:"label"+B.q.Trend},{value:B.q.Depth,key:B.q.Depth,label:"label"+B.q.Depth}];var Kc,Jc,Wc=["props","coinAInfo","coinBInfo","tradeFloat","marketArray","t"],Hc=function(e){e.props;var t=e.coinAInfo,a=e.coinBInfo,n=e.tradeFloat,c=e.marketArray,r=e.t,o=Object(f.a)(e,Wc),i=function(e,t,a,n,c){var r=Fc.map((function(e){var t=e.value,a=e.label,n=e.key;return{value:t,tlabel:c(a),key:n,JSX:Object(fc.jsx)(fc.Fragment,{children:c(a)})}})),o=Object(be.z)(n,null===t||void 0===t?void 0:t.name,null===a||void 0===a?void 0:a.name),i=o.market,s=o.amm,u=Object(g.useState)(B.q.Trend),l=Object(we.a)(u,2),d=l[0],b=l[1],p=Object(g.useState)(v.f.D1),m=Object(we.a)(p,2),f=m[0],j=m[1],O=Object(g.useState)(void 0),x=Object(we.a)(O,2),w=x[0],y=x[1],A=Object(g.useCallback)((function(e,t){y(void 0),b("Trend"===t?B.q.Trend:B.q.Depth)}),[y,b]),S=Object.keys(v.f).reduce((function(e,t){var a={value:v.f[t],key:v.f[t],label:"label"+v.f[t]};return e.push({value:a.value,tlabel:c(a.label?a.label:a.key),key:a.key,JSX:Object(fc.jsx)(fc.Fragment,{children:c(a.label?a.label:a.key)})}),e}),[]);return Uc(Object(k.a)(h.a.mark((function e(){var t,a,n,c,r,o,u,l;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=!0,je.exchangeAPI&&i&&s){e.next=3;break}return e.abrupt("return");case 3:if(d!==B.q.Trend){e.next=17;break}return a={market:s,interval:be.j.d1,limit:30},e.prev=5,e.next=8,je.exchangeAPI.getCandlestick(a);case 8:n=e.sent,t&&(c=n.candlesticks.map((function(e){return{timeStamp:e.timestamp,low:e.low,high:e.high,open:e.open,close:e.close,volume:e.quoteVol,change:(e.close-e.open)/e.open,date:Lc()(e.timestamp).format("MMM DD")}})),y(c)),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(5),Object(be.s)(e.t0,"ChartPanel getCandlestick");case 15:e.next=29;break;case 17:return r={market:i},e.prev=18,e.next=21,je.exchangeAPI.getMixDepth(r);case 21:o=e.sent,u=o.depth,t&&(l={bidsPrices:u.bids_prices,bidsAmtTotals:u.bids_amtTotals,asksPrices:u.asks_prices,asksAmtTotals:u.asks_amtTotals},y(l)),e.next=29;break;case 26:e.prev=26,e.t1=e.catch(18),Object(be.s)(e.t1);case 29:return e.abrupt("return",(function(){t=!1}));case 30:case"end":return e.stop()}}),e,null,[[5,12],[18,26]])}))),[je.exchangeAPI,s,i,d]),{chartUnit:f,chartType:d,tgItemJSXs:r,tgItemJSXsPriceChart:S,handleChange:A,originData:w,handleChartUnitChange:function(e,t){var a="1H"===t?v.f.H1:"1W"===t?v.f.W1:v.f.D1;j(a)}}}(0,t,a,c,r),s=i.chartType,u=i.tgItemJSXs,l=(i.tgItemJSXsPriceChart,i.handleChange),b=i.originData,p=(i.chartUnit,i.handleChartUnitChange,Object(B.Sb)().upColor),m=null===t||void 0===t?void 0:t.name,j=null===a||void 0===a?void 0:a.name,O=b&&b.length?b.sort((function(e,t){return e.timeStamp-t.timeStamp})):[],x=b&&t&&b.asksAmtTotals?Object(d.a)(Object(d.a)({},b),{},{asksAmtTotals:b.asksAmtTotals.map((function(e){return Number(ec(e,m))})),bidsAmtTotals:b.bidsAmtTotals.map((function(e){return Number(ec(e,m))}))}):[];return Object(fc.jsxs)(fc.Fragment,{children:[Object(fc.jsx)(hc.a,{item:!0,children:Object(fc.jsxs)(kc.a,{display:"flex",flexDirection:"row",justifyContent:"space-between",children:[Object(fc.jsx)(B.qb,Object(d.a)({},Object(d.a)(Object(d.a)({coinAInfo:t,coinBInfo:a},o),{},{t:r,tradeFloat:n}))),Object(fc.jsx)(B.lb,Object(d.a)(Object(d.a)({exclusive:!0},Object(d.a)(Object(d.a)({},o),{},{t:r,tgItemJSXs:u,value:s})),{},{handleChange:l}))]})}),Object(fc.jsx)(hc.a,{item:!0,position:"relative",children:Object(fc.jsx)(kc.a,{minHeight:256,maxHeight:256,display:"block",style:{height:"100%",width:"100%"},children:Object(fc.jsx)(B.Z,{type:s,data:s===B.q.Trend?O:x,riseColor:p,extraInfo:j,handleMove:function(){},showXAxis:!0})})})]})},Vc=function(e){return{id:"simple-tab-".concat(e),"aria-controls":"simple-tabpanel-".concat(e)}},Gc=(Cc.a.div(Kc||(Kc=Object(b.a)(["\n            position: relative;\n            width: 100%;\n            margin-top: ","px;\n            background-color: var(--color-box);\n            box-shadow: var(--shadow);\n            border-radius: ","px;\n        "])),(function(e){return 4*e.theme.unit}),(function(e){return e.theme.unit})),Object(Cc.a)(xc.a)(Jc||(Jc=Object(b.a)(["\n    margin-left: ","px;\n"])),(function(e){return e.theme.unit}))),Yc=Object(mc.a)("common")((function(e){var t=e.tradeArray,a=e.myTradeArray,n=e.t,c=Object(g.useState)(1),r=Object(we.a)(c,2),o=r[0],i=r[1],s=Object(g.useState)(0),u=Object(we.a)(s,2),l=u[0],b=u[1],p=Object(g.useCallback)((function(){var e=window.innerHeight;b(e-64-117-56-120-20-100-50-15)}),[]);return Object(g.useEffect)((function(){return p(),window.addEventListener("resize",p),function(){window.removeEventListener("resize",p)}}),[p]),Object(fc.jsxs)(Tc,{item:!0,alignSelf:"stretch",xs:12,marginY:2,paddingBottom:2,flex:1,children:[Object(fc.jsxs)(Gc,{value:o,onChange:function(e,t){i(t)},"aria-label":"tabs switch",children:[Object(fc.jsx)(gc.a,Object(d.a)({label:n("labelMyTrade")},Vc(0))),Object(fc.jsx)(gc.a,Object(d.a)({label:n("labelRecent")},Vc(1)))]}),Object(fc.jsx)(wc.a,{}),Object(fc.jsx)(B.pb,{rawData:0===o?a:t,currentHeight:l})]})})),qc=a(819);var zc,Xc,Qc=["sell","buy","slippage"],Zc=["sell","buy","slippage"],$c=function(){var e=Object(qc.a)("common").t,t=Object(g.useState)(!1),a=Object(we.a)(t,2),n=a[0],c=a[1],r=Object(g.useState)(),o=Object(we.a)(r,2),i=o[0],s=o[1],u=v.ib.wait,l=We(),b=l.coinMap,p=l.tokenMap,j=l.marketArray,O=l.marketCoins,y=l.marketMap,A=ne().ammMap,S=_(),I=S.account,C=S.status,N=an(),T=N.delayAndUpdateWalletLayer2,M=N.walletLayer2,E=N.status,D=w.a.useState(void 0),P=Object(we.a)(D,2),R=P[0],L=P[1],F=w.a.useState({}),K=Object(we.a)(F,2),J=K[0],W=K[1],H=w.a.useState([]),V=Object(we.a)(H,2),G=V[0],Y=V[1],q=w.a.useState([]),z=Object(we.a)(q,2),X=z[0],Q=z[1],Z=w.a.useState(void 0),$=Object(we.a)(Z,2),ee=$[0],te=$[1],ae=function(e){var t=We().coinMap,a=Object(m.h)("".concat(e,"/:market")),n=Object(g.useState)({coinAInfo:void 0,coinBInfo:void 0}),c=Object(we.a)(n,2),r=c[0],o=c[1],i=Object(g.useState)(""),s=Object(we.a)(i,2),u=s[0],l=s[1];return Object(g.useEffect)((function(){var e,n;if(t){var c=null!==(e=null===a||void 0===a||null===(n=a.params)||void 0===n?void 0:n.market)&&void 0!==e?e:"LRC-ETH",r=c.match(/(\w+)-(\w+)/i),i=Object(we.a)(r,3),s=i[1],u=i[2],d=t[s],b=t[u];o({coinAInfo:d,coinBInfo:b}),l(c)}}),[]),{market:u,pair:r,setPair:o}}("/trading/lite"),ce=ae.pair,re=ae.setPair,oe=ae.market;Uc((function(){oe&&Ze(oe,void 0,void 0,void 0)}),[oe]);var ie=w.a.useState(void 0),se=Object(we.a)(ie,2),ue=se[0],le=se[1],de=w.a.useState(void 0),pe=Object(we.a)(de,2),me=pe[0],fe=pe[1],ve=Object(g.useState)(),Oe=Object(we.a)(ve,2),he=Oe[0],ke=Oe[1],xe=Object(g.useState)("0"),ge=Object(we.a)(xe,2),ye=ge[0],Ae=ge[1],Se=Object(g.useState)("0"),Ie=Object(we.a)(Se,2),Ce=Ie[0],Ne=Ie[1],Te=Object(g.useState)(),Me=Object(we.a)(Te,2),Ee=(Me[0],Me[1]),De=Object(g.useState)(),Pe=Object(we.a)(De,2),_e=Pe[0],Re=Pe[1],Le=function(){var e=Object(g.useState)(B.ob.DISABLED),t=Object(we.a)(e,2),a=t[0],n=t[1],c=Object(g.useState)(!1),r=Object(we.a)(c,2),o=r[0],i=r[1],s=Object(g.useState)(!1),u=Object(we.a)(s,2),l=u[0],d=u[1],b=_().account;return Object(g.useEffect)((function(){b.readyState!==v.a.ACTIVATED?n(B.ob.DISABLED):n(o?B.ob.LOADING:l?B.ob.AVAILABLE:B.ob.DISABLED)}),[o,l,b.readyState]),{btnStatus:a,setIsSwapLoading:i,setIsValidAmt:d}}(),Be=Le.btnStatus,Ue=Le.setIsSwapLoading,Fe=Le.setIsValidAmt;Uc(Object(k.a)(h.a.mark((function e(){var t,a,n,c,r,o,i,s,u,l,b,p,m;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=null===R||void 0===R?void 0:R.sell.belong,a=null===R||void 0===R?void 0:R.buy.belong,je.userAPI&&t&&a&&A&&j&&I.readyState===v.a.ACTIVATED&&I.accountId&&I.apiKey){e.next=4;break}return e.abrupt("return");case 4:if(n=Object(be.z)(j,t,a),c=n.amm){e.next=7;break}return e.abrupt("return");case 7:if(r=A[c]){e.next=10;break}return e.abrupt("return");case 10:return o=r.__rawConfig__.feeBips,i={accountId:null===I||void 0===I?void 0:I.accountId,market:c},e.next=14,je.userAPI.getMinimumTokenAmt(i,I.apiKey);case 14:if(s=e.sent,u=s.amountMap,l=u[t],b=u[a],l&&b){e.next=20;break}return e.abrupt("return");case 20:p=b.userOrderInfo.takerRate,m=be.J(o).plus(be.J(p)).toString(),Ee(l.userOrderInfo.minAmount),Re(b.userOrderInfo.minAmount),Za("---------------------------- amountMap:",u),Za("totalFee:",m),Za("takerRate:",p),Ne(m),Ae(p.toString()),W(Object(d.a)(Object(d.a)({},J),{},{fee:m}));case 30:case"end":return e.stop()}}),e)}))),[null===R||void 0===R?void 0:R.sell.belong,null===R||void 0===R?void 0:R.buy.belong,j,A,I.readyState,I.apiKey,I.accountId]),w.a.useEffect((function(){if(E===v.J.UNSET){var e,t,a,n,c=sc().walletMap;W(Object(d.a)(Object(d.a)({},J),{},{fee:Ce,walletMap:c})),L({sell:{belong:J.sellCoinInfoMap?null===(e=J.sellCoinInfoMap[J.coinSell])||void 0===e?void 0:e.simpleName:void 0,balance:c?null===(t=c[J.coinSell])||void 0===t?void 0:t.count:0},buy:{belong:J.sellCoinInfoMap?null===(a=J.sellCoinInfoMap[J.coinBuy])||void 0===a?void 0:a.simpleName:void 0,balance:c?null===(n=c[J.coinBuy])||void 0===n?void 0:n.count:0}});Object(be.z)(j,J.coinSell,J.coinBuy).market;uc().then((function(e){var t=lc(0,e);Q(t||[])}))}}),[E]),w.a.useEffect((function(){var e=Hn(Vn);fe(e)}),[C]);var Ke=Object(g.useCallback)(function(){var t=Object(k.a)(h.a.mark((function t(a){var n,r,o,i,u,l,b,m,j,O;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=a.sell,r=a.buy,a.slippage,o=Object(f.a)(a,Qc),i=Dn.getState().system.exchangeInfo,Ue(!0),je.userAPI&&p&&i&&he&&I.readyState===v.a.ACTIVATED){t.next=8;break}return s(e("labelSwapFailed")),c(!0),Ue(!1),t.abrupt("return");case 8:return u=p[n.belong],l=p[r.belong],b={accountId:I.accountId,sellTokenId:u.tokenId},t.next=13,je.userAPI.getNextStorageId(b,I.apiKey);case 13:return m=t.sent,t.prev=14,j={exchange:i.exchangeAddress,accountId:I.accountId,storageId:m.orderId,sellToken:{tokenId:u.tokenId,volume:he.amountS},buyToken:{tokenId:l.tokenId,volume:he.amountBOutSlip.minReceived},allOrNone:!1,validUntil:be.l,maxFeeBips:parseInt(Ce),fillAmountBOrS:!1,orderType:be.h.ClassAmm,eddsaSignature:""},Za(j),t.next=19,je.userAPI.submitOrder(j,I.eddsaKey.sk,I.apiKey);case 19:return O=t.sent,Za(O),t.next=23,T();case 23:L(Object(d.a)(Object(d.a)({},R),{sell:Object(d.a)(Object(d.a)({},null===R||void 0===R?void 0:R.sell),{},{tradeValue:0}),buy:Object(d.a)(Object(d.a)({},null===R||void 0===R?void 0:R.buy),{},{tradeValue:0})})),s(e("labelSwapSuccess")),c(!0),Ue(!1),t.next=36;break;case 29:t.prev=29,t.t0=t.catch(14),Ue(!1),Object(be.s)(t.t0),s(e("labelSwapFailed")),c(!0),Ue(!1);case 36:ke(void 0),o.__cache__&&Yn(o.__cache__);case 38:case"end":return t.stop()}}),t,null,[[14,29]])})));return function(e){return t.apply(this,arguments)}}(),[R,he,p]),Je=Object.assign(qn(Gn),Object(x.a)({},v.bb.ACTIVATED,[Ke])),He=w.a.useCallback((function(e){var t=e.sell,a=e.buy,n=e.slippage,c=Object(f.a)(e,Zc);Hn(Je,[Object(d.a)({sell:t,buy:a,slippage:n},c)])}),[Je]),Ve=function(){var e=Object(k.a)(h.a.mark((function e(t,a){var n;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.tradeData,e.abrupt("return",new Promise((function(e){switch(a){case B.fb.SEll_CLICK:case B.fb.BUY_CLICK:break;case B.fb.SELL_SELECTED:Ze("".concat(n.sell.belong,"-").concat(n.buy.belong),"sell",n,ue);break;case B.fb.BUY_SELECTED:Ze("".concat(n.sell.belong,"-").concat(n.buy.belong),"buy",n,ue);break;case B.fb.EXCHANGE_CLICK:Ze("".concat(n.sell.belong,"-").concat(n.buy.belong),void 0,void 0,ue)}e(void 0)})));case 2:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),Ge=Object(g.useState)(),Ye=Object(we.a)(Ge,2),qe=Ye[0],ze=Ye[1];Object(g.useEffect)((function(){var e=function(){var e=Object(k.a)(h.a.mark((function e(){var t,a,n,c,r,o;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(ce&&je.exchangeAPI&&ce.coinAInfo){e.next=2;break}return e.abrupt("return");case 2:return c="".concat(null===(t=ce.coinAInfo)||void 0===t?void 0:t.simpleName,"-").concat(null===(a=ce.coinBInfo)||void 0===a?void 0:a.simpleName),e.next=5,null===(n=je.exchangeAPI)||void 0===n?void 0:n.getMixDepth({market:c});case 5:r=e.sent,o=r.depth,ze(o);case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();e();var t=setInterval((function(){e()}),1e4);return function(){t&&clearInterval(t)}}),[ce]);var Xe=function(){var e=Object(k.a)(h.a.mark((function e(t,a,n){var c,r,o,i,s,u,l,b,m,f,v,O;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(o="".concat(null===(c=ce.coinAInfo)||void 0===c?void 0:c.simpleName,"-").concat(null===(r=ce.coinBInfo)||void 0===r?void 0:r.simpleName),j&&p&&y&&qe&&A&&J){e.next=4;break}return i=Object(d.a)({},J),e.abrupt("return",{_tradeData:a,_tradeCalcData:i});case 4:return(u=(s="sell"===t)?a.sell.tradeValue:a.buy.tradeValue)?"0."===(u=u.toString().trim())&&(u="0"):u="0",l=a.sell.belong,b=a.buy.belong,void 0===(m=a.slippage)&&(m=.5),m=be.J(m).times(100).toString(),f=Object(x.a)({},"AMM-"+o,A["AMM-"+o].__rawConfig__),Za(u),v=be.D(u,l,b,s,j,p,y,qe,f,n,ye,m),ke(v),J.priceImpact=null===v||void 0===v?void 0:v.priceImpact,J.minimumReceived=null===v||void 0===v?void 0:v.amountBOutSlip.minReceivedVal,s?a.buy.tradeValue=(null===v||void 0===v?void 0:v.output)?parseFloat(null===v||void 0===v?void 0:v.output):0:a.sell.tradeValue=(null===v||void 0===v?void 0:v.output)?parseFloat(null===v||void 0===v?void 0:v.output):0,O=Object(d.a)({},J),e.abrupt("return",{_tradeData:a,_tradeCalcData:O});case 21:case"end":return e.stop()}}),e)})));return function(t,a,n){return e.apply(this,arguments)}}();Uc((function(){var e=!!((null===he||void 0===he?void 0:he.amountBOut)&&_e&&be.J(null===he||void 0===he?void 0:he.amountBOut).gte(be.J(_e)));Fe(e),Za(he,_e),Za(".........validAmt:",e)}),[he,_e]);var Qe=w.a.useCallback(en.debounce(function(){var e=Object(k.a)(h.a.mark((function e(t,a,n){var c,r,o;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Xe(t,a,n);case 2:c=e.sent,r=c._tradeData,o=c._tradeCalcData,L(r),W(Object(d.a)(Object(d.a)({},o),{},{fee:Ce}));case 7:case"end":return e.stop()}}),e)})));return function(t,a,n){return e.apply(this,arguments)}}(),2*u),[L,W,Xe,ye]),Ze=function(e,t,a,n){if(J&&e==="".concat(J.coinSell,"-").concat(J.coinBuy)&&a&&t&&(!R||R[t].tradeValue!==a[t].tradeValue))Qe(t,a,n);else{var c={},r=void 0,o=function(e){var t=e.coinKey,a=e._tradeCalcData,n=e.tokenMap,c=e.coinMap;if(t){var r=t.match(/(\w+)-(\w+)/i),o=Object(we.a)(r,3),i=(o[0],o[1]),s=o[2];if(i&&c&&c[i]&&(a.coinSell=i),i!==s&&s&&-1!==n[i].tradePairs.findIndex((function(e){return e===s})))return a.coinBuy=s,a}return a.coinSell&&""!==a.coinSell?(a.coinBuy&&""!==a.coinBuy&&"undefined"!==a.coinBuy||(n&&n[a.coinSell].tradePairs?a.coinBuy=n[a.coinSell].tradePairs[0]:(a.coinSell="LRC",a.coinBuy="ETH")),a):(a.coinSell="LRC",a.coinBuy="ETH",a)}({coinKey:e,_tradeCalcData:{coinSell:null===ce||void 0===ce?void 0:ce.coinAInfo,coinBuy:null===ce||void 0===ce?void 0:ce.coinBInfo},tokenMap:p,coinMap:b}),i=Object(be.z)(j,o.coinSell,o.coinBuy),s=i.amm,u=i.market,l=u.match(/(\w+)-(\w+)/i),m=Object(we.a)(l,3),f=m[1],h=m[2];if(W(Object(d.a)(Object(d.a)({},J),{},{fee:Ce},o)),b&&re({coinAInfo:b[f],coinBInfo:b[h]}),M){var k=sc().walletMap;o.walletMap=k,uc().then((function(e){var t=lc(0,e);Q(t||[])}))}var g,w=[];if(j&&s&&u&&A)w=[null===(g=je.exchangeAPI)||void 0===g?void 0:g.getMarketTrades({market:u}),pc({coinKey:u,ammKey:s,ammMap:A})],Promise.all(Object(U.a)(w)).then((function(e){var t=Object(we.a)(e,2),a=t[0].marketTrades,n=t[1],i=n.ammPoolsBalance,s=n.tickMap;if(le(i),p){var l,m,f,j,h=function(e){var t,a,n=e.coinKey,c=(e.market,e.ammPoolsBalance),r=e.fee,o=e.tokenMap,i=e.tickerData,s=e._tradeCalcData,u=e.coinMap,l=e.marketCoins,b=n.match(/(\w+)-(\w+)/i),p=Object(we.a)(b,3),m=p[1];if(p[2],a=i.base===m?Number(i.close):0!==Number(i.close)?1/Number(i.close):0,isNaN(a)&&c){var f,j=Object(be.x)(n),O=j.base,h=j.quote,k=c.pooled[0],g=c.pooled[1];if(O&&h&&o[O].tokenId===k.tokenId)f=[[O,k.volume],[h,g.volume]];else{if(!O||!h||o[O].tokenId!==g.tokenId)throw new v.n(v.t.NO_SUPPORT_PAIR);f=[[h,g.volume],[O,k.volume]]}var w,y=f,A=Object(we.a)(y,2),S=A[0],I=A[1];S&&I&&(a=parseFloat(null===(w=_n(I[0],I[1]))||void 0===w?void 0:w.div(_n(S[0],S[1])||1).toFixed(7,0)))}return s.StoB=a,s.BtoS=0!==a&&void 0!==a?1/(1*a):0,s.sellCoinInfoMap=u&&(null===l||void 0===l?void 0:l.reduce((function(e,t){return Object(d.a)(Object(d.a)({},e),{},Object(x.a)({},t,u[t]))}),{})),s.buyCoinInfoMap=u&&o&&(null===(t=o[s.coinSell].tradePairs)||void 0===t?void 0:t.reduce((function(e,t){return Object(d.a)(Object(d.a)({},e),{},Object(x.a)({},t,u[t]))}),{})),s.fee=r,{_tradeCalcData:s}}({coinKey:"".concat(o.coinSell,"-").concat(o.coinBuy),market:u,ammPoolsBalance:i,tickerData:s[u]?s[u]:{},tokenMap:p,_tradeCalcData:o,coinMap:b,marketCoins:O,fee:Ce})._tradeCalcData;o=h,c=oc(s[u]?s[u]:{}),r=lc(0,a),W(o),te(c),Y(r),L({sell:{belong:o.sellCoinInfoMap?null===(l=o.sellCoinInfoMap[o.coinSell])||void 0===l?void 0:l.simpleName:void 0,balance:o.walletMap?null===(m=o.walletMap[o.coinSell])||void 0===m?void 0:m.count:0},buy:{belong:o.sellCoinInfoMap?null===(f=o.sellCoinInfoMap[o.coinBuy])||void 0===f?void 0:f.simpleName:void 0,balance:o.walletMap?null===(j=o.walletMap[o.coinBuy])||void 0===j?void 0:j.count:0}})}})).catch((function(e){}))}};return{swapToastOpen:n,setSwapToastOpen:c,swapAlertText:i,tradeCalcData:J,tradeFloat:ee,tradeArray:G,myTradeArray:X,btnStatus:Be,tradeData:R,pair:ce,marketArray:j,onSwapClick:He,swapBtnI18nKey:me,handleSwapPanelEvent:Ve}},er=Object(Cc.a)(kc.a)(zc||(zc=Object(b.a)(["\n  @media only screen and (min-height: 780px ) and (min-width: 1024px) {\n    position: fixed;\n  }\n"]))),tr=Object(mc.a)("common")((function(e){var t=Object.assign({},e),a=$c(),n=a.tradeCalcData,c=a.tradeData,r=a.tradeFloat,o=a.tradeArray,i=a.myTradeArray,s=a.marketArray,u=a.handleSwapPanelEvent,l=a.onSwapClick,b=a.pair,p=a.swapBtnI18nKey,f=a.btnStatus,v=a.swapToastOpen,j=a.setSwapToastOpen,O=a.swapAlertText,h=We().coinMap,k=Object(m.g)().pathname,x=k?k.split("/")[k.split("/").length-1].split("-"):"",g=Array.isArray(x)?x[0]:"",w=Array.isArray(x)?x[1]:"",y={coinAInfo:h?h[g]:"",coinBInfo:h?h[w]:""},A=y.coinAInfo?y:b;return Object(fc.jsxs)(fc.Fragment,{children:[Object(fc.jsx)(B.kb,{alertText:O,open:v,autoHideDuration:L,setOpen:j}),Object(fc.jsxs)(hc.a,{container:!0,marginRight:3,alignContent:"stretch",direction:"column",flexWrap:"nowrap",children:[Object(fc.jsx)(Hc,Object(d.a)({},Object(d.a)(Object(d.a)(Object(d.a)({},t),A),{},{marketArray:s,tradeFloat:r,tradeArray:o}))),Object(fc.jsx)(Yc,{tradeArray:o,myTradeArray:i})]}),Object(fc.jsx)(kc.a,{display:"flex",style:{minWidth:"var(--swap-box-width)"},children:Object(fc.jsx)(er,{children:Object(fc.jsx)(B.eb,Object(d.a)({tradeData:c,tradeCalcData:n,onSwapClick:l,swapBtnI18nKey:p,swapBtnStatus:f},Object(d.a)({handleSwapPanelEvent:u},t)))})})]})})),ar=a(1737),nr=function(e){e.children;return Object(fc.jsx)(w.a.Fragment,{children:null})};!function(e){e.Handler="handler",e.AccountId="account_id",e.Account="account",e.Apikey="apikey",e.Eddsakey="eddsakey",e.ActiveTime="active_time",e.AmmOrder="amm_order",e.HardwareAddresses="hardware_addresses",e.ConnectorName="connector_name",e.DepositHash="__loopring__.depositsHash",e.WalletConnect="walletconnect"}(Xc||(Xc={}));var cr,rr=function(){function e(){Object(de.a)(this,e)}return Object(Mt.a)(e,null,[{key:"getLocalDepositHash",value:function(e){var t=window.localStorage.getItem(Xc.DepositHash);if(t&&(t=JSON.parse(t))&&e.accAddress&&t[e.accAddress])return t[e.accAddress]}},{key:"clearDepositHash",value:function(e,t){var a=window.localStorage.getItem(Xc.DepositHash);(a=a?JSON.parse(a):{})[e.accAddress]&&a[e.accAddress][t]&&delete a[e.accAddress][t]}},{key:"setLocalDepositHash",value:function(e,t,a){var n=window.localStorage.getItem(Xc.DepositHash);(n=n?JSON.parse(n):{})[e.accAddress]=Object(d.a)(Object(d.a)({},n[e.accAddress]),{},Object(x.a)({},t,a))}},{key:"clearWalletConnect",value:function(){Za("try to clearWalletConnect...."),localStorage.removeItem(Xc.WalletConnect)}},{key:"setConnectorName",value:function(e){localStorage.setItem(Xc.ConnectorName,e)}},{key:"getConnectorName",value:function(){return localStorage.getItem(Xc.ConnectorName)}},{key:"clearConnectorName",value:function(){Za("try to clearConnectorName"),localStorage.removeItem(Xc.ConnectorName)}},{key:"getHandler",value:function(){var e=sessionStorage.getItem(Xc.Handler);try{if(void 0!==e&&null!==e)return parseInt(e)}catch(t){}}},{key:"setHandler",value:function(e){sessionStorage.setItem(Xc.Handler,e)}},{key:"clearHandler",value:function(){sessionStorage.removeItem(Xc.Handler)}},{key:"checkTimeout",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=localStorage.getItem(Xc.ActiveTime),a=(new Date).getTime();if(null===t||e)localStorage.setItem(Xc.ActiveTime,a.toString());else{var n=new Date(parseInt(t));if(a-n.getTime()>6e5)return Za("TIMEOUT! now:".concat(a," dateTimeStr:").concat(t," delta:").concat(a-n.getTime())),sessionStorage.clear(),localStorage.setItem(Xc.ActiveTime,a.toString()),!0}return!1}},{key:"getAccountId",value:function(){var e=sessionStorage.getItem(Xc.AccountId);try{if(e)return parseInt(e)}catch(t){}}},{key:"setAccountId",value:function(e){sessionStorage.setItem(Xc.AccountId,e.toString())}},{key:"getAccount",value:function(){return sessionStorage.getItem(Xc.Account)}},{key:"setAccount",value:function(e){sessionStorage.setItem(Xc.Account,e)}},{key:"getApikey",value:function(){return sessionStorage.getItem(Xc.Apikey)}},{key:"setApikey",value:function(e){sessionStorage.setItem(Xc.Apikey,e)}},{key:"getEddsakey",value:function(){return sessionStorage.getItem(Xc.Eddsakey)}},{key:"setEddsakey",value:function(e){sessionStorage.setItem(Xc.Eddsakey,e)}},{key:"getAmmOrder",value:function(){var e=localStorage.getItem(Xc.AmmOrder);return e||""}},{key:"setAmmOrder",value:function(e){localStorage.setItem(Xc.AmmOrder,e)}},{key:"clearAmmOrder",value:function(){localStorage.removeItem(Xc.AmmOrder)}},{key:"isHardwareAddress",value:function(e){var t=localStorage.getItem(Xc.HardwareAddresses);return!(!t||!t.includes(e.toLowerCase()))}},{key:"saveHardwareAddress",value:function(e){var t=localStorage.getItem(Xc.HardwareAddresses);if(t){if(!0!==t.includes(e.toLowerCase())){var a=t+","+e.toLowerCase();localStorage.setItem(Xc.HardwareAddresses,a)}}else localStorage.setItem(Xc.HardwareAddresses,e.toLowerCase())}}]),e}();!function(e){e.Click="click",e.Scroll="scroll",e.Mouseover="mouseover"}(cr||(cr={}));var or=[cr.Click,cr.Scroll],ir=Object(en.debounce)((function(){rr.checkTimeout(!0)}),200),sr=function(e){var t=e.children;return Object(g.useEffect)((function(){return or.forEach((function(e){document.addEventListener(e,ir)})),function(){or.forEach((function(e){document.removeEventListener(e,ir)}))}}),[]),Object(fc.jsx)(w.a.Fragment,{children:t})},ur=a(195);var lr=Object(mc.a)("common")((function(e){var t=e.t,a=w.a.useRef(null),n=w.a.useState(10),c=Object(we.a)(n,2),r=c[0],o=c[1],i=function(){var e=_().account,t=e.accountId,a=e.apiKey,n=Object(g.useState)([]),c=Object(we.a)(n,2),r=c[0],o=c[1],i=Object(g.useState)(!0),s=Object(we.a)(i,2),u=s[0],l=s[1],d=function(e){return""===e?B.rb.processing:"processed"===e?B.rb.processed:"processing"===e?B.rb.processing:"received"===e?B.rb.received:B.rb.failed},b=Object(g.useCallback)(Object(k.a)(h.a.mark((function e(){var n,c,r,i,s,u,b,p,m;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(je&&je.userAPI&&t&&a)){e.next=11;break}return e.next=3,Promise.all([je.userAPI.getUserTranferList({accountId:t},a),je.userAPI.getUserDepositHistory({accountId:t},a),je.userAPI.getUserOnchainWithdrawalHistory({accountId:t},a)]);case 3:i=e.sent,s=null===(n=i[0].userTransfers)||void 0===n?void 0:n.map((function(e){return{side:B.tb.transfer,amount:{unit:e.symbol||"",value:Number(Pn(e.symbol,e.amount))},fee:{unit:e.feeTokenSymbol||"",value:Number(_n(e.feeTokenSymbol,e.feeAmount||0))},memo:e.memo||"",time:e.timestamp,txnHash:e.hash,status:d(e.status)}})),u=null===(c=i[1].userDepositHistory)||void 0===c?void 0:c.map((function(e){return{side:B.tb.deposit,symbol:e.symbol,amount:{unit:e.symbol||"",value:Number(Pn(e.symbol,e.amount))},fee:{unit:"",value:0},memo:"",time:e.timestamp,txnHash:e.txHash,status:d(e.status)}})),b=null===(r=i[2].userOnchainWithdrawalHistory)||void 0===r?void 0:r.map((function(e){var t;return{side:B.tb.withdraw,amount:{unit:e.symbol||"",value:Number(Pn(e.symbol,e.amount))},fee:{unit:e.feeTokenSymbol||"",value:Number(null===(t=Pn(e.feeTokenSymbol,e.feeAmount||0))||void 0===t?void 0:t.toFixed(6))},memo:"",time:e.timestamp,txnHash:e.txHash,status:d(e.status)}})),p=[].concat(Object(U.a)(null!==s&&void 0!==s?s:[]),Object(U.a)(null!==u&&void 0!==u?u:[]),Object(U.a)(null!==b&&void 0!==b?b:[])),m=p.sort((function(e,t){return t.time-e.time})),o(m),l(!1);case 11:case"end":return e.stop()}}),e)}))),[t,a]);return Uc((function(){b()}),[b]),{txs:r,isLoading:u}}(),s=i.txs,u=i.isLoading;return w.a.useEffect((function(){var e,t=null===a||void 0===a||null===(e=a.current)||void 0===e?void 0:e.offsetHeight;t&&o(Math.floor((t-120)/44)-2)}),[a,r]),Object(fc.jsxs)(Nc,{ref:a,children:[Object(fc.jsx)("div",{className:"title",children:t("labelTxnPageTitle")}),Object(fc.jsx)("div",{className:"tableWrapper",children:Object(fc.jsx)(B.sb,Object(d.a)({},Object(d.a)({rawData:s,pagination:{pageSize:r},showFilter:!0,showLoading:u},e)))})]})})),dr=a(1611);var br,pr,mr=["t"],fr=Object(Cc.a)(kc.a)(br||(br=Object(b.a)(["\n    height: 225px;\n\n    > div {\n        position: relative;\n        width: calc(50% - 6px);\n        height: 100%;\n        background: var(--color-box);\n        border-radius: ","px;\n        padding: ","px ","px;\n    }\n"])),(function(e){return e.theme.unit}),(function(e){return 2.5*e.theme.unit}),(function(e){return 3*e.theme.unit})),vr=Object(Cc.a)(kc.a)(pr||(pr=Object(b.a)(["\n    position: absolute;\n    z-index: 10;\n    right: ","px;\n    bottom: ","px;\n"])),(function(e){return 3*e.theme.unit}),(function(e){return 2.5*e.theme.unit})),jr=[{value:"week",key:"1 W"},{value:"all",key:"ALL"}],Or=Object(mc.a)("common")((function(e){var t=e.t,a=Object(f.a)(e,mr),n=Object(g.useRef)(null),c=Object(g.useState)(10),r=Object(we.a)(c,2),o=r[0],i=r[1],u=Object(g.useState)("week"),l=Object(we.a)(u,2),b=l[0],p=l[1],j=Object(g.useState)([]),O=Object(we.a)(j,2),x=O[0],y=O[1],A=Object(g.useState)([]),S=Object(we.a)(A,2),I=S[0],C=S[1],N=_().account.accAddress,T=Dn.getState().walletLayer2.walletLayer2,M=Dn.getState().amm.ammMap.ammMap,E=an().status,D=Object(g.useCallback)(Object(k.a)(h.a.mark((function e(){var t,a,n,c=arguments;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=c.length>0&&void 0!==c[0]?c[0]:7,e.next=3,null===(t=je.walletAPI)||void 0===t?void 0:t.getUserAssets({wallet:N,assetType:be.d.DEX,limit:a});case 3:(n=e.sent)&&n.userAssets.length&&n.userAssets.length&&y(n.userAssets.map((function(e){return{timeStamp:Number(e.createdAt),close:Number(e.amount)}})));case 5:case"end":return e.stop()}}),e)}))),[N]);Object(g.useEffect)((function(){if("UNSET"===E){var e=sc(),t=e&&e.walletMap?Object.keys(e.walletMap):[],a=e&&e.walletMap?Object.values(e.walletMap):[],n=t.map((function(e,t){return{token:e,detail:a[t]}}));C(n)}}),[E]),Object(g.useEffect)((function(){je&&je.walletAPI&&T&&D()}),[T,D]),Object(g.useEffect)((function(){var e,t=null===n||void 0===n||null===(e=n.current)||void 0===e?void 0:e.offsetHeight;t&&i(Math.floor((t-120)/44)-1)}),[n,o]);var P=function(){var e=Object(s.b)(),t=_().account.readyState,a=Object(qc.a)("common").t,n=w.a.useCallback((function(n,c){var r=t===v.a.NO_ACCOUNT;console.log("isNoAccount: ",r,a("depositTitleAndActive"));var o={isShow:n,props:Object(d.a)({title:a(r?"depositTitleAndActive":"depositTitle"),description:"depositAndActiveDescription"},c)};e(Object(B.Lb)(o))}),[e,a,t]),c=w.a.useCallback((function(t,a){return e(Object(B.Nb)({isShow:t,props:Object(d.a)({},a)}))}),[e]),r=w.a.useCallback((function(t,a){return e(Object(B.Ob)({isShow:t,props:Object(d.a)({},a)}))}),[e]);return w.a.useCallback((function(t,a){return e(Object(B.Mb)({isShow:t,props:Object(d.a)({},a)}))}),[e]),{showDeposit:n,showTransfer:c,showWithdraw:r}}(),R=P.showDeposit,L=P.showTransfer,F=P.showWithdraw,K=Object(m.f)(),J=Object(g.useCallback)((function(e){R(!0,{tradeData:{balance:"",belong:e}})}),[R]),W=Object(g.useCallback)((function(e){L(!0,{tradeData:{balance:"",belong:e}})}),[L]),H=Object(g.useCallback)((function(e){F(!0,{tradeData:{balance:"",belong:e}})}),[F]),V=Object(g.useCallback)((function(e,t){K&&K.push("/liquidity/pools/coinPair/".concat(e,"?type=").concat(t))}),[K]),G=Object(g.useCallback)((function(e,t){D("week"===t?7:9999)}),[D]),Y=Dn.getState().system.faitPrices,q=Y?Object.entries(Y).map((function(e){return{token:e[0],detail:e[1]}})):[],z=I.map((function(e){var t;if(!("LP"===e.token.split("-")[0])){var a,n,c,r,o="DAI"===e.token?1:Number(q.find((function(t){return t.token===e.token}))?null===(a=q.find((function(t){return t.token===e.token})))||void 0===a?void 0:a.detail.price:0)/Number(null===(n=q.find((function(e){return"USDT"===e.token})))||void 0===n?void 0:n.detail.price);return{name:e.token,value:Number(Pn(e.token,null===(c=e.detail)||void 0===c||null===(r=c.detail)||void 0===r?void 0:r.total))*o}}var i=e.token.split("-");i.splice(0,1,"AMM");var s=i.join("-"),u=(Object.keys(M).includes(s)&&M[s]&&M[s].amountDollar?(M[s].totalLpToken||0)/M[s].amountDollar:0)*((null===(t=e.detail)||void 0===t?void 0:t.count)||0);return{name:e.token,value:u}})),X=z.filter((function(e){return"LP"===e.name.split("-")[0]})).reduce((function(e,t){return{name:"LP-Token",value:e.value+t.value}}),{name:"LP-Token",value:0}),Q=z.filter((function(e){return"LP"===e.name.split("-")[0]})).length>0?[].concat(Object(U.a)(z.filter((function(e){return"LP"!==e.name.split("-")[0]}))),[X]):z,Z={assetInfo:{totalAsset:z.map((function(e){return e.value})).reduce((function(e,t){return e+t}),0),priceTag:v.G.Dollar},onShowDeposit:J,onShowTransfer:W,onShowWithdraw:H},$=I.map((function(e){var t,a,n,c,r,o,i=Number(null===(t=q.find((function(t){return t.token===e.token})))||void 0===t?void 0:t.detail.price)/Number(null===(a=q.find((function(e){return"USDT"===e.token})))||void 0===a?void 0:a.detail.price);return{token:{type:"LP"===e.token.split("-")[0]?B.nb.lp:B.nb.single,value:e.token},amount:String(Number(Pn(e.token,null===(n=e.detail)||void 0===n?void 0:n.detail.total)).toFixed(6))||v.s,available:String(null===(c=e.detail)||void 0===c?void 0:c.count)||v.s,locked:String(null===(r=e.detail)||void 0===r?void 0:r.detail.locked)||v.s,smallBalance:i*Number(Pn(e.token,null===(o=e.detail)||void 0===o?void 0:o.detail.total))<1}}));return Object(fc.jsxs)(fc.Fragment,{children:[Object(fc.jsx)(kc.a,{children:Object(fc.jsx)(B.l,Object(d.a)({},Object(d.a)(Object(d.a)({t:t},a),Z)))}),Object(fc.jsxs)(fr,{display:"flex",justifyContent:"space-between",alignItems:"center",marginTop:2,children:[Object(fc.jsxs)(dr.a,{component:"div",children:[Object(fc.jsx)(ur.a,{component:"span",color:"textSecondary",variant:"body1",children:t("labelAssetsDistribution")}),Object(fc.jsx)(B.v,{data:T?Q:[]})]}),Object(fc.jsxs)(dr.a,{component:"div",children:[Object(fc.jsx)(ur.a,{component:"span",color:"textSecondary",variant:"body1",children:t("labelTotalAssets")}),Object(fc.jsx)(B.Z,{type:B.q.Trend,data:x}),Object(fc.jsx)(vr,{children:Object(fc.jsx)(B.lb,Object(d.a)({exclusive:!0,size:"small"},Object(d.a)(Object(d.a)({},a),{},{t:t,data:jr,value:b,setValue:p,onChange:G})))})]})]}),Object(fc.jsx)(Nc,{style:{marginTop:"".concat(2*v.rb,"px")},children:Object(fc.jsx)("div",{className:"tableWrapper",ref:n,children:Object(fc.jsx)(B.m,Object(d.a)({},Object(d.a)({rawData:$,pagination:{pageSize:o},showFiliter:!0,onShowDeposit:J,onShowTransfer:W,onShowWithdraw:H,onLpDeposit:V,onLpWithdraw:V},a)))})})]})}));var hr=Object(mc.a)("common")((function(e){var t=w.a.useState(10),a=Object(we.a)(t,2),n=a[0],c=a[1],r=function(){var e=w.a.useState([]),t=Object(we.a)(e,2),a=t[0],n=t[1],c=w.a.useState(!0),r=Object(we.a)(c,2),o=r[0],i=r[1],s=_().account,u=s.accountId,l=s.apiKey,d=Dn.getState().tokenMap.tokenMap,b=w.a.useCallback(Object(k.a)(h.a.mark((function e(){var t;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(je&&je.userAPI&&u&&l&&d)){e.next=5;break}return e.next=3,je.userAPI.getUserTrades({accountId:u},l);case 3:(t=e.sent)&&t.userTrades&&(n(t.userTrades.map((function(e){var t,a,n=e.market.split("-"),c=n[n.length-2],r=n[n.length-1],o=e.side===be.i.Buy?c:r;return{side:e.side===be.i.Buy?v.U.Buy:v.U.Sell,price:{key:c,value:Object(be.J)(e.price).toNumber()},fee:{key:o,value:o?null===(t=Pn(o,e.fee))||void 0===t?void 0:t.toFixed(6):void 0},time:Number(e.tradeTime),amount:{from:{key:c,value:c?Pn(c,e.volume):void 0},to:{key:r,value:c?null===(a=_n(c,e.volume))||void 0===a?void 0:a.times(e.price).toNumber():void 0}}}}))),i(!1));case 5:case"end":return e.stop()}}),e)}))),[u,l,d]);return w.a.useEffect((function(){b()}),[b]),{userTrades:a,showLoading:o}}(),o=r.userTrades,i=r.showLoading,s=w.a.useRef(null),u=e.t;return w.a.useEffect((function(){var e,t=null===s||void 0===s||null===(e=s.current)||void 0===e?void 0:e.offsetHeight;t&&c(Math.floor((t-120)/44)-2)}),[s,n]),Object(fc.jsxs)(Nc,{ref:s,children:[Object(fc.jsx)("div",{className:"title",children:u("labelTradePageTitle")}),Object(fc.jsx)("div",{className:"tableWrapper extraTradeClass",children:Object(fc.jsx)(B.pb,Object(d.a)({},Object(d.a)({rawData:o,showFilter:!0,showLoading:i},e)))})]})}));var kr=["t"],xr=Object(mc.a)("common")((function(e){var t=e.t,a=Object(f.a)(e,kr),n=w.a.useRef(null),c=w.a.useState(10),r=Object(we.a)(c,2),o=r[0],i=r[1],s=function(){var e=w.a.useState([]),t=Object(we.a)(e,2),a=t[0],n=t[1],c=w.a.useState(!0),r=Object(we.a)(c,2),o=r[0],i=r[1],s=Dn.getState().account,u=s.accountId,l=s.apiKey,d=Dn.getState().tokenMap.tokenMap,b=w.a.useCallback((function(e){if(d){var t=Object.keys(d),a=Object.values(d).findIndex((function(t){return t.tokenId===e}));return a>-1?t[a]:""}return""}),[d]),p=w.a.useCallback(Object(k.a)(h.a.mark((function e(){var t,a;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(je.ammpoolAPI&&u&&l)){e.next=5;break}return e.next=3,je.ammpoolAPI.getUserAmmPoolTxs({accountId:u},l);case 3:(t=e.sent)&&t.userAmmPoolTxs&&(a=t.userAmmPoolTxs.map((function(e){var t,a,n,c,r,o,i,s,u,l,d,p;return{side:e.txType===be.b.JOIN?B.g.Join:B.g.Exit,amount:{from:{key:b(null===(t=e.poolTokens[0])||void 0===t?void 0:t.tokenId),value:String(Pn(b(null===(a=e.poolTokens[0])||void 0===a?void 0:a.tokenId),null===(n=e.poolTokens[0])||void 0===n?void 0:n.actualAmount))},to:{key:b(null===(c=e.poolTokens[1])||void 0===c?void 0:c.tokenId),value:String(Pn(b(null===(r=e.poolTokens[1])||void 0===r?void 0:r.tokenId),null===(o=e.poolTokens[1])||void 0===o?void 0:o.actualAmount))}},lpTokenAmount:String(Pn(b(null===(i=e.lpToken)||void 0===i?void 0:i.tokenId),null===(s=e.lpToken)||void 0===s?void 0:s.actualAmount)),fee:{key:b(null===(u=e.poolTokens[1])||void 0===u?void 0:u.tokenId),value:null===(l=Pn(b(null===(d=e.poolTokens[1])||void 0===d?void 0:d.tokenId),null===(p=e.poolTokens[1])||void 0===p?void 0:p.feeAmount))||void 0===l?void 0:l.toFixed(6)},time:e.updatedAt}})),n(a),i(!1));case 5:case"end":return e.stop()}}),e)}))),[u,l,b]);return Object(g.useEffect)((function(){p()}),[p]),{ammRecordList:a,showLoading:o}}(),u=s.ammRecordList,l=s.showLoading;return w.a.useEffect((function(){var e,t=null===n||void 0===n||null===(e=n.current)||void 0===e?void 0:e.offsetHeight;t&&i(Math.floor((t-120)/44)-2)}),[n,o]),Object(fc.jsx)(fc.Fragment,{children:Object(fc.jsxs)(Nc,{ref:n,children:[Object(fc.jsx)("div",{className:"title",children:t("labelAmmPageTitle")}),Object(fc.jsx)("div",{className:"tableWrapper",children:Object(fc.jsx)(B.h,Object(d.a)({},Object(d.a)({rawData:u,pagination:{pageSize:o},showFilter:!0,showLoading:l},a)))})]})})}));var gr,wr,yr,Ar=Object(mc.a)("common")((function(e){var t=w.a.useRef(null),a=w.a.useState(10),n=Object(we.a)(a,2),c=n[0],r=n[1],o=w.a.useState("transactions"),i=Object(we.a)(o,2),s=i[0],u=i[1],l=function(){var e=_().account,t=e.accountId,a=e.apiKey,n=Object(g.useState)([]),c=Object(we.a)(n,2),r=c[0],o=c[1],i=Object(g.useState)(!0),s=Object(we.a)(i,2),u=s[0],l=s[1],d=function(e){return""===e?B.rb.processing:"processed"===e?B.rb.processed:"processing"===e?B.rb.processing:"received"===e?B.rb.received:B.rb.failed},b=Object(g.useCallback)(Object(k.a)(h.a.mark((function e(){var n,c,r,i,s,u,b,p,m;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(je&&je.userAPI&&t&&a)){e.next=11;break}return e.next=3,Promise.all([je.userAPI.getUserTranferList({accountId:t},a),je.userAPI.getUserDepositHistory({accountId:t},a),je.userAPI.getUserOnchainWithdrawalHistory({accountId:t},a)]);case 3:i=e.sent,s=null===(n=i[0].userTransfers)||void 0===n?void 0:n.map((function(e){return{side:B.tb.transfer,amount:{unit:e.symbol||"",value:Number(Pn(e.symbol,e.amount))},fee:{unit:e.feeTokenSymbol||"",value:Number(_n(e.feeTokenSymbol,e.feeAmount||0))},memo:e.memo||"",time:e.timestamp,txnHash:e.hash,status:d(e.status)}})),u=null===(c=i[1].userDepositHistory)||void 0===c?void 0:c.map((function(e){return{side:B.tb.deposit,symbol:e.symbol,amount:{unit:e.symbol||"",value:Number(Pn(e.symbol,e.amount))},fee:{unit:"",value:0},memo:"",time:e.timestamp,txnHash:e.txHash,status:d(e.status)}})),b=null===(r=i[2].userOnchainWithdrawalHistory)||void 0===r?void 0:r.map((function(e){var t;return{side:B.tb.withdraw,amount:{unit:e.symbol||"",value:Number(Pn(e.symbol,e.amount))},fee:{unit:e.feeTokenSymbol||"",value:Number(null===(t=Pn(e.feeTokenSymbol,e.feeAmount||0))||void 0===t?void 0:t.toFixed(6))},memo:"",time:e.timestamp,txnHash:e.txHash,status:d(e.status)}})),p=[].concat(Object(U.a)(null!==s&&void 0!==s?s:[]),Object(U.a)(null!==u&&void 0!==u?u:[]),Object(U.a)(null!==b&&void 0!==b?b:[])),m=p.sort((function(e,t){return t.time-e.time})),o(m),l(!1);case 11:case"end":return e.stop()}}),e)}))),[t,a]);return Uc((function(){b()}),[b]),{txs:r,isLoading:u}}(),b=l.txs,p=l.isLoading,m=function(){var e=w.a.useState([]),t=Object(we.a)(e,2),a=t[0],n=t[1],c=w.a.useState(!0),r=Object(we.a)(c,2),o=r[0],i=r[1],s=_().account,u=s.accountId,l=s.apiKey,d=Dn.getState().tokenMap.tokenMap,b=w.a.useCallback(Object(k.a)(h.a.mark((function e(){var t;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(je&&je.userAPI&&u&&l&&d)){e.next=5;break}return e.next=3,je.userAPI.getUserTrades({accountId:u},l);case 3:(t=e.sent)&&t.userTrades&&(n(t.userTrades.map((function(e){var t,a,n=e.market.split("-"),c=n[n.length-2],r=n[n.length-1],o=e.side===be.i.Buy?c:r;return{side:e.side===be.i.Buy?v.U.Buy:v.U.Sell,price:{key:c,value:Object(be.J)(e.price).toNumber()},fee:{key:o,value:o?null===(t=Pn(o,e.fee))||void 0===t?void 0:t.toFixed(6):void 0},time:Number(e.tradeTime),amount:{from:{key:c,value:c?Pn(c,e.volume):void 0},to:{key:r,value:c?null===(a=_n(c,e.volume))||void 0===a?void 0:a.times(e.price).toNumber():void 0}}}}))),i(!1));case 5:case"end":return e.stop()}}),e)}))),[u,l,d]);return w.a.useEffect((function(){b()}),[b]),{userTrades:a,showLoading:o}}(),f=m.userTrades,j=m.showLoading,O=function(){var e=w.a.useState([]),t=Object(we.a)(e,2),a=t[0],n=t[1],c=w.a.useState(!0),r=Object(we.a)(c,2),o=r[0],i=r[1],s=Dn.getState().account,u=s.accountId,l=s.apiKey,d=Dn.getState().tokenMap.tokenMap,b=w.a.useCallback((function(e){if(d){var t=Object.keys(d),a=Object.values(d).findIndex((function(t){return t.tokenId===e}));return a>-1?t[a]:""}return""}),[d]),p=w.a.useCallback(Object(k.a)(h.a.mark((function e(){var t,a;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(je.ammpoolAPI&&u&&l)){e.next=5;break}return e.next=3,je.ammpoolAPI.getUserAmmPoolTxs({accountId:u},l);case 3:(t=e.sent)&&t.userAmmPoolTxs&&(a=t.userAmmPoolTxs.map((function(e){var t,a,n,c,r,o,i,s,u,l,d,p;return{side:e.txType===be.b.JOIN?B.g.Join:B.g.Exit,amount:{from:{key:b(null===(t=e.poolTokens[0])||void 0===t?void 0:t.tokenId),value:String(Pn(b(null===(a=e.poolTokens[0])||void 0===a?void 0:a.tokenId),null===(n=e.poolTokens[0])||void 0===n?void 0:n.actualAmount))},to:{key:b(null===(c=e.poolTokens[1])||void 0===c?void 0:c.tokenId),value:String(Pn(b(null===(r=e.poolTokens[1])||void 0===r?void 0:r.tokenId),null===(o=e.poolTokens[1])||void 0===o?void 0:o.actualAmount))}},lpTokenAmount:String(Pn(b(null===(i=e.lpToken)||void 0===i?void 0:i.tokenId),null===(s=e.lpToken)||void 0===s?void 0:s.actualAmount)),fee:{key:b(null===(u=e.poolTokens[1])||void 0===u?void 0:u.tokenId),value:null===(l=Pn(b(null===(d=e.poolTokens[1])||void 0===d?void 0:d.tokenId),null===(p=e.poolTokens[1])||void 0===p?void 0:p.feeAmount))||void 0===l?void 0:l.toFixed(6)},time:e.updatedAt}})),n(a),i(!1));case 5:case"end":return e.stop()}}),e)}))),[u,l,b]);return w.a.useEffect((function(){p()}),[p]),{ammRecordList:a,showLoading:o}}(),x=O.ammRecordList,y=O.showLoading;return w.a.useEffect((function(){var e,a=null===t||void 0===t||null===(e=t.current)||void 0===e?void 0:e.offsetHeight;a&&r(Math.floor((a-120)/44)-2)}),[t,c]),Object(fc.jsxs)(Nc,{ref:t,children:[Object(fc.jsxs)(xc.a,{value:s,onChange:function(e,t){return u(t)},"aria-label":"l2-history-tabs",children:[Object(fc.jsx)(gc.a,{label:"Transactions",value:"transactions"}),Object(fc.jsx)(gc.a,{label:"Trades",value:"trades"}),Object(fc.jsx)(gc.a,{label:"AMM Records",value:"ammRecords"})]}),Object(fc.jsx)("div",{className:"tableWrapper",children:"transactions"===s?Object(fc.jsx)(B.sb,Object(d.a)({},Object(d.a)({rawData:b,pagination:{pageSize:c},showFilter:!0,showLoading:p},e))):"trades"===s?Object(fc.jsx)(B.pb,Object(d.a)({},Object(d.a)({rawData:f,showFilter:!0,showLoading:j},e))):Object(fc.jsx)(B.h,Object(d.a)({},Object(d.a)({rawData:x,pagination:{pageSize:c},showFilter:!0,showLoading:y},e)))})]})})),Sr=function(e){e.ammActivityMap;var t=an(),a=t.walletLayer2,n=t.status,c=cn(),r=We().marketArray,o=ne(),i=o.ammMap,s=w.a.useState(void 0),u=Object(we.a)(s,2),l=u[0],d=u[1],b=w.a.useState([]),p=Object(we.a)(b,2),m=p[0],f=p[1],j=w.a.useState([]),O=Object(we.a)(j,2),h=O[0],k=O[1],x=w.a.useCallback((function(){var e,t=sc().walletMap;t&&(null===(e=dc())||void 0===e||e.then((function(e){var t=bc(void 0,e);k(t||[])})));return t}),[sc,dc,bc,r]),g=w.a.useCallback((function(e){return e&&i?Reflect.ownKeys(e).reduce((function(t,a){if(/LP-/i.test(a)){var n,r=a.replace("LP-","AMM-"),o=a.replace("LP-","");void 0!==(n=rc({ammDetail:i[r],walletMap:e,market:o,ammUserRewardMap:c.userRewardsMap}))&&t.push(n)}return t}),[]):[]}),[i,c.userRewardsMap]);return w.a.useEffect((function(){if(n===v.J.UNSET&&o.ammMap){var e=x(),t=g(e);f(t)}}),[n]),w.a.useEffect((function(){if("ERROR"===o.status)o.statusUnset();else if("DONE"===o.status&&(o.statusUnset(),a)){var e=x(),t=g(e);f(t)}}),[o.status]),w.a.useEffect((function(){if("ERROR"===c.status)c.statusUnset();else if("DONE"===c.status){c.statusUnset();var e=function(e){var t=e.userRewardsMap,a=Dn.getState().tokenMap,n=a.coinMap,c=a.idIndex,r=a.tokenMap,o=Dn.getState().system,i=o.faitPrices,s=o.forex;if(t&&c&&n&&r&&i&&s)return Object.keys(t).reduce((function(e,a){if(/AMM-/i.test(a)){var n=a.match(/AMM-(\w+)-(\w+)/i),r=Object(we.a)(n,3),o=r[1],u=r[2],l=t[a],d=nc({coinB:u,coinA:o,ammUserReward:l,idIndex:c,faitPrices:i,forex:s}),b=d.rewardDollar,p=d.rewardYuan,m=d.feeDollar,f=d.feeYuan;e.rewardDollar=b?Object(be.J)(b).plus(e.rewardDollar).toNumber():0,e.rewardYuan=p?Object(be.J)(p).plus(e.rewardYuan).toNumber():0,e.feeDollar=m?Object(be.J)(m).plus(e.feeDollar).toNumber():0,e.feeYuan=f?Object(be.J)(f).plus(e.feeYuan).toNumber():0}return e}),{rewardDollar:0,rewardYuan:0,feeDollar:0,feeYuan:0})}({userRewardsMap:c.userRewardsMap});if(d(e),a&&o.ammMap){var t=g(a);f(t)}}}),[c.status]),{myAmmMarketArray:h,summaryReward:l,myPoolRow:m}},Ir=["t","ammActivityMap"],Cr=Object(Cc.a)(kc.a)(gr||(gr=Object(b.a)(["\n    height: 100%;\n    flex: 1;\n    background: var(--color-box);\n    border-radius: ","px;\n"])),(function(e){return e.theme.unit})),Nr=Object(Cc.a)(hc.a)(wr||(wr=Object(b.a)(["\n    position: relative;\n    width: 100%;\n    background: var(--color-box);\n    border-radius: ","px;\n"])),(function(e){return e.theme.unit})),Tr=(Object(Cc.a)(kc.a)(yr||(yr=Object(b.a)(["\n  position: absolute;\n  z-index: 99;\n  top: ","px;\n  width: 100%;\n"])),(function(e){return e.theme.unit})),Object(mc.a)("common")((function(e){var t=e.t,a=e.ammActivityMap,n=(Object(f.a)(e,Ir),w.a.useState("ALL")),c=Object(we.a)(n,2),r=(c[0],c[1],w.a.useState(1)),o=Object(we.a)(r,2),i=(o[0],o[1]),s=Object(B.Sb)().currency,u=Object(m.f)(),l=w.a.useCallback((function(e,t){u&&u.push("/liquidity/pools/coinPair/".concat(e,"?type=").concat(t))}),[u]),d=(w.a.useCallback((function(e){i(e)}),[]),Sr({ammActivityMap:a})),b=(d.myAmmMarketArray,d.summaryReward),p=d.myPoolRow;return Object(fc.jsxs)(fc.Fragment,{children:[Object(fc.jsxs)(hc.a,{container:!0,spacing:2,children:[Object(fc.jsx)(hc.a,{item:!0,spacing:1,sm:3,children:Object(fc.jsxs)(Nr,{container:!0,paddingY:3,paddingX:4,margin:0,display:"flex",flexDirection:"column",children:[Object(fc.jsxs)(hc.a,{display:"flex",flexDirection:"column",item:!0,children:[Object(fc.jsx)(ur.a,{variant:"h5",color:"textSecondary",fontFamily:"Roboto",children:t("labelTotalPositionValue")}),Object(fc.jsx)(ur.a,{variant:"h3",marginTop:1,fontFamily:"Roboto",children:void 0===b?v.s:s===v.m.dollar?v.G.Dollar+Object(v.gb)(void 0!==b.rewardDollar?b.rewardDollar:0)+Object(v.gb)(void 0!==b.feeDollar?b.feeDollar:0):v.G.Yuan+Object(v.gb)(b.rewardYuan?b.rewardYuan:0)+Object(v.gb)(b.feeYuan?b.feeYuan:0)})]}),Object(fc.jsxs)(hc.a,{display:"flex",flexDirection:"column",marginTop:5,item:!0,children:[Object(fc.jsx)(ur.a,{variant:"h5",component:"h3",fontFamily:"Roboto",color:"textSecondary",children:t("labelFeeRewards")}),Object(fc.jsx)(ur.a,{variant:"h3",marginTop:1,fontFamily:"Roboto",children:void 0===b?v.s:s===v.m.dollar?v.G.Dollar+Object(v.gb)(b.feeDollar?b.feeDollar:0):v.G.Yuan+Object(v.gb)(b.feeYuan?b.feeYuan:0)})]}),Object(fc.jsxs)(hc.a,{display:"flex",flexDirection:"column",marginTop:5,item:!0,children:[Object(fc.jsx)(ur.a,{variant:"h5",component:"h3",fontFamily:"Roboto",color:"textSecondary",children:t("labelMiningRewards")}),Object(fc.jsx)(ur.a,{variant:"h3",marginTop:1,fontFamily:"Roboto",children:void 0===b?v.s:s===v.m.dollar?v.G.Dollar+Object(v.gb)(b.rewardDollar?b.rewardDollar:0):v.G.Yuan+Object(v.gb)(b.rewardYuan?b.rewardYuan:0)})]})]})}),Object(fc.jsx)(hc.a,{item:!0,xs:9,children:Object(fc.jsx)(Cr,{})})]}),Object(fc.jsx)(Tc,{marginY:2,paddingY:2,paddingX:3,flex:1,children:Object(fc.jsxs)(hc.a,{item:!0,xs:12,display:"flex",flexDirection:"column",children:[Object(fc.jsx)(ur.a,{variant:"h5",marginBottom:3,children:t("labelMyAmm")}),Object(fc.jsx)(B.P,{rawData:p,handleDeposit:function(e){var t="".concat(e.ammDetail.coinAInfo.name,"-").concat(e.ammDetail.coinBInfo.name);l(t,"add")},handleWithdraw:function(e){var t="".concat(e.ammDetail.coinAInfo.name,"-").concat(e.ammDetail.coinBInfo.name);l(t,"remove")},handlePageChange:function(){}})]})})]})}))),Mr=a(1745),Er=a(1658),Dr=a(125),Pr=a(881);var _r,Rr,Lr,Br,Ur=["t","i18n"],Fr=Object(Cc.a)(hc.a)(_r||(_r=Object(b.a)(["\n  width: 100%;\n  height: 100%;\n  background: var(--color-box);\n  border-radius: ","px;\n"])),(function(e){return e.theme.unit})),Kr=Object(Cc.a)(Mr.a)((function(e){var t=e.theme;return{"& .Mui-checked":{color:t.colorBase.textPrimary,"& + .MuiSwitch-track.MuiSwitch-track":{border:"solid ".concat(t.colorBase.success)},"& .MuiSwitch-thumb":{backgroundColor:t.colorBase.success}},"& .MuiSwitch-track":{border:"solid ".concat(t.colorBase.error),opacity:1},"& .MuiSwitch-thumb":{backgroundColor:t.colorBase.error}}})),Jr=function(e){var t=e.t,a=e.currency,n=e.label,c=e.handleChange,r=w.a.useState(a||v.m.dollar),o=Object(we.a)(r,2),i=o[0],s=o[1],u=w.a.useCallback((function(e){s(e.target.value),c&&c(e.target.value)}),[c]);return Object(fc.jsxs)(B.R,{"aria-label":t(n),IconComponent:v.p,labelId:"language-selected",id:"language-selected",value:i,autoWidth:!0,onChange:u,children:[Object(fc.jsxs)(B.S,{value:v.m.dollar,children:["$ ",t("labelUSDollar")]}),Object(fc.jsxs)(B.S,{value:v.m.yen,children:["\xa5 ",t("labelCNYYuan")]})]})},Wr=Object(Cc.a)(wc.a)(Rr||(Rr=Object(b.a)(["\n  margin: ","px 0 ","px 0px;\n"])),(function(e){return e.theme.unit}),(function(e){return e.theme.unit})),Hr=(Object(Cc.a)(wc.a)(Lr||(Lr=Object(b.a)(["\n  margin: 0;\n  flex: 1;\n  width: 1px;\n  height: ","px;\n  background: var(--color-divide)\n"])),(function(e){return 3*e.theme.unit})),Object(mc.a)(["common","layout"])((function(e){var t=e.t,a=e.i18n,n=Object(f.a)(e,Ur),c=Object(Dr.f)(),r=Object(B.Sb)(),o=r.setUpColor,i=r.setLanguage,u=r.setCurrency,l=r.currency,b=r.upColor,p=a.language;(function(){var e=Object(s.c)((function(e){return e.account}));return{exportAccInfo:Object(g.useCallback)((function(){if(e.readyState===v.a.ACTIVATED){var t={address:e.accAddress,accountId:e.accountId,nonce:e.level,apiKey:e.apiKey,publicX:e.publicKey.x,publicY:e.publicKey.y,privateKey:e.eddsaKey};Object(Pr.a)({data:t,fileName:"accountInfo",exportType:"json"}),Za("exportFromJSON:",t)}}),[e])}})().exportAccInfo;return Object(fc.jsxs)(hc.a,{container:!0,direction:"column",justifyContent:"space-between",alignItems:"stretch",flexWrap:"nowrap",children:[Object(fc.jsx)(ur.a,{variant:"h5",component:"h3",paddingLeft:2,children:t("labelTitlePreferences")}),Object(fc.jsx)(Fr,{item:!0,xs:12,display:"flex",flexDirection:"column",marginY:2,paddingY:3,children:Object(fc.jsxs)(kc.a,{component:"section",display:"flex",flexDirection:"column",children:[Object(fc.jsxs)(hc.a,{container:!0,display:"flex",flexDirection:"row",justifyContent:"stretch",alignItems:"flex-start",paddingX:3,marginBottom:2,children:[Object(fc.jsx)(hc.a,{item:!0,xs:7,display:"flex",flexDirection:"column",children:Object(fc.jsx)(ur.a,{variant:"body1",component:"p",children:t("labelLanguage")})}),Object(fc.jsx)(hc.a,{item:!0,xs:5,display:"flex",flexDirection:"column",justifyContent:"space-evenly",alignItems:"flex-end",alignSelf:"stretch",children:Object(fc.jsx)(hc.a,{item:!0,children:Object(fc.jsx)(B.o,Object(d.a)({},Object(d.a)(Object(d.a)({t:t},n),{},{language:p,label:"languageSetting",handleChange:function(e){i(e),a.changeLanguage(e)}})))})})]}),Object(fc.jsx)(Wr,{}),Object(fc.jsxs)(hc.a,{container:!0,display:"flex",flexDirection:"row",justifyContent:"stretch",alignItems:"flex-start",paddingX:3,marginY:2,children:[Object(fc.jsx)(hc.a,{item:!0,xs:7,display:"flex",flexDirection:"column",children:Object(fc.jsx)(ur.a,{variant:"body1",component:"p",children:t("labelCurrency")})}),Object(fc.jsx)(hc.a,{item:!0,xs:5,display:"flex",flexDirection:"column",justifyContent:"space-evenly",alignItems:"flex-end",alignSelf:"stretch",children:Object(fc.jsx)(hc.a,{item:!0,children:Object(fc.jsx)(Jr,Object(d.a)({},Object(d.a)(Object(d.a)({t:t},n),{},{currency:l,label:"currencySetting",handleChange:function(e){u(e)}})))})})]}),Object(fc.jsx)(Wr,{}),Object(fc.jsxs)(hc.a,{container:!0,display:"flex",flexDirection:"row",justifyContent:"stretch",alignItems:"flex-start",paddingX:3,marginTop:2,children:[Object(fc.jsx)(hc.a,{item:!0,xs:7,display:"flex",flexDirection:"column",children:Object(fc.jsx)(ur.a,{variant:"body1",component:"p",children:t("labelColors")})}),Object(fc.jsxs)(hc.a,{item:!0,xs:5,display:"flex",flexDirection:"row",justifyContent:"flex-end",alignItems:"center",alignSelf:"stretch",children:[Object(fc.jsx)(ur.a,{variant:"body1",component:"span",paddingX:2,children:Object(fc.jsxs)(Er.a,{i18nKey:"whichColorIsUp",children:[Object(fc.jsxs)("span",{style:{textTransform:"capitalize",color:b===v.V.green?c.colorBase.success:c.colorBase.error},children:[{up:b===v.V.green?t("labelgreen"):t("labelred")}," up"]}),"and ",Object(fc.jsxs)("span",{style:{textTransform:"capitalize",color:b===v.V.green?c.colorBase.error:c.colorBase.success},children:[{down:b===v.V.green?t("labelred"):t("labelgreen")}," down"]})]})}),Object(fc.jsx)(Kr,{checked:b===v.V.green,color:"default",onChange:function(e){e.target.checked?o(v.V.green):o(v.V.red)}})]})]})]})})]})}))),Vr=["t"],Gr=v.pb,Yr=(Object(Cc.a)(kc.a)(Br||(Br=Object(b.a)(["\n  ","\n\n"])),(function(e){var t=e.theme;return"\n    background: var(--color-box);\n    width: 100%;\n    min-width:auto;\n    ".concat(t.border.defaultFrame({c_key:"blur"}),";\n    & > div{\n      background-color:initial;\n      border:0;\n      width:auto;\n      min-width: var(--swap-box-width);\n      max-width: 520px;\n    }\n    ")})),Object(mc.a)(["common"],{withRef:!0})((function(e){var t,a=e.t,n=_().status,c=w.a.useState(void 0),r=Object(we.a)(c,2),o=r[0],i=r[1],s=Object.assign(qn(Vn),(t={},Object(x.a)(t,v.bb.NO_ACCOUNT,[function(){return"depositTitleAndActive"}]),Object(x.a)(t,v.bb.ERROR_NETWORK,[function(){return"depositTitleAndActive"}]),t));w.a.useEffect((function(){n===v.J.UNSET&&i(Hn(s))}),[n,v.mb.language]);var u=Object.assign(qn(Gn),{});return Object(fc.jsx)(B.p,{variant:"contained",size:"large",color:"primary",fullWidth:!0,style:{maxWidth:"280px"},onClick:function(){Hn(u,[])},children:a(o)})}))),qr=Object(mc.a)(["layout","common"],{withRef:!0})(B.bb),zr=function(){var e,t=Object(m.h)("/layer2/:item"),a=_().account,n=Object(qc.a)(),c=n.t,r=(Object(f.a)(n,Vr),null!==(e=null===t||void 0===t?void 0:t.params.item)&&void 0!==e?e:"assets"),o=w.a.useMemo((function(){switch(a.readyState){case v.a.UN_CONNECT:return Object(fc.jsxs)(kc.a,{flex:1,display:"flex",justifyContent:"center",flexDirection:"column",alignItems:"center",children:[Object(fc.jsx)(ur.a,{marginY:3,variant:"h1",children:c("describeTitleConnectToWallet")}),Object(fc.jsx)(Yr,{})]});case v.a.LOCKED:return Object(fc.jsxs)(kc.a,{flex:1,display:"flex",justifyContent:"center",flexDirection:"column",alignItems:"center",children:[Object(fc.jsx)(ur.a,{marginY:3,variant:"h1",children:c("describeTitleLocked")}),Object(fc.jsx)(Yr,{})]});case v.a.NO_ACCOUNT:return Object(fc.jsxs)(kc.a,{flex:1,display:"flex",justifyContent:"center",flexDirection:"column",alignItems:"center",children:[Object(fc.jsx)(ur.a,{marginY:3,variant:"h1",children:c("describeTitleNoAccount")}),Object(fc.jsx)(Yr,{})]});case v.a.DEPOSITING:return Object(fc.jsxs)(kc.a,{flex:1,display:"flex",justifyContent:"center",flexDirection:"column",alignItems:"center",children:[Object(fc.jsx)(v.B,{color:"primary",style:{width:60,height:60}}),Object(fc.jsx)(ur.a,{marginY:3,variant:"h1",children:c("describeTitleOpenAccounting")})]});case v.a.ERROR_NETWORK:return Object(fc.jsx)(kc.a,{flex:1,display:"flex",justifyContent:"center",flexDirection:"column",alignItems:"center",children:Object(fc.jsx)(ur.a,{marginY:3,variant:"h1",children:c("describeTitleOnErrorNetwork",{connectName:a.connectName})})});case v.a.ACTIVATED:return Object(fc.jsxs)(fc.Fragment,{children:[Object(fc.jsx)(kc.a,{width:"200px",display:"flex",justifyContent:"stretch",marginRight:3,marginBottom:2,children:Object(fc.jsx)(B.ab,{children:Object(fc.jsx)(qr,{selected:r,subMenu:Gr})})}),Object(fc.jsxs)(kc.a,{minHeight:420,display:"flex",alignItems:"stretch",flexDirection:"column",marginTop:0,flex:1,children:["assets"===r&&Object(fc.jsx)(Or,{}),"my-liquidity"===r&&Object(fc.jsx)(Tr,{}),"history"===r&&Object(fc.jsx)(Ar,{}),"transactions"===r&&Object(fc.jsx)(lr,{}),"trades"===r&&Object(fc.jsx)(hr,{}),"ammRecords"===r&&Object(fc.jsx)(xr,{}),"setting"===r&&Object(fc.jsx)(Hr,{})]})]})}}),[c,a.readyState,r]);return Object(fc.jsx)(fc.Fragment,{children:o})},Xr=a(1720),Qr=a(1608);var Zr,$r,eo,to,ao,no,co=["t","ammActivityMap"],ro=Object(Cc.a)(kc.a)(Zr||(Zr=Object(b.a)(["\n    flex: 1;\n    display: flex;\n    flex-direction: column;\n"]))),oo=Object(Cc.a)(kc.a)($r||($r=Object(b.a)(["\n    width: 100%;\n    height: 100%;\n    flex: 1;\n    background: var(--color-box);\n    border-radius: ","px;\n\n    .rdg {\n        flex: 1;\n    }\n\n"])),(function(e){return e.theme.unit})),io=Object(mc.a)("common")((function(e){var t=e.t,a=(e.ammActivityMap,Object(f.a)(e,co),w.a.useRef(null)),n=w.a.useState(10),c=Object(we.a)(n,2),r=c[0],o=c[1],i=w.a.useState(""),s=Object(we.a)(i,2),u=s[0],l=s[1],b=function(e){var t=e.pageSize,a=w.a.useState([]),n=Object(we.a)(a,2),c=n[0],r=n[1],o=w.a.useState(1),i=Object(we.a)(o,2),s=i[0],u=i[1],l=We().coinMap,b=w.a.useRef(-1),p=ne(),m=p.ammMap,f=p.status,j=Xa(),O=j.tickerMap,h=j.status,k=j.updateTickers,x=nn(),g=(x.status,x.statusUnset,w.a.useCallback((function(e){try{var t=qn(m);for(var a in e)t["AMM-"+a]&&(t["AMM-"+a].tradeFloat=Object(d.a)(Object(d.a)({},t["AMM-"+a].tradeFloat),e[a]));r(Object.keys(t).map((function(e){return l&&(t[e].coinAInfo=l[t[e].coinA],t[e].coinBInfo=l[t[e].coinB]),t[e]})))}catch(n){throw new v.n(Object(d.a)(Object(d.a)({},v.t.NO_TOKEN_MAP),{},{options:n}))}}),[m])),y=w.a.useCallback((function(e){k(e),-1!==b.current&&clearTimeout(b.current),b.current=setTimeout((function(){y(e)}),1e3)}),[k]);w.a.useEffect((function(){return function(){clearTimeout(b.current)}}),[b.current]);var A=w.a.useCallback((function(e){if(u(e),m&&Object.keys(m).length>0){for(var a=[],n=(s-1)*t;n<Object.keys(m).length&&n<(s-1)*t+t;n++)a.push(Object.keys(m)[n]);y(a)}}),[m,t]);return w.a.useEffect((function(){m&&0!==Object.keys(m).length&&A(s)}),[]),w.a.useEffect((function(){h===v.J.UNSET&&g(O)}),[h]),w.a.useEffect((function(){f===v.J.UNSET&&A(1)}),[f,A]),{page:s,rawData:c,updateTickersUI:A}}({pageSize:r}),p=b.updateTickersUI,m=b.rawData,j=b.page;w.a.useEffect((function(){var e,t=null===a||void 0===a||null===(e=a.current)||void 0===e?void 0:e.offsetHeight;t&&o(Math.floor((t-120)/44)-1)}),[a,r]);var O=w.a.useCallback((function(){return u?m.filter((function(e){var t=e.coinAInfo.name.toLowerCase(),a=e.coinBInfo.name.toLowerCase(),n=u.toLowerCase();return t.includes(n)||a.includes(n)})):m}),[u,m]),h=w.a.useCallback((function(e){p(e)}),[p]);return Object(fc.jsx)(fc.Fragment,{children:Object(fc.jsxs)(ro,{children:[Object(fc.jsx)(kc.a,{marginBottom:3,children:Object(g.createElement)(Xr.a,{placeholder:t("labelFilter"),value:u,onChange:function(e){var t;l(null===(t=e.currentTarget)||void 0===t?void 0:t.value)},key:"search",className:"search","aria-label":"search",startAdornment:Object(fc.jsx)(Qr.a,{position:"start",children:Object(fc.jsx)(v.K,{})})})}),Object(fc.jsx)(oo,{display:"flex",flexDirection:"column",ref:a,children:Object(fc.jsx)(B.T,{rawData:O(),handlePageChange:h,page:j,pagination:{pageSize:r},showFilter:!1,showLoading:!m.length})})]})})})),so=a(1712),uo=a(1730),lo=a(1718),bo=["pair","walletMap","ammType","snapShotData"],po=function(e){var t=e.pair,a=(e.walletMap,e.ammType),n=e.snapShotData,c=Object(f.a)(e,bo),r=function(e){var t,a=e.pair,n=e.ammType,c=e.snapShotData,r=Object(g.useState)(!1),o=Object(we.a)(r,2),i=o[0],s=o[1],u=Object(g.useState)(),l=Object(we.a)(u,2),b=l[0],p=l[1],m=an().delayAndUpdateWalletLayer2,f=Object(qc.a)("common").t,j=We(),O=j.coinMap,y=j.tokenMap,A=ne().ammMap,S=_(),I=S.account,C=S.status,N=w.a.useState(),T=Object(we.a)(N,2),M=T[0],E=T[1],D=w.a.useRef(-1),P=w.a.useState({coinA:{belong:void 0},coinB:{belong:void 0},slippage:.5}),R=Object(we.a)(P,2),L=R[0],B=R[1],U=w.a.useState({coinA:{belong:void 0},coinB:{belong:void 0},slippage:.5}),F=Object(we.a)(U,2),K=F[0],J=F[1],W=w.a.useState(void 0),H=Object(we.a)(W,2),V=H[0],G=H[1],Y=w.a.useState(void 0),q=Object(we.a)(Y,2),z=q[0],X=q[1],Q=w.a.useCallback(function(){var e=Object(k.a)(h.a.mark((function e(t,a){var r;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:Za("initAmmData:",I.accAddress,a,t),r=Rn({pair:t,ammType:n,_ammCalcData:{},tokenMap:y,coinMap:O,walletMap:a,ammMap:A,tickerData:null===c||void 0===c?void 0:c.tickerData,ammPoolsBalance:null===c||void 0===c?void 0:c.ammPoolsBalance}),E(Object(d.a)(Object(d.a)({},M),r)),r.myCoinA&&(B({coinA:Object(d.a)(Object(d.a)({},r.myCoinA),{},{tradeValue:void 0}),coinB:Object(d.a)(Object(d.a)({},r.myCoinB),{},{tradeValue:void 0}),slippage:.5}),J({coinA:Object(d.a)(Object(d.a)({},r.lpCoinA),{},{tradeValue:void 0}),coinB:Object(d.a)(Object(d.a)({},r.lpCoinB),{},{tradeValue:void 0}),slippage:.5}));case 4:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),[c,O,y,M,A,n,E,B,J]),Z=Object(g.useState)(),$=Object(we.a)(Z,2),ee=$[0],te=$[1],ae=w.a.useCallback(Object(k.a)(h.a.mark((function e(){var t,n,c,r,o,i,s,u,l,d,b,m,v;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((null===(t=a.coinAInfo)||void 0===t?void 0:t.simpleName)&&(null===(n=a.coinBInfo)||void 0===n?void 0:n.simpleName)&&je.ammpoolAPI){e.next=3;break}return p(f("labelAmmJoinFailed")),e.abrupt("return");case 3:if(c=Dn.getState().tokenMap,r=c.marketArray,o=c.marketMap,i=Dn.getState().amm.ammMap.ammMap,s=Object(be.z)(r,a.coinAInfo.simpleName,a.coinBInfo.simpleName),u=s.market,l=s.amm,u&&l&&o){e.next=8;break}return e.abrupt("return");case 8:return d=i[l],b={poolAddress:d.address},e.next=12,je.ammpoolAPI.getAmmPoolSnapshot(b);case 12:if(m=e.sent){e.next=16;break}return Za("err res:",m),e.abrupt("return");case 16:v=m.ammPoolSnapshot,te(v);case 18:case"end":return e.stop()}}),e)}))),[a,A]);w.a.useEffect((function(){return-1!==D.current&&clearInterval(D.current),D.current=setInterval((function(){ae()}),1e4),ae(),function(){clearInterval(D.current)}}),[D.current]);var ce=Object(g.useState)(),re=Object(we.a)(ce,2),oe=re[0],ie=re[1],se=Object(g.useState)(),ue=Object(we.a)(se,2),le=ue[0],de=ue[1],pe=_().account;pe.accountId,pe.apiKey,Uc(Object(k.a)(h.a.mark((function e(){var t,n,c,r,o,i,s,u,l,b,p,m;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(C!==v.J.UNSET){e.next=23;break}if(c=Hn(Vn),G(c),X(c),je.userAPI&&(null===(t=a.coinBInfo)||void 0===t?void 0:t.simpleName)&&I.readyState===v.a.ACTIVATED&&M&&y){e.next=6;break}return e.abrupt("return");case 6:return r=y[a.coinBInfo.simpleName],o={accountId:I.accountId,requestType:be.g.AMM_JOIN,tokenSymbol:a.coinBInfo.simpleName},e.next=10,je.userAPI.getOffchainFeeAmt(o,I.apiKey);case 10:return i=e.sent,s=i.fees,ie(s),u=be.J(null===(n=s[a.coinBInfo.simpleName])||void 0===n?void 0:n.fee).div("1e"+r.decimals).toString()+" "+a.coinBInfo.simpleName,l={accountId:I.accountId,requestType:be.g.AMM_EXIT,tokenSymbol:a.coinBInfo.simpleName},e.next=17,je.userAPI.getOffchainFeeAmt(l,I.apiKey);case 17:b=e.sent,p=b.fees,de(p),m=be.J(p[a.coinBInfo.simpleName].fee).div("1e"+r.decimals).toString()+" "+a.coinBInfo.simpleName,Za("-> feeJoin:",u," feeExit:",m),E(Object(d.a)(Object(d.a)({},M),{},{feeJoin:u,feeExit:m}));case 23:case"end":return e.stop()}}),e)}))),[ie,de,E,G,X,C,I.readyState,I.apiKey,I.accountId,null===(t=a.coinBInfo)||void 0===t?void 0:t.simpleName,y,M]);var me=Object(g.useState)(),fe=Object(we.a)(me,2),ve=fe[0],Oe=fe[1],he=w.a.useCallback(Object(en.debounce)(function(){var e=Object(k.a)(h.a.mark((function e(t,a,n,c){var r,o,i,s,u,l,d,b,p,m,f,v,j,O,k,x,g,w,A,S,C,N,T,M;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t&&y&&t.coinA.belong&&t.coinB.belong&&c&&n&&(null===I||void 0===I?void 0:I.accAddress)){e.next=2;break}return e.abrupt("return");case 2:if(Za("handlerJoinInDebounce",t,a),r=t.slippage,o=be.J(r).div(100).toString(),i="coinA"===a,s=Dn.getState().tokenMap,u=s.idIndex,l=s.marketArray,d=s.marketMap,b=Dn.getState().amm.ammMap.ammMap,p=Object(be.z)(l,t.coinA.belong,t.coinB.belong),m=p.market,f=p.amm,m&&f&&d){e.next=11;break}return e.abrupt("return");case 11:v=d[m],j=b[f],O=y[t.coinA.belong],k=y[t.coinB.belong],x=c.pooled[0],g=c.pooled[1],w=t.coinA.tradeValue?be.J(t.coinA.tradeValue).times(O.decimals).toFixed(0,0):"0",(A=be.p(w,i,x,g)).output,A.ratio,S=t.coinA.tradeValue?t.coinA.tradeValue.toString():0,C=t.coinB.tradeValue?t.coinB.tradeValue.toString():0,N=i?S:C,T=Object(be.H)(N,i,o,I.accAddress,n,b[f],c,y,u,0,0),M=T.request,i?t.coinB.tradeValue=parseFloat(Object(be.J)(M.joinTokens.pooled[1].volume).div("1e"+k.decimals).toFixed(v.precisionForPrice)):t.coinA.tradeValue=parseFloat(Object(be.J)(M.joinTokens.pooled[0].volume).div("1e"+O.decimals).toFixed(v.precisionForPrice)),B({coinA:t.coinA,coinB:t.coinB,slippage:r}),Oe({ammInfo:j,request:M});case 26:case"end":return e.stop()}}),e)})));return function(t,a,n,c){return e.apply(this,arguments)}}(),v.ib.wait),[null===I||void 0===I?void 0:I.accAddress,y]),ke=w.a.useCallback(function(){var e=Object(k.a)(h.a.mark((function e(t,a){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,he(t,a,oe,ee);case 2:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),[oe,he,ee]),xe=w.a.useCallback(function(){var e=Object(k.a)(h.a.mark((function e(t){var a,n,c,r,o,i,u,l,b,v;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Pe(!0),je.ammpoolAPI&&je.userAPI&&ve&&(null===I||void 0===I||null===(a=I.eddsaKey)||void 0===a?void 0:a.sk)){e.next=7;break}return Za(" onAmmJoin ammpoolAPI:",je.ammpoolAPI,"joinRequest:",ve),p(f("labelJoinAmmFailed")),s(!0),Pe(!1),e.abrupt("return");case 7:return n=ve.ammInfo,c=ve.request,r={chainId:Dn.getState().system.chainId,ammName:n.__rawConfig__.name,poolAddress:n.address,eddsaKey:I.eddsaKey.sk},e.prev=9,i={accountId:I.accountId,sellTokenId:c.joinTokens.pooled[0].tokenId},e.next=13,je.userAPI.getNextStorageId(i,I.apiKey);case 13:return u=e.sent,l={accountId:I.accountId,sellTokenId:c.joinTokens.pooled[1].tokenId},e.next=17,je.userAPI.getNextStorageId(l,I.apiKey);case 17:return b=e.sent,c.storageIds=[u.offchainId,b.offchainId],B(Object(d.a)(Object(d.a)({},L),{coinA:Object(d.a)(Object(d.a)({},L.coinA),{},{tradeValue:0}),coinB:Object(d.a)(Object(d.a)({},L.coinB),{},{tradeValue:0})})),e.next=22,je.ammpoolAPI.joinAmmPool(c,r,I.apiKey);case 22:if(v=e.sent,Za("join ammpool response:",v),!(null===(o=v.joinAmmPoolResult)||void 0===o?void 0:o.resultInfo)){e.next=28;break}p(f("labelJoinAmmFailed")),e.next=31;break;case 28:return p(f("labelJoinAmmSuccess")),e.next=31,m();case 31:e.next=37;break;case 33:e.prev=33,e.t0=e.catch(9),Object(be.s)(e.t0),p(f("labelJoinAmmFailed"));case 37:return e.prev=37,s(!0),Pe(!1),e.finish(37);case 41:t.__cache__&&Yn(t.__cache__);case 42:case"end":return e.stop()}}),e,null,[[9,33,37,41]])})));return function(t){return e.apply(this,arguments)}}(),[ve,L,I,m,f]),ge=Object.assign(qn(Gn),Object(x.a)({},v.bb.ACTIVATED,[xe])),ye=w.a.useCallback((function(e){Hn(ge,[e])}),[ge]),Ae=Object(g.useState)(),Se=Object(we.a)(Ae,2),Ie=Se[0],Ce=Se[1],Ne=w.a.useCallback(Object(en.debounce)(function(){var e=Object(k.a)(h.a.mark((function e(t,a,n,c){var r,o,i,s,u,l,d,b,p,m,f,v,j,O,k,x,g,w,A,S,C,N;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(y&&t.coinA.belong&&t.coinB.belong&&c&&n&&(null===I||void 0===I?void 0:I.accAddress)&&void 0!==t.coinA.tradeValue&&void 0!==t.coinB.tradeValue){e.next=2;break}return e.abrupt("return");case 2:if(Za("handleExitInDebounce",t,a),r=t.slippage,o=be.J(r).div(100).toString(),i="coinA"===a,s=Dn.getState().tokenMap,u=s.idIndex,l=s.marketArray,d=s.marketMap,b=Dn.getState().amm.ammMap.ammMap,p=Object(be.z)(l,t.coinA.belong,t.coinB.belong),m=p.market,f=p.amm,m&&f&&d){e.next=11;break}return e.abrupt("return");case 11:v=d[m],j=b[f],O=y[t.coinA.belong],k=y[t.coinB.belong],x=c.pooled[0],g=c.pooled[1],w=t.coinA.tradeValue?be.J(t.coinA.tradeValue).times(O.decimals).toFixed(0,0):"0",(A=be.p(w,i,x,g)).output,A.ratio,S=i?t.coinA.tradeValue.toString():t.coinB.tradeValue.toString(),C=Object(be.G)(S,i,o,I.accAddress,n,b[f],c,y,u,0),N=C.request,i?t.coinB.tradeValue=parseFloat(Object(be.J)(N.exitTokens.unPooled[1].volume).div("1e"+k.decimals).toFixed(v.precisionForPrice)):t.coinA.tradeValue=parseFloat(Object(be.J)(N.exitTokens.unPooled[0].volume).div("1e"+O.decimals).toFixed(v.precisionForPrice)),J({coinA:t.coinA,coinB:t.coinB,slippage:r}),Ce({rawVal:S,ammInfo:j,request:N});case 24:case"end":return e.stop()}}),e)})));return function(t,a,n,c){return e.apply(this,arguments)}}(),v.ib.wait),[null===I||void 0===I?void 0:I.accAddress,y]),Te=w.a.useCallback(function(){var e=Object(k.a)(h.a.mark((function e(t,a){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ne(t,a,le,ee);case 2:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),[le,ee,Ne]),Me=Object(g.useState)(!1),Ee=Object(we.a)(Me,2),De=Ee[0],Pe=Ee[1],_e=Object(g.useState)(!1),Re=Object(we.a)(_e,2),Le=Re[0],Be=Re[1],Ue=w.a.useCallback(function(){var e=Object(k.a)(h.a.mark((function e(t){var a,n,c,r,o,i,u,l;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Be(!0),Za("removeAmmCalculator props:",t),je.ammpoolAPI&&je.userAPI&&Ie&&(null===I||void 0===I||null===(a=I.eddsaKey)||void 0===a?void 0:a.sk)){e.next=8;break}return Za(" onExit ammpoolAPI:",je.ammpoolAPI,"exitRequest:",Ie),p(f("labelExitAmmFailed")),s(!0),Be(!1),e.abrupt("return");case 8:return n=Ie.ammInfo,c=Ie.request,r={chainId:Dn.getState().system.chainId,ammName:n.__rawConfig__.name,poolAddress:n.address,eddsaKey:I.eddsaKey.sk},o={accountId:I.accountId,sellTokenId:c.exitTokens.burned.tokenId},e.next=13,je.userAPI.getNextStorageId(o,I.apiKey);case 13:return i=e.sent,c.storageId=i.offchainId,e.prev=15,Za("exit req:",c),J(Object(d.a)(Object(d.a)({},K),{coinA:Object(d.a)(Object(d.a)({},K.coinA),{},{tradeValue:0}),coinB:Object(d.a)(Object(d.a)({},K.coinB),{},{tradeValue:0})})),e.next=20,je.ammpoolAPI.exitAmmPool(c,r,I.apiKey);case 20:if(l=e.sent,Za("exit ammpool response:",l),!(null===(u=l.exitAmmPoolResult)||void 0===u?void 0:u.resultInfo)){e.next=26;break}p(f("labelExitAmmFailed")),e.next=29;break;case 26:return p(f("labelExitAmmSuccess")),e.next=29,m();case 29:e.next=35;break;case 31:e.prev=31,e.t0=e.catch(15),Object(be.s)(e.t0),p(f("labelExitAmmFailed"));case 35:return e.prev=35,s(!0),Be(!1),e.finish(35);case 39:case"end":return e.stop()}}),e,null,[[15,31,35,39]])})));return function(t){return e.apply(this,arguments)}}(),[Ie,K,m,I,f]),Fe=Object.assign(qn(Gn),Object(x.a)({},v.bb.ACTIVATED,[Ue])),Ke=w.a.useCallback((function(e){Za("onAmmRemoveClick, exitRequest:",Ie," ammExitData:",K),Hn(Fe,[e])}),[Ie,K,Fe]),Je=an().status;return Uc((function(){if(Je===v.J.UNSET&&a&&c){var e=sc().walletMap;Q(a,e)}}),[Je,a,c,null===I||void 0===I?void 0:I.accAddress]),{ammAlertText:b,ammToastOpen:i,setAmmToastOpen:s,ammCalcData:M,ammJoinData:L,ammExitData:K,isJoinLoading:De,isExitLoading:Le,handleJoinAmmPoolEvent:ke,handleExitAmmPoolEvent:Te,onAmmRemoveClick:Ke,onAmmAddClick:ye,ammDepositBtnI18nKey:V,ammWithdrawBtnI18nKey:z}}({pair:t,snapShotData:n,ammType:a||B.e.Deposit}),o=r.ammAlertText,i=r.ammToastOpen,s=r.setAmmToastOpen,u=r.ammCalcData,l=r.ammJoinData,b=r.ammExitData,p=r.handleJoinAmmPoolEvent,m=r.handleExitAmmPoolEvent,j=r.onAmmRemoveClick,O=r.onAmmAddClick,y=r.isJoinLoading,A=r.isExitLoading,S=r.ammDepositBtnI18nKey,I=r.ammWithdrawBtnI18nKey,C=w.a.useCallback((function(){return!(n&&n.tickerData&&n.ammPoolsBalance||void 0!==S||void 0!==I)||(!(!y&&!A)||void 0)}),[n,I,I,y,A]);return Object(fc.jsxs)(fc.Fragment,{children:[Object(fc.jsx)(B.kb,{alertText:o,open:i,autoHideDuration:L,setOpen:s}),t?Object(fc.jsx)(B.d,Object(d.a)(Object(d.a)({},Object(d.a)({},c)),{},{ammDepositData:l,ammWithdrawData:b,ammCalcData:u,handleAmmAddChangeEvent:p,handleAmmRemoveChangeEvent:m,onAmmRemoveClick:j,onAmmAddClick:O,tabSelected:a||B.e.Deposit,ammDepositBtnI18nKey:S,ammWithdrawBtnI18nKey:I,ammDepositBtnStatus:C()?B.ob.LOADING:B.ob.AVAILABLE,ammWithdrawBtnStatus:C()?B.ob.LOADING:B.ob.AVAILABLE})):Object(fc.jsx)(kc.a,{width:"var(--swap-box-width)"})]})},mo=function(e){var t=e.ammMap,a=e.coinMap,n=e.ammActivityMap,c=e.ammKey;if(t&&a){var r=qn(t[c]),o=n[c];return r&&r.coinA&&(r.myCoinA=a[r.coinA],r.myCoinB=a[r.coinB],r.activity=o||{}),r}},fo=["t","ammActivityMap"],vo=Object(Cc.a)(kc.a)(eo||(eo=Object(b.a)(["\n  flex: 1;\n  background: var(--color-box);\n  border-radius: ","px;\n  padding: ","px;\n  height: 120px;\n  // min-width: 160px;\n  max-width: 210px;\n  // & .MuiAvatar-root {\n    //     height: ",";\n    //     width: ",";\n  // }\n"])),(function(e){return e.theme.unit}),(function(e){return 2*e.theme.unit}),(function(e){return e.theme.fontDefault.h4}),(function(e){return e.theme.fontDefault.h4})),jo=Object(Cc.a)(kc.a)(to||(to=Object(b.a)(["\n  background: var(--color-box);\n  border-radius: ","px;\n  padding: ","px;\n  width: var(--swap-box-width);\n  box-sizing: border-box;\n  //height: 120px;\n  //min-width: 160px;\n  // & .MuiAvatar-root {\n    //   height: ",";\n    //   width: ",";\n  // }\n"])),(function(e){return e.theme.unit}),(function(e){return 2*e.theme.unit}),(function(e){return e.theme.fontDefault.h4}),(function(e){return e.theme.fontDefault.h4})),Oo=Object(mc.a)("common")((function(e){var t,a,n,c,r,o,i,s,u,l,b,p,j,O,x,g,y,A,S=e.t,I=e.ammActivityMap,C=Object(f.a)(e,fo),N=Object(B.Sb)().currency,T=function(e){var t=Object(m.h)("/liquidity/pools/coinPair/:symbol"),a=We(),n=a.coinMap,c=a.tokenMap,r=a.marketArray,o=(Qa().faitPrices,ne()),i=o.ammMap,s=o.getAmmMap,u=o.status,l=cn(),b=l.userRewardsMap,p=l.status,f=an(),j=f.walletLayer2,O=f.status,x=w.a.useState(void 0),g=Object(we.a)(x,2),y=g[0],A=g[1],S=w.a.useState([]),I=Object(we.a)(S,2),C=I[0],N=(I[1],w.a.useState([])),T=Object(we.a)(N,2),M=T[0],E=T[1],D=w.a.useState(void 0),P=Object(we.a)(D,2),_=P[0],R=P[1],L=w.a.useState(void 0),B=Object(we.a)(L,2),U=B[0],F=B[1],K=w.a.useState({feeA:0,feeB:0,feeDollar:0,feeYuan:0,reward:0,rewardToken:void 0,balanceA:0,balanceB:0,balanceYuan:0,balanceDollar:0}),J=Object(we.a)(K,2),W=J[0],H=J[1],V=w.a.useState({myCoinA:void 0,myCoinB:void 0,activity:void 0,totalRewards:void 0,amountDollar:void 0,amountYuan:void 0,totalLPToken:void 0,totalA:void 0,totalB:void 0,rewardToken:void 0,rewardValue:void 0,feeA:void 0,feeB:void 0,isNew:void 0,isActivity:void 0,APY:void 0}),G=Object(we.a)(V,2),Y=G[0],q=G[1],z=w.a.useState(void 0),X=Object(we.a)(z,2),Q=X[0],Z=X[1],$=w.a.useState({coinAInfo:void 0,coinBInfo:void 0}),ee=Object(we.a)($,2),te=ee[0],ae=ee[1],ce=w.a.useState([]),re=Object(we.a)(ce,2),oe=re[0],ie=re[1],se=w.a.useCallback((function(e){var t,a=sc().walletMap;return A(a),a&&(null===(t=dc())||void 0===t||t.then((function(t){var a=bc(e,t);E(a||[])}))),a}),[sc,dc,bc,r,te]),ue=w.a.useCallback(Object(k.a)(h.a.mark((function e(){var t,a,n,c,r;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(je.exchangeAPI&&Y.coinA&&Y.coinB)){e.next=8;break}return t=Y.myCoinA,a=Y.myCoinB,n="".concat(null===t||void 0===t?void 0:t.name,"-").concat(null===a||void 0===a?void 0:a.name),e.next=5,je.exchangeAPI.getMixCandlestick({market:n,interval:be.j.d1,limit:30});case 5:c=e.sent,r=c.candlesticks.map((function(e){return Object(d.a)(Object(d.a)({},e),{},{timeStamp:e.timestamp,date:Lc()(e.timestamp).format("MMM DD")})})).sort((function(e,t){return e.timeStamp-t.timeStamp})),ie(r);case 8:case"end":return e.stop()}}),e)}))),[Y]);return w.a.useEffect((function(){ue()}),[ue]),w.a.useEffect((function(){var a,o=null!==(a=null===t||void 0===t?void 0:t.params.symbol)&&void 0!==a?a:void 0,u={},l=o.match(/(\w+)-(\w+)/i),b=Object(we.a)(l,3),p=b[1],m=b[2],f=Object(be.z)(r,p,m),v=f.amm,O=f.market,h=mo({ammMap:i,coinMap:n,ammActivityMap:e,ammKey:v});if(q(h||{}),n&&ae({coinAInfo:n[p],coinBInfo:n[m]}),j&&se(O),v&&O&&i){s();var k=[pc({coinKey:O,ammKey:v,ammMap:i})];Promise.all([].concat(k)).then((function(e){var t=Object(we.a)(e,1)[0],a=t.ammPoolsBalance,n=t.tickMap;if(c){var r={tickerData:n[O],ammPoolsBalance:a};u=oc(n[O]?n[O]:{}),Z(u),q(Object(d.a)({},h)),F(r)}})).catch((function(e){throw console.log(e),Error}))}}),[]),w.a.useEffect((function(){var e,t,a=Object(be.z)(r,null===(e=te.coinAInfo)||void 0===e?void 0:e.simpleName,null===(t=te.coinBInfo)||void 0===t?void 0:t.simpleName).market;if(a&&U&&U.ammPoolsBalance&&O===v.J.UNSET){var n=se(a),c=cc(a,n,_,U);H(c)}}),[O]),w.a.useEffect((function(){var e,t,a=Object(be.z)(r,null===(e=te.coinAInfo)||void 0===e?void 0:e.simpleName,null===(t=te.coinBInfo)||void 0===t?void 0:t.simpleName).market;if(p===v.J.UNSET&&a){R(b);var n=cc(a,y,_,U);H(n)}}),[p]),w.a.useEffect((function(){var t,a;if(u===v.J.UNSET&&i&&(null===(t=te.coinAInfo)||void 0===t?void 0:t.simpleName)&&(null===(a=te.coinBInfo)||void 0===a?void 0:a.simpleName)){var c=mo({ammMap:i,coinMap:n,ammActivityMap:e,ammKey:"AMM-"+te.coinAInfo.simpleName+te.coinBInfo.simpleName});q(Object(d.a)(Object(d.a)(Object(d.a)({},Y),c),{},{tradeFloat:Y.tradeFloat}))}}),[u]),{walletMap:y,myAmm:W,coinPairInfo:Y,snapShotData:U,pair:te,tradeFloat:Q,ammMarketArray:C,myAmmMarketArray:M,pairHistory:oe}}({ammActivityMap:I}),M=T.tradeFloat,E=T.snapShotData,D=T.pair,P=T.coinPairInfo,_=T.walletMap,R=T.ammMarketArray,L=T.myAmmMarketArray,U=T.myAmm,F=T.pairHistory,K=w.a.useState(0),J=Object(we.a)(K,2),W=J[0],H=(J[1],w.a.useState((null===C||void 0===C?void 0:C.page)?C.page:1)),V=Object(we.a)(H,2),G=V[0],Y=V[1],q=w.a.useCallback((function(e){Y(e)}),[]),z=Object(B.Sb)().coinJson,X=z[null===(t=P.myCoinA)||void 0===t?void 0:t.simpleName],Q=z[null===(a=P.myCoinB)||void 0===a?void 0:a.simpleName];return Object(fc.jsxs)(fc.Fragment,{children:[Object(fc.jsxs)(hc.a,{container:!0,children:[Object(fc.jsxs)(hc.a,{item:!0,xs:7,children:[Object(fc.jsxs)(so.a,{"aria-label":"breadcrumb",children:[Object(fc.jsx)(uo.a,{color:"textSecondary",href:"/#/liquidity/pools",children:S("labelAmmList")}),Object(fc.jsxs)(ur.a,{color:"textSecondary",display:"flex",alignItems:"center",justifyContent:"center",children:[null===(n=D.coinAInfo)||void 0===n?void 0:n.simpleName,"-",null===(c=D.coinBInfo)||void 0===c?void 0:c.simpleName]})]}),Object(fc.jsx)(hc.a,{item:!0,xs:12,marginTop:2,children:Object(fc.jsx)(B.qb,Object(d.a)({},Object(d.a)(Object(d.a)(Object(d.a)({},C),{},{t:S},D),{},{tradeFloat:M,isNew:!1})))})]}),Object(fc.jsx)(hc.a,{item:!0,xs:4,alignItems:"center",justifyContent:"flex-end",display:"flex",children:"undefined"===typeof P.isActivity?"":Object(fc.jsxs)(jo,{paddingY:3,paddingX:2.5,display:"flex",flexDirection:"column",children:[Object(fc.jsxs)(kc.a,{display:"flex",flexDirection:"row",justifyContent:"space-between",children:[Object(fc.jsxs)(ur.a,{display:"flex",flexDirection:"column",component:"div",children:[Object(fc.jsx)(ur.a,{variant:"body2",component:"h5",color:"textSecondary",children:S("labelReward")}),Object(fc.jsx)(ur.a,{variant:"body1",component:"span",color:"textPrimary",children:"undefined"===typeof P.isActivity?v.s:Object(fc.jsxs)(fc.Fragment,{children:[Object(fc.jsxs)(ur.a,{component:"span",children:[P.activity?Object(v.gb)(P.activity.totalRewards):v.s," "]}),Object(fc.jsx)(ur.a,{component:"span",children:null===(r=P.activity)||void 0===r||null===(o=r.rewardToken)||void 0===o?void 0:o.simpleName})]})})]}),Object(fc.jsxs)(ur.a,{display:"flex",flexDirection:"column",alignItems:"flex-end",component:"div",children:[Object(fc.jsx)(ur.a,{variant:"body2",component:"h5",color:"textSecondary",children:S("labelMyReward")}),Object(fc.jsx)(ur.a,{variant:"body1",component:"span",color:"textPrimary",children:"undefined"===typeof U.reward?v.s:Object(fc.jsxs)(fc.Fragment,{children:[Object(fc.jsxs)(ur.a,{component:"span",children:[" ",Object(v.gb)(U.reward)," "]}),Object(fc.jsxs)(ur.a,{component:"span",children:[" ",null===(i=P.activity)||void 0===i||null===(s=i.rewardToken)||void 0===s?void 0:s.simpleName]})]})})]})]}),Object(fc.jsx)(ur.a,{alignSelf:"flex-start",variant:"body2",color:"textSecondary",component:"span",marginTop:1,children:"undefined"===typeof P.isActivity?S("labelNoActiveEvent"):Object(fc.jsxs)(fc.Fragment,{children:[S("labelDate")," :",Object(fc.jsxs)(fc.Fragment,{children:[" "," "+Lc()(null===(u=P.activity)||void 0===u?void 0:u.duration.from).format("L")+" - "+Lc()(null===(l=P.activity)||void 0===l?void 0:l.duration.to).format("L")]})]})})]})})]}),Object(fc.jsxs)(kc.a,{flex:1,display:"flex",alignItems:"stretch",flexDirection:"row",marginTop:3,children:[Object(fc.jsxs)(kc.a,{flex:1,display:"flex",flexDirection:"column",marginRight:3,justifyContent:"space-between",children:[Object(fc.jsx)(kc.a,{flex:1,width:"101%",children:Object(fc.jsx)(B.Z,{type:B.q.Trend,data:F,extraInfo:null===(b=D.coinBInfo)||void 0===b?void 0:b.simpleName,showXAxis:!0})}),Object(fc.jsxs)(kc.a,{display:"flex",flexDirection:"row",justifyContent:"space-between",children:[Object(fc.jsxs)(vo,{paddingX:2,display:"flex",flexDirection:"column",children:[Object(fc.jsx)(ur.a,{component:"p",color:"textSecondary",display:"flex",marginBottom:1.5,children:S("labelAmmTotalToken")}),Object(fc.jsxs)(ur.a,{component:"span",display:"flex",flexDirection:"row",justifyContent:"space-between",alignItems:"center",style:{textTransform:"capitalize"},color:"textPrimary",children:[Object(fc.jsx)(kc.a,{component:"span",className:"logo-icon",height:"var(--list-menu-coin-size)",width:"var(--list-menu-coin-size)",alignItems:"center",justifyContent:"center",children:X?Object(fc.jsx)(v.c,{imgx:X.x,imgy:X.y,imgheight:X.height,imgwidth:X.width,size:24,variant:"circular",alt:null===P||void 0===P||null===(p=P.myCoinA)||void 0===p?void 0:p.simpleName,src:'data:image/svg+xml;utf8,<svg width="36" height="36" viewBox="0 0 36 36" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M0 0H36V36H0V0Z"/></svg>'}):Object(fc.jsx)(lo.a,{variant:"circular",alt:null===P||void 0===P||null===(j=P.myCoinA)||void 0===j?void 0:j.simpleName,style:{height:"var(--list-menu-coin-size))",width:"var(--list-menu-coin-size)"},src:"static/images/icon-default.png"})}),Object(fc.jsxs)(ur.a,{justifyContent:"center",display:"flex",children:[Object(fc.jsx)(ur.a,{component:"span",alignSelf:"right",height:24,lineHeight:"24px",children:Object(v.gb)(P.totalA,6)}),Object(fc.jsx)(ur.a,{component:"span",marginLeft:1,alignSelf:"right",height:24,lineHeight:"24px",children:null===(O=P.myCoinA)||void 0===O?void 0:O.simpleName})]})]}),Object(fc.jsxs)(ur.a,{component:"span",display:"flex",flexDirection:"row",justifyContent:"space-between",alignItems:"center",marginTop:1,style:{textTransform:"capitalize"},children:[Object(fc.jsx)(kc.a,{component:"span",className:"logo-icon",height:"var(--list-menu-coin-size)",width:"var(--list-menu-coin-size)",alignItems:"center",justifyContent:"center",children:Q?Object(fc.jsx)(v.c,{imgx:Q.x,imgy:Q.y,imgheight:Q.height,imgwidth:Q.width,size:24,variant:"circular",alt:null===P||void 0===P||null===(x=P.myCoinB)||void 0===x?void 0:x.simpleName,src:'data:image/svg+xml;utf8,<svg width="36" height="36" viewBox="0 0 36 36" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M0 0H36V36H0V0Z"/></svg>'}):Object(fc.jsx)(lo.a,{variant:"circular",alt:null===P||void 0===P||null===(g=P.myCoinB)||void 0===g?void 0:g.simpleName,style:{height:"var(--list-menu-coin-size)",width:"var(--list-menu-coin-size)"},src:"static/images/icon-default.png"})}),Object(fc.jsxs)(ur.a,{justifyContent:"center",display:"flex",children:[Object(fc.jsx)(ur.a,{component:"span",alignSelf:"right",height:24,lineHeight:"24px",children:Object(v.gb)(P.totalB,6)}),Object(fc.jsx)(ur.a,{component:"span",marginLeft:1,alignSelf:"right",height:24,lineHeight:"24px",children:null===(y=P.myCoinB)||void 0===y?void 0:y.simpleName})]})]})]}),Object(fc.jsxs)(vo,{paddingX:2,display:"flex",flexDirection:"column",children:[Object(fc.jsx)(ur.a,{component:"p",color:"textSecondary",display:"flex",children:S("label24Volume")}),Object(fc.jsx)(ur.a,{variant:"h5",marginTop:4,component:"span",children:N===v.m.dollar?v.G.Dollar+Object(v.gb)(M&&M.priceDollar?M.priceDollar:0,2):v.G.Yuan+Object(v.gb)(M&&M.priceYuan?M.priceYuan:0,2)})]}),Object(fc.jsxs)(vo,{paddingX:2,display:"flex",flexDirection:"column",children:[Object(fc.jsx)(ur.a,{component:"p",color:"textSecondary",display:"flex",children:S("labelTVL")}),Object(fc.jsxs)(ur.a,{variant:"h5",marginTop:4,component:"span",children:[" ","undefined"===typeof P.amountDollar?v.s:N===v.m.dollar?v.G.Dollar+Object(v.gb)(P.amountDollar,2):v.G.Yuan+Object(v.gb)(P.amountYuan?P.amountYuan:0,2)]})]}),Object(fc.jsxs)(vo,{paddingX:2,display:"flex",flexDirection:"column",children:[Object(fc.jsx)(ur.a,{component:"p",color:"textSecondary",display:"flex",children:S("labelAPY")}),Object(fc.jsxs)(ur.a,{variant:"h5",marginTop:4,component:"span",children:[" ",P.APY?P.APY:v.s,"%"]})]})]})]}),Object(fc.jsx)(kc.a,{display:"flex",children:Object(fc.jsx)(po,{pair:D,walletMap:_,snapShotData:E})})]}),Object(fc.jsx)(hc.a,{container:!0,marginY:3,children:Object(fc.jsxs)(hc.a,{item:!0,xs:12,children:[Object(fc.jsx)(xc.a,{value:W,"aria-label":"tabs switch",children:Object(fc.jsx)(gc.a,Object(d.a)({label:S("labelMe")},(A=1,{id:"simple-tab-".concat(A),"aria-controls":"tabpanel-".concat(A)})))}),Object(fc.jsx)(Nc,{style:{marginTop:"".concat(2*v.rb,"px")},children:0===W?Object(fc.jsx)(B.f,{rawData:R,handlePageChange:q,page:G}):Object(fc.jsx)(B.f,{rawData:L,handlePageChange:q,page:G})})]})})]})})),ho=function(){var e=ue(),t=e.ammActivityMap,a=e.status,n=_(),c=(n.account,n.status,ne()),r=c.ammMap,o=c.getAmmMap,i=w.a.useState(t),s=Object(we.a)(i,2),u=s[0],l=s[1];return w.a.useEffect((function(){r&&0!==Object.keys(r).length||o()}),[]),w.a.useEffect((function(){a===v.J.UNSET&&l(t)}),[a]),{ammActivityMap:u}},ko=Object(Cc.a)(kc.a)(ao||(ao=Object(b.a)(["\n    display: flex;\n    flex-direction: column;\n    justify-content: stretch;\n    align-items: stretch;\n    flex: 1;\n"]))),xo=(v.qb,Object(mc.a)(["layout","common"],{withRef:!0})(B.bb),Object(mc.a)("common",{withRef:!0})((function(e){var t,a,n=e.t,c=ho().ammActivityMap,r=Object(m.h)(["/liquidity/:item",":next/"]),o=null!==(t=null===r||void 0===r?void 0:r.params.item)&&void 0!==t?t:"pools",i=Object(m.h)(["/liquidity/:item/:next/:symbol"]),s=void 0;return i&&(null===i||void 0===i||null===(a=i.params)||void 0===a?void 0:a.next)&&"pools"===i.params.item&&(s=i.params.symbol?i.params.symbol:"LRC-ETH"),Object(fc.jsxs)(fc.Fragment,{children:[s&&Object(fc.jsx)(kc.a,{display:"flex",flexDirection:"column",flex:1,alignSelf:"flex-start",children:Object(fc.jsx)(Oo,{ammActivityMap:c})}),!s&&Object(fc.jsxs)(ko,{children:[Object(fc.jsx)(ur.a,{variant:"h2",component:"div",fontFamily:"Roboto",marginTop:2,marginBottom:3,children:n("labelLiquidityPageTitle")}),Object(fc.jsx)(kc.a,{minHeight:420,display:"flex",alignItems:"stretch",justifyContent:"stretch",marginTop:0,flex:1,marginBottom:3,children:"pools"===o&&!s&&Object(fc.jsx)(io,{ammActivityMap:c})})]})]})}))),go=["ammProps","t"],wo=Object(Cc.a)(kc.a)(no||(no=Object(b.a)(["\n    display: flex;\n    flex-direction: column;\n    flex: 1;\n"]))),yo=w.a.memo(w.a.forwardRef((function(e,t){var a="".concat(e.coinAInfo.name,"-").concat(e.coinBInfo.name);return e?Object(fc.jsx)(B.c,Object(d.a)(Object(d.a)({ref:t},e),{},{handleClick:function(){return e.handleClick(a)}})):Object(fc.jsx)(fc.Fragment,{})}))),Ao=function(e){var t=e.ammActivityViewMap,a=Object(m.f)(),n=w.a.useCallback((function(e){a&&a.push("/liquidity/pools/coinPair/".concat(e))}),[a]);return Object(fc.jsxs)(fc.Fragment,{children:[t.length?t.map((function(e,t){return Object(fc.jsx)(hc.a,{item:!0,xs:12,sm:6,lg:4,children:Object(fc.jsx)(yo,Object(d.a)({handleClick:n},e))},t)})):Object(fc.jsxs)(kc.a,{flex:1,display:"flex",alignItems:"center",justifyContent:"center",flexDirection:"column",children:[Object(fc.jsx)(B.w,{height:"calc(100% - 35px)",marginTop:10,display:"flex",flexWrap:"nowrap",alignItems:"center",justifyContent:"center",flexDirection:"column",message:function(){return Object(fc.jsx)(Er.a,{i18nKey:"labelEmptyDefault",children:"Content is Empty"})}})," "]}),"   "]})},So=Object(mc.a)("common")((function(e){e.ammProps;var t=e.t,a=(Object(f.a)(e,go),function(e){var t=e.ammActivityMap,a=cn(),n=w.a.useState([]),c=Object(we.a)(n,2),r=c[0],o=c[1],i=w.a.useState([]),s=Object(we.a)(i,2),u=s[0],l=s[1];return w.a.useEffect((function(){t&&Object.keys(t).length>0&&(o(tc({ammActivityMap:t,type:"AMM_MINING",ammPoolActivityStatus:[be.a.NotStarted,be.a.InProgress]},a.userRewardsMap)),l(tc({ammActivityMap:t,type:"AMM_MINING",ammPoolActivityStatus:[be.a.EndOfGame]},a.userRewardsMap)))}),[t]),w.a.useEffect((function(){"ERROR"===a.status?a.statusUnset():"DONE"===a.status&&(a.statusUnset(),o(tc({ammActivityMap:t,type:"AMM_MINING",ammPoolActivityStatus:[be.a.NotStarted,be.a.InProgress]},a.userRewardsMap)),l(tc({ammActivityMap:t,type:"AMM_MINING",ammPoolActivityStatus:[be.a.EndOfGame]},a.userRewardsMap)))}),[a.status]),{ammActivityViewMap:r,ammActivityPastViewMap:u}}({ammActivityMap:ho().ammActivityMap})),n=a.ammActivityViewMap,c=a.ammActivityPastViewMap,r=w.a.useState(0),o=Object(we.a)(r,2),i=(o[0],o[1],[].concat(Object(U.a)(n),Object(U.a)(c)));return Object(fc.jsxs)(wo,{children:[Object(fc.jsx)(ur.a,{variant:"h2",component:"div",fontFamily:"Roboto",marginTop:2,marginBottom:3,children:t("labelMiningPageTitle")}),Object(fc.jsx)(hc.a,{container:!0,spacing:5,children:Object(fc.jsx)(Ao,{ammActivityViewMap:i})})]})})),Io=["onClose","open","t"],Co=Object(mc.a)("common")((function(e){var t=e.onClose,a=(e.open,e.t),n=Object(f.a)(e,Io),c=_(),r=c.account,o=c.updateAccount,i=c.setShouldShow,s=c.resetAccount,u=(c.statusUnset,c.status),l=Qa(),b=l.updateSystem,p=(l.chainId,l.exchangeInfo,Object(B.Rb)()),m=p.modals.isShowConnect,j=p.setShowConnect,O=p.setShowAccount,y=w.a.useState(""),A=Object(we.a)(y,2),S=A[0],I=A[1],C=w.a.useState(!1),N=Object(we.a)(C,2),T=N[0],M=N[1],E=w.a.useCallback(Object(k.a)(h.a.mark((function e(){var t,a;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,La.a.MetaMask();case 2:if(o({connectName:v.k.MetaMask}),!La.a.usedProvide){e.next=11;break}return e.t0=Number,e.next=7,null===(t=La.a.usedWeb3)||void 0===t?void 0:t.eth.getChainId();case 7:return e.t1=e.sent,a=(0,e.t0)(e.t1),b({chainId:a&&a===be.e.GOERLI?a:be.e.MAINNET}),e.abrupt("return");case 11:case"end":return e.stop()}}),e)}))),[]),D=w.a.useCallback(Object(k.a)(h.a.mark((function e(){var t,a;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,La.a.WalletConnect();case 2:if(o({connectName:v.k.WalletConnect}),!La.a.usedProvide){e.next=11;break}return e.t0=Number,e.next=7,null===(t=La.a.usedWeb3)||void 0===t?void 0:t.eth.getChainId();case 7:return e.t1=e.sent,a=(0,e.t0)(e.t1),b({chainId:a&&a===be.e.GOERLI?a:be.e.MAINNET}),e.abrupt("return");case 11:case"end":return e.stop()}}),e)}))),[]),P=w.a.useState(void 0),R=Object(we.a)(P,2),U=R[0],F=R[1];Object(g.useEffect)((function(){!0===T&&-1!==[v.J.UNSET].findIndex((function(e){return e===u}))&&(Za("clear cache connect done"),M(!1),void 0!==U&&U.callback())}),[u,T]);var K=[Object(d.a)(Object(d.a)({},v.cb[0]),{},{handleSelect:w.a.useCallback(Object(k.a)(h.a.mark((function e(){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r.connectName===v.cb[0].key?j({isShow:!1}):(La.c.sendDisconnect("","should new provider"),j({isShow:!0,step:B.Ab.MetaMaskProcessing}),F({callback:E}),M(!0));case 1:case"end":return e.stop()}}),e)}))),[r])}),Object(d.a)(Object(d.a)({},v.cb[1]),{},{handleSelect:w.a.useCallback(Object(k.a)(h.a.mark((function e(){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:La.c.sendDisconnect("","should new provider"),j({isShow:!0,step:B.Ab.WalletConnectProcessing}),F({callback:D}),M(!0);case 4:case"end":return e.stop()}}),e)}))),[r])})],J=w.a.useCallback((function(e){e.type;var t=e.opts.qrCodeUrl;t&&(I(t),j({isShow:!0,step:B.Ab.WalletConnectQRCode}))}),[]),W=Object(g.useState)(!1),H=Object(we.a)(W,2),V=H[0],G=H[1];Object(La.b)({handleProcessing:J});var Y=w.a.useMemo((function(){return["UN_CONNECT","ERROR_NETWORK"].includes(r.readyState)?void 0:function(){switch(j({isShow:!1}),r.readyState){case"ACTIVATED":case"LOCKED":O({isShow:!0,step:B.a.HadAccount});break;case"DEPOSITING":O({isShow:!0,step:B.a.Depositing});break;case"NO_ACCOUNT":O({isShow:!0,step:B.a.NoAccount})}}}),[r,O]),q=w.a.useMemo((function(){var e;return Object.values((e={},Object(x.a)(e,B.Ab.Provider,{view:Object(fc.jsx)(B.W,Object(d.a)({gatewayList:K,providerName:r.connectName},Object(d.a)({t:a},n))),onBack:Y}),Object(x.a)(e,B.Ab.MetaMaskProcessing,{view:Object(fc.jsx)(B.I,Object(d.a)({},Object(d.a)({t:a},n)))}),Object(x.a)(e,B.Ab.WalletConnectProcessing,{view:Object(fc.jsx)(B.yb,Object(d.a)({},Object(d.a)({t:a},n)))}),Object(x.a)(e,B.Ab.WalletConnectQRCode,{view:Object(fc.jsx)(B.zb,Object(d.a)({onCopy:function(){zn(S),G(!0)},url:S},Object(d.a)({t:a},n))),onBack:function(){j({isShow:!1,step:B.Ab.Provider})}}),Object(x.a)(e,B.Ab.SuccessConnect,{view:Object(fc.jsx)(B.cb,Object(d.a)({onClose:function(e){i(!1),t(e)},providerName:r.connectName},Object(d.a)({t:a},n)))}),Object(x.a)(e,B.Ab.FailedConnect,{view:Object(fc.jsx)(B.x,Object(d.a)(Object(d.a)({},Object(d.a)({t:a},n)),{},{onRetry:s})),onBack:function(){j({isShow:!1,step:B.Ab.Provider})}}),e))}),[S,r,a,n,t]);return Object(fc.jsxs)(fc.Fragment,{children:[Object(fc.jsx)(B.O,{open:m.isShow,onClose:function(e){i(!1),t(e)},panelList:q,onBack:q[m.step].onBack,step:m.step}),Object(fc.jsx)(B.kb,{alertText:a("Address Copied to Clipboard!"),open:V,autoHideDuration:L,setOpen:G,severity:"success"})]})}));function No(){return To.apply(this,arguments)}function To(){return(To=Object(k.a)(h.a.mark((function e(){var t,a,n,c,r,o,s,u,l,d;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=Dn.getState().system,a=Dn.getState().account,Za("before check!",a),n={code:i.NoError},e.prev=4,!(je.userAPI&&je.exchangeAPI&&t.exchangeInfo&&La.a.usedWeb3&&a&&"unknown"!==t.chainId&&"unknown"!==a.connectName)){e.next=38;break}return c={ETH:"529000000000000",LRC:"34000000000000000000",USDT:"7850000",DAI:"98100000000000000000"},e.next=9,je.exchangeAPI.getAccount({owner:a.accAddress});case 9:if(r=e.sent,!(null===(o=r.accInfo)||void 0===o?void 0:o.owner)||!(null===o||void 0===o?void 0:o.accountId)){e.next=38;break}return s=a.connectName,e.prev=13,e.next=16,be.u(La.a.usedWeb3,o.owner,t.exchangeInfo.exchangeAddress,o.keyNonce,s);case 16:return u=e.sent,e.prev=17,l={exchange:t.exchangeInfo.exchangeAddress,owner:o.owner,accountId:o.accountId,publicKey:{x:u.formatedPx,y:u.formatedPy},maxFee:{tokenId:0,volume:c.ETH},validUntil:be.l,nonce:o.nonce},Za("req:",l),e.next=22,je.userAPI.updateAccount(l,La.a.usedWeb3,t.chainId,s);case 22:return d=e.sent,e.next=25,be.I(R);case 25:n.data=d,e.next=32;break;case 28:e.prev=28,e.t0=e.catch(17),n.code=i.UpdateAccoutError,n.data=e.t0;case 32:e.next=38;break;case 34:e.prev=34,e.t1=e.catch(13),n.code=i.GenEddsaKeyError,n.data=e.t1;case 38:e.next=44;break;case 40:e.prev=40,e.t2=e.catch(4),n.code=i.GetAccError,n.data=e.t2;case 44:return e.abrupt("return",n);case 45:case"end":return e.stop()}}),e,null,[[4,40],[13,34],[17,28]])})))).apply(this,arguments)}function Mo(){Wn.sendAccountLock()}var Eo=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=We(),a=t.tokenMap,n=t.coinMap,c=_(),r=c.account,o=Qa(),s=o.exchangeInfo,u=o.chainId,l=o.gasPrice,d=w.a.useState({belong:void 0,tradeValue:0,balance:0}),b=Object(we.a)(d,2),p=b[0],m=b[1],f=It(),j=f.walletLayer1,O=Object(B.Rb)(),x=O.setShowDeposit,y=O.setShowAccount,A=Object(qc.a)("common"),S=A.t,I=w.a.useCallback(function(){var e=Object(k.a)(h.a.mark((function e(t){var n,c,o,d,b,p,m,f,j,O,k,x,g,w,A,S;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r.accountId,r.accAddress,n=r.readyState,r.apiKey,c=r.connectName,r.eddsaKey,console.log(je.exchangeAPI,La.a.usedWeb3),o={code:i.NoError},!(n!==v.a.UN_CONNECT&&t.tradeValue&&a&&(null===s||void 0===s?void 0:s.exchangeAddress)&&La.a.usedWeb3&&je.exchangeAPI)){e.next=58;break}return e.prev=4,d=a[t.belong],b=parseInt(d.gasAmounts.deposit),e.next=9,be.A(La.a.usedWeb3,r.accAddress);case 9:if(p=e.sent,m=0,f=c===v.k.MetaMask,j=null!==l&&void 0!==l?l:30,"ETH"===d.symbol.toUpperCase()){e.next=39;break}return O={owner:r.accAddress,token:d.symbol},e.next=17,je.exchangeAPI.getAllowances(O,a);case 17:if(k=e.sent,x=k.tokenAllowances,g=be.J(x[d.symbol]),!(w=be.J(t.tradeValue).times("1e"+d.decimals)).gt(g)){e.next=38;break}return Za(w,g," need approveMax!"),y({isShow:!0,step:B.a.TokenApproveInProcess}),e.prev=24,e.next=27,be.q(La.a.usedWeb3,r.accAddress,d.address,null===s||void 0===s?void 0:s.depositAddress,j,b,"unknown"===u?void 0:u,p,f);case 27:p+=1,e.next=36;break;case 30:return e.prev=30,e.t0=e.catch(24),o.code=i.ApproveFailed,o.data=e.t0,y({isShow:!0,step:B.a.TokenApproveFailed}),e.abrupt("return");case 36:e.next=39;break;case 38:Za("allowance is enough! don't need approveMax!");case 39:return y({isShow:!0,step:B.a.DepositInProcess}),Za("before deposit:",u,c,f),A="unknown"===u?1:u,e.next=44,be.r(La.a.usedWeb3,r.accAddress,s.exchangeAddress,d,t.tradeValue,m,j,b,A,p,f);case 44:S=e.sent,Za("response:",S),o.data=S,void 0===(null===S||void 0===S?void 0:S.hash)&&(null===S||void 0===S?void 0:S.errInfo)?y({isShow:!0,step:B.a.DepositFailed}):y({isShow:!0,step:B.a.Depositing}),e.next=56;break;case 50:e.prev=50,e.t1=e.catch(4),Object(be.s)(e.t1),o.code=i.DepositFailed,o.data=e.t1,y({isShow:!0,step:B.a.DepositFailed});case 56:e.next=59;break;case 58:o.code=i.DataNotReady;case 59:return e.abrupt("return",o);case 60:case"end":return e.stop()}}),e,null,[[4,50],[24,30]])})));return function(t){return e.apply(this,arguments)}}(),[r,a,u,s,l,je.exchangeAPI,y]),C=Object(g.useCallback)(function(){var e=Object(k.a)(h.a.mark((function e(t){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Za("onDepositClick depositValue:",t),x({isShow:!1}),!t||!t.belong){e.next=5;break}return e.next=5,I(t);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[p,I,x,y,e]),N=(Object(g.useCallback)(function(){var e=Object(k.a)(h.a.mark((function e(t,a){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e){e()})));case 1:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),[p,m]),S(e?"labelCreateLayer2Title":"depositTitleAndActive")),T={isNewAccount:e,title:N,tradeData:{belong:void 0},coinMap:n,walletMap:j,depositBtnStatus:B.ob.AVAILABLE,onDepositClick:C};return{depositProps:T}},Do=["onClose","etherscanUrl","open","t"],Po=Object(mc.a)("common")((function(e){var t=e.onClose,a=e.etherscanUrl,n=(e.open,e.t),c=Object(f.a)(e,Do),r=_(),o=r.account,s=r.shouldShow,u=r.updateAccount,l=r.setShouldShow,b=r.resetAccount,p=Eo(!0).depositProps,m=Object(B.Rb)(),j=m.modals.isShowAccount,O=m.setShowConnect,y=m.setShowAccount,A=Object(g.useState)(!1),S=Object(we.a)(A,2),I=S[0],C=S[1],N=Object(v.eb)(o.accAddress),T=We().coinMap,M=Object(g.useState)(!1),E=Object(we.a)(M,2),D=E[0],P=E[1],U=Object(g.useCallback)((function(){y({isShow:!1}),l(!0),O({isShow:null!==s&&void 0!==s&&s})}),[O,y,s]),F=w.a.useCallback((function(){zn(o.accAddress),P(!0)}),[o]),K=w.a.useCallback((function(){C(!0)}),[]),J=w.a.useCallback(Object(k.a)(h.a.mark((function e(){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:La.c.sendDisconnect("","customer click disconnect"),y({isShow:!1});case 2:case"end":return e.stop()}}),e)}))),[b,y]),W=w.a.useCallback((function(){y({isShow:!0,step:B.a.Deposit})}),[y]),H=w.a.useCallback(Object(k.a)(h.a.mark((function e(){var t;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(o.accAddress){e.next=3;break}return Za("account.accAddress is nil"),e.abrupt("return");case 3:return Za("goUpdateAccount...."),y({isShow:!0,step:B.a.UpdateAccountInProcess}),e.next=7,No();case 7:t=e.sent,e.t0=t.code,e.next=e.t0===i.NoError?11:e.t0===i.GetAccError||e.t0===i.GenEddsaKeyError||e.t0===i.UpdateAccoutError?16:19;break;case 11:return y({isShow:!0,step:B.a.SuccessUnlock}),e.next=14,Object(be.I)(R);case 14:return y({isShow:!1}),e.abrupt("break",20);case 16:return Za("try to sendCheckAccount..."),Wn.sendCheckAccount(o.accAddress),e.abrupt("break",20);case 19:return e.abrupt("break",20);case 20:case"end":return e.stop()}}),e)}))),[o,y]),V=w.a.useMemo((function(){return Object(fc.jsxs)(B.p,{variant:"contained",fullWidth:!0,size:"medium",onClick:function(){l(!0),Ln()},children:[n("labelUnLockLayer2")," "]})}),[u,n]),G=w.a.useMemo((function(){return Object(fc.jsxs)(B.p,{variant:"contained",fullWidth:!0,size:"medium",onClick:function(){Mo()},children:[n("labelLockLayer2")," "]})}),[Mo,n]),Y=n("labelCreateLayer2Title"),q=w.a.useMemo((function(){var e;return Object.values((e={},Object(x.a)(e,B.a.NoAccount,{view:Object(fc.jsx)(B.Q,Object(d.a)({},Object(d.a)(Object(d.a)({goDeposit:W},o),{},{etherscanUrl:a,onSwitch:U,onCopy:F,onViewQRCode:K,onDisconnect:J,addressShort:N})))}),Object(x.a)(e,B.a.Deposit,{view:Object(fc.jsx)(B.s,Object(d.a)({title:Y},Object(d.a)(Object(d.a)(Object(d.a)({},c),{},{_height:"var(--modal-height)",_width:"var(--modal-width)"},p),{},{t:n})))}),Object(x.a)(e,B.a.Depositing,{view:Object(fc.jsx)(B.t,Object(d.a)({label:Y,onClose:t,etherscanLink:a+o.accAddress},Object(d.a)(Object(d.a)({},c),{},{t:n})))}),Object(x.a)(e,B.a.DepositFailed,{view:Object(fc.jsx)(B.y,Object(d.a)({label:Y,etherscanLink:a+o.accAddress,onRetry:function(){return W()}},Object(d.a)(Object(d.a)({},c),{},{t:n}))),onBack:function(){y({isShow:!0,step:B.a.Deposit})}}),Object(x.a)(e,B.a.UpdateAccount,{view:Object(fc.jsx)(B.k,Object(d.a)(Object(d.a)({},Object(d.a)(Object(d.a)({},o),{},{etherscanUrl:a,onSwitch:U,onCopy:F,onViewQRCode:K,onDisconnect:J,addressShort:N})),{},{goUpdateAccount:function(){H()}},Object(d.a)(Object(d.a)({},c),{},{t:n})))}),Object(x.a)(e,B.a.ProcessUnlock,{view:Object(fc.jsx)(B.V,Object(d.a)({providerName:o.connectName},Object(d.a)(Object(d.a)({},c),{},{t:n})))}),Object(x.a)(e,B.a.SuccessUnlock,{view:Object(fc.jsx)(B.db,Object(d.a)({providerName:o.connectName},Object(d.a)(Object(d.a)({},c),{},{t:n})))}),Object(x.a)(e,B.a.FailedUnlock,{view:Object(fc.jsx)(B.A,Object(d.a)({onRetry:function(){Ln()}},Object(d.a)(Object(d.a)({},c),{},{t:n})))}),Object(x.a)(e,B.a.HadAccount,{view:Object(fc.jsx)(B.B,Object(d.a)({},Object(d.a)(Object(d.a)({},o),{},{onSwitch:U,onCopy:F,etherscanUrl:a,onViewQRCode:K,onDisconnect:J,addressShort:N,etherscanLink:a+o.accAddress,mainBtn:"ACTIVATED"===o.readyState?G:V})))}),Object(x.a)(e,B.a.TokenApproveInProcess,{view:Object(fc.jsx)(B.mb,Object(d.a)({label:Y,providerName:o.connectName},Object(d.a)(Object(d.a)({},c),{},{t:n}))),onBack:function(){y({isShow:!0,step:B.a.Deposit})}}),Object(x.a)(e,B.a.DepositApproveProcess,{view:Object(fc.jsx)(B.r,Object(d.a)({label:Y,etherscanLink:a+o.accAddress,providerName:o.connectName},Object(d.a)(Object(d.a)({},c),{},{t:n})))}),Object(x.a)(e,B.a.DepositInProcess,{view:Object(fc.jsx)(B.u,Object(d.a)({label:Y,etherscanLink:a+o.accAddress,providerName:o.connectName},Object(d.a)(Object(d.a)({},c),{},{t:n})))}),Object(x.a)(e,B.a.UpdateAccountInProcess,{view:Object(fc.jsx)(B.b,Object(d.a)({providerName:o.connectName},Object(d.a)(Object(d.a)({},c),{},{t:n})))}),Object(x.a)(e,B.a.UpdateAccountFailed,{view:Object(fc.jsx)(B.A,Object(d.a)({label:Y,onRetry:function(){H()}},Object(d.a)(Object(d.a)({},c),{},{t:n}))),onBack:function(){y({isShow:!0,step:B.a.UpdateAccount})}}),Object(x.a)(e,B.a.TokenApproveFailed,{view:Object(fc.jsx)(B.z,Object(d.a)({label:Y,onRetry:function(){W()}},Object(d.a)(Object(d.a)({t:n},c),{},{coinInfo:T?T.USTD:void 0})))}),e))}),[N,o,p,a,F,U,J,K,n,c]);return Object(fc.jsxs)(fc.Fragment,{children:[Object(fc.jsx)(B.kb,{alertText:n("Address Copied to Clipboard!"),open:D,autoHideDuration:L,setOpen:P,severity:"success"}),Object(fc.jsx)(B.N,{open:I,onClose:function(){return C(!1)},title:"ETH Address",description:null===o||void 0===o?void 0:o.accAddress,url:null===o||void 0===o?void 0:o.accAddress}),Object(fc.jsx)(B.J,{open:j.isShow,onClose:function(e){l(!1),t(e)},panelList:q,onBack:q[j.step].onBack,step:j.step})]})}));function _o(e,t,a,n){var c=_().account,r=Object(g.useState)([]),o=Object(we.a)(r,2),i=o[0],s=o[1];return Uc(Object(k.a)(h.a.mark((function r(){var o,i,u,l,d;return h.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(-1!==c.accountId&&e&&a&&je.userAPI){r.next=2;break}return r.abrupt("return");case 2:return o=[],r.prev=3,u=a[e],l={accountId:c.accountId,tokenSymbol:e,requestType:t,amount:n?Object(be.J)(n).times("1e"+u.decimals).toFixed(0,0):void 0},r.next=8,je.userAPI.getOffchainFeeAmt(l,c.apiKey);case 8:(null===(d=r.sent)||void 0===d||null===(i=d.raw_data)||void 0===i?void 0:i.fees)instanceof Array&&(d.raw_data.fees.forEach((function(e){var t=e.fee,n=a[e.token],c=be.J(e.fee).div("1e"+n.decimals).toNumber();o.push({belong:e.token,fee:c,__raw__:t})})),s(o)),Za("response:",d),r.next=16;break;case 13:r.prev=13,r.t0=r.catch(3),Object(be.s)(r.t0);case 16:s(o);case 17:case"end":return r.stop()}}),r,null,[[3,13]])}))),[c.accountId,c.apiKey,je.userAPI,t,e,a]),{chargeFeeList:i}}function Ro(){var e=_(),t=e.shouldShow,a=e.setShouldShow,n=e.statusUnset,c=Object(B.Rb)().setShowAccount,r=w.a.useCallback((function(){n()}),[t]),o=w.a.useCallback((function(){n(),c({isShow:null!==t&&void 0!==t&&t,step:B.a.HadAccount})}),[t]),i=w.a.useCallback((function(e){n(),c({isShow:null!==t&&void 0!==t&&t,step:B.a.NoAccount})}),[t]),s=w.a.useCallback(Object(k.a)(h.a.mark((function e(){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c({isShow:null!==t&&void 0!==t&&t,step:B.a.Depositing}),e.next=3,Object(be.I)(5e3);case 3:a(!1),c({isShow:!1}),n();case 6:case"end":return e.stop()}}),e)}))),[t]),u=w.a.useCallback((function(){c({isShow:null!==t&&void 0!==t&&t,step:B.a.Depositing})}),[t]),l=w.a.useCallback((function(){c({isShow:null!==t&&void 0!==t&&t,step:B.a.DepositFailed})}),[t]),d=w.a.useCallback((function(){c({isShow:null!==t&&void 0!==t&&t,step:B.a.DepositApproveProcess})}),[t]),b=w.a.useCallback((function(){n(),c({isShow:null!==t&&void 0!==t&&t,step:B.a.UpdateAccount})}),[t]),p=w.a.useCallback((function(){c({isShow:null!==t&&void 0!==t&&t,step:B.a.FailedUnlock})}),[t]);!function(e){var t=e.handleLockAccount,a=e.handleNoAccount,n=e.handleErrorAccount,c=e.handleDepositingAccount,r=e.handleErrorApproveToken,o=e.handleErrorDepositSign,i=e.handleProcessDeposit,s=e.handleSignAccount,u=e.handleProcessSign,l=e.handleSignError,d=e.handleProcessAccountCheck,b=e.handleAccountActive,p=w.a.useMemo((function(){return Wn.onSocket()}),[]);w.a.useEffect((function(){var e=p.subscribe((function(e){var d=e.data;switch(e.status){case"ErrorNetwork":n(d);break;case"LockAccount":t(d);break;case"NoAccount":a(d);break;case"DepositingAccount":c(d);break;case"ErrorApproveToken":r(d);break;case"ErrorDepositSign":o(d);break;case"ProcessDeposit":i(d);break;case"SignAccount":s(d);break;case"ProcessSign":u(d);break;case"ErrorSign":l(d);break;case"AccountUnlocked":b(d)}}));return function(){return e.unsubscribe()}}),[p,t,n,a,c,r,o,i,s,u,d])}({handleErrorAccount:r,handleLockAccount:o,handleNoAccount:i,handleDepositingAccount:s,handleErrorApproveToken:u,handleErrorDepositSign:l,handleProcessDeposit:d,handleSignAccount:b,handleProcessSign:w.a.useCallback((function(){c({isShow:null!==t&&void 0!==t&&t,step:B.a.ProcessUnlock})}),[t]),handleSignError:p,handleAccountActive:w.a.useCallback(Object(k.a)(h.a.mark((function e(){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c({isShow:null!==t&&void 0!==t&&t,step:B.a.SuccessUnlock}),e.next=3,Object(be.I)(1e3);case 3:a(!1),c({isShow:!1}),n();case 6:case"end":return e.stop()}}),e)}))),[t])})}var Lo=Object(mc.a)("common",{withRef:!0})((function(e){var t=Object.assign({},e),a=function(){var e,t=We(),a=t.tokenMap,n=t.coinMap,c=_().account,r=Qa(),o=r.exchangeInfo,i=r.chainId,s=an(),u=(s.walletLayer2,s.status),l=w.a.useState(null!==(e=sc().walletMap)&&void 0!==e?e:{}),d=Object(we.a)(l,2),b=d[0],p=d[1],m=w.a.useState({belong:void 0,tradeValue:0,balance:0}),f=Object(we.a)(m,2),j=f[0],O=f[1],x=_o(j.belong,be.g.TRANSFER,a).chargeFeeList,y=w.a.useState(),A=Object(we.a)(y,2),S=A[0],I=A[1],C=w.a.useState(""),N=Object(we.a)(C,2),T=N[0],M=N[1];w.a.useEffect((function(){if(u===v.J.UNSET){var e,t=null!==(e=sc().walletMap)&&void 0!==e?e:{};p(t)}}),[u]),Uc((function(){x.length>0&&I(x[0])}),[x,I]);var E=Object(g.useCallback)(function(){var e=Object(k.a)(h.a.mark((function e(t){var n,r,s,u,l,d,b,p,m,f,j,O,k,x;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=c.accountId,r=c.accAddress,s=c.readyState,u=c.apiKey,l=c.connectName,d=c.eddsaKey,console.log("useCallback tranferFeeInfo:",S),!(s===v.a.ACTIVATED&&a&&o&&La.a.usedWeb3&&(null===t||void 0===t?void 0:t.belong)&&(null===S||void 0===S?void 0:S.belong)&&(null===d||void 0===d?void 0:d.sk))){e.next=23;break}return e.prev=3,m=a[t.belong],f=a[S.belong],j=Object(be.J)(t.tradeValue).times("1e"+m.decimals).toFixed(0,0),e.next=9,null===(b=je.userAPI)||void 0===b?void 0:b.getNextStorageId({accountId:n,sellTokenId:m.tokenId},u);case 9:return O=e.sent,k={exchange:o.exchangeAddress,payerAddr:r,payerId:n,payeeAddr:T,payeeId:0,storageId:null===O||void 0===O?void 0:O.offchainId,token:{tokenId:m.tokenId,volume:j},maxFee:{tokenId:f.tokenId,volume:S.__raw__},validUntil:be.l},e.next=13,null===(p=je.userAPI)||void 0===p?void 0:p.submitInternalTransfer(k,La.a.usedWeb3,"unknown"===i?5:i,l,d.sk,u);case 13:x=e.sent,Za(x),void 0===(null===x||void 0===x?void 0:x.hash)&&(null===x||void 0===x||x.errInfo),e.next=21;break;case 18:e.prev=18,e.t0=e.catch(3),Object(be.s)(e.t0);case 21:e.next=24;break;case 23:return e.abrupt("return",!1);case 24:case"end":return e.stop()}}),e,null,[[3,18]])})));return function(t){return e.apply(this,arguments)}}(),[c,a,null===S||void 0===S?void 0:S.belong,j,T]),D=Object(g.useCallback)(function(){var e=Object(k.a)(h.a.mark((function e(t,a){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e){var a;(null===t||void 0===t||null===(a=t.tradeData)||void 0===a?void 0:a.belong)?j!==t.tradeData&&O(t.tradeData):O({belong:void 0,tradeValue:0,balance:0}),e()})));case 1:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),[O]),P=Object(g.useCallback)((function(e){Za("handleFeeChange:",e),I(e)}),[I]);return{transferProps:{tradeData:{belong:void 0},coinMap:n,walletMap:b,transferBtnStatus:B.ob.AVAILABLE,onTransferClick:E,handleFeeChange:P,handlePanelEvent:D,chargeFeeToken:"ETH",chargeFeeTokenList:x,handleOnAddressChange:function(e){Za("transfer handleOnAddressChange:",e),M(e)},handleAddressError:function(e){return{error:!1,message:""}}}}}().transferProps,n=Eo().depositProps,c=function(){var e,t=Object(qc.a)("common").t,a=Object(g.useState)(!1),n=Object(we.a)(a,2),c=n[0],r=n[1],o=Object(g.useState)(),i=Object(we.a)(o,2),s=i[0],u=i[1],l=We(),d=l.tokenMap,b=l.coinMap,p=_().account,m=Qa(),f=m.exchangeInfo,j=m.chainId,O=w.a.useState({belong:void 0,tradeValue:0,balance:0}),x=Object(we.a)(O,2),y=x[0],A=x[1],S=an().status,I=w.a.useState(null!==(e=sc().walletMap)&&void 0!==e?e:{}),C=Object(we.a)(I,2),N=C[0],T=C[1],M=_o(y.belong,be.g.OFFCHAIN_WITHDRAWAL,d).chargeFeeList,E=Object(g.useState)(),D=Object(we.a)(E,2),P=D[0],R=D[1],L=Object(g.useState)(void 0),U=Object(we.a)(L,2),F=U[0],K=U[1],J=Object(g.useState)(be.g.OFFCHAIN_WITHDRAWAL),W=Object(we.a)(J,2),H=W[0],V=W[1],G=Object(B.Rb)().setShowWithdraw;w.a.useEffect((function(){if(S===v.J.UNSET){var e,t=null!==(e=sc().walletMap)&&void 0!==e?e:{};T(t)}}),[S]),Uc((function(){M.length>0&&K(M[0])}),[M,K]);var Y=w.a.useCallback(function(){var e=Object(k.a)(h.a.mark((function e(a){var n,c,o,i,s,l,b,m,O,k,x,g,w;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=p.accountId,c=p.accAddress,o=p.readyState,i=p.apiKey,s=p.connectName,l=p.eddsaKey,!(o===v.a.ACTIVATED&&d&&f&&La.a.usedWeb3&&P&&(null===F||void 0===F?void 0:F.belong)&&(null===l||void 0===l?void 0:l.sk))){e.next=24;break}return e.prev=2,O=d[a.belong],k=d[F.belong],x=Object(be.J)(a.tradeValue).times("1e"+O.decimals).toFixed(0,0),e.next=8,null===(b=je.userAPI)||void 0===b?void 0:b.getNextStorageId({accountId:n,sellTokenId:O.tokenId},i);case 8:return g=e.sent,e.next=11,null===(m=je.userAPI)||void 0===m?void 0:m.submitOffchainWithdraw({exchange:f.exchangeAddress,owner:c,to:P,accountId:p.accountId,storageId:null===g||void 0===g?void 0:g.offchainId,token:{tokenId:O.tokenId,volume:x},maxFee:{tokenId:k.tokenId,volume:F.__raw__},extraData:"",minGas:0,validUntil:be.l},La.a.usedWeb3,"unknown"===j?1:j,s,l.sk,i);case 11:w=e.sent,Za("got response:",w),void 0===(null===w||void 0===w?void 0:w.hash)&&(null===w||void 0===w?void 0:w.errInfo)?u(t("labelWithdrawFailed")):u(t("labelWithdrawSucess")),e.next=20;break;case 16:e.prev=16,e.t0=e.catch(2),Object(be.s)(e.t0),u(t("labelWithdrawFailed"));case 20:return r(!0),e.abrupt("return",!0);case 24:return e.abrupt("return",!1);case 25:case"end":return e.stop()}}),e,null,[[2,16]])})));return function(t){return e.apply(this,arguments)}}(),[p,d,F]),q=H===be.g.FAST_OFFCHAIN_WITHDRAWAL?"Fast":"Standard",z={tradeData:{belong:void 0},coinMap:b,walletMap:N,withdrawBtnStatus:B.ob.AVAILABLE,withdrawType:q,withdrawTypes:v.Y,onWithdrawClick:function(){y&&y.belong&&Y(y),G({isShow:!1})},handleFeeChange:function(e){K(e)},handleWithdrawTypeChange:function(e){Za("handleWithdrawTypeChange",e);var t=e===v.X.Fast?be.g.FAST_OFFCHAIN_WITHDRAWAL:be.g.OFFCHAIN_WITHDRAWAL;V(t)},handlePanelEvent:function(){var e=Object(k.a)(h.a.mark((function e(t,a){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e){var a;(null===t||void 0===t||null===(a=t.tradeData)||void 0===a?void 0:a.belong)?y!==t.tradeData&&A(t.tradeData):A({belong:void 0,tradeValue:0,balance:0}),e()})));case 1:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),chargeFeeToken:"ETH",chargeFeeTokenList:M,handleOnAddressChange:function(e){R(e)},handleAddressError:function(e){return{error:!1,message:""}}};return{withdrawAlertText:s,withdrawToastOpen:c,setWithdrawToastOpen:r,withdrawProps:z}}(),r=c.withdrawAlertText,o=c.withdrawToastOpen,i=c.setWithdrawToastOpen,s=c.withdrawProps,u=Qa().etherscanUrl;Ro();var l=Object(B.Rb)(),b=l.modals,p=b.isShowAccount,m=b.isShowConnect,f=l.setShowConnect,j=l.setShowAccount;return Object(fc.jsxs)(fc.Fragment,{children:[Object(fc.jsx)(B.kb,{alertText:r,open:o,autoHideDuration:L,setOpen:i}),Object(fc.jsx)(B.M,{transferProps:a,withDrawProps:s,depositProps:n,resetProps:{},ammProps:{},swapProps:{},_height:"var(--modal-height)",_width:"var(--modal-width)"}),Object(fc.jsx)(Co,Object(d.a)({},Object(d.a)(Object(d.a)({},t),{},{open:m.isShow,onClose:function(){return f({isShow:!1})}}))),Object(fc.jsx)(Po,Object(d.a)({},Object(d.a)(Object(d.a)({},t),{},{etherscanUrl:u,open:p.isShow,onClose:function(){return j({isShow:!1})}})))]})})),Bo=function(){return Object(fc.jsxs)(p.a,{children:[Object(fc.jsx)(jc,{}),Object(fc.jsx)(ar.a,{maxWidth:"lg",style:{minHeight:"calc(100% - 64px - 32px)",display:"flex",flexDirection:"column"},children:Object(fc.jsx)(kc.a,{display:"flex",flex:1,alignItems:"stretch",flexDirection:"row",marginTop:3,children:Object(fc.jsxs)(m.c,{children:[Object(fc.jsx)(m.a,{exact:!0,component:tr,path:"/"}),Object(fc.jsx)(m.a,{exact:!0,component:_c,path:"/markets"}),Object(fc.jsx)(m.a,{component:tr,path:"/trading/lite"}),Object(fc.jsx)(m.a,{component:tr,path:"/trading/lite(/:symbol)"}),Object(fc.jsx)(m.a,{exact:!0,component:So,path:"/mining"}),Object(fc.jsx)(m.a,{exact:!0,component:zr,path:"/layer2"}),Object(fc.jsx)(m.a,{exact:!0,component:zr,path:"/layer2/assets"}),Object(fc.jsx)(m.a,{exact:!0,component:zr,path:"/layer2/my-liquidity"}),Object(fc.jsx)(m.a,{exact:!0,component:zr,path:"/layer2/history"}),Object(fc.jsx)(m.a,{exact:!0,component:zr,path:"/layer2/order"}),Object(fc.jsx)(m.a,{exact:!0,component:zr,path:"/layer2/rewards"}),Object(fc.jsx)(m.a,{exact:!0,component:zr,path:"/layer2/setting"}),Object(fc.jsx)(m.a,{exact:!0,component:xo,path:"/liquidity"}),Object(fc.jsx)(m.a,{exact:!0,component:xo,path:"/liquidity/pools/*"}),Object(fc.jsx)(m.a,{exact:!0,component:xo,path:"/liquidity/pools"}),Object(fc.jsx)(m.a,{exact:!0,component:xo,path:"/liquidity/amm-mining"}),Object(fc.jsx)(m.a,{exact:!0,component:xo,path:"/liquidity/my-liquidity"}),Object(fc.jsx)(nr,{children:Object(fc.jsx)(m.a,{exact:!0,path:"/debug"})})]})})}),Object(fc.jsx)(Lo,{})]})},Uo=a(1727),Fo=a(61),Ko=function(e){var t=e.chainId,a=Dn.getState().system.chainId;return"unknown"===t?(Dn.dispatch(N({wrongChain:!0,_chainId:t})),Wn.sendUpdateAccStatusAndReset(v.a.ERROR_NETWORK),!1):t!==a&&"unknown"!==a&&"unknown"!==t?(Dn.dispatch(N({_chainId:t})),Dn.dispatch(jt({chainId:t})),Wn.sendUpdateAccStatusAndReset(v.a.UN_CONNECT),!0):(Dn.dispatch(N({wrongChain:!1,_chainId:t})),!0)},Jo=function(e){var t=Dn.getState().account;""===t.accAddress||t.accAddress!==e?(Za("After connect >>,account part: diff account, clean layer2"),Dn.dispatch(M(void 0)),Wn.sendCheckAccount(e)):e&&""!==e&&(Za("After connect >>,checkAccount: step1 address",e),t&&-1===t.accountId?(Za("After connect >>,checkAccount: step1 no account Id"),Wn.sendCheckAccount(e)):t.accountId&&t.apiKey&&t.eddsaKey?(Za("After connect >>,checkAccount: step1 have activate account from store, account:",t),Wn.sendAccountSigned()):(Za("After connect >>,checkAccount: step1 account locked"),Wn.sendAccountLock()))};function Wo(e){var t=e.state,a=cn().getUserRewards;!function(e){e.state;var t=_(),a=t.account,n=t.shouldShow,c=t.resetAccount,r=t.statusUnset,o=t.setShouldShow,i=t.status,s=Qa(),u=s.updateSystem,l=(s.chainId,Object(B.Rb)().setShowConnect),d=w.a.useState(v.J.DONE),b=Object(we.a)(d,2),p=b[0],m=b[1];w.a.useEffect((function(){p===v.J.PENDING&&i===v.J.DONE&&(m(v.J.DONE),r())}),[p,i]);var f=w.a.useCallback(function(){var e=Object(k.a)(h.a.mark((function e(t){var a,c,r,i;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.accounts,c=t.chainId,r=a[0],Za("After connect >>,network part start: step1 networkUpdate"),i=Ko({chainId:c}),Za("After connect >>,network part done: step2 check account"),i&&Jo(r),o(!1),l({isShow:null!==n&&void 0!==n&&n,step:B.Ab.SuccessConnect}),e.next=10,Object(be.I)(1e3);case 10:l({isShow:!1,step:B.Ab.SuccessConnect});case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[n,l,o]),j=w.a.useCallback(Object(k.a)(h.a.mark((function e(){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c({shouldUpdateProvider:!0});case 2:m(v.J.PENDING);case 3:case"end":return e.stop()}}),e)}))),[c]),O=w.a.useCallback(function(){var e=Object(k.a)(h.a.mark((function e(t){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.type,t.errorObj,u({chainId:a._chainId?a._chainId:1}),c(),r(),Za("Error");case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[c,r,u,a._chainId]);Object(La.b)({handleAccountDisconnect:j,handleError:O,handleConnect:f})}({state:t});var n=It(),c=n.updateWalletLayer1,r=n.resetLayer1,o=n.status,i=n.statusUnset,s=an(),u=s.updateWalletLayer2,l=s.resetLayer2,d=s.status,b=s.statusUnset,p=_(),m=p.account,f=p.status;p.statusUnset;w.a.useEffect((function(){if(f===v.J.UNSET&&t===v.J.DONE){switch(m.readyState){case"UN_CONNECT":case"ERROR_NETWORK":r();break;case"NO_ACCOUNT":case"DEPOSITING":case"LOCKED":l(),o!==v.J.PENDING&&c();break;case"ACTIVATED":o!==v.J.PENDING&&c(),d!==v.J.PENDING&&u()}a()}}),[f,t,m.readyState]),w.a.useEffect((function(){switch(o){case"ERROR":case"DONE":i()}}),[o]),w.a.useEffect((function(){switch(d){case"ERROR":case"DONE":b()}}),[d])}var Ho;a(278);var Vo,Go,Yo=Object(Cc.a)(kc.a)(Ho||(Ho=Object(b.a)(["\n  background-image: url('./static/images/error_bg.png');\n  background-repeat: no-repeat;\n  background-size: contain;\n  background-position: bottom;\n  white-space: pre-wrap;\n  //h2{\n  //  position: relative;\n  //}\n"]))),qo=function(e){var t=e.messageKey,a=Object(qc.a)("error").t;return Object(fc.jsx)(fc.Fragment,{children:Object(fc.jsx)(ar.a,{children:Object(fc.jsx)(Yo,{flex:1,display:"flex",alignItems:"flex-start",justifyContent:"center",flexDirection:"column",marginTop:4,height:680,maxWidth:1200,children:Object(fc.jsxs)(kc.a,{textAlign:"center",position:"relative",left:128,top:-64,children:[Object(fc.jsx)(ur.a,{component:"h2",variant:"h3",children:a(t)}),Object(fc.jsx)(ur.a,{marginY:2,component:"p",variant:"body1",color:"textSecondary",children:Object(fc.jsxs)(Er.a,{i18nKey:"labelConnectUs",children:["If you believe this is indeed a bug, please ",Object(fc.jsx)(uo.a,{component:"a",onClick:function(e){window.location.href=function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"report to loopring website",a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"Body Content",n=null!==(e=Object({NODE_ENV:"production",PUBLIC_URL:".",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_RPC_URL_1:"https://mainnet.eth.loopring.network",REACT_APP_MAGIC_API_KEY:"pk_test_398B82F5F0E88874",REACT_APP_API_URL:"api.loopring.network",REACT_APP_RPC_URL_5:"https://goerli.infura.io/v3/84842078b09946638c03157f83405213",REACT_APP_API_URL_UAT:"uat2.loopring.io",REACT_APP_PORTIS_DAPP_ID:"e9be171c-2b7f-4ff0-8db9-327707511ee2",REACT_APP_WALLET_CONNECT_BRIDGE:"https://bridge.walletconnect.org",REACT_APP_FORTMATIC_API_KEY:"pk_test_A6260FCBAA2EBDFB"}).CONTACT_US_EMAIL)&&void 0!==e?e:"contact@loopring.io";return"mailto:".concat(n,"?subject=").concat(t,"&body=").concat(a)}(),e.preventDefault()},children:"contact us"})," ",Object(fc.jsx)("br",{})," We would appreciate your feedback"]})})]})})})})},zo=Object(Cc.a)(kc.a)(Vo||(Vo=Object(b.a)(["\n  //background: var(--color-mask);\n  ","\n\n  position: absolute;\n  top: 0;\n  bottom: 0;\n  left: 0;\n  right: 0;\n  width: 0;\n  z-index: 500;\n  height: 100%;\n  width: 100%;\n  svg path,\n  svg rect{\n    fill: var(--color-primary)\n  }\n"])),(function(e){var t=e.theme;return Object(B.Db)({theme:t})})),Xo=function(){Object(qc.a)("layout").t;return Object(fc.jsx)(fc.Fragment,{children:Object(fc.jsx)(zo,{flex:1,display:"flex",alignItems:"center",justifyContent:"center",flexDirection:"column",height:"100%",width:"100%",children:Object(fc.jsx)("div",{className:"loader loader--style3",title:"2",children:Object(fc.jsx)("svg",{version:"1.1",id:"loader-1",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",x:"0px",y:"0px",width:"40px",height:"40px",viewBox:"0 0 50 50",enableBackground:"new 0 0 50 50",xmlSpace:"preserve",children:Object(fc.jsx)("path",{fill:"#000",d:"M43.935,25.145c0-10.318-8.364-18.683-18.683-18.683c-10.318,0-18.683,8.365-18.683,18.683h4.068c0-8.071,6.543-14.615,14.615-14.615c8.072,0,14.615,6.543,14.615,14.615H43.935z",children:Object(fc.jsx)("animateTransform",{attributeType:"xml",attributeName:"transform",type:"rotate",from:"0 25 25",to:"360 25 25",dur:"0.6s",repeatCount:"indefinite"})})})})})})},Qo=function(){var e=Object(Dr.f)(),t=function(){var e=w.a.useState("PENDING"),t=Object(we.a)(e,2),a=t[0],n=t[1],c=_(),r=c.account,o=c.updateAccount,i=c.resetAccount,s=(c.status,c.statusUnset,We()),u=s.status,l=s.statusUnset,d=ne(),b=d.status,p=d.statusUnset,m=Qa(),f=m.updateSystem,j=m.status,O=m.statusUnset,x=ue(),g=x.status,y=x.statusUnset,A=Xa(),S=A.status,I=A.statusUnset;return Uc(Object(k.a)(h.a.mark((function e(){var t,a,n,c,s,u;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(""===r.accAddress||!r.connectName||"unknown"===r.connectName){e.next=28;break}return e.prev=1,e.next=4,La.a[r.connectName](r.accAddress);case 4:if(o({}),!La.a.usedProvide||!La.a.usedWeb3){e.next=19;break}if(null===(t=Number(null===(a=La.a.usedProvide)||void 0===a||null===(n=a.connector)||void 0===n?void 0:n.chainId))||void 0===t){e.next=10;break}e.t0=t,e.next=15;break;case 10:return e.t1=Number,e.next=13,La.a.usedWeb3.eth.getChainId();case 13:e.t2=e.sent,e.t0=(0,e.t1)(e.t2);case 15:return c=e.t0,void 0===be.e[c]&&(c=r._chainId&&"unknown"!==r._chainId?r._chainId:be.e.MAINNET),f({chainId:c}),e.abrupt("return");case 19:e.next=26;break;case 21:e.prev=21,e.t3=e.catch(1),La.c.sendDisconnect("","error at init loading  ".concat(e.t3,", disconnect")),s=r._chainId&&"unknown"!==r._chainId?r._chainId:be.e.MAINNET,f({chainId:s});case 26:e.next=31;break;case 28:""!==r.accAddress&&"unknown"!==r.connectName||i(),u=r._chainId&&"unknown"!==r._chainId?r._chainId:be.e.MAINNET,f({chainId:u});case 31:case"end":return e.stop()}}),e,null,[[1,21]])}))),[]),w.a.useEffect((function(){switch(j){case"PENDING":a!==v.J.PENDING&&n(v.J.PENDING);break;case"ERROR":O(),n("ERROR");break;case"DONE":O()}}),[j]),w.a.useEffect((function(){switch(u){case"ERROR":l(),n("ERROR");break;case"DONE":l()}switch(b){case"ERROR":p(),n("ERROR");break;case"DONE":p()}u===v.J.UNSET&&b===v.J.UNSET&&n("DONE")}),[u,b]),w.a.useEffect((function(){switch(g){case"ERROR":case"DONE":y()}}),[g]),w.a.useEffect((function(){switch(S){case"ERROR":console.log("ERROR","get ticker error,ui"),I();break;case"PENDING":break;case"DONE":I()}}),[S]),Wo({state:a}),{state:a}}().state;return Object(fc.jsxs)(fc.Fragment,{children:[Object(fc.jsx)(Uo.a,{styles:Object(Fo.b)(Go||(Go=Object(b.a)([" \n      ",";\n      body{\n          ","\n      }\n      body:before {\n        ","\n      }\n      //#root{\n      //  display: flex;\n      //  flex-direction: column;\n      //}\n}"])),Object(v.hb)({theme:e}),"dark"===e.mode?"\n            color: ".concat(e.colorBase.textPrimary,";\n          "):"","dark"===e.mode?"\n            background: var(--color-global-bg);\n       ":"")}),Object(fc.jsx)(sr,{children:"PENDING"===t?Object(fc.jsx)(Xo,{}):"ERROR"===t?Object(fc.jsx)(qo,Object(d.a)({},v.t.NO_NETWORK_ERROR)):Object(fc.jsx)(fc.Fragment,{children:Object(fc.jsx)(Bo,{})})})]})},Zo=a(1746),$o=a(187),ei=a(1697),ti=a(1698),ai=a(876),ni=[Object(v.nb)($o.b,{dateAdapter:ei.a}),Object(v.nb)(ti.a,{i18n:v.mb}),Object(v.nb)(Zo.a,{theme:Object(v.fb)("dark")}),Object(v.nb)(Dr.c,{theme:Object(v.fb)("dark")}),Object(v.nb)(s.a,{store:Dn}),Object(v.nb)(ai.a,{persistor:En,loading:null})];l.a.render(Object(fc.jsx)(v.H,{providers:ni,children:Object(fc.jsx)(Qo,{})}),document.getElementById("root"))}},[[1583,8,4,2,3,1,6,7,5]]]);
//# sourceMappingURL=main~06837ae4.761bbb4f.chunk.js.map