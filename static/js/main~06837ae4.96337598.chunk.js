(this["webpackJsonp@loopring-web/webapp"]=this["webpackJsonp@loopring-web/webapp"]||[]).push([[0],{1581:function(e,t,a){"use strict";a.r(t);var n=a(51),c=a(142),r=a.n(c),o=a(2),i=a(13),s=a(124),u=a(91),l=a(25),d=a(4),b=a(1608),p=a(3),m=a.n(p),f=a(9),v=a(12),j=a(1),O=a.n(j),h=a(72),k={accAddress:"",readyState:d.a.UN_CONNECT,accountId:-1,apiKey:"",eddsaKey:"",publicKey:{},level:"",nonce:void 0,keyNonce:void 0,connectName:d.l.unknown,_chainId:1,status:"PENDING",errorMessage:null},x=Object(h.c)({name:"account",initialState:k,reducers:{updateAccountStatus:function(e,t){e.status=d.M.PENDING},changeShowModel:function(e,t){var a=t.payload._userOnModel;e._userOnModel=a},nextAccountStatus:function(e,t){if(t.error)e.status=d.M.ERROR,e.errorMessage=t.error;else{var a=t.payload,n=a.accAddress,c=a.readyState,r=a.accountId,o=a.wrongChain,i=a.level,s=a.apiKey,u=a.eddsaKey,l=a._chainId,b=a.nonce,p=a.connectName;void 0!==n&&(e.accAddress=n),void 0!==o&&(e.wrongChain=o),c&&(e.readyState=c),void 0!==r&&(e.accountId=r),void 0!==i&&(e.level=i),void 0!==s&&(e.apiKey=s),void 0!==u&&(e.eddsaKey=u),void 0!==p&&(e.connectName=p),void 0!==l&&(e._chainId=l),void 0!==b&&(e.nonce=b),e.status=d.M.DONE}},cleanAccountStatus:function(e,t){e.status=d.M.PENDING},statusUnset:function(e){e.status=d.M.UNSET}}}),g=x,w=x.actions,y=w.updateAccountStatus,A=w.changeShowModel,S=w.cleanAccountStatus,I=w.nextAccountStatus,M=w.statusUnset,N=["status","errorMessage"];function C(){var e=Object(n.c)((function(e){return e.account})),t=e.status,a=e.errorMessage,c=Object(l.a)(e,N),r=Object(n.b)(),o=O.a.useCallback((function(e){r(S(e))}),[r]),i=O.a.useCallback((function(e){r(y(e))}),[r]),s=O.a.useMemo((function(){return c._userOnModel}),[c]),u=O.a.useCallback((function(e){r(A({_userOnModel:e}))}),[r]);return{account:c,resetAccount:o,shouldShow:s,setShouldShow:u,updateAccount:i,statusUnset:O.a.useCallback((function(){r(M(void 0))}),[r]),status:t,errorMessage:a}}var T=a(11),E=a(30),P=a(137),D=a(479),_=a(860),R=a.n(_),L=a(589),B=a.n(L),U=a(431),F=a(590),K=a.n(F),W=a(861),V=a(446),H=a(862),J=Object(h.b)("global/updateVersion"),G={ammMap:void 0,__timer__:-1,status:"PENDING",errorMessage:null},q=Object(h.c)({name:"ammMap",initialState:G,reducers:{getAmmMap:function(e,t){e.status=d.M.PENDING},getAmmMapStatus:function(e,t){t.error&&(e.status=d.M.ERROR,e.errorMessage=t.error);var a=t.payload,n=a.ammMap,c=a.__timer__;n&&(e.ammMap=n),c&&(e.__timer__=c),e.status=d.M.DONE},updateRealTimeAmmMap:function(e,t){e.status=d.M.PENDING},statusUnset:function(e){e.status=d.M.UNSET}}}),Y=q.actions,z=Y.getAmmMap,X=Y.getAmmMapStatus,Q=Y.statusUnset,Z=Y.updateRealTimeAmmMap,$=function(){var e=Object(n.c)((function(e){return e.amm.ammMap})),t=Object(n.b)();return Object(o.a)(Object(o.a)({},e),{},{statusUnset:O.a.useCallback((function(){return t(Q(void 0))}),[t]),getAmmMap:O.a.useCallback((function(){return t(z(void 0))}),[t])})},ee=Object(h.c)({name:"ammActivityMap",initialState:{ammActivityMap:{},status:"PENDING",errorMessage:null},reducers:{getAmmActivityMap:function(e,t){e.status=d.M.PENDING},getAmmActivityMapStatus:function(e,t){t.error&&(e.status=d.M.ERROR,e.errorMessage=t.error),e.ammActivityMap=Object(o.a)({},t.payload.ammActivityMap),e.status=d.M.DONE},statusUnset:function(e){e.status=d.M.UNSET}}}),te=ee.actions,ae=te.getAmmActivityMap,ne=te.getAmmActivityMapStatus,ce=te.statusUnset;function re(){var e=Object(n.c)((function(e){return e.amm.ammActivityMap})),t=Object(n.b)();return Object(o.a)(Object(o.a)({},e),{},{statusUnset:O.a.useCallback((function(){return t(ce(void 0))}),[t]),getAmmActivityMap:O.a.useCallback((function(){return t(ae(void 0))}),[t])})}var oe=a(35),ie=a(14),se=a(17);var ue=function e(){Object(ie.a)(this,e)};ue.userAPI=void 0,ue.exchangeAPI=void 0,ue.ammpoolAPI=void 0,ue.walletAPI=void 0,ue.wsAPI=void 0,ue.InitApi=function(e){ue.userAPI=new se.l({chainId:e}),ue.exchangeAPI=new se.f({chainId:e}),ue.ammpoolAPI=new se.c({chainId:e}),ue.walletAPI=new se.m({chainId:e}),ue.wsAPI=new se.n({chainId:e})};var le=m.a.mark(pe),de=m.a.mark(me),be=function(){var e=Object(f.a)(m.a.mark((function e(){var t,a;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!ue.ammpoolAPI){e.next=8;break}return e.next=3,ue.ammpoolAPI.getAmmPoolActivityRules();case 3:return t=e.sent,a=t.groupByRuleTypeAndStatus,e.abrupt("return",{data:a});case 8:return e.abrupt("return",{data:void 0});case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();function pe(){var e,t;return m.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,Object(oe.b)(be);case 3:return e=a.sent,t=e.data,a.next=7,Object(oe.d)(ne({ammActivityMap:t}));case 7:a.next=13;break;case 9:return a.prev=9,a.t0=a.catch(0),a.next=13,Object(oe.d)(ne(a.t0));case 13:case"end":return a.stop()}}),le,null,[[0,9]])}function me(){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(oe.a)([Object(oe.f)(ae,pe)]);case 2:case"end":return e.stop()}}),de)}var fe=a(7),ve=m.a.mark(ge),je=m.a.mark(we),Oe=m.a.mark(ye),he=m.a.mark(Ae),ke=function(e){var t=e.ammPoolState,a=e.keyPair,n=Fn.getState().tokenMap.idIndex,c=a.match(/(\w+)-(\w+)/i),r=Object(fe.a)(c,3),i=r[1],s=r[2],u=Fn.getState().system,l=u.forex,d=u.faitPrices;if(n&&i&&s&&d&&l){var b={amountDollar:parseFloat(t.liquidityUSD),amountYuan:parseFloat(t.liquidityUSD)/(l||6.5),totalLPToken:Kn("LP-"+a,t.lpLiquidity),totalA:Kn(i,t.liquidity[0]),totalB:Kn(s,t.liquidity[1]),rewardValue:t.rewards[0]?Kn(n[t.rewards[0].tokenId],t.rewards[0].volume):void 0,rewardToken:t.rewards[0]?n[t.rewards[0].tokenId]:void 0,rewardValue2:t.rewards[1]?Kn(n[t.rewards[1].tokenId],t.rewards[1].volume):void 0,rewardToken2:t.rewards[1]?n[t.rewards[1].tokenId]:void 0},p=Wn(i,t.fees[0]),m=Wn(s,t.fees[1]),f=d[i]&&d[s]?Object(se.J)(p||0).times(d[i].price).plus(Object(se.J)(m||0).times(d[s].price)):void 0,v=f?f.times(l):void 0;return Object(o.a)(Object(o.a)({},b),{},{feeA:null===p||void 0===p?void 0:p.toNumber(),feeB:null===m||void 0===m?void 0:m.toNumber(),feeDollar:f?f.toNumber():void 0,feeYuan:v?v.toNumber():void 0,tradeFloat:{change:void 0,timeUnit:"24h"},APY:1*parseInt(t.apyBips)/100})}},xe=function(){var e=Object(f.a)(m.a.mark((function e(t){var a,n,c,r,i,s,u,l,d;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.ammpools,ue.ammpoolAPI){e.next=3;break}return e.abrupt("return",void 0);case 3:return c={},e.next=6,null===(a=ue.ammpoolAPI)||void 0===a?void 0:a.getAmmPoolStats();case 6:return r=e.sent,i=r.ammPoolStats,(s=Fn.getState().amm.ammMap.__timer__)&&-1!==s&&clearInterval(s),s=setInterval(Object(f.a)(m.a.mark((function e(){var t;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(ue.ammpoolAPI){e.next=2;break}return e.abrupt("return",void 0);case 2:return e.next=4,ue.ammpoolAPI.getAmmPoolStats();case 4:t=e.sent.ammPoolStats,Fn.dispatch(Z({ammPoolStats:t}));case 6:case"end":return e.stop()}}),e)}))),9e5),u=Fn.getState(),l=u.tokenMap,l.coinMap,d=l.idIndex,Reflect.ownKeys(n).forEach(function(){var e=Object(f.a)(m.a.mark((function e(t){var a,r,s,u;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:(a=n[t]).market===t&&a.tokens.pooled&&d&&(r=d[a.tokens.pooled[0]],s=d[a.tokens.pooled[1]],u=Object(o.a)(Object(o.a)({coinA:r,coinB:s,isNew:!(Date.now()-Number(a.createdAt)>2592e5),isActivity:7===a.status,address:a.address},ke({ammPoolState:i[t],keyPair:"".concat(r,"-").concat(s)})),{},{__rawConfig__:a}),c[a.market]=u);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),e.abrupt("return",{ammMap:c,__timer__:s});case 13:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();function ge(e){var t,a,n,c,r;return m.a.wrap((function(o){for(;;)switch(o.prev=o.next){case 0:return t=e.payload,o.prev=1,a=t.ammpools,o.next=5,Object(oe.b)(xe,{ammpools:a});case 5:return n=o.sent,c=n.ammMap,r=n.__timer__,o.next=10,Object(oe.d)(X({ammMap:c,__timer__:r}));case 10:o.next=16;break;case 12:return o.prev=12,o.t0=o.catch(1),o.next=16,Object(oe.d)(X(o.t0));case 16:case"end":return o.stop()}}),ve,null,[[1,12]])}function we(e){var t,a,n;return m.a.wrap((function(c){for(;;)switch(c.prev=c.next){case 0:return t=e.payload,c.prev=1,a=t.ammPoolStats,n=Fn.getState().amm.ammMap.ammMap,a&&Reflect.ownKeys(a).map((function(e){var t=e.replace("AMM-","");return n[e]=Object(o.a)(Object(o.a)({},n[e]),ke({ammPoolState:a[e],keyPair:t})),n})),c.next=7,Object(oe.d)(X({ammMap:n}));case 7:c.next=13;break;case 9:return c.prev=9,c.t0=c.catch(1),c.next=13,Object(oe.d)(X(c.t0));case 13:case"end":return c.stop()}}),je,null,[[1,9]])}function ye(){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(oe.a)([Object(oe.f)(z,ge)]);case 2:case"end":return e.stop()}}),Oe)}function Ae(){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(oe.a)([Object(oe.f)(Z,we)]);case 2:case"end":return e.stop()}}),he)}var Se=[Object(oe.c)(ye),Object(oe.c)(Ae)],Ie=Object(P.b)({ammMap:q.reducer,ammActivityMap:ee.reducer}),Me=[Object(oe.c)(me)].concat(Object(E.a)(Se)),Ne={coinMap:{},totalCoinMap:{},addressIndex:void 0,tokenMap:void 0,marketMap:void 0,idIndex:void 0,status:"PENDING",errorMessage:null},Ce=Object(h.c)({name:"tokenMap",initialState:Ne,reducers:{getTokenMap:function(e,t){e.status=d.M.PENDING},getTokenMapStatus:function(e,t){t.error&&(e.status=d.M.ERROR,e.errorMessage=t.error);var a=t.payload,n=a.tokenMap,c=a.totalCoinMap,r=a.marketMap,o=a.addressIndex,i=a.idIndex,s=a.coinMap,u=a.marketArray,l=a.marketCoins;n&&(e.tokenMap=n),r&&(e.marketMap=r),o&&(e.addressIndex=o),i&&(e.idIndex=i),s&&(e.coinMap=s),c&&(e.totalCoinMap=c),u&&(e.marketArray=u),l&&(e.marketCoins=l),e.status=d.M.DONE},statusUnset:function(e){e.status=d.M.UNSET}}}),Te=Ce.actions,Ee=Te.getTokenMap,Pe=Te.getTokenMapStatus,De=Te.statusUnset;function _e(){var e=Object(n.c)((function(e){return e.tokenMap})),t=Object(n.b)();return Object(o.a)(Object(o.a)({},e),{},{statusUnset:O.a.useCallback((function(){return t(De(void 0))}),[t]),getTokenMap:O.a.useCallback((function(e){return t(Ee(e))}),[t])})}var Re=a(1722);function Le(e){if(e){var t=Re.a.getAddress(e.address);return"https://exchange.loopring.io/assets/images/ethereum/assets/".concat(t,"/logo.png")}return""}var Be=m.a.mark(Ke),Ue=m.a.mark(We),Fe=function(){var e=Object(f.a)(m.a.mark((function e(t){var a,n,c,r,i,s,u,l,d;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.tokensMap,n=t.pairs,c=t.marketArr,r=t.tokenArr,i={},s={},u=a,l={},d={},Reflect.ownKeys(a).forEach((function(e){var t,c,r={icon:(t=e,c=a,Le(c[t])),name:e,simpleName:e,description:"",company:""};e.startsWith("LP-")||(i[e]=r),s[e]=r,n[e]&&n[e].tokenList&&(a[e].tradePairs=n[e].tokenList),l=Object(o.a)(Object(o.a)({},l),{},Object(v.a)({},a[e].address,e)),d=Object(o.a)(Object(o.a)({},d),{},Object(v.a)({},a[e].tokenId,e))})),e.abrupt("return",{data:{coinMap:i,totalCoinMap:s,addressIndex:l,idIndex:d,tokenMap:u,marketArray:c,marketCoins:r}});case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();function Ke(e){var t,a,n,c,r,i,s,u;return m.a.wrap((function(l){for(;;)switch(l.prev=l.next){case 0:return t=e.payload,l.prev=1,a=t.tokensMap,n=t.marketMap,c=t.pairs,r=t.marketArr,i=t.tokenArr,l.next=5,Object(oe.b)(Fe,{tokensMap:a,pairs:c,marketArr:r,tokenArr:i});case 5:return s=l.sent,u=s.data,l.next=9,Object(oe.d)(Pe(Object(o.a)(Object(o.a)({},u),{},{marketMap:n})));case 9:l.next=15;break;case 11:return l.prev=11,l.t0=l.catch(1),l.next=15,Object(oe.d)(Pe(l.t0));case 15:case"end":return l.stop()}}),Be,null,[[1,11]])}function We(){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(oe.a)([Object(oe.f)(Ee,Ke)]);case 2:case"end":return e.stop()}}),Ue)}var Ve=[Object(oe.c)(We)],He=Object(h.c)({name:"tickerMap",initialState:{tickerMap:{},status:"PENDING",errorMessage:null},reducers:{getTicker:function(e,t){e.status=d.M.PENDING},getTickers:function(e,t){e.status=d.M.PENDING},getTickerStatus:function(e,t){t.error&&(e.status=d.M.ERROR,e.errorMessage=t.error),e.tickerMap=t.payload.tickerMap,e.status=d.M.DONE},statusUnset:function(e){e.status=d.M.UNSET}}}),Je=He.actions,Ge=Je.getTicker,qe=Je.getTickers,Ye=Je.getTickerStatus,ze=Je.statusUnset,Xe=m.a.mark(et),Qe=m.a.mark(tt),Ze=m.a.mark(at),$e=function(){var e=Object(f.a)(m.a.mark((function e(t){var a,n;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(ue.exchangeAPI){e.next=2;break}return e.abrupt("return",void 0);case 2:return e.next=4,ue.exchangeAPI.getMixTicker({market:t.join(",")});case 4:return a=e.sent,n=pc({tickerMap:a.tickMap}),e.abrupt("return",{data:n});case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();function et(e){var t,a,n,c,r;return m.a.wrap((function(o){for(;;)switch(o.prev=o.next){case 0:if(t=e.payload,o.prev=1,a=t.tickerKey,n=t.tickerKeys,!(a||n&&n.length)){o.next=12;break}return o.next=6,Object(oe.b)($e,a?[a]:n);case 6:return c=o.sent,r=c.data,o.next=10,Object(oe.d)(Ye({tickerMap:r}));case 10:o.next=13;break;case 12:throw new d.o(d.u.NO_TOKEN_KEY_LIST);case 13:o.next=19;break;case 15:return o.prev=15,o.t0=o.catch(1),o.next=19,Object(oe.d)(Ye(o.t0));case 19:case"end":return o.stop()}}),Xe,null,[[1,15]])}function tt(){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(oe.a)([Object(oe.f)(Ge,et)]);case 2:case"end":return e.stop()}}),Qe)}function at(){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(oe.a)([Object(oe.f)(qe,et)]);case 2:case"end":return e.stop()}}),Ze)}var nt,ct,rt=[Object(oe.c)(tt),Object(oe.c)(at)];!function(e){e.DEV="DEV",e.UAT="UAT",e.PROD="PROD"}(nt||(nt={})),function(e){e.NONETWORK="unknown"}(ct||(ct={}));var ot={env:nt.PROD,chainId:"unknown",baseURL:"",socketURL:"",etherscanUrl:"",faitPrices:void 0,gasPrice:void 0,forex:void 0,__timer__:-1,status:"PENDING",errorMessage:null,exchangeInfo:void 0,topics:[]},it=Object(h.c)({name:"system",initialState:ot,reducers:{updateSystem:function(e,t){e.chainId=t.payload.chainId,e.status=d.M.PENDING},updateRealTimeObj:function(e,t){var a=t.payload,n=a.forex,c=a.faitPrices,r=a.gasPrice;n&&(e.forex=n),c&&(e.faitPrices=c),r&&(e.gasPrice=r)},getSystemStatus:function(e,t){t.error&&(e.status=d.M.ERROR,e.errorMessage=t.error);var a=t.payload,n=a.env,c=a.baseURL,r=a.socketURL,o=a.faitPrices,i=a.gasPrice,s=a.forex,u=a.exchangeInfo,l=a.__timer__,b=a.etherscanUrl;n&&(e.env=n),r&&(e.socketURL=r),c&&(e.baseURL=c),o&&(e.faitPrices=o),i&&(e.gasPrice=i),s&&(e.forex=s),u&&(e.exchangeInfo=u),b&&(e.etherscanUrl=b),l&&(e.__timer__=l),e.status=d.M.DONE},statusUnset:function(e){e.status=d.M.UNSET}}}),st=it.actions,ut=st.updateSystem,lt=(st.setTopics,st.getSystemStatus),dt=(st.statusUnset,st.updateRealTimeObj),bt={walletLayer1:void 0,status:"DONE",errorMessage:null},pt=Object(h.c)({name:"walletLayer1",initialState:bt,reducers:{updateWalletLayer1:function(e,t){e.status=d.M.PENDING},reset:function(e,t){e.walletLayer1=void 0,e.status=d.M.UNSET},getWalletLayer1Status:function(e,t){t.error&&(e.status=d.M.ERROR,e.errorMessage=t.error),e.walletLayer1=Object(o.a)({},t.payload.walletLayer1),e.status=d.M.DONE},statusUnset:function(e){e.status=d.M.UNSET}}}),mt=pt.actions,ft=mt.updateWalletLayer1,vt=mt.getWalletLayer1Status,jt=mt.statusUnset,Ot=mt.reset;function ht(){var e=Object(n.c)((function(e){return e.walletLayer1})),t=Object(n.b)();return Object(o.a)(Object(o.a)({},e),{},{resetLayer1:O.a.useCallback((function(){t(Ot(void 0))}),[t]),statusUnset:O.a.useCallback((function(){return t(jt(void 0))}),[t]),updateWalletLayer1:O.a.useCallback((function(){return t(ft(void 0))}),[t])})}var kt,xt,gt=a(1699),wt=a(16),yt=a(1746),At=new yt.a,St=function(e){var t=pc({tickerMap:e});At.next({tickerMap:t})},It=function(){return At.asObservable()},Mt=new yt.a,Nt=function(e){return Mt.next({ammPoolMap:e})},Ct=new yt.a,Tt=function(e){var t=Fn.getState().tokenMap.idIndex;if(e&&t){var a=Object(v.a)({},t[e.tokenId],e);Ct.next(a)}},Et=function(){Ct.next(void 0)},Pt=function(){return Ct.asObservable()};!function(e){e.pingpong="pingpong",e.account="account",e.order="order",e.orderbook="orderbook",e.trade="trade",e.ticker="ticker",e.candlestick="candlestick",e.ammpool="ammpool"}(xt||(xt={}));var Dt=function(){function e(t){var a=this;Object(ie.a)(this,e),this._socketCallbackMap=void 0,this._loopringSocket=void 0,this.__wsTimer__={timer:-1,count:0},this._baseUrl=void 0,this.socketSendMessage=function(){var e=Object(f.a)(m.a.mark((function e(t){var n,c,r,o,i;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.socket,c=t.apiKey,e.prev=1,!n||!Reflect.ownKeys(n).length){e.next=15;break}if(a.clearInitTimer(!0),a.resetSocketEvents(),r=a.makeMessageArray({socket:n}),o=r.topics,a.isConnectSocket()){e.next=11;break}return e.next=9,a.socketConnect({topics:o,apiKey:c});case 9:e.next=12;break;case 11:null===(i=a._loopringSocket)||void 0===i||i.send(a.makeTopics(o,c));case 12:return e.abrupt("return",!0);case 15:return a.isConnectSocket()||a.socketClose(),e.abrupt("return",!1);case 17:e.next=22;break;case 19:throw e.prev=19,e.t0=e.catch(1),new d.o(d.u.SOCKET_ERROR);case 22:case"end":return e.stop()}}),e,null,[[1,19]])})));return function(t){return e.apply(this,arguments)}}(),this.socketClose=Object(f.a)(m.a.mark((function e(){var t;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=a._loopringSocket,e.abrupt("return",new Promise((function(e){t?(t.onclose=function(t){e("Socket is closed, ".concat(t.reason))},t.close()):Promise.resolve("no websocket")})));case 2:case"end":return e.stop()}}),e)}))),this.removeSocketEvents=function(e){a._socketCallbackMap&&a._socketCallbackMap[e]&&delete a._socketCallbackMap[e]},this.makeMessageArray=function(e){var t=e.socket,n=[],c=[];return Reflect.ownKeys(t).forEach((function(e){switch(e){case xt.ticker:(c=t[xt.ticker].map((function(e){return Object(se.E)(e)})))&&c.length&&(a.addSocketEvents(xt.ticker),n=[].concat(Object(E.a)(n),Object(E.a)(c)));break;case xt.account:t[xt.account]&&(c=[Object(se.v)()]),c&&c.length&&(a.addSocketEvents(xt.account),n=[].concat(Object(E.a)(n),Object(E.a)(c)));break;case xt.order:(c=t[xt.order].map((function(e){return Object(se.B)(e)})))&&c.length&&(a.addSocketEvents(xt.order),n=[].concat(Object(E.a)(n),Object(E.a)(c)));break;case xt.orderbook:(c=t[xt.orderbook].map((function(e){return Object(se.C)(e,0)})))&&c.length&&(a.addSocketEvents(xt.orderbook),n=[].concat(Object(E.a)(n),Object(E.a)(c)));break;case xt.trade:(c=t[xt.trade].map((function(e){return Object(se.F)(e)})))&&c.length&&(a.addSocketEvents(xt.trade),n=[].concat(Object(E.a)(n),Object(E.a)(c)));break;case xt.candlestick:(c=t[xt.candlestick].map((function(e){return Object(se.y)(e)})))&&c.length&&(a.addSocketEvents(xt.candlestick),n=[].concat(Object(E.a)(n),Object(E.a)(c)));break;case xt.ammpool:(c=t[xt.ammpool].map((function(e){return Object(se.w)(e)})))&&c.length&&(a.addSocketEvents(xt.ammpool),n=[].concat(Object(E.a)(n),Object(E.a)(c)))}})),{topics:n}},this.isConnectSocket=function(){return!(!a._loopringSocket||1!==a._loopringSocket.readyState)},this.makeTopics=function(e,t){var a={op:"sub",unsubscribeAll:"true",topics:e};return t&&(a.apiKey=t),JSON.stringify(a)},this.addSocketEvents=function(t,n){a._socketCallbackMap=Object(o.a)(Object(o.a)({},a._socketCallbackMap),{},Object(v.a)({},t,{fn:e.SocketEventMap[t],deps:n||[]}))},this.socketConnect=function(){var e=Object(f.a)(m.a.mark((function e(t){var n,c,r,o,i;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.topics,c=t.apiKey,e.prev=1,r=a,!ue.wsAPI||!n){e.next=13;break}return e.next=6,ue.wsAPI.getWsKey();case 6:o=e.sent,i=o.wsKey,a._loopringSocket=new WebSocket("".concat(a._baseUrl,"?wsApiKey=").concat(i)),a._loopringSocket.onopen=function(){console.warn("Socket>>Socket","WebSocket is open now."),r._loopringSocket&&r._loopringSocket.readyState===WebSocket.OPEN&&r._loopringSocket.send(r.makeTopics(n,c))},a._loopringSocket.onmessage=function(e){var t=e.data;if("ping"===t&&r._socketCallbackMap){var a,n,c;null===(a=r._socketCallbackMap)||void 0===a||null===(n=a.pingpong)||void 0===n||(c=n.fn).call.apply(c,[r,t].concat(Object(E.a)(r._socketCallbackMap.pingpong.deps)))}else{var o=JSON.parse(t),i=(o.topics,o.topic);if(i&&i.topic&&r._socketCallbackMap){var s,u,l=o.topic.topic,d=o.data;null===(s=r._socketCallbackMap[l.topic])||void 0===s||(u=s.fn).call.apply(u,[r,d].concat(Object(E.a)(r._socketCallbackMap[l.topic].deps)))}}return!1},a._loopringSocket.onclose=function(){var e=Object(f.a)(m.a.mark((function e(t){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r._loopringSocket&&(r._loopringSocket=void 0),console.log("Socket>>Socket","Socket is closed. Reconnect will be attempted in 1 second.",t.reason),r.clearInitTimer(),r.__wsTimer__.count<5&&(r.__wsTimer__.timer=setTimeout((function(){r.socketConnect.call(r,{topics:n,apiKey:c})}),1e3*r.__wsTimer__.count));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),a._loopringSocket.onerror=function(e){console.error("Socket>>Socket","Socket encountered error:","Closing socket",e)};case 13:e.next=19;break;case 15:e.prev=15,e.t0=e.catch(1),console.error("Socket>>Socket","connect error, not from reconnect"),a._loopringSocket&&a._loopringSocket.close();case 19:case"end":return e.stop()}}),e,null,[[1,15]])})));return function(t){return e.apply(this,arguments)}}(),this.clearInitTimer=function(e){a.__wsTimer__&&(-1!==a.__wsTimer__.timer&&clearTimeout(a.__wsTimer__.timer),a.__wsTimer__.timer=-1,a.__wsTimer__.count++),e&&(a.__wsTimer__={timer:-1,count:0})},this.resetSocketEvents=function(){a._socketCallbackMap=void 0,a.addSocketEvents(xt.pingpong,[a])},this._baseUrl=t}return Object(wt.a)(e,[{key:"loopringSocket",get:function(){return this._loopringSocket}},{key:"socketCallbackMap",get:function(){return this._socketCallbackMap}}]),e}();Dt.SocketEventMap=(kt={},Object(v.a)(kt,xt.account,(function(e){e.accountId;var t=e.totalAmount,a=e.tokenId,n=e.amountLocked,c=e.pending;Tt({tokenId:a,locked:n,total:t,pending:c})})),Object(v.a)(kt,xt.order,(function(e){})),Object(v.a)(kt,xt.orderbook,(function(e){})),Object(v.a)(kt,xt.trade,(function(e){})),Object(v.a)(kt,xt.ticker,(function(e){var t=Object(fe.a)(e,11),a=t[0],n=t[1],c=t[2],r=t[3],o=t[4],i=t[5],s=t[6],u=t[7],l=t[8],d=t[9],b=t[10],p=a.match(/(\w+)-(\w+)/i),m=Object(fe.a)(p,3),f=m[1],j=m[2],O=c,h=r,k=void 0===o||0===Number(o)?void 0:Object(se.J)(u).minus(o).div(o);St(Object(v.a)({},a,{symbol:a,base:f,quote:j,base_token_volume:O,quote_token_volume:h,timestamp:Number(n),change:k,base_fee_amt:void 0,quote_fee_amt:void 0,open:o,high:i,low:s,close:u,count:l,bid:d,ask:b}))})),Object(v.a)(kt,xt.candlestick,(function(e){})),Object(v.a)(kt,xt.candlestick,(function(e){})),Object(v.a)(kt,xt.ammpool,(function(e){var t=Object(fe.a)(e,5),a=t[0],n=t[1],c=t[2],r=Object(fe.a)(t[3],2),o=r[0],i=r[1],s=t[4];Nt({poolName:a,poolAddress:n,pooled:c,lp:{tokenId:o,volume:i},risky:s})})),Object(v.a)(kt,xt.pingpong,(function(e,t){"ping"===e&&t.loopringSocket.send("pong")})),kt);var _t=m.a.mark(Ut),Rt=m.a.mark(Ft),Lt=m.a.mark((function e(t){var a,n,c,r,o,i,s,u,l,d,b,p;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(oe.b)(Object(f.a)(m.a.mark((function e(){var t;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,null===(t=ue.exchangeAPI)||void 0===t?void 0:t.getTokens();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)}))));case 2:return a=e.sent,n=a.tokenSymbolMap,e.next=6,Object(oe.b)(Object(f.a)(m.a.mark((function e(){var t;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,null===(t=ue.ammpoolAPI)||void 0===t?void 0:t.getAmmPoolConf();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)}))));case 6:return c=e.sent,r=c.ammpools,e.next=10,Object(oe.b)(Object(f.a)(m.a.mark((function e(){var t;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",null===(t=ue.exchangeAPI)||void 0===t?void 0:t.getMixMarkets());case 1:case"end":return e.stop()}}),e)}))));case 10:return o=e.sent,i=o.pairs,s=o.marketArr,u=o.tokenArr,l=o.markets,Fn.dispatch(Ee({tokensMap:n,marketMap:l,pairs:i,marketArr:s,tokenArr:u})),e.next=18,Object(oe.e)("tokenMap/getTokenMapStatus");case 18:return Fn.dispatch(z({ammpools:r})),Fn.dispatch(ae({ammpools:r})),Fn.getState().tokenMap.status,e.next=23,Object(gt.a)(10);case 23:d=Fn.getState(),b=d.account,p=d.walletLayer1,b.accAddress&&void 0===p.walletLayer1&&Fn.dispatch(ft(void 0)),Fn.dispatch(M(void 0));case 26:case"end":return e.stop()}}),e)})),Bt=function(){var e=Object(f.a)(m.a.mark((function e(t){var a,n,c,r,o,i,s,u,l,b,p;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a="localhost"===window.location.hostname?nt.DEV:se.e.GOERLI===t?nt.UAT:nt.PROD,(t=se.e.GOERLI===t?se.e.GOERLI:se.e.MAINNET===t?se.e.MAINNET:ct.NONETWORK)!==ct.NONETWORK){e.next=6;break}throw new d.o(d.u.NO_NETWORK_ERROR);case 6:if(ue.InitApi(t),!ue.exchangeAPI){e.next=30;break}return e.next=10,ue.exchangeAPI.getExchangeInfo();case 10:return n=e.sent,c=n.exchangeInfo,e.next=14,ue.exchangeAPI.getFiatPrice({legal:"USD"});case 14:return r=e.sent.fiatPrices,e.next=17,ue.exchangeAPI.getFiatPrice({legal:"CNY"});case 17:return o=e.sent.fiatPrices,e.next=20,ue.exchangeAPI.getGasPrice();case 20:return e.t0=e.sent.gasPrice,i=e.t0/1e9,s=se.e.MAINNET===t?"https://".concat("api.loopring.network"):"https:/".concat("api.uat.loopring.pro"),u=se.e.MAINNET===t?"wss://ws.".concat("api.loopring.network","/v3/ws"):"wss://ws.".concat("api.uat.loopring.pro","/v3/ws"),l=se.e.MAINNET===t?"https://etherscan.io/address/":"https://goerli.etherscan.io/address/",window.loopringSocket=new Dt(u),b=o.USDT.price,p=function(e){return e&&-1!==e&&clearInterval(e),setInterval(Object(f.a)(m.a.mark((function e(){var t,a,n,c;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!ue.exchangeAPI){e.next=11;break}return e.next=3,ue.exchangeAPI.getFiatPrice({legal:"CNY"});case 3:return a=e.sent.fiatPrices,e.next=6,ue.exchangeAPI.getGasPrice();case 6:e.t0=e.sent.gasPrice,n=e.t0/1e9,c=null===(t=a.USDT)||void 0===t?void 0:t.price,Fn.dispatch(Z(void 0)),Fn.dispatch(dt({faitPrices:a,gasPrice:n,forex:c}));case 11:case"end":return e.stop()}}),e)}))),3e5)}(p=Fn.getState().system.__timer__),e.abrupt("return",{chainId:t,etherscanUrl:l,env:a,baseURL:s,socketURL:u,faitPrices:r,gasPrice:i,forex:b,exchangeInfo:c,__timer__:p});case 30:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();function Ut(e){var t,a,n,c,r,o,i,s,u,l,d;return m.a.wrap((function(b){for(;;)switch(b.prev=b.next){case 0:return t=e.payload,b.prev=1,a=t.chainId,b.next=5,Object(oe.b)(Bt,a);case 5:return n=b.sent,c=n.env,r=n.baseURL,o=n.faitPrices,i=n.gasPrice,s=n.forex,u=n.exchangeInfo,l=n.etherscanUrl,d=n.__timer__,b.next=16,Object(oe.d)(lt({env:c,baseURL:r,faitPrices:o,gasPrice:i,forex:s,exchangeInfo:u,etherscanUrl:l,__timer__:d}));case 16:return b.next=18,Object(oe.b)(Lt,a);case 18:b.next=24;break;case 20:return b.prev=20,b.t0=b.catch(1),b.next=24,Object(oe.d)(lt(b.t0));case 24:case"end":return b.stop()}}),_t,null,[[1,20]])}function Ft(){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(oe.a)([Object(oe.f)(ut,Ut)]);case 2:case"end":return e.stop()}}),Rt)}var Kt=[Object(oe.c)(Ft)],Wt=m.a.mark(Jt),Vt=m.a.mark(Gt),Ht=function(){var e=Object(f.a)(m.a.mark((function e(){var t,a,n,c,r,i,s,u,l;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=Fn.getState().account.accAddress,a=Fn.getState().tokenMap,n=a.tokenMap,!((c=a.marketCoins)&&n&&ue.exchangeAPI)){e.next=14;break}return e.next=5,ue.exchangeAPI.getEthBalances({owner:t});case 5:return r=e.sent,i=r.ethBalance,e.next=9,ue.exchangeAPI.getTokenBalances({owner:t,token:c.join()},n);case 9:return s=e.sent,(u=s.tokenBalances).ETH=i,u&&(l=Reflect.ownKeys(u).reduce((function(e,t){return Object(o.a)(Object(o.a)({},e),{},Object(v.a)({},t,{belong:t,count:Object(se.t)(n,t,u[t])}))}),{})),e.abrupt("return",{walletLayer1:l});case 14:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();function Jt(){var e,t;return m.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,Object(oe.b)(Ht);case 3:return e=a.sent,t=e.walletLayer1,a.next=7,Object(oe.d)(vt({walletLayer1:t}));case 7:a.next=13;break;case 9:return a.prev=9,a.t0=a.catch(0),a.next=13,Object(oe.d)(vt(a.t0));case 13:case"end":return a.stop()}}),Wt,null,[[0,9]])}function Gt(){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(oe.a)([Object(oe.f)(ft,Jt)]);case 2:case"end":return e.stop()}}),Vt)}var qt=[Object(oe.c)(Gt)],Yt={walletLayer2:void 0,status:"DONE",errorMessage:null},zt=Object(h.c)({name:"walletLayer2",initialState:Yt,reducers:{updateWalletLayer2:function(e,t){e.status=d.M.PENDING},reset:function(e,t){e.walletLayer2=void 0,e.status=d.M.UNSET},socketUpdateBalance:function(e,t){e.status=d.M.PENDING},getWalletLayer2Status:function(e,t){t.error&&(e.status=d.M.ERROR,e.errorMessage=t.error),e.walletLayer2=Object(o.a)({},t.payload.walletLayer2),e.status=d.M.DONE},statusUnset:function(e){e.status=d.M.UNSET}}}),Xt=zt.actions,Qt=Xt.updateWalletLayer2,Zt=Xt.socketUpdateBalance,$t=Xt.getWalletLayer2Status,ea=Xt.statusUnset,ta=Xt.reset,aa=m.a.mark(ia),na=m.a.mark(sa),ca=m.a.mark(ua),ra=m.a.mark(la),oa=function(){var e=Object(f.a)(m.a.mark((function e(){var t,a,n,c,r,i,s,u;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=Fn.getState().account,a=t.accountId,n=t.apiKey,c=Fn.getState().tokenMap,c.tokenMap,r=c.idIndex,c.marketCoins,!(n&&a&&ue.userAPI)){e.next=8;break}return e.next=5,ue.userAPI.getUserBalances({accountId:a,tokens:""},n);case 5:s=e.sent,(u=s.userBalances)&&(i=Reflect.ownKeys(u).reduce((function(e,t){return Object(o.a)(Object(o.a)({},e),{},Object(v.a)({},r[t],u[Number(t)]))}),{}));case 8:return e.abrupt("return",{walletLayer2:i});case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();function ia(){var e,t;return m.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,Object(oe.b)(oa);case 3:return e=a.sent,t=e.walletLayer2,a.next=7,Object(oe.d)($t({walletLayer2:t}));case 7:a.next=13;break;case 9:return a.prev=9,a.t0=a.catch(0),a.next=13,Object(oe.d)($t(a.t0));case 13:case"end":return a.stop()}}),aa,null,[[0,9]])}function sa(){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(oe.a)([Object(oe.f)(Qt,ia)]);case 2:case"end":return e.stop()}}),na)}function ua(e){var t,a;return m.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return t=e.payload,n.prev=1,a=Fn.getState().walletLayer2.walletLayer2,a=Object(o.a)(Object(o.a)({},a),t),n.next=6,Object(oe.d)($t({walletLayer2:a}));case 6:n.next=12;break;case 8:return n.prev=8,n.t0=n.catch(1),n.next=12,Object(oe.d)($t(n.t0));case 12:case"end":return n.stop()}}),ca,null,[[1,8]])}function la(){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(oe.a)([Object(oe.f)(Zt,ua)]);case 2:case"end":return e.stop()}}),ra)}var da=[Object(oe.c)(sa),Object(oe.c)(la)],ba={userRewardsMap:void 0,status:"PENDING",errorMessage:null,__timer__:-1},pa=Object(h.c)({name:"userRewardsMap",initialState:ba,reducers:{getUserRewards:function(e,t){e.status=d.M.PENDING},getUserRewardsStatus:function(e,t){t.error&&(e.status=d.M.ERROR,e.errorMessage=t.error),e.userRewardsMap=Object(o.a)(Object(o.a)({},e.userRewardsMap),t.payload.userRewardsMap),t.payload.__timer__&&(e.__timer__=t.payload.__timer__),e.status=d.M.DONE},statusUnset:function(e){e.status=d.M.UNSET}}}),ma=pa.actions,fa=ma.getUserRewards,va=ma.getUserRewardsStatus,ja=ma.statusUnset,Oa=m.a.mark(xa),ha=m.a.mark(ga),ka=function(){var e=Object(f.a)(m.a.mark((function e(t){var a,n;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=Fn.getState().account.accountId,n=Fn.getState().userRewardsMap.__timer__,!ue.ammpoolAPI||!a){e.next=7;break}return n=function(e){return e&&-1!==e&&clearInterval(e),setTimeout(Object(f.a)(m.a.mark((function e(){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:Fn.dispatch(fa(void 0));case 1:case"end":return e.stop()}}),e)}))),12e5)}(n),e.abrupt("return",ue.ammpoolAPI.getAmmPoolUserRewards({owner:a}).then((function(e){return{data:e.ammUserRewardMap,__timer__:n}})));case 7:if(n&&-1!==n&&clearInterval(n),!a){e.next=12;break}return e.abrupt("return",Promise.reject({data:void 0,__timer__:-1}));case 12:return e.abrupt("return",Promise.resolve({data:void 0,__timer__:-1}));case 13:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();function xa(e){var t,a,n;return m.a.wrap((function(c){for(;;)switch(c.prev=c.next){case 0:return e.payload,c.prev=1,c.next=4,Object(oe.b)(ka);case 4:return t=c.sent,a=t.data,n=t.__timer__,c.next=9,Object(oe.d)(va({userRewardsMap:a,__timer__:n}));case 9:c.next=15;break;case 11:return c.prev=11,c.t0=c.catch(1),c.next=15,Object(oe.d)(va(c.t0));case 15:case"end":return c.stop()}}),Oa,null,[[1,11]])}function ga(){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(oe.a)([Object(oe.f)(fa,xa)]);case 2:case"end":return e.stop()}}),ha)}var wa=[Object(oe.c)(ga)],ya=Object(h.c)({name:"socket",initialState:{socket:{},status:"PENDING",errorMessage:null},reducers:{socketEnd:function(e,t){e.socket={},e.status=d.M.PENDING},sendSocketTopic:function(e,t){e.socket=t.payload.socket},getSocketStatus:function(e,t){t.error&&(e.status=d.M.ERROR,e.errorMessage=t.error),e.status=d.M.DONE},statusUnset:function(e){e.status=d.M.UNSET}}}),Aa=ya.actions,Sa=Aa.getSocketStatus,Ia=Aa.sendSocketTopic,Ma=Aa.socketEnd,Na=(Aa.statusUnset,m.a.mark(Pa)),Ca=m.a.mark(Da),Ta=m.a.mark(_a),Ea=m.a.mark(Ra);function Pa(){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!window.loopringSocket){e.next=4;break}return e.next=4,Object(oe.b)(window.loopringSocket.socketClose);case 4:return e.next=6,Object(oe.d)(Sa(void 0));case 6:e.next=12;break;case 8:return e.prev=8,e.t0=e.catch(0),e.next=12,Object(oe.d)(Sa(e.t0));case 12:case"end":return e.stop()}}),Na,null,[[0,8]])}function Da(e){var t,a,n;return m.a.wrap((function(c){for(;;)switch(c.prev=c.next){case 0:if(t=e.payload,c.prev=1,a=Fn.getState().account.apiKey,n=t.socket,!window.loopringSocket){c.next=7;break}return c.next=7,Object(oe.b)(window.loopringSocket.socketSendMessage,{socket:n,apiKey:a});case 7:return c.next=9,Object(oe.d)(Sa(void 0));case 9:c.next=15;break;case 11:return c.prev=11,c.t0=c.catch(1),c.next=15,Object(oe.d)(Sa(c.t0));case 15:case"end":return c.stop()}}),Ca,null,[[1,11]])}function _a(){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(oe.a)([Object(oe.f)(Ma,Pa)]);case 2:case"end":return e.stop()}}),Ta)}function Ra(){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(oe.a)([Object(oe.f)(Ia,Da)]);case 2:case"end":return e.stop()}}),Ea)}var La=[Object(oe.c)(_a),Object(oe.c)(Ra)],Ba=a(68),Ua=m.a.mark(Va),Fa=m.a.mark(Ha),Ka=m.a.mark(Ja),Wa=m.a.mark(Ga);function Va(e){var t,a;return m.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return t=e.payload,n.prev=1,a=t,n.next=5,Object(oe.d)(I(Object(o.a)({},a)));case 5:n.next=11;break;case 7:return n.prev=7,n.t0=n.catch(1),n.next=11,Object(oe.d)(I(n.t0));case 11:case"end":return n.stop()}}),Ua,null,[[1,7]])}function Ha(e){var t,a;return m.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(t=e.payload,n.prev=1,a={accAddress:"",readyState:d.a.UN_CONNECT,accountId:-1,apiKey:"",eddsaKey:"",publicKey:{},level:"",nonce:-1},!t||!t.shouldUpdateProvider){n.next=7;break}return n.next=6,Object(oe.b)(Object(f.a)(m.a.mark((function e(){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ba.a.clear();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)}))));case 6:a=Object(o.a)(Object(o.a)({},a),{},{connectName:d.l.unknown});case 7:return n.next=9,Object(oe.d)(I(Object(o.a)({},a)));case 9:n.next=15;break;case 11:return n.prev=11,n.t0=n.catch(1),n.next=15,Object(oe.d)(I(n.t0));case 15:case"end":return n.stop()}}),Fa,null,[[1,11]])}function Ja(){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(oe.a)([Object(oe.f)(y,Va)]);case 2:case"end":return e.stop()}}),Ka)}function Ga(){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(oe.a)([Object(oe.f)(S,Ha)]);case 2:case"end":return e.stop()}}),Wa)}var qa=[Object(oe.c)(Ja),Object(oe.c)(Ga)],Ya=m.a.mark(za);function za(){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(oe.a)([].concat(Object(E.a)(Ve),Object(E.a)(qt),Object(E.a)(da),Object(E.a)(Kt),Object(E.a)(Me),Object(E.a)(rt),Object(E.a)(wa),Object(E.a)(La),Object(E.a)(qa)));case 2:case"end":return e.stop()}}),Ya)}var Xa=za;function Qa(){var e=Object(n.c)((function(e){return e.tickerMap})),t=Object(n.b)();return Object(o.a)(Object(o.a)({},e),{},{statusUnset:O.a.useCallback((function(){return t(ze(void 0))}),[t]),updateTickers:O.a.useCallback((function(e){return t(qe({tickerKeys:e}))}),[t]),updateTicker:O.a.useCallback((function(e){return t(Ge({tickerKey:e}))}),[t])})}function Za(){var e=Object(n.c)((function(e){return e.system})),t=Object(n.b)();return Object(o.a)(Object(o.a)({},e),{},{statusUnset:O.a.useCallback((function(){return t(Q(void 0))}),[t]),updateSystem:O.a.useCallback((function(e){return t(ut(e))}),[t])})}var $a,en,tn,an,nn,cn=function(e){},rn=function(e){},on=a(105),sn=a.n(on);!function(e){e.dark="dark",e.light="light"}($a||($a={})),function(e){e.en="en_US",e.cn="zh_CN"}(en||(en={})),function(e){e[e.NORMAL=0]="NORMAL",e[e.ERROR=1]="ERROR",e[e.UNKNOWN=2]="UNKNOWN"}(tn||(tn={})),function(e){e[e.UNKNOWN=0]="UNKNOWN",e[e.LOADING=1]="LOADING",e[e.WALLET=2]="WALLET"}(an||(an={})),function(e){e[e.NoError=0]="NoError",e[e.DataNotReady=1]="DataNotReady",e[e.GetAccError=2]="GetAccError",e[e.GenEddsaKeyError=3]="GenEddsaKeyError",e[e.UpdateAccoutError=4]="UpdateAccoutError",e[e.ApproveFailed=5]="ApproveFailed",e[e.DepositFailed=6]="DepositFailed"}(nn||(nn={}));var un=1e3,ln=3e3;function dn(){var e=Object(n.c)((function(e){return e.walletLayer2})),t=Object(n.b)();return Object(o.a)(Object(o.a)({},e),{},{resetLayer2:O.a.useCallback((function(){t(ta(void 0))}),[t]),statusUnset:O.a.useCallback((function(){return t(ea(void 0))}),[t]),updateWalletLayer2:O.a.useCallback((function(){return t(Qt(void 0))}),[t]),socketUpdateBalance:O.a.useCallback((function(e){return t(Zt(e))}),[t]),delayAndUpdateWalletLayer2:O.a.useCallback(Object(f.a)(m.a.mark((function e(){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:cn("try to delayAndUpdateWalletLayer2!"+(new Date).getTime()),sn.a.delay((function(){return t(Qt(void 0)),cn("try to delayAndUpdateWalletLayer2 updated!"+(new Date).getTime()),Promise.resolve()}),2500);case 2:case"end":return e.stop()}}),e)}))),[t])})}function bn(){var e=Object(n.c)((function(e){return e.socket})),t=Object(n.b)();return Object(o.a)(Object(o.a)({},e),{},{statusUnset:O.a.useCallback((function(){return t(Q(void 0))}),[t]),sendSocketTopic:O.a.useCallback((function(e){return t(Ia({socket:e}))}),[t]),socketEnd:O.a.useCallback((function(){return t(Ma(void 0))}),[t])})}function pn(){var e=Object(n.c)((function(e){return e.userRewardsMap})),t=Object(n.b)();return Object(o.a)(Object(o.a)({},e),{},{statusUnset:O.a.useCallback((function(){return t(ja(void 0))}),[t]),getUserRewards:O.a.useCallback((function(){return t(fa(void 0))}),[t])})}var mn=Object(h.c)({name:"confirmation",initialState:{confirmed:!1},reducers:{confirm:function(e,t){e.confirmed=!0}}}),fn=mn.actions.confirm,vn=Object(h.c)({name:"favoriteMarket",initialState:[],reducers:{clearAll:function(e,t){e.length=0},removeMarket:function(e,t){var a=t.payload;if(a&&e.includes(a)){var n=e.findIndex((function(e){return e===a}));e.splice(n,1)}},addMarket:function(e,t){var a=t.payload;a&&-1===e.findIndex((function(e){return e===a}))&&e.push(a)},addMarkets:function(e,t){var a=t.payload;a.length&&a.forEach((function(t){t&&-1===e.findIndex((function(e){return e===t}))&&e.push(t)}))}}}),jn=vn.actions,On=jn.clearAll,hn=jn.removeMarket,kn=jn.addMarket,xn=jn.addMarkets,gn={depositHashes:{},withdrawHashes:{}},wn=Object(h.c)({name:"onchainHashInfo",initialState:gn,reducers:{clearAll:function(e,t){gn},clearDepositHash:function(e){e.depositHashes={}},clearWithdrawHash:function(e){e.withdrawHashes={}},updateDepositHash:function(e,t){var a=t.payload;e.depositHashes[a.hash]=a},updateWithdrawHash:function(e,t){var a=t.payload;e.withdrawHashes[a.hash]=a}}}),yn=wn.actions,An=(yn.clearAll,yn.clearDepositHash,yn.updateDepositHash,yn.clearWithdrawHash,yn.updateWithdrawHash,Object(P.b)({favoriteMarket:vn.reducer,onchainHashInfo:wn.reducer,confirmation:mn.reducer})),Sn=Object(W.a)(),In=9e5;cn("---store DEFAULT_TIMEOUT:",In);var Mn={key:"account",storage:R.a,timeout:In},Nn={key:"settings",storage:B.a,stateReconciler:K.a},Cn={key:"localStore",storage:B.a,stateReconciler:K.a},Tn=Object(D.a)(Mn,g.reducer),En=Object(D.a)(Nn,T.Pb.reducer),Pn=Object(D.a)(Cn,An),Dn=Object(P.b)({account:Tn,socket:ya.reducer,settings:En,system:it.reducer,modals:T.Fb.reducer,userRewardsMap:pa.reducer,amm:Ie,tokenMap:Ce.reducer,walletLayer2:zt.reducer,walletLayer1:pt.reducer,tickerMap:He.reducer,localStore:Pn}),_n=Object(h.a)({reducer:Dn,middleware:[].concat(Object(E.a)(Object(h.d)({thunk:!1,serializableCheck:!1})),[Sn]),devTools:!1,enhancers:[H.reduxBatch]});_n.dispatch(J()),_n.dispatch(Object(T.Hb)(_n.getState().settings.language)),_n.dispatch(Object(T.Gb)(V.a)),Sn.run(Xa,_n.dispatch);var Rn,Ln,Bn,Un=Object(U.a)(_n),Fn=_n,Kn=function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Fn.getState().tokenMap.tokenMap,n=Wn(e,t,a);return n?n.toNumber():void 0},Wn=function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Fn.getState().tokenMap.tokenMap;if(a&&a[e]&&"undefined"!==typeof t)try{return Object(se.J)(t).div("1e"+a[e].decimals)}catch(n){throw n}},Vn=function(e){var t=e.pair,a=e._ammCalcData,n=(e.ammType,e.tokenMap,e.coinMap),c=e.walletMap,r=e.ammMap,o=e.tickerData,i=e.ammPoolsBalance;if(a.coinInfoMap=n,o&&(a.AtoB=Number(o.close)),isNaN(a.AtoB)&&i){var s=Wn(t.coinAInfo.simpleName,i.pooled[0].volume),u=Wn(t.coinBInfo.simpleName,i.pooled[1].volume);a.AtoB=u&&s&&parseFloat(u.div(s).toFixed(7,0))}if(t.coinAInfo){var l,d;a.myCoinA={belong:t.coinAInfo.simpleName,balance:c?null===(l=c[t.coinAInfo.simpleName])||void 0===l?void 0:l.count:0},a.myCoinB={belong:t.coinBInfo.simpleName,balance:c?null===(d=c[t.coinBInfo.simpleName])||void 0===d?void 0:d.count:0};var b="".concat(t.coinAInfo.simpleName,"-").concat(t.coinBInfo.simpleName),p=0,m=0;if(c){var f,v=c?null===(f=c["LP-"+b])||void 0===f?void 0:f.count:0,j=r["AMM-"+b],O=j.totalLPToken,h=j.totalA,k=j.totalB;h&&O&&k&&(p=h/O*v,m=k/O*v),a.lpCoin=v}a.lpCoinA={belong:t.coinAInfo.simpleName,balance:p},a.lpCoinB={belong:t.coinBInfo.simpleName,balance:m}}return a};function Hn(){return Jn.apply(this,arguments)}function Jn(){return(Jn=Object(f.a)(m.a.mark((function e(){var t,a,n,c,r;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=Fn.getState().account,a=Fn.getState().system.exchangeInfo,zn.sendSign(),!a||!ue.userAPI||void 0===t.nonce){e.next=19;break}return e.prev=4,e.next=7,Object(se.u)(Ba.a.usedWeb3,t.accAddress,a.exchangeAddress,t.nonce-1,t.connectName);case 7:return n=e.sent,e.next=10,ue.userAPI.getUserApiKey({accountId:t.accountId},n.sk);case 10:c=e.sent,r=c.apiKey,cn("After connect >>,unlockAccount: step2 apiKey",r),zn.sendAccountSigned(t.accountId,r,n),e.next=19;break;case 16:e.prev=16,e.t0=e.catch(4),zn.sendErrorUnlock();case 19:case"end":return e.stop()}}),e,null,[[4,16]])})))).apply(this,arguments)}!function(e){e.ErrorNetwork="ErrorNetwork",e.LockAccount="LockAccount",e.NoAccount="NoAccount",e.DepositingAccount="DepositingAccount",e.ErrorApproveToken="ErrorApproveToken",e.ErrorDepositSign="ErrorDepositSign",e.ProcessDeposit="ProcessDeposit",e.SignAccount="SignAccount",e.ErrorSign="ErrorSign",e.ProcessSign="ProcessSign",e.ProcessAccountCheck="ProcessAccountCheck",e.AccountUnlocked="AccountUnlocked"}(Rn||(Rn={})),function(e){e.FailedConnect="FailedConnect"}(Ln||(Ln={})),function(e){e.waiting="waiting",e.nextStep="nextStep"}(Bn||(Bn={}));var Gn,qn,Yn=new yt.a,zn={sendSign:function(){var e=Object(f.a)(m.a.mark((function e(){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:Yn.next({status:Rn.ProcessSign,data:void 0});case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),sendErrorUnlock:function(){Yn.next({status:Rn.ErrorSign,data:void 0})},sendUpdateAccStatusAndReset:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1;if(Fn.dispatch(y({accountId:t,readyState:e,apiKey:"",eddsaKey:"",publicKey:"",nonce:void 0})),e===d.a.ERROR_NETWORK)Yn.next({status:Rn.ErrorNetwork,data:void 0});else{var a=Fn.getState().account.accAddress;zn.sendCheckAccount(a)}},sendAccountLock:function(){var e=Object(f.a)(m.a.mark((function e(t){var a;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t?{readyState:d.a.LOCKED,accountId:t.accountId,nonce:t.nonce,level:t.tags}:{readyState:d.a.LOCKED,apiKey:"",eddsaKey:"",publicKey:"",nonce:void 0},Fn.dispatch(y(a)),Fn.dispatch(ta(void 0)),e.next=5,Object(se.I)(100);case 5:Yn.next({status:Rn.LockAccount,data:void 0});case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),sendActiveAccountDeposit:function(){},sendAccountSigned:function(e,t,a){var n=e&&t&&a?{accountId:e,apiKey:t,eddsaKey:a,publicKey:{x:se.K(se.J(a.keyPair.publicKeyX)),y:se.K(se.J(a.keyPair.publicKeyY))},readyState:d.a.ACTIVATED}:{readyState:d.a.ACTIVATED};Fn.dispatch(y(n)),Yn.next({status:Rn.AccountUnlocked,data:void 0})},sendNoAccount:function(){Fn.dispatch(y({readyState:d.a.NO_ACCOUNT})),Yn.next({status:Rn.NoAccount,data:void 0})},sendNeedUpdateAccount:function(){var e=Object(f.a)(m.a.mark((function e(t){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:cn("sendNeedUpdateAccount accInfo:",t),Fn.dispatch(y({readyState:d.a.DEPOSITING})),Yn.next({status:Rn.SignAccount,data:t});case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),sendCheckAcc:function(){var e=Object(f.a)(m.a.mark((function e(){var t,a,n;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!Fn){e.next=17;break}if(t=Fn.getState().account,!ue.exchangeAPI){e.next=17;break}return e.next=5,ue.exchangeAPI.getAccount({owner:t.accAddress});case 5:if(a=e.sent,void 0!==(n=a.accInfo)){e.next=11;break}zn.sendNoAccount(),e.next=17;break;case 11:if(!t.accountId){e.next=15;break}t.publicKey.x&&t.publicKey.y?(cn("-------need unlockAccount!"),Hn()):(cn("-------need update account!"),zn.sendNeedUpdateAccount(n)),e.next=17;break;case 15:throw cn("unexpected accInfo:",n),Error("unexpected accinfo:"+n);case 17:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),sendCheckAccount:function(){var e=Object(f.a)(m.a.mark((function e(t){var a,n;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(undefined,cn("After connect >>,checkAccount: step3 processAccountCheck",t),Fn.dispatch(y({accAddress:t,readyState:d.a.UN_CONNECT})),Yn.next({status:Rn.ProcessAccountCheck,data:void 0}),!ue.exchangeAPI){e.next=20;break}return e.next=7,ue.exchangeAPI.getAccount({owner:t});case 7:if(a=e.sent,n=a.accInfo,cn("After connect >>,checkAccount: step3",n),void 0!==n){e.next=14;break}zn.sendNoAccount(),e.next=20;break;case 14:if(!n.accountId){e.next=18;break}n.publicKey.x&&n.publicKey.y?zn.sendAccountLock(n):(cn("-------need update account!"),zn.sendNeedUpdateAccount(n)),e.next=20;break;case 18:throw cn("unexpected accInfo:",n),Error("unexpected accinfo:"+n);case 20:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),onSocket:function(){return Yn.asObservable()}},Xn=function(e,t){var a,n,c,r=Fn.getState().account.readyState,o=e[r]?e[r]:[],i=Object(fe.a)(o,2);if(a=i[0],n=i[1],"function"===typeof a)return n=[].concat(Object(E.a)(null!==(c=n)&&void 0!==c?c:[]),Object(E.a)(null!==t&&void 0!==t?t:[])),a.apply(undefined,n)},Qn=(Gn={},Object(v.a)(Gn,d.eb.UN_CONNECT,[function(){return"labelConnectWallet"}]),Object(v.a)(Gn,d.eb.ERROR_NETWORK,[function(){return"labelWrongNetwork"}]),Object(v.a)(Gn,d.eb.NO_ACCOUNT,[function(){return"depositTitleAndActive"}]),Object(v.a)(Gn,d.eb.DEFAULT,[function(){return"depositTitleAndActive"}]),Object(v.a)(Gn,d.eb.NOT_ACTIVE,[function(){return"depositTitleActive"}]),Object(v.a)(Gn,d.eb.ACTIVATED,[function(){}]),Object(v.a)(Gn,d.eb.LOCKED,[function(){return"labelUnLockLayer2"}]),Gn),Zn=(qn={},Object(v.a)(qn,d.eb.ERROR_NETWORK,[function(){cn("get error network!")}]),Object(v.a)(qn,d.eb.UN_CONNECT,[function(){cn("UN_CONNECT!"),Fn.dispatch(A({_userOnModel:!0})),Fn.dispatch(Object(T.Jb)({isShow:!0,step:T.zb.Provider}))}]),Object(v.a)(qn,d.eb.NO_ACCOUNT,[function(){cn("NO_ACCOUNT! sendCheckAcc"),Fn.dispatch(A({_userOnModel:!0})),zn.sendCheckAcc()}]),Object(v.a)(qn,d.eb.DEPOSITING,[function(){cn("DEPOSITING! sendCheckAcc"),Fn.dispatch(A({_userOnModel:!0})),zn.sendCheckAcc()}]),Object(v.a)(qn,d.eb.NOT_ACTIVE,[function(){cn("NOT_ACTIVE! sendCheckAcc"),Fn.dispatch(A({_userOnModel:!0})),zn.sendCheckAcc()}]),Object(v.a)(qn,d.eb.LOCKED,[function(){Fn.dispatch(A({_userOnModel:!0})),Fn.dispatch(Object(T.Ib)({isShow:!0,step:T.a.HadAccount}))}]),qn),$n=function(e){void 0!==typeof e.customSlippage&&Fn.dispatch(Object(T.Ob)(e.customSlippage))};function ec(e){if(!e||!(e instanceof Object)||"function"==typeof e)return e||void 0;var t=new(0,e.constructor);for(var a in e)e.hasOwnProperty(a)&&(t[a]=ec(e[a]));return t}function tc(e){return ac.apply(this,arguments)}function ac(){return(ac=Object(f.a)(m.a.mark((function e(t){var a;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(document.execCommand&&(a=document.createElement("textarea"),document.body.appendChild(a),a.value=t,a.select(),document.execCommand("copy"),document.body.removeChild(a)),!navigator.clipboard){e.next=4;break}return e.next=4,navigator.clipboard.writeText(t);case 4:if(!window.clipboardData){e.next=8;break}return window.clipboardData.setData("Text",t),console.log("clipboardData:",t),e.abrupt("return",!0);case 8:return e.abrupt("return",!1);case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var nc=a(116),cc=a.n(nc),rc=function(e){var t=Fn.getState().tokenMap.tokenMap;if(t&&t[e])return t[e]};function oc(e,t){var a=rc(t);if(a)return void 0===e||null===e||""===e.trim()?0:se.J(e).div("1e"+a.decimals).toFixed(a.precision,0)}var ic=function(e,t){var a=e.ammActivityMap,n=e.type,c=e.ammPoolActivityStatus,r=Fn.getState().tokenMap,o=r.coinMap,i=r.tokenMap,s=r.idIndex,u={};return a&&a[n]&&c.forEach((function(e){a[n][e]&&a[n][e].reduce((function(a,n){if(o&&n.awardRules[0]&&s&&i){var c,r=s[n.awardRules[0].tokenId],u=oc(n.awardRules[0].volume,r),l={rewardToken:o[r],totalRewards:Number(u),myRewards:e===se.a.InProgress&&t&&t[n.market]?Kn(r,null===(c=t[n.market])||void 0===c?void 0:c.currentRewards[0].volume):0,duration:{from:new Date(null===n||void 0===n?void 0:n.rangeFrom),to:new Date(null===n||void 0===n?void 0:n.rangeTo)},isPass:se.a.EndOfGame===e};a[n.market]?a[n.market].push(l):a[n.market]=[l]}return a}),u)})),sc(u)},sc=function(e,t){var a=Fn.getState().tokenMap.coinMap,n=Fn.getState().amm.ammMap.ammMap;try{return e&&a?Reflect.ownKeys(e).reduce((function(t,c){var r=n[c];if(r&&r.coinA&&a&&e[c]){var i=e[c].map((function(e){return Object(o.a)(Object(o.a)({},ec(r)),{},{coinAInfo:a[r.coinA],coinBInfo:a[r.coinB],activity:e})}));t=[].concat(Object(E.a)(t),Object(E.a)(i))}return t}),[]):[]}catch(c){return console.log(c),[]}},uc=function(e){var t,a,n,c,r,o,i,s,u,l,d,b,p,m,f=e.coinA,v=e.coinB,j=e.ammUserReward,O=e.idIndex,h=e.faitPrices,k=e.forex,x=e.walletMap,g=e.snapShotData;if(j&&(t=j.currentRewards[0]?O[j.currentRewards[0].tokenId]:void 0,a=j.currentRewards[1]?O[j.currentRewards[1].tokenId]:void 0,n=j?Wn(f,j.feeRewards[0]):Object(se.J)(0),c=j?Wn(v,j.feeRewards[1]):Object(se.J)(0),n=n||Object(se.J)(0),c=c||Object(se.J)(0),o=(r=n.times(h[f]?h[f].price:0).plus(c.times(h[v]?h[v].price:0))).times(k),i=t?Wn(t,j.currentRewards[0].volume):Object(se.J)(0),s=a?Wn(a,j.currentRewards[1].volume):Object(se.J)(0),i=i||Object(se.J)(0),s=s||Object(se.J)(0),l=(u=i.times(t?h[t].price:1).plus(s.times(a?h[a].price:1))).times(k)),x&&x["LP-"+f+"-"+v]&&g){var w=new cc.a(x["LP-"+f+"-"+v].count).div(g.ammPoolsBalance.lp.volume);d=w.times(Wn(f,g.ammPoolsBalance.pooled[0].volume)||1),b=w.times(Wn(v,g.ammPoolsBalance.pooled[1].volume)||1),m=(p=d.times(h[f].price).plus(b.times(h[v].price))).times(k)}return{feeA:n?n.toNumber():void 0,feeB:c?c.toNumber():void 0,reward:i?i.toNumber():void 0,rewardToken:t?T.Db[t]:void 0,reward2:s?s.toNumber():void 0,rewardToken2:a?T.Db[a]:void 0,rewardDollar:u?u.toNumber():void 0,rewardYuan:l?l.toNumber():void 0,feeDollar:r?r.toNumber():void 0,feeYuan:o?o.toNumber():void 0,ammDetail:{coinAInfo:T.Db[f],coinBInfo:T.Db[v]},balanceA:d?d.toNumber():void 0,balanceB:b?b.toNumber():void 0,balanceDollar:p?p.toNumber():void 0,balanceYuan:m?m.toNumber():void 0}},lc=function(e,t,a,n){var c=Fn.getState().tokenMap,r=c.coinMap,o=c.idIndex,i=c.tokenMap,s=Fn.getState().system,u=s.faitPrices,l=s.forex,d=e.match(/(\w+)-(\w+)/i),b=Object(fe.a)(d,3),p=b[1],m=b[2];if(a&&a["AMM-"+e]&&n&&n.ammPoolsBalance){var f=a["AMM-"+e];if(r&&i&&o&&l&&u)return uc({coinA:p,coinB:m,ammUserReward:f,idIndex:o,faitPrices:u,forex:l,walletMap:t,snapShotData:n})}return{feeA:void 0,feeB:void 0,feeDollar:void 0,feeYuan:void 0,reward:void 0,rewardToken:void 0,balanceA:void 0,balanceB:void 0,balanceYuan:void 0,balanceDollar:void 0}},dc=function(e){var t=e.market,a=e.ammDetail,n=e.walletMap,c=e.ammUserRewardMap;if(n&&a)return function(e,t,a,n){var c,r,i,s,u=Fn.getState().tokenMap,l=u.coinMap,d=u.idIndex,b=u.tokenMap,p=Fn.getState().system,m=p.faitPrices,f=p.forex,v=e.match(/(\w+)-(\w+)/i),j=Object(fe.a)(v,3),O=j[1],h=j[2],k={};if(t&&t["LP-"+O+"-"+h]&&f){var x=new cc.a(t["LP-"+O+"-"+h].count).div(n.totalLPToken);c=x.times(Wn(O,n.totalA?n.totalA:0)||1),r=x.times(Wn(h,n.totalB?n.totalB:0)||1),s=(i=c.times(m[O]?m[O].price:0).plus(r.times(m[h]?m[h].price:0))).times(f),k={balanceA:c.toNumber(),balanceB:r.toNumber(),balanceYuan:s.toNumber(),balanceDollar:i.toNumber()}}if(a&&a["AMM-"+e]&&n&&f){var g,w,y,A,S,I,M,N,C,T,E=a["AMM-"+e];return l&&b&&d&&f&&m&&E&&(g=E.currentRewards[0]?d[E.currentRewards[0].tokenId]:void 0,w=E.currentRewards[1]?d[E.currentRewards[1].tokenId]:void 0,y=E?Wn(O,E.feeRewards[0]):Object(se.J)(0),A=E?Wn(h,E.feeRewards[1]):Object(se.J)(0),y=y||Object(se.J)(0),A=A||Object(se.J)(0),I=(S=y.times(m[O]?m[O].price:0).plus(A.times(m[h]?m[h].price:0))).times(f),M=g?Wn(g,E.currentRewards[0].volume):Object(se.J)(0),N=w?Wn(w,E.currentRewards[1].volume):Object(se.J)(0),M=M||Object(se.J)(0),N=N||Object(se.J)(0),T=(C=M.times(g?m[g].price:1).plus(N.times(w?m[w].price:1))).times(f),k=Object(o.a)(Object(o.a)({},k),{},{feeA:y?y.toNumber():void 0,feeB:A?A.toNumber():void 0,reward:M?M.toNumber():void 0,rewardToken:g?l[g]:void 0,reward2:N?N.toNumber():void 0,rewardToken2:w?l[w]:void 0,rewardDollar:C?C.toNumber():void 0,rewardYuan:T?T.toNumber():void 0,feeDollar:S?S.toNumber():void 0,feeYuan:I?I.toNumber():void 0,ammDetail:{coinAInfo:O?l[O]:void 0,coinBInfo:h?l[h]:void 0}})),k}return{feeA:void 0,feeB:void 0,feeDollar:void 0,feeYuan:void 0,reward:void 0,rewardToken:void 0,balanceA:void 0,balanceB:void 0,balanceYuan:void 0,balanceDollar:void 0}}(t,n,c,a)},bc=function(e){var t=Fn.getState().system,a=t.faitPrices,n=t.forex,c=isNaN(e.close)||isNaN(e.open)||e.open===e.close?d.x.none:e.close>e.open?d.x.increase:d.x.decrease,r={change:(e.close-e.open)/e.open,timeUnit:"24h",priceYuan:0,priceDollar:0,floatTag:c,reward:0,close:isNaN(e.close)?void 0:e.close,high:0===e.high?void 0:e.high,low:0===e.low?void 0:e.low};if(a&&n){var i=oc(e.base_token_volume,e.base),s=Object(se.J)(e.close).times(a[e.quote]?a[e.quote].price:0),u=s.times(n),l=a[e.quote].price?a[e.quote].price:0;r=Object(o.a)(Object(o.a)({},r),{},{changeDollar:Object(se.J)(e.close-e.open).times(l).toNumber(),changeYuan:Object(se.J)(e.close-e.open).times(l).times(n).toNumber(),volume:i?Number(i):void 0,closeDollar:s.toNumber(),closeYuan:u.toNumber()})}return r},pc=function(e){var t=e.tickerMap,a=Fn.getState().system,n=a.faitPrices,c=a.forex;return Reflect.ownKeys(t).reduce((function(e,a){var r=t[a];if(r&&r.base&&c&&n&&(n[r.base]||n.USDT)){var o=oc(r.base_token_volume,r.base),i=Object(se.J)(o||0).times(n[r.base]?n[r.base].price:n.USDT.price),s=null===i||void 0===i?void 0:i.times(c),u=r.change&&0!==r.change?100*r.change:void 0;e[a]={timeUnit:"24h",priceDollar:0===(null===i||void 0===i?void 0:i.toNumber())||null===i||void 0===i?void 0:i.toNumber(),priceYuan:0===(null===s||void 0===s?void 0:s.toNumber())||null===s||void 0===s?void 0:s.toNumber(),volume:o?Number(o):void 0,floatTag:r.close>r.open?"increase":"decrease",change:u,close:isNaN(r.close)?void 0:r.close,high:0===r.high?void 0:r.high,low:0===r.low?void 0:r.low,reward:0,rewardToken:"",__rawTicker__:r}}return e}),{})},mc=function(){var e,t=Fn.getState().walletLayer2.walletLayer2,a=Fn.getState().tokenMap.tokenMap;return t&&(e=Reflect.ownKeys(t).reduce((function(e,n){var c=t[n],r=c.total,i=c.locked,s=(c.pending.withdraw,se.J(r).minus(se.J(i)).toString());return Object(o.a)(Object(o.a)({},e),{},Object(v.a)({},n,{belong:n,count:se.t(a,n,s),detail:t[n]}))}),{})),{walletMap:e}},fc=function(e,t){var a=[];return t.forEach((function(e){try{var t=se.x(e.market),n=t.base,c=t.quote;Fn.getState().system.forex,Fn.getState().settings.currency;if(Fn.getState().tokenMap.tokenMap){var r,o,i=e.side===se.i.Buy?n:c;a.push({side:e.side===se.i.Sell?d.X.Sell:d.X.Buy,amount:{from:{key:n,value:n?Kn(n,e.volume):void 0},to:{key:c,value:n?null===(r=Wn(n,e.volume))||void 0===r?void 0:r.times(e.price).toNumber():void 0}},price:{key:"",value:se.J(e.price).toNumber()},fee:{key:i||"--",value:i?null===(o=Wn(i,e.fee))||void 0===o?void 0:o.toNumber():void 0},time:parseInt(e.tradeTime.toString())})}}catch(s){console.log(s)}})),a},vc=function(){var e,t=Fn.getState().account,a=t.accountId,n=t.apiKey;return null===(e=ue.ammpoolAPI)||void 0===e?void 0:e.getUserAmmPoolTxs({accountId:a},n).then((function(e){return e.userAmmPoolTxs}))},jc=function(e,t){var a=[],n=Fn.getState().tokenMap,c=n.tokenMap,r=n.coinMap,o=n.idIndex,i=Fn.getState().system.forex;return t&&t.forEach((function(t){try{if(r&&c&&o&&(!e||c["LP-"+e].tokenId===t.lpToken.tokenId)){var n,s,u=o[t.lpToken.tokenId].match(/LP-(\w+)-(\w+)/i),l=Object(fe.a)(u,3),d=l[1],b=l[2];a.push({type:t.txType===se.b.JOIN?T.i.add:T.i.remove,totalDollar:1e3,totalYuan:1e3/Number(i),amountA:Kn(d,null===(n=t.poolTokens[0])||void 0===n?void 0:n.actualAmount),amountB:Kn(d,null===(s=t.poolTokens[1])||void 0===s?void 0:s.actualAmount),time:Number(t.updatedAt),coinA:r[d],coinB:r[b],status:t.txStatus})}return a}catch(p){console.log(p)}})),a},Oc=function(e){var t=e.coinKey,a=e.ammKey,n=e.ammMap;return new Promise((function(e,c){var r;ue.ammpoolAPI&&ue.exchangeAPI?Promise.all([ue.ammpoolAPI.getAmmPoolSnapshot({poolAddress:null===(r=n[a])||void 0===r?void 0:r.address}),ue.exchangeAPI.getMixTicker({market:t})]).then((function(t){var a=Object(fe.a)(t,2),n=a[0].ammPoolSnapshot,c=a[1].tickMap;e({ammPoolsBalance:n,tickMap:c})})):c(new d.o(d.u.NO_SDK))}))},hc=a(1661),kc=a(0),xc=["t"],gc=Object(hc.a)("common")((function(e){var t=e.t,a=Object(l.a)(e,xc),c=Object(u.g)(),r=function(){var e=C(),t=C(),a=t.account,n=t.setShouldShow,c=t.status,r=Object(T.Qb)().setShowAccount,i=Object.assign(ec(Zn),Object(v.a)({},d.eb.ACTIVATED,[function(){n(!0),r({isShow:!0,step:T.a.HadAccount})}])),s=O.a.useCallback(Object(f.a)(m.a.mark((function e(){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:cn("onWalletBtnConnect click: ".concat(a.readyState)),Xn(i,[]);case 2:case"end":return e.stop()}}),e)}))),[a,n,i]);O.a.useEffect((function(){d.ob[d.e.WalletConnect]=Object(o.a)(Object(o.a)({},d.ob[d.e.WalletConnect]),{},{accountState:e,handleClick:s})}));var u=O.a.useCallback((function(){d.ob[d.e.WalletConnect]=Object(o.a)(Object(o.a)({},d.ob[d.e.WalletConnect]),{},{accountState:e})}),[d.ob,e]);return O.a.useEffect((function(){c&&"UNSET"===c&&u()}),[c]),{headerToolBarData:d.ob,headerMenuData:d.mb,account:a}}(),i=r.headerToolBarData,s=r.headerMenuData,p=function(){var e=Object(n.c)((function(e){return e.localStore.confirmation})),t=Object(n.b)();return{confirmation:e,confirmWrapper:O.a.useCallback((function(){t(fn(void 0))}),[t])}}(),j=p.confirmWrapper,h=p.confirmation;return Object(kc.jsxs)(kc.Fragment,{children:[Object(kc.jsx)(T.C,{children:Object(kc.jsx)(T.B,Object(o.a)(Object(o.a)({},a),{},{headerMenuData:s,headerToolBarData:i,selected:"/"===c.pathname?d.nb:c.pathname}))}),Object(kc.jsx)(b.a,{}),Object(kc.jsx)(T.n,{isShow:!(null===h||void 0===h?void 0:h.confirmed),content:t("labelAgreeLoopringTxt"),btnTxt:t("labelCookiesAgree"),clickToConfirm:function(){return j()}})]})})),wc=a(322),yc=a(1607),Ac=a(1656),Sc=a(1701),Ic=a(1730),Mc=a(1739);var Nc,Cc,Tc,Ec=a(875),Pc=a(15),Dc=Object(Pc.a)(Ac.a)(Nc||(Nc=Object(i.a)(["\n  display: flex;\n  flex-direction: column;\n  width: 100%;\n  //height: 100%;\n  flex: 1;\n  background: var(--color-box);\n  border-radius: ","px;\n  // padding: ","px  0;\n  margin-bottom: ","px;\n  .title {\n    font-size: ","px;\n    //line-height: 19px;\n    margin-left: ","px;\n    margin-top: ","px;\n    // margin-bottom: ","px;\n  }\n\n  .tableWrapper {\n    display: flex;\n    margin-top: ","px;\n    flex: 1;\n    .rdg {                                                   \n      flex: 1;\n    }\n  }\n\n  .extraTradeClass {\n    .rdg-header-row {\n      background-color: inherit !important;\n    }\n  }\n"])),(function(e){return e.theme.unit}),(function(e){return 3*e.theme.unit}),(function(e){return 2*e.theme.unit}),(function(e){return 3*e.theme.unit}),(function(e){return 3*e.theme.unit}),(function(e){return 3*e.theme.unit}),(function(e){return 2*e.theme.unit}),(function(e){return 3*e.theme.unit})),_c=Object(Pc.a)(yc.a)(Cc||(Cc=Object(i.a)(["\n \n  &{\n    background: var(--color-box);\n    border-radius: ","px;\n    .rdg{\n      .rdg-header-row {\n        border-radius: ","px ","px 0 0;\n      }\n    }\n  }\n  ","\n"])),(function(e){return e.theme.unit}),(function(e){return e.theme.unit}),(function(e){return e.theme.unit}),(function(e){var t=e.theme;return Object(T.hb)({pLeft:3*t.unit,pRight:3*t.unit})})),Rc=Object(Pc.a)(Ac.a)(Tc||(Tc=Object(i.a)(["\n  @media only screen and (min-height: 784px ) and (min-width: 1024px) {\n    position: fixed;\n  }\n"])));var Lc,Bc=Object(wc.a)(yc.a,{target:"e19jzbou2"})("& .MuiGrid-root:not(:last-of-type)>div{margin-right:",(function(e){return 2*e.theme.unit}),"px;}"),Uc=Object(wc.a)(Ac.a,{target:"e19jzbou1"})("position:absolute;top:0.9rem;right:",(function(e){return 2*e.theme.unit}),"px;"),Fc=Object(wc.a)(Ac.a,{target:"e19jzbou0"})({name:"2n1ryy",styles:"position:relative;padding:0.8rem 0.8rem 0 1rem"});!function(e){e.all="all",e.favourite="favourite",e.ranking="ranking"}(Lc||(Lc={}));var Kc=Object(hc.a)("common")((function(e){var t=O.a.useState([]),a=Object(fe.a)(t,2),c=a[0],r=a[1],i=O.a.useState([]),s=Object(fe.a)(i,2),l=s[0],d=s[1],b=O.a.useState("all"),p=Object(fe.a)(b,2),h=p[0],k=p[1],x=O.a.useState([]),g=Object(fe.a)(x,2),w=g[0],y=g[1],A=O.a.useState(""),S=Object(fe.a)(A,2),I=S[0],M=S[1],N=O.a.useState([]),C=Object(fe.a)(N,2),P=C[0],D=C[1],_=O.a.useState(0),R=Object(fe.a)(_,2),L=R[0],B=R[1],U=function(){var e=Object(n.c)((function(e){return e.localStore.favoriteMarket})),t=Object(n.b)();return{favoriteMarket:e,clearAll:O.a.useCallback((function(){return t(On(void 0))}),[t]),removeMarket:O.a.useCallback((function(e){return t(hn(e))}),[t]),addMarket:O.a.useCallback((function(e){return t(kn(e))}),[t]),addMarkets:O.a.useCallback((function(e){return t(xn(e))}),[t])}}(),F=U.favoriteMarket,K=U.removeMarket,W=U.addMarket,V=e.t,H=O.a.useCallback(Object(f.a)(m.a.mark((function e(){var t;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!ue.ammpoolAPI){e.next=5;break}return e.next=3,ue.ammpoolAPI.getAmmPoolActivityRules();case 3:(t=e.sent)&&t.groupByRuleType&&t.groupByRuleType.SWAP_VOLUME_RANKING&&t.groupByRuleType.SWAP_VOLUME_RANKING.length&&D(t.groupByRuleType.SWAP_VOLUME_RANKING);case 5:case"end":return e.stop()}}),e)}))),[]),J=O.a.useCallback(function(){var e=Object(f.a)(m.a.mark((function e(t){var a,n;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!ue.exchangeAPI){e.next=5;break}return e.next=3,ue.exchangeAPI.getMixCandlestick({market:t,interval:Ec.TradingInterval.d1,limit:30});case 3:(a=e.sent)&&a.candlesticks&&a.candlesticks.length&&(n=a.candlesticks.map((function(e){return{timeStamp:e.timestamp,low:e.low,high:e.high,open:e.open,close:e.close,volume:e.baseVol,sign:e.close<e.open?-1:1}})),r((function(e){return[].concat(Object(E.a)(e),[{market:t,data:n}])})));case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[]),G=function(){var e=Qa(),t=e.tickerMap,a=e.status,n=e.statusUnset,c=e.updateTickers,r=bn(),i=r.sendSocketTopic,s=r.socketEnd,u=O.a.useState([]),l=Object(fe.a)(u,2),d=l[0],b=l[1],p=Fn.getState().tokenMap,h=p.marketArray,k=p.coinMap,x=O.a.useState([]),g=Object(fe.a)(x,2),w=g[0],y=g[1],A=O.a.useState([]),S=Object(fe.a)(A,2),I=S[0],M=S[1],N=O.a.useMemo((function(){return It()}),[]),C=O.a.useCallback((function(e,t){I.length&&(I[e].tradeFloat=t,M(I))}),[I]);O.a.useEffect((function(){var e=N.subscribe((function(e){var t=e.tickerMap;cn("tickerMap:",t),t&&Reflect.ownKeys(t).forEach((function(e){var a=d.findIndex((function(t){return t===e}));-1!==a&&C(a,t[e])}))}));return function(){return e.unsubscribe()}}),[N,d]);var T=Object(j.useCallback)(Object(f.a)(m.a.mark((function e(){var t,a;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!ue.exchangeAPI){e.next=14;break}return e.prev=1,e.next=4,ue.exchangeAPI.getRecommendedMarkets();case 4:return t=e.sent,a=t.recommended,b(a),e.abrupt("return",a||[]);case 10:e.prev=10,e.t0=e.catch(1),rn(e.t0);case 13:return e.abrupt("return",[]);case 14:case"end":return e.stop()}}),e,null,[[1,10]])}))),[]);O.a.useEffect((function(){T()}),[T]),O.a.useEffect((function(){return P(),_(),function(){s()}}),[]),O.a.useEffect((function(){switch(a){case"ERROR":console.log("ERROR","get ticker error,ui"),n();break;case"PENDING":break;case"DONE":n(),D(t)}}),[a,n]);var P=O.a.useCallback((function(){c(h||[])}),[h,16]),D=O.a.useCallback(function(){var e=Object(f.a)(m.a.mark((function e(t){var a,n,c,r,i,s;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,T();case 2:for(a=e.sent,n=[],c=[],r=t&&Object.keys(t)?Reflect.ownKeys(t).reduce((function(e,r){var i=r.match(/(\w+)-(\w+)/i),s=Object(fe.a)(i,3),u=s[1],l=s[2],d=Object(o.a)(Object(o.a)({},t[r]),{},{pair:{coinA:u,coinB:l}});return-1!==a.findIndex((function(e){return e===r}))&&n.push(ec(d)),h&&-1!==h.findIndex((function(e){return e===r}))&&c.push(ec(d)),e.push(d),e}),[]):[],y([].concat(Object(E.a)(w),Object(E.a)(r))),(n=n.filter((function(e){var t=e.pair,a=t.coinA,n=t.coinB;return k&&k[a]&&k[n]}))).length<4&&(i=c.filter((function(e){var t="".concat(e.pair.coinA,"-").concat(e.pair.coinB);return!a.includes(t)})),n=n.concat(i.slice(0,4-n.length)));n.length<4;)n.push(ec(n[0]));s=n.reduce((function(e,t){if(k&&t){var a=t.pair,n=a.coinA,c=a.coinB,r={tradeFloat:t,coinAInfo:k[n],coinBInfo:k[c]};e.push(r)}return e}),[]),M(s);case 12:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[w]),_=O.a.useCallback((function(){i(Object(v.a)({},se.o.ticker,h))}),[]);return{tickList:w,recommendations:I}}(),q=G.recommendations,Y=G.tickList,z=O.a.useCallback((function(){var e=window.innerHeight;B(e-64-117-56-120-20)}),[]);O.a.useEffect((function(){return z(),window.addEventListener("resize",z),function(){window.removeEventListener("resize",z)}}),[z]),O.a.useEffect((function(){var e=q.map((function(e){return"".concat(e.coinAInfo.simpleName,"-").concat(e.coinBInfo.simpleName)}));e.length&&(J(e[0]),J(e[1]),J(e[2]),J(e[3]))}),[q,J]);var X=Object(j.useCallback)(Object(f.a)(m.a.mark((function e(){var t,a,n;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!ue.ammpoolAPI){e.next=6;break}return e.next=3,null===(t=ue.ammpoolAPI)||void 0===t?void 0:t.getAmmPoolBalances();case 3:a=e.sent,n=a.raw_data.map((function(e){return Object(o.a)(Object(o.a)({},e),{},{poolName:e.poolName.replace("AMM-","")})})),d(n);case 6:case"end":return e.stop()}}),e)}))),[]);O.a.useEffect((function(){X()}),[X]),O.a.useEffect((function(){H()}),[H]);var Q=Object(u.f)(),Z=Object(j.useCallback)((function(){return l.length&&Y&&Y.length?Y.filter((function(e){var t="".concat(e.pair.coinA,"-").concat(e.pair.coinB);return!l.find((function(e){return e.poolName===t}))||!l.find((function(e){return e.poolName===t})).risky})):[]}),[Y,l]);Object(j.useEffect)((function(){var e=Z();y(e)}),[Z]);var $=Object(j.useCallback)((function(e){var t=e.type,a=void 0===t?Lc.all:t,n=e.keyword,c=void 0===n?"":n,r=on.cloneDeep(Y);a===Lc.favourite&&(r=r.filter((function(e){var t="".concat(e.pair.coinA,"-").concat(e.pair.coinB);return null===F||void 0===F?void 0:F.includes(t)}))),a===Lc.ranking&&(r=r.filter((function(e){var t="".concat(e.pair.coinA,"-").concat(e.pair.coinB);return P.find((function(e){return e.market===t}))}))),r=r.filter((function(e){var t=null===c||void 0===c?void 0:c.toLocaleLowerCase(),a=e.pair.coinA.toLowerCase(),n=e.pair.coinB.toLowerCase();return""===c||((null===a||void 0===a?void 0:a.includes(t))||(null===n||void 0===n?void 0:n.includes(t)))})),a!==Lc.all||c||(r=Z()),y(r)}),[Z,F,P,Y]),ee=Object(j.useCallback)((function(e){var t=e.pair,a=t.coinA,n=t.coinB,c="".concat(a,"-").concat(n);Q&&Q.push({pathname:"/trading/lite/".concat(c)})}),[Q]),te=Object(j.useCallback)((function(e,t){k(t),$({type:"favourite"===t?Lc.favourite:"tradeRanking"===t?Lc.ranking:Lc.all,keyword:I})}),[$,I]),ae=O.a.useCallback((function(e){M(e);var t="favourite"===h?Lc.favourite:"tradeRanking"===h?Lc.ranking:Lc.all;$({keyword:e,type:t})}),[$,h]),ne=q.map((function(e){var t,a="".concat(e.coinAInfo.simpleName,"-").concat(e.coinBInfo.simpleName);return Object(o.a)(Object(o.a)({},e),{},{market:a,chartData:null===(t=c.find((function(e){return e.market===a})))||void 0===t?void 0:t.data.sort((function(e,t){return e.timeStamp-t.timeStamp}))})})),ce=O.a.useCallback((function(e){e&&e.market&&Q&&Q.push({pathname:"/trading/lite/".concat(e.market)})}),[Q]);return Object(kc.jsxs)(Ac.a,{display:"flex",flexDirection:"column",flex:1,children:[Object(kc.jsxs)(Bc,{container:!0,children:[Object(kc.jsx)(yc.a,{item:!0,xs:3,onClick:function(){return ce(ne[0])},children:Object(kc.jsx)(T.F,Object(o.a)({},Object(o.a)(Object(o.a)({},ne[0]),{},{chartData:ne[0]?ne[0].chartData:[]},e)))}),Object(kc.jsx)(yc.a,{item:!0,xs:3,onClick:function(){return ce(ne[1])},children:Object(kc.jsx)(T.F,Object(o.a)({},Object(o.a)(Object(o.a)({},ne[1]),{},{chartData:ne[1]?ne[1].chartData:[]},e)))}),Object(kc.jsx)(yc.a,{item:!0,xs:3,onClick:function(){return ce(ne[2])},children:Object(kc.jsx)(T.F,Object(o.a)({},Object(o.a)(Object(o.a)({},ne[2]),{},{chartData:ne[2]?ne[2].chartData:[]},e)))}),Object(kc.jsx)(yc.a,{item:!0,xs:3,onClick:function(){return ce(ne[3])},children:Object(kc.jsx)(T.F,Object(o.a)({},Object(o.a)(Object(o.a)({},ne[3]),{},{chartData:ne[3]?ne[3].chartData:[]},e)))})]}),Object(kc.jsx)(_c,{container:!0,marginY:3,paddingBottom:2,flex:1,className:"MuiPaper-elevation2",children:Object(kc.jsxs)(yc.a,{item:!0,xs:12,children:[Object(kc.jsxs)(Fc,{children:[Object(kc.jsxs)(Sc.a,{value:h,onChange:te,"aria-label":"disabled tabs example",children:[Object(kc.jsx)(Ic.a,{label:V("labelQuotePageFavourite"),value:"favourite"}),Object(kc.jsx)(Ic.a,{label:V("labelAll"),value:"all"}),Object(kc.jsx)(Ic.a,{label:V("labelQuotePageTradeRanking"),value:"tradeRanking"})]}),Object(kc.jsx)(Uc,{children:Object(kc.jsx)(T.E,{value:I,onChange:ae})})]}),Object(kc.jsx)(Mc.a,{}),Object(kc.jsx)(T.W,Object(o.a)({onRowClick:function(e,t,a){return ee(t)},rawData:w,favoriteMarket:F,addFavoriteMarket:W,removeFavoriteMarket:K,currentHeight:L},Object(o.a)({showLoading:Y&&!Y.length},e)))]})})]})})),Wc=a(76),Vc=a.n(Wc),Hc=a(1721);function Jc(e,t){Object(Hc.a)(e,[t||{}])}var Gc=[{value:T.p.Trend,key:T.p.Trend,label:"label"+T.p.Trend},{value:T.p.Depth,key:T.p.Depth,label:"label"+T.p.Depth}];var qc,Yc,zc=["props","coinAInfo","coinBInfo","tradeFloat","marketArray","t"],Xc=function(e){e.props;var t=e.coinAInfo,a=e.coinBInfo,n=e.tradeFloat,c=e.marketArray,r=e.t,i=Object(l.a)(e,zc),s=function(e,t,a,n,c){var r=Gc.map((function(e){var t=e.value,a=e.label,n=e.key;return{value:t,tlabel:c(a),key:n,JSX:Object(kc.jsx)(kc.Fragment,{children:c(a)})}})),o=Object(se.z)(n,null===t||void 0===t?void 0:t.name,null===a||void 0===a?void 0:a.name),i=o.market,s=o.amm,u=Object(j.useState)(T.p.Trend),l=Object(fe.a)(u,2),b=l[0],p=l[1],v=Object(j.useState)(d.g.D1),O=Object(fe.a)(v,2),h=O[0],k=O[1],x=Object(j.useState)(void 0),g=Object(fe.a)(x,2),w=g[0],y=g[1],A=Object(j.useCallback)((function(e,t){null!==t&&(y(void 0),p("Trend"===t?T.p.Trend:T.p.Depth))}),[y,p]),S=Object.keys(d.g).reduce((function(e,t){var a={value:d.g[t],key:d.g[t],label:"label"+d.g[t]};return e.push({value:a.value,tlabel:c(a.label?a.label:a.key),key:a.key,JSX:Object(kc.jsx)(kc.Fragment,{children:c(a.label?a.label:a.key)})}),e}),[]);return Jc(Object(f.a)(m.a.mark((function e(){var t,a,n,c,r,o,u,l;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=!0,ue.exchangeAPI&&i&&s){e.next=3;break}return e.abrupt("return");case 3:if(b!==T.p.Trend){e.next=17;break}return a={market:s,interval:se.k.d1,limit:30},e.prev=5,e.next=8,ue.exchangeAPI.getCandlestick(a);case 8:n=e.sent,t&&(c=n.candlesticks.map((function(e){return{timeStamp:e.timestamp,low:e.low,high:e.high,open:e.open,close:e.close,volume:e.quoteVol,change:(e.close-e.open)/e.open,date:Vc()(e.timestamp).format("MMM DD")}})),y(c)),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(5),Object(se.s)(e.t0,"ChartPanel getCandlestick");case 15:e.next=29;break;case 17:return r={market:i},e.prev=18,e.next=21,ue.exchangeAPI.getMixDepth(r);case 21:o=e.sent,u=o.depth,t&&(l={bidsPrices:u.bids_prices,bidsAmtTotals:u.bids_amtTotals,asksPrices:u.asks_prices,asksAmtTotals:u.asks_amtTotals},y(l)),e.next=29;break;case 26:e.prev=26,e.t1=e.catch(18),Object(se.s)(e.t1);case 29:return e.abrupt("return",(function(){t=!1}));case 30:case"end":return e.stop()}}),e,null,[[5,12],[18,26]])}))),[ue.exchangeAPI,s,i,b]),{chartUnit:h,chartType:b,tgItemJSXs:r,tgItemJSXsPriceChart:S,handleChange:A,originData:w,handleChartUnitChange:function(e,t){var a="1H"===t?d.g.H1:"1W"===t?d.g.W1:d.g.D1;k(a)}}}(0,t,a,c,r),u=s.chartType,b=s.tgItemJSXs,p=s.handleChange,v=s.originData,O=Object(T.Rb)().upColor,h=null===t||void 0===t?void 0:t.name,k=null===a||void 0===a?void 0:a.name,x=v&&v.length?v.sort((function(e,t){return e.timeStamp-t.timeStamp})):[],g=v&&t&&v.asksAmtTotals?Object(o.a)(Object(o.a)({},v),{},{asksAmtTotals:v.asksAmtTotals.map((function(e){return Number(oc(e,h))})),bidsAmtTotals:v.bidsAmtTotals.map((function(e){return Number(oc(e,h))}))}):[];return Object(kc.jsxs)(kc.Fragment,{children:[Object(kc.jsx)(yc.a,{item:!0,children:Object(kc.jsxs)(Ac.a,{display:"flex",flexDirection:"row",justifyContent:"space-between",alignItems:"center",children:[Object(kc.jsx)(T.pb,Object(o.a)({},Object(o.a)(Object(o.a)({coinAInfo:t,coinBInfo:a},i),{},{t:r,tradeFloat:n}))),Object(kc.jsx)(T.kb,Object(o.a)(Object(o.a)({exclusive:!0},Object(o.a)(Object(o.a)({},i),{},{t:r,tgItemJSXs:b,value:u})),{},{handleChange:p}))]})}),Object(kc.jsx)(Ac.a,{flex:1,alignItems:"stretch",flexDirection:"row",marginTop:3,position:"relative",children:Object(kc.jsx)(Ac.a,{flex:1,display:"flex",flexDirection:"column",minHeight:396,maxHeight:420,style:{height:"100%",width:"101%"},children:Object(kc.jsx)(T.Y,{type:u,data:u===T.p.Trend?x:g,riseColor:O,extraInfo:k,handleMove:function(){},showXAxis:!0})})})]})},Qc=function(e){return{id:"simple-tab-".concat(e),"aria-controls":"simple-tabpanel-".concat(e)}},Zc=(Pc.a.div(qc||(qc=Object(i.a)(["\n            position: relative;\n            width: 100%;\n            margin-top: ","px;\n            background-color: var(--color-box);\n            box-shadow: var(--shadow);\n            border-radius: ","px;\n        "])),(function(e){return 4*e.theme.unit}),(function(e){return e.theme.unit})),Object(Pc.a)(Sc.a)(Yc||(Yc=Object(i.a)(["\n    margin-left: ","px;\n"])),(function(e){return e.theme.unit}))),$c=Object(hc.a)("common")((function(e){var t=e.tradeArray,a=e.myTradeArray,n=e.t,c=Object(j.useState)(1),r=Object(fe.a)(c,2),i=r[0],s=r[1],u=Object(j.useState)(0),l=Object(fe.a)(u,2),d=l[0],b=l[1],p=Object(j.useCallback)((function(){var e=window.innerHeight;b(e-64-117-56-120-20-100-50-15)}),[]);return Object(j.useEffect)((function(){return p(),window.addEventListener("resize",p),function(){window.removeEventListener("resize",p)}}),[p]),Object(kc.jsxs)(_c,{item:!0,alignSelf:"stretch",xs:12,marginY:2,paddingBottom:2,flex:1,className:"MuiPaper-elevation2",children:[Object(kc.jsxs)(Zc,{value:i,onChange:function(e,t){s(t)},"aria-label":"tabs switch",children:[Object(kc.jsx)(Ic.a,Object(o.a)({label:n("labelMyTrade")},Qc(0))),Object(kc.jsx)(Ic.a,Object(o.a)({label:n("labelRecent")},Qc(1)))]}),Object(kc.jsx)(Mc.a,{}),Object(kc.jsx)(T.ob,{rawData:0===i?a:t,currentHeight:d})]})})),er=a(819);var tr=function(e){var t=e.throttleWait,a=void 0===t?d.lb.throttleWait:t,n=e.walletLayer2Callback,c=e.walletLayer1Callback,r=ht(),o=r.updateWalletLayer1,i=r.status,s=dn(),u=s.updateWalletLayer2,l=s.status,b=O.a.useMemo((function(){return Pt()}),[]),p=O.a.useCallback(on.throttle((function(e){var t=e.walletLayer1Status,a=e.walletLayer2Status;console.log("xxxxxx",Date.now()),t!==d.M.PENDING&&o(),a!==d.M.PENDING&&u()}),a),[]);O.a.useEffect((function(){var e=b.subscribe((function(){!function(e){var t=e.walletLayer2Status,a=e.walletLayer1Status;p({walletLayer2Status:t,walletLayer1Status:a})}({walletLayer2Status:Fn.getState().walletLayer2.status,walletLayer1Status:Fn.getState().walletLayer2.status})}));return function(){return e.unsubscribe()}}),[b]),O.a.useEffect((function(){n&&l===d.M.UNSET&&n()}),[l]),O.a.useEffect((function(){c&&i===d.M.UNSET&&c()}),[i])};a(277);function ar(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Date,a=Math.round(t.getTime()/1e3)+86400*e;return a}var nr=["sell","buy","slippage"],cr=["sell","buy","slippage"],rr=function(){var e,t,a,n,c;!function(){var e=bn(),t=e.sendSocketTopic,a=e.socketEnd,n=C().account;O.a.useEffect((function(){return n.readyState===d.a.ACTIVATED?t(Object(v.a)({},se.o.account,!0)):a(),function(){a()}}),[n.readyState])}();var r=C(),i=r.account,s=r.status,b=_e(),p=b.coinMap,h=b.tokenMap,k=b.marketArray,x=b.marketCoins,g=b.marketMap,w=(Object(T.Rb)().slippage,dn().walletLayer2,$().ammMap),y=dn().status,A=Object(er.a)("common").t,S=O.a.useState(void 0),I=Object(fe.a)(S,2),M=I[0],N=I[1],P=O.a.useState(T.nb.AVAILABLE),D=Object(fe.a)(P,2),_=D[0],R=D[1],L=O.a.useState(!1),B=Object(fe.a)(L,2),U=B[0],F=B[1],K=O.a.useState(),W=Object(fe.a)(K,2),V=W[0],H=W[1],J=Object(j.useState)(void 0),G=Object(fe.a)(J,2),q=G[0],Y=G[1],z=O.a.useState(void 0),X=Object(fe.a)(z,2),Q=X[0],Z=X[1],ee=O.a.useState({}),te=Object(fe.a)(ee,2),ae=te[0],ne=te[1],ce=O.a.useState([]),re=Object(fe.a)(ce,2),oe=re[0],ie=re[1],le=O.a.useState([]),de=Object(fe.a)(le,2),be=de[0],pe=de[1],me=O.a.useState(void 0),ve=Object(fe.a)(me,2),je=ve[0],Oe=ve[1],he=function(e){var t=_e(),a=t.coinMap,n=t.tokenMap,c=t.marketArray,r=Object(u.h)("".concat(e,"/:market")),o=Object(j.useState)({coinAInfo:void 0,coinBInfo:void 0}),i=Object(fe.a)(o,2),s=i[0],l=i[1],d=Object(j.useState)(""),b=Object(fe.a)(d,2),p=b[0],m=b[1];return O.a.useEffect((function(){var e;if(a&&n&&c){var t=null===r||void 0===r||null===(e=r.params)||void 0===e?void 0:e.market,o="LRC",i="ETH",s="".concat(o,"-").concat(i);if(t){var u=t.match(/(\w+)-(\w+)/i);u&&u.length>=3&&a[u[1]]&&a[u[2]]&&(o=u[1],i=u[2]),s=Object(se.z)(c,o,i).market}var d=a[o],b=a[i];l({coinAInfo:d,coinBInfo:b}),m(s)}}),[]),{market:p,pair:s,setPair:l,setMarket:m}}("/trading/lite"),ke=he.pair,xe=he.setPair,ge=he.market,we=he.setMarket,ye=O.a.useState(void 0),Ae=Object(fe.a)(ye,2),Se=Ae[0],Ie=Ae[1],Me=Object(j.useState)(),Ne=Object(fe.a)(Me,2),Ce=Ne[0],Te=Ne[1],Ee=Object(j.useState)("0"),Pe=Object(fe.a)(Ee,2),De=Pe[0],Re=Pe[1],Le=Object(j.useState)("0"),Be=Object(fe.a)(Le,2),Ue=Be[0],Fe=Be[1],Ke=Object(j.useState)(),We=Object(fe.a)(Ke,2),Ve=We[0],He=We[1],Je=O.a.useState(),Ge=Object(fe.a)(Je,2),qe=Ge[0],Ye=Ge[1],ze=O.a.useCallback((function(){ge&&i.accountId&&i.apiKey&&ue.userAPI?ue.userAPI.getUserTrades({accountId:i.accountId,market:ge},i.apiKey).then((function(e){var t=fc(0,e.userTrades);pe(t||[])})):pe([])}),[ge,i.accountId,i.apiKey]);O.a.useEffect((function(){var e;(null===ke||void 0===ke||null===(e=ke.coinBInfo)||void 0===e?void 0:e.simpleName)&&it(void 0,void 0)}),[null===ke||void 0===ke||null===(e=ke.coinBInfo)||void 0===e?void 0:e.simpleName]),O.a.useEffect((function(){s===d.M.UNSET&&y===d.M.UNSET&&ze()}),[i.readyState,ge,s,y]);var Xe=O.a.useCallback((function(){ue.exchangeAPI?ue.exchangeAPI.getMarketTrades({market:ge}).then((function(e){var t=e.marketTrades,a=fc(0,t);ie(a)})):ie([])}),[ge,ie]),Qe=O.a.useCallback(Object(f.a)(m.a.mark((function e(){var t,a;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!ge||!ue.exchangeAPI){e.next=7;break}return cn("swap page updateDepth",ge),e.next=4,ue.exchangeAPI.getMixDepth({market:ge});case 4:t=e.sent,a=t.depth,He(a);case 7:case"end":return e.stop()}}),e)}))),[ge,He]);O.a.useEffect((function(){ge&&(Xe(),Qe())}),[ge]);var Ze=O.a.useCallback((function(){var e=!!((null===Ce||void 0===Ce?void 0:Ce.amountBOut)&&V&&se.J(null===Ce||void 0===Ce?void 0:Ce.amountBOut).gte(se.J(V)));if(U)R(T.nb.LOADING);else{if(!e&&void 0!==V){if(void 0===Q||void 0===(null===Q||void 0===Q?void 0:Q.sell.tradeValue)||void 0===(null===Q||void 0===Q?void 0:Q.buy.tradeValue))return R(T.nb.DISABLED),"labelEnterAmount";var t=null===Q||void 0===Q?void 0:Q.buy.belong,a=oc(V,t)+" "+(null===Q||void 0===Q?void 0:Q.buy.belong);return R(T.nb.DISABLED),"labelLimitMin, ".concat(a)}R(T.nb.AVAILABLE)}}),[V,Q,U,R]),$e=Object.assign(ec(Qn),Object(v.a)({},d.eb.ACTIVATED,[Ze]));O.a.useEffect((function(){s===d.M.UNSET&&N(Xn($e))}),[i.readyState,s,U,null===Q||void 0===Q?void 0:Q.sell.tradeValue]);var et=Object(j.useCallback)(function(){var e=Object(f.a)(m.a.mark((function e(t){var a,n,c,r,s,u,b,p,f,v,j;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=t.sell,n=t.buy,t.slippage,c=Object(l.a)(t,nr),r=Fn.getState().system.exchangeInfo,F(!0),ue.userAPI&&h&&r&&Ce&&i.readyState===d.a.ACTIVATED){e.next=7;break}return Y({flag:!0,type:"error",label:A("labelSwapFailed")}),F(!1),e.abrupt("return");case 7:return s=h[a.belong],u=h[n.belong],b={accountId:i.accountId,sellTokenId:s.tokenId},e.next=12,ue.userAPI.getNextStorageId(b,i.apiKey);case 12:return p=e.sent,e.prev=13,f=Ce.exceedDepth?se.j.AMM_POOL:se.j.MIXED,v={exchange:r.exchangeAddress,accountId:i.accountId,storageId:p.orderId,sellToken:{tokenId:s.tokenId,volume:Ce.amountS},buyToken:{tokenId:u.tokenId,volume:Ce.amountBOutSlip.minReceived},allOrNone:!1,validUntil:ar(30),maxFeeBips:parseInt(Ue),fillAmountBOrS:!1,orderType:se.h.TakerOnly,tradeChannel:f,eddsaSignature:""},cn(v),e.next=19,ue.userAPI.submitOrder(v,i.eddsaKey.sk,i.apiKey);case 19:j=e.sent,cn(j),(null===j||void 0===j?void 0:j.hash)?(Y({flag:!0,type:"success",label:A("labelSwapSuccess")}),Et(),Z(Object(o.a)(Object(o.a)({},Q),{sell:Object(o.a)(Object(o.a)({},null===Q||void 0===Q?void 0:Q.sell),{},{tradeValue:0}),buy:Object(o.a)(Object(o.a)({},null===Q||void 0===Q?void 0:Q.buy),{},{tradeValue:0})}))):(Y({flag:!0,type:"error",label:A("labelSwapFailed")}),rn(null===j||void 0===j?void 0:j.errInfo)),e.next=28;break;case 24:e.prev=24,e.t0=e.catch(13),se.s(e.t0),Y({flag:!0,type:"error",label:A("labelSwapFailed")});case 28:return Te(void 0),e.next=31,Object(se.I)(un);case 31:F(!1),c.__cache__&&$n(c.__cache__);case 33:case"end":return e.stop()}}),e,null,[[13,24]])})));return function(t){return e.apply(this,arguments)}}(),[Q,Ce,h]),tt=Object.assign(ec(Zn),Object(v.a)({},d.eb.ACTIVATED,[et])),at=O.a.useCallback((function(e){var t=e.sell,a=e.buy,n=e.slippage,c=Object(l.a)(e,cr);Xn(tt,[Object(o.a)({sell:t,buy:a,slippage:n},c)])}),[tt]);O.a.useEffect((function(){s===d.M.UNSET&&ct()}),[qe,i.readyState,s,ge,null===Q||void 0===Q?void 0:Q.sell.belong,null===Q||void 0===Q?void 0:Q.buy.belong]);var nt=O.a.useCallback(Object(f.a)(m.a.mark((function e(){var t,a,n,c,r,o,u,l,b,p;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(ue.userAPI&&ge&&(null===ke||void 0===ke||null===(t=ke.coinAInfo)||void 0===t?void 0:t.simpleName)&&(null===ke||void 0===ke||null===(a=ke.coinBInfo)||void 0===a?void 0:a.simpleName)&&w&&s===d.M.UNSET)){e.next=10;break}return r=se.z(k,null===ke||void 0===ke||null===(n=ke.coinAInfo)||void 0===n?void 0:n.simpleName,null===ke||void 0===ke||null===(c=ke.coinBInfo)||void 0===c?void 0:c.simpleName),o=r.amm,u=o&&w[o]?o:ge,l={accountId:i.accountId,market:u},e.next=6,ue.userAPI.getMinimumTokenAmt(l,i.apiKey);case 6:b=e.sent,p=b.amountMap,Ye(p),cn("amountMap:",p);case 10:case"end":return e.stop()}}),e)}))),[Ye,ge,k,w,s,i.apiKey,null===ke||void 0===ke||null===(t=ke.coinAInfo)||void 0===t?void 0:t.simpleName,null===ke||void 0===ke||null===(a=ke.coinBInfo)||void 0===a?void 0:a.simpleName]);Jc((function(){nt()}),[ge,null===ke||void 0===ke||null===(n=ke.coinAInfo)||void 0===n?void 0:n.simpleName,null===ke||void 0===ke||null===(c=ke.coinBInfo)||void 0===c?void 0:c.simpleName,s]);var ct=O.a.useCallback(Object(f.a)(m.a.mark((function e(){var t,a,n,c,r,s,u,l,b,p,f,v,j,O,h;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=null===Q||void 0===Q?void 0:Q.sell.belong,a=null===Q||void 0===Q?void 0:Q.buy.belong,cn("enter walletLayer2Callback: base:".concat(t," quote:").concat(a)),k&&qe&&t&&a&&ge&&ue.userAPI&&i.readyState===d.a.ACTIVATED&&w&&(null===i||void 0===i?void 0:i.accountId)&&(null===i||void 0===i?void 0:i.apiKey)?(u=mc(),l=u.walletMap,b=se.z(k,t,a),p=b.amm,f=p&&w[p]?p:ge,v=qe[a],j=v.userOrderInfo.takerRate,O=p&&w[p]?w[p].__rawConfig__.feeBips:0,h=se.J(O).plus(se.J(j)).toString(),Z({sell:{belong:ae.sellCoinInfoMap?null===(n=ae.sellCoinInfoMap[ae.coinSell])||void 0===n?void 0:n.simpleName:void 0,balance:l?null===(c=l[ae.coinSell])||void 0===c?void 0:c.count:0},buy:{belong:ae.sellCoinInfoMap?null===(r=ae.sellCoinInfoMap[ae.coinBuy])||void 0===r?void 0:r.simpleName:void 0,balance:l?null===(s=l[ae.coinBuy])||void 0===s?void 0:s.count:0}}),H(null===v||void 0===v?void 0:v.userOrderInfo.minAmount),Fe(h),cn("".concat(f," totalFee: ").concat(h)),Re(j.toString()),ne(Object(o.a)(Object(o.a)({},ae),{},{walletMap:l,fee:h}))):(cn("setFeeBips('0')"),Fe("0"),Re("0"),ne(Object(o.a)(Object(o.a)({},ae),{},{walletMap:{},fee:"0"})),Z({sell:{belong:t,balance:0},buy:{belong:a,balance:0}}));case 4:case"end":return e.stop()}}),e)}))),[null===Q||void 0===Q?void 0:Q.sell.belong,qe,null===Q||void 0===Q?void 0:Q.buy.belong,k,w,i.readyState,i.apiKey,i.accountId]);tr({walletLayer2Callback:ct});var rt=function(){var e=Object(f.a)(m.a.mark((function e(t,a){var n;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:cn("handleSwapPanelEvent..."),n=t.tradeData,it(a,n);case 3:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),ot=O.a.useCallback(function(){var e=Object(f.a)(m.a.mark((function e(t,a){var n,c,r,i,s,u,l,d;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(k&&h&&g&&w&&ae&&ge&&Ve&&Ve.symbol===ge){e.next=3;break}return n=Object(o.a)({},ae),e.abrupt("return",{_tradeData:a,_tradeCalcData:n});case 3:(r=(c="sell"===t)?a.sell.tradeValue:a.buy.tradeValue)?"0."===(r=r.toString().trim())&&(r="0"):r="0",cn("input val:",r),i=a.sell.belong,s=a.buy.belong,void 0===(u=a.slippage)&&(u=.5),u=se.J(u).times(100).toString(),l=se.D(r,i,s,c,k,h,g,Ve,w,Se,De,u),Te(l),ae.priceImpact=null===l||void 0===l?void 0:l.priceImpact,ae.minimumReceived=null===l||void 0===l?void 0:l.amountBOutSlip.minReceivedVal,c?a.buy.tradeValue=(null===l||void 0===l?void 0:l.output)?parseFloat(null===l||void 0===l?void 0:l.output):0:a.sell.tradeValue=(null===l||void 0===l?void 0:l.output)?parseFloat(null===l||void 0===l?void 0:l.output):0,d=Object(o.a)({},ae),Z(a),ne(Object(o.a)(Object(o.a)({},d),{},{fee:Ue}));case 20:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),[Ve,Q,ae,Se]),it=function(e,t){var a,n,c=void 0,r="".concat(null===t||void 0===t?void 0:t.sell.belong,"-").concat(null===t||void 0===t?void 0:t.buy.belong);switch(e){case T.eb.SEll_CLICK:case T.eb.BUY_CLICK:return;case T.eb.SELL_SELECTED:c="sell";break;case T.eb.BUY_SELECTED:c="buy";break;case T.eb.EXCHANGE_CLICK:cn("Exchange Click")}if(ae&&r==="".concat(ae.coinSell,"-").concat(ae.coinBuy)&&c&&t&&(!Q||(null===(a=Q[c])||void 0===a?void 0:a.tradeValue)!==(null===(n=t[c])||void 0===n?void 0:n.tradeValue)))ot(c,t);else{var i,s,u,l,b={},m=(null===ke||void 0===ke||null===(i=ke.coinAInfo)||void 0===i?void 0:i.simpleName)&&(null===ke||void 0===ke||null===(s=ke.coinBInfo)||void 0===s?void 0:s.simpleName),f={coinSell:m?null===ke||void 0===ke||null===(u=ke.coinAInfo)||void 0===u?void 0:u.simpleName:"LRC",coinBuy:m?null===ke||void 0===ke||null===(l=ke.coinBInfo)||void 0===l?void 0:l.simpleName:"ETH"},j=null===t||void 0===t?void 0:t.sell.belong,O=null===t||void 0===t?void 0:t.buy.belong,y="".concat(j,"-").concat(O);if(j&&O)if(f.coinSell=j,g&&g[y])f.coinBuy=O;else if(h&&h[j])if(h[j].tradePairs.indexOf(O)>=0)f.coinBuy=O;else{var A=h[j].tradePairs[0];if(!A)throw Error("no such symbol!");f.coinBuy=A}else f.coinSell="LRC",f.coinBuy="ETH";var S=se.z(k,f.coinSell,f.coinBuy),I=S.amm,M=S.market,N=S.baseShow,C=S.quoteShow;if(M){ne(Object(o.a)(Object(o.a)({},ae),{},{fee:Ue},f)),p&&(xe({coinAInfo:p[N],coinBInfo:p[C]}),we(M));var P=[];k&&I&&ge&&w&&(P=[Oc({coinKey:ge,ammKey:I,ammMap:w})],Promise.all(Object(E.a)(P)).then((function(e){var t=Object(fe.a)(e,1)[0],a=t.ammPoolsBalance,n=t.tickMap;if(Ie(a),h){var c,r,i,s,u=function(e){var t,a=e.coinKey,n=(e.market,e.ammPoolsBalance),c=e.fee,r=e.tokenMap,i=e.tickerData,s=e._tradeCalcData,u=e.coinMap,l=e.marketCoins,b=a.match(/(\w+)-(\w+)/i),p=Object(fe.a)(b,3),m=p[1],f=(p[2],NaN);if(a&&(null===i||void 0===i?void 0:i.symbol)&&a===i.symbol&&(f=i.base===m?Number(i.close):0!==Number(i.close)?1/Number(i.close):0),isNaN(f)&&n){var j,O=Object(se.x)(a),h=O.base,k=O.quote,x=n.pooled[0],g=n.pooled[1];if(h&&k&&r[h].tokenId===x.tokenId)j=[[h,x.volume],[k,g.volume]];else{if(!h||!k||r[h].tokenId!==g.tokenId)throw new d.o(d.u.NO_SUPPORT_PAIR);j=[[h,g.volume],[k,x.volume]]}var w,y=j,A=Object(fe.a)(y,2),S=A[0],I=A[1];S&&I&&(f=parseFloat(null===(w=Wn(I[0],I[1]))||void 0===w?void 0:w.div(Wn(S[0],S[1])||1).toFixed(7,0)),cn("pairDetailDone stob from amm:",f))}var M=0!==f&&void 0!==f&&!isNaN(f);return s.StoB=M?f:0,s.BtoS=M?1/(1*f):0,s.sellCoinInfoMap=u&&(null===l||void 0===l?void 0:l.reduce((function(e,t){return Object(o.a)(Object(o.a)({},e),{},Object(v.a)({},t,u[t]))}),{})),s.buyCoinInfoMap=u&&r&&(null===(t=r[s.coinSell].tradePairs)||void 0===t?void 0:t.reduce((function(e,t){return Object(o.a)(Object(o.a)({},e),{},Object(v.a)({},t,u[t]))}),{})),s.fee=c,{_tradeCalcData:s}}({coinKey:"".concat(f.coinSell,"-").concat(f.coinBuy),market:ge,ammPoolsBalance:a,tickerData:n[ge]?n[ge]:{},tokenMap:h,_tradeCalcData:f,coinMap:p,marketCoins:x,fee:Ue})._tradeCalcData;f=u,b=bc(n[ge]?n[ge]:{}),ne(f),Oe(b),Z({sell:{belong:f.sellCoinInfoMap?null===(c=f.sellCoinInfoMap[f.coinSell])||void 0===c?void 0:c.simpleName:void 0,balance:f.walletMap?null===(r=f.walletMap[f.coinSell])||void 0===r?void 0:r.count:0},buy:{belong:f.sellCoinInfoMap?null===(i=f.sellCoinInfoMap[f.coinBuy])||void 0===i?void 0:i.simpleName:void 0,balance:f.walletMap?null===(s=f.walletMap[f.coinBuy])||void 0===s?void 0:s.count:0}})}})).catch((function(e){cn(e)})))}}};return{swapToastOpen:q,setSwapToastOpen:Y,tradeCalcData:ae,tradeFloat:je,tradeArray:oe,myTradeArray:be,tradeData:Q,pair:ke,marketArray:k,onSwapClick:at,swapBtnI18nKey:M,swapBtnStatus:_,handleSwapPanelEvent:rt,updateDepth:Qe}},or=Object(hc.a)("common")((function(e){var t,a,n=Object.assign({},e),c=rr(),r=c.tradeCalcData,i=c.tradeData,s=c.tradeFloat,u=c.tradeArray,l=c.myTradeArray,d=c.marketArray,b=c.handleSwapPanelEvent,p=c.onSwapClick,m=c.pair,f=c.swapBtnI18nKey,v=c.swapBtnStatus,j=c.swapToastOpen,h=c.setSwapToastOpen,k=c.updateDepth,x=O.a.useCallback((function(){h(void 0)}),[]);return Object(kc.jsxs)(kc.Fragment,{children:[Object(kc.jsx)(T.jb,{alertText:null!==(t=null===j||void 0===j?void 0:j.label)&&void 0!==t?t:"",severity:null===j||void 0===j?void 0:j.type,open:null!==(a=null===j||void 0===j?void 0:j.flag)&&void 0!==a&&a,autoHideDuration:ln,onClose:x}),Object(kc.jsxs)(yc.a,{container:!0,marginRight:3,alignContent:"stretch",direction:"column",flexWrap:"nowrap",children:[Object(kc.jsx)(Xc,Object(o.a)({},Object(o.a)(Object(o.a)(Object(o.a)({},n),m),{},{marketArray:d,tradeFloat:s,tradeArray:u}))),Object(kc.jsx)($c,{tradeArray:u,myTradeArray:l})]}),Object(kc.jsx)(Ac.a,{display:"flex",style:{minWidth:"var(--swap-box-width)"},children:Object(kc.jsx)(Rc,{children:Object(kc.jsx)(T.db,Object(o.a)({onRefreshData:k,tradeData:i,tradeCalcData:r,onSwapClick:p,swapBtnI18nKey:f,swapBtnStatus:v},Object(o.a)({handleSwapPanelEvent:b},n)))})})]})})),ir=a(1736),sr=a(194);var ur=Object(hc.a)("common")((function(e){var t=e.t,a=O.a.useRef(null),n=O.a.useState(10),c=Object(fe.a)(n,2),r=c[0],i=c[1],s=function(){var e=C().account,t=e.accountId,a=e.apiKey,n=Object(j.useState)([]),c=Object(fe.a)(n,2),r=c[0],o=c[1],i=Object(j.useState)(!0),s=Object(fe.a)(i,2),u=s[0],l=s[1],d=function(e){return""===e?T.qb.processing:"processed"===e?T.qb.processed:"processing"===e?T.qb.processing:"received"===e?T.qb.received:T.qb.failed},b=Object(j.useCallback)(Object(f.a)(m.a.mark((function e(){var n,c,r,i,s,u,b,p,f;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(ue&&ue.userAPI&&t&&a)){e.next=11;break}return e.next=3,Promise.all([ue.userAPI.getUserTranferList({accountId:t},a),ue.userAPI.getUserDepositHistory({accountId:t},a),ue.userAPI.getUserOnchainWithdrawalHistory({accountId:t},a)]);case 3:i=e.sent,s=null===(n=i[0].userTransfers)||void 0===n?void 0:n.map((function(e){return{side:T.sb.transfer,amount:{unit:e.symbol||"",value:Number(Kn(e.symbol,e.amount))},fee:{unit:e.feeTokenSymbol||"",value:Number(Wn(e.feeTokenSymbol,e.feeAmount||0))},memo:e.memo||"",time:e.timestamp,txnHash:e.hash,status:d(e.status)}})),u=null===(c=i[1].userDepositHistory)||void 0===c?void 0:c.map((function(e){return{side:T.sb.deposit,symbol:e.symbol,amount:{unit:e.symbol||"",value:Number(Kn(e.symbol,e.amount))},fee:{unit:"",value:0},memo:"",time:e.timestamp,txnHash:e.txHash,status:d(e.status)}})),b=null===(r=i[2].userOnchainWithdrawalHistory)||void 0===r?void 0:r.map((function(e){var t;return{side:T.sb.withdraw,amount:{unit:e.symbol||"",value:Number(Kn(e.symbol,e.amount))},fee:{unit:e.feeTokenSymbol||"",value:Number(null===(t=Kn(e.feeTokenSymbol,e.feeAmount||0))||void 0===t?void 0:t.toFixed(6))},memo:"",time:e.timestamp,txnHash:e.txHash,status:d(e.status)}})),p=[].concat(Object(E.a)(null!==s&&void 0!==s?s:[]),Object(E.a)(null!==u&&void 0!==u?u:[]),Object(E.a)(null!==b&&void 0!==b?b:[])),f=p.sort((function(e,t){return t.time-e.time})),o(f),l(!1);case 11:case"end":return e.stop()}}),e)}))),[t,a]);return Jc((function(){b()}),[b]),{txs:r,isLoading:u}}(),u=s.txs,l=s.isLoading;return O.a.useEffect((function(){var e,t=null===a||void 0===a||null===(e=a.current)||void 0===e?void 0:e.offsetHeight;t&&i(Math.floor((t-120)/44)-2)}),[a,r]),Object(kc.jsxs)(Dc,{ref:a,children:[Object(kc.jsx)("div",{className:"title",children:t("labelTxnPageTitle")}),Object(kc.jsx)("div",{className:"tableWrapper",children:Object(kc.jsx)(T.rb,Object(o.a)({},Object(o.a)({rawData:u,pagination:{pageSize:r,total:u.length},showFilter:!0,showLoading:l,getTxnList:function(){}},e)))})]})}));var lr,dr,br,pr=["t"],mr=Object(Pc.a)(Ac.a)(lr||(lr=Object(i.a)(["\n    height: 225px;\n\n    > section {\n        //position: relative;\n        //width: calc(50% - 6px);\n        //height: 100%;\n        background: var(--color-box);\n        border-radius: ","px;\n        padding: ","px ","px;\n    }\n"])),(function(e){return e.theme.unit}),(function(e){return 2.5*e.theme.unit}),(function(e){return 3*e.theme.unit})),fr=Object(Pc.a)(Ac.a)(dr||(dr=Object(i.a)(["\n    // background: no-repeat center;\n    // background-color: red;\n    // background-image: url('chartsDefaultDark.png');\n"]))),vr=(Object(Pc.a)(Ac.a)(br||(br=Object(i.a)(["\n    position: absolute;\n    z-index: 10;\n    right: ","px;\n    bottom: ","px;\n"])),(function(e){return 3*e.theme.unit}),(function(e){return 2.5*e.theme.unit})),Object(hc.a)("common")((function(e){var t=e.t,a=Object(l.a)(e,pr),c=Object(j.useRef)(null),r=Object(j.useState)(10),i=Object(fe.a)(r,2),s=i[0],b=i[1],p=Object(j.useState)("week"),h=Object(fe.a)(p,2),k=(h[0],h[1],function(){var e=O.a.useState([]),t=Object(fe.a)(e,2),a=t[0],n=t[1],c=O.a.useState([]),r=Object(fe.a)(c,2),i=r[0],s=r[1],u=C().account,l=bn(),b=l.sendSocketTopic,p=l.socketEnd,j=$().ammMap,h=dn().walletLayer2,k=Fn.getState().tokenMap.marketArray;O.a.useEffect((function(){return u.readyState===d.a.ACTIVATED?b(Object(v.a)({},se.o.account,!0)):p(),function(){p()}}),[u.readyState]);var x=O.a.useCallback(Object(f.a)(m.a.mark((function e(){var t,a,c,r=arguments;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=r.length>0&&void 0!==r[0]?r[0]:7,e.next=3,null===(t=ue.walletAPI)||void 0===t?void 0:t.getUserAssets({wallet:u.accAddress,assetType:se.d.DEX,limit:a});case 3:(c=e.sent)&&c.userAssets.length&&c.userAssets.length&&n(c.userAssets.map((function(e){return{timeStamp:Number(e.createdAt),close:Number(e.amount)}})));case 5:case"end":return e.stop()}}),e)}))),[u.accAddress]),g=O.a.useCallback((function(){var e=mc(),t=e&&e.walletMap?Object.keys(e.walletMap):[],a=e&&e.walletMap?Object.values(e.walletMap):[],n=t.map((function(e,t){return{token:e,detail:a[t]}}));s(n)}),[]);tr({walletLayer2Callback:g}),O.a.useEffect((function(){ue&&ue.walletAPI&&h&&x()}),[h]);var w=Fn.getState().system.faitPrices,y=w?Object.entries(w).map((function(e){return{token:e[0],detail:e[1]}})):[],A=i.map((function(e){if("LP"!==e.token.split("-")[0]){var t,a,n,c,r="DAI"===e.token?1:Number(y.find((function(t){return t.token===e.token}))?null===(t=y.find((function(t){return t.token===e.token})))||void 0===t?void 0:t.detail.price:0)/Number(null===(a=y.find((function(e){return"USDT"===e.token})))||void 0===a?void 0:a.detail.price);return{name:e.token,value:Number(Kn(e.token,null===(n=e.detail)||void 0===n||null===(c=n.detail)||void 0===c?void 0:c.total))*r}}var o=e.token.split("-");o.splice(0,1,"AMM");var i=o.join("-"),s=0;return j&&(s=j[i].totalLPToken),{name:e.token,value:s}})),S=A.map((function(e){return e.value})).reduce((function(e,t){return e+t}),0),I=A.map((function(e){return Object(o.a)(Object(o.a)({},e),{},{value:e.value/S})})),M=I.filter((function(e){return"LP"===e.name.split("-")[0]})).reduce((function(e,t){return{name:"LP-Token",value:e.value+t.value}}),{name:"LP-Token",value:0});return{chartData:a,formattedData:A,formattedDoughnutData:I.filter((function(e){return"LP"===e.name.split("-")[0]})).length>0?[].concat(Object(E.a)(I.filter((function(e){return"LP"!==e.name.split("-")[0]}))),[M]):I,assetsRawData:i.map((function(e){var t,a,n,c,r,o,i=Number(null===(t=y.find((function(t){return t.token===e.token})))||void 0===t?void 0:t.detail.price)/Number(null===(a=y.find((function(e){return"USDT"===e.token})))||void 0===a?void 0:a.detail.price);return{token:{type:"LP"===e.token.split("-")[0]?T.mb.lp:T.mb.single,value:e.token},amount:String(Number(Kn(e.token,null===(n=e.detail)||void 0===n?void 0:n.detail.total)).toFixed(6))||d.t,available:String(null===(c=e.detail)||void 0===c?void 0:c.count)||d.t,locked:String(Wn(e.token,null===(r=e.detail)||void 0===r?void 0:r.detail.locked))||d.t,smallBalance:i*Number(Kn(e.token,null===(o=e.detail)||void 0===o?void 0:o.detail.total))<1}})),marketArray:k}}()),x=k.formattedDoughnutData,g=k.assetsRawData,w=k.formattedData,y=(k.chartData,k.marketArray),A=Fn.getState().walletLayer2.walletLayer2;Object(j.useEffect)((function(){var e,t=null===c||void 0===c||null===(e=c.current)||void 0===e?void 0:e.offsetHeight;t&&b(Math.floor((t-120)/44)-1)}),[c,s]);var S=Object(j.useCallback)((function(e){return y?y.filter((function(t){var a=t.split("-"),n=Object(fe.a)(a,2),c=n[0],r=n[1];return e===c||e===r})):[]}),[y]),I=function(){var e=Object(n.b)(),t=C().account.readyState,a=Object(er.a)("common").t,c=O.a.useCallback((function(n,c){var r=t===d.a.NO_ACCOUNT;console.log("isNoAccount: ",r,a("depositTitleAndActive"));var i={isShow:n,props:Object(o.a)({title:a(r?"depositTitleAndActive":"depositTitle"),description:"depositAndActiveDescription"},c)};e(Object(T.Kb)(i))}),[e,a,t]),r=O.a.useCallback((function(t,a){return e(Object(T.Mb)({isShow:t,props:Object(o.a)({},a)}))}),[e]),i=O.a.useCallback((function(t,a){return e(Object(T.Nb)({isShow:t,props:Object(o.a)({},a)}))}),[e]);return O.a.useCallback((function(t,a){return e(Object(T.Lb)({isShow:t,props:Object(o.a)({},a)}))}),[e]),{showDeposit:c,showTransfer:r,showWithdraw:i}}(),M=I.showDeposit,N=I.showTransfer,P=I.showWithdraw,D=Object(u.f)(),_=Object(j.useCallback)((function(e){M(!0,{tradeData:{balance:"",belong:e}})}),[M]),R=Object(j.useCallback)((function(e){N(!0,{tradeData:{balance:"",belong:e}})}),[N]),L=Object(j.useCallback)((function(e){P(!0,{tradeData:{balance:"",belong:e}})}),[P]),B=Object(j.useCallback)((function(e,t){D&&D.push("/liquidity/pools/coinPair/".concat(e,"?type=").concat(t))}),[D]),U={assetInfo:{totalAsset:w.map((function(e){return e.value})).reduce((function(e,t){return e+t}),0),priceTag:d.I.Dollar},onShowDeposit:_,onShowTransfer:R,onShowWithdraw:L};return Object(kc.jsxs)(kc.Fragment,{children:[Object(kc.jsx)(Ac.a,{children:Object(kc.jsx)(T.l,Object(o.a)({},Object(o.a)(Object(o.a)({t:t},a),U)))}),Object(kc.jsxs)(mr,{flexDirection:"row",display:"flex",justifyContent:"space-between",alignItems:"stretch",marginTop:2,children:[Object(kc.jsxs)(Ac.a,{flex:1,component:"section",className:"MuiPaper-elevation2",marginRight:2,children:[Object(kc.jsx)(sr.a,{component:"span",color:"textSecondary",variant:"body1",children:t("labelAssetsDistribution")}),Object(kc.jsx)(T.u,{data:A?x:[]})]}),Object(kc.jsxs)(Ac.a,{display:"flex",flexDirection:"column",flex:1,component:"section",className:"MuiPaper-elevation2",children:[Object(kc.jsx)(sr.a,{component:"span",color:"textSecondary",variant:"body1",children:t("labelTotalAssets")}),Object(kc.jsx)(fr,{flex:1,component:"div"})]})]}),Object(kc.jsx)(Dc,{marginTop:2,ref:c,className:"MuiPaper-elevation2",children:Object(kc.jsx)(Ac.a,{className:"tableWrapper",children:Object(kc.jsx)(T.m,Object(o.a)({},Object(o.a)({rawData:g,pagination:{pageSize:s},showFiliter:!0,onShowDeposit:_,onShowTransfer:R,onShowWithdraw:L,onLpDeposit:B,onLpWithdraw:B,getMakretArrayListCallback:S},a)))})})]})})));var jr=Object(hc.a)("common")((function(e){var t=O.a.useState(10),a=Object(fe.a)(t,2),n=a[0],c=a[1],r=function(){var e=O.a.useState([]),t=Object(fe.a)(e,2),a=t[0],n=t[1],c=O.a.useState(!0),r=Object(fe.a)(c,2),o=r[0],i=r[1],s=C().account,u=s.accountId,l=s.apiKey,b=Fn.getState().tokenMap.tokenMap,p=O.a.useCallback(Object(f.a)(m.a.mark((function e(){var t;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(ue&&ue.userAPI&&u&&l&&b)){e.next=5;break}return e.next=3,ue.userAPI.getUserTrades({accountId:u},l);case 3:(t=e.sent)&&t.userTrades&&(n(t.userTrades.map((function(e){var t,a,n=e.market.split("-"),c=e.side===se.i.Buy?d.X.Buy:d.X.Sell,r=n[n.length-2],o=n[n.length-1],i=c===d.X.Buy?r:o,s=c===d.X.Buy?o:r,u=e.side===se.i.Buy?i:s;return{side:c,price:{key:i,value:Object(se.J)(e.price).toNumber()},fee:{key:u,value:u?null===(t=Kn(u,e.fee))||void 0===t?void 0:t.toFixed(6):void 0},time:Number(e.tradeTime),amount:{from:{key:i,value:i?Kn(i,e.volume):void 0},to:{key:s,value:i?null===(a=Wn(i,e.volume))||void 0===a?void 0:a.times(e.price).toNumber():void 0}}}}))),i(!1));case 5:case"end":return e.stop()}}),e)}))),[u,l,b]);return O.a.useEffect((function(){p()}),[p]),{userTrades:a,showLoading:o}}(),i=r.userTrades,s=r.showLoading,u=O.a.useRef(null),l=e.t;return O.a.useEffect((function(){var e,t=null===u||void 0===u||null===(e=u.current)||void 0===e?void 0:e.offsetHeight;t&&c(Math.floor((t-120)/44)-2)}),[u,n]),Object(kc.jsxs)(Dc,{ref:u,children:[Object(kc.jsx)("div",{className:"title",children:l("labelTradePageTitle")}),Object(kc.jsx)("div",{className:"tableWrapper extraTradeClass",children:Object(kc.jsx)(T.ob,Object(o.a)({},Object(o.a)({rawData:i,showFilter:!0,showLoading:s},e)))})]})}));var Or=["t"],hr=Object(hc.a)("common")((function(e){var t=e.t,a=Object(l.a)(e,Or),n=O.a.useRef(null),c=O.a.useState(10),r=Object(fe.a)(c,2),i=r[0],s=r[1],u=function(){var e=O.a.useState([]),t=Object(fe.a)(e,2),a=t[0],n=t[1],c=O.a.useState(!0),r=Object(fe.a)(c,2),o=r[0],i=r[1],s=Fn.getState().account,u=s.accountId,l=s.apiKey,d=Fn.getState().tokenMap.tokenMap,b=O.a.useCallback((function(e){if(d){var t=Object.keys(d),a=Object.values(d).findIndex((function(t){return t.tokenId===e}));return a>-1?t[a]:""}return""}),[d]),p=O.a.useCallback(Object(f.a)(m.a.mark((function e(){var t,a;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(ue.ammpoolAPI&&u&&l)){e.next=5;break}return e.next=3,ue.ammpoolAPI.getUserAmmPoolTxs({accountId:u},l);case 3:(t=e.sent)&&t.userAmmPoolTxs&&(a=t.userAmmPoolTxs.map((function(e){var t,a,n,c,r,o,i,s,u,l,d,p;return{side:e.txType===se.b.JOIN?T.g.Join:T.g.Exit,amount:{from:{key:b(null===(t=e.poolTokens[0])||void 0===t?void 0:t.tokenId),value:String(Kn(b(null===(a=e.poolTokens[0])||void 0===a?void 0:a.tokenId),null===(n=e.poolTokens[0])||void 0===n?void 0:n.actualAmount))},to:{key:b(null===(c=e.poolTokens[1])||void 0===c?void 0:c.tokenId),value:String(Kn(b(null===(r=e.poolTokens[1])||void 0===r?void 0:r.tokenId),null===(o=e.poolTokens[1])||void 0===o?void 0:o.actualAmount))}},lpTokenAmount:String(Kn(b(null===(i=e.lpToken)||void 0===i?void 0:i.tokenId),null===(s=e.lpToken)||void 0===s?void 0:s.actualAmount)),fee:{key:b(null===(u=e.poolTokens[1])||void 0===u?void 0:u.tokenId),value:null===(l=Kn(b(null===(d=e.poolTokens[1])||void 0===d?void 0:d.tokenId),null===(p=e.poolTokens[1])||void 0===p?void 0:p.feeAmount))||void 0===l?void 0:l.toFixed(6)},time:e.updatedAt}})),n(a),i(!1));case 5:case"end":return e.stop()}}),e)}))),[u,l,b]);return Object(j.useEffect)((function(){p()}),[p]),{ammRecordList:a,showLoading:o}}(),d=u.ammRecordList,b=u.showLoading;return O.a.useEffect((function(){var e,t=null===n||void 0===n||null===(e=n.current)||void 0===e?void 0:e.offsetHeight;t&&s(Math.floor((t-120)/44)-2)}),[n,i]),Object(kc.jsx)(kc.Fragment,{children:Object(kc.jsxs)(Dc,{ref:n,className:"MuiPaper-elevation2",children:[Object(kc.jsx)("div",{className:"title",children:t("labelAmmPageTitle")}),Object(kc.jsx)("div",{className:"tableWrapper",children:Object(kc.jsx)(T.h,Object(o.a)({},Object(o.a)({rawData:d,pagination:{pageSize:i},showFilter:!0,showLoading:b},a)))})]})})}));var kr,xr,gr,wr,yr=Object(hc.a)("common")((function(e){var t=O.a.useState(0),a=Object(fe.a)(t,2),n=a[0],c=a[1],r=O.a.useState("transactions"),i=Object(fe.a)(r,2),s=i[0],u=i[1],l=function(){var e=C().account,t=e.accountId,a=e.apiKey,n=Object(j.useState)([]),c=Object(fe.a)(n,2),r=c[0],i=c[1],s=Object(j.useState)(0),u=Object(fe.a)(s,2),l=u[0],d=u[1],b=Object(j.useState)(!1),p=Object(fe.a)(b,2),v=p[0],O=p[1];return{txs:r,txsTotal:l,showLoading:v,getUserTxnList:Object(j.useCallback)(function(){var e=Object(f.a)(m.a.mark((function e(n){var c,r,s,u,l,b,p,f;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(c=n.tokenSymbol,r=n.start,s=n.end,u=n.limit,l=n.offset,b=n.types,!(ue&&ue.userAPI&&t&&a)){e.next=10;break}return O(!0),e.next=5,ue.userAPI.getUserTxs({accountId:t,limit:u,tokenSymbol:c,start:r,end:s,offset:l,types:b},a);case 5:p=e.sent,f=p.userTxs.map((function(e){return Object(o.a)(Object(o.a)({},e),{},{side:e.txType,amount:{unit:e.symbol||"",value:Number(Kn(e.symbol,e.amount))},fee:{unit:e.feeTokenSymbol||"",value:Number(Wn(e.feeTokenSymbol,e.feeAmount||0))},memo:e.memo||"",time:e.timestamp,txnHash:e.hash,status:(t=e.status,""===t?T.qb.processing:"processed"===t?T.qb.processed:"processing"===t?T.qb.processing:"received"===t?T.qb.received:T.qb.failed)});var t})),i(f),d(p.totalNum),O(!1);case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[t,a])}}(),b=l.txs,p=l.txsTotal,v=l.showLoading,h=l.getUserTxnList,k=function(){var e=O.a.useState([]),t=Object(fe.a)(e,2),a=t[0],n=t[1],c=O.a.useState(!0),r=Object(fe.a)(c,2),o=r[0],i=r[1],s=C().account,u=s.accountId,l=s.apiKey,b=Fn.getState().tokenMap.tokenMap,p=O.a.useCallback(Object(f.a)(m.a.mark((function e(){var t;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(ue&&ue.userAPI&&u&&l&&b)){e.next=5;break}return e.next=3,ue.userAPI.getUserTrades({accountId:u},l);case 3:(t=e.sent)&&t.userTrades&&(n(t.userTrades.map((function(e){var t,a,n,c=e.market.split("-"),r=(e.side===se.i.Buy?d.X.Buy:d.X.Sell)===d.X.Buy,o=c[c.length-2],i=c[c.length-1],s=r?i:o,u=r?o:i,l=r?u:s,b=r?null===(t=Wn(u,e.volume))||void 0===t?void 0:t.times(e.price).toNumber():Wn(s,e.volume),p=r?Wn(u,e.volume):null===(a=Wn(s,e.volume))||void 0===a?void 0:a.times(e.price).toNumber(),m=null===(n=Wn(l,e.fee))||void 0===n?void 0:n.toFixed(6);return{side:e.side===se.i.Buy?d.X.Buy:d.X.Sell,price:{key:s,value:Object(se.J)(e.price).toNumber()},fee:{key:l,value:l?m:void 0},time:Number(e.tradeTime),amount:{from:{key:s,value:s?b:void 0},to:{key:u,value:s?p:void 0}}}}))),i(!1));case 5:case"end":return e.stop()}}),e)}))),[u,l,b]);return O.a.useEffect((function(){p()}),[p]),{userTrades:a,showLoading:o}}(),x=k.userTrades,g=k.showLoading,w=function(){var e=O.a.useState([]),t=Object(fe.a)(e,2),a=t[0],n=t[1],c=O.a.useState(!0),r=Object(fe.a)(c,2),o=r[0],i=r[1],s=Fn.getState().account,u=s.accountId,l=s.apiKey,d=Fn.getState().tokenMap.tokenMap,b=O.a.useCallback((function(e){if(d){var t=Object.keys(d),a=Object.values(d).findIndex((function(t){return t.tokenId===e}));return a>-1?t[a]:""}return""}),[d]),p=O.a.useCallback(Object(f.a)(m.a.mark((function e(){var t,a;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(ue.ammpoolAPI&&u&&l)){e.next=5;break}return e.next=3,ue.ammpoolAPI.getUserAmmPoolTxs({accountId:u},l);case 3:(t=e.sent)&&t.userAmmPoolTxs&&(a=t.userAmmPoolTxs.map((function(e){var t,a,n,c,r,o,i,s,u,l,d,p;return{side:e.txType===se.b.JOIN?T.g.Join:T.g.Exit,amount:{from:{key:b(null===(t=e.poolTokens[0])||void 0===t?void 0:t.tokenId),value:String(Kn(b(null===(a=e.poolTokens[0])||void 0===a?void 0:a.tokenId),null===(n=e.poolTokens[0])||void 0===n?void 0:n.actualAmount))},to:{key:b(null===(c=e.poolTokens[1])||void 0===c?void 0:c.tokenId),value:String(Kn(b(null===(r=e.poolTokens[1])||void 0===r?void 0:r.tokenId),null===(o=e.poolTokens[1])||void 0===o?void 0:o.actualAmount))}},lpTokenAmount:String(Kn(b(null===(i=e.lpToken)||void 0===i?void 0:i.tokenId),null===(s=e.lpToken)||void 0===s?void 0:s.actualAmount)),fee:{key:b(null===(u=e.poolTokens[1])||void 0===u?void 0:u.tokenId),value:null===(l=Kn(b(null===(d=e.poolTokens[1])||void 0===d?void 0:d.tokenId),null===(p=e.poolTokens[1])||void 0===p?void 0:p.feeAmount))||void 0===l?void 0:l.toFixed(6)},time:e.updatedAt}})),n(a),i(!1));case 5:case"end":return e.stop()}}),e)}))),[u,l,b]);return O.a.useEffect((function(){p()}),[p]),{ammRecordList:a,showLoading:o}}(),y=w.ammRecordList,A=w.showLoading,S=e.t,I=O.a.useRef(null);return O.a.useEffect((function(){var e,t=null===I||void 0===I||null===(e=I.current)||void 0===e?void 0:e.offsetHeight;t&&c(Math.floor((t-120)/44)-2)}),[I,n]),Object(j.useEffect)((function(){n&&h({limit:n})}),[h,n]),Object(kc.jsxs)(Dc,{ref:I,children:[Object(kc.jsx)(Ac.a,{marginTop:2,marginLeft:2,children:Object(kc.jsxs)(Sc.a,{value:s,onChange:function(e,t){return u(t)},"aria-label":"l2-history-tabs",children:[Object(kc.jsx)(Ic.a,{label:S("labelLayer2HistoryTransactions"),value:"transactions"}),Object(kc.jsx)(Ic.a,{label:S("labelLayer2HistoryTrades"),value:"trades"}),Object(kc.jsx)(Ic.a,{label:S("labelLayer2HistoryAmmRecords"),value:"ammRecords"})]})}),Object(kc.jsx)("div",{className:"tableWrapper",children:"transactions"===s?Object(kc.jsx)(T.rb,Object(o.a)({},Object(o.a)({rawData:b,pagination:{pageSize:n,total:p},showFilter:!0,showLoading:v,getTxnList:h},e))):"trades"===s?Object(kc.jsx)(T.ob,Object(o.a)({},Object(o.a)({rawData:x,showFilter:!0,showLoading:g},e))):Object(kc.jsx)(T.h,Object(o.a)({},Object(o.a)({rawData:y,pagination:{pageSize:n},showFilter:!0,showLoading:A},e)))})]})})),Ar=Object(hc.a)("common")((function(e){var t=O.a.useRef(null),a=O.a.useState(10),n=Object(fe.a)(a,2),c=n[0],r=n[1],i=function(){var e=O.a.useState([]),t=Object(fe.a)(e,2),a=t[0],n=t[1],c=O.a.useState(0),r=Object(fe.a)(c,2),i=r[0],s=r[1],u=O.a.useState(!1),l=Object(fe.a)(u,2),b=l[0],p=l[1],v=C().account,j=v.accountId,h=v.apiKey,k=Fn.getState().tokenMap.marketArray,x=Fn.getState().amm.ammMap.ammMap,g=x?Object.keys(x):[],w=(k||[]).concat(g),y=O.a.useCallback(function(){var e=Object(f.a)(m.a.mark((function e(t){var a;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(ue&&ue.userAPI&&j&&h)){e.next=7;break}return p(!0),e.next=4,ue.userAPI.getOrders(Object(o.a)(Object(o.a)({},t),{},{accountId:j}),h);case 4:(a=e.sent)&&Array.isArray(a.orders)&&(s(a.totalNum),n(a.orders.map((function(e){var t,a,n=e.volumes,c=n.baseAmount,r=n.quoteAmount,o=n.baseFilled,i=n.quoteFilled,s=e.market.split("-"),u=(e.side===se.i.Buy?d.X.Buy:d.X.Sell)===d.X.Buy,l=s[s.length-2],b=s[s.length-1],p=u?b:l,m=u?l:b,f=u?null===(t=Wn(m,r))||void 0===t?void 0:t.times(e.price).toNumber():Wn(p,c),v=u?Wn(m,r):null===(a=Wn(p,c))||void 0===a?void 0:a.times(e.price).toNumber();return{market:e.market,side:"BUY"===e.side?d.X.Buy:d.X.Sell,orderType:e.orderType,amount:{from:{key:p,value:Number(f)},to:{key:m,value:Number(v)}},average:Number(Kn(m,i))/Number(Kn(p,o)),price:{key:m,value:Number(e.price)},time:1e3*e.validity.start,status:e.status,detailTable:[]}})))),p(!1);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[j,h]);return O.a.useEffect((function(){y({})}),[y]),{marketArray:w,getOrderList:y,rawData:a,totalNum:i,showLoading:b}}(),s=i.rawData,u=i.getOrderList,l=i.totalNum,b=i.showLoading,p=i.marketArray;return O.a.useEffect((function(){var e,a=null===t||void 0===t||null===(e=t.current)||void 0===e?void 0:e.offsetHeight;a&&r(Math.floor((a-120)/44)-2)}),[t,c]),Object(kc.jsx)(kc.Fragment,{children:Object(kc.jsx)(Dc,{ref:t,children:Object(kc.jsx)("div",{className:"tableWrapper",children:Object(kc.jsx)(T.Q,Object(o.a)({},Object(o.a)({pagination:{pageSize:c,total:l},rawData:s,showFilter:!0,getOrderList:u,showLoading:b,marketArray:p},e)))})})})})),Sr=function(e){e.ammActivityMap;var t=pn(),a=t.status,n=t.userRewardsMap,c=_e().marketArray,r=$(),o=r.status,i=r.ammMap,s=O.a.useState(void 0),u=Object(fe.a)(s,2),l=u[0],b=u[1],p=O.a.useState([]),m=Object(fe.a)(p,2),f=m[0],v=m[1],j=O.a.useState([]),h=Object(fe.a)(j,2),k=h[0],x=h[1],g=O.a.useCallback((function(){var e,t=mc().walletMap;t&&(null===(e=vc())||void 0===e||e.then((function(e){var t=jc(void 0,e);x(t||[])})));return t}),[mc,vc,jc,c]),w=O.a.useCallback((function(e){return e&&i?Reflect.ownKeys(e).reduce((function(t,a){if(/LP-/i.test(a)){var c,r=a.replace("LP-","AMM-"),o=a.replace("LP-","");void 0!==(c=dc({ammDetail:i[r],walletMap:e,market:o,ammUserRewardMap:n}))&&t.push(c)}return t}),[]):[]}),[i,n]),y=O.a.useCallback((function(){if(i){var e=g(),t=w(e);v(t)}}),[i]);return tr({walletLayer2Callback:y}),O.a.useEffect((function(){o===d.M.UNSET&&y()}),[o]),O.a.useEffect((function(){if(a===d.M.UNSET){var e=function(e){var t=e.userRewardsMap,a=Fn.getState().tokenMap,n=a.coinMap,c=a.idIndex,r=a.tokenMap,o=Fn.getState().system,i=o.faitPrices,s=o.forex;if(t&&c&&n&&r&&i&&s)return Object.keys(t).reduce((function(e,a){if(/AMM-/i.test(a)){var n=a.match(/AMM-(\w+)-(\w+)/i),r=Object(fe.a)(n,3),o=r[1],u=r[2],l=t[a],d=uc({coinB:u,coinA:o,ammUserReward:l,idIndex:c,faitPrices:i,forex:s}),b=d.rewardDollar,p=d.rewardYuan,m=d.feeDollar,f=d.feeYuan;e.rewardDollar=b?Object(se.J)(b).plus(e.rewardDollar).toNumber():0,e.rewardYuan=p?Object(se.J)(p).plus(e.rewardYuan).toNumber():0,e.feeDollar=m?Object(se.J)(m).plus(e.feeDollar).toNumber():0,e.feeYuan=f?Object(se.J)(f).plus(e.feeYuan).toNumber():0}return e}),{rewardDollar:0,rewardYuan:0,feeDollar:0,feeYuan:0})}({userRewardsMap:n});b(e),y()}}),[a]),{myAmmMarketArray:k,summaryReward:l,myPoolRow:f}},Ir=["t","ammActivityMap"],Mr=Object(Pc.a)(Ac.a)(kr||(kr=Object(i.a)(["\n    height: 100%;\n    flex: 1;\n    background: var(--color-box);\n    border-radius: ","px;\n"])),(function(e){return e.theme.unit})),Nr=Object(Pc.a)(yc.a)(xr||(xr=Object(i.a)(["\n    position: relative;\n    width: 100%;\n    background: var(--color-box);\n    border-radius: ","px;\n"])),(function(e){return e.theme.unit})),Cr=(Object(Pc.a)(Ac.a)(gr||(gr=Object(i.a)(["\n  position: absolute;\n  z-index: 99;\n  top: ","px;\n  width: 100%;\n"])),(function(e){return e.theme.unit})),Object(hc.a)("common")((function(e){var t,a,n,c,r=e.t,o=e.ammActivityMap,i=(Object(l.a)(e,Ir),O.a.useState("ALL")),s=Object(fe.a)(i,2),b=(s[0],s[1],O.a.useState(1)),p=Object(fe.a)(b,2),m=(p[0],p[1]),f=Object(T.Rb)().currency,v=Object(u.f)(),j=O.a.useCallback((function(e,t){v&&v.push("/liquidity/pools/coinPair/".concat(e,"?type=").concat(t))}),[v]),h=(O.a.useCallback((function(e){m(e)}),[]),Sr({ammActivityMap:o})),k=(h.myAmmMarketArray,h.summaryReward),x=h.myPoolRow;return Object(kc.jsxs)(kc.Fragment,{children:[Object(kc.jsxs)(yc.a,{container:!0,spacing:2,children:[Object(kc.jsx)(yc.a,{item:!0,sm:3,children:Object(kc.jsxs)(Nr,{container:!0,paddingY:3,paddingX:4,margin:0,display:"flex",flexDirection:"column",children:[Object(kc.jsxs)(yc.a,{display:"flex",flexDirection:"column",item:!0,children:[Object(kc.jsx)(sr.a,{variant:"h5",color:"textSecondary",fontFamily:"Roboto",children:r("labelTotalPositionValue")}),Object(kc.jsx)(sr.a,{variant:"h3",marginTop:1,fontFamily:"Roboto",children:void 0===k?d.t:f===d.n.dollar?d.I.Dollar+Object(d.jb)((null!==(t=k.rewardDollar)&&void 0!==t?t:0)+(null!==(a=k.feeDollar)&&void 0!==a?a:0)):d.I.Yuan+Object(d.jb)(null!==(n=null!==(c=k.rewardYuan)&&void 0!==c?c:0+Number(k.feeYuan))&&void 0!==n?n:0)})]}),Object(kc.jsxs)(yc.a,{display:"flex",flexDirection:"column",marginTop:5,item:!0,children:[Object(kc.jsx)(sr.a,{variant:"h5",component:"h3",fontFamily:"Roboto",color:"textSecondary",children:r("labelFeeRewards")}),Object(kc.jsx)(sr.a,{variant:"h3",marginTop:1,fontFamily:"Roboto",children:void 0===k?d.t:f===d.n.dollar?d.I.Dollar+Object(d.jb)(k.feeDollar?k.feeDollar:0):d.I.Yuan+Object(d.jb)(k.feeYuan?k.feeYuan:0)})]}),Object(kc.jsxs)(yc.a,{display:"flex",flexDirection:"column",marginTop:5,item:!0,children:[Object(kc.jsx)(sr.a,{variant:"h5",component:"h3",fontFamily:"Roboto",color:"textSecondary",children:r("labelMiningRewards")}),Object(kc.jsx)(sr.a,{variant:"h3",marginTop:1,fontFamily:"Roboto",children:void 0===k?d.t:f===d.n.dollar?d.I.Dollar+Object(d.jb)(k.rewardDollar?k.rewardDollar:0):d.I.Yuan+Object(d.jb)(k.rewardYuan?k.rewardYuan:0)})]})]})}),Object(kc.jsx)(yc.a,{item:!0,xs:9,children:Object(kc.jsx)(Mr,{})})]}),Object(kc.jsx)(_c,{marginY:2,paddingY:2,paddingX:3,flex:1,children:Object(kc.jsxs)(yc.a,{item:!0,xs:12,display:"flex",flexDirection:"column",children:[Object(kc.jsx)(sr.a,{variant:"h5",marginBottom:3,children:r("labelMyAmm")}),Object(kc.jsx)(T.O,{rawData:x,handleDeposit:function(e){var t="".concat(e.ammDetail.coinAInfo.name,"-").concat(e.ammDetail.coinBInfo.name);j(t,"add")},handleWithdraw:function(e){var t="".concat(e.ammDetail.coinAInfo.name,"-").concat(e.ammDetail.coinBInfo.name);j(t,"remove")},handlePageChange:function(){}})]})})]})}))),Tr=["t"],Er=d.sb,Pr=(Object(Pc.a)(Ac.a)(wr||(wr=Object(i.a)(["\n  ","\n\n"])),(function(e){var t=e.theme;return"\n    background: var(--color-box);\n    width: 100%;\n    min-width:auto;\n    ".concat(t.border.defaultFrame({c_key:"blur"}),";\n    & > div{\n      background-color:initial;\n      border:0;\n      width:auto;\n      min-width: var(--swap-box-width);\n      max-width: 520px;\n    }\n    ")})),Object(hc.a)(["common"],{withRef:!0})((function(e){var t,a=e.t,n=C(),c=n.status,r=n.account,o=O.a.useState(void 0),i=Object(fe.a)(o,2),s=i[0],u=i[1],l=Object.assign(ec(Qn),(t={},Object(v.a)(t,d.eb.NO_ACCOUNT,[function(){return"depositTitleAndActive"}]),Object(v.a)(t,d.eb.ERROR_NETWORK,[function(){return"depositTitleAndActive"}]),t));O.a.useEffect((function(){c===d.M.UNSET&&u(Xn(l))}),[c,r.readyState,d.pb.language]);var b=Object.assign(ec(Zn),{});return Object(kc.jsx)(T.o,{variant:"contained",size:"large",color:"primary",fullWidth:!0,style:{maxWidth:"280px"},onClick:function(){Xn(b,[])},children:a(s)})}))),Dr=Object(hc.a)(["layout","common"],{withRef:!0})(T.ab),_r=function(){var e,t=Object(u.h)("/layer2/:item"),a=C().account,n=Object(er.a)(),c=n.t,r=(Object(l.a)(n,Tr),null!==(e=null===t||void 0===t?void 0:t.params.item)&&void 0!==e?e:"assets"),o=O.a.useMemo((function(){switch(a.readyState){case d.a.UN_CONNECT:return Object(kc.jsxs)(Ac.a,{flex:1,display:"flex",justifyContent:"center",flexDirection:"column",alignItems:"center",children:[Object(kc.jsx)(sr.a,{marginY:3,variant:"h1",children:c("describeTitleConnectToWallet")}),Object(kc.jsx)(Pr,{})]});case d.a.LOCKED:return Object(kc.jsxs)(Ac.a,{flex:1,display:"flex",justifyContent:"center",flexDirection:"column",alignItems:"center",children:[Object(kc.jsx)(sr.a,{marginY:3,variant:"h1",children:c("describeTitleLocked")}),Object(kc.jsx)(Pr,{})]});case d.a.NO_ACCOUNT:return Object(kc.jsxs)(Ac.a,{flex:1,display:"flex",justifyContent:"center",flexDirection:"column",alignItems:"center",children:[Object(kc.jsx)(sr.a,{marginY:3,variant:"h1",children:c("describeTitleNoAccount")}),Object(kc.jsx)(Pr,{})]});case d.a.NO_ACCOUNT:return Object(kc.jsxs)(Ac.a,{flex:1,display:"flex",justifyContent:"center",flexDirection:"column",alignItems:"center",children:[Object(kc.jsx)(sr.a,{marginY:3,variant:"h1",children:c("describeTitleNotActive")}),Object(kc.jsx)(Pr,{})]});case d.a.DEPOSITING:return Object(kc.jsxs)(Ac.a,{flex:1,display:"flex",justifyContent:"center",flexDirection:"column",alignItems:"center",children:[Object(kc.jsx)(d.D,{color:"primary",style:{width:60,height:60}}),Object(kc.jsx)(sr.a,{marginY:3,variant:"h1",children:c("describeTitleOpenAccounting")})]});case d.a.ERROR_NETWORK:return Object(kc.jsx)(Ac.a,{flex:1,display:"flex",justifyContent:"center",flexDirection:"column",alignItems:"center",children:Object(kc.jsx)(sr.a,{marginY:3,variant:"h1",children:c("describeTitleOnErrorNetwork",{connectName:a.connectName})})});case d.a.ACTIVATED:return Object(kc.jsxs)(kc.Fragment,{children:[Object(kc.jsx)(Ac.a,{width:"200px",display:"flex",justifyContent:"stretch",marginRight:3,marginBottom:2,className:"MuiPaper-elevation2",children:Object(kc.jsx)(T.Z,{children:Object(kc.jsx)(Dr,{selected:r,subMenu:Er})})}),Object(kc.jsxs)(Ac.a,{minHeight:420,display:"flex",alignItems:"stretch",flexDirection:"column",marginTop:0,flex:1,children:["assets"===r&&Object(kc.jsx)(vr,{}),"my-liquidity"===r&&Object(kc.jsx)(Cr,{}),"history"===r&&Object(kc.jsx)(yr,{}),"transactions"===r&&Object(kc.jsx)(ur,{}),"trades"===r&&Object(kc.jsx)(jr,{}),"ammRecords"===r&&Object(kc.jsx)(hr,{}),"order"===r&&Object(kc.jsx)(Ar,{})]})]})}}),[c,a.readyState,r]);return Object(kc.jsx)(kc.Fragment,{children:o})},Rr=a(1719),Lr=a(1606);var Br,Ur,Fr,Kr,Wr,Vr,Hr=["t","ammActivityMap"],Jr=Object(Pc.a)(Ac.a)(Br||(Br=Object(i.a)(["\n    flex: 1;\n    display: flex;\n    flex-direction: column;\n"]))),Gr=Object(Pc.a)(Ac.a)(Ur||(Ur=Object(i.a)(["\n    width: 100%;\n    height: 100%;\n    flex: 1;\n    background: var(--color-box);\n    border-radius: ","px;\n\n    .rdg {\n        flex: 1;\n    }\n\n"])),(function(e){return e.theme.unit})),qr=Object(hc.a)("common")((function(e){var t=e.t,a=(e.ammActivityMap,Object(l.a)(e,Hr),O.a.useRef(null)),n=O.a.useState(10),c=Object(fe.a)(n,2),r=c[0],i=c[1],s=O.a.useState(""),u=Object(fe.a)(s,2),b=u[0],p=u[1],m=function(e){var t=e.pageSize,a=O.a.useState([]),n=Object(fe.a)(a,2),c=n[0],r=n[1],i=O.a.useState(1),s=Object(fe.a)(i,2),u=s[0],l=s[1],b=_e().coinMap,p=O.a.useRef(-1),m=$(),f=m.ammMap,v=m.status,j=Qa(),h=j.tickerMap,k=j.status,x=j.updateTickers,g=bn(),w=(g.status,g.statusUnset,O.a.useCallback((function(e){try{var t=ec(f);for(var a in e)t["AMM-"+a]&&(t["AMM-"+a].tradeFloat=Object(o.a)(Object(o.a)({},t["AMM-"+a].tradeFloat),e[a]));r(Object.keys(t).map((function(e){return b&&(t[e].coinAInfo=b[t[e].coinA],t[e].coinBInfo=b[t[e].coinB]),t[e]})))}catch(n){throw new d.o(Object(o.a)(Object(o.a)({},d.u.NO_TOKEN_MAP),{},{options:n}))}}),[f])),y=O.a.useCallback((function(e){x(e),-1!==p.current&&clearTimeout(p.current),p.current=setTimeout((function(){y(e)}),1e3)}),[x]);O.a.useEffect((function(){return function(){clearTimeout(p.current)}}),[p.current]);var A=O.a.useCallback((function(e){if(l(e),f&&Object.keys(f).length>0){for(var a=[],n=(u-1)*t;n<Object.keys(f).length&&n<(u-1)*t+t;n++)a.push(Object.keys(f)[n]);y(a)}}),[f,t]);return O.a.useEffect((function(){f&&0!==Object.keys(f).length&&A(u)}),[]),O.a.useEffect((function(){k===d.M.UNSET&&w(h)}),[k]),O.a.useEffect((function(){v===d.M.UNSET&&A(1)}),[v,A]),{page:u,rawData:c,updateTickersUI:A}}({pageSize:r}),f=m.updateTickersUI,v=m.rawData,h=m.page;O.a.useEffect((function(){var e,t=null===a||void 0===a||null===(e=a.current)||void 0===e?void 0:e.offsetHeight;t&&i(Math.floor((t-120)/44)-1)}),[a,r]);var k=O.a.useCallback((function(){return b?v.filter((function(e){var t=e.coinAInfo.name.toLowerCase(),a=e.coinBInfo.name.toLowerCase(),n=b.toLowerCase();return t.includes(n)||a.includes(n)})):v}),[b,v]),x=O.a.useCallback((function(e){f(e)}),[f]);return Object(kc.jsx)(kc.Fragment,{children:Object(kc.jsxs)(Jr,{children:[Object(kc.jsx)(Ac.a,{marginBottom:3,children:Object(j.createElement)(Rr.a,{placeholder:t("labelFilter"),value:b,onChange:function(e){var t;p(null===(t=e.currentTarget)||void 0===t?void 0:t.value)},key:"search",className:"search","aria-label":"search",startAdornment:Object(kc.jsx)(Lr.a,{position:"start",children:Object(kc.jsx)(d.N,{})})})}),Object(kc.jsx)(Gr,{display:"flex",flexDirection:"column",ref:a,children:Object(kc.jsx)(T.R,{rawData:k(),handlePageChange:x,page:h,pagination:{pageSize:r},showFilter:!1,showLoading:!v.length})})]})})})),Yr=a(1711),zr=a(1726),Xr=a(1717),Qr=["pair","walletMap","ammType","snapShotData"],Zr=function(e){var t=e.pair,a=(e.walletMap,e.ammType),n=e.snapShotData,c=Object(l.a)(e,Qr),r=function(e){var t,a=e.pair,n=e.ammType,c=e.snapShotData,r=Object(er.a)("common").t,i=bn(),s=i.sendSocketTopic,u=i.socketEnd,l=Object(j.useState)(!1),b=Object(fe.a)(l,2),p=b[0],h=b[1],k=Object(j.useState)(),x=Object(fe.a)(k,2),g=x[0],w=x[1],y=_e(),A=y.coinMap,S=y.tokenMap,I=$().ammMap,M=C(),N=M.account,T=M.status,E=O.a.useState(),P=Object(fe.a)(E,2),D=P[0],_=P[1],R=(O.a.useRef(-1),O.a.useState({coinA:{belong:void 0},coinB:{belong:void 0},slippage:.5})),L=Object(fe.a)(R,2),B=L[0],U=L[1],F=O.a.useState({coinA:{belong:void 0},coinB:{belong:void 0},slippage:.5}),K=Object(fe.a)(F,2),W=K[0],V=K[1],H=O.a.useState(void 0),J=Object(fe.a)(H,2),G=J[0],q=J[1],Y=O.a.useState(void 0),z=Object(fe.a)(Y,2),X=z[0],Q=z[1];O.a.useEffect((function(){return N.readyState===d.a.ACTIVATED?s(Object(v.a)({},se.o.account,!0)):u(),function(){u()}}),[N.readyState]);var Z=O.a.useCallback(function(){var e=Object(f.a)(m.a.mark((function e(t,a){var r;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:cn("initAmmData:",N.accAddress,a,t),r=Vn({pair:t,ammType:n,_ammCalcData:{},tokenMap:S,coinMap:A,walletMap:a,ammMap:I,tickerData:null===c||void 0===c?void 0:c.tickerData,ammPoolsBalance:null===c||void 0===c?void 0:c.ammPoolsBalance}),_(Object(o.a)(Object(o.a)({},D),r)),r.myCoinA&&(U({coinA:Object(o.a)(Object(o.a)({},r.myCoinA),{},{tradeValue:void 0}),coinB:Object(o.a)(Object(o.a)({},r.myCoinB),{},{tradeValue:void 0}),slippage:.5}),V({coinA:Object(o.a)(Object(o.a)({},r.lpCoinA),{},{tradeValue:void 0}),coinB:Object(o.a)(Object(o.a)({},r.lpCoinB),{},{tradeValue:void 0}),slippage:.5}));case 4:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),[c,A,S,D,I,n,_,U,V]),ee=Object(j.useState)(),te=Object(fe.a)(ee,2),ae=te[0],ne=te[1],ce=O.a.useCallback(Object(f.a)(m.a.mark((function e(){var t,n,c,o,i,s,u,l,d,b,p,f,v;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((null===(t=a.coinAInfo)||void 0===t?void 0:t.simpleName)&&(null===(n=a.coinBInfo)||void 0===n?void 0:n.simpleName)&&ue.ammpoolAPI){e.next=3;break}return w(r("labelAmmJoinFailed")),e.abrupt("return");case 3:if(c=Fn.getState().tokenMap,o=c.marketArray,i=c.marketMap,s=Fn.getState().amm.ammMap.ammMap,u=Object(se.z)(o,a.coinAInfo.simpleName,a.coinBInfo.simpleName),l=u.market,d=u.amm,l&&d&&i){e.next=8;break}return e.abrupt("return");case 8:return b=s[d],p={poolAddress:b.address},e.next=12,ue.ammpoolAPI.getAmmPoolSnapshot(p);case 12:if(f=e.sent){e.next=16;break}return cn("err res:",f),e.abrupt("return");case 16:v=f.ammPoolSnapshot,ne(v),cn("updateAmmPoolSnapshot",a);case 19:case"end":return e.stop()}}),e)}))),[a,I,ne]),re=Object(j.useState)(),oe=Object(fe.a)(re,2),ie=oe[0],le=oe[1],de=Object(j.useState)(),be=Object(fe.a)(de,2),pe=be[0],me=be[1],ve=C().account,je=ve.accountId,Oe=ve.apiKey,he=O.a.useCallback(Object(f.a)(m.a.mark((function e(){var t,n,c,r,i,s,u,l,b,p,f,v;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(T!==d.M.UNSET){e.next=23;break}if(c=Xn(Qn),q(c),Q(c),ue.userAPI&&(null===(t=a.coinBInfo)||void 0===t?void 0:t.simpleName)&&N.readyState===d.a.ACTIVATED&&D&&S){e.next=6;break}return e.abrupt("return");case 6:return r=S[a.coinBInfo.simpleName],i={accountId:je,requestType:se.g.AMM_JOIN,tokenSymbol:a.coinBInfo.simpleName},e.next=10,ue.userAPI.getOffchainFeeAmt(i,Oe);case 10:return s=e.sent,u=s.fees,le(u),l=se.J(null===(n=u[a.coinBInfo.simpleName])||void 0===n?void 0:n.fee).div("1e"+r.decimals).toString()+" "+a.coinBInfo.simpleName,b={accountId:N.accountId,requestType:se.g.AMM_EXIT,tokenSymbol:a.coinBInfo.simpleName},e.next=17,ue.userAPI.getOffchainFeeAmt(b,Oe);case 17:p=e.sent,f=p.fees,me(f),v=se.J(f[a.coinBInfo.simpleName].fee).div("1e"+r.decimals).toString()+" "+a.coinBInfo.simpleName,cn("-> feeJoin:",l," feeExit:",v),_(Object(o.a)(Object(o.a)({},D),{},{feeJoin:l,feeExit:v}));case 23:case"end":return e.stop()}}),e)}))),[le,me,_,q,Q,T,N.readyState,je,Oe,null===(t=a.coinBInfo)||void 0===t?void 0:t.simpleName,S,D]);O.a.useEffect((function(){he()}),[T,a,B]);var ke=Object(j.useState)(),xe=Object(fe.a)(ke,2),ge=xe[0],we=xe[1],ye=O.a.useCallback(on.debounce(function(){var e=Object(f.a)(m.a.mark((function e(t,a,n,c,r,o){var i,s,u,l,d,b,p,f,v,j,O,h,k,x,g,w,y,A,S,I,M,N,C,T;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t&&r&&t.coinA.belong&&t.coinB.belong&&c&&n&&(null===o||void 0===o?void 0:o.accAddress)){e.next=2;break}return e.abrupt("return");case 2:if(cn("handlerJoinInDebounce",t,a),i=t.slippage,s=se.J(i).div(100).toString(),u="coinA"===a,l=Fn.getState().tokenMap,d=l.idIndex,b=l.marketArray,p=l.marketMap,f=Fn.getState().amm.ammMap.ammMap,v=Object(se.z)(b,t.coinA.belong,t.coinB.belong),j=v.market,O=v.amm,j&&O&&p){e.next=11;break}return e.abrupt("return");case 11:h=p[j],k=f[O],x=r[t.coinA.belong],g=r[t.coinB.belong],w=c.pooled[0],y=c.pooled[1],A=t.coinA.tradeValue?se.J(t.coinA.tradeValue).times(x.decimals).toFixed(0,0):"0",(S=se.p(A,u,w,y)).output,S.ratio,I=t.coinA.tradeValue?t.coinA.tradeValue.toString():0,M=t.coinB.tradeValue?t.coinB.tradeValue.toString():0,N=u?I:M,C=Object(se.H)(N,u,s,o.accAddress,n,f[O],c,r,d,0,0),T=C.request,u?t.coinB.tradeValue=parseFloat(Object(se.J)(T.joinTokens.pooled[1].volume).div("1e"+g.decimals).toFixed(h.precisionForPrice)):t.coinA.tradeValue=parseFloat(Object(se.J)(T.joinTokens.pooled[0].volume).div("1e"+x.decimals).toFixed(h.precisionForPrice)),U({coinA:t.coinA,coinB:t.coinB,slippage:i}),we({ammInfo:k,request:T});case 26:case"end":return e.stop()}}),e)})));return function(t,a,n,c,r,o){return e.apply(this,arguments)}}(),d.lb.wait),[]),Ae=O.a.useCallback(function(){var e=Object(f.a)(m.a.mark((function e(t){var a,n,c,i,s,u,l,d,b,p;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Le(!0),ue.ammpoolAPI&&ue.userAPI&&ge&&(null===N||void 0===N||null===(a=N.eddsaKey)||void 0===a?void 0:a.sk)){e.next=7;break}return cn(" onAmmJoin ammpoolAPI:",ue.ammpoolAPI,"joinRequest:",ge),w(r("labelJoinAmmFailed")),h(!0),Le(!1),e.abrupt("return");case 7:return n=ge.ammInfo,c=ge.request,i={chainId:Fn.getState().system.chainId,ammName:n.__rawConfig__.name,poolAddress:n.address,eddsaKey:N.eddsaKey.sk},e.prev=9,u={accountId:N.accountId,sellTokenId:c.joinTokens.pooled[0].tokenId},e.next=13,ue.userAPI.getNextStorageId(u,N.apiKey);case 13:return l=e.sent,d={accountId:N.accountId,sellTokenId:c.joinTokens.pooled[1].tokenId},e.next=17,ue.userAPI.getNextStorageId(d,N.apiKey);case 17:return b=e.sent,c.storageIds=[l.offchainId,b.offchainId],U(Object(o.a)(Object(o.a)({},B),{coinA:Object(o.a)(Object(o.a)({},B.coinA),{},{tradeValue:0}),coinB:Object(o.a)(Object(o.a)({},B.coinB),{},{tradeValue:0})})),e.next=22,ue.ammpoolAPI.joinAmmPool(c,i,N.apiKey);case 22:p=e.sent,cn("join ammpool response:",p),(null===(s=p.joinAmmPoolResult)||void 0===s?void 0:s.resultInfo)?(w(r("labelJoinAmmFailed")),Le(!1)):(w(r("labelJoinAmmSuccess")),Et()),e.next=32;break;case 27:e.prev=27,e.t0=e.catch(9),Object(se.s)(e.t0),Le(!1),w(r("labelJoinAmmFailed"));case 32:return e.prev=32,h(!0),e.finish(32);case 35:t.__cache__&&$n(t.__cache__);case 36:case"end":return e.stop()}}),e,null,[[9,27,32,35]])})));return function(t){return e.apply(this,arguments)}}(),[ge,B,N,r]),Se=Object.assign(ec(Zn),Object(v.a)({},d.eb.ACTIVATED,[Ae])),Ie=O.a.useCallback((function(e){Xn(Se,[e])}),[Se]),Me=Object(j.useState)(),Ne=Object(fe.a)(Me,2),Ce=Ne[0],Te=Ne[1],Ee=O.a.useCallback(on.debounce(function(){var e=Object(f.a)(m.a.mark((function e(t,a,n,c,r,o){var i,s,u,l,d,b,p,f,v,j,O,h,k,x,g,w,y,A,S,I,M,N,C;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i="coinA"===a,r&&t.coinA.belong&&t.coinB.belong&&c&&n&&(null===o||void 0===o?void 0:o.accAddress)&&(!i||void 0!==t.coinA.tradeValue)&&(i||void 0!==t.coinB.tradeValue)){e.next=3;break}return e.abrupt("return");case 3:if(cn("handleExitInDebounce",t,a),s=t.slippage,u=se.J(s).div(100).toString(),l=Fn.getState().tokenMap,d=l.idIndex,b=l.marketArray,p=l.marketMap,f=Fn.getState().amm.ammMap.ammMap,v=Object(se.z)(b,t.coinA.belong,t.coinB.belong),j=v.market,O=v.amm,j&&O&&p){e.next=11;break}return e.abrupt("return");case 11:h=p[j],k=f[O],x=r[t.coinA.belong],g=r[t.coinB.belong],w=c.pooled[0],y=c.pooled[1],A=i?t.coinA.tradeValue:t.coinB.tradeValue,S=i?x.decimals:g.decimals,I=se.J(A).times("1e"+S).toFixed(0,0),(M=se.p(I,i,w,y)).output,M.ratio,N=Object(se.G)(A.toString(),i,u,o.accAddress,n,f[O],c,r,d,0),C=N.request,i?t.coinB.tradeValue=parseFloat(Object(se.J)(C.exitTokens.unPooled[1].volume).div("1e"+g.decimals).toFixed(h.precisionForPrice)):t.coinA.tradeValue=parseFloat(Object(se.J)(C.exitTokens.unPooled[0].volume).div("1e"+x.decimals).toFixed(h.precisionForPrice)),V({coinA:t.coinA,coinB:t.coinB,slippage:s}),Te({rawVal:A,ammInfo:k,request:C});case 25:case"end":return e.stop()}}),e)})));return function(t,a,n,c,r,o){return e.apply(this,arguments)}}(),d.lb.wait),[]),Pe=Object(j.useState)(!1),De=Object(fe.a)(Pe,2),Re=De[0],Le=De[1],Be=Object(j.useState)(!1),Ue=Object(fe.a)(Be,2),Fe=Ue[0],Ke=Ue[1],We=O.a.useCallback(function(){var e=Object(f.a)(m.a.mark((function e(t){var a,n,c,i,s,u,l,d;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Ke(!0),cn("removeAmmCalculator props:",t),ue.ammpoolAPI&&ue.userAPI&&Ce&&(null===N||void 0===N||null===(a=N.eddsaKey)||void 0===a?void 0:a.sk)){e.next=8;break}return cn(" onExit ammpoolAPI:",ue.ammpoolAPI,"exitRequest:",Ce),w(r("labelExitAmmFailed")),h(!0),Ke(!1),e.abrupt("return");case 8:return n=Ce.ammInfo,c=Ce.request,i={chainId:Fn.getState().system.chainId,ammName:n.__rawConfig__.name,poolAddress:n.address,eddsaKey:N.eddsaKey.sk},s={accountId:N.accountId,sellTokenId:c.exitTokens.burned.tokenId},e.next=13,ue.userAPI.getNextStorageId(s,N.apiKey);case 13:return u=e.sent,c.storageId=u.offchainId,e.prev=15,cn("exit req:",c),V(Object(o.a)(Object(o.a)({},W),{coinA:Object(o.a)(Object(o.a)({},W.coinA),{},{tradeValue:0}),coinB:Object(o.a)(Object(o.a)({},W.coinB),{},{tradeValue:0})})),e.next=20,ue.ammpoolAPI.exitAmmPool(c,i,N.apiKey);case 20:d=e.sent,cn("exit ammpool response:",d),(null===(l=d.exitAmmPoolResult)||void 0===l?void 0:l.resultInfo)?w(r("labelExitAmmFailed")):(w(r("labelExitAmmSuccess")),Et()),e.next=30;break;case 25:e.prev=25,e.t0=e.catch(15),Object(se.s)(e.t0),Ke(!1),w(r("labelExitAmmFailed"));case 30:return e.prev=30,h(!0),e.finish(30);case 33:case"end":return e.stop()}}),e,null,[[15,25,30,33]])})));return function(t){return e.apply(this,arguments)}}(),[Ce,W,N,r]),Ve=Object.assign(ec(Zn),Object(v.a)({},d.eb.ACTIVATED,[We])),He=O.a.useCallback((function(e){cn("onAmmRemoveClick, exitRequest:",Ce," ammExitData:",W),Xn(Ve,[e])}),[Ce,W,Ve]),Je=O.a.useCallback((function(){if(a&&c){var e=mc().walletMap;Z(a,e),cn("init snapshot:",c.ammPoolsBalance),ne(c.ammPoolsBalance),Ke(!1),Le(!1)}}),[a,c]);return tr({walletLayer2Callback:Je}),O.a.useEffect((function(){Je()}),[a,c]),{onRefreshData:ce,ammAlertText:g,ammToastOpen:p,setAmmToastOpen:h,ammCalcData:D,ammJoinData:B,ammExitData:W,isJoinLoading:Re,isExitLoading:Fe,handleJoinAmmPoolEvent:function(e,t){ye(e,t,ie,ae,S,N)},handleExitAmmPoolEvent:function(e,t){Ee(e,t,pe,ae,S,N)},onAmmRemoveClick:He,onAmmAddClick:Ie,ammDepositBtnI18nKey:G,ammWithdrawBtnI18nKey:X}}({pair:t,snapShotData:n,ammType:a||T.e.Deposit}),i=r.ammAlertText,s=r.ammToastOpen,u=r.setAmmToastOpen,b=r.ammCalcData,p=r.ammJoinData,h=r.ammExitData,k=r.handleJoinAmmPoolEvent,x=r.handleExitAmmPoolEvent,g=r.onAmmRemoveClick,w=r.onAmmAddClick,y=r.isJoinLoading,A=r.isExitLoading,S=r.ammDepositBtnI18nKey,I=r.ammWithdrawBtnI18nKey,M=r.onRefreshData,N=O.a.useCallback((function(){return!(n&&n.tickerData&&n.ammPoolsBalance||void 0!==S||void 0!==I)||(!(!y&&!A)||void 0)}),[n,I,I,y,A]);return Object(kc.jsxs)(kc.Fragment,{children:[Object(kc.jsx)(T.jb,{alertText:i,open:s,autoHideDuration:ln,onClose:function(){u(!1)}}),t?Object(kc.jsx)(T.d,Object(o.a)(Object(o.a)({},Object(o.a)({},c)),{},{onRefreshData:M,ammDepositData:p,ammWithdrawData:h,ammCalcData:b,handleAmmAddChangeEvent:k,handleAmmRemoveChangeEvent:x,onAmmRemoveClick:g,onAmmAddClick:w,tabSelected:a||T.e.Deposit,ammDepositBtnI18nKey:S,ammWithdrawBtnI18nKey:I,ammDepositBtnStatus:N()?T.nb.LOADING:T.nb.AVAILABLE,ammWithdrawBtnStatus:N()?T.nb.LOADING:T.nb.AVAILABLE})):Object(kc.jsx)(Ac.a,{width:"var(--swap-box-width)"})]})},$r=function(e){var t=e.ammMap,a=e.coinMap,n=e.ammActivityMap,c=e.ammKey;if(t&&a){var r=ec(t[c]),o=n[c];return r&&r.coinA&&(r.myCoinA=a[r.coinA],r.myCoinB=a[r.coinB],r.activity=o||{}),r}},eo=["t","ammActivityMap"],to=Object(Pc.a)(Ac.a)(Fr||(Fr=Object(i.a)(["\n  flex: 1;\n  background: var(--color-box);\n  border-radius: ","px;\n  padding: ","px;\n  height: 120px;\n  // min-width: 160px;\n  max-width: 210px;\n  // & .MuiAvatar-root {\n    //     height: ",";\n    //     width: ",";\n  // }\n"])),(function(e){return e.theme.unit}),(function(e){return 2*e.theme.unit}),(function(e){return e.theme.fontDefault.h4}),(function(e){return e.theme.fontDefault.h4})),ao=Object(Pc.a)(Ac.a)(Kr||(Kr=Object(i.a)(["\n  background: var(--color-box);\n  border-radius: ","px;\n  padding: ","px;\n  width: var(--swap-box-width);\n  box-sizing: border-box;\n  //height: 120px;\n  //min-width: 160px;\n  // & .MuiAvatar-root {\n    //   height: ",";\n    //   width: ",";\n  // }\n"])),(function(e){return e.theme.unit}),(function(e){return 2*e.theme.unit}),(function(e){return e.theme.fontDefault.h4}),(function(e){return e.theme.fontDefault.h4})),no=Object(hc.a)("common")((function(e){var t,a,n,c,r,i,s,b,p,v,j,h,k,x,g,w,y,A,S=e.t,I=e.ammActivityMap,M=Object(l.a)(e,eo),N=Object(T.Rb)().currency,C=function(e){var t=Object(u.h)("/liquidity/pools/coinPair/:symbol"),a=_e(),n=a.coinMap,c=a.tokenMap,r=a.marketArray,i=(Za().faitPrices,$()),s=i.ammMap,l=i.getAmmMap,b=i.status,p=pn(),v=p.userRewardsMap,j=p.status,h=dn().walletLayer2,k=O.a.useState(void 0),x=Object(fe.a)(k,2),g=x[0],w=x[1],y=O.a.useState([]),A=Object(fe.a)(y,2),S=A[0],I=(A[1],O.a.useState([])),M=Object(fe.a)(I,2),N=M[0],C=M[1],T=O.a.useState(void 0),E=Object(fe.a)(T,2),P=E[0],D=E[1],_=O.a.useState(void 0),R=Object(fe.a)(_,2),L=R[0],B=R[1],U=O.a.useState({feeA:0,feeB:0,feeDollar:0,feeYuan:0,reward:0,rewardToken:void 0,balanceA:0,balanceB:0,balanceYuan:0,balanceDollar:0}),F=Object(fe.a)(U,2),K=F[0],W=F[1],V=O.a.useState({myCoinA:void 0,myCoinB:void 0,activity:void 0,totalRewards:void 0,amountDollar:void 0,amountYuan:void 0,totalLPToken:void 0,totalA:void 0,totalB:void 0,rewardToken:void 0,rewardValue:void 0,feeA:void 0,feeB:void 0,isNew:void 0,isActivity:void 0,APY:void 0}),H=Object(fe.a)(V,2),J=H[0],G=H[1],q=O.a.useState(void 0),Y=Object(fe.a)(q,2),z=Y[0],X=Y[1],Q=O.a.useState({coinAInfo:void 0,coinBInfo:void 0}),Z=Object(fe.a)(Q,2),ee=Z[0],te=Z[1],ae=O.a.useState([]),ne=Object(fe.a)(ae,2),ce=ne[0],re=ne[1],oe=O.a.useCallback((function(e){var t,a=mc().walletMap;return w(a),a&&(null===(t=vc())||void 0===t||t.then((function(t){var a=jc(e,t);C(a||[])}))),a}),[mc,vc,jc,r,ee]),ie=O.a.useCallback(Object(f.a)(m.a.mark((function e(){var t,a,n,c,r;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(ue.exchangeAPI&&J.coinA&&J.coinB)){e.next=8;break}return t=J.myCoinA,a=J.myCoinB,n="".concat(null===t||void 0===t?void 0:t.name,"-").concat(null===a||void 0===a?void 0:a.name),e.next=5,ue.exchangeAPI.getMixCandlestick({market:n,interval:se.k.d1,limit:30});case 5:c=e.sent,r=c.candlesticks.map((function(e){return Object(o.a)(Object(o.a)({},e),{},{timeStamp:e.timestamp,date:Vc()(e.timestamp).format("MMM DD")})})).sort((function(e,t){return e.timeStamp-t.timeStamp})),re(r);case 8:case"end":return e.stop()}}),e)}))),[J]);O.a.useEffect((function(){ie()}),[ie]),O.a.useEffect((function(){var a,i=null!==(a=null===t||void 0===t?void 0:t.params.symbol)&&void 0!==a?a:void 0,u={},d=i.match(/(\w+)-(\w+)/i),b=Object(fe.a)(d,3),p=b[1],m=b[2],f=Object(se.z)(r,p,m),v=f.amm,j=f.market,O=$r({ammMap:s,coinMap:n,ammActivityMap:e,ammKey:v});if(G(O||{}),n&&te({coinAInfo:n[p],coinBInfo:n[m]}),h&&oe(j),v&&j&&s){l();var k=[Oc({coinKey:j,ammKey:v,ammMap:s})];Promise.all([].concat(k)).then((function(e){var t=Object(fe.a)(e,1)[0],a=t.ammPoolsBalance,n=t.tickMap;if(c){var r={tickerData:n[j],ammPoolsBalance:a};u=bc(n[j]?n[j]:{}),X(u),G(Object(o.a)({},O)),B(r)}})).catch((function(e){throw console.log(e),Error}))}}),[]);var le=O.a.useCallback((function(){var e,t,a=Object(se.z)(r,null===(e=ee.coinAInfo)||void 0===e?void 0:e.simpleName,null===(t=ee.coinBInfo)||void 0===t?void 0:t.simpleName).market;if(a&&L&&L.ammPoolsBalance){var n=oe(a),c=lc(a,n,P,L);W(c)}}),[]);return tr({walletLayer2Callback:le}),O.a.useEffect((function(){var e,t,a=Object(se.z)(r,null===(e=ee.coinAInfo)||void 0===e?void 0:e.simpleName,null===(t=ee.coinBInfo)||void 0===t?void 0:t.simpleName).market;if(j===d.M.UNSET&&a){D(v);var n=lc(a,g,P,L);W(n)}}),[j]),O.a.useEffect((function(){var t,a;if(b===d.M.UNSET&&s&&(null===(t=ee.coinAInfo)||void 0===t?void 0:t.simpleName)&&(null===(a=ee.coinBInfo)||void 0===a?void 0:a.simpleName)){var c=$r({ammMap:s,coinMap:n,ammActivityMap:e,ammKey:"AMM-"+ee.coinAInfo.simpleName+ee.coinBInfo.simpleName});G(Object(o.a)(Object(o.a)(Object(o.a)({},J),c),{},{tradeFloat:J.tradeFloat}))}}),[b]),{walletMap:g,myAmm:K,coinPairInfo:J,snapShotData:L,pair:ee,tradeFloat:z,ammMarketArray:S,myAmmMarketArray:N,pairHistory:ce}}({ammActivityMap:I}),E=C.tradeFloat,P=C.snapShotData,D=C.pair,_=C.coinPairInfo,R=C.walletMap,L=C.ammMarketArray,B=C.myAmmMarketArray,U=C.myAmm,F=C.pairHistory,K=O.a.useState(0),W=Object(fe.a)(K,2),V=W[0],H=(W[1],O.a.useState((null===M||void 0===M?void 0:M.page)?M.page:1)),J=Object(fe.a)(H,2),G=J[0],q=J[1],Y=O.a.useCallback((function(e){q(e)}),[]),z=Object(T.Rb)().coinJson,X=z[null===(t=_.myCoinA)||void 0===t?void 0:t.simpleName],Q=z[null===(a=_.myCoinB)||void 0===a?void 0:a.simpleName];return Object(kc.jsxs)(kc.Fragment,{children:[Object(kc.jsx)(Ac.a,{marginBottom:2,children:Object(kc.jsxs)(Yr.a,{"aria-label":"breadcrumb",children:[Object(kc.jsx)(zr.a,{color:"textSecondary",href:"/#/liquidity/pools",children:S("labelAmmList")}),Object(kc.jsxs)(sr.a,{color:"textSecondary",display:"flex",alignItems:"center",justifyContent:"center",children:[null===(n=D.coinAInfo)||void 0===n?void 0:n.simpleName,"-",null===(c=D.coinBInfo)||void 0===c?void 0:c.simpleName]})]})}),Object(kc.jsxs)(Ac.a,{display:"flex",flex:1,flexDirection:"row",children:[Object(kc.jsxs)(yc.a,{container:!0,marginRight:3,alignContent:"stretch",direction:"column",flexWrap:"nowrap",children:[Object(kc.jsx)(yc.a,{item:!0,xs:12,marginTop:2,children:Object(kc.jsx)(T.pb,Object(o.a)({},Object(o.a)(Object(o.a)(Object(o.a)({},M),{},{t:S},D),{},{tradeFloat:E,isNew:!1})))}),Object(kc.jsxs)(yc.a,{item:!0,xs:12,display:"flex",flexDirection:"column",justifyContent:"space-between",children:[Object(kc.jsx)(Ac.a,{flex:1,width:"101%",minHeight:396,maxHeight:460,children:Object(kc.jsx)(T.Y,{type:T.p.Trend,data:F,extraInfo:null===(r=D.coinBInfo)||void 0===r?void 0:r.simpleName,showXAxis:!0})}),Object(kc.jsxs)(Ac.a,{display:"flex",flexDirection:"row",justifyContent:"space-between",children:[Object(kc.jsxs)(to,{paddingX:2,display:"flex",flexDirection:"column",children:[Object(kc.jsx)(sr.a,{component:"p",color:"textSecondary",display:"flex",marginBottom:1.5,children:S("labelAmmTotalToken")}),Object(kc.jsxs)(sr.a,{component:"span",display:"flex",flexDirection:"row",justifyContent:"space-between",alignItems:"center",style:{textTransform:"capitalize"},color:"textPrimary",children:[Object(kc.jsx)(Ac.a,{component:"span",className:"logo-icon",height:"var(--list-menu-coin-size)",width:"var(--list-menu-coin-size)",alignItems:"center",justifyContent:"center",children:X?Object(kc.jsx)(d.d,{imgx:X.x,imgy:X.y,imgheight:X.height,imgwidth:X.width,size:24,variant:"circular",alt:null===_||void 0===_||null===(i=_.myCoinA)||void 0===i?void 0:i.simpleName,src:'data:image/svg+xml;utf8,<svg width="36" height="36" viewBox="0 0 36 36" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M0 0H36V36H0V0Z"/></svg>'}):Object(kc.jsx)(Xr.a,{variant:"circular",alt:null===_||void 0===_||null===(s=_.myCoinA)||void 0===s?void 0:s.simpleName,style:{height:"var(--list-menu-coin-size))",width:"var(--list-menu-coin-size)"},src:"static/images/icon-default.png"})}),Object(kc.jsxs)(sr.a,{justifyContent:"center",display:"flex",children:[Object(kc.jsx)(sr.a,{component:"span",alignSelf:"right",height:24,lineHeight:"24px",children:Object(d.jb)(_.totalA,6)}),Object(kc.jsx)(sr.a,{component:"span",marginLeft:1,alignSelf:"right",height:24,lineHeight:"24px",children:null===(b=_.myCoinA)||void 0===b?void 0:b.simpleName})]})]}),Object(kc.jsxs)(sr.a,{component:"span",display:"flex",flexDirection:"row",justifyContent:"space-between",alignItems:"center",marginTop:1,style:{textTransform:"capitalize"},children:[Object(kc.jsx)(Ac.a,{component:"span",className:"logo-icon",height:"var(--list-menu-coin-size)",width:"var(--list-menu-coin-size)",alignItems:"center",justifyContent:"center",children:Q?Object(kc.jsx)(d.d,{imgx:Q.x,imgy:Q.y,imgheight:Q.height,imgwidth:Q.width,size:24,variant:"circular",alt:null===_||void 0===_||null===(p=_.myCoinB)||void 0===p?void 0:p.simpleName,src:'data:image/svg+xml;utf8,<svg width="36" height="36" viewBox="0 0 36 36" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M0 0H36V36H0V0Z"/></svg>'}):Object(kc.jsx)(Xr.a,{variant:"circular",alt:null===_||void 0===_||null===(v=_.myCoinB)||void 0===v?void 0:v.simpleName,style:{height:"var(--list-menu-coin-size)",width:"var(--list-menu-coin-size)"},src:"static/images/icon-default.png"})}),Object(kc.jsxs)(sr.a,{justifyContent:"center",display:"flex",children:[Object(kc.jsx)(sr.a,{component:"span",alignSelf:"right",height:24,lineHeight:"24px",children:Object(d.jb)(_.totalB,6)}),Object(kc.jsx)(sr.a,{component:"span",marginLeft:1,alignSelf:"right",height:24,lineHeight:"24px",children:null===(j=_.myCoinB)||void 0===j?void 0:j.simpleName})]})]})]}),Object(kc.jsxs)(to,{paddingX:2,display:"flex",flexDirection:"column",children:[Object(kc.jsx)(sr.a,{component:"p",color:"textSecondary",display:"flex",children:S("label24Volume")}),Object(kc.jsx)(sr.a,{variant:"h5",marginTop:4,component:"span",children:N===d.n.dollar?d.I.Dollar+Object(d.jb)(E&&E.priceDollar?E.priceDollar:0,2):d.I.Yuan+Object(d.jb)(E&&E.priceYuan?E.priceYuan:0,2)})]}),Object(kc.jsxs)(to,{paddingX:2,display:"flex",flexDirection:"column",children:[Object(kc.jsx)(sr.a,{component:"p",color:"textSecondary",display:"flex",children:S("labelTVL")}),Object(kc.jsxs)(sr.a,{variant:"h5",marginTop:4,component:"span",children:[" ","undefined"===typeof _.amountDollar?d.t:N===d.n.dollar?d.I.Dollar+Object(d.jb)(_.amountDollar,2):d.I.Yuan+Object(d.jb)(_.amountYuan?_.amountYuan:0,2)]})]}),Object(kc.jsxs)(to,{paddingX:2,display:"flex",flexDirection:"column",children:[Object(kc.jsx)(sr.a,{component:"p",color:"textSecondary",display:"flex",children:S("labelAPY")}),Object(kc.jsxs)(sr.a,{variant:"h5",marginTop:4,component:"span",children:[" ",_.APY?_.APY:d.t,"%"]})]})]}),Object(kc.jsxs)(Ac.a,{children:[Object(kc.jsx)(Sc.a,{value:V,"aria-label":"tabs switch",children:Object(kc.jsx)(Ic.a,Object(o.a)({label:S("labelMe")},(A=1,{id:"simple-tab-".concat(A),"aria-controls":"tabpanel-".concat(A)})))}),Object(kc.jsx)(Dc,{style:{marginTop:"".concat(2*d.ub,"px")},children:0===V?Object(kc.jsx)(T.f,{rawData:L,handlePageChange:Y,page:G}):Object(kc.jsx)(T.f,{rawData:B,handlePageChange:Y,page:G})})]})]})]}),Object(kc.jsx)(Ac.a,{display:"flex",style:{minWidth:"var(--swap-box-width)"},children:Object(kc.jsxs)(Rc,{children:[Object(kc.jsx)(Ac.a,{className:"MuiPaper-elevation2",children:Object(kc.jsx)(Zr,{pair:D,walletMap:R,snapShotData:P})}),"undefined"===typeof _.isActivity?"":Object(kc.jsxs)(ao,{paddingY:3,paddingX:2.5,display:"flex",flexDirection:"column",children:[Object(kc.jsxs)(Ac.a,{display:"flex",flexDirection:"row",justifyContent:"space-between",children:[Object(kc.jsxs)(sr.a,{display:"flex",flexDirection:"column",component:"div",children:[Object(kc.jsx)(sr.a,{variant:"body2",component:"h5",color:"textSecondary",children:S("labelReward")}),Object(kc.jsx)(sr.a,{variant:"body1",component:"span",color:"textPrimary",children:"undefined"===typeof _.isActivity?d.t:Object(kc.jsxs)(kc.Fragment,{children:[Object(kc.jsxs)(sr.a,{component:"span",children:[_.activity?Object(d.jb)(_.activity.totalRewards):d.t," "]}),Object(kc.jsx)(sr.a,{component:"span",children:null===(h=_.activity)||void 0===h||null===(k=h.rewardToken)||void 0===k?void 0:k.simpleName})]})})]}),Object(kc.jsxs)(sr.a,{display:"flex",flexDirection:"column",alignItems:"flex-end",component:"div",children:[Object(kc.jsx)(sr.a,{variant:"body2",component:"h5",color:"textSecondary",children:S("labelMyReward")}),Object(kc.jsx)(sr.a,{variant:"body1",component:"span",color:"textPrimary",children:"undefined"===typeof U.reward?d.t:Object(kc.jsxs)(kc.Fragment,{children:[Object(kc.jsxs)(sr.a,{component:"span",children:[" ",Object(d.jb)(U.reward)," "]}),Object(kc.jsxs)(sr.a,{component:"span",children:[" ",null===(x=_.activity)||void 0===x||null===(g=x.rewardToken)||void 0===g?void 0:g.simpleName]})]})})]})]}),Object(kc.jsx)(sr.a,{alignSelf:"flex-start",variant:"body2",color:"textSecondary",component:"span",marginTop:1,children:"undefined"===typeof _.isActivity?S("labelNoActiveEvent"):Object(kc.jsxs)(kc.Fragment,{children:[S("labelDate")," :",Object(kc.jsxs)(kc.Fragment,{children:[" "," "+Vc()(null===(w=_.activity)||void 0===w?void 0:w.duration.from).format("L")+" - "+Vc()(null===(y=_.activity)||void 0===y?void 0:y.duration.to).format("L")]})]})})]})]})})]})]})})),co=function(){var e=re(),t=e.ammActivityMap,a=e.status,n=C(),c=(n.account,n.status,$()),r=c.ammMap,o=c.getAmmMap,i=O.a.useState(t),s=Object(fe.a)(i,2),u=s[0],l=s[1];return O.a.useEffect((function(){r&&0!==Object.keys(r).length||o()}),[]),O.a.useEffect((function(){a===d.M.UNSET&&l(t)}),[a]),{ammActivityMap:u}},ro=Object(Pc.a)(Ac.a)(Wr||(Wr=Object(i.a)(["\n    display: flex;\n    flex-direction: column;\n    justify-content: stretch;\n    align-items: stretch;\n    flex: 1;\n"]))),oo=(d.tb,Object(hc.a)(["layout","common"],{withRef:!0})(T.ab),Object(hc.a)("common",{withRef:!0})((function(e){var t,a,n=e.t,c=co().ammActivityMap,r=Object(u.h)(["/liquidity/:item",":next/"]),o=null!==(t=null===r||void 0===r?void 0:r.params.item)&&void 0!==t?t:"pools",i=Object(u.h)(["/liquidity/:item/:next/:symbol"]),s=void 0;return i&&(null===i||void 0===i||null===(a=i.params)||void 0===a?void 0:a.next)&&"pools"===i.params.item&&(s=i.params.symbol?i.params.symbol:"LRC-ETH"),Object(kc.jsxs)(kc.Fragment,{children:[s&&Object(kc.jsx)(Ac.a,{display:"flex",flexDirection:"column",flex:1,alignSelf:"flex-start",children:Object(kc.jsx)(no,{ammActivityMap:c})}),!s&&Object(kc.jsxs)(ro,{children:[Object(kc.jsx)(sr.a,{variant:"h2",component:"div",fontFamily:"Roboto",marginTop:2,marginBottom:3,children:n("labelLiquidityPageTitle")}),Object(kc.jsx)(Ac.a,{minHeight:420,display:"flex",alignItems:"stretch",justifyContent:"stretch",marginTop:0,flex:1,marginBottom:3,children:"pools"===o&&!s&&Object(kc.jsx)(qr,{ammActivityMap:c})})]})]})}))),io=a(1657),so=["ammProps","t"],uo=Object(Pc.a)(Ac.a)(Vr||(Vr=Object(i.a)(["\n    display: flex;\n    flex-direction: column;\n    flex: 1;\n"]))),lo=O.a.memo(O.a.forwardRef((function(e,t){var a="".concat(e.coinAInfo.name,"-").concat(e.coinBInfo.name);return e?Object(kc.jsx)(T.c,Object(o.a)(Object(o.a)({ref:t},e),{},{handleClick:function(){return e.handleClick(a)}})):Object(kc.jsx)(kc.Fragment,{})}))),bo=function(e){var t=e.ammActivityViewMap,a=Object(u.f)(),n=O.a.useCallback((function(e){a&&a.push("/liquidity/pools/coinPair/".concat(e))}),[a]);return Object(kc.jsxs)(kc.Fragment,{children:[t.length?t.map((function(e,t){return Object(kc.jsx)(yc.a,{item:!0,xs:12,sm:6,lg:4,children:Object(kc.jsx)(lo,Object(o.a)({handleClick:n},e))},t)})):Object(kc.jsxs)(Ac.a,{flex:1,display:"flex",alignItems:"center",justifyContent:"center",flexDirection:"column",children:[Object(kc.jsx)(T.v,{height:"calc(100% - 35px)",marginTop:10,display:"flex",flexWrap:"nowrap",alignItems:"center",justifyContent:"center",flexDirection:"column",message:function(){return Object(kc.jsx)(io.a,{i18nKey:"labelEmptyDefault",children:"Content is Empty"})}})," "]}),"   "]})},po=Object(hc.a)("common")((function(e){e.ammProps;var t=e.t,a=(Object(l.a)(e,so),function(e){var t=e.ammActivityMap,a=pn(),n=O.a.useState([]),c=Object(fe.a)(n,2),r=c[0],o=c[1],i=O.a.useState([]),s=Object(fe.a)(i,2),u=s[0],l=s[1];return O.a.useEffect((function(){t&&Object.keys(t).length>0&&(o(ic({ammActivityMap:t,type:"AMM_MINING",ammPoolActivityStatus:[se.a.NotStarted,se.a.InProgress]},a.userRewardsMap)),l(ic({ammActivityMap:t,type:"AMM_MINING",ammPoolActivityStatus:[se.a.EndOfGame]},a.userRewardsMap)))}),[t]),O.a.useEffect((function(){"ERROR"===a.status?a.statusUnset():"DONE"===a.status&&(a.statusUnset(),o(ic({ammActivityMap:t,type:"AMM_MINING",ammPoolActivityStatus:[se.a.NotStarted,se.a.InProgress]},a.userRewardsMap)),l(ic({ammActivityMap:t,type:"AMM_MINING",ammPoolActivityStatus:[se.a.EndOfGame]},a.userRewardsMap)))}),[a.status]),{ammActivityViewMap:r,ammActivityPastViewMap:u}}({ammActivityMap:co().ammActivityMap})),n=a.ammActivityViewMap,c=a.ammActivityPastViewMap,r=O.a.useState(0),o=Object(fe.a)(r,2),i=(o[0],o[1],[].concat(Object(E.a)(n),Object(E.a)(c)));return Object(kc.jsxs)(uo,{children:[Object(kc.jsx)(sr.a,{variant:"h2",component:"div",fontFamily:"Roboto",marginTop:2,marginBottom:3,children:t("labelMiningPageTitle")}),Object(kc.jsx)(yc.a,{container:!0,spacing:5,children:Object(kc.jsx)(bo,{ammActivityViewMap:i})})]})})),mo=["onClose","open","t"],fo=Object(hc.a)("common")((function(e){var t=e.onClose,a=(e.open,e.t),n=Object(l.a)(e,mo),c=C(),r=c.account,i=c.updateAccount,s=c.setShouldShow,u=c.resetAccount,b=(c.statusUnset,c.status),p=Za(),h=p.updateSystem,k=p.chainId,x=(p.exchangeInfo,Object(T.Qb)()),g=x.modals.isShowConnect,w=x.setShowConnect,y=x.setShowAccount,A=O.a.useState(""),S=Object(fe.a)(A,2),I=S[0],M=S[1],N=O.a.useState(!1),E=Object(fe.a)(N,2),P=E[0],D=E[1],_=O.a.useCallback(Object(f.a)(m.a.mark((function e(){var t,a;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ba.a.MetaMask();case 2:if(i({connectName:d.l.MetaMask}),!Ba.a.usedProvide){e.next=11;break}return e.t0=Number,e.next=7,null===(t=Ba.a.usedWeb3)||void 0===t?void 0:t.eth.getChainId();case 7:return e.t1=e.sent,(a=(0,e.t0)(e.t1))!==k&&h({chainId:a&&a===se.e.GOERLI?a:se.e.MAINNET}),e.abrupt("return");case 11:case"end":return e.stop()}}),e)}))),[]),R=O.a.useCallback(Object(f.a)(m.a.mark((function e(){var t,a;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ba.a.WalletConnect();case 2:if(i({connectName:d.l.WalletConnect}),!Ba.a.usedProvide){e.next=11;break}return e.t0=Number,e.next=7,null===(t=Ba.a.usedWeb3)||void 0===t?void 0:t.eth.getChainId();case 7:return e.t1=e.sent,(a=(0,e.t0)(e.t1))!==k&&h({chainId:a&&a===se.e.GOERLI?a:se.e.MAINNET}),e.abrupt("return");case 11:case"end":return e.stop()}}),e)}))),[]),L=O.a.useState(void 0),B=Object(fe.a)(L,2),U=B[0],F=B[1];Object(j.useEffect)((function(){!0===P&&-1!==[d.M.UNSET].findIndex((function(e){return e===b}))&&(cn("clear cache connect done"),D(!1),void 0!==U&&U.callback())}),[b,P]);var K=[Object(o.a)(Object(o.a)({},d.fb[0]),{},{handleSelect:O.a.useCallback(Object(f.a)(m.a.mark((function e(){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r.connectName===d.fb[0].key?w({isShow:!1}):(Ba.c.sendDisconnect("","should new provider"),w({isShow:!0,step:T.zb.MetaMaskProcessing}),F({callback:_}),D(!0));case 1:case"end":return e.stop()}}),e)}))),[r])}),Object(o.a)(Object(o.a)({},d.fb[1]),{},{handleSelect:O.a.useCallback(Object(f.a)(m.a.mark((function e(){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:Ba.c.sendDisconnect("","should new provider"),w({isShow:!0,step:T.zb.WalletConnectProcessing}),F({callback:R}),D(!0);case 4:case"end":return e.stop()}}),e)}))),[r])})],W=O.a.useCallback((function(e){e.type;var t=e.opts.qrCodeUrl;t&&(M(t),w({isShow:!0,step:T.zb.WalletConnectQRCode}))}),[]),V=Object(j.useState)(!1),H=Object(fe.a)(V,2),J=H[0],G=H[1];Object(Ba.b)({handleProcessing:W});var q=O.a.useMemo((function(){return["UN_CONNECT","ERROR_NETWORK"].includes(r.readyState)?void 0:function(){switch(w({isShow:!1}),r.readyState){case"ACTIVATED":case"LOCKED":y({isShow:!0,step:T.a.HadAccount});break;case"DEPOSITING":y({isShow:!0,step:T.a.Depositing});break;case"NO_ACCOUNT":y({isShow:!0,step:T.a.NoAccount})}}}),[r,y]),Y=O.a.useMemo((function(){var e;return Object.values((e={},Object(v.a)(e,T.zb.Provider,{view:Object(kc.jsx)(T.T,Object(o.a)({termUrl:"./",gatewayList:K,providerName:r.connectName},Object(o.a)({t:a},n))),onBack:q}),Object(v.a)(e,T.zb.MetaMaskProcessing,{view:Object(kc.jsx)(T.H,Object(o.a)({},Object(o.a)({t:a},n)))}),Object(v.a)(e,T.zb.WalletConnectProcessing,{view:Object(kc.jsx)(T.xb,Object(o.a)({},Object(o.a)({t:a},n)))}),Object(v.a)(e,T.zb.WalletConnectQRCode,{view:Object(kc.jsx)(T.yb,Object(o.a)({onCopy:function(){tc(I),G(!0)},url:I},Object(o.a)({t:a},n))),onBack:function(){w({isShow:!0,step:T.zb.Provider})}}),Object(v.a)(e,T.zb.SuccessConnect,{view:Object(kc.jsx)(T.bb,Object(o.a)({onClose:function(e){s(!1),t(e)},providerName:r.connectName},Object(o.a)({t:a},n)))}),Object(v.a)(e,T.zb.FailedConnect,{view:Object(kc.jsx)(T.w,Object(o.a)(Object(o.a)({},Object(o.a)({t:a},n)),{},{onRetry:u})),onBack:function(){w({isShow:!0,step:T.zb.Provider})}}),e))}),[I,r,a,n,t]);return Object(kc.jsxs)(kc.Fragment,{children:[Object(kc.jsx)(T.N,{open:g.isShow,onClose:function(e){s(!1),t(e)},panelList:Y,onBack:Y[g.step].onBack,step:g.step}),Object(kc.jsx)(T.jb,{alertText:a("Address Copied to Clipboard!"),open:J,autoHideDuration:ln,onClose:function(){G(!1)},severity:"success"})]})}));function vo(){return jo.apply(this,arguments)}function jo(){return(jo=Object(f.a)(m.a.mark((function e(){var t,a,n,c,r,o,i,s,u,l;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=Fn.getState().system,a=Fn.getState().account,cn("before check!",a),n={code:nn.NoError},e.prev=4,!(ue.userAPI&&ue.exchangeAPI&&t.exchangeInfo&&Ba.a.usedWeb3&&a&&"unknown"!==t.chainId&&"unknown"!==a.connectName)){e.next=39;break}return c={ETH:"529000000000000",LRC:"34000000000000000000",USDT:"7850000",DAI:"98100000000000000000"},e.next=9,ue.exchangeAPI.getAccount({owner:a.accAddress});case 9:if(r=e.sent,!(null===(o=r.accInfo)||void 0===o?void 0:o.owner)||!(null===o||void 0===o?void 0:o.accountId)){e.next=39;break}return i=a.connectName,e.prev=13,e.next=16,se.u(Ba.a.usedWeb3,o.owner,t.exchangeInfo.exchangeAddress,o.nonce,i);case 16:return s=e.sent,e.prev=17,u={exchange:t.exchangeInfo.exchangeAddress,owner:o.owner,accountId:o.accountId,publicKey:{x:s.formatedPx,y:s.formatedPy},maxFee:{tokenId:0,volume:c.ETH},validUntil:ar(30),nonce:o.nonce},cn("req:",u),e.next=22,ue.userAPI.updateAccount({request:u,web3:Ba.a.usedWeb3,chainId:t.chainId,walletType:i});case 22:l=e.sent,cn("updateAccountResponse:",l),l.errorInfo?(n.code=nn.UpdateAccoutError,n.data=l.errorInfo):n.data={response:l,eddsaKey:s},e.next=32;break;case 27:e.prev=27,e.t0=e.catch(17),n.code=nn.UpdateAccoutError,n.data=e.t0,Object(se.s)(e.t0);case 32:e.next=39;break;case 34:e.prev=34,e.t1=e.catch(13),n.code=nn.GenEddsaKeyError,n.data=e.t1,Object(se.s)(e.t1);case 39:e.next=46;break;case 41:e.prev=41,e.t2=e.catch(4),n.code=nn.GetAccError,n.data=e.t2,Object(se.s)(e.t2);case 46:return e.abrupt("return",n);case 47:case"end":return e.stop()}}),e,null,[[4,41],[13,34],[17,27]])})))).apply(this,arguments)}function Oo(){zn.sendAccountLock()}var ho=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=_e(),a=t.tokenMap,n=t.totalCoinMap,c=C(),r=c.account,o=Za(),i=o.exchangeInfo,s=o.chainId,u=o.gasPrice,l=O.a.useState({belong:void 0,tradeValue:0,balance:0}),b=Object(fe.a)(l,2),p=b[0],v=b[1],h=ht(),k=h.walletLayer1,x=Object(T.Qb)(),g=x.setShowDeposit,w=x.setShowAccount,y=Object(er.a)("common"),A=y.t,S=O.a.useCallback(function(){var e=Object(f.a)(m.a.mark((function e(t){var n,c,o,l,b,p,f,v,j,O,h,k,x,g,y,A;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r.accountId,r.accAddress,n=r.readyState,r.apiKey,c=r.connectName,r.eddsaKey,console.log(ue.exchangeAPI,Ba.a.usedWeb3),o={code:nn.NoError},!(n!==d.a.UN_CONNECT&&t.tradeValue&&a&&(null===i||void 0===i?void 0:i.exchangeAddress)&&Ba.a.usedWeb3&&ue.exchangeAPI)){e.next=58;break}return e.prev=4,l=a[t.belong],b=parseInt(l.gasAmounts.deposit),e.next=9,se.A(Ba.a.usedWeb3,r.accAddress);case 9:if(p=e.sent,f=0,v=c===d.l.MetaMask,j=null!==u&&void 0!==u?u:30,"ETH"===l.symbol.toUpperCase()){e.next=39;break}return O={owner:r.accAddress,token:l.symbol},e.next=17,ue.exchangeAPI.getAllowances(O,a);case 17:if(h=e.sent,k=h.tokenAllowances,x=se.J(k[l.symbol]),!(g=se.J(t.tradeValue).times("1e"+l.decimals)).gt(x)){e.next=38;break}return cn(g,x," need approveMax!"),w({isShow:!0,step:T.a.TokenApproveInProcess}),e.prev=24,e.next=27,se.q(Ba.a.usedWeb3,r.accAddress,l.address,null===i||void 0===i?void 0:i.depositAddress,j,b,"unknown"===s?void 0:s,p,v);case 27:p+=1,e.next=36;break;case 30:return e.prev=30,e.t0=e.catch(24),o.code=nn.ApproveFailed,o.data=e.t0,w({isShow:!0,step:T.a.TokenApproveFailed}),e.abrupt("return");case 36:e.next=39;break;case 38:cn("allowance is enough! don't need approveMax!");case 39:return w({isShow:!0,step:T.a.DepositInProcess}),cn("before deposit:",s,c,v),y="unknown"===s?1:s,e.next=44,se.r(Ba.a.usedWeb3,r.accAddress,i.exchangeAddress,l,t.tradeValue,f,j,b,y,p,v);case 44:A=e.sent,cn("response:",A),o.data=A,void 0===(null===A||void 0===A?void 0:A.hash)&&(null===A||void 0===A?void 0:A.errInfo)?w({isShow:!0,step:T.a.DepositFailed}):w({isShow:!0,step:T.a.Depositing}),e.next=56;break;case 50:e.prev=50,e.t1=e.catch(4),Object(se.s)(e.t1),o.code=nn.DepositFailed,o.data=e.t1,w({isShow:!0,step:T.a.DepositFailed});case 56:e.next=59;break;case 58:o.code=nn.DataNotReady;case 59:return e.abrupt("return",o);case 60:case"end":return e.stop()}}),e,null,[[4,50],[24,30]])})));return function(t){return e.apply(this,arguments)}}(),[r,a,s,i,u,ue.exchangeAPI,w]),I=Object(j.useCallback)(function(){var e=Object(f.a)(m.a.mark((function e(t){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(cn("onDepositClick depositValue:",t),g({isShow:!1}),!t||!t.belong){e.next=5;break}return e.next=5,S(t);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[p,S,g,w,e]),M=(Object(j.useCallback)(function(){var e=Object(f.a)(m.a.mark((function e(t,a){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e){e()})));case 1:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),[p,v]),A(e?"labelCreateLayer2Title":"depositTitleAndActive")),N={isNewAccount:e,title:M,tradeData:{belong:void 0},coinMap:n,walletMap:k,depositBtnStatus:T.nb.AVAILABLE,onDepositClick:I};return{depositProps:N}},ko=["onClose","etherscanUrl","open","t"],xo=Object(hc.a)("common")((function(e){var t=e.onClose,a=e.etherscanUrl,n=(e.open,e.t),c=Object(l.a)(e,ko),r=C(),i=r.account,s=r.shouldShow,u=r.updateAccount,b=r.setShouldShow,p=r.resetAccount,h=ho(!0).depositProps,k=Object(T.Qb)(),x=k.modals.isShowAccount,g=k.setShowConnect,w=k.setShowAccount,y=Object(j.useState)(!1),A=Object(fe.a)(y,2),S=A[0],I=A[1],M=Object(d.hb)(i.accAddress),N=_e().coinMap,E=Object(j.useState)(!1),P=Object(fe.a)(E,2),D=P[0],_=P[1],R=O.a.useCallback((function(){w({isShow:!1}),b(!0),g({isShow:null!==s&&void 0!==s&&s})}),[g,w,s]),L=O.a.useCallback((function(){tc(i.accAddress),_(!0)}),[i]),B=O.a.useCallback((function(){I(!0)}),[]),U=O.a.useCallback(Object(f.a)(m.a.mark((function e(){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:Ba.c.sendDisconnect("","customer click disconnect"),w({isShow:!1});case 2:case"end":return e.stop()}}),e)}))),[p,w]),F=O.a.useCallback((function(){w({isShow:!0,step:T.a.Deposit})}),[w]),K=O.a.useCallback(Object(f.a)(m.a.mark((function e(){var t,a,n,c,r,o;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i.accAddress){e.next=3;break}return cn("account.accAddress is nil"),e.abrupt("return");case 3:return cn("goUpdateAccount...."),w({isShow:!0,step:T.a.UpdateAccountInProcess}),e.next=7,vo();case 7:t=e.sent,e.t0=t.code,e.next=e.t0===nn.NoError?11:e.t0===nn.GetAccError||e.t0===nn.GenEddsaKeyError||e.t0===nn.UpdateAccoutError?30:33;break;case 11:return a=t.data.eddsaKey,cn(" after NoError:",a),e.next=15,Object(se.I)(un);case 15:if(!(ue.userAPI&&ue.exchangeAPI&&a)){e.next=28;break}return e.next=18,ue.exchangeAPI.getAccount({owner:i.accAddress});case 18:if(n=e.sent,c=n.accInfo,n.error||!c){e.next=28;break}return e.next=24,ue.userAPI.getUserApiKey({accountId:c.accountId},a.sk);case 24:r=e.sent,o=r.apiKey,cn("After connect >>, get apiKey",o),zn.sendAccountSigned(c.accountId,o,a);case 28:return w({isShow:!1}),e.abrupt("break",34);case 30:return cn("try to sendCheckAccount..."),zn.sendCheckAccount(i.accAddress),e.abrupt("break",34);case 33:return e.abrupt("break",34);case 34:case"end":return e.stop()}}),e)}))),[i,w]),W=O.a.useCallback((function(){w({isShow:!0,step:T.a.QRCode})}),[]),V=O.a.useMemo((function(){return Object(kc.jsxs)(T.o,{variant:"contained",fullWidth:!0,size:"medium",onClick:function(){b(!0),Hn()},children:[n("labelUnLockLayer2")," "]})}),[u,n]),H=O.a.useMemo((function(){return Object(kc.jsxs)(T.o,{variant:"contained",fullWidth:!0,size:"medium",onClick:function(){Oo()},children:[n("labelLockLayer2")," "]})}),[Oo,n]),J=O.a.useCallback((function(){switch(i.readyState){case"NO_ACCOUNT":case"DEPOSITING":w({isShow:!0,step:T.a.NoAccount});break;case"LOCKED":case"ACTIVATED":w({isShow:!0,step:T.a.HadAccount});break;default:w({isShow:!1})}}),[i]),G=n("labelCreateLayer2Title"),q=O.a.useMemo((function(){var e;return Object.values((e={},Object(v.a)(e,T.a.NoAccount,{view:Object(kc.jsx)(T.P,Object(o.a)({},Object(o.a)(Object(o.a)({goDeposit:F},i),{},{etherscanUrl:a,onSwitch:R,onCopy:L,onViewQRCode:B,onDisconnect:U,addressShort:M}))),onQRClick:W}),Object(v.a)(e,T.a.QRCode,{view:Object(kc.jsx)(T.U,Object(o.a)({},Object(o.a)(Object(o.a)(Object(o.a)({},c),i),{},{etherscanUrl:a,t:n}))),onBack:J,noClose:!0}),Object(v.a)(e,T.a.Deposit,{view:Object(kc.jsx)(T.r,Object(o.a)({title:G},Object(o.a)(Object(o.a)(Object(o.a)({},c),{},{_height:"var(--modal-height)",_width:"var(--modal-width)"},h),{},{t:n})))}),Object(v.a)(e,T.a.Depositing,{view:Object(kc.jsx)(T.s,Object(o.a)({label:G,onClose:t,etherscanLink:a+i.accAddress},Object(o.a)(Object(o.a)({},c),{},{t:n})))}),Object(v.a)(e,T.a.DepositFailed,{view:Object(kc.jsx)(T.x,Object(o.a)({label:G,etherscanLink:a+i.accAddress,onRetry:function(){return F()}},Object(o.a)(Object(o.a)({},c),{},{t:n}))),onBack:function(){w({isShow:!0,step:T.a.Deposit})}}),Object(v.a)(e,T.a.UpdateAccount,{view:Object(kc.jsx)(T.k,Object(o.a)(Object(o.a)({},Object(o.a)(Object(o.a)({},i),{},{etherscanUrl:a,onSwitch:R,onCopy:L,onViewQRCode:B,onDisconnect:U,addressShort:M})),{},{goUpdateAccount:function(){K()}},Object(o.a)(Object(o.a)({},c),{},{t:n}))),onQRClick:W}),Object(v.a)(e,T.a.ProcessUnlock,{view:Object(kc.jsx)(T.S,Object(o.a)({providerName:i.connectName},Object(o.a)(Object(o.a)({},c),{},{t:n})))}),Object(v.a)(e,T.a.SuccessUnlock,{view:Object(kc.jsx)(T.cb,Object(o.a)({providerName:i.connectName,onClose:t},Object(o.a)(Object(o.a)({},c),{},{t:n})))}),Object(v.a)(e,T.a.FailedUnlock,{view:Object(kc.jsx)(T.z,Object(o.a)({onRetry:function(){Hn()}},Object(o.a)(Object(o.a)({},c),{},{t:n})))}),Object(v.a)(e,T.a.HadAccount,{view:Object(kc.jsx)(T.A,Object(o.a)({},Object(o.a)(Object(o.a)({},i),{},{onSwitch:R,onCopy:L,etherscanUrl:a,onViewQRCode:B,onDisconnect:U,addressShort:M,etherscanLink:a+i.accAddress,mainBtn:"ACTIVATED"===i.readyState?H:V}))),onQRClick:W}),Object(v.a)(e,T.a.TokenApproveInProcess,{view:Object(kc.jsx)(T.lb,Object(o.a)({label:G,providerName:i.connectName},Object(o.a)(Object(o.a)({},c),{},{t:n}))),onBack:function(){w({isShow:!0,step:T.a.Deposit})}}),Object(v.a)(e,T.a.DepositApproveProcess,{view:Object(kc.jsx)(T.q,Object(o.a)({label:G,etherscanLink:a+i.accAddress,providerName:i.connectName},Object(o.a)(Object(o.a)({},c),{},{t:n})))}),Object(v.a)(e,T.a.DepositInProcess,{view:Object(kc.jsx)(T.t,Object(o.a)({label:G,etherscanLink:a+i.accAddress,providerName:i.connectName},Object(o.a)(Object(o.a)({},c),{},{t:n})))}),Object(v.a)(e,T.a.UpdateAccountInProcess,{view:Object(kc.jsx)(T.b,Object(o.a)({label:G,providerName:i.connectName},Object(o.a)(Object(o.a)({},c),{},{t:n})))}),Object(v.a)(e,T.a.UpdateAccountFailed,{view:Object(kc.jsx)(T.z,Object(o.a)({label:G,onRetry:function(){K()}},Object(o.a)(Object(o.a)({},c),{},{t:n}))),onBack:function(){w({isShow:!0,step:T.a.UpdateAccount})}}),Object(v.a)(e,T.a.TokenApproveFailed,{view:Object(kc.jsx)(T.y,Object(o.a)({label:G,onRetry:function(){F()}},Object(o.a)(Object(o.a)({t:n},c),{},{coinInfo:N?N.USTD:void 0})))}),e))}),[M,i,h,a,L,R,U,B,n,c]);return Object(kc.jsxs)(kc.Fragment,{children:[Object(kc.jsx)(T.jb,{alertText:n("Address Copied to Clipboard!"),open:D,autoHideDuration:ln,onClose:function(){_(!1)},severity:"success"}),Object(kc.jsx)(T.M,{open:S,onClose:function(){return I(!1)},title:"ETH Address",description:null===i||void 0===i?void 0:i.accAddress,url:null===i||void 0===i?void 0:i.accAddress}),Object(kc.jsx)(T.I,{open:x.isShow,onClose:function(e){b(!1),t(e)},panelList:q,onBack:q[x.step].onBack,onQRClick:q[x.step].onQRClick,step:x.step})]})}));function go(e,t,a,n){var c=C().account,r=Object(j.useState)([]),o=Object(fe.a)(r,2),i=o[0],s=o[1];return Jc(Object(f.a)(m.a.mark((function r(){var o,i,u,l,d;return m.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(-1!==c.accountId&&c.apiKey&&e&&"string"===typeof e&&a&&ue.userAPI){r.next=2;break}return r.abrupt("return");case 2:return cn("tokenSymbol:",e," requestType:",se.g[t]),o=[],r.prev=4,u=a[e],l={accountId:c.accountId,tokenSymbol:e,requestType:t,amount:n?Object(se.J)(n).times("1e"+u.decimals).toFixed(0,0):void 0},r.next=9,ue.userAPI.getOffchainFeeAmt(l,c.apiKey);case 9:(null===(d=r.sent)||void 0===d||null===(i=d.raw_data)||void 0===i?void 0:i.fees)instanceof Array&&(d.raw_data.fees.forEach((function(e){var t=e.fee,n=a[e.token],c=se.J(e.fee).div("1e"+n.decimals).toNumber();o.push({belong:e.token,fee:c,__raw__:t})})),s(o)),cn("response:",d),r.next=17;break;case 14:r.prev=14,r.t0=r.catch(4),Object(se.s)(r.t0);case 17:s(o);case 18:case"end":return r.stop()}}),r,null,[[4,14]])}))),[c.accountId,c.apiKey,ue.userAPI,t,e,a]),{chargeFeeList:i}}function wo(){var e=C(),t=e.shouldShow,a=e.setShouldShow,n=e.statusUnset,c=Object(T.Qb)().setShowAccount,r=O.a.useCallback((function(){n()}),[t]),o=O.a.useCallback((function(){n(),c({isShow:null!==t&&void 0!==t&&t,step:T.a.HadAccount})}),[t]),i=O.a.useCallback((function(e){n(),c({isShow:null!==t&&void 0!==t&&t,step:T.a.NoAccount})}),[t]),s=O.a.useCallback(Object(f.a)(m.a.mark((function e(){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c({isShow:null!==t&&void 0!==t&&t,step:T.a.Depositing}),e.next=3,Object(se.I)(5e3);case 3:a(!1),c({isShow:!1}),n();case 6:case"end":return e.stop()}}),e)}))),[t]),u=O.a.useCallback((function(){c({isShow:null!==t&&void 0!==t&&t,step:T.a.Depositing})}),[t]),l=O.a.useCallback((function(){c({isShow:null!==t&&void 0!==t&&t,step:T.a.DepositFailed})}),[t]),d=O.a.useCallback((function(){c({isShow:null!==t&&void 0!==t&&t,step:T.a.DepositApproveProcess})}),[t]),b=O.a.useCallback((function(){n(),c({isShow:null!==t&&void 0!==t&&t,step:T.a.UpdateAccount})}),[t]),p=O.a.useCallback((function(){c({isShow:null!==t&&void 0!==t&&t,step:T.a.FailedUnlock})}),[t]);!function(e){var t=e.handleLockAccount,a=e.handleNoAccount,n=e.handleErrorAccount,c=e.handleDepositingAccount,r=e.handleErrorApproveToken,o=e.handleErrorDepositSign,i=e.handleProcessDeposit,s=e.handleSignAccount,u=e.handleProcessSign,l=e.handleSignError,d=e.handleProcessAccountCheck,b=e.handleAccountActive,p=O.a.useMemo((function(){return zn.onSocket()}),[]);O.a.useEffect((function(){var e=p.subscribe((function(e){var d=e.data;switch(e.status){case"ErrorNetwork":n(d);break;case"LockAccount":t(d);break;case"NoAccount":a(d);break;case"DepositingAccount":c(d);break;case"ErrorApproveToken":r(d);break;case"ErrorDepositSign":o(d);break;case"ProcessDeposit":i(d);break;case"SignAccount":s(d);break;case"ProcessSign":u(d);break;case"ErrorSign":l(d);break;case"AccountUnlocked":b(d)}}));return function(){return e.unsubscribe()}}),[p,t,n,a,c,r,o,i,s,u,d])}({handleErrorAccount:r,handleLockAccount:o,handleNoAccount:i,handleDepositingAccount:s,handleErrorApproveToken:u,handleErrorDepositSign:l,handleProcessDeposit:d,handleSignAccount:b,handleProcessSign:O.a.useCallback((function(){c({isShow:null!==t&&void 0!==t&&t,step:T.a.ProcessUnlock})}),[t]),handleSignError:p,handleAccountActive:O.a.useCallback(Object(f.a)(m.a.mark((function e(){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c({isShow:null!==t&&void 0!==t&&t,step:T.a.SuccessUnlock}),e.next=3,Object(se.I)(1e3);case 3:a(!1),c({isShow:!1}),n();case 6:case"end":return e.stop()}}),e)}))),[t])})}var yo,Ao=Object(hc.a)("common",{withRef:!0})((function(e){var t=Object.assign({},e),a=function(){var e,t=_e(),a=t.tokenMap,n=t.totalCoinMap,c=C().account,r=Za(),o=r.exchangeInfo,i=r.chainId,s=O.a.useState(null!==(e=mc().walletMap)&&void 0!==e?e:{}),u=Object(fe.a)(s,2),l=u[0],b=u[1],p=O.a.useState({belong:void 0,tradeValue:0,balance:0}),v=Object(fe.a)(p,2),h=v[0],k=v[1],x=go(h.belong,se.g.TRANSFER,a).chargeFeeList,g=O.a.useState(),w=Object(fe.a)(g,2),y=w[0],A=w[1],S=O.a.useState(""),I=Object(fe.a)(S,2),M=I[0],N=I[1],E=O.a.useCallback((function(){var e,t=null!==(e=mc().walletMap)&&void 0!==e?e:{};b(t)}),[]);tr({walletLayer2Callback:E}),Jc((function(){x.length>0&&A(x[0])}),[x,A]);var P=Object(j.useCallback)(function(){var e=Object(f.a)(m.a.mark((function e(t){var n,r,s,u,l,b,p,f,v,j,O,h,k,x;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=c.accountId,r=c.accAddress,s=c.readyState,u=c.apiKey,l=c.connectName,b=c.eddsaKey,console.log("useCallback tranferFeeInfo:",y),!(s===d.a.ACTIVATED&&a&&o&&Ba.a.usedWeb3&&(null===t||void 0===t?void 0:t.belong)&&(null===y||void 0===y?void 0:y.belong)&&(null===b||void 0===b?void 0:b.sk))){e.next=23;break}return e.prev=3,v=a[t.belong],j=a[y.belong],O=se.J(t.tradeValue).times("1e"+v.decimals).toFixed(0,0),e.next=9,null===(p=ue.userAPI)||void 0===p?void 0:p.getNextStorageId({accountId:n,sellTokenId:v.tokenId},u);case 9:return h=e.sent,k={exchange:o.exchangeAddress,payerAddr:r,payerId:n,payeeAddr:M,payeeId:0,storageId:null===h||void 0===h?void 0:h.offchainId,token:{tokenId:v.tokenId,volume:O},maxFee:{tokenId:j.tokenId,volume:y.__raw__},validUntil:ar(30)},e.next=13,null===(f=ue.userAPI)||void 0===f?void 0:f.submitInternalTransfer({request:k,web3:Ba.a.usedWeb3,chainId:i!==se.e.GOERLI?se.e.MAINNET:i,walletType:l,eddsaKey:b.sk,apiKey:u});case 13:x=e.sent,cn(x),null===x||void 0===x||x.errorInfo,e.next=21;break;case 18:e.prev=18,e.t0=e.catch(3),se.s(e.t0);case 21:e.next=24;break;case 23:return e.abrupt("return",!1);case 24:case"end":return e.stop()}}),e,null,[[3,18]])})));return function(t){return e.apply(this,arguments)}}(),[c,a,null===y||void 0===y?void 0:y.belong,h,M]),D=Object(j.useCallback)(function(){var e=Object(f.a)(m.a.mark((function e(t,a){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e){var a;(null===t||void 0===t||null===(a=t.tradeData)||void 0===a?void 0:a.belong)?h!==t.tradeData&&k(t.tradeData):k({belong:void 0,tradeValue:0,balance:0}),e()})));case 1:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),[k]),_=Object(j.useCallback)((function(e){cn("handleFeeChange:",e),A(e)}),[A]);return{transferProps:{tradeData:{belong:void 0},coinMap:n,walletMap:l,transferBtnStatus:T.nb.AVAILABLE,onTransferClick:P,handleFeeChange:_,handlePanelEvent:D,chargeFeeToken:"ETH",chargeFeeTokenList:x,handleOnAddressChange:function(e){cn("transfer handleOnAddressChange:",e),N(e)},handleAddressError:function(e){return{error:!1,message:""}}}}}().transferProps,n=ho().depositProps,c=function(){var e,t=Object(er.a)("common").t,a=Object(j.useState)(!1),n=Object(fe.a)(a,2),c=n[0],r=n[1],o=Object(j.useState)(),i=Object(fe.a)(o,2),s=i[0],u=i[1],l=_e(),b=l.tokenMap,p=l.totalCoinMap,v=C().account,h=Za(),k=h.exchangeInfo,x=h.chainId,g=O.a.useState({belong:void 0,tradeValue:0,balance:0}),w=Object(fe.a)(g,2),y=w[0],A=w[1],S=O.a.useState(null!==(e=mc().walletMap)&&void 0!==e?e:{}),I=Object(fe.a)(S,2),M=I[0],N=I[1],E=go(y.belong,se.g.OFFCHAIN_WITHDRAWAL,b).chargeFeeList,P=Object(j.useState)(),D=Object(fe.a)(P,2),_=D[0],R=D[1],L=Object(j.useState)(void 0),B=Object(fe.a)(L,2),U=B[0],F=B[1],K=Object(j.useState)(se.g.OFFCHAIN_WITHDRAWAL),W=Object(fe.a)(K,2),V=W[0],H=W[1],J=Object(T.Qb)().setShowWithdraw,G=O.a.useCallback((function(){var e,t=null!==(e=mc().walletMap)&&void 0!==e?e:{};N(t)}),[]);tr({walletLayer2Callback:G}),Jc((function(){E.length>0&&F(E[0])}),[E,F]);var q=O.a.useCallback(function(){var e=Object(f.a)(m.a.mark((function e(a){var n,c,o,i,s,l,p,f,j,O,h,g,w,y;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=v.accountId,c=v.accAddress,o=v.readyState,i=v.apiKey,s=v.connectName,l=v.eddsaKey,!(o===d.a.ACTIVATED&&b&&k&&Ba.a.usedWeb3&&_&&(null===U||void 0===U?void 0:U.belong)&&(null===l||void 0===l?void 0:l.sk))){e.next=25;break}return e.prev=2,j=b[a.belong],O=b[U.belong],h=Object(se.J)(a.tradeValue).times("1e"+j.decimals).toFixed(0,0),e.next=8,null===(p=ue.userAPI)||void 0===p?void 0:p.getNextStorageId({accountId:n,sellTokenId:j.tokenId},i);case 8:return g=e.sent,w={exchange:k.exchangeAddress,owner:c,to:_,accountId:v.accountId,storageId:null===g||void 0===g?void 0:g.offchainId,token:{tokenId:j.tokenId,volume:h},maxFee:{tokenId:O.tokenId,volume:U.__raw__},extraData:"",minGas:0,validUntil:ar(30)},e.next=12,null===(f=ue.userAPI)||void 0===f?void 0:f.submitOffchainWithdraw({request:w,web3:Ba.a.usedWeb3,chainId:"unknown"===x?1:x,walletType:s,eddsaKey:l.sk,apiKey:i});case 12:y=e.sent,cn("got response:",y),(null===y||void 0===y?void 0:y.errorInfo)?u(t("labelWithdrawFailed")):u(t("labelWithdrawSucess")),e.next=21;break;case 17:e.prev=17,e.t0=e.catch(2),Object(se.s)(e.t0),u(t("labelWithdrawFailed"));case 21:return r(!0),e.abrupt("return",!0);case 25:return e.abrupt("return",!1);case 26:case"end":return e.stop()}}),e,null,[[2,17]])})));return function(t){return e.apply(this,arguments)}}(),[v,b,U]),Y=V===se.g.FAST_OFFCHAIN_WITHDRAWAL?"Fast":"Standard",z={tradeData:{belong:void 0},coinMap:p,walletMap:M,withdrawBtnStatus:T.nb.AVAILABLE,withdrawType:Y,withdrawTypes:d.cb,onWithdrawClick:function(){y&&y.belong&&q(y),J({isShow:!1})},handleFeeChange:function(e){F(e)},handleWithdrawTypeChange:function(e){cn("handleWithdrawTypeChange",e);var t=e===d.bb.Fast?se.g.FAST_OFFCHAIN_WITHDRAWAL:se.g.OFFCHAIN_WITHDRAWAL;H(t)},handlePanelEvent:function(){var e=Object(f.a)(m.a.mark((function e(t,a){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e){var a;(null===t||void 0===t||null===(a=t.tradeData)||void 0===a?void 0:a.belong)?y!==t.tradeData&&A(t.tradeData):A({belong:void 0,tradeValue:0,balance:0}),e()})));case 1:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),chargeFeeToken:"ETH",chargeFeeTokenList:E,handleOnAddressChange:function(e){R(e)},handleAddressError:function(e){return{error:!1,message:""}}};return{withdrawAlertText:s,withdrawToastOpen:c,setWithdrawToastOpen:r,withdrawProps:z}}(),r=c.withdrawAlertText,i=c.withdrawToastOpen,s=c.setWithdrawToastOpen,u=c.withdrawProps,l=Za().etherscanUrl;wo();var b=Object(T.Qb)(),p=b.modals,v=p.isShowAccount,h=p.isShowConnect,k=b.setShowConnect,x=b.setShowAccount;return Object(kc.jsxs)(kc.Fragment,{children:[Object(kc.jsx)(T.jb,{alertText:r,open:i,autoHideDuration:ln,onClose:function(){s(!1)}}),Object(kc.jsx)(T.L,{transferProps:a,withDrawProps:u,depositProps:n,resetProps:{},ammProps:{},swapProps:{},_height:"var(--modal-height)",_width:"var(--modal-width)"}),Object(kc.jsx)(fo,Object(o.a)({},Object(o.a)(Object(o.a)({},t),{},{open:h.isShow,onClose:function(){return k({isShow:!1})}}))),Object(kc.jsx)(xo,Object(o.a)({},Object(o.a)(Object(o.a)({},t),{},{etherscanUrl:l,open:v.isShow,onClose:function(){return x({isShow:!1})}})))]})})),So=function(){return Object(kc.jsxs)(s.a,{children:[Object(kc.jsx)(gc,{}),Object(kc.jsx)(ir.a,{maxWidth:"lg",style:{minHeight:"calc(100% - 64px - 32px)",display:"flex",flexDirection:"column"},children:Object(kc.jsx)(Ac.a,{display:"flex",flex:1,alignItems:"stretch",flexDirection:"row",marginTop:3,children:Object(kc.jsxs)(u.c,{children:[Object(kc.jsx)(u.a,{exact:!0,component:or,path:"/"}),Object(kc.jsx)(u.a,{exact:!0,component:Kc,path:"/markets"}),Object(kc.jsx)(u.a,{component:or,path:"/trading/lite"}),Object(kc.jsx)(u.a,{component:or,path:"/trading/lite(/:symbol)"}),Object(kc.jsx)(u.a,{exact:!0,component:po,path:"/mining"}),Object(kc.jsx)(u.a,{exact:!0,component:_r,path:"/layer2"}),Object(kc.jsx)(u.a,{exact:!0,component:_r,path:"/layer2/assets"}),Object(kc.jsx)(u.a,{exact:!0,component:_r,path:"/layer2/my-liquidity"}),Object(kc.jsx)(u.a,{exact:!0,component:_r,path:"/layer2/history"}),Object(kc.jsx)(u.a,{exact:!0,component:_r,path:"/layer2/order"}),Object(kc.jsx)(u.a,{exact:!0,component:_r,path:"/layer2/rewards"}),Object(kc.jsx)(u.a,{exact:!0,component:_r,path:"/layer2/setting"}),Object(kc.jsx)(u.a,{exact:!0,component:oo,path:"/liquidity"}),Object(kc.jsx)(u.a,{exact:!0,component:oo,path:"/liquidity/pools/*"}),Object(kc.jsx)(u.a,{exact:!0,component:oo,path:"/liquidity/pools"}),Object(kc.jsx)(u.a,{exact:!0,component:oo,path:"/liquidity/amm-mining"}),Object(kc.jsx)(u.a,{exact:!0,component:oo,path:"/liquidity/my-liquidity"})]})})}),Object(kc.jsx)(Ao,{})]})},Io=a(1727),Mo=a(125),No=a(66),Co=function(e){var t=e.chainId,a=Fn.getState().system.chainId;return"unknown"===t?(Fn.dispatch(y({wrongChain:!0,_chainId:t})),zn.sendUpdateAccStatusAndReset(d.a.ERROR_NETWORK),!1):t!==a&&"unknown"!==a&&"unknown"!==t?(Fn.dispatch(y({_chainId:t})),Fn.dispatch(ut({chainId:t})),zn.sendUpdateAccStatusAndReset(d.a.UN_CONNECT),!0):(Fn.dispatch(y({wrongChain:!1,_chainId:t})),!0)},To=function(e){var t=Fn.getState().account;""===t.accAddress||t.accAddress!==e?(cn("After connect >>,account part: diff account, clean layer2"),Fn.dispatch(S(void 0)),zn.sendCheckAccount(e)):e&&""!==e&&(cn("After connect >>,checkAccount: step1 address",e),t&&-1===t.accountId?(cn("After connect >>,checkAccount: step1 no account Id"),zn.sendCheckAccount(e)):t.accountId&&t.apiKey&&t.eddsaKey?(cn("After connect >>,checkAccount: step1 have activate account from store, account:",t),zn.sendAccountSigned()):(cn("After connect >>,checkAccount: step1 account locked"),zn.sendAccountLock()))};function Eo(e){var t=e.state,a=pn().getUserRewards;!function(e){e.state;var t=C(),a=t.account,n=t.shouldShow,c=t.resetAccount,r=t.statusUnset,o=t.setShouldShow,i=t.status,s=dn(),u=(s.updateWalletLayer2,s.resetLayer2),l=Za(),b=l.updateSystem,p=(l.chainId,Object(T.Qb)().setShowConnect),v=O.a.useState("DONE"),j=Object(fe.a)(v,2),h=j[0],k=j[1];O.a.useEffect((function(){h===d.M.PENDING&&i===d.M.DONE&&(k("DONE"),r())}),[h,i]);var x=O.a.useCallback(function(){var e=Object(f.a)(m.a.mark((function e(t){var a,c,r,i,s;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c=t.accounts,r=t.chainId,i=c[0],cn("After connect >>,network part start: step1 networkUpdate"),s=Co({chainId:r}),cn("After connect >>,network part done: step2 check account"),s&&To(i),o(!1),p({isShow:null!==(a=!!n)&&void 0!==a&&a,step:T.zb.SuccessConnect}),e.next=10,Object(se.I)(un);case 10:p({isShow:!1,step:T.zb.SuccessConnect});case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[n,p,o]),g=O.a.useCallback(Object(f.a)(m.a.mark((function e(){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c({shouldUpdateProvider:!0}),k(d.M.PENDING),e.next=4,Object(se.I)(un);case 4:u();case 5:case"end":return e.stop()}}),e)}))),[c,k]),w=O.a.useCallback((function(e){e.type,e.errorObj,b({chainId:1===a._chainId||5===a._chainId?a._chainId:5}),c(),r()}),[c,r,b,a._chainId]);Object(Ba.b)({handleAccountDisconnect:g,handleError:w,handleConnect:x})}({state:t});var n=ht(),c=n.updateWalletLayer1,r=n.resetLayer1,o=n.status,i=n.statusUnset,s=dn(),u=s.updateWalletLayer2,l=s.resetLayer2,b=s.status,p=s.statusUnset,v=C(),j=v.account,h=v.status;v.statusUnset;O.a.useEffect((function(){if(h===d.M.UNSET&&t===d.M.DONE){switch(j.readyState){case"UN_CONNECT":case"ERROR_NETWORK":r();break;case"NO_ACCOUNT":case"DEPOSITING":case"LOCKED":l(),o!==d.M.PENDING&&c();break;case"ACTIVATED":o!==d.M.PENDING&&c(),b!==d.M.PENDING&&u()}a()}}),[h,t,j.readyState]),O.a.useEffect((function(){switch(o){case d.M.ERROR:case d.M.DONE:i()}}),[o]),O.a.useEffect((function(){switch(b){case d.M.ERROR:case d.M.DONE:p()}}),[b])}var Po,Do,_o=Object(Pc.a)(Ac.a)(yo||(yo=Object(i.a)(["\n  background-image: url('./static/images/error_bg.png');\n  background-repeat: no-repeat;\n  background-size: contain;\n  background-position: bottom;\n  white-space: pre-wrap;\n  //h2{\n  //  position: relative;\n  //}\n"]))),Ro=function(e){var t=e.messageKey,a=Object(er.a)("error").t;return Object(kc.jsx)(kc.Fragment,{children:Object(kc.jsx)(ir.a,{children:Object(kc.jsx)(_o,{flex:1,display:"flex",alignItems:"flex-start",justifyContent:"center",flexDirection:"column",marginTop:4,height:680,maxWidth:1200,children:Object(kc.jsxs)(Ac.a,{textAlign:"center",position:"relative",left:128,top:-64,children:[Object(kc.jsx)(sr.a,{component:"h2",variant:"h3",children:a(t)}),Object(kc.jsx)(sr.a,{marginY:2,component:"p",variant:"body1",color:"textSecondary",children:Object(kc.jsxs)(io.a,{i18nKey:"labelConnectUs",children:["If you believe this is indeed a bug, please ",Object(kc.jsx)(zr.a,{component:"a",onClick:function(e){window.location.href=function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"report to loopring website",a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"Body Content",n=null!==(e=Object({NODE_ENV:"production",PUBLIC_URL:".",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_RPC_URL_1:"https://mainnet.eth.loopring.network",REACT_APP_MAGIC_API_KEY:"pk_test_398B82F5F0E88874",REACT_APP_API_URL:"api.loopring.network",REACT_APP_RPC_URL_5:"https://goerli.infura.io/v3/84842078b09946638c03157f83405213",REACT_APP_API_URL_UAT:"api.uat.loopring.pro",REACT_APP_PORTIS_DAPP_ID:"e9be171c-2b7f-4ff0-8db9-327707511ee2",REACT_APP_WALLET_CONNECT_BRIDGE:"https://bridge.walletconnect.org",REACT_APP_FORTMATIC_API_KEY:"pk_test_A6260FCBAA2EBDFB"}).CONTACT_US_EMAIL)&&void 0!==e?e:"contact@loopring.io";return"mailto:".concat(n,"?subject=").concat(t,"&body=").concat(a)}(),e.preventDefault()},children:"contact us"})," ",Object(kc.jsx)("br",{})," We would appreciate your feedback"]})})]})})})})},Lo=Object(Pc.a)(Ac.a)(Po||(Po=Object(i.a)(["\n  //background: var(--color-mask);\n  ","\n\n  position: absolute;\n  top: 0;\n  bottom: 0;\n  left: 0;\n  right: 0;\n  width: 0;\n  z-index: 500;\n  height: 100%;\n  width: 100%;\n  svg path,\n  svg rect{\n    fill: var(--color-primary)\n  }\n"])),(function(e){var t=e.theme;return Object(T.Cb)({theme:t})})),Bo=function(){Object(er.a)("layout").t;return Object(kc.jsx)(kc.Fragment,{children:Object(kc.jsx)(Lo,{flex:1,display:"flex",alignItems:"center",justifyContent:"center",flexDirection:"column",height:"100%",width:"100%",children:Object(kc.jsx)("div",{className:"loader loader--style3",title:"2",children:Object(kc.jsx)("svg",{version:"1.1",id:"loader-1",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",x:"0px",y:"0px",width:"40px",height:"40px",viewBox:"0 0 50 50",enableBackground:"new 0 0 50 50",xmlSpace:"preserve",children:Object(kc.jsx)("path",{fill:"#000",d:"M43.935,25.145c0-10.318-8.364-18.683-18.683-18.683c-10.318,0-18.683,8.365-18.683,18.683h4.068c0-8.071,6.543-14.615,14.615-14.615c8.072,0,14.615,6.543,14.615,14.615H43.935z",children:Object(kc.jsx)("animateTransform",{attributeType:"xml",attributeName:"transform",type:"rotate",from:"0 25 25",to:"360 25 25",dur:"0.6s",repeatCount:"indefinite"})})})})})})},Uo=function(){var e=Object(Mo.f)(),t=Object(er.a)().i18n.language,a=Fn.getState().settings.language;O.a.useEffect((function(){a!==t&&Fn.dispatch(Object(T.Hb)(t))}),[]);var n=function(){var e=O.a.useState("PENDING"),t=Object(fe.a)(e,2),a=t[0],n=t[1],c=C(),r=c.account,o=c.updateAccount,i=c.resetAccount,s=(c.status,c.statusUnset,_e()),u=s.status,l=s.statusUnset,b=$(),p=b.status,v=b.statusUnset,j=Za(),h=j.updateSystem,k=j.status,x=j.statusUnset,g=re(),w=g.status,y=g.statusUnset,A=pn(),S=A.status,I=A.statusUnset,M=Qa(),N=M.status,T=M.statusUnset;return Jc(Object(f.a)(m.a.mark((function e(){var t,a,n,c,s,u;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(""===r.accAddress||!r.connectName||"unknown"===r.connectName){e.next=28;break}return e.prev=1,e.next=4,Ba.a[r.connectName](r.accAddress);case 4:if(o({}),!Ba.a.usedProvide||!Ba.a.usedWeb3){e.next=19;break}if(null===(t=Number(null===(a=Ba.a.usedProvide)||void 0===a||null===(n=a.connector)||void 0===n?void 0:n.chainId))||void 0===t){e.next=10;break}e.t0=t,e.next=15;break;case 10:return e.t1=Number,e.next=13,Ba.a.usedWeb3.eth.getChainId();case 13:e.t2=e.sent,e.t0=(0,e.t1)(e.t2);case 15:return c=e.t0,void 0===se.e[c]&&(c=r._chainId&&"unknown"!==r._chainId?r._chainId:se.e.MAINNET),h({chainId:c}),e.abrupt("return");case 19:e.next=26;break;case 21:e.prev=21,e.t3=e.catch(1),Ba.c.sendDisconnect("","error at init loading  ".concat(e.t3,", disconnect")),s=r._chainId&&"unknown"!==r._chainId?r._chainId:se.e.MAINNET,h({chainId:s});case 26:e.next=31;break;case 28:""!==r.accAddress&&"unknown"!==r.connectName||i(),u=r._chainId&&"unknown"!==r._chainId?r._chainId:se.e.MAINNET,h({chainId:u});case 31:case"end":return e.stop()}}),e,null,[[1,21]])}))),[]),O.a.useEffect((function(){switch(k){case d.M.PENDING:a!==d.M.PENDING&&n(d.M.PENDING);break;case d.M.ERROR:x(),n("ERROR");break;case d.M.DONE:x()}}),[k]),O.a.useEffect((function(){switch(u){case d.M.ERROR:l(),n("ERROR");break;case d.M.DONE:l()}switch(p){case d.M.ERROR:v(),n("ERROR");break;case d.M.DONE:v()}u===d.M.UNSET&&p===d.M.UNSET&&n("DONE")}),[u,p]),O.a.useEffect((function(){switch(w){case d.M.ERROR:case d.M.DONE:y()}}),[w]),O.a.useEffect((function(){switch(N){case d.M.ERROR:console.log("ERROR","get ticker error,ui"),T();break;case d.M.PENDING:break;case d.M.DONE:T()}}),[N]),O.a.useEffect((function(){switch(S){case d.M.ERROR:console.log("ERROR","get userRewards"),I();break;case d.M.PENDING:break;case d.M.DONE:I()}}),[S]),Eo({state:a}),{state:a}}().state;return Object(kc.jsxs)(kc.Fragment,{children:[Object(kc.jsx)(Io.a,{styles:Object(No.b)(Do||(Do=Object(i.a)([" \n      ",";\n      body{\n          ","\n      }\n      body:before {\n        ","\n      }\n      //#root{\n      //  display: flex;\n      //  flex-direction: column;\n      //}\n}"])),Object(d.kb)({theme:e}),"dark"===e.mode?"\n            color: ".concat(e.colorBase.textPrimary,";\n          "):"","dark"===e.mode?"\n            background: var(--color-global-bg);\n       ":"")}),"PENDING"===n?Object(kc.jsx)(Bo,{}):"ERROR"===n?Object(kc.jsx)(Ro,Object(o.a)({},d.u.NO_NETWORK_ERROR)):Object(kc.jsx)(kc.Fragment,{children:Object(kc.jsx)(So,{})})]})},Fo=a(1745),Ko=a(187),Wo=a(1696),Vo=a(1697),Ho=a(876),Jo=O.a.memo((function(e){var t=e.children,a=[Object(d.qb)(n.a,{store:Fn}),Object(d.qb)(Ko.b,{dateAdapter:Wo.a}),Object(d.qb)(Vo.a,{i18n:d.pb})];return Object(kc.jsx)(d.J,{providers:a,children:t})})),Go=O.a.memo((function(e){var t=e.children,a=Object(T.Rb)().themeMode,n=[Object(d.qb)(Fo.a,{theme:Object(d.ib)(a)}),Object(d.qb)(Mo.c,{theme:Object(d.ib)(a)}),Object(d.qb)(Ho.a,{persistor:Un,loading:null})];return Object(kc.jsx)(d.J,{providers:n,children:t})}));r.a.render(Object(kc.jsx)(Jo,{children:Object(kc.jsx)(Go,{children:Object(kc.jsx)(Uo,{})})}),document.getElementById("root"))}},[[1581,8,4,2,3,1,6,7,5]]]);
//# sourceMappingURL=main~06837ae4.96337598.chunk.js.map