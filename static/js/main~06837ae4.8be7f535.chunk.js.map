{"version":3,"sources":["utils/obj_tools.ts","stores/Amm/AmmMap/hook.ts","defs/common_defs.ts","stores/account/reducer.ts","stores/account/hook.ts","stores/global/actions.ts","stores/Amm/AmmActivityMap/reducer.ts","stores/Amm/AmmActivityMap/hook.ts","stores/apis/api.ts","stores/Amm/AmmActivityMap/saga.ts","stores/Amm/AmmMap/saga.ts","stores/Amm/index.ts","utils/swap_utils.ts","stores/token/saga.ts","stores/ticker/saga.ts","stores/system/interface.ts","stores/system/reducer.ts","stores/walletLayer1/reducer.ts","stores/walletLayer1/hook.ts","services/socketUtil.ts","services/tickerService.ts","services/ammPoolService.ts","stores/system/saga.ts","stores/walletLayer1/saga.ts","stores/walletLayer2/reducer.ts","stores/walletLayer2/saga.ts","stores/userRewards/reducer.ts","stores/userRewards/saga.ts","stores/socket/saga.ts","stores/account/saga.ts","stores/rootSaga.ts","stores/system/hook.ts","utils/log_tools.ts","stores/walletLayer2/hook.ts","stores/userRewards/hook.ts","stores/localStore/confirmation/reducer.ts","stores/localStore/favoriteMarket/reducer.ts","stores/localStore/onchainHashInfo/reducer.ts","stores/localStore/index.ts","stores/index.ts","hooks/help/volumeToCount.ts","hooks/help/ammPairDetail.ts","hooks/help/coinPairInit.ts","layouts/connectStatusCallback.tsx","hooks/help/makeCache.ts","utils/formatter_tool.ts","hooks/help/makeUIAmmActivityMap.ts","hooks/help/makeMyPoolDetail.ts","hooks/help/makeTickView.ts","hooks/help/makeWallet.ts","hooks/help/marketTable.ts","hooks/help/pairDetail.ts","layouts/header/index.tsx","layouts/header/hook.tsx","pages/QuotePage/hook.ts","pages/styled.ts","pages/QuotePage/index.tsx","stores/localStore/favoriteMarket/hook.ts","hooks/common/useCustomDCEffect.ts","pages/SwapPage/panel/BasicInfoPanel/hook.tsx","storage/index.ts","pages/SwapPage/panel/BasicInfoPanel/index.tsx","pages/SwapPage/panel/TradePanel/index.tsx","pages/SwapPage/hook.ts","pages/SwapPage/index.tsx","provider/dev-wrapper/index.tsx","provider/global/index.tsx","pages/Layer2Page/TxPanel/index.tsx","pages/Layer2Page/TxPanel/hooks.ts","pages/Layer2Page/AssetPanel/index.tsx","modal/useModals.ts","pages/Layer2Page/TradePanel/index.tsx","pages/Layer2Page/TradePanel/hooks.ts","pages/Layer2Page/AmmPanel/index.tsx","pages/Layer2Page/AmmPanel/hook.ts","services/account/command.ts","pages/SettingPage/index.tsx","pages/SettingPage/hook.ts","pages/Layer2Page/index.tsx","pages/LiquidityPage/PoolsPanel/index.tsx","pages/LiquidityPage/AmmPanel/index.tsx","pages/LiquidityPage/AmmPanel/hooks.ts","pages/LiquidityPage/CoinPairPanel/hooks.ts","pages/LiquidityPage/CoinPairPanel/index.tsx","pages/LiquidityPage/AmmMining/index.tsx","pages/LiquidityPage/AmmMining/hook.ts","pages/LiquidityPage/MyLiquidity/hook.ts","pages/LiquidityPage/MyLiquidity/index.tsx","pages/LiquidityPage/index.tsx","pages/LiquidityPage/hook.ts","modal/WalletModal/index.tsx","services/account/activeAccount.ts","services/account/walletLayer2Services.ts","services/account/lockAccount.ts","services/account/unlockAccount.ts","modal/useDeposit.ts","modal/AccountModal/index.tsx","modal/useChargeFees.ts","modal/useAccountModal.tsx","services/account/useAccountHook.ts","modal/index.tsx","modal/useTransfer.ts","modal/useWithdraw.ts","routers/index.tsx","services/account/networkUpdate.ts","services/account/checkAccount.ts","hookAccountInit.ts","hookConnect.tsx","pages/ErrorPage/index.tsx","utils/dt_tools.ts","pages/LoadingPage/index.tsx","App.tsx","hook.ts","index.tsx","stores/Amm/AmmMap/reducer.ts","stores/socket/reducer.ts","stores/ticker/reducer.ts","stores/token/reducer.ts","stores/ticker/hook.ts","stores/socket/hook.ts","pages/LiquidityPage/PoolsPanel/hook.ts","stores/token/hook.ts"],"names":["deepClone","data","Object","undefined","result","constructor","key","hasOwnProperty","copyToClipBoard","text","a","document","execCommand","textarea","createElement","body","appendChild","value","select","removeChild","navigator","clipboard","writeText","window","clipboardData","setData","console","log","useAmmMap","ammMap","useSelector","state","amm","dispatch","useDispatch","statusUnset","React","useCallback","getAmmMap","Theme","LangType","SystemStatus","MODAL_TYPE","ActionResultCode","initialState","accAddress","readyState","AccountStatus","UN_CONNECT","accountId","apiKey","eddsaKey","publicKey","level","nonce","keyNonce","connectName","ConnectProviders","unknown","_chainId","status","errorMessage","accountSlice","createSlice","name","reducers","updateAccountStatus","action","SagaStatus","PENDING","changeShowModel","_userOnModel","payload","nextAccountStatus","error","ERROR","wrongChain","DONE","cleanAccountStatus","UNSET","actions","useAccount","account","resetAccount","props","updateAccount","shouldShow","useMemo","setShouldShow","flag","statusUnsetFunc","REFRESH_RATE","TOAST_TIME","updateVersion","createAction","ammActivityMapSlice","ammActivityMap","getAmmActivityMap","getAmmActivityMapStatus","useAmmActivityMap","getChainId","store","getState","system","chainId","userAPI","UserAPI","exchangeAPI","ExchangeAPI","ammpoolAPI","AmmpoolAPI","LoopringAPI","walletAPI","wsAPI","InitApi","WalletAPI","WsAPI","getPostsSaga","ammActivityMapSaga","getAmmActivityMapApi","getAmmPoolActivityRules","groupByRuleTypeAndStatus","call","put","all","takeLatest","updateRealTimeSaga","ammMapInitSaga","ammMapRealTimeSaga","setAmmState","ammPoolState","keyPair","idIndex","tokenMap","match","coinA","coinB","forex","faitPrices","amountDollar","parseFloat","liquidityUSD","amountYuan","totalLPToken","volumeToCount","lpLiquidity","totalA","liquidity","totalB","rewardValue","rewards","tokenId","volume","rewardToken","rewardValue2","rewardToken2","feeA","volumeToCountAsBigNumber","fees","feeB","feeDollar","toBig","times","price","plus","feeYuan","toNumber","tradeFloat","change","timeUnit","APY","parseInt","apyBips","getAmmMapApi","ammpools","getAmmPoolStats","ammPoolStats","__timer__","clearInterval","setInterval","updateRealTimeAmmMap","coinMap","Reflect","ownKeys","forEach","item","market","tokens","pooled","dataItem","isNew","Date","now","Number","createdAt","isActivity","address","__rawConfig__","getAmmMapStatus","map","replace","ammMapSaga","fork","ammReducer","combineReducers","ammMapSlice","reducer","ammForks","getIconByTokenInfo","token","addr","utils","getAddress","tokenInitSaga","getTokenMapApi","tokensMap","pairs","marketArr","tokenArr","totalCoinMap","addressIndex","symbol","coinInfo","icon","simpleName","description","company","startsWith","tokenList","tradePairs","marketArray","marketCoins","marketMap","getTokenMapStatus","getTokenMap","tokenSaga","tickerSaga","tickersSaga","getTickersApi","list","getMixTicker","join","tickers","makeTickerMap","tickerMap","tickMap","tickerKey","tickerKeys","length","getTickerStatus","CustomError","ErrorMap","NO_TOKEN_KEY_LIST","getTicker","getTickers","ENV","NETWORKEXTEND","tickerForks","env","PROD","baseURL","socketURL","etherscanUrl","gasPrice","exchangeInfo","topics","systemSlice","updateSystem","updateRealTimeObj","getSystemStatus","setTopics","walletLayer1","walletLayer1Slice","updateWalletLayer1","reset","getWalletLayer1Status","useWalletLayer1","resetLayer1","SocketEventType","subject","Subject","tickerService","_tickerMap","next","asObservable","ammPoolService","ammPoolMap","LoopringSocket","url","_socketCallbackMap","_loopringSocket","__wsTimer__","timer","count","_baseUrl","socketSendMessage","socket","clearInitTimer","resetSocketEvents","makeMessageArray","isConnectSocket","socketConnect","send","makeTopics","socketClose","SOCKET_ERROR","ws","Promise","reolve","onclose","e","reason","close","resolve","removeSocketEvents","eventType","ticker","getTickerArg","addSocketEvents","getAccountArg","order","getOrderArg","orderbook","getOrderBookArg","trade","getTradeArg","candlestick","getCandlestickArg","ammpool","getAmmpoolArg","op","unsubscribeAll","JSON","stringify","type","deps","fn","SocketEventMap","self","getWsKey","wsKey","WebSocket","onopen","warn","OPEN","onmessage","pingpong","parse","topic","setTimeout","this","onerror","err","init","clearTimeout","_e","timestamp","size","open","high","low","bid","ask","base","quote","base_token_volume","quote_token_volume","minus","div","base_fee_amt","quote_fee_amt","poolName","poolAddress","risky","lp","instance","loopringSocket","getUpdateSystem","systemSaga","initConfig","getTokens","tokenSymbolMap","getAmmPoolConf","getMixMarkets","markets","take","delay","accountStatusUnset","getSystemsApi","location","hostname","DEV","ChainId","GORLI","UAT","MAINNET","NONETWORK","NO_NETWORK_ERROR","getExchangeInfo","getFiatPrice","legal","fiatPrices","faitPricesY","getGasPrice","process","systemForks","walletLayer1Saga","getWalletLayer1Balance","exchangeApi","getEthBalances","owner","ethBalance","getTokenBalances","tokenBalances","reduce","prev","belong","fromWEI","walletLayer1Fork","walletLayer2","walletLayer2Slice","updateWalletLayer2","getWalletLayer2Status","walletLayer2Saga","getWalletLayer2Balance","userApi","getUserBalances","userBalances","walletLayer2Fork","userRewardsMap","userRewardsMapSlice","getUserRewards","getUserRewardsStatus","userRewardsSaga","getUserRewardsApi","getAmmPoolUserRewards","then","ammUserRewardMap","reject","userRewardsForks","closeSocket","sendMessage","socketEndSaga","socketSendMessageSaga","getSocketStatus","socketEnd","sendSocketTopic","socketForks","accountUpdateSaga","cleanAccountSaga","accountSage","accountRestSage","shouldUpdateProvider","connectProvides","clear","accountFork","mySaga","useSystem","myLog","message","myError","useWalletLayer2","resetLayer2","delayAndUpdateWalletLayer2","getTime","_","useUserRewards","confirmationSlice","confirmed","confirm","favoriteMarketSlice","clearAll","removeMarket","pair","includes","index","findIndex","_pair","splice","addMarket","push","addMarkets","depositHash","withdrawHash","onchainHashInfoSlice","clearDepositHash","updateDepositHash","localStoreReducer","favoriteMarket","onchainHashInfo","confirmation","sagaMiddleware","createSagaMiddleware","socketSlice","settings","settingsSlice","modals","modalsSlice","tokenMapSlice","tickerMapSlice","localStore","PERSISTED_KEYS","configureStore","middleware","getDefaultMiddleware","thunk","serializableCheck","save","states","devTools","enhancers","reduxBatch","preloadedState","load","setLanguage","language","setCoinJson","imgConfig","run","volumn","decimals","ammPairInit","_ammCalcData","ammType","walletMap","tickerData","ammPoolsBalance","coinInfoMap","AtoB","isNaN","baseVol","coinAInfo","quoteVol","coinBInfo","toFixed","myCoinA","balance","myCoinB","coinACount","coinBCount","lpCoin","lpCoinA","lpCoinB","coinPairInit","coinKey","_tradeCalcData","sell","buy","coinSell","ele","coinBuy","accountStaticCallBack","onclickMap","args","apply","bntLabel","fnType","ERROR_NETWORK","DEFAULT","ACTIVATED","LOCKED","btnClickMap","setShowConnect","isShow","step","WalletConnectStep","Provider","NO_ACCOUNT","setShowAccount","AccountStep","NoAccount","DEPOSITING","Depositing","HadAccount","makeCache","__cache__","customSlippage","setSlippage","getTokenInfo","VolToNumberWithPrecision","rawVal","tokenInfo","trim","sdk","precision","makeUIAmmActivityMap","myReward","ammPoolActivityStatus","ammActivityViewMap","ammPoolActivityRule","awardRules","totalRewards","myRewards","AmmPoolActivityStatus","InProgress","currentRewards","duration","from","rangeFrom","to","rangeTo","isPass","EndOfGame","makeAsCard","_ammInfo","itemArray","activity","getOneRewardInfo","reward","reward2","rewardDollar","rewardYuan","balanceA","balanceB","balanceDollar","balanceYuan","ammUserReward","snapShotData","feeRewards","ratio","BigNumber","ammDetail","makeMyAmmWithSnapshot","_walletMap","makeMyPoolRowWithPoolState","_myAmm","makeMyAmmWithStat","makeTickView","tick","floatTag","FloatTag","none","increase","decrease","_tradeFloat","priceYuan","priceDollar","closeDollar","closeYuan","qPrice","changeDollar","changeYuan","__rawTicker__","makeWalletLayer2","total","locked","countBig","pending","withdraw","toString","detail","getUserTrades","marketKey","response","userTrades","makeMarketArray","marketTrades","tradeArray","currency","feeKey","side","Buy","Sell","TradeTypes","amount","fee","time","tradeTime","getUserAmmTransaction","getUserAmmPoolTxs","userAmmPoolTxs","makeMyAmmMarketArray","marketTransaction","lpToken","txType","JOIN","AmmTradeType","add","remove","totalDollar","totalYuan","amountA","poolTokens","actualAmount","amountB","updatedAt","txStatus","pairDetailBlock","ammKey","getAmmPoolSnapshot","ammPoolSnapshot","NO_SDK","pairDetailDone","stob","poolVolumn","getBaseQuote","poolBaseTokenVol","quoteBaseTokenVol","NO_SUPPORT_PAIR","StoB","BtoS","sellCoinInfoMap","buyCoinInfoMap","Header","rest","useLocation","useSettings","setTheme","themeMode","accountState","accountStatus","useOpenModals","_btnClickMap","assign","onWalletBtnConnect","onThemeBtnClick","dark","light","onLangBtnClick","lang","useEffect","headerToolBarData","ButtonComponentsMap","WalletConnect","handleClick","Language","handleChange","forceUpdate","useReducer","headerMenuData","useHeader","selected","pathname","headerRoot","Toolbar","OnePageSize","StylePaper","styled","Box","theme","colorBase","background","default","unit","TableWrapStyled","Grid","TablePaddingX","pLeft","pRight","TableFilterParams","RowStyled","SearchWrapperStyled","TabsWrapperStyled","QuotePage","withTranslation","useState","candlestickList","setCandlestickList","ammPoolBalances","setAmmPoolBalances","tableTabValue","setTableTabValue","filteredData","setFilteredData","searchValue","setSearchValue","swapRankingList","setSwapRankingList","tableHeight","setTableHeight","useFavoriteMarket","t","getSwapRankingList","res","groupByRuleType","SWAP_VOLUME_RANKING","getCandlestick","getMixCandlestick","interval","TradingInterval","d1","limit","candlesticks","o","timeStamp","sign","useTicker","tickerStatus","tickerStatusUnset","updateTickers","useSocket","recommendedPairs","setRecommendedPairs","tickList","setTickList","recommendations","setRecommendations","focusRowFrom","startIndex","updateRecommendation","recommendationIndex","subscription","subscribe","unsubscribe","getRecommandPairs","getRecommendedMarkets","recommended","socketSendTicker","updateRawData","marketPairs","_recommendationsFloat","defaultRecommendationsFloat","_tickList","keys","_item","m","filter","filteredFloat","concat","slice","_recommendations","debounce","_startIndex","WsTopicType","globalSetup","wait","useQuote","getCurrentHeight","innerHeight","addEventListener","removeEventListener","getAmmPoolBalances","ammRes","fomattedRes","raw_data","history","useHistory","getFilteredTickList","find","handleTableFilterChange","keyword","cloneDeep","favourite","ranking","formattedKeyword","toLocaleLowerCase","toLowerCase","handleRowClick","row","tradePair","handleTabChange","_event","newValue","handleSearchChange","display","flexDirection","flex","container","chartData","sort","b","xs","onClick","marginY","paddingBottom","Tabs","onChange","Tab","label","Divider","onRowClick","col","rawData","addFavoriteMarket","removeFavoriteMarket","currentHeight","showLoading","useCustomDCEffect","useDeepCompareEffect","toggleData","ChartType","Trend","Depth","CONSTANTS","BasicInfoPanel","tgItemJSXs","tlabel","JSX","getExistedMarket","chartType","setChartType","ChartUnit","D1","chartUnit","setChartUnit","originData","setOriginData","tgItemJSXsPriceChart","pre","tGItemData","mounted","request","date","moment","format","dumpError400","getMixDepth","depth","bidsPrices","bids_prices","bidsAmtTotals","bids_amtTotals","asksPrices","asks_prices","asksAmtTotals","asks_amtTotals","handleChartUnitChange","event","mappedValue","H1","W1","useBasicInfo","upColor","baseToken","quoteToken","trendChartData","depthChartData","amt","justifyContent","alignItems","exclusive","position","minHeight","maxHeight","style","height","width","riseColor","extraInfo","handleMove","showXAxis","applyProps","id","StyledTabsWrapper","TradePanel","FormControlLabel","myTradeArray","setValue","useSwapPage","useTranslation","swapToastOpen","setSwapToastOpen","swapAlertText","setSwapAlertText","useRouteMatch","useTokenMap","walletLayer2Status","tradeData","setTradeData","tradeCalcData","setTradeCalcData","setTradeArray","setMyTradeArray","setTradeFloat","setPair","setAmmPoolSnapshot","swapBtnI18nKey","setSwapBtnI18nKey","output","setOutput","takerRate","setTakerRate","feeBips","setFeeBips","setBaseMinAmt","quoteMinAmt","setQuoteMinAmt","TradeBtnStatus","DISABLED","btnStatus","setBtnStatus","isSwapLoading","setIsSwapLoading","isValidAmt","setIsValidAmt","LOADING","AVAILABLE","useSwapBtnStatusCheck","ammInfo","req","getMinimumTokenAmt","amountMap","baseMinAmtInfo","quoteMinAmtInfo","userOrderInfo","totalFee","minAmount","params","resetSwap","_myTradeArray","swapCalculatorCallback","slippage","sellTokenId","getNextStorageId","storageId","exchange","exchangeAddress","orderId","sellToken","amountS","buyToken","amountBOutSlip","minReceived","allOrNone","validUntil","VALID_UNTIL","maxFeeBips","fillAmountBOrS","orderType","OrderType","ClassAmm","eddsaSignature","submitOrder","sk","tradeValue","swapBtnClickArray","onSwapClick","handleSwapPanelEvent","swapData","switchType","SwapType","SEll_CLICK","BUY_CLICK","SELL_SELECTED","BUY_SELECTED","EXCHANGE_CLICK","setDepth","updateDepth","handler","calculateTradeData","_tradeData","input","isAtoB","ammMapRaw","priceImpact","minimumReceived","minReceivedVal","validAmt","amountBOut","gte","throttleSetValue","_ammPoolSnapshot","td","_tradeArray","apiList","getMarketTrades","_td","catch","TRADE_LITE_SET_PAIR_ERROR","options","FixedStyle","SwapPage","pairNameList","split","Array","isArray","customPair","renderPair","alertText","autoHideDuration","setOpen","marginRight","alignContent","minWidth","swapBtnStatus","DevWrapper","children","Fragment","WindowEvent","UserStorage","depositsHash","localStorage","getItem","DepositHash","removeItem","connectionName","setItem","ConnectorName","rawHandler","sessionStorage","Handler","dateTimeStr","ActiveTime","tmpDt","SESSION_TIMEOUT_SECONDS","rawId","AccountId","Account","Apikey","apikey","Eddsakey","eddsakey","orderHash","AmmOrder","current","HardwareAddresses","events","Click","Scroll","forceReset","checkTimeout","GlobalProvider","TxPanel","useRef","pageSize","setPageSize","txs","setTxs","isLoading","setIsLoading","getTxnStatus","TransactionStatus","processing","processed","received","failed","getUserTxnList","getUserTranferList","getUserDepositHistory","getUserOnchainWithdrawalHistory","userTxnList","userTransferMapped","userTransfers","TransactionTradeTypes","transfer","feeTokenSymbol","feeAmount","memo","txnHash","hash","userDepositMapped","userDepositHistory","deposit","txHash","userWithdrawMapped","userOnchainWithdrawalHistory","mappingList","sortedMappingList","useGetTxs","txTableData","offsetHeight","Math","floor","ref","className","pagination","showFilter","StyledChartWrapper","StyledBtnGroupWrapper","AssetPanel","chartPeriod","setChartPeriod","setChartData","assetsList","setAssetsList","getUserTotalAssets","getUserAssets","wallet","assetType","AssetType","DEX","userAssets","assetsKeyList","assetsDetailList","values","showDeposit","defaultProps","isNoAccount","title","setShowDeposit","showTransfer","setShowTransfer","showWithdraw","setShowWithdraw","setShowResetAccount","useModals","onShowDeposit","onShowTransfer","onShowWithdraw","lpTokenJump","handleChartPeriodChange","tokenPriceList","entries","formattedData","tokenPriceUSDT","ammToken","tokenValue","totalLpToken","lpTotalData","formattedDoughnutData","AssetTitleProps","assetInfo","totalAsset","priceTag","PriceTag","Dollar","assetsRawData","TokenType","single","String","EmptyValueTag","available","smallBalance","marginTop","Paper","component","Typography","color","variant","showFiliter","onLpDeposit","onLpWithdraw","setUserTrades","setShowLoading","getUserTradeList","marketList","Side","useGetTrades","AmmPanel","ammRecordList","setAmmRecordList","getTokenName","getAmmpoolList","AmmTxType","AmmSideTypes","Join","Exit","lpTokenAmount","useGetAmmRecord","Commands","ErrorType","ProcessingType","StyledPaper","StyledSwitch","Switch","textPrimary","border","success","backgroundColor","opacity","BtnCurrency","Currency","dollar","setState","_handleChange","target","IconComponent","DropDownIcon","labelId","autoWidth","yen","StyledDivider","SettingPanel","focus","i18n","useTheme","setUpColor","setCurrency","exportAccInfo","accInfo","publicX","x","publicY","y","privateKey","exportFromJSON","fileName","exportType","useExportAccoutInfo","direction","flexWrap","paddingLeft","paddingY","paddingX","marginBottom","alignSelf","changeLanguage","Trans","i18nKey","textTransform","UpColor","green","up","down","checked","red","subMenu","subMenuLayer2","BtnConnect","defaultFrame","c_key","withRef","setLabel","_bntLabel","fullWidth","maxWidth","SubMenuList","BasicSubMenuList","Layer2Page","viewTemplate","PoolsPanel","useAmmMapUI","updateTickersUI","page","handlePageChange","AmmPanelView","ammToastOpen","setAmmToastOpen","ammAlertText","setAmmAlertText","ammCalcData","setAmmCalcData","nodeTimer","ammJoinData","setAmmJoinData","ammExitData","setAmmExitData","ammDepositBtnI18nKey","setAmmDepositBtnI18nKey","ammWithdrawBtnI18nKey","setAmmWithdrawBtnI18nKey","initAmmData","setAmmPoolSnapShot","updateAmmPoolSnapshot","request1","joinFees","setJoinFees","exitFees","setExitfees","feeToken","requestJoin","requestType","OffchainFeeReqType","AMM_JOIN","tokenSymbol","getOffchainFeeAmt","feesJoin","feeJoin","requestExit","AMM_EXIT","feesExit","feeExit","joinRequest","setJoinRequest","handlerJoinInDebounce","slippageReal","marketInfo","coinA_TV","coinB_TV","covertVal","rawA","rawB","makeJoinAmmPoolRequest","joinTokens","precisionForPrice","handleJoinAmmPoolEvent","addToAmmCalculator","setJoinLoading","patch","ammName","request2","storageId0","request_1","storageId1","storageIds","offchainId","joinAmmPool","onAmmDepositClickMap","onAmmAddClick","exitRequest","setExitRequest","handleExitInDebounce","makeExitAmmPoolRequest","exitTokens","unPooled","handleExitAmmPoolEvent","isJoinLoading","isExitLoading","setExitLoading","removeAmmCalculator","burnedReq","burned","exitAmmPool","removeAmmClickMap","onAmmRemoveClick","useAmmPanel","AmmPanelType","Deposit","ammDepositData","ammWithdrawData","handleAmmAddChangeEvent","handleAmmRemoveChangeEvent","tabSelected","ammDepositBtnStatus","ammWithdrawBtnStatus","makeAmmDetailExtendsActivityMap","ammActivity","BoxStyled","fontDefault","h4","BoxTopStyled","CoinPairPanel","ammMapStatus","useUserRewardsStatus","setWalletMap","ammMarketArray","myAmmMarketArray","setMyAmmMarketArray","setAmmUserRewardMap","setSnapShotData","myAmm","setMyAmm","coinPairInfo","setCoinPairInfo","pairHistory","setPairHistory","walletLayer2DoIt","getPairList","ammList","formattedPairHistory","_coinPairInfo","_snapShotData","Error","useCoinPair","tabIndex","setPage","_handlePageChange","coinJson","coinAIcon","coinBIcon","Breadcrumbs","Link","href","getThousandFormattedNumbers","imgx","imgy","imgheight","imgwidth","alt","src","Avatar","lineHeight","marginLeft","Yuan","AmmCardWrap","forwardRef","AmmList","jumpTo","sm","lg","AmmMiningView","ammProps","userRewardsMapState","setAmmActivityViewMap","ammActivityPastViewMap","setAmmActivityPastViewMap","NotStarted","useAmmMiningUI","setTabIndex","spacing","useOverview","ammMapState","summaryReward","setSummaryReward","myPoolRow","setMyPoolRow","makeMyPoolRow","walletKey","test","rowData","_myPoolRow","makeSummaryMyAmm","StyleWrapper","MyLiquidity","JumpToLiqudity","padding","margin","handleDeposit","handleWithdraw","subMenuLiquidity","LiquidityPage","ammActivityMapStatus","_ammActivityMap","setAmmActivityMap","useAmmPool","matchPair","ModalWalletConnectPanel","onClose","isShowConnect","qrCodeUrl","setQrCodeUrl","stateCheck","setStateCheck","metaMaskCallback","MetaMask","usedProvide","usedWeb3","eth","walletConnectCallback","processingCallback","setProcessingCallback","callback","gatewayList","DefaultGatewayList","handleSelect","walletServices","sendDisconnect","MetaMaskProcessing","WalletConnectProcessing","handleProcessing","opts","WalletConnectQRCode","copyToastOpen","setCopyToastOpen","useConnectHook","walletList","providerName","onCopy","SuccessConnect","FailedConnect","onRetry","panelList","severity","updateAccountFromServer","code","NoError","feeMap","getAccount","formatedPx","formatedPy","maxFee","updateAccountResponse","UpdateAccoutError","GenEddsaKeyError","GetAccError","walletLayer2Services","sendSign","ProcessSign","sendErrorUnlock","ErrorSign","sendUpdateAccStatusAndReset","ErrorNetwork","sendCheckAccount","sendAccountLock","updateInfo","tags","LockAccount","sendActiveAccountDeposit","sendAccountSigned","publicKeyX","publicKeyY","AccountUnlocked","sendNoAccount","sendNeedUpdateAccount","ProcessDeposit","ethAddress","ProcessAccountCheck","onSocket","lockAccount","unlockAccount","generateKeyPair","toHex","secretKey","getUserApiKey","useDeposit","isNewAccount","depositValue","setDepositValue","inputValue","gasLimit","gasAmounts","isMetaMask","realGasPrice","toUpperCase","TokenAccessProcess","getAllowances","tokenAllowances","allowance","curValInWei","gt","depositAddress","ApproveFailed","FailedTokenAccess","realChainId","response2","DepositFailed","FailedDeposit","DataNotReady","onDepositClick","depositProps","depositBtnStatus","ModalAccountInfo","isShowAccount","openQRCode","setOpenQRCode","addressShort","getShortAddr","onSwitch","onViewQRCode","onDisconnect","goDeposit","goUpdateAccount","ActiveAccountProcess","SuccessUnlock","sleep","unlockBtn","lockBtn","accountList","_height","_width","etherscanLink","SignAccount","goActiveAccount","ProcessUnlock","FailedUnlock","mainBtn","DepositApproveProcess","ActiveAccountFailed","useChargeFees","chargeFeeList","setChargeFeeList","feeRaw","__raw__","useAccountModal","statusAccountUnset","handleErrorAccount","handleLockAccount","handleNoAccount","handleDepositingAccount","handleErrorApproveToken","handleErrorDepositSign","handleProcessDeposit","handleSignAccount","handleSignError","handleProcessSign","handleProcessAccountCheck","handleAccountActive","useAccountHook","ModalGroup","transferProps","transferValue","setTransferValue","TRANSFER","tranferFeeInfo","setTransferFeeInfo","payeeAddr","setPayeeAddr","onTransferClick","transferVol","payerAddr","payerId","payeeId","submitInternalTransfer","handlePanelEvent","handleFeeChange","transferBtnStatus","chargeFeeToken","chargeFeeTokenList","handleOnAddressChange","handleAddressError","_value","useTransfer","withdrawProps","withdrawValue","setWithdrawValue","walletMap2","setWalletMap2","OFFCHAIN_WITHDRAWAL","withdrawAddr","setWithdrawAddr","withdrawFeeInfo","setWithdrawFeeInfo","withdrawType","setWithdrawType","withdrawToken","withdrawVol","submitOffchainWithdraw","extraData","minGas","withdrawType2","FAST_OFFCHAIN_WITHDRAWAL","withdrawBtnStatus","withdrawTypes","WithdrawTypes","onWithdrawClick","handleWithdrawTypeChange","offchainType","WithdrawType","Fast","useWithdraw","withDrawProps","resetProps","swapProps","RouterView","Container","exact","path","networkUpdate","reload","checkAccount","newAccAddress","useAccountInit","stateAccount","setStateAccount","handleConnect","accounts","networkFlag","handleAccountDisconnect","handleError","errorObj","useConnect","walletLayer1Status","wallet1statusUnset","wallet2statusUnset","StyleBox","ErrorPage","messageKey","textAlign","left","top","email","CONTACT_US_EMAIL","getContactInfo","preventDefault","primaryLight","LoadingPage","version","xmlns","xmlnsXlink","viewBox","enableBackground","xmlSpace","fill","d","attributeType","attributeName","dur","repeatCount","App","tokenMapStatus","tokenMapStatusUnset","ammMapStatusUnset","systemStatus","systemStatusUnset","ammActivityMapStatusUnset","connector","useInit","GlobalStyles","styles","css","globalCss","mode","bg","providers","provider","LocalizationProvider","dateAdapter","MomentUtils","I18nextProvider","MuThemeProvider","getTheme","ThemeProvider","ReactDOM","render","getElementById","updateTicker","setRawData","setTimestamp","_ammMap","tickerMapKey","NO_TOKEN_MAP","updateTickerLoop","_keys","setImmediate","_page","i"],"mappings":"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","file":"static/js/main~06837ae4.8be7f535.chunk.js","sourcesContent":["import { debug } from \"console\"\n\nexport function deepClone(data: any) {\n    if (!data || !(data instanceof Object) || (typeof data == \"function\")) {\n        return data || undefined\n    }\n    let constructor = data.constructor\n    let result = new constructor()\n    for (let key in data) {\n        if (data.hasOwnProperty(key)) {\n            result[key] = deepClone(data[key])\n        }\n    }\n    return result\n}\n\nexport async function copyToClipBoard(text: string){ //\n\n    if(document.execCommand){\n        var textarea =document.createElement('textarea')\n        document.body.appendChild(textarea)\n        textarea.value=text\n        textarea.select()\n        document.execCommand(\"copy\")\n        document.body.removeChild(textarea)\n\t}\n\n    if (navigator.clipboard) {\n        await navigator.clipboard.writeText(text)\n    }\n\n\tif((window as any).clipboardData) {\n        (window as any).clipboardData.setData(\"Text\", text)\n\n        console.log('clipboardData:', text)\n        return true\n    }\n\treturn false\n}","import { useDispatch, useSelector } from 'react-redux'\nimport { AmmMapStates } from './interface';\nimport React from 'react';\nimport { getAmmMap, statusUnset } from './reducer';\n\nexport const useAmmMap = <R extends {[key:string]:any},I extends {[key:string]:any}>(): AmmMapStates<R,I> & {\n    getAmmMap:()=> void,\n    statusUnset:()=> void,\n} => {\n    const ammMap:AmmMapStates<R,I>= useSelector((state: any) => state.amm.ammMap)\n    const dispatch = useDispatch();\n    return {\n        ...ammMap,\n        statusUnset:React.useCallback(()=>dispatch(statusUnset(undefined)),[dispatch]),\n        getAmmMap:React.useCallback(()=>dispatch(getAmmMap(undefined)),[dispatch]),\n    }\n}\n","export enum Theme {\n    dark = 'dark',\n    light = 'light',\n}\n\nexport enum LangType {\n    en = 'en_US',\n    cn = 'zh_CN',\n}\n\nexport enum SystemStatus {\n    NORMAL,\n    ERROR,\n    UNKNOWN,\n}\n\nexport enum MODAL_TYPE {\n    UNKNOWN,\n    LOADING,\n    WALLET,\n}\n\n\nexport enum ActionResultCode {\n    NoError,\n    DataNotReady,\n    GetAccError,\n    GenEddsaKeyError,\n    UpdateAccoutError,\n    ApproveFailed,\n    DepositFailed,\n}\n\nexport interface ActionResult {\n    code: ActionResultCode\n    data?: any\n}\n\nexport const REFRESH_RATE = 1000\n\nexport const REFRESH_RATE_SLOW = 10000\n\nexport const UPDATE_ACC_DELAY = 2500\n\nexport const TOAST_TIME = 3000\n\nexport const SHORT_INTERVAL = 200\n","import { createSlice, PayloadAction, Slice } from '@reduxjs/toolkit'\nimport { SliceCaseReducers } from '@reduxjs/toolkit/src/createSlice';\nimport { Account, AccountState, AccountStatus, ConnectProviders, SagaStatus } from '@loopring-web/common-resources';\nimport { connectProvides, walletServices } from '@loopring-web/web3-provider';\n\n// import { Lv2Account, } from 'defs/account_defs'\n// import { AccountStatus } from 'state_machine/account_machine_spec'\n// import { UserStorage } from 'storage'\n// const initialState = (initState:Partial<AccountState>) => {\n//   // const defaultAccId = process.env.REACT_APP_TEST_ACCOUND_ID ? process.env.REACT_APP_TEST_ACCOUND_ID : UserStorage.getAccountId()\n//   // const defaultApiKey = process.env.REACT_APP_TEST_API_KEY ? process.env.REACT_APP_TEST_API_KEY : UserStorage.getApikey()\n//   // const defaultOwner = process.env.REACT_APP_TEST_OWNER ? process.env.REACT_APP_TEST_OWNER : UserStorage.getAccount()\n//   // const defaultEddsaKey = process.env.REACT_APP_TEST_EDDSA_KEY ? process.env.REACT_APP_TEST_EDDSA_KEY : UserStorage.getEddsakey()\n//\n//   // const defaultStatus = AccountStatus.UNCONNNECTED\n//   // return {\n//   //   accAddr: defaultOwner,\n//   //   status: defaultStatus,\n//   //   accountId: defaultAccId,\n//   //   publicKey: {},\n//   //   nonce: 0,\n//   //   isContractAddress: false,\n//   //   apiKey: defaultApiKey,\n//   //   eddsaKey: defaultEddsaKey,\n//   //   connectName: ConnectorNames.unknown,\n//   //   connectNameTemp: ConnectorNames.unknown,\n//   // } as Lv2Account\n//   return {\n//     accAddress: '',\n//     status: AccountStatus.UN_CONNECT,\n//     accountId: '',\n//     apiKey: '',\n//     eddsaKey: '',\n//     connectName: ConnectProviders.UnKnow,\n//     // ...initState,\n//   }\n// }\nconst initialState: AccountState = {\n    accAddress: '',\n    readyState: AccountStatus.UN_CONNECT,\n    accountId: -1,\n    apiKey: '',\n    eddsaKey: '',\n    publicKey: {},\n    level: '',\n    nonce: undefined,\n    keyNonce: undefined,\n    connectName: ConnectProviders.unknown,\n    _chainId: 1,\n    status: 'PENDING',\n    errorMessage: null,\n\n}\n\nconst accountSlice: Slice<AccountState> = createSlice<AccountState, SliceCaseReducers<AccountState>>({\n    name: 'account',\n    initialState: initialState,\n    reducers: {\n        updateAccountStatus(state: AccountState, action: PayloadAction<Partial<Account>>) {\n            state.status = SagaStatus.PENDING\n        },\n        changeShowModel(state: AccountState, action: PayloadAction<{_userOnModel:boolean|undefined}>) {\n            const {\n                _userOnModel\n            } = action.payload;\n            state._userOnModel = _userOnModel;\n        },\n        nextAccountStatus(state: AccountState, action: PayloadAction<Partial<Account>>) {\n            // @ts-ignore\n            if (action.error) {\n                state.status = SagaStatus.ERROR\n                // @ts-ignore\n                state.errorMessage = action.error\n            } else {\n                const {\n                    accAddress,\n                    readyState,\n                    accountId,\n                    wrongChain,\n                    level,\n                    apiKey,\n                    eddsaKey,\n                    _chainId,\n                    nonce,\n                    connectName,\n                    // _userOnModel\n                } = action.payload;\n                \n                if (accAddress !== undefined) {\n                    state.accAddress = accAddress;\n                }\n                if(wrongChain !== undefined){\n                    state.wrongChain = wrongChain\n                }\n                if (readyState) {\n                    state.readyState = readyState;\n                }\n                if (accountId !== undefined) {\n                    state.accountId = accountId;\n                }\n                if (level !== undefined) {\n                    state.level = level;\n                }\n                if (apiKey !== undefined) {\n                    state.apiKey = apiKey;\n                }\n                if (eddsaKey !== undefined) {\n                    state.eddsaKey = eddsaKey;\n                }\n                if (connectName !== undefined) {\n                    state.connectName = connectName;\n                }\n                if (_chainId !== undefined) {\n                    state._chainId = _chainId;\n                }\n                if (nonce !== undefined) {\n                    state.nonce = nonce;\n                }\n                state.status = SagaStatus.DONE;\n            }\n        },\n        cleanAccountStatus(state: AccountState, action: PayloadAction<{shouldUpdateProvider?:boolean|undefined}>) {\n            state.status = SagaStatus.PENDING\n        },\n        statusUnset: (state: AccountState) => {\n            state.status = SagaStatus.UNSET\n        }\n    },\n})\nexport default accountSlice\nexport const {\n    updateAccountStatus,\n    // restAccountStatus,\n    changeShowModel,\n    cleanAccountStatus,\n    nextAccountStatus,\n    statusUnset\n} = accountSlice.actions\n\n","import { useDispatch, useSelector } from 'react-redux'\nimport {\n    changeShowModel,\n    cleanAccountStatus,\n    // restAccountStatus,\n    statusUnset, updateAccountStatus\n} from './reducer';\nimport React from 'react';\nimport { Account, AccountState } from '@loopring-web/common-resources';\nimport { RootState } from 'stores';\nimport { sleep } from 'loopring-sdk';\n\n\nexport function useAccount() {\n    const {status, errorMessage, ...account}: AccountState = useSelector((state: RootState) => state.account);\n    // const [shouldShow,setShouldShow] = React.useState(account._userOnModel)\n    const dispatch = useDispatch();\n    \n    const resetAccount = React.useCallback( (props?:{shouldUpdateProvider?:boolean|undefined}) => {\n        dispatch(cleanAccountStatus(props));\n    }, [dispatch])\n\n    const updateAccount = React.useCallback((account: Partial<Account>) => {\n        dispatch(updateAccountStatus(account))\n    }, [dispatch]);\n\n    const shouldShow = React.useMemo(()=>{\n        return  account._userOnModel\n    }, [account]);\n\n    const setShouldShow = React.useCallback((flag:boolean)=>{\n        dispatch(changeShowModel({_userOnModel: flag}));\n    },[dispatch]);\n\n    const statusUnsetFunc = React.useCallback(() => {\n        dispatch(statusUnset(undefined))\n    }, [dispatch])\n\n    return {\n        account,\n        resetAccount,\n        shouldShow,\n        setShouldShow,\n        updateAccount,\n        statusUnset: statusUnsetFunc,\n        status,\n        errorMessage,\n    }\n\n}\n\n\n// import { useCallback, useState } from 'react'\n// import { useDispatch, useSelector } from 'react-redux'\n//\n// import { useCustomDCEffect } from 'hooks/common/useCustomDCEffect'\n//\n// import { useActiveWeb3React, } from 'hooks/web3/useWeb3'\n//\n// import { Lv2Account, } from 'defs/account_defs'\n//\n// import { AccountStatus, StatusChangeEvent } from 'state_machine/account_machine_spec'\n//\n// import * as sign_tools from 'loopring-sdk'\n//\n// import { connectorsByName } from 'defs/web3_defs'\n//\n// import { ConnectorNames, dumpError400, ExchangeAPI, sleep, UpdateAccountRequestV3, UserAPI, VALID_UNTIL, } from 'loopring-sdk'\n//\n// import { toHex, toBig, } from 'loopring-sdk'\n//\n// import { RootState } from 'reducer'\n//\n// import {\n//     reset, setAccountStatus, setConnectName,\n//     setConnectNameTemp, setAccountInfo, setEddsaKey, setApikey, setAccAddr,\n// } from 'reducer/account/reducer'\n//\n// import { AccountMachineSpec, } from 'state_machine/account_machine_spec'\n//\n// import { buildMachine } from 'state_machine/machine_builder'\n//\n// import voca from 'voca'\n// import { usePrevious } from 'react-use'\n//\n// import Web3 from 'web3'\n//\n// import { UserStorage } from 'storage'\n//\n// import store from 'reducer'\n// import { useWalletLayer1 } from '../walletLayer1';\n// import { useWalletLayer2 } from '../walletLayer2';\n// import { useTokenMap } from '../token';\n// import _ from 'lodash'\n// import { myLog } from 'utils/log_tools'\n// import { LoopringAPI } from 'reducer/apis/api'\n//\n// export function useWeb3Account() {\n//\n//     const {\n//         connector,\n//         library,\n//         account,\n//         chainId,\n//         active,\n//         error,\n//     } = useActiveWeb3React()\n//\n//     const isConnected: boolean = active && !voca.isBlank(account as string)\n//\n//     return {\n//         account,\n//         connector,\n//         library,\n//         chainId,\n//         active,\n//         isConnected,\n//         error,\n//     }\n//\n// }\n//\n// export function useAccount() {\n//\n//     const account: Lv2Account = useSelector((state: RootState) => state.account)\n//\n//     const isNoAccount = useCallback(() => {\n//         return account.status === AccountStatus.NOACCOUNT\n//     }, [account.status])\n//\n//     const isActivated = useCallback(() => {\n//         return account.status === AccountStatus.ACTIVATED\n//     }, [account.status])\n//\n//     return {\n//         account,\n//         isNoAccount,\n//         isActivated,\n//         apiKey: account.apiKey,\n//         eddsaKey: account.eddsaKey,\n//         accountId: account.accountId,\n//     }\n// }\n//\n// export function useStateMachine() {\n//     const dispatch = useDispatch()\n//\n//     const machine = buildMachine(AccountMachineSpec())\n//\n//     const sendEvent = useCallback((account: Lv2Account, event: StatusChangeEvent) => {\n//         const nextState = machine(account.status, event)\n//         if (nextState) {\n//             dispatch(setAccountStatus(nextState))\n//         }\n//     }, [machine, dispatch])\n//\n//     return {\n//         sendEvent,\n//     }\n// }\n//\n// export function useConnect() {\n//\n//     const {\n//         activate,\n//     } = useActiveWeb3React()\n//\n//     const { sendEvent } = useStateMachine()\n//\n//     const dispatch = useDispatch()\n//\n//     const [activatingConnector, setActivatingConnector] = useState<any>()\n//\n//     const connect = useCallback((item_name: ConnectorNames, isSwitch: boolean = false) => {\n//\n//         if (isSwitch) {\n//             myLog('try Connecting... isSwitch Reset')\n//             sendEvent(store.getState().account, StatusChangeEvent.Reset)\n//         }\n//\n//         const newConnector: any = connectorsByName[item_name]\n//         myLog('newConnector:', newConnector)\n//         setActivatingConnector(newConnector)\n//         activate(newConnector)\n//         dispatch(setConnectNameTemp(item_name))\n//\n//         //sendEvent(store.getState().account, StatusChangeEvent.Connecting)\n//\n//         myLog('store.getState().account.status:', store.getState().account.status)\n//\n//     }, [activate, dispatch, sendEvent])\n//\n//     return {\n//         connect,\n//         activatingConnector,\n//     }\n//\n// }\n//\n// export function useDisconnect() {\n//\n//     const {\n//         deactivate,\n//     } = useActiveWeb3React()\n//\n//     const dispatch = useDispatch()\n//\n//     const disconnect = useCallback(() => {\n//         deactivate()\n//         dispatch(reset(undefined))\n//     }, [deactivate, dispatch])\n//\n//     return {\n//         disconnect,\n//     }\n//\n// }\n//\n// export function useUnlock() {\n//\n//     const dispatch = useDispatch()\n//\n//     const { chainId } = useWeb3Account()\n//\n//     const { connector, } = useWeb3Account()\n//\n//     const { sendEvent } = useStateMachine()\n//\n//     const { resetLayer2 } = useWalletLayer2()\n//\n//     const lock = useCallback(async (account: Lv2Account) => {\n//         resetLayer2()\n//         sendEvent(account, StatusChangeEvent.Lock)\n//     }, [sendEvent, resetLayer2])\n//\n//     const exchangeInfo = useSelector((state: RootState) => state.system.exchangeInfo)\n//\n//     const unlock = useCallback(async (account: Lv2Account) => {\n//\n//         if (!LoopringAPI.userAPI || !LoopringAPI.exchangeAPI || !connector\n//             || !account.accountId || !exchangeInfo?.exchangeAddress\n//             || !chainId\n//             || account.status !== AccountStatus.LOCKED) {\n//             return\n//         }\n//\n//         if (account.status !== AccountStatus.LOCKED) {\n//             throw Error('unexpected status:' + account.status)\n//         }\n//\n//         myLog('try to unlock!', account)\n//\n//         let event = undefined\n//         let sk = undefined\n//         let apikey: any = undefined\n//\n//         const provider = await connector.getProvider()\n//         const web3 = new Web3(provider as any)\n//\n//         try {\n//\n//             const nonce = account.nonce - 1 < 0 ? 0 : account.nonce - 1\n//             myLog('try to unlock! nonce:', nonce)\n//\n//             if (!account.eddsaKey) {\n//                 const eddsaKey = await sign_tools\n//                     .generateKeyPair(\n//                         web3,\n//                         account.accAddr,\n//                         exchangeInfo?.exchangeAddress,\n//                         nonce,\n//                         account.connectName,\n//                     )\n//                 sk = eddsaKey.sk\n//             } else {\n//                 sk = account.eddsaKey\n//             }\n//\n//             myLog('useUnlock account:', account, ' sk:', sk)\n//\n//             apikey = await LoopringAPI.userAPI.getUserApiKey({\n//                 accountId: account.accountId\n//             }, sk)\n//\n//             event = StatusChangeEvent.Unlock\n//\n//         } catch (reason) {\n//             myLog('got :', reason)\n//             dumpError400(reason)\n//             if (reason?.response?.data?.resultInfo?.code === 100001) {\n//\n//                 try {\n//\n//                     // const req: GetOffchainFeeAmtRequest = {\n//                     //     accountId: account.accountId,\n//                     //     requestType: OffchainFeeReqType.UPDATE_ACCOUNT,\n//                     // }\n//\n//                     // const response = await userApi.getOffchainFeeAmt(req, account.apiKey)\n//\n//                     const feeMap = {\n//                         'ETH': '529000000000000',\n//                         'LRC': '34000000000000000000',\n//                         'USDT': '7850000',\n//                         'DAI': '98100000000000000000',\n//                     }\n//\n//                     const eddsaKey = await sign_tools\n//                         .generateKeyPair(\n//                             web3,\n//                             account.accAddr,\n//                             exchangeInfo?.exchangeAddress,\n//                             account.nonce,\n//                             account.connectName,\n//                         )\n//\n//                     const request: UpdateAccountRequestV3 = {\n//                         exchange: exchangeInfo?.exchangeAddress,\n//                         owner: account.accAddr,\n//                         accountId: account.accountId,\n//                         publicKey: { x: eddsaKey.formatedPx, y: eddsaKey.formatedPy },\n//                         maxFee: { tokenId: 0, volume: feeMap['ETH'] },\n//                         validUntil: VALID_UNTIL,\n//                         nonce: account.nonce,\n//                     }\n//\n//                     const updateAccountResponse = await LoopringAPI.userAPI.updateAccount(request, web3,\n//                         chainId, account.connectName, false)\n//\n//                     myLog('updateAccountResponse:', updateAccountResponse)\n//\n//                     await sleep(1000)\n//\n//                 } catch (reason2) {\n//                     dumpError400(reason2)\n//                 }\n//             }\n//             event = StatusChangeEvent.Reset\n//         }\n//\n//         if (sk) {\n//             dispatch(setEddsaKey(sk))\n//         }\n//\n//         if (apikey?.apiKey) {\n//             dispatch(setApikey(apikey.apiKey))\n//         }\n//\n//         if (event) {\n//             sendEvent(account, event)\n//         }\n//\n//     }\n//         , [dispatch, sendEvent, connector, chainId, exchangeInfo?.exchangeAddress])\n//\n//     return {\n//         lock,\n//         unlock,\n//     }\n// }\n//\n// async function checkAccountAvailableAsync(exchangeApi: ExchangeAPI, userApi: UserAPI, account: Lv2Account, dispatch: any, sendEvent: any, connector: any, exchangeAddress: string) {\n//\n//     let accInfo = undefined\n//     let event = undefined\n//     let sk = undefined\n//     let code = undefined\n//     let apikey: any = undefined\n//\n//     try {\n//         accInfo = (await exchangeApi.getAccount({\n//             owner: account.accAddr\n//         })).accInfo\n//         if (accInfo.publicKey && accInfo.publicKey.x && accInfo.publicKey.y) {\n//             if (account.accountId !== accInfo.accountId) {\n//                 const provider = await connector.getProvider()\n//                 const web3 = new Web3(provider as any)\n//                 try {\n//                     code = await web3.eth.getCode(account.accAddr)\n//                     try {\n//                         const eddsakey = await sign_tools\n//                             .generateKeyPair(\n//                                 web3,\n//                                 account.accAddr,\n//                                 exchangeAddress,\n//                                 accInfo.nonce - 1,\n//                                 account.connectName,\n//                             )\n//                         sk = toHex(toBig(eddsakey.keyPair.secretKey))\n//                         const px = toHex(toBig(eddsakey.keyPair.publicKeyX))\n//                         const py = toHex(toBig(eddsakey.keyPair.publicKeyY))\n//\n//                         try {\n//                             apikey = await userApi.getUserApiKey({\n//                                 accountId: accInfo.accountId\n//                             }, sk)\n//                             event = (StatusChangeEvent.HasPubkey)\n//                         } catch (reason) {\n//                             dumpError400(reason)\n//                             event = (StatusChangeEvent.ErrorResponse)\n//                         }\n//                     } catch (reason) {\n//                         dumpError400(reason)\n//                         event = (StatusChangeEvent.ErrorResponse)\n//                     }\n//\n//                 } catch (reason) {\n//                     dumpError400(reason)\n//                     event = (StatusChangeEvent.ErrorResponse)\n//                 }\n//\n//             } else {\n//                 myLog('already has accountId!')\n//             }\n//         } else {\n//             event = (StatusChangeEvent.HasNoPubkey)\n//         }\n//     } catch (reason) {\n//         // 3 has none of above\n//         dumpError400(reason)\n//         // check deposit tx (local and ethereum)\n//         event = (StatusChangeEvent.ErrorResponse)\n//     }\n//\n//     if (accInfo && accInfo.owner !== account.accAddr) {\n//         dispatch(setAccountInfo(accInfo))\n//     }\n//\n//     if (sk) {\n//         dispatch(setEddsaKey(sk))\n//     }\n//\n//     if (apikey) {\n//         dispatch(setApikey(apikey.apiKey))\n//     }\n//\n//     if (event) {\n//         sendEvent(event)\n//     }\n//\n// }\n//\n// export function useCheckAccStatus() {\n//\n//     const dispatch = useDispatch()\n//\n//     const { sendEvent } = useStateMachine()\n//\n//     const { account: web3Account, active, isConnected, chainId, connector, } = useWeb3Account()\n//     const { marketArray } = useTokenMap()\n//\n//     const lv1Acc = web3Account as string\n//\n//     const prevChainId = usePrevious(chainId)\n//     const prevWeb3Account = usePrevious(web3Account)\n//\n//     const {updateWalletLayer1, resetLayer1,} = useWalletLayer1()\n//     const {updateWalletLayer2, resetLayer2, } = useWalletLayer2();\n//\n//     // const { updateWalletLayer1,resetLayer1} = useWalletLayer1();\n//     // const { updateWalletLayer2, resetLayer2} = useWalletLayer2()\n//     // console.log('prevChainId:', prevChainId, ' chainId:', chainId)\n//     // console.log('prevWeb3Account:', prevWeb3Account, ' web3Account:', web3Account)\n//     // console.log(exchangeApi, userApi, account, 'prevChainId:', prevChainId, 'chainId:', chainId, 'web3Account:', web3Account)\n//\n//     useCustomDCEffect(async() => {\n//\n//         const account = store.getState().account as Lv2Account\n//\n//         const exchangeAddress = store.getState().system.exchangeInfo?.exchangeAddress\n//\n//         const cleanUp = () => {\n//             let handler = UserStorage.getHandler()\n//             if (account.status !== AccountStatus.ACTIVATED && handler) {\n//                 clearInterval(handler)\n//             }\n//         }\n//\n//         async function checkStatus() {\n//\n//             if (!account || !lv1Acc || !LoopringAPI.userAPI || !LoopringAPI.exchangeAPI || !chainId\n//                 || !connector || !exchangeAddress) {\n//                 return\n//             }\n//\n//             if (((prevChainId && chainId && prevChainId !== chainId)\n//                 || (prevWeb3Account && web3Account && prevWeb3Account !== web3Account))\n//                 && account.status !== AccountStatus.UNCONNNECTED) {\n//                 dispatch(reset(undefined))\n//                 sendEvent(account, StatusChangeEvent.Reset)\n//                 return\n//             }\n//\n//             cleanUp()\n//\n//             switch (account.status) {\n//                 case AccountStatus.UNCONNNECTED:\n//                     myLog('---> render UNCONNNECTED active:', active, ' isConnected:', isConnected)\n//\n//                     if (isConnected) {\n//                         dispatch(setConnectNameTemp(ConnectorNames.Injected))\n//                         sendEvent(account, StatusChangeEvent.Connecting)\n//                     }\n//\n//                     //HIGH:\n//                     resetLayer1()\n//                     resetLayer2()\n//                     break\n//\n//                 case AccountStatus.CONNECTED:\n//                     //check session or local storage\n//\n//                     myLog('---> render CONNECTED account:', account)\n//\n//                     try {\n//\n//                         const { accInfo } = (await LoopringAPI.exchangeAPI.getAccount({ owner: lv1Acc }))\n//\n//                         // current acc is local acc info\n//                         if (account.accAddr && account.eddsaKey && accInfo.owner === account.accAddr) {\n//                             // console.log('cur Eddsakey:', account.eddsaKey)\n//                         } else {\n//                             // console.log('got a new address:', acc)\n//                             // got a new address\n//                             dispatch(setAccountInfo(accInfo))\n//                             // dispatch(setEddsaKey(''))\n//\n//                             //updateWalletLayer1();\n//                             if (marketArray?.length) {\n//                                 updateWalletLayer1()\n//                             }\n//                         }\n//\n//                         if (account?.connectName !== account?.connectNameTemp) {\n//                             dispatch(setConnectName(account.connectNameTemp))\n//                         }\n//\n//                         sendEvent(account, StatusChangeEvent.HasPubkey)\n//\n//                     } catch (reason) {\n//                         dumpError400(reason)\n//\n//                         if (lv1Acc) {\n//                             dispatch(setAccAddr(lv1Acc))\n//                         }\n//\n//                         if (reason.response && reason.response.data && reason.response.data.resultInfo\n//                             && reason.response.data.resultInfo.code === 101002) {\n//                             sendEvent(account, StatusChangeEvent.ErrorResponse)\n//                         }\n//                     }\n//\n//                     break\n//\n//                 case AccountStatus.NOACCOUNT:\n//\n//                     myLog('NOACCOUNT before wait 30s!')\n//\n//                     _.delay(() => {\n//                         sendEvent(account, StatusChangeEvent.Reconnect)\n//                         myLog('NOACCOUNT wait 15s to reconnect again!')\n//                     }, 30000)\n//\n//                     break\n//\n//                 case AccountStatus.DEPOSITING:\n//                     const depositFinished = true // TODO\n//                     if (depositFinished) {\n//                         //   console.log('depositFinished currStatus:', account.status)\n//                         sendEvent(account, StatusChangeEvent.FinishDeposit)\n//                     }\n//                     break\n//\n//                 case AccountStatus.DEPOSIT_TO_CONFIREM:\n//                     // getAccount every 10s to check\n//                     break\n//\n//                 case AccountStatus.UNACTIVATED:\n//                     const isSmartWallet = false // TODO\n//                     if (isSmartWallet) {\n//                         sendEvent(account, StatusChangeEvent.IsSmartWallet)\n//                     } else {\n//                         // console.log('approve hash no smartwallet, account.status:', account.status)\n//                     }\n//                     break\n//\n//                 case AccountStatus.ARPROVING:\n//                     const approved = false // TODO\n//                     if (approved) {\n//                         //  console.log('sub contract event, check approving. approved! status:', account.status)\n//                         sendEvent(account, StatusChangeEvent.ApproveSubmit)\n//                     }\n//                     break\n//\n//                 case AccountStatus.APPROV_TO_CONFIRM:\n//                     const approveConfirmed = false // TODO\n//                     if (approveConfirmed) {\n//                         //   console.log('approveConfirmed status:', account.status)\n//                         sendEvent(account, StatusChangeEvent.ApproveConfirmed)\n//                     }\n//                     break\n//\n//                 case AccountStatus.LOCKED:\n//                     //HIGH:\n//                     resetLayer1()\n//                     break\n//\n//                 case AccountStatus.ACTIVATED:\n//                     UserStorage.checkTimeout(true)\n//                     const handler = setInterval(() => {\n//                         const isTimeOut = UserStorage.checkTimeout()\n//                         if (account.status === AccountStatus.ACTIVATED && isTimeOut) {\n//                             clearInterval(handler)\n//                             sendEvent(account, StatusChangeEvent.Lock)\n//                         }\n//                     }, 1000)\n//                     UserStorage.setHandler(handler)\n//                     updateWalletLayer2()\n//                     break\n//\n//                 default:\n//                     break\n//             }\n//\n//\n//\n//         }\n//\n//         checkStatus()\n//\n//         return () => {\n//             cleanUp()\n//         }\n//\n//     }, [updateWalletLayer1, updateWalletLayer2, resetLayer1, resetLayer2,\n//         LoopringAPI.userAPI, LoopringAPI.exchangeAPI, store.getState().account.status, prevChainId, chainId, lv1Acc,\n//         dispatch, connector, store.getState().system.exchangeInfo?.exchangeAddress])\n//\n// }\n//\n","import { createAction } from '@reduxjs/toolkit'\n\n// fired once when the app reloads but before the app renders\n// allows any updates to be applied to store data loaded from localStorage\nexport const updateVersion = createAction<void>('global/updateVersion')\n","import { createSlice, PayloadAction, Slice } from '@reduxjs/toolkit'\nimport { AmmActivityMapStates } from './interface';\nimport { SagaStatus } from '@loopring-web/common-resources';\n\n\nconst initialState: Required<AmmActivityMapStates> = {\n    ammActivityMap: {},\n    status: 'PENDING',\n    errorMessage: null,\n}\nconst ammActivityMapSlice: Slice = createSlice({\n    name: 'ammActivityMap',\n    initialState,\n    reducers: {\n        getAmmActivityMap(state, action: PayloadAction<string | undefined>) {\n            state.status = SagaStatus.PENDING\n        },\n        getAmmActivityMapStatus(state, action: PayloadAction<AmmActivityMapStates>) {\n            // @ts-ignore\n            if (action.error) {\n                state.status = SagaStatus.ERROR\n                // @ts-ignore\n                state.errorMessage = action.error\n            }\n            state.ammActivityMap = {...action.payload.ammActivityMap};\n            state.status = SagaStatus.DONE\n        },\n        statusUnset: state => {\n            state.status = SagaStatus.UNSET\n        }\n\n    },\n});\nexport { ammActivityMapSlice };\nexport const {getAmmActivityMap, getAmmActivityMapStatus, statusUnset} = ammActivityMapSlice.actions\n","import { useDispatch, useSelector } from 'react-redux'\nimport { AmmActivityMapStates } from './interface';\nimport { ammActivityMapSlice, getAmmActivityMap, statusUnset } from './reducer';\nimport React from 'react';\n\nexport function useAmmActivityMap(): AmmActivityMapStates & {\n    getAmmActivityMap:()=> void,\n    statusUnset:()=> void,\n} {\n    const ammActivityMap:AmmActivityMapStates = useSelector((state: any) => state.amm.ammActivityMap)\n    const dispatch = useDispatch();\n    return {\n        ...ammActivityMap,\n        statusUnset: React.useCallback(()=>dispatch(statusUnset(undefined)),[dispatch]),\n        getAmmActivityMap: React.useCallback(()=>dispatch(getAmmActivityMap(undefined)),[dispatch])\n    }\n\n}\n","import { AmmpoolAPI, ChainId, ExchangeAPI, UserAPI, WalletAPI, WsAPI } from \"loopring-sdk\"\nimport store from 'stores'\n\nexport function getChainId(){\n    const chainId = store.getState().system.chainId\n    return chainId\n}\n\nexport const walletAPI = () => {\n    const walletApi = new WalletAPI(getChainId() as ChainId)\n    return walletApi\n}\n\nexport const userAPI = () => {\n    const userApi = new UserAPI(getChainId() as ChainId)\n    return userApi\n}\n\nexport const exchangeAPI = () => {\n    const exchangeApi = new ExchangeAPI(getChainId() as ChainId)\n    return exchangeApi\n}\n\nexport const ammpoolAPI = () => {\n    const ammpoolApi = new AmmpoolAPI(getChainId() as ChainId)\n    return  ammpoolApi\n}\n\nexport const wsAPI = () => {\n    const wsApi = new WsAPI(getChainId() as ChainId)\n    return wsApi\n}\n\nexport class LoopringAPI {\n    \n    public static userAPI: UserAPI | undefined = undefined\n    public static exchangeAPI: ExchangeAPI | undefined = undefined\n    public static ammpoolAPI: AmmpoolAPI | undefined = undefined\n    public static walletAPI: WalletAPI | undefined = undefined\n    public static wsAPI: WsAPI | undefined = undefined\n\n    public static InitApi = (chainId: ChainId) => {\n        LoopringAPI.userAPI = new UserAPI(chainId) \n        LoopringAPI.exchangeAPI = new ExchangeAPI(chainId) \n        LoopringAPI.ammpoolAPI = new AmmpoolAPI(chainId) \n        LoopringAPI.walletAPI = new WalletAPI(chainId) \n        LoopringAPI.wsAPI = new WsAPI(chainId) \n    }\n\n}\n","import { all, takeLatest, call, put } from \"redux-saga/effects\"\nimport { getAmmActivityMap, getAmmActivityMapStatus } from './reducer'\nimport { LoopringAPI } from '../../apis/api';\nconst getAmmActivityMapApi = async () => {\n\n    if(LoopringAPI.ammpoolAPI){\n        const { groupByRuleTypeAndStatus } =  await LoopringAPI.ammpoolAPI.getAmmPoolActivityRules();\n        return  {data:groupByRuleTypeAndStatus}\n    }else{\n        return {data:undefined}\n    }\n\n}\n\nexport function* getPostsSaga() {\n    try {\n        //\n        const { data } = yield call(getAmmActivityMapApi);\n        yield put(getAmmActivityMapStatus({ammActivityMap:data}));\n    } catch (err) {\n        yield put(getAmmActivityMapStatus(err));\n    }\n}\n\nexport default function* ammActivityMapSaga() {\n    yield all([takeLatest(getAmmActivityMap, getPostsSaga)]);\n}\n","import { all, call, fork, put, takeLatest } from \"redux-saga/effects\";\nimport { getAmmMap, getAmmMapStatus, updateRealTimeAmmMap } from './reducer';\nimport { AmmDetail } from '@loopring-web/common-resources';\nimport store from '../../index';\nimport { AmmPoolInfoV3, AmmPoolStat, toBig, TokenVolumeV3, } from \"loopring-sdk\";\nimport { ammpoolAPI } from \"stores/apis/api\";\nimport { PayloadAction } from '@reduxjs/toolkit';\nimport { AmmDetailStore, GetAmmMapParams } from './interface';\nimport { volumeToCount, volumeToCountAsBigNumber } from '../../../hooks/help';\n\ntype AmmMap<R extends { [ key: string ]: any }> = { [ key: string ]: AmmDetail<R> } | {}  //key is AMM-XXX-XXX\nexport const setAmmState = ({ammPoolState, keyPair}: { ammPoolState: AmmPoolStat, keyPair: string }) => {\n    const {idIndex} = store.getState().tokenMap\n    // @ts-ignore\n    const [, coinA, coinB] = keyPair.match(/(\\w+)-(\\w+)/i);\n    const {forex,faitPrices} = store.getState().system;\n    if (idIndex && coinA && coinB && faitPrices && forex) {\n        let result =  {\n            amountDollar: parseFloat(ammPoolState.liquidityUSD),\n            amountYuan: (parseFloat(ammPoolState.liquidityUSD) / (forex ? forex : 6.5)),\n            totalLPToken: volumeToCount('LP-' + keyPair, ammPoolState.lpLiquidity),\n            totalA: volumeToCount(coinA, ammPoolState.liquidity[ 0 ]),//parseInt(ammPoolState.liquidity[ 0 ]),\n            totalB: volumeToCount(coinB, ammPoolState.liquidity[ 1 ]),//parseInt(ammPoolState.liquidity[ 1 ]),\n            rewardValue: ammPoolState.rewards[ 0 ] ? volumeToCount(idIndex[ ammPoolState.rewards[ 0 ].tokenId as number ], ammPoolState.rewards[ 0 ].volume) : undefined,\n            rewardToken: ammPoolState.rewards[ 0 ] ? idIndex[ ammPoolState.rewards[ 0 ].tokenId as number ] : undefined,\n            rewardValue2: ammPoolState.rewards[ 1 ] ? volumeToCount(idIndex[ ammPoolState.rewards[ 1 ].tokenId as number ], ammPoolState.rewards[ 1 ].volume) : undefined,\n            rewardToken2: ammPoolState.rewards[ 1 ] ? idIndex[ ammPoolState.rewards[ 1 ].tokenId as number ] : undefined,\n        }\n\n        const feeA =  volumeToCountAsBigNumber(coinA, ammPoolState.fees[ 0 ]);//parseInt(ammPoolState.fees[ 0 ]),\n        const feeB = volumeToCountAsBigNumber(coinB, ammPoolState.fees[ 1 ]);//parseInt(ammPoolState.fees[ 1 ]),\n        const feeDollar =  faitPrices[coinA] && faitPrices[coinB]  ?\n            toBig(feeA||0).times(faitPrices[coinA].price).plus(toBig(feeB||0).times(faitPrices[coinB].price)):undefined\n        const feeYuan = feeDollar ? feeDollar.times(forex) : undefined;\n\n        return {\n             ...result,\n            feeA:feeA?.toNumber(),\n            feeB:feeB?.toNumber(),\n            feeDollar:feeDollar? feeDollar.toNumber(): undefined,\n            feeYuan:feeYuan? feeYuan.toNumber(): undefined,\n            tradeFloat: {\n                change: undefined,\n                timeUnit: '24h',\n                // priceYuan: 100,\n                // priceDollar: 1.23123,\n                // floatTag: FloatTag.increase,\n                // reward: 12312,\n                // APY: (parseInt(ammPoolState.apyBips) * 1.0 / 100)\n            },\n            APY: (parseInt(ammPoolState.apyBips) * 1.0 / 100)\n        }\n\n\n    }\n}\nconst getAmmMapApi = async <R extends { [ key: string ]: any }>({ammpools}: GetAmmMapParams) => {\n\n    let ammMap: AmmMap<R> = {}\n    const {ammPoolStats} = (await ammpoolAPI().getAmmPoolStats());\n\n    let {__timer__} = store.getState().amm.ammMap\n    __timer__ = (() => {\n        if (__timer__ && __timer__ !== -1) {\n            clearInterval(__timer__)\n        }\n        return setInterval(async () => {\n            let ammPoolStats: { [key in keyof R]: AmmPoolStat } = (await ammpoolAPI().getAmmPoolStats()).ammPoolStats as { [key in keyof R]: AmmPoolStat }\n            store.dispatch(updateRealTimeAmmMap({ammPoolStats}))\n        }, 900000)    //15*60*1000 //900000\n    })()\n    const {tokenMap: {coinMap, idIndex}} = store.getState();\n\n    // const forex = faitPrices.prices['USDC']\n\n\n    Reflect.ownKeys(ammpools).forEach(async (key) => {\n        const item: AmmPoolInfoV3 = ammpools[ key as string ]\n        if (item.market === key && item.tokens.pooled && idIndex) {\n\n            // const tokenA =  ; //getTokenInfoById(tokens.tokenIdMap, parseInt(item.tokens.pooled[0]))\n            // const tokenB =  ; // getTokenInfoById(tokens.tokenIdMap, parseInt(item.tokens.pooled[1]))\n            const coinA = idIndex[ item.tokens.pooled[ 0 ] as any ];\n            const coinB = idIndex[ item.tokens.pooled[ 1 ] as any ];\n            const dataItem: AmmDetailStore<R> = {\n                coinA: coinA,\n                coinB: coinB,\n                isNew: Date.now() - (Number(item.createdAt)) > 3 * 86400 * 1000 ? false : true,//3*24*60*60*1000,\n                isActivity: item.status === 7 ? true : false,\n                address: item.address,\n                ...setAmmState({ammPoolState: ammPoolStats[ key ], keyPair: `${coinA}-${coinB}`}),\n                __rawConfig__: item\n            } as AmmDetailStore<R>\n            // @ts-ignore\n            ammMap[ item.market ] = dataItem\n\n\n        }\n\n\n    })\n    return {ammMap, __timer__}\n}\n\n\nexport function* getPostsSaga({payload}: PayloadAction<GetAmmMapParams>) {\n    try {\n        const {ammpools} = payload;\n        const {ammMap, __timer__} = yield call(getAmmMapApi, {ammpools});\n        yield put(getAmmMapStatus({ammMap, __timer__}));\n    } catch (err) {\n        yield put(getAmmMapStatus(err));\n    }\n}\n\nexport function* updateRealTimeSaga({payload}: any) {\n    try {\n        const {ammPoolStats} = payload;\n        let {ammMap}: { ammMap: AmmMap<object> } = store.getState().amm.ammMap;\n        if (ammPoolStats) {\n            //{ ammPoolStats?: { [ key: string ]: AmmPoolStat } }\n            Reflect.ownKeys(ammPoolStats).map((key) => {\n                const keyPair = (key as string).replace('AMM-', '')\n                \n                // @ts-ignore\n                ammMap[ key ] = {\n                    // @ts-ignore\n                    ...ammMap[ key ],\n                    ...setAmmState({ammPoolState: ammPoolStats[ key as string ], keyPair, })\n                }\n                return ammMap\n            })\n        }\n        yield put(getAmmMapStatus({ammMap}));\n    } catch (err) {\n        yield put(getAmmMapStatus(err));\n    }\n}\n\n\nexport function* ammMapInitSaga() {\n    yield all([takeLatest(getAmmMap, getPostsSaga)]);\n}\n\nexport function* ammMapRealTimeSaga() {\n    yield all([takeLatest(updateRealTimeAmmMap, updateRealTimeSaga)]);\n}\n\nexport const ammMapSaga = [\n        fork(ammMapInitSaga),\n        fork(ammMapRealTimeSaga),\n]\n\n","import { combineReducers } from '@reduxjs/toolkit';\n// import { ammRecordSlice } from './AmmConfig';\n// import { ammTradesSlice } from './AmmTrades';\nimport { ammMapSlice } from './AmmMap';\nimport { ammActivityMapSlice } from './AmmActivityMap';\nimport ammActivityMapSaga from './AmmActivityMap/saga';\nimport { ammMapSaga } from './AmmMap/saga';\n// import ammTradesSaga from './AmmTrades/saga';\nimport {  fork } from 'redux-saga/effects';\n\nexport const  ammReducer = combineReducers({\n    // ammRecord: ammRecordSlice.reducer,\n    // ammTrades: ammTradesSlice.reducer,\n    ammMap: ammMapSlice.reducer,\n    ammActivityMap:ammActivityMapSlice.reducer\n})\nexport const ammForks =  [\n    fork(ammActivityMapSaga),\n    ...ammMapSaga,\n    // fork(ammRecordSaga),\n    // fork(ammTradesSaga)\n]\n\n// export * from './interface'\n","import { utils } from 'ethers'\n\nimport { TokenInfo, } from 'loopring-sdk'\n\nimport { CoinInfo, } from '@loopring-web/common-resources'\n\nexport function getIcon(symbol: string, tokens: any) {\n    const token: any = tokens[symbol]\n    return getIconByTokenInfo(token)\n}\n\nexport function getIconByTokenInfo(token: TokenInfo) {\n    if (token) {\n        const addr = utils.getAddress(token.address)\n        const path = `https://exchange.loopring.io/assets/images/ethereum/assets/${addr}/logo.png`\n        return path\n    }\n    return ''\n}\n\nexport function makeCoinInfo(token: TokenInfo) {\n    if (token) {\n        const info: CoinInfo<any> = {\n            icon: getIconByTokenInfo(token),\n            name: token.symbol,\n            simpleName: token.symbol,\n            description: token.name,\n            company: token.name,\n        }\n        return info\n    }\n    return undefined\n}","import { all, call, fork, put, takeLatest } from \"redux-saga/effects\";\nimport { getTokenMap, getTokenMapStatus } from './reducer';\nimport { getIcon } from '../../utils/swap_utils';\nimport { CoinInfo, CoinMap } from '@loopring-web/common-resources';\nimport { AddressMap, GetTokenMapParams, IdMap } from './interface';\nimport { PayloadAction } from '@reduxjs/toolkit';\n\nconst getTokenMapApi = async <R extends { [ key: string ]: any }>({\n                                                                      tokensMap,\n                                                                      pairs,\n                                                                      marketArr,\n                                                                      tokenArr\n                                                                  }: GetTokenMapParams<R>) => {\n    let coinMap: CoinMap<any, CoinInfo<any>> = {};\n    let totalCoinMap: CoinMap<any, CoinInfo<any>> = {};\n    let tokenMap:any = tokensMap;\n    let addressIndex: AddressMap = {};\n    let idIndex: IdMap = {};\n    Reflect.ownKeys(tokensMap).forEach((key) => {\n        const coinInfo = {\n            icon: getIcon(key as string, tokensMap),\n            name: key as string,\n            simpleName: key as string,\n            description: '',\n            company: '',\n        }\n        if (!(key as string).startsWith('LP-')) {\n            coinMap[ key as string ] = coinInfo\n        }\n        totalCoinMap[ key as string ] = coinInfo\n\n        if (pairs[ key as string ] && pairs[ key as string ].tokenList) {\n            // @ts-ignore\n            tokensMap[ key ].tradePairs = pairs[ key as string ].tokenList;\n        }\n        addressIndex = {\n            ...addressIndex,\n            // @ts-ignore\n            [ tokensMap[ key ].address ]: key as string\n        }\n        idIndex = {\n            ...idIndex,\n            // @ts-ignore\n            [ tokensMap[ key ].tokenId ]: key as string\n        }\n    })\n    return {data: {coinMap, totalCoinMap, addressIndex, idIndex, tokenMap, marketArray: marketArr, marketCoins: tokenArr}}\n};\n\nexport function* getPostsSaga<R extends { [ key: string ]: any }>({payload}: PayloadAction<GetTokenMapParams<R>>) {\n    try {\n        const {tokensMap, marketMap, pairs, marketArr,tokenArr} = payload\n        // @ts-ignore\n        const {data} = yield call(getTokenMapApi, {tokensMap, pairs, marketArr, tokenArr});\n\n        yield put(getTokenMapStatus({...data, marketMap}));\n    } catch (err) {\n        yield put(getTokenMapStatus(err));\n    }\n}\n\nexport function* tokenInitSaga() {\n    yield all([takeLatest(getTokenMap, getPostsSaga)]);\n}\n\n\nexport const tokenSaga = [\n    fork(tokenInitSaga),\n    // fork(tokenPairsSaga),\n]\n\n// export function* getPairsSaga({payload}:PayloadAction<{tokenPairs: TokenPairs }>) {\n//     try {\n//         const {tokenPairs} = payload;\n//         const tokenPairsMap =  Reflect.ownKeys(tokenPairs).reduce((prev,key)=>{\n//            // @ts-ignore\n//             return prev[key as string] =  tokenPairs[key as string].tokenList\n//         }, {} )\n//\n//         yield put(getTokenMapStatus({tokenPairsMap}));\n//     } catch (err) {\n//         yield put(getAmmMapStatus(err));\n//     }\n// }\n// export function* tokenPairsSaga() {\n//     yield all([takeLatest(getTokenPairMap, getPairsSaga)]);\n// }\n\n\n","import { all, call, fork, put, takeLatest } from \"redux-saga/effects\"\nimport { getTicker, getTickers, getTickerStatus } from './reducer'\nimport { CoinKey, CustomError, ErrorMap, PairKey, TradeFloat } from '@loopring-web/common-resources'\n\n\nimport { exchangeAPI } from \"stores/apis/api\"\nimport { makeTickerMap } from '../../hooks/help';\n\n\ntype TickerMap<R extends { [ key: string ]: any }> = {\n    [key in CoinKey<R> | PairKey<R>]?: TradeFloat & {\n    reward?: number, rewardToken?: string\n}\n\n}\n\n\nconst getTickersApi = async <R extends { [ key: string ]: any }>(list: Array<keyof R>) => {\n\n    const tickers = await exchangeAPI().getMixTicker({market: list.join(',')})\n    const data = makeTickerMap({tickerMap: tickers.tickMap})\n    return {data}\n}\n\nexport function* getPostsSaga({payload}: any) {\n    try {\n        // @ts-ignore\n        const {tickerKey, tickerKeys} = payload;\n        if (tickerKey || (tickerKeys && tickerKeys.length)) {\n            const {data} = yield call(getTickersApi, tickerKey ? [tickerKey] : tickerKeys);\n            yield put(getTickerStatus({tickerMap: data}));\n\n        } else {\n            throw new CustomError(ErrorMap.NO_TOKEN_KEY_LIST);\n        }\n    } catch (err) {\n        yield put(getTickerStatus(err));\n    }\n}\n\nfunction* tickerSaga() {\n    yield all([takeLatest(getTicker, getPostsSaga)]);\n}\n\nfunction* tickersSaga() {\n    yield all([takeLatest(getTickers, getPostsSaga)]);\n}\n\nexport const tickerForks = [\n    fork(tickerSaga),\n    fork(tickersSaga),\n]\n ","import { StateBase } from '@loopring-web/common-resources';\nimport { ChainId, ExchangeInfo } from 'loopring-sdk';\n\nexport enum ENV {\n    DEV = 'DEV',\n    UAT = 'UAT',\n    PROD = 'PROD',\n}\n\nexport enum NETWORKEXTEND {\n    NONETWORK = 'unknown'\n}\n\nexport type NETWORK = NETWORKEXTEND | ChainId\n\n\nexport type System<C extends { [ key: string ]: any }> = {\n    env: keyof typeof ENV,\n    chainId: 1 | 5 | 'unknown'\n    // network: keyof typeof NETWORK,\n    etherscanUrl: string,\n    socketURL: string,\n    baseURL: string,\n    faitPrices: { [k in keyof C]: { price: any, [ key: string ]: any } } | undefined,\n    gasPrice: number | undefined,\n    forex: number | undefined,\n    exchangeInfo: ExchangeInfo | undefined,\n\n}\n\nexport type SystemStatus = System<{ [ key: string ]: any }> & {\n    // system:System | {}\n    __timer__: NodeJS.Timeout | -1\n    topics: any[]\n} & StateBase\n\n\n\n\n\n\n","import { createSlice, PayloadAction, Slice } from '@reduxjs/toolkit'\nimport { ENV, System, SystemStatus } from './interface';\nimport { SagaStatus } from '@loopring-web/common-resources';\n\nconst initialState: SystemStatus = {\n    env: ENV.PROD,\n    chainId: 'unknown',\n    // network:'NONETWORK',\n    baseURL: '',\n    socketURL: '',\n    etherscanUrl: '',\n    faitPrices: undefined,\n    gasPrice: undefined,\n    forex: undefined,\n    __timer__: -1,\n    status: 'PENDING',\n    errorMessage: null,\n\n    exchangeInfo: undefined,\n\n    topics: [],\n}\nconst systemSlice: Slice<SystemStatus> = createSlice({\n    name: 'system',\n    initialState,\n    reducers: {\n\n        updateSystem(state, action: PayloadAction<System<{ [ key: string ]: any }>>) {\n            state.chainId = action.payload.chainId\n            state.status = SagaStatus.PENDING\n        },\n        // updateSocketURL(state, action:PayloadAction<{socketURL:string}>) {\n        //     state.socketURL =  action.payload.socketURL;\n        // },\n        updateRealTimeObj(state, action: PayloadAction<Partial<{ faitPrices: any, gasPrice: number, forex: number }>>) {\n            const {forex, faitPrices, gasPrice} = action.payload;\n            if (forex) {\n                state.forex = forex\n            }\n            if (faitPrices) {\n                state.faitPrices = faitPrices\n            }\n            if (gasPrice) {\n                state.gasPrice = gasPrice\n            }\n\n\n            // state = {\n            //     ...state.system,\n            //     forex: forex?,\n            //     faitPrices: action.payload.faitPrices ? action.payload.faitPrices : state.system.faitPrices,\n            //     gasPrice: action.payload.gasPrice ? action.payload.gasPrice : state.system.gasPrice,\n            // };\n\n        },\n        getSystemStatus(state, action: PayloadAction<Partial<SystemStatus>>) {\n\n            // @ts-ignore\n            if (action.error) {\n                state.status = SagaStatus.ERROR\n                // @ts-ignore\n                state.errorMessage = action.error\n            }\n            const {\n                env,\n                baseURL,\n                socketURL,\n                faitPrices,\n                gasPrice,\n                forex,\n                exchangeInfo,\n                __timer__,\n                etherscanUrl\n            } = action.payload;\n            if (env) {\n                state.env = env\n            }\n            if (socketURL) {\n                state.socketURL = socketURL;\n            }\n            if (baseURL) {\n                state.baseURL = baseURL\n            }\n            if (faitPrices) {\n                state.faitPrices = faitPrices\n            }\n            if (gasPrice) {\n                state.gasPrice = gasPrice\n            }\n            if (forex) {\n                state.forex = forex\n            }\n\n            if (exchangeInfo) {\n                state.exchangeInfo = exchangeInfo\n            }\n            if (etherscanUrl) {\n                state.etherscanUrl = etherscanUrl\n            }\n\n            if (__timer__) {\n                state.__timer__ = __timer__\n            }\n            state.status = SagaStatus.DONE\n        },\n        statusUnset: state => {\n            state.status = SagaStatus.UNSET\n        }\n\n    },\n});\nexport { systemSlice };\nexport const {updateSystem, setTopics, getSystemStatus, statusUnset, updateRealTimeObj} = systemSlice.actions;","import { createSlice, PayloadAction, Slice } from '@reduxjs/toolkit'\nimport { WalletLayer1Map, WalletLayer1States } from './interface';\nimport { SagaStatus } from '@loopring-web/common-resources';\n\n\nconst initialState: WalletLayer1States = {\n    walletLayer1: undefined,\n    status: 'DONE',\n    errorMessage: null,\n}\nconst walletLayer1Slice: Slice = createSlice({\n    name: 'walletLayer1',\n    initialState,\n    reducers: {\n        updateWalletLayer1(state, action: PayloadAction<string | undefined>) {\n            state.status = SagaStatus.PENDING\n        },\n        reset(state, action: PayloadAction<string | undefined>) {\n            state.walletLayer1 = undefined;\n            state.status = SagaStatus.UNSET;\n        },\n        getWalletLayer1Status(state, action: PayloadAction<{ walletLayer1: WalletLayer1Map<object> }>) {\n            // @ts-ignore\n            if (action.error) {\n                state.status = SagaStatus.ERROR\n                // @ts-ignore\n                state.errorMessage = action.error\n            }\n            state.walletLayer1 = {...action.payload.walletLayer1};\n            state.status = SagaStatus.DONE\n        },\n        statusUnset: state => {\n            state.status = SagaStatus.UNSET\n        }\n    },\n});\nexport { walletLayer1Slice };\nexport const {updateWalletLayer1, getWalletLayer1Status, statusUnset, reset} = walletLayer1Slice.actions\n","import { useDispatch, useSelector } from 'react-redux'\nimport { updateWalletLayer1, reset,statusUnset } from './reducer';\nimport { WalletLayer1States } from './interface';\nimport React from 'react';\n\nexport function useWalletLayer1(): WalletLayer1States & {\n    updateWalletLayer1:()=> void,\n    statusUnset:()=> void,\n    resetLayer1:()=>void,\n} {\n    const walletLayer1:WalletLayer1States = useSelector((state: any) => state.walletLayer1)\n    const dispatch = useDispatch();\n\n    return {\n        ...walletLayer1,\n        resetLayer1:React.useCallback(()=>{\n            dispatch(reset(undefined))\n        },[dispatch]),\n        statusUnset:React.useCallback(()=>dispatch(statusUnset(undefined)),[dispatch]),\n        updateWalletLayer1:React.useCallback(()=>dispatch(updateWalletLayer1(undefined)),[dispatch]),\n    }\n\n}\n","import {\n    ChainId,\n    getAccountArg,\n    getAmmpoolArg,\n    getCandlestickArg,\n    getOrderArg,\n    getOrderBookArg,\n    getTickerArg,\n    getTradeArg,\n    toBig,\n} from 'loopring-sdk';\nimport { tickerService } from './tickerService';\nimport { ammPoolService } from './ammPoolService';\nimport { CustomError, ErrorMap } from '@loopring-web/common-resources';\nimport { LoopringAPI } from '../stores/apis/api';\n// import store from '../stores';\n// import { updateSocketURL } from '../stores/system';\n\n\nexport type SocketEvent = (e: any, ...props: any[]) => any\n\nexport enum SocketEventType {\n    pingpong = 'pingpong',\n    account = \"account\",\n    order = \"order\",\n    orderbook = \"orderbook\",\n    trade = \"trade\",\n    ticker = \"ticker\",\n    candlestick = \"candlestick\",\n    ammpool = \"ammpool\"\n}\n\nexport type SocketCallbackMap = {\n    // [SocketEventType.pingpong]:  { fn: SocketEvent, deps?: any[] },\n    [key in SocketEventType]?: { fn: SocketEvent, deps: any[] }\n}\n//\nexport type SocketEventMap = {\n    [key in SocketEventType]: SocketEvent\n}\n\nexport class LoopringSocket {\n    private static SocketEventMap: SocketEventMap = {\n        [ SocketEventType.account ]: (_e: any) => {\n\n        },\n        [ SocketEventType.order ]: (_e: any) => {\n\n        },\n        [ SocketEventType.orderbook ]: (_e: any) => {\n\n        },\n        [ SocketEventType.trade ]: (_e: any) => {\n\n        },\n        [ SocketEventType.ticker ]: (data: string[]) => {\n            const [symbol, timestamp, size, volume, open, high, low, close, count, bid, ask] = data;\n            // @ts-ignore\n            const [, base, quote] = symbol.match(/(\\w+)-(\\w+)/i);\n            const base_token_volume = size;\n            const quote_token_volume = volume;\n            const change = open === undefined || Number(open) === 0 ? undefined : (toBig(close).minus(open)).div(open)\n            tickerService.sendTicker({\n                [ symbol ]: {\n                    symbol, base, quote,\n                    base_token_volume,\n                    quote_token_volume,\n                    timestamp: Number(timestamp),\n                    change,\n                    base_fee_amt: undefined,\n                    quote_fee_amt: undefined,\n                    open, high, low, close, count, bid, ask\n                } as any\n            })\n        },\n        [ SocketEventType.candlestick ]: (_e: any) => {\n\n        },\n        [ SocketEventType.candlestick ]: (data: string) => {\n\n        },\n        [ SocketEventType.ammpool ]: (data: string[]) => {\n            // const [market,timestamp,size,volume,open,high,low,close,count,bid,ask] = data;\n            // @ts-ignore\n            const [poolName, poolAddress, pooled, [tokenId, volume], risky] = data;\n            // @ts-ignore\n            ammPoolService.sendAmmPool({poolName, poolAddress, pooled, lp: {tokenId, volume}, risky})\n        },\n        // @ts-ignore\n        [ SocketEventType.pingpong ]: (data: string, instance:InstanceType<LoopringSocket>) => {\n\n            if (data === 'ping') {\n                instance.loopringSocket.send('pong')\n            }\n        },\n    }\n    get loopringSocket(): WebSocket | undefined {\n        return this._loopringSocket;\n    }\n    get socketCallbackMap(): SocketCallbackMap | undefined {\n        return this._socketCallbackMap;\n    }\n    //TODO fill the socket receiver format callback\n\n    private _socketCallbackMap: SocketCallbackMap|undefined;\n    private _loopringSocket:WebSocket|undefined;\n    private __wsTimer__:{timer:NodeJS.Timer|-1,count:number} = {\n        timer:-1,\n        count:0\n    };\n    private _baseUrl:string;\n    constructor(url:string) {\n        // const url = ChainId.MAINNET === chainId ? process.env.REACT_APP_API_URL : process.env.REACT_APP_API_URL_UAT;\n        this._baseUrl = url; // baseSocket: string = `wss://ws.${url}/v3/ws?wsApiKey=${wsKey}`;\n    }\n\n    // private static PingPong = {\n    //     fn:\n    // }\n\n    public socketSendMessage = async ({socket, apiKey}: {\n        chainId: ChainId | 'unknown',\n        socket: { [ key: string ]: string[] }\n        apiKey?: string\n    }): Promise<boolean> => {\n        try {\n            if (socket && Reflect.ownKeys(socket).length) {\n                //register ping pong event\n                this.clearInitTimer(true);\n                this.resetSocketEvents();\n                const {topics} = this.makeMessageArray({socket});\n                if (!this.isConnectSocket() ) {\n                    await this.socketConnect({ topics, apiKey})\n                } else {\n\n                    this._loopringSocket?.send(this.makeTopics(topics))\n\n                }\n                return true\n            } else {\n                if (!this.isConnectSocket()) {\n                    this.socketClose();\n                }\n                return false\n            }\n        } catch (error) {\n            throw  new CustomError(ErrorMap.SOCKET_ERROR)\n        }\n\n    }\n    public socketClose = async () => {\n        let ws: WebSocket | undefined = this._loopringSocket;\n\n        return new Promise((reolve) => {\n            if (ws) {\n                ws.onclose = function (e) {\n                    reolve(`Socket is closed, ${e.reason}`)\n                };\n                ws.close();\n            } else {\n                Promise.resolve('no websocket')\n            }\n        })\n    }\n\n    public removeSocketEvents = (key: string) => {\n        // @ts-ignore\n        if (this._socketCallbackMap && this._socketCallbackMap[ key ]) {\n            // @ts-ignore\n            delete this._socketCallbackMap[ key ]\n        }\n    }\n\n    private makeMessageArray = ({socket}: { socket: { [ key: string ]: string[] } }): {\n        topics: any[]\n    } => {\n        let topics: any[] = [], list: any[] = []; // let registerDispatch = [];\n        Reflect.ownKeys(socket).forEach((eventType) => {\n            switch (eventType) {\n                case  SocketEventType.ticker:\n                    list = socket[ SocketEventType.ticker ].map(key => getTickerArg(key))\n                    if (list && list.length) {\n                        this.addSocketEvents(SocketEventType.ticker)\n                        topics = [...topics, ...list];\n                    }\n                    break\n                case  SocketEventType.account:\n                    if (socket[ SocketEventType.account ]) {\n                        list = [getAccountArg()]\n                    }\n                    if (list && list.length) {\n                        this.addSocketEvents(SocketEventType.account)\n                        topics = [...topics, ...list];\n                    }\n                    break;\n                case  SocketEventType.order:\n                    //FIX:  make order Topic\n                    list = socket[ SocketEventType.order ].map(key => getOrderArg(key))\n                    if (list && list.length) {\n                        this.addSocketEvents(SocketEventType.order)\n                        topics = [...topics, ...list];\n                    }\n                    break\n                case  SocketEventType.orderbook:\n                    //FIX:  make orderbook Topic\n                    list = socket[ SocketEventType.orderbook ].map(key => getOrderBookArg(key, 0))\n                    if (list && list.length) {\n                        this.addSocketEvents(SocketEventType.orderbook)\n                        topics = [...topics, ...list];\n                    }\n                    break\n                case  SocketEventType.trade:\n                    list = socket[ SocketEventType.trade ].map(key => getTradeArg(key))\n                    if (list && list.length) {\n                        this.addSocketEvents(SocketEventType.trade)\n                        topics = [...topics, ...list];\n                    }\n                    break\n                case  SocketEventType.candlestick:\n                    list = socket[ SocketEventType.candlestick ].map(key => getCandlestickArg(key))\n                    if (list && list.length) {\n                        this.addSocketEvents(SocketEventType.candlestick)\n                        topics = [...topics, ...list];\n                    }\n                    break\n                case  SocketEventType.ammpool:\n                    list = socket[ SocketEventType.ammpool ].map(key => getAmmpoolArg(key))\n                    if (list && list.length) {\n                        this.addSocketEvents(SocketEventType.ammpool)\n                        topics = [...topics, ...list];\n                    }\n                    break\n            }\n        })\n        return {topics}\n    }\n\n    private isConnectSocket = () => {\n        return !!(this._loopringSocket && this._loopringSocket.send);\n    }\n\n    private makeTopics = (topics: any, apiKey?: string) => {\n        let data: any = {\n            op: 'sub',\n            unsubscribeAll: 'true',\n            topics: topics,\n        }\n\n        if (apiKey) {\n            data.apiKey = apiKey\n        }\n        // console.log('Socket>>Socket',JSON.stringify(data));\n        return JSON.stringify(data)\n        // sendMessage(flat_txt)\n    }\n\n    private addSocketEvents = (type: keyof typeof SocketEventType,deps?:any[]) => {\n\n        this._socketCallbackMap = {\n            ...this._socketCallbackMap,\n            [ type ]: {\n                fn: LoopringSocket.SocketEventMap[type],\n                deps:deps?deps:[]\n            }\n        }\n    }\n\n    private socketConnect = async ({ topics, apiKey}: {\n       // chainId: ChainId | 'unknown',\n        topics: any[],\n        apiKey?: string\n    }) => {\n        try {\n            const self = this;\n            if (LoopringAPI.wsAPI && topics) {\n                const {wsKey} = await LoopringAPI.wsAPI.getWsKey();\n                this._loopringSocket = new WebSocket(`${this._baseUrl}?wsApiKey=${wsKey}`);\n\n                this._loopringSocket.onopen = function () {\n                    console.warn('Socket>>Socket', \"WebSocket is open now.\");\n                    if(self._loopringSocket && self._loopringSocket.readyState === WebSocket.OPEN){\n                        self._loopringSocket.send(self.makeTopics(topics))\n                    }\n\n                };\n                this._loopringSocket.onmessage = function (e) {\n                    const {data} = e;\n                    // data.topic.topic;\n                    if (data === 'ping' && self._socketCallbackMap) {\n                        // console.log('Socket>>Socket ping:', e);\n                        self._socketCallbackMap?.pingpong?.fn.call( self, data, ...self._socketCallbackMap.pingpong.deps);\n                    } else {\n                        const result = JSON.parse(data);\n                        const {topics, topic} = result;\n                        if (topics) {\n                            // console.log('Socket>>Socket topics first return', topics);\n                        }\n                        if (topic && topic.topic && self._socketCallbackMap) {\n                            const {topic: {topic}, data} = result\n                             self._socketCallbackMap[ topic.topic ]?.fn.call( self, data, ...self._socketCallbackMap[ topic.topic ].deps);\n\n                        }\n\n                    }\n                    return false;\n                };\n                this._loopringSocket.onclose = async function (e) {\n                    // console.error('Socket>>Socket', e);\n                    if (self._loopringSocket) {\n                        self._loopringSocket = undefined;\n                    }\n                    console.log('Socket>>Socket', 'Socket is closed. Reconnect will be attempted in 1 second.', e.reason);\n                    self.clearInitTimer()\n                    if (self.__wsTimer__.count < 5) {\n                        self.__wsTimer__.timer = setTimeout(function () {\n                            self.socketConnect.call(self, { topics, apiKey});\n                        }, 1000 * self.__wsTimer__.count);\n                    }\n                };\n                this._loopringSocket.onerror = function (err: Event) {\n                    console.error('Socket>>Socket', 'Socket encountered error:', 'Closing socket', err);\n                };\n\n            }\n        } catch (error) {\n            console.error('Socket>>Socket', 'connect error, not from reconnect')\n            // @ts-ignore\n            if (this._loopringSocket) {\n                // @ts-ignore\n                this._loopringSocket.close()\n            }\n        }\n    }\n    private clearInitTimer = (init?: boolean) => {\n\n        if (this.__wsTimer__) {\n            if (this.__wsTimer__.timer !== -1) {\n                clearTimeout(this.__wsTimer__.timer)\n            }\n            this.__wsTimer__.timer = -1\n            this.__wsTimer__.count++;\n        }\n        if (init) {\n            this.__wsTimer__ = {\n                //...self.__wsTimer__,\n                timer: -1,\n                count: 0\n            }\n        }\n    }\n    private resetSocketEvents = () => {\n        this._socketCallbackMap = undefined;\n        this.addSocketEvents(SocketEventType.pingpong,[this])\n    }\n}\n// const socketInstance = new LoopringSocket();\n// // @ts-ignore\n// window.loopringSocket = socketInstance;\n//\n// export default socketInstance;\n\n\n\n","import { Subject } from 'rxjs';\n// import { TradeFloat } from '@loopring-web/common-resources';\nimport { LoopringMap } from 'loopring-sdk/dist/defs/loopring_defs';\nimport { TickerData } from 'loopring-sdk';\nimport { makeTickerMap } from '../hooks/help';\nimport { TickerMap } from '../stores/ticker';\n\nconst subject = new Subject<{ tickerMap: TickerMap<{ [ key: string ]: any }> }>();\n\n// export type TickerMap<R> = {\n//     [key in keyof R]:TradeFloat\n// }\n// <R extends {[key:string]:any}>\n  //<R>\nexport const tickerService = {\n    sendTicker: (_tickerMap:LoopringMap<TickerData>) => {\n       const tickerMap:TickerMap<{[key:string]:any}> = makeTickerMap({tickerMap:_tickerMap})\n       subject.next({ tickerMap })\n    },\n    // clearMessages: () => subject.next(),\n    onSocket: () => subject.asObservable()\n};","import { Subject } from 'rxjs';\nimport { TradeFloat } from '@loopring-web/common-resources';\n\nconst subject = new Subject();\n\nexport type AmmPoolMap<R> = {\n    [key in keyof R]:TradeFloat\n}\n// <R extends {[key:string]:any}>\n\nexport const ammPoolService = {\n    sendAmmPool: (ammPoolMap:AmmPoolMap<{[key:string]:any}>) => subject.next({ ammPoolMap: ammPoolMap }),\n    // clearMessages: () => subject.next(),\n    onSocket: () => subject.asObservable()\n};","import { all, call, fork, put, take, takeLatest } from \"redux-saga/effects\"\nimport { getSystemStatus, updateRealTimeObj, updateSystem } from './reducer'\nimport { ENV, NETWORKEXTEND } from \"./interface\"\nimport store from '../index';\n// import { reset } from '../account/reducer';\nimport { ChainId } from 'loopring-sdk';\nimport { exchangeAPI, LoopringAPI } from '../apis/api';\nimport { getAmmMap, updateRealTimeAmmMap } from '../Amm/AmmMap';\nimport { getTokenMap } from '../token';\nimport { CustomError, ErrorMap } from '@loopring-web/common-resources';\nimport { getAmmActivityMap } from '../Amm/AmmActivityMap';\nimport { updateWalletLayer1 } from '../walletLayer1';\nimport { delay } from 'rxjs/operators';\nimport { LoopringSocket } from '../../services/socketUtil';\nimport { statusUnset as accountStatusUnset } from '../account';\n\nconst initConfig = function* <R extends { [ key: string ]: any }>(chainId: ChainId | 'unknown') {\n    // store.dispatch(updateAccountStatus());\n    const {tokenSymbolMap: tokensMap} = yield call(async () => await LoopringAPI.exchangeAPI?.getTokens())\n    const {ammpools} = yield call(async () => await LoopringAPI.ammpoolAPI?.getAmmPoolConf());\n    const {pairs, marketArr, tokenArr, markets} = yield call(async () => LoopringAPI.exchangeAPI?.getMixMarkets());\n    store.dispatch(getTokenMap({tokensMap, marketMap: markets, pairs, marketArr, tokenArr}))\n    yield take('tokenMap/getTokenMapStatus');\n    // let basePath: string = `wss://ws.${baseURL}/v3/ws?wsApiKey=${wsKey}`\n    store.dispatch(getAmmMap({ammpools}))\n    store.dispatch(getAmmActivityMap({ammpools}))\n    if (store.getState().tokenMap.status === 'ERROR') {\n\n    }\n\n    yield delay(10);\n    //IF already connect has address, getInfo walletLayer 1\n    const {account, walletLayer1} = store.getState() //.account.accAddr && !store.getState().walletLayer1.walletLayer1\n    if (account.accAddress && walletLayer1.walletLayer1 === undefined) {\n        store.dispatch(updateWalletLayer1(undefined));\n    }\n    store.dispatch(accountStatusUnset(undefined));\n}\n\nconst getSystemsApi = async <R extends { [ key: string ]: any }>(chainId: any) => {\n    //TODO get some other reuqired id...... put into system\n    // const { chainId } = system\n    const env = window.location.hostname === 'localhost' ? ENV.DEV : ChainId.GORLI === chainId ? ENV.UAT : ENV.PROD\n    chainId = ChainId.GORLI === chainId ? ChainId.GORLI : ChainId.MAINNET === chainId ? ChainId.MAINNET : NETWORKEXTEND.NONETWORK\n\n    if (chainId === NETWORKEXTEND.NONETWORK) {\n        throw new CustomError(ErrorMap.NO_NETWORK_ERROR)\n    } else {\n        LoopringAPI.InitApi(chainId as ChainId);\n        if (LoopringAPI.exchangeAPI) {\n            const {exchangeInfo} = (await LoopringAPI.exchangeAPI.getExchangeInfo())\n            const faitPrices = (await LoopringAPI.exchangeAPI.getFiatPrice({legal: 'USD'})).fiatPrices\n            const faitPricesY = (await LoopringAPI.exchangeAPI.getFiatPrice({legal: 'CNY'})).fiatPrices\n            const gasPrice = (await exchangeAPI().getGasPrice()).gasPrice / 1e+9;\n            // : process.env.REACT_APP_API_URL_UAT;\n            const baseURL = ChainId.MAINNET === chainId ? `https://${process.env.REACT_APP_API_URL}` : `https:/${process.env.REACT_APP_API_URL_UAT}`\n            const socketURL = ChainId.MAINNET === chainId ? `wss://ws.${process.env.REACT_APP_API_URL}/v3/ws` : `wss://ws.${process.env.REACT_APP_API_URL_UAT}/v3/ws`;\n            const etherscanUrl = ChainId.MAINNET === chainId ? `https://etherscan.io/address/` : `https://goerli.etherscan.io/address/`\n\n            window.loopringSocket = new LoopringSocket(socketURL);\n\n            const forex = faitPricesY[ 'USDT' ].price;\n            let {__timer__} = store.getState().system;\n            __timer__ = ((__timer__) => {\n                if (__timer__ && __timer__ !== -1) {\n                    clearInterval(__timer__);\n                }\n                return setInterval(async () => {\n                    const faitPrices = (await exchangeAPI().getFiatPrice({legal: 'CNY'})).fiatPrices\n                    const gasPrice = (await exchangeAPI().getGasPrice()).gasPrice / 1e+9\n                    const forex = faitPrices[ 'USDT' ]?.price\n                    store.dispatch(updateRealTimeAmmMap(undefined))\n                    store.dispatch(updateRealTimeObj({faitPrices, gasPrice, forex}))\n                }, 300000)   //\n\n            })(__timer__);\n            return {\n                chainId,\n                etherscanUrl,\n                env,\n                baseURL,\n                socketURL,\n                faitPrices,\n                gasPrice,\n                forex,\n                exchangeInfo,\n                __timer__\n            }\n        }\n    }\n}\n\nexport function* getUpdateSystem({payload}: any) {\n    try {\n        // @ts-ignore\n        const {chainId} = payload;\n        const {\n            env,\n            baseURL,\n            faitPrices,\n            gasPrice,\n            forex,\n            exchangeInfo,\n            etherscanUrl,\n            __timer__\n        } = yield call(getSystemsApi, chainId);\n\n        yield put(getSystemStatus({env, baseURL, faitPrices, gasPrice, forex, exchangeInfo, etherscanUrl, __timer__}));\n        yield call(initConfig, chainId)\n        //TODO check wallect store\n    } catch (err) {\n        yield put(getSystemStatus(err));\n    }\n}\n\nfunction* systemSaga() {\n    yield all([takeLatest(updateSystem, getUpdateSystem)]);\n}\n\nexport const systemForks = [\n    fork(systemSaga),\n]\n","import { all, call, fork, put, takeLatest } from \"redux-saga/effects\";\nimport { getWalletLayer1Status, updateWalletLayer1 } from './reducer';\nimport { CoinKey, PairKey, WalletCoin } from '@loopring-web/common-resources';\nimport { exchangeAPI } from '../apis/api';\nimport store from '../index';\nimport { fromWEI } from 'loopring-sdk';\nimport { useAccount } from '../account';\n\ntype WalletLayer1Map<R extends {[key:string]:any}> = {\n    [key in CoinKey<R>|PairKey<R>]?:WalletCoin<R>\n}\n\nconst getWalletLayer1Balance = async <R extends {[key:string]:any}>()=> {\n    //TODO: check is connect and active and assign walletLayer1\n    //TODO: if not reject directory, any error happen will clean the\n    // await sdk\n    const exchangeApi = exchangeAPI();\n    const {accAddress} = store.getState().account;\n    const {tokenMap,marketCoins} = store.getState().tokenMap;\n    if(marketCoins && tokenMap) {\n        const {ethBalance} =  await exchangeApi.getEthBalances({owner:accAddress});\n        const {tokenBalances} =  await exchangeApi.getTokenBalances({owner:accAddress,token: marketCoins.join()},tokenMap);\n        tokenBalances['ETH'] = ethBalance;\n        let walletLayer1;\n        if(tokenBalances) {\n            walletLayer1 = Reflect.ownKeys(tokenBalances).reduce((prev,item)=>{\n                return   {...prev, [ item ]:{\n                        belong: item,\n                        count: fromWEI(tokenMap, item, tokenBalances[item as string]),\n                    }\n                }\n            },{} as WalletLayer1Map<R>)\n        }\n        return {walletLayer1}\n    }\n\n};\n\nexport function* getPostsSaga() {\n    try {\n        //\n        const {walletLayer1} = yield call(getWalletLayer1Balance);\n        yield put(getWalletLayer1Status({walletLayer1}));\n    } catch (err) {\n        yield put(getWalletLayer1Status(err));\n    }\n}\n\nexport function* walletLayer1Saga() {\n    yield all([takeLatest(updateWalletLayer1, getPostsSaga)]);\n}\n\nexport const walletLayer1Fork = [\n    fork(walletLayer1Saga),\n    // fork(tokenPairsSaga),\n]\n\n","import { createSlice, PayloadAction, Slice } from '@reduxjs/toolkit'\nimport { WalletLayer2Map, WalletLayer2States } from './interface';\nimport { SagaStatus } from '@loopring-web/common-resources';\n\n\nconst initialState: WalletLayer2States = {\n    walletLayer2: undefined,\n    status: 'DONE',\n    errorMessage: null,\n}\nconst walletLayer2Slice: Slice = createSlice({\n    name: 'walletLayer2',\n    initialState,\n    reducers: {\n        updateWalletLayer2(state, action: PayloadAction<string | undefined>) {\n            state.status = SagaStatus.PENDING\n        },\n        reset(state, action: PayloadAction<string | undefined>) {\n            state.walletLayer2 = undefined;\n            state.status = SagaStatus.UNSET;\n        },\n        getWalletLayer2Status(state, action: PayloadAction<{ walletLayer2: WalletLayer2Map<object> }>) {\n            // @ts-ignore\n            if (action.error) {\n                state.status = SagaStatus.ERROR\n                // @ts-ignore\n                state.errorMessage = action.error\n            }\n            state.walletLayer2 = {...action.payload.walletLayer2};\n            state.status = SagaStatus.DONE\n        },\n        statusUnset: state => {\n            state.status = SagaStatus.UNSET\n        }\n    },\n});\nexport { walletLayer2Slice };\nexport const {updateWalletLayer2, getWalletLayer2Status, statusUnset, reset} = walletLayer2Slice.actions\n","import { all, call, fork, put, takeLatest } from \"redux-saga/effects\";\nimport { getWalletLayer2Status, updateWalletLayer2 } from './reducer';\nimport { CoinKey, PairKey, WalletCoin } from '@loopring-web/common-resources';\nimport { userAPI } from '../apis/api';\nimport store from '../index';\n\ntype WalletLayer2Map<R extends { [ key: string ]: any }> = {\n    [key in CoinKey<R> | PairKey<R>]?: WalletCoin<R>\n}\n\nconst getWalletLayer2Balance = async <R extends { [ key: string ]: any }>() => {\n    //TODO: check is connect and active and assign walletLayer1\n    //TODO: if not reject directory, any error happen will clean the\n    // await sdk\n    // const exchangeApi = exchangeAPI();\n    const userApi = userAPI();\n    const {accountId, apiKey} = store.getState().account;\n    const {tokenMap, idIndex, marketCoins} = store.getState().tokenMap;\n    let walletLayer2;\n    if (apiKey && accountId) {\n        // @ts-ignore\n        const {userBalances} = await userApi.getUserBalances({accountId: accountId, tokens: ''}, apiKey)\n        if (userBalances) {\n            // tokenId: number;\n            // total: string;\n            // locked: string;\n            // pending: {\n            //     withdraw: string;\n            //     deposit: string;\n            // };\n            walletLayer2 = Reflect.ownKeys(userBalances).reduce((prev, item) => {\n                // @ts-ignore\n                return {...prev, [ idIndex[ item ] ]: userBalances[ Number(item) ]}\n            }, {} as WalletLayer2Map<R>)\n        }\n    }\n\n    return {walletLayer2}\n};\n\nexport function* getPostsSaga() {\n    try {\n        //\n        const {walletLayer2} = yield call(getWalletLayer2Balance);\n        yield put(getWalletLayer2Status({walletLayer2}));\n    } catch (err) {\n        yield put(getWalletLayer2Status(err));\n    }\n}\n\nexport function* walletLayer2Saga() {\n    yield all([takeLatest(updateWalletLayer2, getPostsSaga)]);\n}\n\n// export function* walletLayer2Saga() {\n//     yield all([takeLatest(updateWalletLayer2, getPostsSaga)]);\n// }\n\n\nexport const walletLayer2Fork = [\n    fork(walletLayer2Saga),\n    // fork(tokenPairsSaga),\n]\n\n","import { createSlice, PayloadAction, Slice } from '@reduxjs/toolkit'\nimport { UserRewardsStates } from './interface';\nimport { SagaStatus } from '@loopring-web/common-resources';\n\nconst initialState: UserRewardsStates = {\n    userRewardsMap: undefined,\n    status: 'PENDING',\n    errorMessage: null,\n    __timer__: -1,\n}\nconst userRewardsMapSlice: Slice<UserRewardsStates> = createSlice({\n    name: 'userRewardsMap',\n    initialState,\n    reducers: {\n        getUserRewards(state, action: PayloadAction<undefined>) {\n            state.status = SagaStatus.PENDING\n        },\n        getUserRewardsStatus(state, action: PayloadAction<UserRewardsStates>) {\n            // @ts-ignore\n            if (action.error) {\n                state.status = SagaStatus.ERROR\n                // @ts-ignore\n                state.errorMessage = action.error\n            }\n            state.userRewardsMap = {...state.userRewardsMap, ...action.payload.userRewardsMap};\n            if (action.payload.__timer__) {\n                state.__timer__ = action.payload.__timer__\n            }\n            state.status = SagaStatus.DONE\n        },\n        statusUnset: state => {\n            state.status = SagaStatus.UNSET\n        }\n\n    },\n});\nexport { userRewardsMapSlice };\nexport const {getUserRewards, getUserRewardsStatus, statusUnset} = userRewardsMapSlice.actions;","import { all, call, fork, put, takeLatest } from \"redux-saga/effects\"\nimport { getUserRewards, getUserRewardsStatus } from './reducer'\n\nimport store from '../index';\nimport { exchangeAPI, LoopringAPI } from '../apis/api';\nimport { updateRealTimeAmmMap } from '../Amm/AmmMap';\nimport { updateRealTimeObj } from '../system';\n\nconst getUserRewardsApi = async <R extends {[key:string]:any}>(list:Array<keyof R>)=> {\n\n    // const data:UserRewardsMap<R> = {}\n\n    // const userRewardss = await exchangeAPI().getUserRewards({market: list.join(',')})\n    const {accountId} = store.getState().account\n    let {__timer__} = store.getState().userRewardsMap;\n    \n    if(LoopringAPI.ammpoolAPI && accountId ) {\n        __timer__ = ((__timer__) => {\n            if (__timer__ && __timer__ !== -1) {\n                clearInterval(__timer__);\n            }\n            return setTimeout(async () => {\n                store.dispatch(getUserRewards(undefined))\n            }, 300000 * 4)   //\n\n        })(__timer__);\n        return  LoopringAPI.ammpoolAPI.getAmmPoolUserRewards({owner:accountId}).then(({ammUserRewardMap}) => {\n            return {data:ammUserRewardMap,__timer__}\n        })\n    }else{\n        if (__timer__ && __timer__ !== -1) {\n            clearInterval(__timer__);\n        }\n        if(accountId) {\n            return  Promise.reject({data:undefined,__timer__:-1})\n        }else{\n            return Promise.resolve({data:undefined,__timer__:-1})\n        }\n\n    }\n\n}\n\nexport function* getPostsSaga({payload}:any) {\n    try {\n        // @ts-ignore\n        // const { userRewardsKey,userRewardsKeys } = payload;\n        // console.log('getPostsSaga userRewardsKey',userRewardsKey, userRewardsKeys)\n        // if(userRewardsKey || (userRewardsKeys && userRewardsKeys.length)) {\n        const {data,__timer__}  = yield call(getUserRewardsApi);\n        yield put(getUserRewardsStatus({userRewardsMap:data,__timer__}));\n\n        // }else{\n        //     throw new CustomError(ErrorMap.NO_SDK);\n        // }\n    } catch (err) {\n        yield put(getUserRewardsStatus(err));\n    }\n}\n\nfunction* userRewardsSaga() {\n    yield all([takeLatest(getUserRewards, getPostsSaga)]);\n}\n\nexport const userRewardsForks = [\n    fork(userRewardsSaga),\n    // fork(userRewardssSaga),\n]\n ","import { all, call, fork, put, takeLatest } from 'redux-saga/effects';\nimport { getSocketStatus, sendSocketTopic, socketEnd } from './reducer'\nimport store from '../index';\nexport function* closeSocket(){\n    try {\n        if (window.loopringSocket){\n            yield call(window.loopringSocket.socketClose)\n        }\n        yield put(getSocketStatus(undefined));\n        //TODO check wallect store\n    } catch (err) {\n        yield put(getSocketStatus(err));\n    }\n}\nexport function* sendMessage({payload}: any){\n    try {\n        const { apiKey } = store.getState().account;\n        const { socket } = payload;\n        if (window.loopringSocket){\n            yield call(window.loopringSocket.socketSendMessage, { socket, apiKey })\n        }\n        yield put(getSocketStatus(undefined));\n    } catch (err) {\n        yield put(getSocketStatus(err));\n    }\n}\n\nfunction* socketEndSaga(){\n    yield all([takeLatest(socketEnd, closeSocket)]);\n}\n\nfunction* socketSendMessageSaga() {\n    yield all([takeLatest(sendSocketTopic, sendMessage)]);\n}\n\n\n\nexport const socketForks = [\n    // fork(socketSaga),\n    fork(socketEndSaga),\n    fork(socketSendMessageSaga),\n //   fork(initConfig),\n]\n\n\n\n","import { all, fork, put, takeLatest, call } from \"redux-saga/effects\"\nimport {\n    cleanAccountStatus,\n    // cleanAccountStatus,\n    nextAccountStatus,\n    // restAccountStatus,\n    updateAccountStatus\n} from './reducer';\nimport { PayloadAction } from '@reduxjs/toolkit';\nimport { Account, AccountStatus, ConnectProviders, SagaStatus } from '@loopring-web/common-resources';\nimport { connectProvides } from '@loopring-web/web3-provider';\n\n\nexport function* accountUpdateSaga({payload}: PayloadAction<Partial<Account>>) {\n    try {\n        // let data: { accountState: Partial<AccountState> };\n        // const {currentState} = yield select();\n        const account = payload;\n        yield put(nextAccountStatus({\n            // ...currentState,\n            ...account\n        }));\n\n    } catch (err) {\n        yield put(nextAccountStatus(err));\n    }\n}\nexport function* cleanAccountSaga({payload}: PayloadAction<{shouldUpdateProvider?:boolean|undefined}>) {\n    try {\n        let account:Partial<Account> = {\n            accAddress : '',\n            readyState : AccountStatus.UN_CONNECT,\n            accountId : -1,\n            apiKey : '',\n            eddsaKey : '',\n            publicKey : {},\n            level : '',\n            nonce : -1,\n        }\n\n        if(payload && payload.shouldUpdateProvider) {\n            yield call(async ()=> await connectProvides.clear())\n            account = {\n                ...account,\n                connectName:ConnectProviders.unknown\n            }\n        }\n        yield put(nextAccountStatus({\n            ...account\n        }));\n\n    } catch (err) {\n        yield put(nextAccountStatus(err));\n    }\n}\n\nfunction* accountSage() {\n    yield all([takeLatest(updateAccountStatus, accountUpdateSaga)]);\n}\n\n// function* goCleanAccount({payload}: PayloadAction<undefined>) {\n//     yield put(cleanAccountStatus(undefined));\n// }\n\nfunction* accountRestSage() {\n    yield all([takeLatest(cleanAccountStatus, cleanAccountSaga)]);\n}\n\nexport const accountFork = [\n    fork(accountSage),\n    fork(accountRestSage)\n]\n\n// const subject = new Subject<{ command: keyof typeof StorageCommands, data?: any }>();\n// const goNextAccountStatus = async (currentState: Partial<AccountState>,\n//                                    nextState: Partial<AccountState>): Promise<{ accountState: Partial<AccountState> }> => {\n//     // let newAccountState: Partial<AccountState>\n//     switch (nextState) {\n//         case AccountStatus.RESET:\n//             connectProvides.clear()\n//             //TODO sessionStorage clear\n//             break;\n//         case AccountStatus.UN_CONNECT:\n//             console.log('connectName:', nextState.connectName, 'readyState:', currentState.readyState)\n//             // if(nextState.readyState !== currentState.readyState )  {\n//             //     await connect({...currentState,...nextState})\n//             // }\n//             // if (success) {\n//             //     nextState\n//             // } else {\n//             //     return {accountState:currentAccountState}\n//             // }\n//             break;\n//         // case AccountStatus.CONNECT:\n//         case AccountStatus.DEPOSITING:\n//             break;\n//         case AccountStatus.NO_ACCOUNT:\n//             // if (success) {\n//             //\n//             // } else {\n//             //   return {accountState:currentAccountState}\n//             // }\n//             break;\n//         case AccountStatus.LOCKED:\n//         // if (success) {\n//         //\n//         //   return await goNextAccountStatus({...currentAccountState, readyState: AccountStatus.ACTIVATED})\n//         //\n//         // } else {\n//         //   return {accountState:currentAccountState}\n//         // }\n//\n//         case AccountStatus.ACTIVATED:\n//\n//         // goNextAccountStatus({\n//         //   ...newAccountState\n//         //   readyState: AccountStatus.LOCKED\n//         // })\n//         // return {accountState: nextState}\n//\n//     }\n//     return {accountState: nextState}\n// }\n//\n// const goAccountLocked = async (accountState: AccountState): Promise<{ accountState: Partial<AccountState> }> => {\n//     if (accountState.readyState === AccountStatus.ACTIVATED) {\n//         //TODO GOBACK TO LOCKED STATE\n//         return {\n//             accountState: {\n//                 ...accountState,\n//                 readyState: AccountStatus.LOCKED\n//             }\n//         }\n//     } else {\n//     }\n//     return {\n//         accountState: {}\n//     }\n// }\n// const goCleanAccount = async (): Promise<{ accountState: Partial<AccountState> }> => {\n//\n//     subject.next({command: StorageCommands.CLEAN})\n//     return {\n//         accountState: {\n//             accAddress: '',\n//             readyState: AccountStatus.RESET,\n//             accountId: -1,\n//             apiKey: '',\n//             eddsaKey: '',\n//             connectName: ConnectProviders.UnKnow,\n//             status: 'UNSET',\n//             errorMessage: null,\n//         }\n//     }\n// }\n//\n//\n//\n\n","import { all } from \"redux-saga/effects\"\n// import machine from \"../state_machine/fsm/machine\"\n// import { TRANSITION } from \"../state_machine/fsm/actionTypes\"\n// import { helloSaga } from \"./sagas\"\nimport { tokenSaga } from './token/saga';\nimport { ammForks } from './Amm';\nimport { tickerForks } from './ticker/saga';\nimport { systemForks } from './system/saga';\nimport { walletLayer1Fork } from './walletLayer1/saga';\nimport { walletLayer2Fork } from './walletLayer2/saga';\nimport { userRewardsForks } from './userRewards/saga';\nimport { socketForks } from './socket/saga';\nimport { accountFork } from './account/saga';\n\n\n// https://css-tricks.com/finite-state-machines-with-react/\n// https://musing-rosalind-2ce8e7.netlify.com/?machine=%7B%22initial%22%3A%22initial%22%2C%22states%22%3A%7B%22initial%22%3A%7B%22on%22%3A%7B%22LOGIN%22%3A%22loggedIn%22%2C%22LOGOUT%22%3A%22loggedOut%22%7D%7D%2C%22loggedOut%22%3A%7B%22on%22%3A%7B%22SUBMIT%22%3A%22loading%22%7D%7D%2C%22loading%22%3A%7B%22on%22%3A%7B%22SUCCESS%22%3A%22loggedIn%22%2C%22FAIL%22%3A%22loggedOut%22%7D%7D%2C%22loggedIn%22%3A%7B%22onEntry%22%3A%5B%22SET_TOKEN%22%5D%2C%22onExit%22%3A%5B%22CLEAR_TOKEN%22%5D%2C%22on%22%3A%7B%22LOGOUT%22%3A%22loggedOut%22%7D%7D%7D%7D\n\n// function* machineHandler(event: any, action: any) {\n//\n//   // @ts-ignore\n//   const currentAppState = yield select((state) => { state.account.status })\n//   const nextAppState = machine.transition(currentAppState, event)\n//\n//   yield put({\n//     type: \"APP_STATE/\" + nextAppState.value,\n//     payload: {\n//       value: nextAppState.value\n//     }\n//   });\n//\n//   console.debug(\"-> from \" + currentAppState + \" to \" + nextAppState);\n//\n//   for (let i = 0; i < nextAppState.actions.length; i++) {\n//     yield put({\n//       type: nextAppState.actions[i],\n//       payload: action\n//     });\n//   }\n// }\n\n// function* watchTransition() {\n//   yield takeEvery(TRANSITION, function*(action: any) {\n//     yield machineHandler(action.event, action.payload);\n//   });\n// }\n\nfunction* mySaga() {\n    yield all([\n        // fork(helloSaga),\n        // fork(watchTransition),\n        ...tokenSaga,\n        ...walletLayer1Fork,\n        ...walletLayer2Fork,\n        ...systemForks,\n        ...ammForks,\n        ...tickerForks,\n        ...userRewardsForks,\n        ...socketForks,\n        ...accountFork\n\n    ]);\n}\n\nexport default mySaga;\n","import { useDispatch, useSelector } from 'react-redux'\nimport { updateSystem } from './reducer';\nimport { System, SystemStatus } from './interface';\nimport React from 'react';\nimport { statusUnset } from '../Amm/AmmMap';\n\nexport function useSystem(): SystemStatus & {\n    updateSystem:(system:Partial<System< {[key:string]:any}>>)=>void,\n    statusUnset:()=>void,\n} {\n    const system:SystemStatus = useSelector((state: any) => state.system)\n    const dispatch = useDispatch();\n    return {\n        ...system,\n        statusUnset:React.useCallback(()=>dispatch(statusUnset(undefined)),[dispatch]),\n        updateSystem:React.useCallback((system:Partial<System<{[key:string]:any}>>)=>dispatch(updateSystem(system)),[dispatch]),\n    }\n\n}\n","let _myLog;\nif (process.env.NODE_ENV !== 'production') {\n    _myLog = console.log;\n}else{\n    _myLog = function(message?: any, ...optionalParams: any[]){};\n}\nlet _myError;\nif (process.env.NODE_ENV !== 'production') {\n    _myError =  console.error;\n}else{\n    _myError = function(message?: any, ...optionalParams: any[]){};\n}\nexport const myLog = _myLog;\nexport const myError = _myError;","import { useDispatch, useSelector } from 'react-redux'\nimport { reset, statusUnset, updateWalletLayer2 } from './reducer';\nimport { WalletLayer2States } from './interface';\nimport { myLog } from 'utils/log_tools';\nimport _ from 'lodash'\nimport React from 'react';\nimport { TOAST_TIME, UPDATE_ACC_DELAY } from 'defs/common_defs';\n\nexport function useWalletLayer2(): WalletLayer2States & {\n    delayAndUpdateWalletLayer2: () => Promise<void>,\n    updateWalletLayer2: () => void,\n    statusUnset: () => void,\n    resetLayer2: () => void,\n} {\n    const walletLayer2: WalletLayer2States = useSelector((state: any) => state.walletLayer2)\n    const dispatch = useDispatch();\n\n    return {\n        ...walletLayer2,\n        resetLayer2: React.useCallback(() => {\n            dispatch(reset(undefined))\n        }, [dispatch]),\n        statusUnset: React.useCallback(() => dispatch(statusUnset(undefined)), [dispatch]),\n        updateWalletLayer2: React.useCallback(() => dispatch(updateWalletLayer2(undefined)), [dispatch]),\n        delayAndUpdateWalletLayer2: React.useCallback(async () => {\n            myLog('try to delayAndUpdateWalletLayer2!' + new Date().getTime())\n            _.delay(() => {\n                dispatch(updateWalletLayer2(undefined))\n                myLog('try to delayAndUpdateWalletLayer2 updated!' + new Date().getTime())\n                return Promise.resolve()\n            }, UPDATE_ACC_DELAY);\n        }, [dispatch]),\n    }\n\n}\n","import { useDispatch, useSelector } from 'react-redux'\nimport { getUserRewards, statusUnset } from './reducer';\nimport { UserRewardsStates } from './interface';\nimport React from 'react';\n\nexport function useUserRewards(): UserRewardsStates & {\n    getUserRewards:()=>void,\n    statusUnset:()=>void,\n} {\n    const userRewardsMap:UserRewardsStates = useSelector((state: any) => state.userRewardsMap)\n    const dispatch = useDispatch();\n    return {\n        ...userRewardsMap,\n        statusUnset:React.useCallback(()=>dispatch(statusUnset(undefined)),[dispatch]),\n        getUserRewards: React.useCallback(()=>dispatch(getUserRewards(undefined)),[dispatch]),\n    }\n\n}\n","import { createSlice, PayloadAction, Slice } from '@reduxjs/toolkit'\nimport { SliceCaseReducers } from '@reduxjs/toolkit/src/createSlice'\n\nexport interface Confirmation {\n    confirmed: boolean\n}\n\nconst initialState: Confirmation = {\n    confirmed: false,\n}\n\nconst confirmationSlice: Slice<Confirmation> = createSlice<Confirmation, SliceCaseReducers<Confirmation>, 'confirmation'>({\n    name: 'confirmation',\n    initialState,\n    reducers: {\n        confirm(state: Confirmation, action: PayloadAction<string>) {\n            state.confirmed = true\n        },\n    },\n});\n\nexport { confirmationSlice }\nexport const { confirm } = confirmationSlice.actions\n","import { createSlice, PayloadAction, Slice } from '@reduxjs/toolkit'\nimport { FavoriteMarketStates } from './interface';\nimport { SliceCaseReducers } from '@reduxjs/toolkit/src/createSlice';\n\nconst favoriteMarketSlice: Slice<FavoriteMarketStates> = createSlice<FavoriteMarketStates,SliceCaseReducers<FavoriteMarketStates>,'favoriteMarket'>({\n    name: 'favoriteMarket',\n    initialState: [],\n    reducers: {\n        clearAll(state:FavoriteMarketStates, action: PayloadAction<undefined>) {\n            state.length = 0;\n        },\n        removeMarket(state:FavoriteMarketStates, action: PayloadAction<string>) {\n            const pair = action.payload\n            if (pair && state.includes(pair)) {\n                const index = state.findIndex(_pair => _pair === pair)\n                state.splice(index, 1)\n            }\n        },\n        addMarket(state:FavoriteMarketStates, action: PayloadAction<string>) {\n            const pair = action.payload\n            if (pair && state.findIndex((_pair: string) => _pair === pair) === -1) {\n                state.push(pair)\n            }\n        },\n        addMarkets(state:FavoriteMarketStates, action: PayloadAction<string[]>) {\n            const pairs = action.payload\n            if (pairs.length) {\n                pairs.forEach(pair => {\n                    if (pair && state.findIndex((_pair: string) => _pair === pair) === -1) {\n                        state.push(pair)\n                    }\n                })\n            }\n        },\n\n    },\n});\nexport { favoriteMarketSlice };\nexport const {clearAll, removeMarket, addMarket, addMarkets} = favoriteMarketSlice.actions\n","import { createSlice, PayloadAction, Slice } from '@reduxjs/toolkit'\nimport { SliceCaseReducers } from '@reduxjs/toolkit/src/createSlice'\n\nexport interface OnchainHashInfo {\n    depositHash: string | undefined\n    withdrawHash: string[]\n}\n\nconst initialState: OnchainHashInfo = {\n    depositHash: undefined,\n    withdrawHash: [],\n}\n\nconst onchainHashInfoSlice: Slice<OnchainHashInfo> = createSlice<OnchainHashInfo, SliceCaseReducers<OnchainHashInfo>, 'onchainHashInfo'>({\n    name: 'onchainHashInfo',\n    initialState,\n    reducers: {\n        clearAll(state: OnchainHashInfo, action: PayloadAction<undefined>) {\n            state = initialState\n        },\n        clearDepositHash(state: OnchainHashInfo, action: PayloadAction<string>) {\n            state.depositHash = undefined\n        },\n        updateDepositHash(state: OnchainHashInfo, action: PayloadAction<string>) {\n            state.depositHash = action.payload\n        }\n    },\n});\n\nexport { onchainHashInfoSlice }\nexport const {clearAll, clearDepositHash, updateDepositHash} = onchainHashInfoSlice.actions\n","import { combineReducers } from '@reduxjs/toolkit';\nimport { confirmationSlice } from './confirmation';\nimport { favoriteMarketSlice } from './favoriteMarket';\nimport { onchainHashInfoSlice } from './onchainHashInfo';\n\nexport const  localStoreReducer = combineReducers({\n    // ammRecord: ammRecordSlice.reducer,\n    // ammTrades: ammTradesSlice.reducer,\n    favoriteMarket: favoriteMarketSlice.reducer,\n    onchainHashInfo: onchainHashInfoSlice.reducer,\n    confirmation: confirmationSlice.reducer,\n})\n","import { combineReducers, configureStore, getDefaultMiddleware } from '@reduxjs/toolkit'\n\nimport { useDispatch } from 'react-redux'\nimport { load, save } from 'redux-localstorage-simple'\n\nimport createSagaMiddleware from 'redux-saga'\nimport * as imgConfig from '@loopring-web/common-resources/assets/images/coin/loopring.json'\nimport { reduxBatch } from '@manaflair/redux-batch'\nimport { updateVersion } from './global/actions'\nimport accountSlice from './account/reducer'\nimport { modalsSlice, setCoinJson, setLanguage, settingsSlice } from '@loopring-web/component-lib';\nimport { ammReducer } from './Amm';\nimport { tokenMapSlice } from './token';\nimport mySaga from './rootSaga';\nimport { tickerMapSlice } from './ticker';\nimport { systemSlice } from './system';\nimport { walletLayer1Slice } from './walletLayer1';\nimport { walletLayer2Slice } from './walletLayer2';\nimport { socketSlice } from './socket';\nimport { userRewardsMapSlice } from './userRewards';\nimport { localStoreReducer } from './localStore';\n\nconst sagaMiddleware = createSagaMiddleware()\n\nconst reducer = combineReducers({\n    account: accountSlice.reducer,\n    socket: socketSlice.reducer,\n    settings: settingsSlice.reducer,\n    system: systemSlice.reducer,\n    modals: modalsSlice.reducer,\n    userRewardsMap: userRewardsMapSlice.reducer,\n    amm: ammReducer,\n    tokenMap: tokenMapSlice.reducer,\n    walletLayer2: walletLayer2Slice.reducer,\n    walletLayer1: walletLayer1Slice.reducer,\n    tickerMap: tickerMapSlice.reducer,\n    localStore: localStoreReducer,\n})\n// const DEFAULT_TIMEOUT = 1000*60*60;\n//\n// const persistConfig = {\n//     key: 'account',\n//     storage: storageSession,\n//     timeout:DEFAULT_TIMEOUT,\n//     whitelist: ['account'] // only navigation will be persisted\n// };\nconst PERSISTED_KEYS: string[] = ['settings', 'localStore', 'account']\n\n// const persistedReducer = persistReducer(persistConfig, reducer)\n\nconst store = configureStore({\n    reducer,\n    // middleware: (getDefaultMiddleware) => getDefaultMiddleware().concat(logger),\n    middleware: [...getDefaultMiddleware({\n        thunk: false,\n        serializableCheck: false,\n    }), save({states: PERSISTED_KEYS}), sagaMiddleware],\n    // middleware: [...getDefaultMiddleware({ thunk: true }), ],\n    devTools: process.env.NODE_ENV !== 'production',\n    enhancers: [reduxBatch],\n    preloadedState: load({states: PERSISTED_KEYS}) as any\n})\nstore.dispatch(updateVersion())\nstore.dispatch(setLanguage(store.getState().settings.language))\nstore.dispatch(setCoinJson(imgConfig.frames))\n// @ts-ignore\nsagaMiddleware.run(mySaga, store.dispatch);\n\n// The store has been created with these options:\n// - The slice reducers were automatically passed to combineReducers()\n// - redux-thunk and redux-logger were added as middleware\n// - The Redux DevTools Extension is disabled for production\n// - The middleware, batch, and devtools enhancers were composed together\n\nexport type AppDispatch = typeof store.dispatch\nexport const useAppDispatch = () => useDispatch<AppDispatch>()\n\nexport type RootState = ReturnType<typeof reducer>\n// export const persistor = persistStore(store)\n\nexport default store\n","import store from '../../stores';\nimport { toBig } from 'loopring-sdk';\nimport { BIG10 } from '../../defs/swap_defs';\nimport BigNumber from 'bignumber.js';\n\nexport const volumeToCount = (symbol:string,volumn:string|number|BigNumber,tokenMap= store.getState().tokenMap.tokenMap):number|undefined =>{\n   const result =  volumeToCountAsBigNumber(symbol,volumn,tokenMap);\n   return result? result.toNumber():undefined;\n}\nexport const volumeToCountAsBigNumber = (symbol:string,volumn:string|number|BigNumber,tokenMap= store.getState().tokenMap.tokenMap):BigNumber|undefined =>{\n    if(tokenMap && tokenMap[symbol] && typeof volumn !== 'undefined'){\n        try{\n            return toBig(volumn).div('1e' + tokenMap[symbol].decimals)\n        }catch (error){\n            throw error;\n        }\n    }else{\n        return undefined;\n    }\n}","import { AmmDetailBase } from '@loopring-web/common-resources';\nimport { volumeToCountAsBigNumber } from './volumeToCount';\n\nexport const ammPairInit = ({\n                                   pair,\n                                   _ammCalcData,\n                                   ammType,\n                                   tokenMap,\n                                   coinMap,\n                                   walletMap,\n                                   ammMap,\n                                   tickerData,\n                                   ammPoolsBalance\n                               }: any) => {\n    _ammCalcData.coinInfoMap = coinMap;\n    if (tickerData) {\n        _ammCalcData.AtoB = Number(tickerData.close)\n    }\n    if (isNaN(_ammCalcData.AtoB) && ammPoolsBalance) {\n        const baseVol = volumeToCountAsBigNumber(pair.coinAInfo.simpleName, ammPoolsBalance.pooled[ 0 ].volume);\n        const quoteVol = volumeToCountAsBigNumber(pair.coinBInfo.simpleName, ammPoolsBalance.pooled[ 1 ].volume);\n        _ammCalcData.AtoB = quoteVol && baseVol && parseFloat(quoteVol.div(baseVol).toFixed(7, 0) as string)\n    }\n    if (pair.coinAInfo) {\n        // if(ammType === AmmPanelType.Deposit ) {\n        _ammCalcData.myCoinA = {\n            belong: pair.coinAInfo.simpleName,\n            balance: walletMap ? walletMap[ pair.coinAInfo.simpleName ]?.count : 0,\n        }\n        _ammCalcData.myCoinB = {\n            belong: pair.coinBInfo.simpleName,\n            balance: walletMap ? walletMap[ pair.coinBInfo.simpleName ]?.count : 0,\n        }\n        // }else {\n        const key = `${pair.coinAInfo.simpleName}-${pair.coinBInfo.simpleName}`;\n        let coinACount = 0, coinBCount = 0;\n        if (walletMap) {\n            const balance = walletMap ? walletMap[ 'LP-' + key ]?.count : 0;\n            const {totalLPToken, totalA, totalB}: AmmDetailBase<any> = ammMap[ 'AMM-' + key ];\n            if (totalA && totalLPToken && totalB) {\n                coinACount = totalA / totalLPToken * balance;\n                coinBCount = totalB / totalLPToken * balance;\n            }\n            _ammCalcData.lpCoin = balance;\n        }\n        _ammCalcData.lpCoinA = {\n            belong: pair.coinAInfo.simpleName,\n            balance: coinACount,\n        }\n        _ammCalcData.lpCoinB = {\n            belong: pair.coinBInfo.simpleName,\n            balance: coinBCount,\n        }\n        // }\n    }\n\n\n    return _ammCalcData\n}\n\n\n","export function coinPairInit({coinKey, _tradeCalcData, tokenMap, coinMap}: any) {\n    if (coinKey) {\n        const [_match, sell, buy] = coinKey.match(/(\\w+)-(\\w+)/i);\n        // @ts-ignore\n        if (sell && coinMap && coinMap[ sell ]) {\n            _tradeCalcData.coinSell = sell;\n        }// @ts-ignore\n        if (sell!==buy && buy && -1 !== tokenMap[ sell ].tradePairs.findIndex(ele => ele === buy)) {\n            _tradeCalcData.coinBuy = buy;\n            return _tradeCalcData\n        }\n        // else{\n        //     _tradeCalcData.coinBuy = tokenMap[ sell ].tradePairs[ 0 ];\n        // }\n    }\n    if (!_tradeCalcData.coinSell || _tradeCalcData.coinSell === '') {\n        _tradeCalcData.coinSell = 'LRC';\n        _tradeCalcData.coinBuy = 'ETH';\n        return _tradeCalcData\n    }\n    if (!_tradeCalcData.coinBuy || _tradeCalcData.coinBuy === '' || _tradeCalcData.coinBuy === 'undefined') {\n        // @ts-ignore\n        if (tokenMap && tokenMap[ _tradeCalcData.coinSell ].tradePairs) {\n            _tradeCalcData.coinBuy = tokenMap[ _tradeCalcData.coinSell ].tradePairs[ 0 ]\n        } else {\n            _tradeCalcData.coinSell = 'LRC';\n            _tradeCalcData.coinBuy = 'ETH';\n        }\n    }\n    return _tradeCalcData\n}","import store from '../stores';\nimport { AccountStep, setShowAccount, setShowConnect, Toast, WalletConnectStep } from '@loopring-web/component-lib';\nimport { fnType } from '@loopring-web/common-resources';\nimport { Provider } from 'react-redux';\nimport { changeShowModel } from '../stores/account';\n\n\nexport const accountStaticCallBack = (onclickMap: { [ key: number ]: [fn: (props: any) => any, args?: any[]] }, deps?: any[]) => {\n    const {readyState} = store.getState().account;\n    // fnType[readyState]\n    let fn, args;\n    [fn, args] = onclickMap[ readyState ] ? onclickMap[ readyState ] : [];\n    if (typeof fn === 'function') {\n        args = [...(args ?? []), ...(deps ?? [])] as [props: any]\n        return fn.apply(this, args);\n    }\n\n}\n\n\nexport const bntLabel: typeof btnClickMap = {\n\n    [ fnType.UN_CONNECT ]: [\n        function () {\n            return `labelConnectWallet`\n        }\n    ],\n    [ fnType.ERROR_NETWORK ]: [\n        function () {\n            return `labelWrongNetwork`\n        }\n    ],\n\n    [ fnType.DEFAULT ]: [\n        function () {\n            return `depositTitleAndActive`\n        }\n    ], [ fnType.ACTIVATED ]: [\n        function () {\n            return undefined\n        }\n    ]\n    , [ fnType.LOCKED ]: [\n        function () {\n            return `labelUnLockLayer2`\n        }\n    ]\n};\n\n\nexport const btnClickMap: { [ key: string ]: [fn: (props: any) => any, args?: any[]] } = {\n    [ fnType.ERROR_NETWORK ]: [\n        function () {\n            //TODO toast\n            return\n        }\n    ],\n    [ fnType.UN_CONNECT ]: [\n        function () {\n            // setShowConnect({isShow: true})\n            store.dispatch(changeShowModel({_userOnModel: true}));\n            store.dispatch(setShowConnect({isShow: true, step:WalletConnectStep.Provider}))\n        }\n    ]\n    , [ fnType.NO_ACCOUNT ]: [\n        function () {\n            store.dispatch(changeShowModel({_userOnModel: true}));\n            store.dispatch(setShowAccount({isShow: true, step: AccountStep.NoAccount}))\n            // ShowDeposit(true)\n        }\n    ]\n    , [ fnType.DEPOSITING ]: [\n        function () {\n            store.dispatch(setShowAccount({isShow: true, step: AccountStep.Depositing}))\n            // ShowDeposit(true)\n        }\n    ]\n    , [ fnType.LOCKED ]: [\n        function () {\n            store.dispatch(changeShowModel({_userOnModel: true}));\n            store.dispatch(setShowAccount({isShow: true, step: AccountStep.HadAccount}))\n        }\n    ]\n};\n\n\n","import store from '../../stores';\nimport { setSlippage } from '@loopring-web/component-lib';\n\ntype Cache = {\n    customSlippage?:number\n}\nexport  const makeCache  = (__cache__:Cache)=>{\n   if(typeof  __cache__.customSlippage !== undefined){\n       store.dispatch(setSlippage(__cache__.customSlippage as number))\n      // store.getState().settings\n   }\n}","import store from 'stores'\n\nimport * as sdk from 'loopring-sdk'\n\nconst getTokenInfo = (symbol: string) => {\n    const tokenMap = store.getState().tokenMap.tokenMap\n\n    if (!tokenMap || !tokenMap[symbol]) {\n        return undefined\n    }\n\n    return tokenMap[symbol]\n}\n\nconst getMarketInfo = (symbol: string) => {\n    const marketMap = store.getState().tokenMap.marketMap\n\n    if (!marketMap || !marketMap[symbol]) {\n        return undefined\n    }\n\n    return marketMap[symbol]\n}\n\nexport function StringToNumberWithPrecision(rawVal: string, symbol: string) {\n    \n    if (rawVal === undefined || rawVal === null || rawVal.trim() === '')\n        return 0\n\n    const tokenInfo = getTokenInfo(symbol)\n\n    if (!tokenInfo) {\n        return undefined\n    }\n\n    return parseFloat(sdk.toBig(rawVal).toFixed(tokenInfo.precision, 0))\n}\n\n/*\n* format volume to real number\n*/\nexport function VolToNumberWithPrecision(rawVal: string, symbol: string) {\n\n    const tokenInfo = getTokenInfo(symbol)\n\n    if (!tokenInfo) {\n        return undefined\n    }\n\n    if (rawVal === undefined || rawVal === null || rawVal.trim() === '')\n        return 0\n\n    return sdk.toBig(rawVal).div('1e' + tokenInfo.decimals).toFixed(tokenInfo.precision, 0)\n}\n\n/*\n* format raw val with precision\n*/\nexport function FormatValWithPrecision(rawVal: string, symbol: string) {\n\n    const tokenInfo = getTokenInfo(symbol)\n\n    if (!tokenInfo) {\n        return undefined\n    }\n\n    if (rawVal === undefined || rawVal === null || rawVal.trim() === '')\n        return 0\n\n    return sdk.toBig(rawVal).toFixed(tokenInfo.precision, 0)\n}\n\n/*\n* format order price with precision\n*/\nexport function formatPriceWithPrecision(rawVal: string, \n    symbol: string) {\n    const marketInfo = getMarketInfo(symbol)\n    if (!rawVal || !marketInfo || !symbol) {\n        return '0'\n    }\n\n    return sdk.toBig(rawVal).toFixed(marketInfo.precisionForPrice)\n\n}","import {\n    AmmPoolActivityRule,\n    AmmPoolActivityStatus,\n    AmmPoolSnapshot,\n    LoopringMap,\n    TickerData,\n    toBig,\n} from 'loopring-sdk';\nimport { AmmActivity, AmmCardProps, MyAmmLP } from '@loopring-web/common-resources';\nimport store from '../../stores';\nimport { deepClone } from '../../utils/obj_tools';\nimport { AmmUserReward, AmmUserRewardMap } from 'loopring-sdk/dist/defs/loopring_defs';\nimport BigNumber from 'bignumber.js';\nimport { volumeToCount, volumeToCountAsBigNumber } from './volumeToCount';\nimport { coinMap } from '@loopring-web/component-lib';\nimport { AmmDetailStore } from '../../stores/Amm/AmmMap';\nimport { WalletMapExtend } from './makeWallet';\nimport { VolToNumberWithPrecision } from '../../utils/formatter_tool';\n\nexport type AmmActivityViewMap<R, I> = {\n    [key in keyof R]?: AmmActivity<I>[] | undefined\n}\nexport const makeUIAmmActivityMap = <R extends { [ key: string ]: any }, I extends { [ key: string ]: any }>\n({ammActivityMap, type, ammPoolActivityStatus}: {\n    ammActivityMap: LoopringMap<LoopringMap<AmmPoolActivityRule[ ]>> | undefined,\n    type: 'AMM_MINING' | 'SWAP_VOLUME_RANKING',\n    ammPoolActivityStatus: AmmPoolActivityStatus[]\n}, myReward: AmmUserRewardMap | undefined):\n    Array<AmmCardProps<I>> => {\n    const {coinMap, tokenMap, idIndex} = store.getState().tokenMap\n    let ammActivityViewMap: AmmActivityViewMap<R, I> = {}\n    if (ammActivityMap && ammActivityMap[ type ]) {\n\n\n        // @ts-ignore\n        ammPoolActivityStatus.forEach((status: AmmPoolActivityStatus) => {\n\n            if (ammActivityMap[ type ][ status ]) {\n                // @ts-ignore\n                ammActivityMap[ type ][ status ].reduce((prev: AmmActivityViewMap<R, I>, ammPoolActivityRule: AmmPoolActivityRule) => {\n\n                    if (coinMap && ammPoolActivityRule.awardRules[ 0 ] && idIndex && tokenMap) {\n\n                        const symbol = idIndex[ ammPoolActivityRule.awardRules[ 0 ].tokenId as any ]\n                        const totalRewards = VolToNumberWithPrecision(ammPoolActivityRule.awardRules[ 0 ].volume ,symbol)\n                        // @ts-ignore\n                        const item = {\n                            // @ts-ignore\n                            rewardToken: coinMap[ symbol ],\n                            totalRewards: Number(totalRewards),\n                            myRewards: status === AmmPoolActivityStatus.InProgress && myReward && myReward[ ammPoolActivityRule.market ] ?\n                                volumeToCount(symbol, myReward[ ammPoolActivityRule.market ]?.currentRewards[ 0 ].volume) : 0,\n                            duration: {\n                                from: new Date(ammPoolActivityRule?.rangeFrom),\n                                to: new Date(ammPoolActivityRule?.rangeTo),\n                            },\n                            isPass: AmmPoolActivityStatus.EndOfGame === status,\n                        }\n                        if (prev[ ammPoolActivityRule.market ]) {\n                            // @ts-ignore\n                            prev[ ammPoolActivityRule.market ].push(item);\n                        } else {\n                            // @ts-ignore\n                            prev[ ammPoolActivityRule.market ] = [item];\n                        }\n\n\n                        // return prev;\n                    }\n                    return prev;\n                }, ammActivityViewMap)\n\n            }\n        })\n    }\n    const resultArray = makeAsCard(ammActivityViewMap)\n    // console.log(resultArray)\n    return resultArray;\n\n\n}\nconst makeAsCard = <R extends { [ key: string ]: any }, I extends { [ key: string ]: any }>\n(ammActivityViewMap: AmmActivityViewMap<R, I> | undefined, myReward?: any): Array<AmmCardProps<I>> => {\n    const {coinMap} = store.getState().tokenMap\n    const {ammMap} = store.getState().amm.ammMap\n    try {\n        if (ammActivityViewMap && coinMap) {\n            // @ts-ignore\n            return Reflect.ownKeys(ammActivityViewMap).reduce((prev: Array<AmmCardProps<I>>, key: string) => {\n                const _ammInfo = ammMap[ key as string ]\n                if (_ammInfo && _ammInfo.coinA && coinMap && ammActivityViewMap[ key ]) {\n\n                    // @ts-ignore\n                    const itemArray = ammActivityViewMap[ key ].map((item) => {\n                        return {\n                            ...deepClone(_ammInfo),\n                            // @ts-ignore\n                            coinAInfo: coinMap[ _ammInfo.coinA ],\n                            // @ts-ignore\n                            coinBInfo: coinMap[ _ammInfo.coinB ],\n                            activity: item,\n                        }\n                    })\n                    prev = [...prev, ...itemArray]\n                }\n                return prev;\n            }, [] as Array<AmmCardProps<I>>) as Array<AmmCardProps<I>>\n        } else {\n            return [] as Array<AmmCardProps<I>>\n        }\n    } catch (error) {\n        console.log(error)\n        return []\n    }\n}\ntype Value = undefined | number;\nexport type SummaryMyAmm = {\n    rewardDollar: Value,\n    rewardYuan: Value,\n    feeDollar: Value,\n    feeYuan: Value,\n}\nexport const makeSummaryMyAmm = <C extends { [ key: string ]: any }>({\n                                                                         userRewardsMap\n                                                                     }: {\n    userRewardsMap: LoopringMap<AmmUserReward> | undefined\n}):\n    SummaryMyAmm | undefined => {\n    const {coinMap, idIndex, tokenMap} = store.getState().tokenMap;\n    const {faitPrices, forex} = store.getState().system;\n    if (userRewardsMap && idIndex && coinMap && tokenMap && faitPrices && forex) {\n        let summaryMyAmm = Object.keys(userRewardsMap).reduce((prev, key) => {\n            if (/AMM-/i.test(key)) {\n                // @ts-ignore\n                const [, coinA, coinB] = key.match(/AMM-(\\w+)-(\\w+)/i);\n                const ammUserReward = userRewardsMap[ key ]\n                const {\n                    rewardDollar,\n                    rewardYuan,\n                    feeDollar,\n                    feeYuan\n                } = getOneRewardInfo({coinB, coinA, ammUserReward, idIndex, faitPrices, forex})\n                prev.rewardDollar = rewardDollar ? toBig(rewardDollar).plus(prev.rewardDollar).toNumber() : 0;\n                prev.rewardYuan = rewardYuan ? toBig(rewardYuan).plus(prev.rewardYuan).toNumber() : 0;\n                prev.feeDollar = feeDollar ? toBig(feeDollar).plus(prev.feeDollar).toNumber() : 0;\n                prev.feeYuan = feeYuan ? toBig(feeYuan).plus(prev.feeYuan).toNumber() : 0;\n            }\n            return prev\n        }, {\n            rewardDollar: 0,\n            rewardYuan: 0,\n            feeDollar: 0,\n            feeYuan: 0\n        })\n\n        return summaryMyAmm\n    }\n    return undefined\n}\nconst getOneRewardInfo = <C>({\n                                 coinA,\n                                 coinB,\n                                 ammUserReward,\n                                 idIndex,\n                                 faitPrices,\n                                 forex,\n                                 walletMap,\n                                 snapShotData\n                             }: any) => {\n    let rewardToken, rewardToken2, feeA, feeB, feeDollar, feeYuan, reward, reward2, rewardDollar, rewardYuan;\n    if (ammUserReward) {\n        rewardToken = ammUserReward.currentRewards[ 0 ] ? idIndex[ ammUserReward.currentRewards[ 0 ].tokenId as number ] : undefined\n        rewardToken2 = ammUserReward.currentRewards[ 1 ] ? idIndex[ ammUserReward.currentRewards[ 1 ].tokenId as number ] : undefined\n        feeA = ammUserReward ? volumeToCountAsBigNumber(coinA, ammUserReward.feeRewards[ 0 ]) : toBig(0);\n        feeB = ammUserReward ? volumeToCountAsBigNumber(coinB, ammUserReward.feeRewards[ 1 ]) : toBig(0);\n        feeA = feeA ? feeA : toBig(0);\n        feeB = feeB ? feeB : toBig(0);\n        feeDollar = feeA.times(faitPrices[ coinA ]?faitPrices[ coinA ].price:0).plus(feeB.times(faitPrices[ coinB ]?faitPrices[ coinB ].price:0))\n        feeYuan = feeDollar.times(forex);\n        reward = rewardToken ? volumeToCountAsBigNumber(rewardToken, ammUserReward.currentRewards[ 0 ].volume) as BigNumber : toBig(0);\n        reward2 = rewardToken2 ? volumeToCountAsBigNumber(rewardToken2, ammUserReward.currentRewards[ 1 ].volume) as BigNumber : toBig(0);\n        reward = reward ? reward : toBig(0);\n        reward2 = reward2 ? reward2 : toBig(0);\n        rewardDollar = reward.times(rewardToken ? faitPrices[ rewardToken ].price : 1).plus(reward2.times(rewardToken2 ? faitPrices[ rewardToken2 ].price : 1));\n        rewardYuan = rewardDollar.times(forex);\n    }\n    let balanceA, balanceB, balanceDollar, balanceYuan;\n    if (walletMap && walletMap[ 'LP-' + coinA + '-' + coinB ] && snapShotData) {\n        // @ts-ignore\n        const ratio = new BigNumber(walletMap[ 'LP-' + coinA + '-' + coinB ].count).div(snapShotData.ammPoolsBalance.lp.volume);\n        balanceA = ratio.times(volumeToCountAsBigNumber(coinA, snapShotData.ammPoolsBalance.pooled[ 0 ].volume) || 1);\n        balanceB = ratio.times(volumeToCountAsBigNumber(coinB, snapShotData.ammPoolsBalance.pooled[ 1 ].volume) || 1);\n        // @ts-ignore\n        balanceDollar = balanceA.times(faitPrices[ coinA ].price).plus(balanceB.times(faitPrices[ coinB ].price))\n        balanceYuan = balanceDollar.times(forex)\n    }\n\n    return {\n        feeA: feeA ? feeA.toNumber() : undefined,\n        feeB: feeB ? feeB.toNumber() : undefined,\n        reward: reward ? reward.toNumber() : undefined,\n        rewardToken: rewardToken ? coinMap[ rewardToken ] : undefined,\n        reward2: reward2 ? reward2.toNumber() : undefined,\n        rewardToken2: rewardToken2 ? coinMap[ rewardToken2 ] : undefined,\n        rewardDollar: rewardDollar ? rewardDollar.toNumber() : undefined,\n        rewardYuan: rewardYuan ? rewardYuan.toNumber() : undefined,\n        feeDollar: feeDollar ? feeDollar.toNumber() : undefined,\n        feeYuan: feeYuan ? feeYuan.toNumber() : undefined,\n        ammDetail: {\n            coinAInfo: coinMap[ coinA ],\n            coinBInfo: coinMap[ coinB ]\n        },\n        balanceA: balanceA ? balanceA.toNumber() : undefined,\n        balanceB: balanceB ? balanceB.toNumber() : undefined,\n        balanceDollar: balanceDollar ? balanceDollar.toNumber() : undefined,\n        balanceYuan: balanceYuan ? balanceYuan.toNumber() : undefined,\n    } as MyAmmLP<C>\n}\n\nexport const makeMyAmmWithSnapshot = <C extends { [ key: string ]: any }>(market: any, _walletMap: WalletMapExtend<C> | undefined, ammUserRewardMap: LoopringMap<AmmUserReward> | undefined, snapShotData?: {\n    tickerData?: TickerData | undefined\n    ammPoolsBalance: AmmPoolSnapshot | undefined\n} | undefined) => {\n    const {coinMap, idIndex, tokenMap} = store.getState().tokenMap;\n    const {faitPrices, forex} = store.getState().system;\n    const [, coinA, coinB] = market.match(/(\\w+)-(\\w+)/i);\n    let _myAmm: Partial<MyAmmLP<C>> = {};\n    if (ammUserRewardMap && ammUserRewardMap[ 'AMM-' + market ]\n        && snapShotData && snapShotData.ammPoolsBalance) {\n        const ammUserReward: AmmUserReward = ammUserRewardMap[ 'AMM-' + market ];\n        // @ts-ignore\n        if (coinMap && tokenMap && idIndex && forex && faitPrices) {\n            _myAmm = getOneRewardInfo({\n                coinA, coinB, ammUserReward,\n                idIndex, faitPrices, forex, walletMap: _walletMap, snapShotData\n            })\n\n            return _myAmm as MyAmmLP<C>\n        }\n    }\n    return {\n        feeA: undefined,\n        feeB: undefined,\n        feeDollar: undefined,\n        feeYuan: undefined,\n        reward: undefined,\n        rewardToken: undefined as any,\n        balanceA: undefined,\n        balanceB: undefined,\n        balanceYuan: undefined,\n        balanceDollar: undefined,\n    }\n}\n\nexport const makeMyAmmWithStat = <C extends { [ key: string ]: any }>\n(market: any,\n _walletMap: WalletMapExtend<C> | undefined,\n ammUserRewardMap: LoopringMap<AmmUserReward> | undefined,\n ammDetail: AmmDetailStore<C>) => {\n    const {coinMap, idIndex, tokenMap} = store.getState().tokenMap;\n    const {faitPrices, forex} = store.getState().system;\n    const [, coinA, coinB] = market.match(/(\\w+)-(\\w+)/i);\n    let _myAmm = {};\n    let balanceA, balanceB, balanceDollar, balanceYuan;\n    if (_walletMap && _walletMap[ 'LP-' + coinA + '-' + coinB ] && forex) {\n        // @ts-ignore\n        const ratio = new BigNumber(_walletMap[ 'LP-' + coinA + '-' + coinB ].count).div(ammDetail.totalLPToken);\n        balanceA = ratio.times(volumeToCountAsBigNumber(coinA, ammDetail.totalA ? ammDetail.totalA : 0) || 1);\n        balanceB = ratio.times(volumeToCountAsBigNumber(coinB, ammDetail.totalB ? ammDetail.totalB : 0) || 1);\n        // @ts-ignore\n        balanceDollar = balanceA.times(faitPrices[ coinA ]?faitPrices[ coinA ].price:0).plus(balanceB.times(faitPrices[ coinB ]?faitPrices[ coinB ].price:0))\n        balanceYuan = balanceDollar.times(forex);\n        _myAmm = {\n            // ...ammDetail,\n            balanceA: balanceA.toNumber(),\n            balanceB: balanceB.toNumber(),\n            balanceYuan: balanceYuan.toNumber(),\n            balanceDollar: balanceDollar.toNumber(),\n        }\n    }\n    if (ammUserRewardMap && ammUserRewardMap[ 'AMM-' + market ]\n        && ammDetail && forex) {\n        const ammUserReward: AmmUserReward = ammUserRewardMap[ 'AMM-' + market ];\n        let rewardToken, rewardToken2, feeA, feeB, feeDollar, feeYuan, reward, reward2, rewardDollar, rewardYuan;\n\n        if (coinMap && tokenMap && idIndex && forex && faitPrices && ammUserReward) {\n            rewardToken = ammUserReward.currentRewards[ 0 ] ? idIndex[ ammUserReward.currentRewards[ 0 ].tokenId as number ] : undefined\n            rewardToken2 = ammUserReward.currentRewards[ 1 ] ? idIndex[ ammUserReward.currentRewards[ 1 ].tokenId as number ] : undefined\n            feeA = ammUserReward ? volumeToCountAsBigNumber(coinA, ammUserReward.feeRewards[ 0 ]) : toBig(0);\n            feeB = ammUserReward ? volumeToCountAsBigNumber(coinB, ammUserReward.feeRewards[ 1 ]) : toBig(0);\n            feeA = feeA ? feeA : toBig(0);\n            feeB = feeB ? feeB : toBig(0);\n            feeDollar = feeA.times(faitPrices[ coinA ]?faitPrices[ coinA ].price:0).plus(feeB.times(faitPrices[ coinB ]?faitPrices[ coinB ].price:0))\n            feeYuan = feeDollar.times(forex);\n            reward = rewardToken ? volumeToCountAsBigNumber(rewardToken, ammUserReward.currentRewards[ 0 ].volume) as BigNumber : toBig(0);\n            reward2 = rewardToken2 ? volumeToCountAsBigNumber(rewardToken2, ammUserReward.currentRewards[ 1 ].volume) as BigNumber : toBig(0);\n            reward = reward ? reward : toBig(0);\n            reward2 = reward2 ? reward2 : toBig(0);\n            rewardDollar = reward.times(rewardToken ? faitPrices[ rewardToken ].price : 1).plus(reward2.times(rewardToken2 ? faitPrices[ rewardToken2 ].price : 1));\n            rewardYuan = rewardDollar.times(forex);\n            _myAmm = {\n                ..._myAmm,\n                feeA: feeA ? feeA.toNumber() : undefined,\n                feeB: feeB ? feeB.toNumber() : undefined,\n                reward: reward ? reward.toNumber() : undefined,\n                // @ts-ignore\n                rewardToken: rewardToken ? coinMap[ rewardToken ] : undefined,\n                reward2: reward2 ? reward2.toNumber() : undefined,\n                // @ts-ignore\n                rewardToken2: rewardToken2 ? coinMap[ rewardToken2 ] : undefined,\n                rewardDollar: rewardDollar ? rewardDollar.toNumber() : undefined,\n                rewardYuan: rewardYuan ? rewardYuan.toNumber() : undefined,\n                feeDollar: feeDollar ? feeDollar.toNumber() : undefined,\n                feeYuan: feeYuan ? feeYuan.toNumber() : undefined,\n                ammDetail: {\n                    // @ts-ignore\n                    coinAInfo: coinA ? coinMap[ coinA ] : undefined,\n                    // @ts-ignore\n                    coinBInfo: coinB ? coinMap[ coinB ] : undefined,\n                },\n            }\n\n        }\n        return _myAmm as MyAmmLP<C>\n    }\n    return {\n        feeA: undefined,\n        feeB: undefined,\n        feeDollar: undefined,\n        feeYuan: undefined,\n        reward: undefined,\n        rewardToken: undefined as any,\n        balanceA: undefined,\n        balanceB: undefined,\n        balanceYuan: undefined,\n        balanceDollar: undefined,\n    }\n}\n\n// if (ammUserReward) {\n//     const symbol = ammUserReward.currentRewards[ 0 ] ? idIndex[ ammUserReward.currentRewards[ 0 ].tokenId as number ] : undefined\n//     const symbol2 = ammUserReward.currentRewards[ 1 ] ? idIndex[ ammUserReward.currentRewards[ 1 ].tokenId as number ] : undefined\n//\n//     _myAmm = {\n//         ..._myAmm,\n//         feeA: ammUserReward ? volumeToCount(coinA, ammUserReward.feeRewards[ 0 ]) : 0,//Number(ammUserReward.feeRewards[ 0 ]) : 0,\n//         feeB: ammUserReward ? volumeToCount(coinB, ammUserReward.feeRewards[ 1 ]) : 0,//Number(ammUserReward.feeRewards[ 1 ]) : 0,\n//         reward: symbol ? volumeToCount(symbol, ammUserReward.currentRewards[ 0 ].volume) : 0,\n//         // @ts-ignore\n//         rewardToken: symbol ? coinMap[ symbol ] : undefined,\n//         reward2: symbol2 ? volumeToCount(symbol2, ammUserReward.currentRewards[ 1 ].volume) : 0,\n//         // @ts-ignore\n//         rewardToken2: symbol2 ? coinMap[ symbol2 ] : undefined,\n//\n//\n//     }\n//     _myAmm.feeDollar = _myAmm.feeA && _myAmm.feeA * faitPrices[ coinA ].price;\n//     _myAmm.feeDollar = _myAmm.feeB && _myAmm.feeB * faitPrices[ coinB ].price;\n// }\n//\n//\n// if (_walletMap && _walletMap[ 'LP-' + market ]) {\n//     // @ts-ignore\n//     const ratio = new BigNumber(_walletMap[ 'LP-' + market ].detail.total).div(snapShotData.ammPoolsBalance.lp.volume);\n//     _myAmm = {\n//         ..._myAmm,  //snapShotData.ammPoolsBalance.pooled[ 0 ].volume).div(BIG10.pow(tokenMap[coinA].decimals)\n//         balanceA: ratio.times(volumeToCountAsBigNumber(coinA, snapShotData.ammPoolsBalance.pooled[ 0 ].volume) || 1).toNumber(),\n//         balanceB: ratio.times(volumeToCountAsBigNumber(coinB, snapShotData.ammPoolsBalance.pooled[ 1 ].volume) || 1).toNumber(),\n//     }\n//     // @ts-ignore\n//     _myAmm.balanceDollar = _myAmm.balanceA * faitPrices[ coinA ].price + _myAmm.balanceB * faitPrices[ coinB ].price\n//     _myAmm.balanceYuan = _myAmm.balanceDollar * forex\n// }\n// export const getAmmPoolGameUserRanks = ():Promise<AmmUserRewardMap> => {\n//     const {accountId} = store.getState().account\n//     //https://api3.loopring.io/api/v2/amm/user/rewards?owner=10917\n//     if(LoopringAPI.ammpoolAPI){\n//         return LoopringAPI.ammpoolAPI.getAmmPoolUserRewards({owner:accountId}).then(({ammUserRewardMap}:any)=>{\n//               return ammUserRewardMap  as AmmUserRewardMap\n//         })\n//     }else{\n//         return  Promise.resolve({} as AmmUserRewardMap);\n//     }\n//\n//     // return LoopringAPI.ammpoolAPI?.getUserAmmPoolTxs({accountId}, apiKey).then(({userAmmPoolTxs}) => {\n//     //     return userAmmPoolTxs\n//     // })\n//     // if(LoopringAPI.ammpoolAPI)   {\n//     //    let promiseList =  marketKeys.map((key)=>{\n//     //         // @ts-ignore\n//     //         return LoopringAPI.ammpoolAPI.getAmmPoolGameUserRank({owner:accAddr,ammPoolMarket:'key'},apiKey)\n//     //     })\n//     //     return Promise.all(promiseList).then(\n//     //         (array:any[])=>{\n//     //\n//     //           return  array.reduce((prev,item:{userRankList:GameRankInfo[]},index)=>{\n//     //                 const market = marketKeys[index]\n//     //                 prev[ market] = item.userRankList[0]\n//     //                 return item.userRankList[0]\n//     //             },{})\n//     //\n//     //         }\n//     //     )\n//     // }else{\n//     //   return  Promise.resolve({});\n//     // }\n//\n//\n//\n//\n// }\n//\n// {\n//     userRankList: GameRankInfo[];\n//     raw_data: any;\n// }\n","import { AmmDetailStore } from '../../stores/Amm/AmmMap';\nimport { AmmPoolSnapshot } from 'loopring-sdk';\nimport { makeMyAmmWithSnapshot, makeMyAmmWithStat } from './makeUIAmmActivityMap';\nimport { AmmUserRewardMap } from 'loopring-sdk/dist/defs/loopring_defs';\nimport { WalletMapExtend } from './makeWallet';\n\nexport const makeMyPoolRowWithSnapShot = <T extends { [ key: string ]: any }>({market,ammSnapShot,walletMap,ammUserRewardMap}: {\n    market:string\n    ammSnapShot: AmmPoolSnapshot,\n    walletMap: WalletMapExtend<T>\n    ammUserRewardMap:AmmUserRewardMap|undefined\n}) => {\n\n    return makeMyAmmWithSnapshot(market,walletMap, ammUserRewardMap, {\n        ammPoolsBalance: ammSnapShot\n    })\n}\n\n                                                                        \nexport const makeMyPoolRowWithPoolState = <T extends { [ key: string ]: any }>({market,ammDetail,walletMap,ammUserRewardMap}: {\n    market:string\n    ammDetail: AmmDetailStore<T>,\n    walletMap: WalletMapExtend<T>\n    ammUserRewardMap:AmmUserRewardMap|undefined\n}) => {\n    if(walletMap && ammDetail){\n        return makeMyAmmWithStat (market,walletMap, ammUserRewardMap, ammDetail)\n    }\n    return undefined\n}","import { TickerData, toBig } from 'loopring-sdk';\nimport store from '../../stores';\nimport { FloatTag,TradeFloat } from '@loopring-web/common-resources';\nimport { volumeToCountAsBigNumber } from './volumeToCount';\nimport { Ticker, TickerMap } from '../../stores/ticker';\nimport { LoopringMap } from 'loopring-sdk/dist/defs/loopring_defs';\nimport { VolToNumberWithPrecision } from '../../utils/formatter_tool';\n\nexport const makeTickView = (tick: TickerData) => {\n    // const {forex} = store.getState().system;\n\n    const {faitPrices, forex} = store.getState().system;\n    const floatTag = (isNaN(tick.close) || isNaN(tick.open))  || tick.open === tick.close ? FloatTag.none :\n        tick.close > tick.open ? FloatTag.increase : FloatTag.decrease\n    let _tradeFloat: Partial<TradeFloat> = {\n        change: (tick.close - tick.open) / tick.open,\n        timeUnit: '24h',\n        priceYuan:  0,\n        priceDollar: 0,\n        floatTag,\n        reward: 0,\n        close: isNaN(tick.close) ? undefined : tick.close,\n        high: tick.high === 0 ? undefined : tick.high,\n        low: tick.low === 0 ? undefined : tick.low,\n\n        // APY: 0,\n    }\n    if (faitPrices && forex) {\n        const volume = VolToNumberWithPrecision(tick.base_token_volume, tick.base as string)\n        // const priceDollar = toBig(tiem).times(faitPrices[ tick.base as string ] ? faitPrices[ tick.base as string ].price : 0);\n        // const priceYuan = priceDollar.times(forex);\n        const closeDollar = toBig(tick.close).times(faitPrices[ tick.quote as string ] ? faitPrices[ tick.quote as string ].price : 0);\n        const closeYuan = closeDollar.times(forex);\n        const qPrice = faitPrices[tick.quote as string].price?    faitPrices[tick.quote as string].price:0;\n        _tradeFloat = {\n            ..._tradeFloat,\n            changeDollar: toBig(tick.close - tick.open).times( qPrice ).toNumber(),\n            changeYuan: toBig(tick.close - tick.open).times( qPrice ).times(forex).toNumber(),\n            volume: volume?Number(volume):undefined,\n            closeDollar:closeDollar.toNumber(),\n            closeYuan:closeYuan.toNumber(),\n        }\n    }\n    return _tradeFloat;\n}\nexport  const makeTickerMap =  <R extends {[key:string]:any}>({tickerMap}:{tickerMap:LoopringMap<TickerData>}):TickerMap<{[key:string]:any}>=>{\n    const {faitPrices, forex} = store.getState().system;\n    return Reflect.ownKeys(tickerMap).reduce((prev, key) => {\n        const item: TickerData = tickerMap[ key as any ];\n        if (item && item.base && forex && faitPrices && (faitPrices[ item.base ] || faitPrices[ 'USDT' ])) {\n            const volume = VolToNumberWithPrecision(item.base_token_volume, item.base as string)\n            //FIX: DIE is not in faitPrices\n            const priceDollar = toBig(volume?volume:0).times(faitPrices[ item.base ] ? faitPrices[ item.base ].price : faitPrices[ 'USDT' ].price);\n            const priceYuan = priceDollar?.times(forex);\n            const change = item.change && item.change !== 0 ? item.change * 100 : undefined;\n\n            prev[ key as keyof R] = {\n                // ...item,\n                timeUnit: '24h',\n                priceDollar: priceDollar?.toNumber() === 0 ? undefined : priceDollar?.toNumber(),\n                priceYuan: priceYuan?.toNumber() === 0 ? undefined : priceYuan?.toNumber(),\n                volume: volume?Number(volume):undefined,\n                floatTag: item.close > item.open ? 'increase' : 'decrease',\n                change: change,\n                close: isNaN(item.close) ? undefined : item.close,\n                high: item.high === 0 ? undefined : item.high,\n                low: item.low === 0 ? undefined : item.low,\n                // APY: 0,\n                reward: 0,\n                rewardToken: '',\n                __rawTicker__: item,\n            } as Ticker;\n        }\n        return prev\n    }, {} as TickerMap<R>)\n}\n","import store from '../../stores';\nimport { WalletCoin,CoinKey } from '@loopring-web/common-resources';\nimport * as sdk from 'loopring-sdk';\nexport type WalletMapExtend<C> =    {\n    [K in CoinKey<C>]?: WalletCoin<C> & {\n    detail: sdk.UserBalanceInfo\n}\n}\n\nexport const makeWalletLayer2 = <C extends { [ key: string ]: any }>():{ walletMap: WalletMapExtend<C> | undefined } => {\n    const {walletLayer2} = store.getState().walletLayer2;\n    const {tokenMap} = store.getState().tokenMap;\n    let walletMap: WalletMapExtend<C> | undefined;\n\n\n    if (walletLayer2) {\n        walletMap = Reflect.ownKeys(walletLayer2).reduce((prev, item) => {\n            const {total, locked, pending: { withdraw }} = walletLayer2[ item as string ];\n            const countBig = sdk.toBig(total).minus(sdk.toBig(locked)).toString()\n            return {\n                ...prev, [ item ]: {\n                    belong: item,\n                    count: sdk.fromWEI(tokenMap, item, countBig),\n                    detail: walletLayer2[ item as string ]\n                }\n            }\n        }, {} as  WalletMapExtend<C> )\n    }\n\n    return {walletMap}\n}","import * as sdk from 'loopring-sdk';\nimport store from '../../stores';\nimport { TradeTypes } from '@loopring-web/common-resources';\nimport { LoopringAPI, userAPI } from '../../stores/apis/api';\nimport { AmmRecordRow, AmmTradeType,RawDataTradeItem } from '@loopring-web/component-lib';\nimport { volumeToCount, volumeToCountAsBigNumber } from './volumeToCount';\n\nexport const getUserTrades = (marketKey: any) => {\n    const userApi = userAPI();\n    const {accountId, apiKey} = store.getState().account\n    return userApi.getUserTrades({accountId}, apiKey).then((response: {\n        totalNum: any;\n        userTrades: sdk.UserTrade[];\n        raw_data: any;\n    }) => {\n        return response.userTrades\n    })\n}\nexport const makeMarketArray = (coinKey: any, marketTrades: sdk.MarketTradeInfo[]): RawDataTradeItem[] => {\n\n    let tradeArray: Array<Partial<RawDataTradeItem>> = []\n\n    marketTrades.forEach((item: sdk.MarketTradeInfo) => {\n        try {\n            const {base, quote} = sdk.getBaseQuote(item.market)\n            const {forex} = store.getState().system\n            const {currency} = store.getState().settings\n            const {tokenMap} = store.getState().tokenMap\n            if (tokenMap) {\n                // const baseToken = tokenMap[ base as string ]\n                // const quoteToken = tokenMap[ quote as string ]\n                const feeKey = item.side === sdk.Side.Buy ? base : quote\n                // @ts-ignore\n                tradeArray.push({\n                    side: item.side === sdk.Side.Sell ? TradeTypes.Sell : TradeTypes.Buy,\n                    amount: {\n                        from: {\n                            key: base as string,\n                            value: base ? volumeToCount(base, item.volume) : undefined\n                        },\n                        to: {\n                            key: quote as string,\n                            value: base ? volumeToCountAsBigNumber(base, item.volume)?.times(item.price).toNumber():undefined\n                        },\n\n                    },\n                    price: {\n                        key: '',\n                        value: sdk.toBig(item.price).toNumber(),\n                    },\n                    fee: {\n                        key: feeKey || '--',\n                        value: feeKey ? volumeToCountAsBigNumber(feeKey, item.fee)?.toNumber() : undefined, \n                    },\n                    time: parseInt(item.tradeTime.toString()),\n                })\n            }\n        } catch (error) {\n            //CATCHERROR:\n            console.log(error)\n            // new CustomError()\n        }\n\n    })\n    // console.log('tradeArray:', tradeArray)\n    return tradeArray as RawDataTradeItem[];\n\n}\n\nexport const getUserAmmTransaction = () => {\n    const {accountId, apiKey} = store.getState().account\n    return LoopringAPI.ammpoolAPI?.getUserAmmPoolTxs({accountId}, apiKey).then(({userAmmPoolTxs}) => {\n        return userAmmPoolTxs\n    })\n    // }\n\n}\n\n\nexport const makeMyAmmMarketArray = <C extends { [ key: string ]:any }>(coinKey: string|undefined, marketTransaction: sdk.UserAmmPoolTx[]): AmmRecordRow<C>[] => {\n\n    let tradeArray: Array<Partial<AmmRecordRow<C>>> = [];\n    let {tokenMap, coinMap, idIndex} = store.getState().tokenMap;\n    marketTransaction.forEach((item: sdk.UserAmmPoolTx) => {\n        try {\n           // const {base, quote} = getBaseQuote(coinKey)\n            const {forex} = store.getState().system\n            // const {currency} = store.getState().settings\n            if (coinMap && tokenMap && idIndex\n                && !(coinKey && tokenMap['LP-'+coinKey].tokenId !== item.lpToken.tokenId) ) {\n                // @ts-ignore\n                const [, coinA, coinB] = idIndex[item.lpToken.tokenId].match(/LP-(\\w+)-(\\w+)/i);\n                 \n                tradeArray.push({\n                        type: item.txType === sdk.AmmTxType.JOIN ? AmmTradeType.add : AmmTradeType.remove,\n                        //TODO:\n                        totalDollar: 1000,\n                        totalYuan: 1000 / Number(forex),\n                        amountA: volumeToCount(coinA,item.poolTokens[ 0 ]?.actualAmount),\n                        amountB: volumeToCount(coinA,item.poolTokens[ 1 ]?.actualAmount),\n                        time: Number(item.updatedAt),\n                        // @ts-ignore\n                        coinA: coinMap[ coinA ],\n                        // @ts-ignore\n                        coinB: coinMap[ coinB ],\n                        status: item.txStatus\n                    })\n                }\n                return tradeArray\n            }\n         catch (error) {\n            //CATCHERROR:\n            console.log(error)\n            // new CustomError()\n        }\n\n    })\n    // console.log('tradeArray:', tradeArray)\n    return tradeArray as AmmRecordRow<C>[];\n\n}\n\n\nexport const makeMarketAmmArray = <C extends object>(coinKey: any, marketTransaction: sdk.AmmPoolTx[]): AmmRecordRow<C>[] => {\n\n    let tradeArray: Array<Partial<AmmRecordRow<C>>> = [];\n\n    // marketTransaction.forEach((item: AmmPoolTx) => {\n    //     try {\n    //         const {base, quote} = getBaseQuote(coinKey)\n    //         const {forex} = store.getState().system\n    //         // const {currency} = store.getState().settings\n    //         const coinMap = store.getState().tokenMap.coinMap as CoinMap<C>\n    //         if (coinMap) {\n    //\n    //             // id: number;\n    //             // from: string;\n    //             // to: string;\n    //             // token: string;\n    //             // amount: string;\n    //             // tokenF: string;\n    //             // amountF: string;\n    //             // status: TxStatus;\n    //             // txHash: string;\n    //             // billType: BillType;\n    //             // income: boolean;\n    //             // timestamp: number;\n    //             // memo: string;\n    //             // price: string;\n    //             // transferType: TransferType;\n    //             // label: string;\n    //             tradeArray.push({\n    //                 // type: item.billType === BillType.ORDER ?\n    //                 //     AmmTradeType.swap : item.billType === BillType.TRANSFER && item.income ?\n    //                 //         AmmTradeType.add : AmmTradeType.remove,\n    //                 // // //TODO:\n    //                 // totalDollar: 1000,\n    //                 // totalYuan: 1000 / Number(forex),\n    //                 // amountA: Number(item.poolTokens[ 0 ].amount),\n    //                 // amountB: Number(item.poolTokens[ 1 ].amount),\n    //                 // time: Number(item.updatedAt),\n    //                 // coinA: coinMap[ base as keyof C],\n    //                 // coinB: coinMap[ quote as keyof C ],\n    //             })\n    //         }\n    //     } catch (error) {\n    //         //CATCHERROR:\n    //         console.log(error)\n    //         // new CustomError()\n    //     }\n    //\n    // })\n    // console.log('tradeArray:', tradeArray)\n    return tradeArray as AmmRecordRow<C>[];\n\n}\n","import { AmmMap } from '../../stores/Amm/AmmMap';\nimport { AmmPoolSnapshot, getBaseQuote, LoopringMap, TickerData, TokenInfo, TokenVolumeV3 } from 'loopring-sdk';\nimport { LoopringAPI } from '../../stores/apis/api';\nimport { CoinMap, CustomError, ErrorMap } from '@loopring-web/common-resources';\nimport { volumeToCountAsBigNumber } from './volumeToCount';\n\nexport const pairDetailBlock = <C extends { [ key: string ]: any }, I extends { [ key: string ]: any }>({\n                                                                                                           coinKey,\n                                                                                                           ammKey,\n                                                                                                           ammMap\n                                                                                                       }: { coinKey: string, ammKey: string, ammMap: AmmMap<C, I> }):\n    Promise<{\n        ammPoolsBalance: AmmPoolSnapshot,\n        tickMap:  LoopringMap<TickerData>\n}> => {\n    // const exchangeApi = exchangeAPI();\n    // const ammpoolApi = ammpoolAPI();\n    return new Promise((resolve, reject) => {\n        if(LoopringAPI.ammpoolAPI && LoopringAPI.exchangeAPI ) {\n            Promise.all([\n                LoopringAPI.ammpoolAPI.getAmmPoolSnapshot({poolAddress: ammMap[ ammKey ].address}),\n                LoopringAPI.exchangeAPI.getMixTicker({market: coinKey})])\n                // exchangeApi.getMarketTrades({market:coinKey})])\n                //{raw_data},\n                .then(([{ammPoolSnapshot}, {tickMap}]) => {\n                    resolve({\n                        ammPoolsBalance: ammPoolSnapshot as AmmPoolSnapshot,\n                        tickMap,\n                    })\n                })\n\n        }else{\n            reject(new CustomError(ErrorMap.NO_SDK))\n        }\n       \n    })\n}\n\nexport const pairDetailDone = <C>({coinKey, market,ammPoolsBalance, fee, tokenMap,tickerData, _tradeCalcData, coinMap, marketCoins}:any)=>{\n\n    const [, coinSell, coinbuy] = coinKey.match(/(\\w+)-(\\w+)/i)\n    let stob:number|undefined;\n    if (tickerData.base === coinSell) {\n        // const ticker: TickerData = tickMap[market]\n        stob = Number(tickerData.close)\n\n    } else{\n        // const ticker: TickerData = tickMap[market]\n        stob = Number(tickerData.close)!==0? 1/Number(tickerData.close): 0\n    }\n    if(isNaN(stob) && ammPoolsBalance){\n        const {base, quote} = getBaseQuote(coinKey)\n        \n        const poolBaseTokenVol: TokenVolumeV3 = ammPoolsBalance.pooled[0];\n        const quoteBaseTokenVol: TokenVolumeV3 = ammPoolsBalance.pooled[1];\n        let poolVolumn:[baseVol:any, quoteVol:any];\n        if ( base && quote && tokenMap[base].tokenId === poolBaseTokenVol.tokenId ) {\n            poolVolumn =  [[base,poolBaseTokenVol.volume],[quote,quoteBaseTokenVol.volume]]\n        } else if (base && quote && tokenMap[base].tokenId === quoteBaseTokenVol.tokenId){\n            poolVolumn =  [[quote,quoteBaseTokenVol.volume],[base,poolBaseTokenVol.volume]]\n        } else {\n            throw new CustomError(ErrorMap.NO_SUPPORT_PAIR)\n        }\n        let [baseVol,quoteVol]  = poolVolumn\n        if(baseVol && quoteVol){\n            // stob = volumeToCountAsBigNumber(baseVol[0],baseVol[1])?.div(\n            //     volumeToCountAsBigNumber(quoteVol[0],quoteVol[1]) || 1\n            // ) .toNumber()\n            stob = parseFloat(volumeToCountAsBigNumber(quoteVol[0],quoteVol[1])?.div(\n                volumeToCountAsBigNumber(baseVol[0],baseVol[1]) || 1).toFixed(7, 0) as string)\n        }\n    }\n\n    _tradeCalcData.StoB = stob;\n    _tradeCalcData.BtoS = stob !== 0 && stob !== undefined? 1 / (stob * 1.0): 0;\n    _tradeCalcData.sellCoinInfoMap = coinMap && marketCoins?.reduce((prev: any, item: string | number) => {\n        return {...prev, [ item ]: coinMap[ item ]}\n    }, {} as CoinMap<C>)\n    _tradeCalcData.buyCoinInfoMap = coinMap && tokenMap && tokenMap[ _tradeCalcData.coinSell as string ].tradePairs?.reduce((prev: any, item: string | number) => {\n        return {...prev, [ item ]: coinMap[ item ]}\n    }, {} as CoinMap<C>);\n\n    _tradeCalcData.fee = fee\n\n    return {\n        _tradeCalcData\n    }\n    //setPair();\n}","import React from 'react'\n\nimport { Header as HeaderUI, HideOnScroll, } from '@loopring-web/component-lib'\n\nimport { headerRoot } from '@loopring-web/common-resources'\n\nimport { useLocation } from 'react-router-dom'\n\nimport { Toolbar, } from '@material-ui/core'\nimport { useHeader } from './hook'\n\nconst Header = ({...rest}: any) => {\n    const location = useLocation()\n\n    const {\n        headerToolBarData,\n        headerMenuData,\n\n    } = useHeader()\n\n    return (<>\n        <HideOnScroll>\n            <HeaderUI {...rest} headerMenuData={headerMenuData} headerToolBarData={headerToolBarData}\n                      selected={location.pathname === '/' ? headerRoot : location.pathname}></HeaderUI>\n\n        </HideOnScroll>\n        <Toolbar/>\n\n    </>)\n}\nexport default Header\n\n\n\n","import React from 'react'\n\nimport {\n    ButtonComponentsMap,\n    fnType,\n    headerMenuData,\n    headerToolBarData,\n    LanguageKeys,\n    ThemeKeys,\n} from '@loopring-web/common-resources'\n\nimport { useAccount, } from 'stores/account'\n\nimport { Theme, } from 'defs/common_defs'\n\nimport { AccountStep, useOpenModals, useSettings, } from '@loopring-web/component-lib'\n\nimport { accountStaticCallBack, btnClickMap } from 'hooks/help'\nimport { myLog } from 'utils/log_tools'\nimport { deepClone } from '../../utils/obj_tools';\n\nexport const useHeader = () => {\n    const {setTheme, themeMode, setLanguage} = useSettings();\n    const accountState = useAccount();\n    const {account, setShouldShow, status: accountStatus} =  useAccount();\n    const {setShowAccount} = useOpenModals();\n    const _btnClickMap: typeof btnClickMap = Object.assign(deepClone(btnClickMap), {\n        [ fnType.ACTIVATED ]: [\n            function () {\n                setShouldShow(true);\n                setShowAccount({isShow: true, step: AccountStep.HadAccount})\n            }\n        ],\n        // [ fnType.CONNECT ]: [\n        //     function () {\n        //         setShouldShow(true);\n        //         setShowAccount({isShow: true, step: AccountStep.HadAccount})\n        //     }\n        // ]\n\n    });\n    const onWalletBtnConnect = React.useCallback(async () => {\n        myLog(`onWalletBtnConnect click: ${account.readyState}`);\n        setShouldShow(true);\n        accountStaticCallBack(_btnClickMap, []);\n    }, [account])\n    const onThemeBtnClick = React.useCallback(async (themeMode: ThemeKeys) => {\n        if (themeMode === Theme.dark) {\n            setTheme(Theme.light)\n        } else {\n            setTheme(Theme.dark)\n        }\n    }, [setTheme])\n\n    const onLangBtnClick = (lang: LanguageKeys) => {\n        setLanguage(lang);\n    }\n\n\n    React.useEffect(() => {\n        headerToolBarData[ ButtonComponentsMap.WalletConnect ] = {\n            ...headerToolBarData[ ButtonComponentsMap.WalletConnect ],\n            accountState,\n            handleClick: onWalletBtnConnect,\n        }\n        headerToolBarData[ ButtonComponentsMap.Theme ] = {\n            ...headerToolBarData[ ButtonComponentsMap.Theme ],\n            themeMode,\n            handleClick: onThemeBtnClick\n        }\n        headerToolBarData[ ButtonComponentsMap.Language ] = {\n            ...headerToolBarData[ ButtonComponentsMap.Language ],\n            handleChange: onLangBtnClick\n        }\n\n    }, []);\n\n    const forceUpdate = React.useReducer(() => ({}), {})[ 1 ] as () => void\n    React.useEffect(() => {\n        if (accountStatus && accountStatus === 'UNSET') {\n            headerToolBarData[ ButtonComponentsMap.WalletConnect ] = {\n                ...headerToolBarData[ ButtonComponentsMap.WalletConnect ],\n                accountState,\n            }\n        }\n        forceUpdate()\n    }, [accountStatus]);\n\n    return {\n        headerToolBarData,\n        headerMenuData,\n        account,\n    }\n}\n\n","import React, { useCallback, useEffect } from \"react\"\nimport store from '../../stores';\nimport { TickerMap, useTicker } from '../../stores/ticker';\nimport { MarketBlockProps, QuoteTableRawDataItem, } from '@loopring-web/component-lib';\nimport { deepClone } from '../../utils/obj_tools';\nimport { useSocket } from '../../stores/socket';\nimport { TradingInterval, WsTopicType } from 'loopring-sdk';\nimport { LoopringAPI } from 'stores/apis/api'\nimport { tickerService } from '../../services/tickerService';\nimport { debounce } from \"lodash\"\nimport { globalSetup } from '@loopring-web/common-resources';\nimport { myError } from \"utils/log_tools\";\n\nconst amtCol = 5\nconst OnePageSize = 16;\nconst rowHeight = 44;\n\n// 0\nfunction isNeedCallMore(currentStartIndex: number, to: number, marketArrayLength: number, currentListLength: number, pageSize: number = OnePageSize): boolean {\n    const pageCurrent = currentStartIndex / OnePageSize\n    if (to - pageCurrent > 1) {\n        return false\n    } else if (pageSize * to < marketArrayLength && currentListLength - 4 < pageSize * (to + 1)) {\n        return true\n    } else {\n        return false\n    }\n}\n\nexport function useQuote<C extends { [ key: string ]: string }>() {\n\n\n    const {\n        tickerMap,\n        status: tickerStatus,\n        // errorMessage: errorTickerMap,\n        statusUnset: tickerStatusUnset,\n        updateTickers,\n    } = useTicker();\n    const {sendSocketTopic, socketEnd} = useSocket();\n    const [recommendedPairs, setRecommendedPairs] = React.useState<string[]>([])\n    const {marketArray, coinMap} = store.getState().tokenMap;\n    // const recommendMarkets: string[] = marketArray && recommendedPairs.length === 4 ? recommendedPairs : []\n    // const recommendMarkets: string[] = ['LRC-USDC', 'LRC-ETH', 'ETH-USDC', 'USDC-USDT']\n    // const _marketArrayWithOutRecommend = marketArray ? marketArray.filter(item => recommendMarkets.findIndex(m => m === item) === -1) : [];\n    // const _marketArrayWithOutRecommend = marketArray ? marketArray.filter(item => recommendedPairs.findIndex(m => m === item) === -1) : [];\n    const [tickList, setTickList] = React.useState<any>([]);\n    const [recommendations, setRecommendations] = React.useState<MarketBlockProps<C>[]>([]);\n    const [, setTickerKeys] = React.useState<string[]>([]);\n    const [focusRowFrom, setFocusRowFrom] = React.useState<[start: number, end: number]>([0, 2]);\n    const [startIndex, setStartIndex] = React.useState<number>(-1);\n    // const recommendMarkets: string[] = marketArray ? marketArray.slice(0, 4) : ['LRC-ETH', 'LRC-ETH', 'LRC-ETH', 'LRC-ETH']\n    \n    const subject = React.useMemo(() => tickerService.onSocket(), []);\n\n    const updateRecommendation = React.useCallback((recommendationIndex, ticker) => {\n        if (recommendations.length) {\n          //  let _recommendations = deepClone(recommendations)\n            recommendations[ recommendationIndex ].tradeFloat = ticker\n            setRecommendations(recommendations)\n        }\n    }, [recommendations]);\n    \n    React.useEffect(() => {\n        const subscription = subject.subscribe(({tickerMap}) => {\n            if (tickerMap) {\n                Reflect.ownKeys(tickerMap).forEach((key) => {\n                    let recommendationIndex = recommendedPairs.findIndex(ele => ele === key)\n                    if (recommendationIndex !== -1) {\n                        // setRecommendations\n                        updateRecommendation(recommendationIndex, tickerMap[ key as string ])\n                    }\n                    //TODO update related row. use socket return\n                })\n            }\n        });\n        return () => subscription.unsubscribe();\n    }, [subject, recommendedPairs]);\n\n    const getRecommandPairs = useCallback(async() => {\n        if (LoopringAPI.exchangeAPI) {\n            try {\n                const { recommended } = await LoopringAPI.exchangeAPI.getRecommendedMarkets()\n                setRecommendedPairs(recommended)\n                return recommended || []\n            } catch (e) {\n                myError(e)\n            }\n            return []\n            // const { recommended } = await LoopringAPI.exchangeAPI.getRecommendedMarkets()\n            // console.log(recommended)\n            // setRecommendedPairs(recommended)\n            // return recommended\n        }\n    }, [])\n\n    React.useEffect(() => {\n        getRecommandPairs()\n    }, [getRecommandPairs])\n\n\n    //TODO if socket is error throw use recall will pending on it\n    // React.useEffect(() => {\n    //     switch (socketStatus) {\n    //         case \"ERROR\":\n    //             console.log(\"ERROR\", 'open websocket error get moment value from api ');\n    //             socketStatusUnset();\n    //             updateTickers(tickerKeys);\n    //             break;\n    //         default:\n    //             break;\n    //     }\n    // }, [socketStatus, socketStatusUnset]);\n    React.useEffect(() => {\n        const [from, to] = focusRowFrom\n        getTicker(from, to);\n        socketSendTicker(from * OnePageSize);\n        return () => {\n            socketEnd()\n        }\n    }, []);\n    React.useEffect(() => {\n        switch (tickerStatus) {\n            case \"ERROR\":\n                console.log(\"ERROR\", 'get ticker error,ui');\n                tickerStatusUnset()\n                break;\n            case \"PENDING\":\n                break;\n            case \"DONE\":\n                tickerStatusUnset();\n                updateRawData(tickerMap as TickerMap<C>);\n                break;\n            default:\n                break;\n        }\n    }, [tickerStatus, tickerStatusUnset]);\n\n    const getTicker = React.useCallback((from: number, to: number) => {\n        // if (_marketArrayWithOutRecommend) {\n            // let array = _marketArrayWithOutRecommend.slice(from * OnePageSize, to * OnePageSize);\n            // let array = _marketArrayWithOutRecommend; // \n            //High: add recommendations market first time is 36\n            // if (from === 0) {\n            //     array = recommendMarkets.concat(array)\n            // }\n            // updateTickers(array);\n        // }\n        updateTickers(marketArray || []);\n\n    }, [marketArray, OnePageSize])\n\n    const updateRawData = React.useCallback(async (tickerMap: TickerMap<C>) => {\n        const marketPairs: string[] = await getRecommandPairs()\n        let _recommendationsFloat: QuoteTableRawDataItem[] = [];\n        let defaultRecommendationsFloat: QuoteTableRawDataItem[] = []\n        const _tickList = tickerMap && Object.keys(tickerMap) ? Reflect.ownKeys(tickerMap).reduce((prev, key) => {\n            // @ts-ignore\n            const [, coinA, coinB] = key.match(/(\\w+)-(\\w+)/i);\n            let _item = {\n                ...tickerMap[ key as string ],\n                pair: {\n                    coinA,\n                    coinB,\n                },\n            } as QuoteTableRawDataItem;\n\n            if (marketPairs.findIndex(m => m === key) !== -1) {\n                _recommendationsFloat.push(deepClone(_item))\n            }\n            if (marketArray && marketArray.findIndex(m => m === key) !== -1) {\n                defaultRecommendationsFloat.push(deepClone(_item))\n            }\n            prev.push(_item);\n            return prev\n        }, [] as QuoteTableRawDataItem[]) : []\n        \n        setTickList([...tickList, ..._tickList])\n        //setTickList\n        // if (focusRowFrom[ 0 ] === 0 && _recommendationsFloat.length > 0) {\n        if (focusRowFrom[ 0 ] === 0) {\n            _recommendationsFloat = _recommendationsFloat.filter(o => {\n                const { coinA, coinB } = o.pair\n                return (coinMap && coinMap[coinA] && coinMap[coinB])\n            })\n\n            //FIX: fix in uat env not enough pair_recommendations\n            if (_recommendationsFloat.length < 4) {\n                const filteredFloat = defaultRecommendationsFloat.filter(o => {\n                    const pair = `${o.pair.coinA}-${o.pair.coinB}`\n                    return !marketPairs.includes(pair)\n                })\n                _recommendationsFloat = _recommendationsFloat.concat(filteredFloat.slice(0, 4 - _recommendationsFloat.length));\n            }\n\n            // case uat only\n            while(_recommendationsFloat.length < 4) {\n                _recommendationsFloat.push(deepClone(_recommendationsFloat[0]))\n            }\n            \n            const _recommendations = _recommendationsFloat.reduce((prev, item) => {\n                if (coinMap) {\n                    const {coinA, coinB} = item.pair;\n                    const _item: MarketBlockProps<C> = {\n                        tradeFloat: item as any,\n                        // @ts-ignore\n                        coinAInfo: coinMap[ coinA ],\n                        // @ts-ignore\n                        coinBInfo: coinMap[ coinB ]\n                    } as MarketBlockProps<C>\n                    prev.push(_item)\n                }\n                return prev\n            }, [] as MarketBlockProps<C>[])\n\n            setRecommendations(_recommendations)\n        }\n    }, [tickList, focusRowFrom])\n\n\n    // const  = (startIndex: number) => {\n    //     console.log(startIndex)\n    // }\n\n    // const debounceGetTicker = React.useCallback(debounce((from, to) => {\n    //     getTicker(from, to)\n    // }, globalSetup.wait), [])\n\n    const socketSendTicker = React.useCallback(debounce((_startIndex: number, pageSize = OnePageSize) => {\n        if(_startIndex !== startIndex)  {\n            // let marketArray: string[] = _marketArrayWithOutRecommend.slice(_startIndex, _startIndex + pageSize);\n            // marketArray = [...recommendMarkets, ...marketArray];\n            // setTickerKeys(marketArray || []);\n            //High:\n            sendSocketTopic({[ WsTopicType.ticker ]: marketArray});\n        }\n    }, globalSetup.wait * 2), [startIndex])\n\n    // const onVisibleRowsChange = React.useCallback(async (startIndex: number) => {\n    //     //TODO isBottom and is On prev tickerCall\n    //     // if (!isAtBottom(startIndex,focusRowFrom[1],_marketArrayWithOutRecommend.length,OnePageSize)\n    //     //     && tickerStatus !== 'PENDING'){\n    //     // }\n    //     //TODO load more\n    //     const [, to] = focusRowFrom\n    //     if (isNeedCallMore(startIndex, to, _marketArrayWithOutRecommend.length, tickList.length, OnePageSize)) {\n    //         console.log('getNextPage.......')\n    //         setFocusRowFrom([to, to + 1]);\n    //         debounceGetTicker(to, to + 1);\n    //     }\n    //     setStartIndex(startIndex);\n    //     socketSendTicker(startIndex, OnePageSize)\n    // }, [focusRowFrom, OnePageSize, tickerStatus, marketArray, tickList])\n\n    return {\n        tickList,\n        recommendations,\n        // handleScroll,\n        // onVisibleRowsChange\n    }\n\n}\n\nexport type CandlestickItem = {\n    close: number;\n    timeStamp: number;\n}\n\nexport const useCandlestickList = (market: string) => {\n    const [candlestickList, setCandlestickList] = React.useState<CandlestickItem[]>([])\n    const getCandlestick = React.useCallback(async (market: string) => {\n        if (LoopringAPI.exchangeAPI) {\n            const res = await LoopringAPI.exchangeAPI.getMixCandlestick({\n                market: market,\n                interval: TradingInterval.d1,\n                // start?: number;\n                // end?: number;\n                limit: 7\n            })\n            if (res && res.candlesticks && !!res.candlesticks.length) {\n                const data = res.candlesticks.map(o => ({\n                    close: o.close,\n                    timeStamp: o.timestamp\n                }))\n                setCandlestickList(data)\n            }\n            setCandlestickList([])\n        }\n        setCandlestickList([])\n    }, [])\n\n    React.useEffect(() => {\n        getCandlestick(market)\n    }, [getCandlestick, market])\n\n    return candlestickList\n}\n","import styled from '@emotion/styled';\nimport { Box, Grid, Paper } from '@material-ui/core';\nimport { TablePaddingX } from '@loopring-web/component-lib';\n\nexport const StylePaper = styled(Box)`\n  display: flex;\n  flex-direction: column;\n  width: 100%;\n  //height: 100%;\n  flex: 1;\n  background-color: ${({ theme }) => theme.colorBase.background().default};\n  border-radius: ${({ theme }) => theme.unit}px;\n  // padding: ${({ theme }) => 3 * theme.unit}px  0;\n  margin-bottom: ${({ theme }) => 2* theme.unit}px;\n  .title {\n    font-size: ${({ theme }) => theme.unit * 3}px;\n    //line-height: 19px;\n    margin-left: ${({ theme }) => 3 * theme.unit}px;\n    margin-top: ${({ theme }) => 3 * theme.unit}px;\n    // margin-bottom: ${({ theme }) => 2 * theme.unit}px;\n  }\n\n  .tableWrapper {\n    display: flex;\n    margin-top: ${({ theme }) => 3 * theme.unit}px;\n    flex: 1;\n    .rdg {\n      flex: 1;\n    }\n  }\n\n  .extraTradeClass {\n    .rdg-header-row {\n      background-color: inherit !important;\n    }\n  }\n` as typeof Paper;\n\n\nexport const  TableWrapStyled = styled(Grid)`\n  &{\n    background-color: ${({theme}) => theme.colorBase.background().default};\n    border-radius: ${({ theme }) => theme.unit}px;\n    .rdg{\n      .rdg-header-row {\n        border-radius: ${({theme}) => theme.unit}px ${({theme}) => theme.unit}px 0 0;\n      }\n    }\n  }\n  ${({theme}) => TablePaddingX({pLeft:theme.unit * 3,pRight:theme.unit * 3})}\n` as typeof Grid\n\n//    ${({theme}) => theme.border.defaultFrame({c_key: 'blur', d_R: 1})};\n","import React, { useCallback, useEffect } from 'react'\nimport styled from '@emotion/styled/macro'\n\nimport { MarketBlock, QuoteTable, TablePaddingX, QuoteTableRawDataItem, InputSearch } from '@loopring-web/component-lib'\nimport { OutlinedInputProps } from '@material-ui/core/OutlinedInput/OutlinedInput';\nimport { WithTranslation, withTranslation } from 'react-i18next'\nimport { useHistory } from 'react-router-dom'\nimport { cloneDeep } from 'lodash';\n// import { FloatTag } from '@loopring-web/common-resources'\nimport { Box, Grid, Tabs, Tab, Divider, OutlinedInput, InputAdornment } from '@material-ui/core'\nimport { SearchIcon } from '@loopring-web/common-resources'\nimport { useQuote, useCandlestickList } from './hook'\nimport { LoopringAPI } from 'stores/apis/api'\nimport { TradingInterval } from 'loopring-sdk/dist'\nimport { TableWrapStyled } from 'pages/styled'\nimport { useFavoriteMarket } from 'stores/localStore/favoriteMarket'\nimport { AmmPoolActivityRule } from 'loopring-sdk'\n\nconst RowStyled = styled(Grid)`\n      & .MuiGrid-root:not(:last-of-type) > div{\n        margin-right: ${({theme}) => theme.unit * 2}px;\n      }\n` as typeof Grid\n\nconst SearchWrapperStyled = styled(Box)`\n      position: absolute;\n      top: 1.3rem;\n      right: ${({theme}) => theme.unit * 2}px;\n    `\n\nconst TabsWrapperStyled = styled(Box)`\n      position: relative;\n      padding: 0.8rem 0.8rem 0 1rem;\n`\n\nexport type CandlestickItem = {\n  market: string;\n  data: {\n    close: number;\n    timeStamp: number;\n  }[]\n}\n\nexport enum TableFilterParams {\n  all = 'all',\n  favourite = 'favourite',\n  ranking = 'ranking'\n}\n\nconst QuotePage = withTranslation('common')((rest: WithTranslation) => {\n    const [candlestickList, setCandlestickList] = React.useState<any[]>([])\n    const [ammPoolBalances, setAmmPoolBalances] = React.useState<any[]>([])\n    const [tableTabValue, setTableTabValue] = React.useState('all')\n    const [filteredData, setFilteredData] = React.useState<QuoteTableRawDataItem[]>([])\n    const [searchValue, setSearchValue] = React.useState<string>('')\n    const [swapRankingList, setSwapRankingList] = React.useState<AmmPoolActivityRule[]>([])\n    const [tableHeight, setTableHeight] = React.useState(0);\n\n    const { favoriteMarket, removeMarket, addMarket } = useFavoriteMarket()\n    const { t } = rest\n\n    const getSwapRankingList = React.useCallback(async () => {\n      if (LoopringAPI.ammpoolAPI) {\n        const res = await LoopringAPI.ammpoolAPI.getAmmPoolActivityRules()\n        if (res && !!res.groupByRuleType.SWAP_VOLUME_RANKING.length) {\n          setSwapRankingList(res.groupByRuleType.SWAP_VOLUME_RANKING)\n        }\n      }\n    }, [])\n\n    const getCandlestick = React.useCallback(async (market: string) => {\n      if (LoopringAPI.exchangeAPI) {\n        const res = await LoopringAPI.exchangeAPI.getMixCandlestick({\n          market: market,\n          interval: TradingInterval.d1,\n          // start?: number;\n          // end?: number;\n          limit: 30,\n        })\n        if (res && res.candlesticks && !!res.candlesticks.length) {\n          // const data = res.candlesticks.map(o => ({\n          //   close: o.close,\n          //   timeStamp: o.timestamp\n          // }))\n          // setCandlestickList(prev => [...prev, {\n          //   market: market,\n          //   data: data\n          // }])\n          const data = res.candlesticks.map(o => ({\n            timeStamp: o.timestamp,\n            low: o.low,\n            high: o.high,\n            open: o.open,\n            close: o.close,\n            volume: o.baseVol,\n            sign: o.close < o.open ? -1 : 1,\n          }))\n          setCandlestickList(prev => [...prev, {\n            market: market,\n            data: data\n          }])\n        }\n      }\n    }, [])\n\n    const { recommendations, tickList /* onVisibleRowsChange */ } = useQuote()\n\n    const getCurrentHeight = React.useCallback(() => {\n      const height = window.innerHeight\n      const tableHeight = height - 64 - 117 - 56 - 120 - 20\n      console.log(tableHeight)\n      setTableHeight(tableHeight)\n    }, [])\n\n    React.useEffect(() => {\n      getCurrentHeight()\n      window.addEventListener('resize', getCurrentHeight)\n      return () => {\n        window.removeEventListener('resize', getCurrentHeight)\n      }\n    }, [getCurrentHeight]);\n\n    React.useEffect(() => {\n      const list = recommendations.map(item => {\n        const market = `${item.coinAInfo.simpleName}-${item.coinBInfo.simpleName}`\n        return market\n      })\n      if (!!list.length) {\n        getCandlestick(list[0])\n        getCandlestick(list[1])\n        getCandlestick(list[2])\n        getCandlestick(list[3])\n      }\n    }, [recommendations, getCandlestick])\n\n    const getAmmPoolBalances = useCallback(async () => {\n      if (LoopringAPI.ammpoolAPI) {\n        const ammRes = await LoopringAPI.ammpoolAPI?.getAmmPoolBalances()\n        const fomattedRes = ammRes.raw_data.map((o: any) => ({\n          ...o,\n          poolName: o.poolName.replace('AMM-', '')\n        }))\n        setAmmPoolBalances(fomattedRes)\n      }\n    }, [])\n\n    React.useEffect(() => {\n      getAmmPoolBalances()\n    }, [getAmmPoolBalances])\n\n    React.useEffect(() => {\n      getSwapRankingList()\n    }, [getSwapRankingList])\n\n    let history = useHistory()\n\n    // prevent amm risky pair\n    const getFilteredTickList = useCallback(() => {\n      if (!!ammPoolBalances.length && tickList && !!tickList.length) {\n        return tickList.filter((o: any) => {\n          const pair = `${o.pair.coinA}-${o.pair.coinB}`\n          if (ammPoolBalances.find(o => o.poolName === pair)) {\n            return !ammPoolBalances.find(o => o.poolName === pair).risky\n          }\n          return true\n        })\n      }\n      return []\n    }, [tickList, ammPoolBalances])\n\n    useEffect(() => {\n      const data = getFilteredTickList()\n      setFilteredData(data)\n    }, [getFilteredTickList])\n\n    const handleTableFilterChange = useCallback(({type = TableFilterParams.all, keyword = '' }: {\n      type?: TableFilterParams;\n      keyword?: string;\n    }) => {\n      let data = cloneDeep(tickList)\n      if (type === TableFilterParams.favourite) {\n        data = data.filter((o: any) => {\n          const pair = `${o.pair.coinA}-${o.pair.coinB}`\n          return favoriteMarket.includes(pair)\n        })\n      }\n      if (type === TableFilterParams.ranking) {\n        data = data.filter((o: any) => {\n          const pair = `${o.pair.coinA}-${o.pair.coinB}`\n          return swapRankingList.find(o => o.market === pair)\n        })\n      }\n      data = data.filter((o: any) => {\n        const formattedKeyword = keyword?.toLocaleLowerCase()\n        const coinA = o.pair.coinA.toLowerCase()\n        const coinB = o.pair.coinB.toLowerCase()\n        if (keyword === '') {\n          return true\n        }\n        return coinA.includes(formattedKeyword) || coinB.includes(formattedKeyword)\n      })\n      if (type === TableFilterParams.all && !keyword) {\n        data = getFilteredTickList()\n      }\n      setFilteredData(data)\n    }, [getFilteredTickList, favoriteMarket, swapRankingList, tickList])\n\n    const handleRowClick = useCallback((row: QuoteTableRawDataItem) => {\n      const { coinA, coinB } = row.pair\n      const tradePair = `${coinA}-${coinB}`\n      history && history.push({\n        pathname: `/trading/lite/${tradePair}`\n      })\n    }, [history])\n\n    const handleTabChange = useCallback((_event: any, newValue: string) => {\n      setTableTabValue(newValue)\n      handleTableFilterChange({\n        type: newValue === 'favourite' ? TableFilterParams.favourite : newValue === 'tradeRanking' ? TableFilterParams.ranking : TableFilterParams.all,\n        keyword: searchValue\n      })\n    }, [handleTableFilterChange, searchValue])\n    \n    const handleSearchChange = React.useCallback((value) => {\n      setSearchValue(value)\n      const type = tableTabValue === 'favourite' ? TableFilterParams.favourite : tableTabValue === 'tradeRanking' ? TableFilterParams.ranking : TableFilterParams.all\n      handleTableFilterChange({keyword: value, type: type})\n    }, [handleTableFilterChange, tableTabValue])\n\n    return <Box display={'flex'} flexDirection={'column'} flex={1} >\n\n        <RowStyled container >\n\n            {/* {recommendations.map((item,index)=> <Grid key={item.coinAInfo+item.coinBInfo+index} item xs={3} >\n                    <MarketBlock {...{...item, ...rest}}></MarketBlock>\n                </Grid>\n            )} */}\n            {recommendations.map((item,index)=> {\n              const market = `${item.coinAInfo.simpleName}-${item.coinBInfo.simpleName}`\n              const chartData = candlestickList.find(o => o.market === market)?.data.sort((a: any, b: any) => a.timeStamp - b.timeStamp)\n              return (\n                <Grid key={index} item xs={3} onClick={() => {\n                  history && history.push({\n                    pathname: `/trading/lite/${market}`\n                  })\n                }}>\n                    <MarketBlock {...{...item, chartData: chartData ? chartData : [], ...rest}}></MarketBlock>\n                </Grid>\n              )\n            } \n            )}\n\n        </RowStyled>\n        <TableWrapStyled container marginY={3}  paddingBottom={2} flex={1}> \n            <Grid item xs={12}>\n                <TabsWrapperStyled>\n                  <Tabs\n                      value={tableTabValue}\n                      onChange={handleTabChange}\n                      aria-label=\"disabled tabs example\"\n                  >\n                      <Tab label={t('labelQuotePageFavourite')} value=\"favourite\"/>\n                      <Tab label={t('labelAll')} value=\"all\"/>\n                      <Tab label={t('labelQuotePageTradeRanking')} value=\"tradeRanking\"/>\n                  </Tabs>\n                  <SearchWrapperStyled>\n                    <InputSearch value={searchValue} onChange={handleSearchChange} />\n                  </SearchWrapperStyled>\n                </TabsWrapperStyled>\n                <Divider />\n                <QuoteTable /* onVisibleRowsChange={onVisibleRowsChange} */ \n                  onRowClick={(index, row, col) => handleRowClick(row)} \n                  rawData={filteredData}\n                  favoriteMarket={favoriteMarket}\n                  addFavoriteMarket={addMarket}\n                  removeFavoriteMarket={removeMarket}\n                  currentHeight={tableHeight}\n                  {...{ showLoading: tickList && !tickList.length, ...rest }} />\n            </Grid>\n        </TableWrapStyled>\n    </Box>\n\n\n})\n\nexport default QuotePage\n","import { useDispatch, useSelector } from 'react-redux'\nimport { FavoriteMarketStates } from './interface';\nimport { clearAll, removeMarket, addMarket, addMarkets } from './reducer';\nimport React from 'react';\n\n\nexport const useFavoriteMarket = ():  {\n    favoriteMarket: FavoriteMarketStates\n    clearAll:()=>void,\n    removeMarket:(pair:string)=>void,\n    addMarket:(pair:string)=>void,\n    addMarkets:(pair:string[])=>void,\n} => {\n    const favoriteMarket: FavoriteMarketStates = useSelector((state: any) => state.localStore.favoriteMarket)\n    const dispatch = useDispatch();\n    return {\n        favoriteMarket: favoriteMarket ,\n        clearAll: React.useCallback(() => dispatch(clearAll(undefined)), [dispatch]),\n        removeMarket: React.useCallback((pair) => dispatch(removeMarket(pair)), [dispatch]),\n        addMarket: React.useCallback((pair) => dispatch(addMarket(pair)), [dispatch]),\n        addMarkets: React.useCallback((pairs) => dispatch(addMarkets(pairs)), [dispatch]),\n    }\n}\n","import { useDeepCompareEffect } from \"react-use\"\n\nexport function useCustomDCEffect(action: any, deps: any[] | undefined | null) {\n    useDeepCompareEffect(action, [deps || {}])\n}\n","import { useCallback, useState } from 'react'\nimport moment from 'moment'\nimport { useCustomDCEffect } from 'hooks/common/useCustomDCEffect'\n\nimport { TradingInterval, Candlestick, GetCandlestickRequest, GetDepthRequest, GetTickerRequest, dumpError400, getExistedMarket } from 'loopring-sdk'\n\nimport { ChartUnit, CoinInfo } from '@loopring-web/common-resources'\n\nimport { ChartType } from '@loopring-web/component-lib'\n\nimport { TGItemData, TGItemJSXInterface, } from '@loopring-web/component-lib'\n\nimport { IGetDepthDataParams } from '@loopring-web/component-lib'\nimport { LoopringAPI } from 'stores/apis/api'\n\nconst toggleData: TGItemData[] = [\n  {\n    value: ChartType.Trend,\n    key: ChartType.Trend,\n    label: 'label' + ChartType.Trend\n  },\n  {\n    value: ChartType.Depth,\n    key: ChartType.Depth,\n    label: 'label' + ChartType.Depth\n  },\n]\n\nexport function useBasicInfo(props: any, coinAInfo: any, coinBInfo: any, marketArray: any[], t: any) {\n  const tgItemJSXs: TGItemJSXInterface[] = toggleData.map(({ value, label, key }) => {\n    return { value, tlabel: t(label), key, JSX: <>{t(label)}</> }\n  })\n\n  // const { base, quote, market, tokens } = props\n\n  const { market, amm } = getExistedMarket(marketArray, coinAInfo?.name, coinBInfo?.name)\n\n  const [chartType, setChartType] = useState<ChartType>(ChartType.Trend)\n\n  // console.log('---useBasicInfo market:', market, ' amm:', amm, ' chartType:', chartType)\n  //\n  // const [change, setChange] = useState(0)\n  //\n  // const [volume, setVolume] = useState('')\n\n  const [chartUnit, setChartUnit] = useState(ChartUnit.D1)\n\n  const [originData, setOriginData] = useState<any>(undefined)\n\n  const handleChange = useCallback((_e: React.MouseEvent, value: any) => {\n    // Settings.setChartType(value)\n    // console.log('useBasicInfo handleChange:', value)\n    setOriginData(undefined)\n    setChartType(value === 'Trend' ? ChartType.Trend : ChartType.Depth)\n  }, [setOriginData, setChartType])\n\n  const handleChartUnitChange = (event: React.MouseEvent<HTMLElement, MouseEvent>, newValue: string) => {\n      const mappedValue = newValue === '1H' ? ChartUnit.H1 : newValue === '1W' ? ChartUnit.W1 : ChartUnit.D1\n      setChartUnit(mappedValue)\n  }\n\n  // useCustomDCEffect(async () => {\n  //\n  //   if (!exchangeApi || !market || !tokens || !quote) {\n  //     return\n  //   }\n  //\n  //   let mounted = true\n  //\n  //   try {\n  //\n  //     const request: GetTickerRequest = {\n  //       market: market.market,\n  //     }\n  //\n  //     const ticker = await exchangeApi.getTicker(request)\n  //     if (mounted) {\n  //\n  //       if (ticker.tickList[0].change) {\n  //         setChange(ticker.tickList[0].change)\n  //       }\n  //\n  //       if (ticker.tickList[0].base_token_volume) {\n  //         const baseVol = fromWEI(tokens.tokenSymbolMap, base, ticker.tickList[0].base_token_volume) as string\n  //         setVolume(baseVol)\n  //       }\n  //     }\n  //   }\n  //   catch (reason) {\n  //     dumpError400(reason, 'ChartPanel getCandlestick')\n  //   }\n  //\n  //   return () => {\n  //     mounted = false\n  //   }\n  //\n  // }, [exchangeApi, market, tokens, base,])\n\n  const tgItemJSXsPriceChart: TGItemJSXInterface[] = Object.keys(ChartUnit).reduce((pre, item) => {\n    // @ts-ignore\n    const tGItemData: TGItemData = { value: ChartUnit[item], key: ChartUnit[item], label: 'label' + ChartUnit[item] };\n    pre.push({ value: tGItemData.value, tlabel: t(tGItemData.label ? tGItemData.label : tGItemData.key), key: tGItemData.key, JSX: <>{t(tGItemData.label ? tGItemData.label : tGItemData.key)}</> })\n    return pre\n  }, [] as TGItemJSXInterface[])\n\n  useCustomDCEffect(async () => {\n  \n    let mounted = true\n  \n    if (!LoopringAPI.exchangeAPI || !market || !amm) {\n      return\n    }\n  \n    if (chartType === ChartType.Trend) {\n      const request: GetCandlestickRequest = {\n        market: amm as string,\n        interval: TradingInterval.d1,\n        limit: 30\n      }\n  \n      try {\n        const candlesticks = await LoopringAPI.exchangeAPI.getCandlestick(request)\n  \n        if (mounted) {\n          const originData = candlesticks.candlesticks.map((item: Candlestick) => {\n            return {\n              timeStamp: item.timestamp,\n              low: item.low,\n              high: item.high,\n              open: item.open,\n              close: item.close,\n              volume: item.quoteVol,\n              change: (item.close - item.open) / item.open,\n              date: moment(item.timestamp).format('MMM DD')\n            }\n          })\n          setOriginData(originData)\n        }\n      }\n      catch (reason) {\n        dumpError400(reason, 'ChartPanel getCandlestick')\n      }\n  \n    } else {\n      const request: GetDepthRequest = {\n        market,\n      }\n  \n      try {\n  \n        const { depth } = await LoopringAPI.exchangeAPI.getMixDepth(request)\n        \n        if (mounted) {\n          const originData: IGetDepthDataParams = {\n            bidsPrices: depth.bids_prices,\n            bidsAmtTotals: depth.bids_amtTotals as any,\n            asksPrices: depth.asks_prices,\n            asksAmtTotals: depth.asks_amtTotals as any,\n          }\n          setOriginData(originData)\n        }\n  \n      } catch (reason) {\n        dumpError400(reason)\n      }\n  \n    }\n  \n    return () => {\n      mounted = false\n    }\n  \n  }, [LoopringAPI.exchangeAPI, amm, market, chartType])\n\n  return {\n    // change,\n    // volume,\n    chartUnit,\n    chartType,\n    tgItemJSXs,\n    tgItemJSXsPriceChart,\n    handleChange,\n    originData,\n    handleChartUnitChange,\n  }\n}","import { TxStatus } from \"loopring-sdk\";\nimport { myLog } from \"utils/log_tools\"\nimport { Account } from \"@loopring-web/common-resources\";\n\nexport enum CONSTANTS {\n    Handler = 'handler',\n    AccountId = 'account_id',\n    Account = 'account',\n    Apikey = 'apikey',\n    Eddsakey = 'eddsakey',\n    ActiveTime = 'active_time',\n    AmmOrder = 'amm_order',\n    HardwareAddresses = 'hardware_addresses',\n    ConnectorName = 'connector_name',\n\n    DepositHash = '__loopring__.depositsHash',\n\n    WalletConnect = 'walletconnect',\n}\n\nconst SESSION_TIMEOUT_SECONDS = 600\n\nexport class UserStorage {\n\n    public static getLocalDepositHash(account: Account): { [key: string]: any } | undefined {\n        let depositsHash = window.localStorage.getItem(CONSTANTS.DepositHash);\n        if (depositsHash) {\n            depositsHash = JSON.parse(depositsHash);\n            if (depositsHash && account.accAddress && depositsHash[account.accAddress]) {\n                return depositsHash[account.accAddress]\n            }\n        }\n        return undefined\n    }\n\n    public static clearDepositHash(account: Account, value: string) {\n        // @ts-ignore\n        let depositsHash: { [key: string]: object } = window.localStorage.getItem(CONSTANTS.DepositHash);\n        depositsHash = depositsHash ? JSON.parse(depositsHash as any) : {};\n        if (depositsHash[account.accAddress] && depositsHash[account.accAddress][value]) {\n            delete depositsHash[account.accAddress][value];\n        }\n    }\n\n    public static setLocalDepositHash(account: Account, value: string, status: TxStatus): void {\n        // @ts-ignore\n        let depositsHash: { [key: string]: object } = window.localStorage.getItem(CONSTANTS.DepositHash);\n        depositsHash = depositsHash ? JSON.parse(depositsHash as any) : {};\n        depositsHash[account.accAddress] = {\n            ...depositsHash[account.accAddress],\n            [value]: status,\n        }\n    }\n\n    public static clearWalletConnect() {\n        myLog('try to clearWalletConnect....')\n        localStorage.removeItem(CONSTANTS.WalletConnect)\n    }\n\n    public static setConnectorName(connectionName: string) {\n        localStorage.setItem(CONSTANTS.ConnectorName, connectionName)\n    }\n\n    public static getConnectorName() {\n        return localStorage.getItem(CONSTANTS.ConnectorName)\n    }\n\n    public static clearConnectorName() {\n        myLog('try to clearConnectorName')\n        localStorage.removeItem(CONSTANTS.ConnectorName)\n    }\n\n    public static getHandler() {\n        const rawHandler = sessionStorage.getItem(CONSTANTS.Handler)\n        try {\n            if (rawHandler !== undefined && rawHandler !== null)\n                return parseInt(rawHandler)\n        } catch (err) {\n        }\n        return undefined\n    }\n\n    public static setHandler(handler: any) {\n        sessionStorage.setItem(CONSTANTS.Handler, handler)\n    }\n\n    public static clearHandler() {\n        sessionStorage.removeItem(CONSTANTS.Handler)\n    }\n\n    public static checkTimeout(reset: boolean = false): boolean {\n        let dateTimeStr = localStorage.getItem(CONSTANTS.ActiveTime)\n        let now = new Date().getTime()\n\n        if (dateTimeStr !== null && !reset) {\n            let tmpDt = new Date(parseInt(dateTimeStr))\n\n            if (now - tmpDt.getTime() > SESSION_TIMEOUT_SECONDS * 1000) {\n                myLog(`TIMEOUT! now:${now} dateTimeStr:${dateTimeStr} delta:${now - tmpDt.getTime()}`)\n                sessionStorage.clear()\n                localStorage.setItem(CONSTANTS.ActiveTime, now.toString())\n                return true\n            }\n        } else {\n            localStorage.setItem(CONSTANTS.ActiveTime, now.toString())\n        }\n\n        return false\n    }\n\n\n    public static getAccountId() {\n        const rawId = sessionStorage.getItem(CONSTANTS.AccountId)\n        try {\n            if (rawId)\n                return parseInt(rawId)\n        } catch (err) {\n        }\n        return undefined\n    }\n\n    public static setAccountId(accountId: number) {\n        sessionStorage.setItem(CONSTANTS.AccountId, accountId.toString())\n    }\n\n    public static getAccount() {\n        return sessionStorage.getItem(CONSTANTS.Account)\n    }\n\n    public static setAccount(account: string) {\n        sessionStorage.setItem(CONSTANTS.Account, account)\n    }\n\n    public static getApikey() {\n        return sessionStorage.getItem(CONSTANTS.Apikey)\n    }\n\n    public static setApikey(apikey: string) {\n        sessionStorage.setItem(CONSTANTS.Apikey, apikey)\n    }\n\n    public static getEddsakey() {\n        return sessionStorage.getItem(CONSTANTS.Eddsakey)\n    }\n\n    public static setEddsakey(eddsakey: string) {\n        sessionStorage.setItem(CONSTANTS.Eddsakey, eddsakey)\n    }\n\n    public static getAmmOrder(): string {\n        var orderHash = localStorage.getItem(CONSTANTS.AmmOrder)\n        return orderHash ? orderHash : ''\n    }\n\n    public static setAmmOrder(orderHash: string) {\n        localStorage.setItem(CONSTANTS.AmmOrder, orderHash)\n    }\n\n    public static clearAmmOrder() {\n        localStorage.removeItem(CONSTANTS.AmmOrder)\n    }\n\n    public static isHardwareAddress(address: string) {\n        let current = localStorage.getItem(CONSTANTS.HardwareAddresses)\n        if (current) {\n            if (current.includes(address.toLowerCase())) {\n                return true\n            }\n        }\n        return false\n    }\n\n    public static saveHardwareAddress(address: string) {\n        let current = localStorage.getItem(CONSTANTS.HardwareAddresses);\n        if (current) {\n            if (current.includes(address.toLowerCase()) !== true) {\n                let newValue = current + ',' + address.toLowerCase();\n                localStorage.setItem(CONSTANTS.HardwareAddresses, newValue);\n            }\n        } else {\n            localStorage.setItem(CONSTANTS.HardwareAddresses, address.toLowerCase());\n        }\n\n    }\n}\n","import { ChartUnit,UpColor } from '@loopring-web/common-resources'\nimport { ScaleAreaChart, ToggleButtonGroup, useSettings, TradeTitle, ChartType } from '@loopring-web/component-lib'\nimport { Box, Grid } from \"@material-ui/core\"\nimport { WithTranslation } from 'react-i18next'\nimport { useBasicInfo } from './hook'\nimport { VolToNumberWithPrecision } from 'utils/formatter_tool'\n\nconst BasicInfoPanel = ({ props, coinAInfo, coinBInfo, tradeFloat, marketArray, t, ...rest }: any & WithTranslation) => {\n\n    const {\n        // change,\n        chartType,\n        tgItemJSXs,\n        tgItemJSXsPriceChart,\n        handleChange,\n        originData,\n        chartUnit,\n        handleChartUnitChange,\n    } = useBasicInfo(props, coinAInfo, coinBInfo, marketArray, t)\n    const { upColor } = useSettings();\n    const baseToken = coinAInfo?.name\n    const quoteToken = coinBInfo?.name\n    const trendChartData = originData && !!originData.length ? originData.sort((a: any, b: any) => a.timeStamp - b.timeStamp) : []\n    const depthChartData = originData && coinAInfo && originData.asksAmtTotals ? { \n        ...originData,\n        asksAmtTotals: originData.asksAmtTotals.map((amt: string) => Number(VolToNumberWithPrecision(amt, baseToken))),\n        bidsAmtTotals: originData.bidsAmtTotals.map((amt: string) => Number(VolToNumberWithPrecision(amt, baseToken))),\n    } : []\n    return  <>\n        <Grid item xs={8}>\n            <TradeTitle {...{\n                coinAInfo, coinBInfo,\n                ...rest, t, tradeFloat\n            }}></TradeTitle>\n        </Grid>\n        <Grid item xs={4} display={'flex'} justifyContent={'flex-end'} alignItems={'flex-end'}>\n            <ToggleButtonGroup exclusive {...{ ...rest, t, tgItemJSXs, value: chartType }}\n                handleChange={handleChange} />\n        </Grid>\n\n        <Grid item xs={12} position={'relative'}>\n            <Box minHeight={256} maxHeight={256} display={'block'} style={{ height: '100%', width: '100%' }}>\n                <ScaleAreaChart \n                    type={chartType} \n                    data={chartType === ChartType.Trend ? trendChartData : depthChartData} \n                    riseColor={upColor as keyof typeof UpColor}\n                    extraInfo={quoteToken}\n                    handleMove={() => {}}\n                    showXAxis\n                />\n            </Box>\n            {/* {chartType === ChartType.Trend && (\n                <Box height={24} display={'flex'} justifyContent={'flex-end'} position={'absolute'} right={0} bottom={0}>\n                    <ToggleButtonGroup exclusive {...{\n                        ...rest, t, tgItemJSXs: tgItemJSXsPriceChart,\n                        value: chartUnit, size: 'small'\n                    }}\n                        handleChange={handleChartUnitChange} />\n                </Box>\n            )} */}\n        </Grid> \n        {/* <Grid item xs={12} height={24} display={'flex'} justifyContent={'flex-end'}>\n            <ToggleButtonGroup exclusive {...{\n                ...rest, t, tgItemJSXs: tgItemJSXsPriceChart,\n                value: chartUnit, size: 'small'\n            }}\n                handleChange={handleChartUnitChange} />\n        </Grid> */}\n    </>\n\n};\n\nexport default BasicInfoPanel\n","\n\nimport { RefAttributes, useState } from 'react'\n\nimport Tabs from '@material-ui/core/Tabs'\nimport Tab from '@material-ui/core/Tab'\nimport Checkbox from '@material-ui/core/Checkbox'\nimport styled from '@emotion/styled'\n\nimport { FormControlLabel, TradeTable, } from '@loopring-web/component-lib'\nimport { withTranslation, WithTranslation } from 'react-i18next';\nimport { CheckBoxIcon, CheckedIcon } from '@loopring-web/common-resources'\nimport { RouteComponentProps, withRouter } from 'react-router'\nimport { RawDataTradeItem, BasicHeaderItem, HeadMenuType } from '@loopring-web/component-lib'\nimport { TableWrapStyled } from '../../../styled';\n\n\nconst applyProps = (index: number) => {\n    return {\n        id: `simple-tab-${index}`,\n        'aria-controls': `simple-tabpanel-${index}`,\n    }\n}\nconst StyledTabsWrapper = styled.div`\n          position: relative;\n          width: 100%;\n          margin-top: ${({theme}) => theme.unit * 4}px;\n        `\n\nconst StyledFormControlLabel = styled(FormControlLabel)`\n          position: absolute;\n          top: 0;\n          right: ${({theme}) => theme.unit}px;\n          margin: ${({theme}) => theme.unit}px 0 0 0;\n        `\n\nconst TradePanel = withTranslation('common')(\n   // withRouter(\n    (\n        {tradeArray,  myTradeArray, t}:\n            { tradeArray: RawDataTradeItem[], myTradeArray: RawDataTradeItem[] } & WithTranslation & RouteComponentProps) => {\n        // const [isAllTrade, setIsAllTrade] = useState(false)\n        const [value, setValue] = useState(1)\n        const handleChange = (event: any, newValue: any) => {\n            setValue(newValue)\n        }\n\n        // const handleCheckboxChange = () => {\n        //     setIsAllTrade((flag: boolean) => !flag)\n        // }\n\n        return (\n            <StyledTabsWrapper>\n                {/* <StyledFormControlLabel\n                    control={<Checkbox checked={isAllTrade} size={'small'} checkedIcon={<CheckedIcon/>}\n                                       icon={<CheckBoxIcon/>} color={'default'} onChange={handleCheckboxChange}/>}\n                    label={t('labelTradePanelHideOtherPairs')}/> */}\n\n                <Tabs value={value}\n                      onChange={handleChange}\n                      aria-label=\"tabs switch\">\n                    <Tab label={t('labelMyTrade')} {...applyProps(0)} />\n                    <Tab label={t('labelRecent')}   {...applyProps(1)} />\n                </Tabs>\n\n                <TableWrapStyled marginY={2}  paddingBottom={2} flex={1}>\n                    {value === 0 ?  <TradeTable rawData={myTradeArray} /> : <TradeTable rawData={tradeArray}/> }\n                </TableWrapStyled>\n\n            </StyledTabsWrapper>\n        )\n    }\n    ) as  (props: { tradeArray: RawDataTradeItem[], myTradeArray: RawDataTradeItem[] }) => JSX.Element;\n//)\n\nexport default TradePanel\n\n","import { useRouteMatch } from 'react-router';\nimport {\n    AccountState,\n    AccountStatus,\n    CoinInfo,\n    CustomError,\n    ErrorMap,\n    fnType,\n    globalSetup,\n    IBData,\n    SagaStatus,\n    TradeCalcData,\n    TradeFloat,\n    WalletMap\n} from '@loopring-web/common-resources';\nimport React, { useCallback, useEffect, useState } from 'react';\nimport { LoopringAPI } from '../../stores/apis/api';\nimport { useTokenMap } from '../../stores/token';\nimport * as sdk from 'loopring-sdk';\nimport {\n    AmmPoolInfoV3,\n    AmmPoolSnapshot,\n    DepthData,\n    dumpError400,\n    getExistedMarket,\n    GetMinimumTokenAmtRequest,\n    GetNextStorageIdRequest,\n    LoopringMap,\n    OrderType,\n    SubmitOrderRequestV3,\n    VALID_UNTIL\n} from 'loopring-sdk';\nimport { useAmmMap } from '../../stores/Amm/AmmMap';\nimport { useWalletLayer2 } from '../../stores/walletLayer2';\nimport { RawDataTradeItem, SwapData, SwapTradeData, SwapType, TradeBtnStatus } from '@loopring-web/component-lib';\nimport { useAccount } from '../../stores/account/hook';\nimport { useCustomDCEffect } from '../../hooks/common/useCustomDCEffect';\nimport {\n    accountStaticCallBack,\n    bntLabel,\n    btnClickMap,\n    coinPairInit,\n    getUserTrades,\n    makeCache,\n    makeMarketArray,\n    makeTickView,\n    makeWalletLayer2,\n    pairDetailBlock,\n    pairDetailDone\n} from '../../hooks/help';\nimport * as _ from 'lodash'\nimport store from 'stores';\nimport { deepClone } from '../../utils/obj_tools';\nimport { myLog } from 'utils/log_tools';\nimport { useTranslation } from 'react-i18next';\nimport { REFRESH_RATE_SLOW } from 'defs/common_defs';\n\nexport const useSwapBtnStatusCheck = () => {\n\n    const [btnStatus, setBtnStatus] = useState(TradeBtnStatus.DISABLED)\n\n    const [isSwapLoading, setIsSwapLoading] = useState(false)\n\n    const [isValidAmt, setIsValidAmt] = useState<boolean>(false)\n\n    const { account } = useAccount()\n\n    useEffect(() => {\n\n        if (account.readyState !== AccountStatus.ACTIVATED) {\n            setBtnStatus(TradeBtnStatus.DISABLED)\n        } else {\n\n            if (isSwapLoading) {\n                setBtnStatus(TradeBtnStatus.LOADING)\n            } else {\n                if (isValidAmt) {\n                    setBtnStatus(TradeBtnStatus.AVAILABLE)\n                } else {\n                    setBtnStatus(TradeBtnStatus.DISABLED)\n                }\n            }\n\n        }\n\n    }, [isSwapLoading, isValidAmt, account.readyState])\n\n    return {\n        btnStatus,\n        setIsSwapLoading,\n        setIsValidAmt,\n    }\n\n}\n\nexport const useSwapPage = <C extends { [key: string]: any }>() => {\n    /*** api prepare ***/\n    const { t } = useTranslation('common')\n\n    const [swapToastOpen, setSwapToastOpen] = useState<boolean>(false)\n\n    const [swapAlertText, setSwapAlertText] = useState<string>()\n    const wait = globalSetup.wait;\n    const match: any = useRouteMatch(\":symbol\")\n    const { coinMap, tokenMap, marketArray, marketCoins, marketMap, } = useTokenMap()\n    const { ammMap } = useAmmMap();\n\n    const { account, status: accountStatus } = useAccount()\n    const { delayAndUpdateWalletLayer2, walletLayer2, status: walletLayer2Status } = useWalletLayer2();\n\n    // const walletLayer2State = useWalletLayer2()\n    const [tradeData, setTradeData] = React.useState<SwapTradeData<IBData<C>> | undefined>(undefined);\n    const [tradeCalcData, setTradeCalcData] = React.useState<Partial<TradeCalcData<C>>>({});\n    const [tradeArray, setTradeArray] = React.useState<RawDataTradeItem[]>([]);\n    const [myTradeArray, setMyTradeArray] = React.useState<RawDataTradeItem[]>([]);\n    const [tradeFloat, setTradeFloat] = React.useState<TradeFloat | undefined>(undefined);\n    const [pair, setPair] = React.useState<{ coinAInfo: CoinInfo<C> | undefined, coinBInfo: CoinInfo<C> | undefined }>({\n        coinAInfo: undefined,\n        coinBInfo: undefined,\n    });\n\n    const [ammPoolSnapshot, setAmmPoolSnapshot] = React.useState<AmmPoolSnapshot | undefined>(undefined);\n\n    const [swapBtnI18nKey, setSwapBtnI18nKey] = React.useState<string | undefined>(undefined);\n\n    const [output, setOutput] = useState<any>()\n\n    const [takerRate, setTakerRate] = useState<string>('0')\n\n    const [feeBips, setFeeBips] = useState<string>('0')\n\n    const [baseMinAmt, setBaseMinAmt] = useState<string>()\n\n    const [quoteMinAmt, setQuoteMinAmt] = useState<string>()\n\n    // --- btn status check\n    const {\n        btnStatus,\n        setIsSwapLoading,\n        setIsValidAmt,\n    } = useSwapBtnStatusCheck()\n    // --- end of btn status check.\n\n    useCustomDCEffect(async () => {\n\n        const base = tradeData?.sell.belong\n        const quote = tradeData?.buy.belong\n\n        if (!LoopringAPI.userAPI || !base || !quote || !ammMap || !marketArray\n            || account.readyState !== AccountStatus.ACTIVATED || !account.accountId || !account.apiKey) {\n            return\n        }\n\n        const {\n            amm\n        } = getExistedMarket(marketArray, base, quote)\n\n        if (!amm) {\n            return\n        }\n\n        const ammInfo = ammMap[amm]\n\n        if (!ammInfo) {\n            return\n        }\n\n        const feeBips = ammInfo.__rawConfig__.feeBips\n\n        const req: GetMinimumTokenAmtRequest = {\n            accountId: account?.accountId,\n            market: amm,\n        }\n\n        const { amountMap } = await LoopringAPI.userAPI.getMinimumTokenAmt(req, account.apiKey)\n\n        const baseMinAmtInfo = amountMap[base]\n        const quoteMinAmtInfo = amountMap[quote]\n\n        if (!baseMinAmtInfo || !quoteMinAmtInfo) {\n            return\n        }\n\n        const takerRate = quoteMinAmtInfo.userOrderInfo.takerRate\n\n        const totalFee = sdk.toBig(feeBips).plus(sdk.toBig(takerRate)).toString()\n\n        setBaseMinAmt(baseMinAmtInfo.userOrderInfo.minAmount)\n        setQuoteMinAmt(quoteMinAmtInfo.userOrderInfo.minAmount)\n\n        myLog('---------------------------- amountMap:', amountMap)\n\n        myLog('totalFee:', totalFee)\n        myLog('takerRate:', takerRate)\n\n        setFeeBips(totalFee)\n        setTakerRate(takerRate.toString())\n\n        setTradeCalcData({ ...tradeCalcData, fee: totalFee } as TradeCalcData<C>)\n\n    }, [tradeData?.sell.belong, tradeData?.buy.belong, marketArray, ammMap,\n    account.readyState, account.apiKey, account.accountId])\n\n    //HIGH: get Router info\n    // const symbol = match?.params.symbol ?? undefined;\n    React.useEffect(() => {\n        const symbol = match?.params.symbol ?? undefined;\n        resetSwap(symbol, undefined, undefined, undefined);\n        // const label: string | undefined = accountStaticCallBack(bntLabel)\n        // setSwapBtnI18nKey(label);\n    }, []);\n\n    //HIGH: effect by wallet state update\n    React.useEffect(() => {\n        if (walletLayer2Status === SagaStatus.UNSET) {\n            const { walletMap } = makeWalletLayer2();\n            // if (tradeCalcData) {\n            setTradeCalcData({ ...tradeCalcData, fee: feeBips, walletMap } as TradeCalcData<C>);\n            setTradeData({\n                sell: {\n                    belong: tradeCalcData.sellCoinInfoMap ? tradeCalcData.sellCoinInfoMap[tradeCalcData.coinSell]?.simpleName : undefined,\n                    balance: walletMap ? walletMap[tradeCalcData.coinSell as string]?.count : 0\n                },\n                // @ts-ignore\n                buy: {\n                    belong: tradeCalcData.sellCoinInfoMap ? tradeCalcData.sellCoinInfoMap[tradeCalcData.coinBuy]?.simpleName : undefined,\n                    balance: walletMap ? walletMap[tradeCalcData.coinBuy as string]?.count : 0\n                },\n            } as SwapTradeData<IBData<C>>)\n            const {\n                market\n            } = getExistedMarket(marketArray, tradeCalcData.coinSell as string, tradeCalcData.coinBuy as string);\n            getUserTrades(market).then((marketTrades) => {\n                let _myTradeArray = makeMarketArray(market, marketTrades) as RawDataTradeItem[]\n                setMyTradeArray(_myTradeArray ? _myTradeArray : [])\n            })\n            // }\n        }\n    }, [walletLayer2Status])\n\n    React.useEffect(() => {\n        const label: string | undefined = accountStaticCallBack(bntLabel)\n        setSwapBtnI18nKey(label);\n    }, [accountStatus]);\n\n    const swapCalculatorCallback = useCallback(async ({ sell, buy, slippage, ...rest }: any) => {\n\n        const { exchangeInfo } = store.getState().system\n        setIsSwapLoading(true);\n        if (!LoopringAPI.userAPI || !tokenMap || !exchangeInfo || !output\n            || account.readyState !== AccountStatus.ACTIVATED) {\n\n            setSwapAlertText(t('labelSwapFailed'))\n            setSwapToastOpen(true)\n\n            setIsSwapLoading(false)\n\n            return\n        }\n\n        const baseToken = tokenMap[sell.belong as string]\n        const quoteToken = tokenMap[buy.belong as string]\n\n        const request: GetNextStorageIdRequest = {\n            accountId: account.accountId,\n            sellTokenId: baseToken.tokenId\n        }\n\n        const storageId = await LoopringAPI.userAPI.getNextStorageId(request, account.apiKey)\n\n        try {\n\n            const request: SubmitOrderRequestV3 = {\n                exchange: exchangeInfo.exchangeAddress,\n                accountId: account.accountId,\n                storageId: storageId.orderId,\n                sellToken: {\n                    tokenId: baseToken.tokenId,\n                    volume: output.amountS\n                },\n                buyToken: {\n                    tokenId: quoteToken.tokenId,\n                    volume: output.amountBOutSlip.minReceived\n                },\n                allOrNone: false,\n                validUntil: VALID_UNTIL,\n                maxFeeBips: parseInt(feeBips),\n                fillAmountBOrS: false, // amm only false\n                orderType: OrderType.ClassAmm,\n                eddsaSignature: '',\n            }\n\n            myLog(request)\n\n            const response = await LoopringAPI.userAPI.submitOrder(request, account.eddsaKey.sk, account.apiKey)\n\n            myLog(response)\n\n            await delayAndUpdateWalletLayer2()\n\n            setTradeData({\n                ...tradeData,\n                ...{\n                    sell: { ...tradeData?.sell, tradeValue: 0 },\n                    buy: { ...tradeData?.buy, tradeValue: 0 },\n                }\n            } as SwapTradeData<IBData<C>>)\n\n            setSwapAlertText(t('labelSwapSuccess'))\n            setSwapToastOpen(true)\n\n            setIsSwapLoading(false)\n\n        } catch (reason) {\n            setIsSwapLoading(false);\n            dumpError400(reason)\n\n            setSwapAlertText(t('labelSwapFailed'))\n            setSwapToastOpen(true)\n\n            setIsSwapLoading(false)\n        }\n\n        setOutput(undefined)\n\n        if (rest.__cache__) {\n            makeCache(rest.__cache__)\n        }\n\n    }, [tradeData, output, tokenMap])\n\n    const swapBtnClickArray: typeof btnClickMap = Object.assign(deepClone(btnClickMap), {\n        [fnType.ACTIVATED]: [swapCalculatorCallback]\n    })\n\n    const onSwapClick = React.useCallback(({ sell, buy, slippage, ...rest }: SwapTradeData<IBData<C>>) => {\n        accountStaticCallBack(swapBtnClickArray, [{ sell, buy, slippage, ...rest }])\n    }, [swapBtnClickArray])\n\n    const handleSwapPanelEvent = async (swapData: SwapData<SwapTradeData<IBData<C>>>, switchType: any): Promise<void> => {\n\n        const { tradeData } = swapData\n        return new Promise((resolve) => {\n            switch (switchType) {\n                case SwapType.SEll_CLICK:\n                    break\n                case SwapType.BUY_CLICK:\n                    break\n                case SwapType.SELL_SELECTED:\n                    resetSwap(`${tradeData.sell.belong}-${tradeData.buy.belong}`, 'sell', tradeData, ammPoolSnapshot)\n                    break\n                case SwapType.BUY_SELECTED:\n                    resetSwap(`${tradeData.sell.belong}-${tradeData.buy.belong}`, 'buy', tradeData, ammPoolSnapshot)\n                    break\n                case SwapType.EXCHANGE_CLICK:\n                    resetSwap(`${tradeData.sell.belong}-${tradeData.buy.belong}`, undefined, undefined, ammPoolSnapshot)\n                    break\n                default:\n                    break\n            }\n\n            resolve(undefined)\n        })\n\n    }\n\n    const [depth, setDepth] = useState<DepthData>()\n\n    useEffect(() => {\n\n        const updateDepth = async () => {\n            if (!pair || !LoopringAPI.exchangeAPI || !pair.coinAInfo) {\n                return\n            }\n            const market = `${pair.coinAInfo?.simpleName}-${pair.coinBInfo?.simpleName}`\n            const { depth } = await LoopringAPI.exchangeAPI?.getMixDepth({ market })\n            setDepth(depth)\n        }\n\n        updateDepth()\n\n        const handler = setInterval(() => {\n            updateDepth()\n        }, REFRESH_RATE_SLOW)\n\n        return () => {\n            if (handler) {\n                clearInterval(handler)\n            }\n        }\n    }, [pair])\n\n    const calculateTradeData = async (type: 'sell' | 'buy', _tradeData: SwapTradeData<IBData<C>>, ammPoolSnapshot: AmmPoolSnapshot | undefined)\n        : Promise<{ _tradeCalcData: TradeCalcData<C>, _tradeData: SwapTradeData<IBData<C>> }> => {\n\n        const market = `${pair.coinAInfo?.simpleName}-${pair.coinBInfo?.simpleName}`\n        if (!marketArray || !tokenMap || !marketMap || !depth || !ammMap || !tradeCalcData) {\n            let _tradeCalcData = { ...tradeCalcData } as TradeCalcData<C>\n            return { _tradeData, _tradeCalcData }\n        }\n\n        const isAtoB = type === 'sell'\n        let input: any = (isAtoB ? _tradeData.sell.tradeValue : _tradeData.buy.tradeValue)\n\n        if (input) {\n            input = (input.toString() as string).trim()\n            if (input === '0.') {\n                input = '0'\n            }\n        } else {\n            input = '0'\n        }\n\n        const base = _tradeData.sell.belong as string\n        const quote = _tradeData.buy.belong as string\n\n        let slippage = _tradeData.slippage\n\n        if (slippage === undefined) {\n            slippage = 0.5\n        }\n\n        slippage = sdk.toBig(slippage).times(100).toString()\n\n        const ammMapRaw = { ['AMM-' + market]: ammMap['AMM-' + market].__rawConfig__ } as LoopringMap<AmmPoolInfoV3>\n\n        myLog(input)\n\n        const output = sdk.getOutputAmount(input, base, quote, isAtoB, marketArray, tokenMap,\n            marketMap, depth, ammMapRaw, ammPoolSnapshot, takerRate, slippage)\n\n        setOutput(output)\n\n        tradeCalcData.priceImpact = output?.priceImpact as string\n        tradeCalcData.minimumReceived = output?.amountBOutSlip.minReceivedVal as string\n\n        if (isAtoB) {\n            _tradeData.buy.tradeValue = output?.output ? parseFloat(output?.output) : 0\n        } else {\n            _tradeData.sell.tradeValue = output?.output ? parseFloat(output?.output) : 0\n        }\n\n        //TODO: renew  tradeCalcData\n        let _tradeCalcData = { ...tradeCalcData } as TradeCalcData<C>;\n\n        return { _tradeData, _tradeCalcData }\n\n    }\n\n    // check output and min order amt\n    useCustomDCEffect(() => {\n\n        const validAmt = (output?.amountBOut && quoteMinAmt\n            && sdk.toBig(output?.amountBOut).gte(sdk.toBig(quoteMinAmt))) ? true : false\n\n        setIsValidAmt(validAmt)\n\n        myLog(output, quoteMinAmt)\n\n        myLog('.........validAmt:', validAmt)\n\n    }, [output, quoteMinAmt])\n\n    const throttleSetValue = React.useCallback(_.debounce(async (type, _tradeData, _ammPoolSnapshot) => {\n\n        const { _tradeData: td, _tradeCalcData } = await calculateTradeData(type, _tradeData, _ammPoolSnapshot)//.then(()=>{\n        setTradeData(td)\n        setTradeCalcData({ ..._tradeCalcData, fee: feeBips })\n\n    }, wait * 2), [setTradeData, setTradeCalcData, calculateTradeData, takerRate]);\n\n    const resetSwap = async (coinKey: any, type: 'sell' | 'buy' | undefined, _tradeData: SwapTradeData<IBData<C>> | undefined, _ammPoolSnapshot: AmmPoolSnapshot | undefined) => {\n        if (tradeCalcData\n            && coinKey === `${tradeCalcData.coinSell}-${tradeCalcData.coinBuy}`\n            && _tradeData\n            && type\n            && (!tradeData || (tradeData[type].tradeValue !== _tradeData[type].tradeValue))) {\n\n            throttleSetValue(type, _tradeData, _ammPoolSnapshot)\n\n        } else {\n            let _tradeFloat: Partial<TradeFloat> = {}\n            let _tradeArray: Array<Partial<RawDataTradeItem>> | undefined = undefined;\n            let _tradeCalcData: Partial<TradeCalcData<C>> = coinPairInit({\n                coinKey,\n                _tradeCalcData: {},\n                tokenMap,\n                coinMap\n            })\n            let {\n                amm,\n                market\n            } = getExistedMarket(marketArray, _tradeCalcData.coinSell as string, _tradeCalcData.coinBuy as string);\n            const [, coinA, coinB] = market.match(/(\\w+)-(\\w+)/i)\n\n            setTradeCalcData({ ...tradeCalcData, fee: feeBips, ..._tradeCalcData } as TradeCalcData<C>);\n            if (coinMap) {\n                setPair({\n                    coinAInfo: coinMap[coinA],\n                    coinBInfo: coinMap[coinB],\n                })\n            }\n            if (walletLayer2) {\n                const { walletMap } = makeWalletLayer2();\n                _tradeCalcData.walletMap = walletMap as WalletMap<any>;\n                getUserTrades(market).then((marketTrades) => {\n                    let _myTradeArray = makeMarketArray(market, marketTrades) as RawDataTradeItem[]\n                    setMyTradeArray(_myTradeArray ? _myTradeArray : [])\n                })\n            }\n            let apiList = [];\n            //TODO wallet saga done\n            if (marketArray && amm && market && ammMap) {\n                // let pairPromise =  usePairTitleBlock({market})\n                apiList = [\n                    LoopringAPI.exchangeAPI?.getMarketTrades({ market }),\n                    pairDetailBlock({ coinKey: market, ammKey: amm, ammMap })\n                ];\n                //HiGH: this need add websocket to update infr ticker ammpoolsbalace\n                // @ts-ignore\n                Promise.all([...apiList]).then(\n                    ([{ marketTrades }, { ammPoolsBalance, tickMap }]: any[]) => {\n                        setAmmPoolSnapshot(ammPoolsBalance)\n                        if (tokenMap) {\n                            let { _tradeCalcData: _td } = pairDetailDone({\n                                coinKey: `${_tradeCalcData.coinSell}-${_tradeCalcData.coinBuy}`,\n                                market,\n                                ammPoolsBalance,\n                                tickerData: tickMap[market] ? tickMap[market] : {},\n                                tokenMap,\n                                _tradeCalcData,\n                                coinMap,\n                                marketCoins,\n                                fee: feeBips,\n                            })\n                            _tradeCalcData = _td;\n                            _tradeFloat = makeTickView(tickMap[market] ? tickMap[market] : {})\n                            _tradeArray = makeMarketArray(market, marketTrades)\n                            // @ts-ignore\n                            setTradeCalcData(_tradeCalcData as TradeCalcData<C>);\n                            // @ts-ignore\n                            setTradeFloat(_tradeFloat);\n                            setTradeArray(_tradeArray as RawDataTradeItem[])\n                            // setPair(_pair)\n                            setTradeData({\n                                sell: {\n                                    belong: _tradeCalcData.sellCoinInfoMap ? _tradeCalcData.sellCoinInfoMap[_tradeCalcData.coinSell]?.simpleName : undefined,\n                                    balance: _tradeCalcData.walletMap ? _tradeCalcData.walletMap[_tradeCalcData.coinSell]?.count : 0\n                                },\n                                // @ts-ignore\n                                buy: {\n                                    belong: _tradeCalcData.sellCoinInfoMap ? _tradeCalcData.sellCoinInfoMap[_tradeCalcData.coinBuy]?.simpleName : undefined,\n                                    balance: _tradeCalcData.walletMap ? _tradeCalcData.walletMap[_tradeCalcData.coinBuy]?.count : 0\n                                },\n                            } as SwapTradeData<IBData<C>>)\n                        }\n                    }).catch((error) => {\n                        throw new CustomError({ ...ErrorMap.TRADE_LITE_SET_PAIR_ERROR, options: error })\n                        //TODO solve error\n                    })\n\n            }\n        }\n\n    }\n\n    return {\n        swapToastOpen,\n        setSwapToastOpen,\n        swapAlertText,\n\n        tradeCalcData,\n        tradeFloat,\n        tradeArray,\n        myTradeArray,\n        btnStatus,\n        tradeData,\n        pair,\n        marketArray,\n        onSwapClick,\n        swapBtnI18nKey,\n        handleSwapPanelEvent\n    }\n\n}","import { Box, Grid, } from '@material-ui/core'\nimport { WithTranslation, withTranslation } from 'react-i18next'\nimport { useLocation } from 'react-router-dom'\nimport BasicInfoPanel from './panel/BasicInfoPanel'\nimport TradePanel from './panel/TradePanel'\nimport styled from 'styled-components'\nimport { useSwapPage } from './hook';\nimport { SwapPanel, Toast } from '@loopring-web/component-lib'\nimport { TradeBtnStatus } from '@loopring-web/component-lib'\nimport { useTokenMap } from '../../stores/token';\nimport { TOAST_TIME } from 'defs/common_defs'\n\nconst FixedStyle = styled(Box)`\n  @media only screen and (min-height: 780px ) and (min-width: 1024px) {\n    position: fixed;\n  }\n`\n\nexport const SwapPage = withTranslation('common')(({...rest}: WithTranslation) => {\n\n    const {\n        tradeCalcData,\n        tradeData,\n        tradeFloat,\n        tradeArray,\n        myTradeArray,\n        marketArray,\n        handleSwapPanelEvent,\n        onSwapClick,\n        pair,\n        swapBtnI18nKey,\n        btnStatus,\n        swapToastOpen,\n        setSwapToastOpen,\n        swapAlertText,\n\n    } = useSwapPage();\n\n    const { coinMap } = useTokenMap()\n    const { pathname } = useLocation()\n    const pairNameList = pathname ? pathname.split('/')[pathname.split('/').length - 1].split('-') : ''\n    const coinA = Array.isArray(pairNameList) ? pairNameList[0] : ''\n    const coinB = Array.isArray(pairNameList) ? pairNameList[1] : ''\n    const customPair = {\n        coinAInfo: coinMap ? coinMap[coinA] : '',\n        coinBInfo: coinMap ? coinMap[coinB] : '',\n    }\n    const renderPair = customPair.coinAInfo ? customPair : pair\n\n    return <>\n\n        <Toast alertText={swapAlertText as string} open={swapToastOpen} \n            autoHideDuration={TOAST_TIME} setOpen={setSwapToastOpen}/>\n\n        <Grid container marginRight={3} alignContent={'flex-start'}>\n            <BasicInfoPanel {...{\n                ...rest,\n                ...renderPair, marketArray,\n                tradeFloat, tradeArray\n            }} />\n            <TradePanel tradeArray={tradeArray} myTradeArray={myTradeArray}/>\n        </Grid>\n\n        <Box display={'flex'} style={{minWidth: 'var(--swap-box-width)'}}>\n            <FixedStyle>\n                <SwapPanel tradeData={tradeData as any}\n                           tradeCalcData={tradeCalcData as any}\n                           onSwapClick={onSwapClick}\n                           swapBtnI18nKey={swapBtnI18nKey}\n                           swapBtnStatus={btnStatus}\n                    // handleError={}\n                           {...{handleSwapPanelEvent, ...rest}}\n                />\n            </FixedStyle>\n\n        </Box>\n\n    </>\n});\n\n\n// SwapPage\n","import React from 'react'\n\nexport const DevWrapper = ({ children }: { children: React.ReactNode }) => {\n\n  return (\n    <React.Fragment>\n      {\n        process.env.NODE_ENV !== 'production' ? (\n          <>\n          {children}\n          </>\n        ) : null\n      }\n    </React.Fragment>\n  )\n\n}\n\n","import { SHORT_INTERVAL } from 'defs/common_defs'\nimport { debounce } from 'lodash'\nimport React, { useEffect } from 'react'\nimport { UserStorage } from 'storage'\n\nenum WindowEvent {\n  Click = 'click',\n  Scroll = 'scroll',\n  Mouseover = 'mouseover',\n}\n\nconst events = [WindowEvent.Click, WindowEvent.Scroll]\n\nconst forceReset = debounce(() => { UserStorage.checkTimeout(true) }, SHORT_INTERVAL)\n\nexport const GlobalProvider = ({ children }: { children: React.ReactNode }) => {\n\n  useEffect(() => {\n\n    events.forEach((event: string) => {\n      document.addEventListener(event, forceReset)\n    })\n\n    return () => {\n\n      events.forEach((event: string) => {\n        document.removeEventListener(event, forceReset)\n      })\n    }\n\n  }, [])\n\n  return (\n    <React.Fragment>\n      { children}\n    </React.Fragment>\n  )\n\n}\n","import React from 'react'\nimport { TransactionTable } from '@loopring-web/component-lib'\nimport { WithTranslation, withTranslation } from 'react-i18next'\nimport { StylePaper } from '../../styled'\nimport { useGetTxs } from './hooks';\n\nconst TxPanel = withTranslation('common')((rest:WithTranslation<'common'>) => {\n    const { t } = rest\n    const container = React.useRef(null);\n    const [pageSize, setPageSize] = React.useState(10);\n\n    const { txs: txTableData, isLoading } = useGetTxs()\n\n    React.useEffect(() => {\n        // @ts-ignore\n        let height = container?.current?.offsetHeight;\n        if (height) {\n            setPageSize(Math.floor((height - 120) / 44) - 2);\n        }\n    }, [container, pageSize]);\n\n    return (\n        <StylePaper ref={container}>\n            <div className=\"title\">{t('labelTxnPageTitle')}</div>\n            <div className=\"tableWrapper\">\n                <TransactionTable {...{\n                    rawData: txTableData,\n                    pagination: {\n                        pageSize: pageSize\n                    },\n                    showFilter: true,\n                    showLoading: isLoading,\n                    ...rest\n                }} />\n            </div>\n        </StylePaper>\n    )\n})\n\nexport default TxPanel\n","import { useState, useCallback } from 'react'\n// import { useAmmpoolAPI, useUserAPI } from \"hooks/exchange/useApi\"\nimport { useCustomDCEffect } from 'hooks/common/useCustomDCEffect'\nimport { useAccount } from 'stores/account/hook'\nimport { TransactionStatus, RawDataTransactionItem } from '@loopring-web/component-lib'\nimport { volumeToCount, volumeToCountAsBigNumber } from 'hooks/help'\nimport { LoopringAPI } from 'stores/apis/api'\n\nimport { TransactionTradeTypes } from '@loopring-web/component-lib';\n\nexport function useGetTxs() {\n\n    const { account: {accountId, apiKey} } = useAccount()\n\n    // const userApi = useUserAPI()\n\n    const [txs, setTxs] = useState<RawDataTransactionItem[]>([])\n    const [isLoading, setIsLoading] = useState(true)\n\n    const getTxnStatus = (status: string) => \n        status === ''\n        ? TransactionStatus.processing :\n        status === 'processed'\n            ? TransactionStatus.processed\n            : status === 'processing'\n                ? TransactionStatus.processing \n                : status === 'received' \n                    ? TransactionStatus.received \n                    : TransactionStatus.failed\n\n    const getUserTxnList = useCallback(async () => {\n        if (LoopringAPI && LoopringAPI.userAPI && accountId && apiKey) {\n            const userTxnList = await Promise.all([\n                LoopringAPI.userAPI.getUserTranferList({\n                    accountId,\n                }, apiKey),\n                LoopringAPI.userAPI.getUserDepositHistory({\n                    accountId,\n                }, apiKey),\n                LoopringAPI.userAPI.getUserOnchainWithdrawalHistory({\n                    accountId,\n                }, apiKey)\n            ])\n            const userTransferMapped = userTxnList[0].userTransfers?.map(o => ({\n                side: TransactionTradeTypes.transfer,\n                // token: o.symbol,\n                // from: o.senderAddress,\n                // to: o.receiverAddress,\n                amount: {\n                    unit: o.symbol || '',\n                    value: Number(volumeToCount(o.symbol, o.amount))\n                },\n                fee: {\n                    unit: o.feeTokenSymbol || '',\n                    value: Number(volumeToCountAsBigNumber(o.feeTokenSymbol, o.feeAmount || 0))\n                },\n                memo: o.memo || '',\n                time: o.timestamp,\n                txnHash: o.hash,\n                status: getTxnStatus(o.status),\n                // tradeType: TransactionTradeTypes.transfer\n            }))\n            const userDepositMapped = userTxnList[1].userDepositHistory?.map(o => ({\n                side: TransactionTradeTypes.deposit,\n                symbol: o.symbol,\n                // token: o.symbol,\n                // from: o.hash,\n                // to: 'My Loopring',\n                // amount: Number(volumeToCount(o.symbol, o.amount)),\n                amount: {\n                    unit: o.symbol || '',\n                    value: Number(volumeToCount(o.symbol, o.amount))\n                },\n                fee: {\n                    unit: '',\n                    value: 0\n                },\n                memo: '',\n                time: o.timestamp,\n                txnHash: o.txHash,\n                status: getTxnStatus(o.status),\n                // tradeType: TransactionTradeTypes.deposit\n            }))\n            const userWithdrawMapped = userTxnList[2].userOnchainWithdrawalHistory?.map((o => ({\n                side: TransactionTradeTypes.withdraw,\n                // token: o.symbol,\n                // from: 'My Loopring',\n                // to: o.distributeHash,\n                amount: {\n                    unit: o.symbol || '',\n                    value: Number(volumeToCount(o.symbol, o.amount))\n                },\n                fee: {\n                    unit: o.feeTokenSymbol || '',\n                    value: Number(volumeToCount(o.feeTokenSymbol, o.feeAmount || 0)?.toFixed(6))\n                },\n                memo: '',\n                time: o.timestamp,\n                txnHash: o.txHash,\n                status: getTxnStatus(o.status),\n                // tradeType: TransactionTradeTypes.withdraw\n            })))\n            const mappingList = [...userTransferMapped??[], ...userDepositMapped??[], ...userWithdrawMapped??[]]\n            const sortedMappingList = mappingList.sort((a, b) => b.time - a.time)\n            setTxs(sortedMappingList)\n            setIsLoading(false)\n        }\n    }, [accountId, apiKey])\n\n    useCustomDCEffect(() => {\n        getUserTxnList()\n    }, [getUserTxnList])\n\n    return {\n        txs,\n        isLoading\n    }\n}\n","import { useCallback, useEffect, useRef, useState } from 'react'\nimport { WithTranslation, withTranslation } from 'react-i18next'\nimport { PriceTag } from '@loopring-web/common-resources'\nimport { Box, Paper, Typography } from '@material-ui/core'\nimport styled from '@emotion/styled'\nimport { useHistory } from 'react-router-dom'\nimport {\n    AssetsTable,\n    AssetTitle,\n    AssetTitleProps,\n    ChartType,\n    DoughnutChart,\n    ScaleAreaChart,\n    ToggleButtonGroup,\n    TokenType,\n    LpTokenAction,\n} from '@loopring-web/component-lib'\nimport { useModals } from 'modal/useModals'\n\nimport { volumeToCount } from 'hooks/help'\nimport { LoopringAPI } from 'stores/apis/api'\nimport { AssetType } from 'loopring-sdk'\nimport store from 'stores'\nimport { useWalletLayer1 } from 'stores/walletLayer1'\nimport { makeWalletLayer2 } from 'hooks/help'\nimport { useWalletLayer2 } from '../../../stores/walletLayer2'\nimport { EmptyValueTag,unit } from '@loopring-web/common-resources'\nimport { StylePaper } from '../../styled'\nimport { useAccount } from '../../../stores/account';\n\n// const StylePaper = styled(Box)`\n//   width: 100%;\n//   height: 100%;\n//   flex: 1;\n//   background-color: ${({theme}) => theme.colorBase.background().default};\n//   border-radius: ${({theme}) => theme.unit}px;\n// //   padding: 20px;\n//\n//   .title {\n//     font-family: Gilroy-Medium;\n//     font-size: ${({theme}) => theme.unit * 3}px;\n//     line-height: 19px;\n//   }\n//\n//   .tableWrapper {\n//     display: flex;\n//     flex: 1;\n//     height: 100%;\n//     border: 1px solid ${({theme}) => theme.colorBase.borderColor};\n//     border-radius: ${({theme}) => theme.unit}px;\n//     padding: 26px 0;\n//   }\n// ` as typeof Box;\n\nconst StyledChartWrapper = styled(Box)`\n    height: 225px;\n\n    > div {\n        position: relative;\n        width: calc(50% - 6px);\n        height: 100%;\n        background-color: ${({theme}) => theme.colorBase.background().default};\n        border-radius: ${({theme}) => theme.unit}px;\n        padding: ${({theme}) => theme.unit * 2.5}px ${({theme}) => theme.unit * 3}px;\n    }\n`\n\nconst StyledBtnGroupWrapper = styled(Box)`\n    position: absolute;\n    z-index: 10;\n    right: ${({theme}) => theme.unit * 3}px;\n    bottom: ${({theme}) => theme.unit * 2.5}px;\n`\n\nconst toggleData = [\n    // {value: '24 H', key: '24 H'},\n    {value: 'week', key: '1 W'},\n    {value: 'all', key: 'ALL'},\n]\n\nexport type ITokenInfoItem = {\n    token: string,\n    detail: {\n        price: string,\n        symbol: string,\n        updatedAt: number\n    }\n}\n\nexport type TrendDataItem = {\n    timeStamp: number;\n    close: number;\n}\n\nconst AssetPanel = withTranslation('common')(({t, ...rest}: WithTranslation) => {\n    const container = useRef(null);\n    const [pageSize, setPageSize] = useState(10);\n    const [chartPeriod, setChartPeriod] = useState('week')\n    const [chartData, setChartData] = useState<TrendDataItem[]>([])\n    const [assetsList, setAssetsList] = useState<any[]>([])\n    \n    const { account:{accAddress} } = useAccount()\n    const { walletLayer2 } = store.getState().walletLayer2;\n    const { ammMap } = store.getState().amm.ammMap\n    const { status: walletLayer2Status } = useWalletLayer2();\n\n    const getUserTotalAssets = useCallback(async (limit: number = 7) => {\n        const userAssets = await LoopringAPI.walletAPI?.getUserAssets({\n            wallet: accAddress,\n            assetType: AssetType.DEX,\n            limit: limit // TODO: minium unit is day, discuss with pm later\n        })\n        if (userAssets && userAssets.userAssets.length && !!userAssets.userAssets.length) {\n            // console.log(userAssets.userAssets)\n            setChartData(userAssets.userAssets.map(o => ({\n                timeStamp: Number(o.createdAt),\n                // close: o.amount && o.amount !== NaN ? Number(o.amount) : 0\n                close: Number(o.amount)\n            })))\n        }\n    }, [accAddress])\n\n    useEffect(() => {\n        if (walletLayer2Status === 'UNSET') {\n            const walletMap = makeWalletLayer2()\n            const assetsKeyList = walletMap && walletMap.walletMap ? Object.keys(walletMap.walletMap) : []\n            const assetsDetailList = walletMap && walletMap.walletMap ? Object.values(walletMap.walletMap) : []\n            const list = assetsKeyList.map((key, index) => ({\n                token: key,\n                detail: assetsDetailList[index]\n            }))\n            setAssetsList(list)\n        }\n    }, [walletLayer2Status])\n\n    useEffect(() => {\n        if (LoopringAPI && LoopringAPI.walletAPI && walletLayer2) {\n            getUserTotalAssets()\n        }\n    }, [walletLayer2, getUserTotalAssets])\n\n    useEffect(() => {\n        // @ts-ignore\n        let height = container?.current?.offsetHeight;\n        if (height) {\n            setPageSize(Math.floor((height - 120) / 44) - 1);\n        }\n    }, [container, pageSize]);\n\n    const {\n        showDeposit,\n        showTransfer,\n        showWithdraw,\n        // ShowResetAccount,\n    } = useModals()\n\n    // const { updateWalletLayer1 } = useWalletLayer1()\n\n    let history = useHistory();\n\n    const onShowDeposit = useCallback((token?: any) => {\n        // updateWalletLayer1()\n        showDeposit(true, {\n            tradeData: {\n                balance: '',\n                belong: token\n            },\n        })\n    }, [showDeposit])\n\n    const onShowTransfer = useCallback((token?: any) => {\n        showTransfer(true, {\n            tradeData: {\n                balance: '',\n                belong: token\n            },\n        })\n    }, [showTransfer])\n\n    const onShowWithdraw = useCallback((token?: any) => {\n        showWithdraw(true, {\n            tradeData: {\n                balance: '',\n                belong: token\n            },\n        })\n    }, [showWithdraw])\n\n    const lpTokenJump = useCallback((token: string, type: LpTokenAction) => {\n        if (history) {\n            history.push(`/liquidity/pools/coinPair/${token}?type=${type}`)\n        }\n    }, [history])\n\n    const handleChartPeriodChange = useCallback((event: React.MouseEvent<HTMLElement, MouseEvent>, newValue: string) => {\n        const limit = newValue === 'week' ? 7 : 9999\n        getUserTotalAssets(limit)\n    }, [getUserTotalAssets])\n\n    const { faitPrices } = store.getState().system\n\n    const tokenPriceList = faitPrices ? Object.entries(faitPrices).map(o => ({\n        token: o[ 0 ],\n        detail: o[ 1 ]\n    })) as ITokenInfoItem[] : []\n\n    // let jointLPTokenValue = 0\n    // assetsList.filter(o => o.token.split('-')[0] === 'LP').forEach(o => {\n    //     const result = o.token.split('-')\n    //     result.splice(0, 1, 'AMM')\n    //     const ammToken = result.join('-')\n    //     console.log(ammToken)\n    //     const ammTokenList = Object.keys(ammMap)\n    //     const tokenValue = ammTokenList.includes(ammToken) && ammMap[ammToken] && ammMap[ammToken].amountDollar ? Number(ammMap[ammToken].amountDollar) : 0\n    //     console.log(ammMap)\n    //     jointLPTokenValue += tokenValue\n    // });\n\n    // const doughnutData = assetsList.filter(o => o.token.split('-')[0] !== 'LP').map((tokenInfo) => {\n    //     const tokenPriceUSDT = tokenInfo.token === 'DAI'\n    //         ? 1\n    //         : Number(tokenPriceList.find(o => o.token === tokenInfo.token) ? tokenPriceList.find(o => o.token === tokenInfo.token)?.detail.price : 0) / Number(tokenPriceList.find(o => o.token === 'USDT')?.detail.price)\n    //     return ({\n    //         name: tokenInfo.token,\n    //         value: Number(volumeToCount(tokenInfo.token, tokenInfo.detail?.detail?.total as string)) * tokenPriceUSDT\n    //     })\n    // })\n    const formattedData = assetsList.map(item => {\n        const isLpToken = item.token.split('-')[0] === 'LP'\n        if (!isLpToken) {\n            const tokenPriceUSDT = item.token === 'DAI'\n                ? 1\n                : Number(tokenPriceList.find(o => o.token === item.token) ? tokenPriceList.find(o => o.token === item.token)?.detail.price : 0) / Number(tokenPriceList.find(o => o.token === 'USDT')?.detail.price)\n            return ({\n                name: item.token,\n                value: Number(volumeToCount(item.token, item.detail?.detail?.total as string)) * tokenPriceUSDT\n            })\n        }\n        // let jointLPTokenValue = 0\n        const result = item.token.split('-')\n        result.splice(0, 1, 'AMM')\n        const ammToken = result.join('-')\n        const ammTokenList = Object.keys(ammMap)\n        const ammTokenPrice = ammTokenList.includes(ammToken) && ammMap[ammToken] && ammMap[ammToken].amountDollar ? (ammMap[ammToken].totalLpToken || 0) / ammMap[ammToken].amountDollar : 0\n        const tokenValue =  ammTokenPrice * (item.detail?.count || 0)\n        // jointLPTokenValue += 1\n        return ({\n            name: item.token,\n            value: tokenValue\n        })\n    })\n\n    \n    const lpTotalData = formattedData\n        .filter(o => o.name.split('-')[0] === 'LP')\n        .reduce((prev, next) => ({\n            name: 'LP-Token',\n            value: prev.value + next.value\n        }), {\n            name: 'LP-Token',\n            value: 0\n        })\n    \n    const formattedDoughnutData = formattedData.filter(o => o.name.split('-')[0] === 'LP').length > 0\n        ? [...formattedData.filter(o => o.name.split('-')[0] !== 'LP'), lpTotalData]\n        : formattedData\n\n    // const formattedDoughnutData = [...doughnutData, {\n    //         name: 'LP-Token',\n    //         value: jointLPTokenValue\n    //     }]\n    const AssetTitleProps: AssetTitleProps = {\n        assetInfo: {\n            totalAsset: formattedData.map(o => o.value).reduce((prev, next) => {\n                return prev + next\n            }, 0),\n            priceTag: PriceTag.Dollar,\n        },\n        onShowDeposit,\n        onShowTransfer,\n        onShowWithdraw,\n    }\n\n    const assetsRawData = assetsList.map((tokenInfo) => {\n        \n        const tokenPriceUSDT = Number(tokenPriceList.find(o => o.token === tokenInfo.token)?.detail.price) / Number(tokenPriceList.find(o => o.token === 'USDT')?.detail.price)\n        return ({\n            token: {\n                type: tokenInfo.token.split('-')[0] === 'LP' ? TokenType.lp : TokenType.single,\n                value: tokenInfo.token\n            },\n            amount: String(Number(volumeToCount(tokenInfo.token, tokenInfo.detail?.detail.total as string)).toFixed(6)) || EmptyValueTag,\n            available: String(tokenInfo.detail?.count) || EmptyValueTag,\n            locked: String(tokenInfo.detail?.detail.locked) || EmptyValueTag,\n            smallBalance: tokenPriceUSDT * Number(volumeToCount(tokenInfo.token, tokenInfo.detail?.detail.total as string)) < 1,\n        })\n    })\n\n    return (\n        <>\n            <Box>\n                <AssetTitle  {...{\n                    t,\n                    ...rest,\n                    ...AssetTitleProps\n                }} />\n            </Box>\n\n            {/*<div className=\"title\">{t('labelAssetsTitle')}</div>*/}\n\n            <StyledChartWrapper display={'flex'} justifyContent={'space-between'} alignItems={'center'} marginTop={2}>\n                <Paper component={'div'}>\n                    <Typography component=\"span\" color=\"textSecondary\" variant=\"body1\">{t('labelAssetsDistribution')}</Typography>\n                    <DoughnutChart data={walletLayer2 ? formattedDoughnutData : []}/>\n                </Paper>\n                <Paper component={'div'}>\n                    <Typography component=\"span\" color=\"textSecondary\" variant=\"body1\">{t('labelTotalAssets')}</Typography>\n                    <ScaleAreaChart type={ChartType.Trend} data={chartData}/>\n                    <StyledBtnGroupWrapper>\n                        <ToggleButtonGroup exclusive size=\"small\" {...{\n                            ...rest,\n                            t,\n                            data: toggleData,\n                            value: chartPeriod,\n                            setValue: setChartPeriod,\n                            onChange: handleChartPeriodChange\n                        }} />\n                    </StyledBtnGroupWrapper>\n                </Paper>\n            </StyledChartWrapper>\n            <StylePaper style={{marginTop: `${unit*2}px`}}>\n                <div className=\"tableWrapper\" ref={container}>\n                    <AssetsTable {...{\n                        rawData: assetsRawData,\n                        pagination: {\n                            pageSize: pageSize\n                        },\n                        showFiliter: true,\n                        onShowDeposit: onShowDeposit,\n                        onShowTransfer: onShowTransfer,\n                        onShowWithdraw: onShowWithdraw,\n                        onLpDeposit: lpTokenJump,\n                        onLpWithdraw: lpTokenJump,\n                        ...rest\n                    }} />\n                </div>\n            </StylePaper>\n        </>\n    )\n})\n\nexport default AssetPanel\n","import React from \"react\";\nimport { useDispatch } from \"react-redux\"\n\nimport { setShowDeposit, setShowResetAccount, setShowTransfer, setShowWithdraw, } from '@loopring-web/component-lib'\nimport { useTranslation } from \"react-i18next\";\nimport { useAccount } from '../stores/account';\nimport { AccountStatus } from '@loopring-web/common-resources';\n\nexport function useModals() {\n    const dispatch = useDispatch()\n    const {account: {readyState}} = useAccount()\n    const {t} = useTranslation('common')\n    const showDeposit = React.useCallback((isShow: boolean, defaultProps?: any) => {\n\n        const isNoAccount = readyState === AccountStatus.NO_ACCOUNT\n\n        console.log('isNoAccount: ', isNoAccount, t('depositTitleAndActive'))\n        const action = {\n            isShow,\n            props: {\n                title: isNoAccount ? t('depositTitleAndActive') : t('depositTitle'),\n                description: 'depositAndActiveDescription',\n                ...defaultProps\n            },\n        }\n        dispatch(setShowDeposit(action))\n    }, [dispatch, t, readyState])\n    const showTransfer = React.useCallback((isShow: boolean, defaultProps?: any) => dispatch(setShowTransfer({\n        isShow,\n        props: {...defaultProps}\n    })), [dispatch])\n    const showWithdraw = React.useCallback((isShow: boolean, defaultProps?: any) => dispatch(setShowWithdraw({\n        isShow,\n        props: {...defaultProps}\n    })), [dispatch])\n    const showResetAccount = React.useCallback((isShow: boolean, defaultProps?: any) => dispatch(setShowResetAccount({\n        isShow,\n        props: {...defaultProps}\n    })), [dispatch])\n\n    return {\n        showDeposit,\n        showTransfer,\n        showWithdraw,\n        // ShowResetAccount,\n    }\n}","import React, { useEffect } from 'react'\nimport { TradeTable, TradeFilterTable, RawDataTradeItem } from '@loopring-web/component-lib'\nimport { WithTranslation, withTranslation } from 'react-i18next'\n// import styled from '@emotion/styled'\n// import { Box, Paper } from '@material-ui/core'\nimport { StylePaper } from '../../styled'\nimport { useGetTrades } from './hooks'\n\n// const StylePaper = styled(Box)`\n//   display: flex;\n//   flex-direction: column;\n//   width: 100%;\n//   height: 100%;\n//   flex: 1;\n//   background-color: ${({ theme }) => theme.colorBase.background().default};\n//   border-radius: ${({ theme }) => theme.unit}px;\n//   padding: 20px;\n//   margin-bottom: ${({ theme }) => 2* theme.unit}px;\n//   .title {\n//     font-family: Gilroy-Medium;\n//     font-size: ${({ theme }) => theme.unit * 3}px;\n//     line-height: 19px;\n//   }\n//\n//   .tableWrapper {\n//     display: flex;\n//     flex: 1;\n//     margin-top: 20px;\n//     border: 1px solid ${({ theme }) => theme.colorBase.borderColor};\n//     border-radius: ${({ theme }) => theme.unit}px;\n//     padding: 26px 0;\n//\n//     .rdg {\n//       flex: 1;\n//     }\n//   }\n// ` as typeof Paper;\n//\n// // side: keyof typeof TradeTypes;\n// //     amount: {\n// //         from: {\n// //             key: string;\n// //             value: number|undefined;\n// //         },\n// //         to: {\n// //             key: string;\n// //             value: number|undefined;\n// //         }\n// //     };\n// //     price:{\n// //         key:string\n// //         value:number|undefined,\n// //     }\n// //     // priceDollar: number;\n// //     // priceYuan: number;\n// //     fee: {\n// //         key: string;\n// //         value: number|undefined;\n// //     };\n// //     time: number;\n\nconst TradePanel = withTranslation('common')((rest:WithTranslation<'common'>) => {\n    const [pageSize, setPageSize] = React.useState(10);\n    const { userTrades, showLoading } = useGetTrades()\n    const container = React.useRef(null);\n    const { t } = rest\n\n    React.useEffect(() => {\n        // @ts-ignore\n        let height = container?.current?.offsetHeight;\n        if (height) {\n            setPageSize(Math.floor((height - 120) / 44) - 2);\n        }\n    }, [container, pageSize]);\n\n    return (\n        <StylePaper ref={container}>\n            <div className=\"title\">{t('labelTradePageTitle')}</div>\n            <div className=\"tableWrapper extraTradeClass\">\n                <TradeTable {...{\n                  rawData: userTrades,\n                  pagination: {\n                    pageSize: pageSize\n                  },\n                  showFilter: true,\n                  showLoading: showLoading,\n                  ...rest}}/>\n            </div>\n        </StylePaper>\n    )\n})\n\nexport default TradePanel\n","import React from 'react'\n\nimport { useCustomDCEffect } from 'hooks/common/useCustomDCEffect'\nimport { useAccount } from 'stores/account/hook'\nimport { TransactionStatus, RawDataTransactionItem, RawDataTradeItem } from '@loopring-web/component-lib'\n\nimport { FilledType, TxStatus, UserTrade } from 'loopring-sdk'\nimport { TransactionTradeTypes } from '@loopring-web/component-lib';\nimport { LoopringAPI } from 'stores/apis/api'\nimport store from 'stores'\nimport { TradeTypes } from '@loopring-web/common-resources'\nimport { toBig, Side } from 'loopring-sdk'\nimport { volumeToCount, volumeToCountAsBigNumber } from 'hooks/help'\n\nexport function useGetTrades() {\n    const [userTrades, setUserTrades] = React.useState<RawDataTradeItem[]>([])\n    const [showLoading, setShowLoading] = React.useState(true)\n    const { account:{accountId, apiKey} } = useAccount()\n\n    const tokenMap = store.getState().tokenMap.tokenMap\n\n    const getUserTradeList = React.useCallback(async () => {\n        if (LoopringAPI && LoopringAPI.userAPI && accountId && apiKey && tokenMap) {\n            const userTrades = await LoopringAPI.userAPI.getUserTrades({\n                accountId,\n            }, apiKey)\n\n            if (userTrades && userTrades.userTrades) {\n                // @ts-ignore\n                setUserTrades(userTrades.userTrades.map(o => {\n                    const marketList = o.market.split('-')\n                    // due to AMM case, we cannot use first index\n                    const baseToken = marketList[marketList.length - 2]\n                    const quoteToken = marketList[marketList.length - 1]\n\n                    // const amt = toBig(o.volume).times(o.price).toString()\n\n                    const feeKey = o.side === Side.Buy ? baseToken : quoteToken\n\n\n                    return ({\n                        side: o.side === Side.Buy ? TradeTypes.Buy : TradeTypes.Sell ,\n                        price: {\n                            key: baseToken,\n                            // value: StringToNumberWithPrecision(o.price, baseToken)\n                            value: toBig(o.price).toNumber()\n                        },\n                        fee: {\n                            key: feeKey,\n                            // value: VolToNumberWithPrecision(o.fee, quoteToken),\n                            value: feeKey ? volumeToCount(feeKey, o.fee)?.toFixed(6) : undefined\n                        },\n                        time: Number(o.tradeTime),\n                        amount: {\n                            from: {\n                            key: baseToken,\n                            // value: VolToNumberWithPrecision(o.volume, baseToken),\n                            value: baseToken ? volumeToCount(baseToken, o.volume) : undefined\n                            },\n                            to: {\n                            key: quoteToken,\n                            // value: VolToNumberWithPrecision(amt, quoteToken)\n                            value: baseToken ? volumeToCountAsBigNumber(baseToken, o.volume)?.times(o.price).toNumber() : undefined\n                            }\n                        }\n                    })\n                }))\n                setShowLoading(false)\n            }\n        }\n    }, [accountId, apiKey, tokenMap])\n\n    React.useEffect(() => {\n        getUserTradeList()\n    }, [getUserTradeList])\n\n    // useCustomDCEffect(async() => {\n\n    //     if (!LoopringAPI.userAPI || !accountId || !apiKey) {\n    //         return\n    //     }\n\n    //     const response = await LoopringAPI.userAPI.getUserTrades({accountId: accountId}, apiKey)\n\n    //     let userTrades: RawDataTradeItem[] = []\n\n    //     response.userTrades.forEach((item: UserTrade, index: number) => {\n    //     })\n\n    //     setUserTrades(userTrades)\n\n    // }, [accountId, apiKey, LoopringAPI.userAPI])\n\n    return {\n        userTrades,\n        showLoading,\n    }\n}\n","import React, { useEffect } from 'react'\nimport { RawDataAmmItem, AmmTable, AmmSideTypes } from '@loopring-web/component-lib'\nimport { WithTranslation, withTranslation } from 'react-i18next'\nimport store from 'stores'\nimport { LoopringAPI } from 'stores/apis/api'\nimport { AmmTxType } from 'loopring-sdk'\nimport { StylePaper } from '../../styled'\nimport { volumeToCount } from '../../../hooks/help';\nimport { useGetAmmRecord } from'./hook'\n\nconst AmmPanel = withTranslation('common')(({ t, ...rest }: WithTranslation<'common'>) => {\n    const container = React.useRef(null);\n    const [pageSize, setPageSize] = React.useState(10);\n    const { ammRecordList, showLoading } = useGetAmmRecord()\n\n    React.useEffect(() => {\n        // @ts-ignore\n        let height = container?.current?.offsetHeight;\n        if (height) {\n            setPageSize(Math.floor((height - 120) / 44) - 2);\n        }\n    }, [container, pageSize]);\n\n    return (\n        <>\n            <StylePaper ref={container}>\n                <div className=\"title\">{t('labelAmmPageTitle')}</div>\n                <div className=\"tableWrapper\">\n                    <AmmTable {...{\n                        rawData: ammRecordList,\n                        pagination: {\n                            pageSize: pageSize\n                        },\n                        showFilter: true,\n                        showLoading: showLoading,\n                        ...rest}}/>\n                </div>\n            </StylePaper>\n        </>\n    )\n})\n\nexport default AmmPanel\n","import React, { useEffect } from 'react'\nimport { RawDataAmmItem, AmmSideTypes } from '@loopring-web/component-lib'\nimport store from 'stores'\nimport { LoopringAPI } from 'stores/apis/api'\nimport { AmmTxType } from 'loopring-sdk'\nimport { volumeToCount } from '../../../hooks/help';\n\nexport function useGetAmmRecord() {\n    const [ammRecordList, setAmmRecordList] = React.useState<RawDataAmmItem[]>([])\n    const [showLoading, setShowLoading] = React.useState(true)\n    const { accountId,apiKey } = store.getState().account;\n    const { tokenMap } = store.getState().tokenMap\n\n    const getTokenName = React.useCallback((tokenId?: number) => {\n        if (tokenMap) {\n            const keys = Object.keys(tokenMap)\n            const values = Object.values(tokenMap)\n            const index = values.findIndex(o => o.tokenId === tokenId)\n            if (index > -1) {\n                return keys[index]\n            }\n            return ''\n        }\n        return ''\n    }, [tokenMap])\n\n    const getAmmpoolList = React.useCallback(async () => {\n        if (LoopringAPI.ammpoolAPI && accountId && apiKey) {\n            const ammpool = await LoopringAPI.ammpoolAPI.getUserAmmPoolTxs({\n                accountId,\n            }, apiKey)\n            if (ammpool && ammpool.userAmmPoolTxs) {\n                const result = ammpool.userAmmPoolTxs.map(o => ({\n                    side: o.txType === AmmTxType.JOIN ? AmmSideTypes.Join : AmmSideTypes.Exit,\n                    amount: {\n                        from: {\n                            key: getTokenName(o.poolTokens[0]?.tokenId),\n                            value: String(volumeToCount(getTokenName(o.poolTokens[0]?.tokenId), o.poolTokens[0]?.actualAmount))\n                        },\n                        to: {\n                            key: getTokenName(o.poolTokens[1]?.tokenId),\n                            value: String(volumeToCount(getTokenName(o.poolTokens[1]?.tokenId), o.poolTokens[1]?.actualAmount))\n                        }\n                    },\n                    lpTokenAmount: String(volumeToCount(getTokenName(o.lpToken?.tokenId), o.lpToken?.actualAmount)),\n                    fee: {\n                        key: getTokenName(o.poolTokens[1]?.tokenId),\n                        value: volumeToCount(getTokenName(o.poolTokens[1]?.tokenId), o.poolTokens[1]?.feeAmount)?.toFixed(6)\n                    },\n                    time: o.updatedAt\n                }))\n                setAmmRecordList(result)\n                setShowLoading(false)\n            }\n        }\n    }, [accountId, apiKey, getTokenName])\n    \n    useEffect(() => {\n        getAmmpoolList()\n    }, [getAmmpoolList])\n\n    return  {\n        ammRecordList,\n        showLoading,\n    }\n}\n\n","export enum Commands {\n    ErrorNetwork='ErrorNetwork',\n    LockAccount='LockAccount',// clear private data\n    NoAccount='NoAccount',//\n    DepositingAccount='DepositingAccount',\n    ErrorApproveToken='ErrorApproveToken',\n    ErrorDepositSign='ErrorDepositSign',\n    ProcessDeposit='ProcessDeposit',// two or one step\n    SignAccount='SignAccount', //unlock or update account  assgin\n    ErrorSign='ErrorSign',\n    ProcessSign='ProcessSign',\n    ProcessAccountCheck='ProcessAccountCheck',\n    AccountUnlocked = 'AccountUnlocked'\n}\nexport enum ErrorType {\n    FailedConnect = 'FailedConnect'\n}\n// 'ConnectWallet',\n// 'UnLockWallet',\n// 'SignatureTransfer',\n// 'SignatureApprove'\n\n\nexport enum ProcessingType{\n    waiting = 'waiting',\n    nextStep = 'nextStep'\n}\n","import styled from '@emotion/styled';\nimport { Box, Button, Divider, Grid, Switch, Typography } from '@material-ui/core';\nimport React from 'react';\nimport { UpColor, Currency, DropDownIcon } from '@loopring-web/common-resources';\nimport {\n    BtnLanguage,\n    OutlineSelect,\n    OutlineSelectItem, QRCodePanel,\n    TypographyStrong, useSettings\n} from '@loopring-web/component-lib';\nimport { Trans, useTranslation, WithTranslation, withTranslation } from 'react-i18next';\nimport { useTheme } from '@emotion/react';\nimport { LanguageKeys } from '@loopring-web/common-resources';\nimport { useExportAccoutInfo } from './hook';\n\n// const MuiModalStyled = styled(MuiModal)`\n//   //background: ${({theme}) => theme.colorBase.background().secondary};\n//   // .MuiBackdrop-root{\n//   //   z-index: -1;\n//   //   background-color: ${({theme}) => theme.colorBase.background().outline};\n//   // }\n//   display: flex;\n//   align-items: center;\n//   justify-content: center;\n// ` as typeof MuiModal;\n// const BlockStyled = styled(Box)`\n//   ${({theme}) => theme.border.defaultFrame({c_key: 'blur', d_R: 1})};\n//   background: ${({theme}) => theme.colorBase.background().secondary};\n//   max-height: var(--panel-setting-height);\n//   max-width: var(--panel-setting-width);\n//   display: flex;\n//   justify-content: space-around;\n//   align-items: center;\n//   overflow: scroll;\n//   padding: ${({theme}) => theme.unit*8}px\n// `;\n\nconst StyledPaper = styled(Grid)`\n  width: 100%;\n  height: 100%;\n  background-color: ${({theme}) => theme.colorBase.background().default};\n  border-radius: ${({ theme }) => theme.unit}px;\n`\n//${({theme}) => theme.border.defaultFrame({c_key: 'blur', d_R: 1})};\n\nconst StyledSwitch = styled(Switch)(({theme}) => ({\n    \"& .Mui-checked\": {\n        color: theme.colorBase.textPrimary,\n        '& + .MuiSwitch-track.MuiSwitch-track': {\n            border: `solid ${theme.colorBase.success}`,\n        },\n        '& .MuiSwitch-thumb': {\n            backgroundColor: theme.colorBase.success,\n        }\n    },\n    '& .MuiSwitch-track': {\n        border: `solid ${theme.colorBase.error}`,\n        opacity: 1\n    },\n    '& .MuiSwitch-thumb': {\n        backgroundColor: theme.colorBase.error,\n    }\n}));\n\nexport const BtnCurrency = ({t, currency, label, handleChange}: any) => {\n    const [state, setState] = React.useState<string>(currency ? currency : Currency.dollar);\n    const _handleChange = React.useCallback((event: React.ChangeEvent<any>) => {\n        setState(event.target.value);\n        if (handleChange) {\n\n            handleChange(event.target.value)\n        }\n    }, [handleChange])\n    return <OutlineSelect aria-label={t(label)} IconComponent={DropDownIcon}\n                          labelId=\"language-selected\"\n                          id=\"language-selected\"\n                          value={state} autoWidth\n                          onChange={_handleChange}>\n        <OutlineSelectItem value={Currency.dollar}>$ {t('labelUSDollar')}</OutlineSelectItem>\n            <OutlineSelectItem value={Currency.yen}> {t('labelCNYYuan')}</OutlineSelectItem>\n    </OutlineSelect>\n}\n\nconst StyledDivider = styled(Divider)`\n  margin: ${({theme}) => theme.unit}px 0 ${({theme}) => theme.unit}px 0px;\n`\nconst DividerBlock = styled(Divider)`\n  margin: 0;\n  flex: 1;\n  width: 1px;\n  height: ${({theme}) => theme.unit * 3}px;\n  background: ${({theme}) => theme.colorBase.focus};\n`\n\n\n\nexport const SettingPanel = withTranslation(['common', 'layout'])(({t,i18n, ...rest}: & WithTranslation) => {\n    const theme = useTheme();\n    const {setUpColor,setLanguage,setCurrency,currency,upColor} = useSettings()\n    const language = i18n.language;\n    const handleOnLanguageChange = (lang: LanguageKeys) => {\n        setLanguage(lang);\n        i18n.changeLanguage(lang);\n    }\n    const handleOnCurrencyChange = (value: any) => {\n        setCurrency(value);\n    }\n    const handleColorChange = (e:any) => {\n        if(e.target.checked){\n            setUpColor(UpColor.green) ;\n        }else{\n            setUpColor(UpColor.red);\n        }\n    }\n\n    const { exportAccInfo } = useExportAccoutInfo()\n\n    return <Grid container direction={'column'} justifyContent={'space-between'} alignItems={'stretch'} flexWrap={'nowrap'}>\n        {/* <Typography variant={'h4'} component={'h3'} paddingLeft={2}>{t('labelTitleSecurity')}</Typography>\n        <StyledPaper item xs={12} display={'flex'} flexDirection={'column'} marginY={2}  paddingY={3}>\n            <Box component={'section'} display={'flex'} flexDirection={'column'} marginBottom={1}>\n                <Typography variant={'h5'} component={'h4'} paddingX={3}  marginBottom={1}>{t('labelTitleResetL2Keypair')}</Typography>\n                <Grid container display={'flex'} flexDirection={'row'} justifyContent={'stretch'}\n                      alignItems={'flex-start'} paddingX={3} >\n                    <Grid item xs={8} display={'flex'} flexDirection={'column'}>\n                        <Typography variant={'body1'} component={'p'}>\n                            <Trans i18nKey=\"resetDescription\">\n                                Create a new signing key for layer-2 authentication (no backup needed). This will\n                                <TypographyStrong component={'span'}>cancel all your pending orders</TypographyStrong>.\n                            </Trans>\n                        </Typography>\n                    </Grid>\n                    <Grid item xs={4} display={'flex'} flexDirection={'column'} justifyContent={'space-evenly'}\n                          alignItems={'flex-end'} alignSelf={'stretch'}>\n                        <Button variant={'outlined'} size={'medium'} color={'primary'} disabled={false}>{t('labelBtnReset')}</Button>\n                    </Grid>\n                    <Grid item xs={12} display={'flex'} flexDirection={'row'} justifyContent={'flex-end'}\n                          alignItems={'center'} alignSelf={'stretch'}>\n                        <Typography variant={'body2'} component={'p'}\n                                    paddingTop={1}>{t('labelHadChangPassword', {passDay: '14 hours'})}</Typography>\n                    </Grid>\n\n                </Grid>\n            </Box>\n            <StyledDivider/>\n            <Box component={'section'} display={'flex'} flexDirection={'column'}>\n                <Typography variant={'h5'} component={'h4'} paddingX={3} marginY={1}>{t('labelTitleExportAccount')}</Typography>\n\n                <Grid container display={'flex'} flexDirection={'row'} justifyContent={'stretch'}\n                      alignItems={'flex-start'} paddingX={3} marginBottom={2}>\n                    <Grid item xs={7} display={'flex'} flexDirection={'column'}>\n                        <Typography variant={'body1'} component={'p'}>{t('descriptionExportAccount')}</Typography>\n                    </Grid>\n                    <Grid item xs={5} display={'flex'} flexDirection={'column'} justifyContent={'space-evenly'}\n                          alignItems={'flex-end'} alignSelf={'stretch'}>\n                        <Grid item> <Button onClick={() => {\n                            exportAccInfo()\n                        }} variant={'outlined'} size={'medium'}\n                                            color={'primary'} disabled={false}>{t('labelBtnExportAccount')}</Button></Grid>\n                    </Grid>\n                </Grid>\n            </Box>\n        </StyledPaper> */}\n\n        <Typography variant={'h4'} component={'h3'} paddingLeft={2}>{t('labelTitlePreferences')}</Typography>\n        <StyledPaper item xs={12} display={'flex'} flexDirection={'column'} marginY={2} paddingY={3}>\n            <Box component={'section'} display={'flex'} flexDirection={'column'}>\n                {/*<Typography variant={'h5'} component={'h4'} paddingX={2}>{t('labelTitleLayout')}</Typography>*/}\n                {/*<StyledDivider/>*/}\n                <Grid container display={'flex'} flexDirection={'row'} justifyContent={'stretch'}\n                      alignItems={'flex-start'} paddingX={3} marginBottom={2}>\n                    <Grid item xs={7} display={'flex'} flexDirection={'column'}>\n                        <Typography variant={'body1'} component={'p'}>{t('labelLanguage')}</Typography>\n                    </Grid>\n                    <Grid item xs={5} display={'flex'} flexDirection={'column'} justifyContent={'space-evenly'}\n                          alignItems={'flex-end'} alignSelf={'stretch'}>\n                        <Grid item>\n                            <BtnLanguage {...{\n                                t, ...rest,\n                                language,\n                                label: 'languageSetting',\n                                handleChange: handleOnLanguageChange\n                            }}></BtnLanguage>\n                        </Grid>\n                    </Grid>\n                </Grid>\n                <StyledDivider/>\n                <Grid container display={'flex'} flexDirection={'row'} justifyContent={'stretch'}\n                      alignItems={'flex-start'} paddingX={3} marginY={2}>\n                    <Grid item xs={7} display={'flex'} flexDirection={'column'}>\n                        <Typography variant={'body1'} component={'p'}>{t('labelCurrency')}</Typography>\n                    </Grid>\n                    <Grid item xs={5} display={'flex'} flexDirection={'column'} justifyContent={'space-evenly'}\n                          alignItems={'flex-end'} alignSelf={'stretch'}>\n                        <Grid item>\n                            <BtnCurrency {...{\n                                t, ...rest,\n                                currency,\n                                label: 'currencySetting',\n                                handleChange: handleOnCurrencyChange\n                            }}></BtnCurrency>\n\n                        </Grid>\n                    </Grid>\n                </Grid>\n                <StyledDivider/>\n                <Grid container display={'flex'} flexDirection={'row'} justifyContent={'stretch'}\n                      alignItems={'flex-start'} paddingX={3} marginTop={2}>\n                    <Grid item xs={7} display={'flex'} flexDirection={'column'}>\n                        <Typography variant={'body1'} component={'p'}>{t('labelColors')}</Typography>\n                    </Grid>\n                    <Grid item xs={5} display={'flex'} flexDirection={'row'} justifyContent={'flex-end'}\n                          alignItems={'center'} alignSelf={'stretch'}>\n                        <Typography variant={'body1'} component={'span'} paddingX={2}>\n                            <Trans i18nKey=\"whichColorIsUp\">\n                                <span style={{\n                                    textTransform: 'capitalize',\n                                    color: upColor === UpColor.green ? theme.colorBase.success : theme.colorBase.error\n                                }}>{{up: upColor === UpColor.green ? t('labelgreen') : t('labelred')}} up</span>\n                                and <span style={{\n                                textTransform: 'capitalize',\n                                color: upColor === UpColor.green ? theme.colorBase.error : theme.colorBase.success\n                            }}>{{down: upColor === UpColor.green ? t('labelred') : t('labelgreen')}} down</span>\n                            </Trans>\n                        </Typography>\n                        <StyledSwitch checked={upColor === UpColor.green} color=\"default\"\n                                      onChange={handleColorChange}/>\n                    </Grid>\n                </Grid>\n            </Box>\n\n        </StyledPaper>\n\n    </Grid>\n})\n\n// export const SettingPage = ({open,onClose}: { open:boolean, onClose:(e:any)=>void})=>{\n//     return  <MuiModalStyled\n//         open={open}\n//         onClose={onClose}\n//         aria-labelledby=\"modal-modal-title\"\n//         aria-describedby=\"modal-modal-description\"\n//     >\n//         <BlockStyled >\n//            <SettingPanel/>\n//         </BlockStyled>\n//     </MuiModalStyled>\n// }\n\n\n","import { useCallback } from \"react\";\nimport { useSelector } from \"react-redux\";\nimport { RootState } from \"stores\";\n\nimport { myLog } from \"utils/log_tools\";\nimport { Account, AccountStatus } from '@loopring-web/common-resources';\nimport exportFromJSON from 'export-from-json';\n\nexport function useResetAccount() {\n\n}\n\nexport function useExportAccoutInfo() {\n    const account: Account = useSelector((state: RootState) => state.account)\n\n    const exportAccInfo = useCallback(() => {\n\n        if (account.readyState !== AccountStatus.ACTIVATED) {\n            return undefined\n        }\n\n        const accInfo = {\n            address: account.accAddress,\n            accountId: account.accountId,\n            nonce: account.level,\n            apiKey: account.apiKey,\n            publicX: account.publicKey.x,\n            publicY: account.publicKey.y,\n            privateKey: account.eddsaKey,\n        }\n\n        const fileName = 'accountInfo'\n        const exportType = 'json'\n\n        exportFromJSON({data: accInfo, fileName, exportType})\n\n        myLog('exportFromJSON:', accInfo)\n\n    }, [account])\n\n    return {\n        exportAccInfo,\n    }\n}\n","import { useRouteMatch } from 'react-router'\n\nimport { Box, Typography } from '@material-ui/core'\nimport { Button, SubMenu, SubMenuList as BasicSubMenuList, useOpenModals, } from '@loopring-web/component-lib'\nimport { useTranslation, withTranslation } from 'react-i18next'\nimport styled from '@emotion/styled'\nimport { AccountStatus, fnType, LoadingIcon, SagaStatus, subMenuLayer2 } from '@loopring-web/common-resources'\n\nimport TxPanel from './TxPanel'\nimport AssetPanel from './AssetPanel'\nimport TradePanel from './TradePanel'\nimport AmmPanel from './AmmPanel'\nimport { SettingPanel } from '../SettingPage';\n// import { useModalProps } from '../../layouts/header/hook';\nimport React from 'react';\nimport { useAccount } from '../../stores/account';\nimport { accountStaticCallBack, bntLabel, btnClickMap } from '../../layouts/connectStatusCallback';\nimport { deepClone } from '../../utils/obj_tools';\nimport OrderPanel from './OrderPanel'\nimport { myLog } from 'utils/log_tools'\n// import { useModalProps } from '../../modal';\n\nexport const subMenu = subMenuLayer2\n\nconst BoxStyle = styled(Box)`\n  ${({theme}) => `\n    background-color: ${theme.colorBase.background().default};\n    width: 100%;\n    min-width:auto;\n    ${theme.border.defaultFrame({c_key: 'blur'})};\n    & > div{\n      background-color:initial;\n      border:0;\n      width:auto;\n      min-width: var(--swap-box-width);\n      max-width: 520px;\n    }\n    `\n  }\n\n` as typeof Box\nconst BtnConnect = withTranslation(['common'], {withRef: true})(({t}: any) => {\n    const { status: accountStatus} = useAccount();\n    // const {setShowAccount} = useOpenModals();\n    const [label, setLabel] = React.useState(undefined);\n    const _bntLabel: typeof btnClickMap = Object.assign(deepClone(bntLabel),{\n        [ fnType.NO_ACCOUNT ]: [\n            function () {\n                return `depositTitleAndActive`\n            }\n        ],\n        [ fnType.ERROR_NETWORK ]: [\n            function () {\n                return `depositTitleAndActive`\n            }\n        ],\n    });\n    React.useEffect(() => {\n        if (accountStatus === SagaStatus.UNSET) {\n            setLabel(accountStaticCallBack(_bntLabel));\n        }\n    }, [accountStatus])\n    const _btnClickMap: typeof btnClickMap = Object.assign(deepClone(btnClickMap), {});\n\n    return <Button variant={'contained'} size={'large'} color={'primary'} fullWidth={true}\n                   style={{maxWidth: '280px'}} onClick={() => {\n        accountStaticCallBack(_btnClickMap, [])\n    }\n    }>{t(label)}</Button>\n}) as typeof Button\nconst SubMenuList = withTranslation(['layout', 'common'], {withRef: true})(BasicSubMenuList);\nexport const Layer2Page = () => {\n\n    let match: any = useRouteMatch(\"/layer2/:item\")\n    const {\n        account,\n        // updateAccount,\n        // resetAccount,\n        // setShouldShow,\n        // status: accountStatus,\n        // statusUnset: accountStatusUnset\n    } = useAccount();\n\n    const {t, ...rest} = useTranslation();\n    const selected = match?.params.item ?? 'assets';\n    // const {depositProps} = useDeposit()\n\n    const viewTemplate = React.useMemo(() => {\n        switch (account.readyState) {\n            case AccountStatus.UN_CONNECT:\n                return <Box flex={1} display={'flex'} justifyContent={'center'} flexDirection={'column'} alignItems={'center'}\n                >\n                    <Typography marginY={3} variant={'h1'}>{t('describeTitleConnectToWallet')}</Typography>\n                    <BtnConnect/>\n                </Box>\n                break\n            case AccountStatus.LOCKED:\n                return <Box flex={1} display={'flex'} justifyContent={'center'} flexDirection={'column'} alignItems={'center'}>\n                    <Typography marginY={3} variant={'h1'}>{t('describeTitleLocked')}</Typography>\n                    <BtnConnect/>\n                </Box>\n                break\n            case AccountStatus.NO_ACCOUNT:\n                return <Box flex={1} display={'flex'} justifyContent={'center'} flexDirection={'column'} alignItems={'center'}>\n                    <Typography marginY={3} variant={'h1'}>{t('describeTitleNoAccount')}</Typography>\n                    <BtnConnect/>\n                </Box>\n                break\n            case AccountStatus.DEPOSITING:\n                return <Box flex={1} display={'flex'} justifyContent={'center'} flexDirection={'column'} alignItems={'center'}\n                >\n                    <LoadingIcon color={'primary'} style={{width: 60, height: 60}}/>\n                    <Typography marginY={3} variant={'h1'}>{t('describeTitleOpenAccounting')}</Typography>\n                    {/*<BtnConnect/>*/}\n                </Box>\n                break\n            case AccountStatus.ERROR_NETWORK:\n                return <Box flex={1} display={'flex'} justifyContent={'center'} flexDirection={'column'} alignItems={'center'}\n                >\n                    <Typography marginY={3}\n                                variant={'h1'}>{t('describeTitleOnErrorNetwork', {connectName: account.connectName})}</Typography>\n                    {/*<BtnConnect/>*/}\n                </Box>\n                break\n            case AccountStatus.ACTIVATED:\n                return <>\n                    <Box width={'200px'} display={'flex'} justifyContent={'stretch'} marginRight={3}\n                         marginBottom={2}>\n                        <SubMenu>\n                            <SubMenuList selected={selected} subMenu={subMenu as any}/>\n                        </SubMenu>\n                    </Box>\n                    <Box minHeight={420} display={'flex'} alignItems={'stretch'} flexDirection={'column'} marginTop={0}\n                         flex={1}>\n\n                        {selected === 'assets' && <AssetPanel/>}\n                        {selected === 'transactions' && <TxPanel/>}\n                        {selected === 'trades' && <TradePanel/>}\n                        {selected === 'ammRecords' && <AmmPanel/>}\n                        {/* {selected === 'orders' && <OrderPanel />} */}\n                        {selected === 'setting' && <SettingPanel/>}\n                    </Box>\n                </>\n            default:\n                break\n        }\n    }, [t, account.readyState, selected])\n\n    return <>\n        {viewTemplate}\n        {/*    {*/}\n\n        {/*   */}\n        {/*    readyState === AccountStatus.UN_CONNECT*/}\n        {/*        ? <Redirect to=\"/\"/>*/}\n        {/*        :*/}\n        {/*        readyState === AccountStatus.NO_ACCOUNT*/}\n        {/*        || readyState === AccountStatus.DEPOSITING ?*/}\n        {/*            <BoxStyle display={'flex'} flexWrap={'wrap'} alignItems={'center'} justifyContent={'center'}*/}\n        {/*                      alignContent={'flex-start'}>*/}\n        {/*                <DepositPanel  {...{*/}\n        {/*                    ...rest, ...depositProps,*/}\n        {/*                    title: t('depositTitleAndActive'),*/}\n        {/*                    description: 'depositAndActiveDescription'*/}\n        {/*                }} > </DepositPanel>*/}\n        {/*            </BoxStyle> : <>*/}\n        {/*                <Box width={'200px'} display={'flex'} justifyContent={'stretch'} marginRight={3} marginBottom={2}>*/}\n        {/*                    <SubMenu>*/}\n        {/*                        <SubMenuList selected={selected} subMenu={subMenu as any}/>*/}\n        {/*                    </SubMenu>*/}\n        {/*                </Box>*/}\n        {/*                <Box minHeight={420} display={'flex'} alignItems={'stretch'} flexDirection={'column'} marginTop={0}*/}\n        {/*                     flex={1}>*/}\n        {/*                    {readyState === AccountStatus.LOCKED ?*/}\n        {/*                        <>*/}\n        {/*                            {*/}\n        {/*                                selected === 'setting' ? <SettingPanel/> :*/}\n        {/*                                    <Box flex={1} display={'flex'} justifyContent={'center'} alignItems={'center'}*/}\n        {/*                                         marginTop={-10}>*/}\n        {/*                                        <BtnConnect/>*/}\n        {/*                                    </Box>*/}\n\n        {/*                            }*/}\n        {/*                        </> :*/}\n        {/*                       */}\n\n        {/*                    }*/}\n\n\n        {/*                </Box>*/}\n        {/*            </>*/}\n        {/*}*/}\n    </>\n\n\n}\n","import { WithTranslation, withTranslation } from 'react-i18next'\nimport { Box, } from '@material-ui/core'\nimport styled from '@emotion/styled'\n\nimport React from 'react';\nimport { useAmmMapUI } from './hook';\n\nimport { PoolsTable } from '@loopring-web/component-lib';\nimport { AmmPoolActivityRule, LoopringMap } from 'loopring-sdk/dist/defs/loopring_defs';\n\nconst StylePaper = styled(Box)`\n  width: 100%;\n  height: 100%;\n  flex: 1;\n  background-color: ${({theme}) => theme.colorBase.background().default};\n  border-radius: ${({theme}) => theme.unit}px;\n\n  .rdg {\n    flex: 1;\n  }\n\n` as typeof Box;\n\n\nexport const PoolsPanel = withTranslation('common')(<R extends { [ key: string ]: any }, I extends { [ key: string ]: any }>\n({t, ammActivityMap, ...rest}: WithTranslation\n    & {\n    ammActivityMap: LoopringMap<LoopringMap<AmmPoolActivityRule[]>> | undefined }) => {\n    const container = React.useRef(null);\n    const [pageSize, setPageSize] = React.useState(10);\n    const {updateTickersUI, rawData, page} = useAmmMapUI({pageSize});\n\n    React.useEffect(() => {\n        // @ts-ignore\n        let height = container?.current?.offsetHeight;\n        if (height) {\n            setPageSize(Math.floor((height - 120) / 44) - 1);\n        }\n    }, [container, pageSize]);\n\n    const handlePageChange = React.useCallback((page) => {\n        updateTickersUI(page)\n    }, [updateTickersUI]);\n    return (\n        <>\n            <StylePaper display={'flex'} flexDirection={'column'} ref={container}>\n                <PoolsTable {...{\n                    rawData,\n                    handlePageChange,\n                    page,\n                    pagination: {\n                        pageSize\n                    }\n                }} />\n            </StylePaper>\n        </>\n    )\n})\n\n","import { AmmPanel, AmmPanelType, Toast } from '@loopring-web/component-lib';\nimport { AmmData, AmmInData, CoinInfo, IBData, WalletMap } from '@loopring-web/common-resources';\nimport { useAmmPanel } from './hooks';\nimport React from 'react';\nimport { Box } from '@material-ui/core';\nimport { AmmPoolSnapshot, TickerData } from 'loopring-sdk';\nimport { TradeBtnStatus } from '@loopring-web/component-lib';\nimport { TOAST_TIME } from 'defs/common_defs';\n\nexport const AmmPanelView = <T extends AmmData<C extends IBData<I> ? C : IBData<I>>, I,\n    ACD extends AmmInData<I>,\n    C = IBData<I>>({\n                       pair,\n                       walletMap,\n                       ammType, snapShotData,\n                       ...rest\n                   }: {\n    pair: { coinAInfo: CoinInfo<C> | undefined, coinBInfo: CoinInfo<C> | undefined },\n    snapShotData: { tickerData: TickerData | undefined, ammPoolsBalance: AmmPoolSnapshot | undefined } | undefined\n    walletMap: WalletMap<C>\n    ammType?: keyof typeof AmmPanelType\n} & any) => {\n    const {\n        ammAlertText,\n        ammToastOpen,\n        setAmmToastOpen,\n\n\n        ammCalcData,\n        ammJoinData,\n        ammExitData,\n        handleJoinAmmPoolEvent,\n        handleExitAmmPoolEvent,\n        onAmmRemoveClick,\n        onAmmAddClick,\n        isJoinLoading,\n        isExitLoading,\n        ammDepositBtnI18nKey,\n        ammWithdrawBtnI18nKey,\n    } = useAmmPanel({\n        pair,\n        snapShotData, walletMap, ammType: ammType ? ammType : AmmPanelType.Deposit\n    })\n\n    // const [index, setIndex] = React.useState(AmmPanelTypeMap[ tabSelected ]);\n    const isLoading = React.useCallback(()=>{\n        \n        if((!snapShotData || !snapShotData.tickerData || !snapShotData.ammPoolsBalance)\n            &&  ammDepositBtnI18nKey === undefined\n            &&  ammWithdrawBtnI18nKey === undefined\n        ) {\n          return true\n        }\n    \n        if(isJoinLoading || isExitLoading){\n            return true   \n            \n        }\n    },[snapShotData,ammWithdrawBtnI18nKey,ammWithdrawBtnI18nKey,isJoinLoading,isExitLoading])\n\n\n    return <> \n    \n    <Toast alertText={ammAlertText as string} open={ammToastOpen} \n            autoHideDuration={TOAST_TIME} setOpen={setAmmToastOpen}/>\n\n    {pair ?\n        <AmmPanel {...{...rest}}\n                  ammDepositData={ammJoinData}\n                  ammWithdrawData={ammExitData}\n                  ammCalcData={ammCalcData}\n                  handleAmmAddChangeEvent={handleJoinAmmPoolEvent}\n                  handleAmmRemoveChangeEvent={handleExitAmmPoolEvent}\n                  onAmmRemoveClick={onAmmRemoveClick}\n                  onAmmAddClick={onAmmAddClick}\n                  tabSelected={ammType ? ammType : AmmPanelType.Deposit}\n                  ammDepositBtnI18nKey={ammDepositBtnI18nKey}\n                  ammWithdrawBtnI18nKey={ammWithdrawBtnI18nKey}\n                  ammDepositBtnStatus={isLoading()?TradeBtnStatus.LOADING:TradeBtnStatus.AVAILABLE}\n                  ammWithdrawBtnStatus={isLoading()?TradeBtnStatus.LOADING:TradeBtnStatus.AVAILABLE}\n\n        /> : <Box width={'var(--swap-box-width)'}/>}\n    </>\n\n}","import React, { useState } from \"react\";\nimport {\n    AccountStatus,\n    AmmData,\n    AmmInData,\n    CoinInfo,\n    fnType,\n    globalSetup,\n    IBData,\n    SagaStatus,\n    WalletMap\n} from '@loopring-web/common-resources';\nimport { AmmPanelType } from '@loopring-web/component-lib';\nimport { IdMap, useTokenMap } from '../../../stores/token';\nimport { useAmmMap } from '../../../stores/Amm/AmmMap';\nimport { accountStaticCallBack, ammPairInit, bntLabel, btnClickMap, makeCache } from '../../../hooks/help';\nimport * as sdk from 'loopring-sdk';\nimport {\n    AmmPoolRequestPatch,\n    AmmPoolSnapshot,\n    ChainId,\n    dumpError400,\n    ExitAmmPoolRequest,\n    GetAmmPoolSnapshotRequest,\n    getExistedMarket,\n    GetNextStorageIdRequest,\n    GetOffchainFeeAmtRequest,\n    JoinAmmPoolRequest,\n    LoopringMap,\n    makeExitAmmPoolRequest,\n    makeJoinAmmPoolRequest,\n    MarketInfo,\n    OffchainFeeInfo,\n    OffchainFeeReqType,\n    TickerData,\n    toBig,\n    TokenInfo\n} from 'loopring-sdk';\nimport { useCustomDCEffect } from '../../../hooks/common/useCustomDCEffect';\nimport { useAccount } from '../../../stores/account/hook';\nimport store from \"stores\";\nimport { LoopringAPI } from \"stores/apis/api\";\nimport { debounce } from \"lodash\";\n// import { AccountStatus } from \"state_machine/account_machine_spec\";\nimport { deepClone } from '../../../utils/obj_tools';\nimport { useWalletLayer2 } from \"stores/walletLayer2\";\nimport { myLog } from \"utils/log_tools\";\nimport { BIG10 } from \"defs/swap_defs\";\nimport { REFRESH_RATE_SLOW } from \"defs/common_defs\";\nimport { useTranslation } from \"react-i18next\";\nimport { debug } from \"console\";\n\nexport const useAmmPanel = <C extends { [ key: string ]: any }>({\n                                                                    pair,\n                                                                    walletMap,\n                                                                    ammType,\n                                                                    snapShotData,\n                                                                }\n                                                                    : {\n    pair: { coinAInfo: CoinInfo<C> | undefined, coinBInfo: CoinInfo<C> | undefined },\n    snapShotData: { tickerData: TickerData | undefined, ammPoolsBalance: AmmPoolSnapshot | undefined } | undefined\n    walletMap: WalletMap<C>\n    ammType: keyof typeof AmmPanelType\n}) => {\n\n    const [ammToastOpen, setAmmToastOpen] = useState<boolean>(false)\n    const [ammAlertText, setAmmAlertText] = useState<string>()\n    const {delayAndUpdateWalletLayer2} = useWalletLayer2();\n    const {t} = useTranslation('common')\n    const {coinMap, tokenMap} = useTokenMap();\n    const {ammMap} = useAmmMap();\n    const {account, status: accountStatus} = useAccount();\n    const [ammCalcData, setAmmCalcData] = React.useState<AmmInData<C> | undefined>();\n    const nodeTimer = React.useRef<NodeJS.Timeout | -1>(-1);\n    const [ammJoinData, setAmmJoinData] = React.useState<AmmData<IBData<C>, C>>({\n        coinA: {belong: undefined} as unknown as IBData<C>,\n        coinB: {belong: undefined} as unknown as IBData<C>,\n        slippage: 0.5\n    } as AmmData<IBData<C>, C>);\n\n    const [ammExitData, setAmmExitData] = React.useState({\n        coinA: {belong: undefined} as unknown as IBData<C>,\n        coinB: {belong: undefined} as unknown as IBData<C>,\n        slippage: 0.5\n    } as AmmData<IBData<C>, C>);\n\n    const [ammDepositBtnI18nKey, setAmmDepositBtnI18nKey] = React.useState<string | undefined>(undefined);\n    const [ammWithdrawBtnI18nKey, setAmmWithdrawBtnI18nKey] = React.useState<string | undefined>(undefined);\n\n    const initAmmData = React.useCallback(async (pair: any) => {\n        let _ammCalcData = ammPairInit(\n            {\n                pair,\n                ammType,\n                _ammCalcData: {},\n                tokenMap,\n                coinMap,\n                walletMap: walletMap, //walletLayer2State.walletLayer2,\n                ammMap,\n                tickerData: snapShotData?.tickerData,\n                ammPoolsBalance: snapShotData?.ammPoolsBalance\n            })\n\n        setAmmCalcData({...ammCalcData, ..._ammCalcData});\n        if (_ammCalcData.myCoinA) {\n            setAmmJoinData({\n                coinA: {..._ammCalcData.myCoinA, tradeValue: undefined},\n                coinB: {..._ammCalcData.myCoinB, tradeValue: undefined},\n                slippage: 0.5\n            })\n            setAmmExitData({\n                coinA: {..._ammCalcData.lpCoinA, tradeValue: undefined},\n                coinB: {..._ammCalcData.lpCoinB, tradeValue: undefined},\n                slippage: 0.5\n            })\n        }\n    }, [snapShotData, walletMap, coinMap, tokenMap, ammCalcData, ammMap, ammType, setAmmCalcData, setAmmJoinData, setAmmExitData])\n\n    const [ammPoolSnapshot, setAmmPoolSnapShot] = useState<AmmPoolSnapshot>()\n    const updateAmmPoolSnapshot = React.useCallback(async () => {\n\n        if (!pair.coinAInfo?.simpleName || !pair.coinBInfo?.simpleName || !LoopringAPI.ammpoolAPI) {\n            setAmmAlertText(t('labelAmmJoinFailed'))\n            return\n        }\n\n        const {marketArray, marketMap,} = store.getState().tokenMap\n\n        const {ammMap} = store.getState().amm.ammMap\n\n        const {market, amm} = getExistedMarket(marketArray, pair.coinAInfo.simpleName as string,\n            pair.coinBInfo.simpleName as string)\n\n        if (!market || !amm || !marketMap) {\n            return\n        }\n\n        const ammInfo: any = ammMap[ amm as string ]\n\n        const request1: GetAmmPoolSnapshotRequest = {\n            poolAddress: ammInfo.address\n        }\n\n        const response = await LoopringAPI.ammpoolAPI.getAmmPoolSnapshot(request1)\n\n        if (!response) {\n            return\n        }\n\n        const {ammPoolSnapshot} = response\n\n        setAmmPoolSnapShot(ammPoolSnapshot)\n    }, [])\n\n    React.useEffect( () => {\n        if(nodeTimer.current !== -1){\n            clearInterval(nodeTimer.current as NodeJS.Timeout);\n        }\n        nodeTimer.current = setInterval( () => {\n            updateAmmPoolSnapshot()\n        }, REFRESH_RATE_SLOW)\n        \n        updateAmmPoolSnapshot()\n\n        return ()=>{\n            if(nodeTimer.current !== -1){\n                clearInterval(nodeTimer.current as NodeJS.Timeout);\n            }\n        }\n\n    }, [nodeTimer.current])\n\n    // set fees\n\n    const [joinFees, setJoinFees] = useState<LoopringMap<OffchainFeeInfo>>()\n    const [exitFees, setExitfees] = useState<LoopringMap<OffchainFeeInfo>>()\n    const {account: {accountId, apiKey}} = useAccount()\n\n    // const { status } = useSelector((state: RootState) => state.account)\n\n    useCustomDCEffect(async () => {\n        if (accountStatus === SagaStatus.UNSET) {\n\n            const label: string | undefined = accountStaticCallBack(bntLabel)\n            setAmmDepositBtnI18nKey(label)\n            setAmmWithdrawBtnI18nKey(label)\n\n            if (!LoopringAPI.userAPI || !pair.coinBInfo?.simpleName\n                || account.readyState !== AccountStatus.ACTIVATED\n                || !ammCalcData || !tokenMap) {\n                return\n            }\n            const feeToken: TokenInfo = tokenMap[ pair.coinBInfo.simpleName ]\n\n            const requestJoin: GetOffchainFeeAmtRequest = {\n                accountId: account.accountId,\n                requestType: OffchainFeeReqType.AMM_JOIN,\n                tokenSymbol: pair.coinBInfo.simpleName as string,\n            }\n\n            const {fees: feesJoin} = await LoopringAPI.userAPI.getOffchainFeeAmt(requestJoin, account.apiKey)\n            setJoinFees(feesJoin)\n\n            const feeJoin = sdk.toBig(feesJoin[ pair.coinBInfo.simpleName ]?.fee as string).div('1e' + feeToken.decimals).toString()\n                + ' ' + pair.coinBInfo.simpleName\n\n            const requestExit: GetOffchainFeeAmtRequest = {\n                accountId: account.accountId,\n                requestType: OffchainFeeReqType.AMM_EXIT,\n                tokenSymbol: pair.coinBInfo.simpleName as string,\n            }\n            const {fees: feesExit} = await LoopringAPI.userAPI.getOffchainFeeAmt(requestExit, account.apiKey)\n\n            setExitfees(feesExit)\n\n            const feeExit = sdk.toBig(feesExit[ pair.coinBInfo.simpleName ].fee as string).div('1e' + feeToken.decimals).toString()\n                + ' ' + pair.coinBInfo.simpleName\n\n            myLog('-> feeJoin:', feeJoin, ' feeExit:', feeExit)\n\n            setAmmCalcData({...ammCalcData, feeJoin, feeExit})\n        }\n    }, [setJoinFees, setExitfees, setAmmCalcData, setAmmDepositBtnI18nKey, setAmmWithdrawBtnI18nKey,\n        accountStatus, account.readyState, account.apiKey, account.accountId,\n        pair.coinBInfo?.simpleName, tokenMap, ammCalcData])\n\n    // join\n\n    const [joinRequest, setJoinRequest] = useState<{ ammInfo: any, request: JoinAmmPoolRequest }>()\n\n    const handlerJoinInDebounce = React.useCallback(debounce(async (data, type, joinFees, ammPoolSnapshot) => {\n\n        if (!data || !tokenMap || !data.coinA.belong || !data.coinB.belong || !ammPoolSnapshot || !joinFees || !account?.accAddress) {\n            return\n        }\n\n        myLog('handlerJoinInDebounce', data, type);\n\n        const {slippage} = data\n\n        const slippageReal = sdk.toBig(slippage).div(100).toString()\n\n        const isAtoB = type === 'coinA'\n\n        const {idIndex, marketArray, marketMap,} = store.getState().tokenMap\n\n        const {ammMap} = store.getState().amm.ammMap\n\n        const {market, amm} = getExistedMarket(marketArray, data.coinA.belong as string,\n            data.coinB.belong as string)\n\n        if (!market || !amm || !marketMap) {\n            return\n        }\n\n        const marketInfo: MarketInfo = marketMap[ market ]\n\n        const ammInfo: any = ammMap[ amm as string ]\n\n        const coinA = tokenMap[ data.coinA.belong as string ]\n        const coinB = tokenMap[ data.coinB.belong as string ]\n\n        const coinA_TV = ammPoolSnapshot.pooled[ 0 ]\n        const coinB_TV = ammPoolSnapshot.pooled[ 1 ]\n\n        const covertVal = data.coinA.tradeValue ? sdk.toBig(data.coinA.tradeValue)\n            .times('1e' + isAtoB ? coinA.decimals : coinB.decimals).toFixed(0, 0) : '0'\n        const {output, ratio} = sdk.ammPoolCalc(covertVal, isAtoB, coinA_TV, coinB_TV)\n        const rawA = data.coinA.tradeValue ? data.coinA.tradeValue.toString() : 0;\n        const rawB = data.coinB.tradeValue ? data.coinB.tradeValue.toString() : 0;\n        const rawVal = isAtoB ? rawA : rawB;\n\n        const {request} = makeJoinAmmPoolRequest(rawVal,\n            isAtoB, slippageReal, account.accAddress, joinFees as LoopringMap<OffchainFeeInfo>,\n            ammMap[ amm ], ammPoolSnapshot, tokenMap as any, idIndex as IdMap, 0, 0)\n\n        if (isAtoB) {\n            data.coinB.tradeValue = parseFloat(toBig(request.joinTokens.pooled[ 1 ].volume)\n                .div('1e' + coinB.decimals).toFixed(marketInfo.precisionForPrice))\n        } else {\n            data.coinA.tradeValue = parseFloat(toBig(request.joinTokens.pooled[ 0 ].volume)\n                .div('1e' + coinA.decimals).toFixed(marketInfo.precisionForPrice))\n        }\n\n        setAmmJoinData({\n            coinA: data.coinA as IBData<C>,\n            coinB: data.coinB as IBData<C>,\n            slippage: slippage\n        })\n\n        setJoinRequest({\n            ammInfo,\n            request\n        })\n\n    }, globalSetup.wait), [account?.accAddress, tokenMap])\n\n    const handleJoinAmmPoolEvent = React.useCallback(async (data: AmmData<IBData<any>>, type: 'coinA' | 'coinB') => {\n        await handlerJoinInDebounce(data, type, joinFees, ammPoolSnapshot)\n    }, [joinFees, handlerJoinInDebounce, ammPoolSnapshot]);\n\n    const addToAmmCalculator = React.useCallback(async function (props\n    ) {\n\n        setJoinLoading(true)\n        if (!LoopringAPI.ammpoolAPI || !LoopringAPI.userAPI || !joinRequest) {\n            myLog(' onAmmJoin ammpoolAPI:', LoopringAPI.ammpoolAPI,\n                'joinRequest:', joinRequest)\n\n            setAmmAlertText(t('labelJoinAmmFailed'))\n            setAmmToastOpen(true)\n\n            setJoinLoading(false)\n            return\n        }\n\n        //todo add loading\n\n        // const acc: Lv2Account = store.getState().account\n\n        const {ammInfo, request} = joinRequest\n\n        const patch: AmmPoolRequestPatch = {\n            chainId: store.getState().system.chainId as ChainId,\n            ammName: ammInfo.__rawConfig__.name,\n            poolAddress: ammInfo.address,\n            eddsaKey: account.eddsaKey\n        }\n\n        try {\n\n            const request2: GetNextStorageIdRequest = {\n                accountId: account.accountId,\n                sellTokenId: request.joinTokens.pooled[ 0 ].tokenId as number\n            }\n            const storageId0 = await LoopringAPI.userAPI.getNextStorageId(request2, account.apiKey)\n\n            const request_1: GetNextStorageIdRequest = {\n                accountId: account.accountId,\n                sellTokenId: request.joinTokens.pooled[ 1 ].tokenId as number\n            }\n            const storageId1 = await LoopringAPI.userAPI.getNextStorageId(request_1, account.apiKey)\n\n            request.storageIds = [storageId0.offchainId, storageId1.offchainId]\n            setAmmJoinData({\n                ...ammJoinData, ...{\n                    coinA: {...ammJoinData.coinA, tradeValue: 0},\n                    coinB: {...ammJoinData.coinB, tradeValue: 0},\n                }\n            })\n            const response = await LoopringAPI.ammpoolAPI.joinAmmPool(request, patch, account.apiKey)\n\n            myLog('join ammpool response:', response)\n\n            await delayAndUpdateWalletLayer2()\n\n            setAmmAlertText(t('labelJoinAmmSuccess'))\n\n        } catch (reason) {\n\n            dumpError400(reason)\n\n            setAmmAlertText(t('labelJoinAmmFailed'))\n        } finally {\n            setAmmToastOpen(true)\n            setJoinLoading(false)\n        }\n        if (props.__cache__) {\n            makeCache(props.__cache__)\n        }\n    }, [joinRequest, ammJoinData, account, delayAndUpdateWalletLayer2, t])\n\n    const onAmmDepositClickMap: typeof btnClickMap = Object.assign(deepClone(btnClickMap), {\n        [ fnType.ACTIVATED ]: [addToAmmCalculator]\n    })\n    const onAmmAddClick = React.useCallback((props: AmmData<IBData<any>>) => {\n        accountStaticCallBack(onAmmDepositClickMap, [props])\n    }, [onAmmDepositClickMap]);\n\n    // exit\n    const [exitRequest, setExitRequest] = useState<{ rawVal: '', ammInfo: any, request: ExitAmmPoolRequest }>()\n\n    // const handler = React.useCallback(async () =>,[])\n    const handleExitInDebounce = React.useCallback(debounce(async (data, type, exitFees, ammPoolSnapshot) => {\n\n        if (!tokenMap || !data.coinA.belong || !data.coinB.belong || !ammPoolSnapshot || !exitFees || !account?.accAddress) {\n            return\n        }\n\n        myLog('handleExitInDebounce', data, type);\n\n        const isAtoB = type === 'coinA'\n\n        const {idIndex, marketArray, marketMap,} = store.getState().tokenMap\n\n        const {ammMap} = store.getState().amm.ammMap\n\n        const {market, amm} = getExistedMarket(marketArray, data.coinA.belong as string,\n            data.coinB.belong as string)\n\n        if (!market || !amm || !marketMap) {\n            return\n        }\n\n        const marketInfo: MarketInfo = marketMap[ market ]\n\n        const ammInfo: any = ammMap[ amm as string ]\n\n        const coinA = tokenMap[ data.coinA.belong as string ]\n        const coinB = tokenMap[ data.coinB.belong as string ]\n\n        const coinA_TV = ammPoolSnapshot.pooled[ 0 ]\n        const coinB_TV = ammPoolSnapshot.pooled[ 1 ]\n\n        const covertVal = data.coinA.tradeValue ? sdk.toBig(data.coinA.tradeValue)\n            .times('1e' + isAtoB ? coinA.decimals : coinB.decimals).toFixed(0, 0) : '0'\n        const {output, ratio} = sdk.ammPoolCalc(covertVal, isAtoB, coinA_TV, coinB_TV)\n\n        const rawVal = isAtoB ? data.coinA.tradeValue.toString() : data.coinB.tradeValue.toString()\n\n        const {request} = makeExitAmmPoolRequest(rawVal, isAtoB, '0.001', account.accAddress, exitFees as LoopringMap<OffchainFeeInfo>,\n            ammMap[ amm ], ammPoolSnapshot, tokenMap as any, idIndex as IdMap, 0)\n\n        if (isAtoB) {\n            data.coinB.tradeValue = parseFloat(toBig(request.exitTokens.unPooled[ 1 ].volume)\n                .div('1e' + coinB.decimals).toFixed(marketInfo.precisionForPrice))\n        } else {\n            data.coinA.tradeValue = parseFloat(toBig(request.exitTokens.unPooled[ 0 ].volume)\n                .div('1e' + coinA.decimals).toFixed(marketInfo.precisionForPrice))\n        }\n\n        setAmmExitData({\n            coinA: data.coinA as IBData<C>,\n            coinB: data.coinB as IBData<C>,\n            slippage: 0.5\n        })\n\n        setExitRequest({\n            rawVal,\n            ammInfo,\n            request,\n        })\n        // }\n\n    }, globalSetup.wait), [account?.accAddress, tokenMap])\n\n    const handleExitAmmPoolEvent = React.useCallback(async (data: AmmData<IBData<any>>, type: 'coinA' | 'coinB') => {\n        await handleExitInDebounce(data, type, exitFees, ammPoolSnapshot)\n    }, [exitFees, ammPoolSnapshot, handleExitInDebounce]);\n\n\n    const [isJoinLoading, setJoinLoading] = useState(false)\n\n    const [isExitLoading, setExitLoading] = useState(false)\n\n    const removeAmmCalculator = React.useCallback(async function (props\n    ) {\n        setExitLoading(true);\n        //TODO: onExit\n        myLog('removeAmmCalculator props:', props)\n\n        // const { exitRequest } = props\n\n        if (!LoopringAPI.ammpoolAPI || !LoopringAPI.userAPI || !exitRequest) {\n            myLog(' onExit ammpoolAPI:', LoopringAPI.ammpoolAPI,\n                'exitRequest:', exitRequest)\n\n            setAmmAlertText(t('labelExitAmmFailed'))\n            setAmmToastOpen(true)\n\n            setExitLoading(false);\n            return\n        }\n\n        // const acc: Lv2Account = store.getState().account\n\n        const {ammInfo, request} = exitRequest\n\n        const patch: AmmPoolRequestPatch = {\n            chainId: store.getState().system.chainId as ChainId,\n            ammName: ammInfo.__rawConfig__.name,\n            poolAddress: ammInfo.address,\n            eddsaKey: account.eddsaKey\n        }\n\n        const burnedReq: GetNextStorageIdRequest = {\n            accountId: account.accountId,\n            sellTokenId: request.exitTokens.burned.tokenId as number\n        }\n        const storageId0 = await LoopringAPI.userAPI.getNextStorageId(burnedReq, account.apiKey)\n\n        request.storageId = storageId0.offchainId\n\n        try {\n\n            myLog('exit req:', request)\n            setAmmExitData({\n                ...ammExitData, ...{\n                    coinA: {...ammExitData.coinA, tradeValue: 0},\n                    coinB: {...ammExitData.coinB, tradeValue: 0},\n                }\n            })\n            const response = await LoopringAPI.ammpoolAPI.exitAmmPool(request, patch, account.apiKey)\n\n            myLog('exit ammpool response:', response)\n\n            await delayAndUpdateWalletLayer2()\n\n            setAmmAlertText(t('labelExitAmmSuccess'))\n        } catch (reason) {\n            dumpError400(reason)\n            setAmmAlertText(t('labelExitAmmFailed'))\n        } finally {\n            setAmmToastOpen(true)\n            setExitLoading(false)\n        }\n\n        // if (props.__cache__) {\n        //     makeCache(props.__cache__)\n        // }\n\n    }, [exitRequest, ammExitData, delayAndUpdateWalletLayer2, account, t])\n\n    const removeAmmClickMap: typeof btnClickMap = Object.assign(deepClone(btnClickMap), {\n        [ fnType.ACTIVATED ]: [removeAmmCalculator]\n    })\n\n    const onAmmRemoveClick = React.useCallback((props: AmmData<IBData<any>>) => {\n\n        myLog('onAmmRemoveClick, exitRequest:', exitRequest, ' ammExitData:', ammExitData)\n        accountStaticCallBack(removeAmmClickMap, [props])\n    }, [exitRequest, ammExitData, removeAmmClickMap]);\n\n    useCustomDCEffect(() => {\n        if (snapShotData) {\n            initAmmData(pair)\n        }\n    }, [snapShotData, pair]);\n\n    return {\n        ammAlertText,\n        ammToastOpen,\n        setAmmToastOpen,\n\n        ammCalcData,\n        ammJoinData,\n        ammExitData,\n        isJoinLoading,\n        isExitLoading,\n        handleJoinAmmPoolEvent,\n        handleExitAmmPoolEvent,\n        onAmmRemoveClick,\n        onAmmAddClick,\n        ammDepositBtnI18nKey,\n        ammWithdrawBtnI18nKey,\n    }\n}","import React from \"react\";\nimport { AmmActivity, CoinInfo, MyAmmLP, SagaStatus, TradeFloat } from \"@loopring-web/common-resources\";\nimport { useTokenMap } from \"stores/token\";\nimport { useRouteMatch } from 'react-router';\nimport moment from 'moment'\nimport { AmmDetailStore, useAmmMap } from '../../../stores/Amm/AmmMap';\nimport { useWalletLayer2 } from '../../../stores/walletLayer2';\nimport { makeTickView, makeWalletLayer2, pairDetailBlock, WalletMapExtend } from '../../../hooks/help';\nimport { AmmPoolSnapshot, AmmUserRewardMap, getExistedMarket, TickerData, TradingInterval } from 'loopring-sdk';\nimport { deepClone } from '../../../utils/obj_tools';\nimport { getUserAmmTransaction, makeMyAmmMarketArray } from '../../../hooks/help/marketTable';\nimport { AmmRecordRow } from '@loopring-web/component-lib';\nimport { AmmPoolActivityRule, LoopringMap } from 'loopring-sdk/dist/defs/loopring_defs';\nimport { useSystem } from '../../../stores/system';\nimport { makeMyAmmWithSnapshot } from '../../../hooks/help/makeUIAmmActivityMap';\nimport { useUserRewards } from '../../../stores/userRewards';\nimport { LoopringAPI } from 'stores/apis/api';\n\nconst makeAmmDetailExtendsActivityMap = ({ammMap, coinMap, ammActivityMap, ammKey}: any) => {\n\n    if (ammMap && coinMap) {\n        let ammDetail = deepClone(ammMap[ ammKey as string ]);\n        const ammActivity = ammActivityMap [ ammKey as string ];\n\n        if (ammDetail && ammDetail.coinA) {\n            ammDetail.myCoinA = coinMap[ ammDetail.coinA ];\n            ammDetail.myCoinB = coinMap[ ammDetail.coinB ];\n            ammDetail[ 'activity' ] = ammActivity ? ammActivity : {};\n        }\n        return ammDetail;\n    }\n}\ntype PgAmmDetail<C extends { [ key: string ]: any }> = AmmDetailStore<C> & {\n    myCoinA: CoinInfo<C>,\n    myCoinB: CoinInfo<C>,\n    activity: AmmActivity<C> | undefined\n}\n\nexport type ammHistoryItem = {\n    close: number;\n    timeStamp: number;\n}\n\nexport const useCoinPair = <C extends { [ key: string ]: any }>(ammActivityMap: LoopringMap<LoopringMap<AmmPoolActivityRule[]>>) => {\n    const match: any = useRouteMatch(\"/liquidity/pools/coinPair/:symbol\")\n    const {coinMap, tokenMap, marketArray} = useTokenMap();\n    const {faitPrices} = useSystem();\n    const {ammMap, getAmmMap, status: ammMapStatus} = useAmmMap();\n    const {userRewardsMap, status: useUserRewardsStatus} = useUserRewards()\n\n    // const {account} = useAccount();\n\n\n    // const {ammMap, getAmmMap} = ammMapState;\n\n    // const {ammMap,updateAmmMap} = useAmmMap();\n    // const walletLayer2State = useWalletLayer2();\n    const {walletLayer2, status: walletLayer2Status} = useWalletLayer2();\n    const [walletMap, setWalletMap] = React.useState<WalletMapExtend<C> | undefined>(undefined);\n    // const [ammRecordArray, setAmmRecordArray] = React.useState<AmmRecordRow<C>[]>([]);\n    const [ammMarketArray, setAmmMarketArray] = React.useState<AmmRecordRow<C>[]>([]);\n\n\n    const [myAmmMarketArray, setMyAmmMarketArray] = React.useState<AmmRecordRow<C>[]>([]);\n    const [ammUserRewardMap, setAmmUserRewardMap] = React.useState<AmmUserRewardMap | undefined>(undefined);\n    const [snapShotData, setSnapShotData] = React.useState<{\n        tickerData: TickerData | undefined\n        ammPoolsBalance: AmmPoolSnapshot | undefined\n    } | undefined>(undefined);\n\n    const [myAmm, setMyAmm] = React.useState<MyAmmLP<C>>(\n        {\n            feeA: 0,\n            feeB: 0,\n            feeDollar: 0,\n            feeYuan: 0,\n            reward: 0,\n            rewardToken: undefined as any,\n            balanceA: 0,\n            balanceB: 0,\n            balanceYuan: 0,\n            balanceDollar: 0,\n        })\n    // const [ammPoolsBalance, setAmmpoolsbalance] = React.useState<AmmPoolSnapshot|undefined>(undefined);\n    const [coinPairInfo, setCoinPairInfo] = React.useState<PgAmmDetail<C>>({\n        myCoinA: undefined,\n        myCoinB: undefined,\n        activity: undefined,\n        totalRewards: undefined,\n        amountDollar: undefined,\n        amountYuan: undefined,\n        totalLPToken: undefined,\n        totalA: undefined,\n        totalB: undefined,\n        rewardToken: undefined,\n        rewardValue: undefined,\n        feeA: undefined,\n        feeB: undefined,\n        isNew: undefined,\n        isActivity: undefined,\n        APY: undefined\n    } as unknown as PgAmmDetail<C>);\n    const [tradeFloat, setTradeFloat] = React.useState<TradeFloat | undefined>(undefined);\n    const [pair, setPair] = React.useState<{ coinAInfo: CoinInfo<C> | undefined, coinBInfo: CoinInfo<C> | undefined }>({\n        coinAInfo: undefined,\n        coinBInfo: undefined,\n    });\n    const [pairHistory, setPairHistory] = React.useState<ammHistoryItem[]>([])\n\n    const walletLayer2DoIt = React.useCallback((market) => {\n        const {walletMap: _walletMap} = makeWalletLayer2();\n\n        setWalletMap(_walletMap as WalletMapExtend<any>)\n        if (_walletMap) {\n            getUserAmmTransaction()?.then((marketTrades) => {\n                let _myTradeArray = makeMyAmmMarketArray(market, marketTrades)\n                setMyAmmMarketArray(_myTradeArray ? _myTradeArray : [])\n            })\n        }\n        return _walletMap\n    }, [makeWalletLayer2, getUserAmmTransaction, makeMyAmmMarketArray, marketArray, pair])\n\n    const getPairList = React.useCallback(async () => {\n        if (LoopringAPI.exchangeAPI && coinPairInfo.coinA && coinPairInfo.coinB) {\n            const {myCoinA, myCoinB} = coinPairInfo\n            const market = `${myCoinA?.name}-${myCoinB?.name}`\n            const ammList = await LoopringAPI.exchangeAPI.getMixCandlestick({\n                market: market,\n                interval: TradingInterval.d1,\n                limit: 30\n            })\n            const formattedPairHistory = ammList.candlesticks.map(o => ({\n                ...o,\n                timeStamp: o.timestamp,\n                date: moment(o.timestamp).format('MMM DD')\n            })).sort((a, b) => a.timeStamp - b.timeStamp)\n            setPairHistory(formattedPairHistory)\n        }\n    }, [coinPairInfo])\n\n    React.useEffect(() => {\n        getPairList()\n    }, [getPairList])\n\n    React.useEffect(() => {\n        const coinKey = match?.params.symbol ?? undefined;\n        let _tradeFloat: Partial<TradeFloat> = {}\n        const [, coinA, coinB] = coinKey.match(/(\\w+)-(\\w+)/i)\n        let {\n            amm,\n            market\n        } = getExistedMarket(marketArray, coinA, coinB);\n\n        const _coinPairInfo = makeAmmDetailExtendsActivityMap({ammMap, coinMap, ammActivityMap, ammKey: amm})\n        setCoinPairInfo(_coinPairInfo ? _coinPairInfo : {})\n\n        if (coinMap) {\n            setPair({\n                coinAInfo: coinMap[ coinA ],\n                coinBInfo: coinMap[ coinB ]\n            })\n        }\n\n        // let _walletMap: WalletMapExtend<C>|undefined = undefined\n        if (walletLayer2) {\n            walletLayer2DoIt(market);\n        }\n\n        if (amm && market && ammMap) {\n            //TODO should add it into websocket\n            getAmmMap();\n            let apiList = [\n                pairDetailBlock({coinKey: market, ammKey: amm, ammMap}),\n                // LoopringAPI.ammpoolAPI.getAmmPoolSnapshot({poolAddress: ammMap[ ammKey ].address}),\n                // LoopringAPI.exchangeAPI.getMixTicker({market: coinKey})])\n            ];\n            // @ts-ignore\n            Promise.all([...apiList]).then(\n                ([{ammPoolsBalance, tickMap}\n                     //  ,ammUserRewardMap\n                 ]: any[]) => {\n                    if (tokenMap) {\n                        const _snapShotData = {\n                            tickerData: tickMap[ market ],\n                            ammPoolsBalance: ammPoolsBalance,\n                        }\n                        _tradeFloat = makeTickView(tickMap[ market ] ? tickMap[ market ] : {})\n                        setTradeFloat(_tradeFloat as TradeFloat);\n                        setCoinPairInfo({..._coinPairInfo})\n                        setSnapShotData(_snapShotData)\n\n                    }\n                }).catch((error) => {\n                console.log(error);\n                throw  Error\n            })\n        }\n\n    }, []);\n\n    React.useEffect(() => {\n        const {market} = getExistedMarket(marketArray, pair.coinAInfo?.simpleName as string, pair.coinBInfo?.simpleName as string);\n        if (market && snapShotData && snapShotData.ammPoolsBalance && walletLayer2Status === SagaStatus.UNSET) {\n            const _walletMap = walletLayer2DoIt(market);\n            const _myAmm: MyAmmLP<C> = makeMyAmmWithSnapshot(market, _walletMap, ammUserRewardMap, snapShotData);\n            setMyAmm(_myAmm)\n            // case \"DONE\":\n            //             walletLayer2State.statusUnset();\n\n            //         break;\n            //     default:\n            //         break;\n            //\n            // }\n        }\n    }, [walletLayer2Status])\n\n    React.useEffect(() => {\n        const {market} = getExistedMarket(marketArray, pair.coinAInfo?.simpleName as string, pair.coinBInfo?.simpleName as string);\n        if (useUserRewardsStatus === SagaStatus.UNSET && market) {\n            // const {userRewardsMap} = store.getState().userRewardsMap\n            setAmmUserRewardMap(userRewardsMap)\n            const _myAmm: MyAmmLP<C> = makeMyAmmWithSnapshot(market, walletMap, ammUserRewardMap, snapShotData);\n            setMyAmm(_myAmm);\n        }\n\n    }, [useUserRewardsStatus])\n\n    React.useEffect(() => {\n        if (ammMapStatus === SagaStatus.UNSET && ammMap && pair.coinAInfo?.simpleName && pair.coinBInfo?.simpleName) {\n            const _coinPairInfo = makeAmmDetailExtendsActivityMap(\n                {\n                    ammMap,\n                    coinMap,\n                    ammActivityMap,\n                    ammKey: 'AMM-' + pair.coinAInfo.simpleName + pair.coinBInfo.simpleName\n                })\n            setCoinPairInfo({\n                ...coinPairInfo, ..._coinPairInfo,\n                tradeFloat: coinPairInfo.tradeFloat\n            })\n\n        }\n    }, [ammMapStatus])\n\n\n    return {\n        walletMap,\n        myAmm,\n        // tickerData,\n        coinPairInfo,\n        snapShotData,\n        // ammPoolsBalance,\n        pair,\n        tradeFloat,\n        ammMarketArray,\n        myAmmMarketArray,\n        pairHistory,\n    }\n}","import React from 'react';\nimport { WithTranslation, withTranslation } from 'react-i18next';\nimport { AmmRecordTable, ChartType, ScaleAreaChart, TradeTitle, useSettings } from '@loopring-web/component-lib';\nimport {\n    AvatarCoinStyled,\n    Currency,\n    EmptyValueTag,\n    getThousandFormattedNumbers,\n    PriceTag,\n    unit\n} from '@loopring-web/common-resources';\nimport { Avatar, Box, Breadcrumbs, Grid, Link, Typography } from '@material-ui/core';\nimport { AmmPanelView } from '../AmmPanel';\nimport moment from 'moment';\nimport styled from '@emotion/styled/';\nimport Tabs from '@material-ui/core/Tabs';\nimport Tab from '@material-ui/core/Tab';\n\nimport { useCoinPair } from './hooks';\nimport { AmmPoolActivityRule, LoopringMap } from 'loopring-sdk/dist/defs/loopring_defs';\nimport { StylePaper } from 'pages/styled';\n\n\n//******************** page code ************************//\n//  ${({theme}) => theme.border.defaultFrame({c_key: 'blur'})};\nconst BoxStyled = styled(Box)`\n  flex: 1;\n  background-color: ${({theme}) => theme.colorBase.background().default};\n  border-radius: ${({theme}) => theme.unit}px;\n  padding: ${({theme}) => theme.unit * 2}px;\n  height: 120px;\n  // min-width: 160px;\n  max-width: 210px;\n  // & .MuiAvatar-root {\n    //     height: ${({theme}) => theme.fontDefault.h4};\n    //     width: ${({theme}) => theme.fontDefault.h4};\n  // }\n`;\n\nconst BoxTopStyled = styled(Box)`\n  background-color: ${({theme}) => theme.colorBase.background().default};\n  border-radius: ${({theme}) => theme.unit}px;\n  padding: ${({theme}) => theme.unit * 2}px;\n  width: var(--swap-box-width);\n  box-sizing: border-box;\n  //height: 120px;\n  //min-width: 160px;\n  // & .MuiAvatar-root {\n    //   height: ${({theme}) => theme.fontDefault.h4};\n    //   width: ${({theme}) => theme.fontDefault.h4};\n  // }\n`;\n// const StyleWrapper = styled(Box)`\n//   //position: relative;\n//   //width: 100%;\n//   background-color: ${({theme}) => theme.colorBase.background().default};\n//   border-radius: ${({theme}) => theme.unit}px;\n// ` as typeof Grid\n\n\nconst applyProps = (index: number) => {\n    return {\n        id: `simple-tab-${index}`,\n        'aria-controls': `tabpanel-${index}`,\n    }\n}\n\nexport const CoinPairPanel = withTranslation('common')(<R extends { [ key: string ]: any }, I extends { [ key: string ]: any }>\n({t, ammActivityMap, ...rest}:\n     WithTranslation & { ammActivityMap: LoopringMap<LoopringMap<AmmPoolActivityRule[]>> | undefined } & any) => {    //ActivityMap<I, I>\n    const {currency} = useSettings();\n    const {\n        tradeFloat,\n        snapShotData,\n        pair,\n        coinPairInfo,\n        walletMap,\n        ammMarketArray,\n        myAmmMarketArray,\n        myAmm,\n        pairHistory,\n    } = useCoinPair({ammActivityMap});\n    const [tabIndex, setTabIndex] = React.useState<0 | 1>(0);\n    const [page, setPage] = React.useState(rest?.page ? rest.page : 1);\n    const handleChange = (event: any, newValue: 0 | 1) => {\n        setTabIndex(newValue);\n        setPage(1);\n    }\n    const _handlePageChange = React.useCallback((page: number) => {\n        setPage(page);\n    }, [])\n    // const sellIconHasLoaded = useImage(coinPairInfo.myCoinA?.icon ? coinPairInfo.myCoinA?.icon : '').hasLoaded;\n    // const buyIconHasLoaded = useImage(coinPairInfo.myCoinB?.icon ? coinPairInfo.myCoinB?.icon : '').hasLoaded;\n    const {coinJson} = useSettings();\n    const coinAIcon: any = coinJson [ coinPairInfo.myCoinA?.simpleName ];\n    const coinBIcon: any = coinJson [ coinPairInfo.myCoinB?.simpleName ];\n\n    return <>\n\n        <Grid container>\n            <Grid item xs={7}>\n                <Breadcrumbs aria-label=\"breadcrumb\">\n                    <Link color=\"textSecondary\" href=\"/#/liquidity/pools\">\n                        {t('labelAmmList')}\n                    </Link>\n                    <Typography color={'textSecondary'} display={'flex'} alignItems={'center'}\n                                justifyContent={'center'}\n                    >{pair.coinAInfo?.simpleName}-{pair.coinBInfo?.simpleName}</Typography>\n                </Breadcrumbs>\n                <Grid item xs={12} marginTop={2}>\n                    <TradeTitle {...{\n                        ...rest, t,\n                        ...pair,\n                        tradeFloat,\n                        isNew: false\n                    }}></TradeTitle>\n                </Grid>\n            </Grid>\n            <Grid item xs={4} alignItems={'center'} justifyContent={'flex-end'} display={'flex'}>\n                {typeof coinPairInfo.isActivity === 'undefined'? '':\n                <BoxTopStyled paddingY={3} paddingX={1 / 2 * 5} display={'flex'}\n                              flexDirection={'column'}>\n                    <Box display={'flex'} flexDirection={'row'} justifyContent={'space-between'}>\n                        <Typography display={'flex'} flexDirection={'column'} component={'div'}>\n                            <Typography variant={'body2'} component={'h5'} color={'textSecondary'}>\n                                {t('labelReward')}\n                            </Typography>\n                            <Typography variant={'body1'} component={'span'} color={'textPrimary'}>\n                                {typeof coinPairInfo.isActivity === 'undefined' ? EmptyValueTag : <>\n                                    <Typography\n                                        component={'span'}>{coinPairInfo.activity ? getThousandFormattedNumbers(coinPairInfo.activity.totalRewards) : EmptyValueTag} </Typography>\n                                    <Typography\n                                        component={'span'}>{coinPairInfo.activity?.rewardToken?.simpleName}</Typography>\n                                </>}\n                            </Typography>\n                        </Typography>\n                        <Typography display={'flex'} flexDirection={'column'} alignItems={'flex-end'}\n                                    component={'div'}>\n                            <Typography variant={'body2'} component={'h5'} color={'textSecondary'}>\n                                {t('labelMyReward')}\n                            </Typography>\n                            <Typography variant={'body1'} component={'span'} color={'textPrimary'}>\n                                {/*{typeof coinPairInfo.isActivity === 'undefined' ? EmptyValueTag : <>*/}\n                                {typeof myAmm.reward === 'undefined' ? EmptyValueTag : <>\n\n                                    <Typography\n                                        component={'span'}> {getThousandFormattedNumbers(myAmm.reward)} </Typography>\n                                    <Typography\n                                        component={'span'}> {coinPairInfo.activity?.rewardToken?.simpleName}</Typography></>}\n\n                            </Typography>\n                        </Typography>\n                    </Box>\n                    <Typography alignSelf={'flex-start'} variant={'body2'} color={'textSecondary'}\n                                component=\"span\" marginTop={1}>\n                        {typeof coinPairInfo.isActivity === 'undefined' ? t('labelNoActiveEvent')\n                            : <>\n                                {t('labelDate')} : \n                                <> {' '+moment(coinPairInfo.activity?.duration.from).format('L') + ' - ' + moment(coinPairInfo.activity?.duration.to).format('L')}</>\n                            </>\n                        }\n                    </Typography>\n                </BoxTopStyled>\n                }\n            </Grid>\n            {/*<Grid item xs={4} alignItems={'center'} justifyContent={'flex-end'} display={'flex'}>*/}\n            {/*    <Link href=\"/#/liquidity/pools\" variant={'h5'}>*/}\n            {/*        {t('labelBack')}*/}\n            {/*    </Link>*/}\n            {/*</Grid>*/}\n        </Grid>\n        {/*<Grid container marginTop={3}>*/}\n        {/*   */}\n        {/*</Grid>*/}\n        <Box flex={1} display={'flex'} alignItems={'stretch'} flexDirection=\"row\" marginTop={3}>\n            <Box flex={1} display={'flex'} flexDirection={'column'} marginRight={3} justifyContent={'space-between'}>\n                <Box flex={1} width={'101%'}>\n                    <ScaleAreaChart\n                        type={ChartType.Trend} \n                        data={pairHistory} \n                        extraInfo={pair.coinBInfo?.simpleName}\n                        showXAxis\n                    />\n                </Box>\n                <Box display={'flex'} flexDirection={'row'} justifyContent={'space-between'}>\n                    <BoxStyled paddingX={2} display={'flex'} flexDirection={'column'}>\n                        <Typography component={'p'} color={'textSecondary'} display={'flex'} marginBottom={1 / 2 * 3}\n                        >\n                            {t('labelAmmTotalToken')}\n                        </Typography>\n                        <Typography component={'span'} display={'flex'} flexDirection={'row'}\n                                    justifyContent={'space-between'} alignItems={'center'}\n                                    style={{textTransform: 'capitalize'}} color={'textPrimary'}>\n                            <Box component={'span'} className={'logo-icon'} height={'var(--list-menu-coin-size)'}\n                                 width={'var(--list-menu-coin-size)'} alignItems={'center'} justifyContent={'center'}>\n                                {coinAIcon ?\n                                    <AvatarCoinStyled imgx={coinAIcon.x} imgy={coinAIcon.y}\n                                                      imgheight={coinAIcon.height}\n                                                      imgwidth={coinAIcon.width} size={24}\n                                                      variant=\"circular\"\n                                                      alt={coinPairInfo?.myCoinA?.simpleName as string}\n                                        // src={sellData?.icon}\n                                                      src={'data:image/svg+xml;utf8,' + '<svg width=\"36\" height=\"36\" viewBox=\"0 0 36 36\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\"><path d=\"M0 0H36V36H0V0Z\"/></svg>'}/>\n                                    : <Avatar variant=\"circular\" alt={coinPairInfo?.myCoinA?.simpleName as string}\n                                              style={{\n                                                  height: 'var(--list-menu-coin-size))',\n                                                  width: 'var(--list-menu-coin-size)'\n                                              }}\n                                        // src={sellData?.icon}\n                                              src={'static/images/icon-default.png'}/>\n                                }</Box>\n                            <Typography justifyContent={'center'} display={'flex'}>\n                                <Typography component={'span'} alignSelf={'right'} height={24} lineHeight={'24px'}>\n                                    {getThousandFormattedNumbers(coinPairInfo.totalA, 6)}</Typography>\n                                <Typography component={'span'} marginLeft={1} alignSelf={'right'} height={24} lineHeight={'24px'}>\n                                    {/*<HiddenHidden>{t('labelLPTotal')}</Hidden>*/}\n                                    {coinPairInfo.myCoinA?.simpleName}\n                                </Typography>\n\n                            </Typography>\n\n                        </Typography>\n                        <Typography component={'span'} display={'flex'} flexDirection={'row'}\n                                    justifyContent={'space-between'} alignItems={'center'} marginTop={1}\n                                    style={{textTransform: 'capitalize'}}>\n                            {/*<Typography component={'span'} marginRight={1 / 2}*/}\n                            {/*            color={'textSecondary'}>*/}\n                            {/*    */}\n                            {/*    /!*<Avatar variant=\"square\" sizes={'small'} alt={'coinLogo'}*!/*/}\n                            {/*    /!*    // src={coinBInfo?.icon}*!/*/}\n                            {/*    /!*        src={buyIconHasLoaded ? coinPairInfo?.myCoinB?.icon : 'static/images/icon-default.png'}/>*!/*/}\n                            {/*</Typography>*/}\n                            <Box component={'span'} className={'logo-icon'} height={'var(--list-menu-coin-size)'}\n                                 width={'var(--list-menu-coin-size)'} alignItems={'center'}\n                                 justifyContent={'center'}>{coinBIcon ?\n                                <AvatarCoinStyled imgx={coinBIcon.x} imgy={coinBIcon.y} imgheight={coinBIcon.height}\n                                                  imgwidth={coinBIcon.width} size={24}\n                                                  variant=\"circular\" alt={coinPairInfo?.myCoinB?.simpleName as string}\n                                    // src={sellData?.icon}\n                                                  src={'data:image/svg+xml;utf8,' + '<svg width=\"36\" height=\"36\" viewBox=\"0 0 36 36\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\"><path d=\"M0 0H36V36H0V0Z\"/></svg>'}/>\n                                : <Avatar variant=\"circular\" alt={coinPairInfo?.myCoinB?.simpleName as string} style={{\n                                    height: 'var(--list-menu-coin-size)',\n                                    width: 'var(--list-menu-coin-size)'\n                                }}\n                                    // src={sellData?.icon}\n                                          src={'static/images/icon-default.png'}/>}</Box>\n                            <Typography justifyContent={'center'} display={'flex'}>\n                                <Typography component={'span'} alignSelf={'right'} height={24} lineHeight={'24px'}>\n                                    {getThousandFormattedNumbers(coinPairInfo.totalB, 6)}</Typography>\n                                <Typography component={'span'} marginLeft={1} alignSelf={'right'} height={24} lineHeight={'24px'}>\n                                    {/*<Hidden>{t('labelLPTotal')}</Hidden>*/}\n                                    {coinPairInfo.myCoinB?.simpleName}\n                                </Typography>\n\n                            </Typography>\n\n                        </Typography>\n\n                    </BoxStyled>\n                    <BoxStyled paddingX={2} display={'flex'} flexDirection={'column'}>\n                        <Typography component={'p'} color={'textSecondary'} display={'flex'}\n                        >\n                            {t('label24Volume')}\n                        </Typography>\n                        <Typography variant={'h4'} marginTop={4}\n                                    component={'span'}>\n                            {currency === Currency.dollar ? PriceTag.Dollar + getThousandFormattedNumbers(tradeFloat && tradeFloat.priceDollar ? tradeFloat.priceDollar as number : 0, 2)\n                                : PriceTag.Yuan + getThousandFormattedNumbers(tradeFloat && tradeFloat.priceYuan ? tradeFloat.priceYuan as number : 0, 2)}\n                        </Typography>\n\n                    </BoxStyled>\n                    <BoxStyled paddingX={2} display={'flex'} flexDirection={'column'}>\n                        <Typography component={'p'} color={'textSecondary'} display={'flex'}\n                        >\n                            {t('labelTVL')}\n                        </Typography>\n\n                        <Typography variant={'h4'} marginTop={4}\n                                    component={'span'}> {typeof coinPairInfo.amountDollar === 'undefined' ? EmptyValueTag :\n                            currency === Currency.dollar ? PriceTag.Dollar + getThousandFormattedNumbers(coinPairInfo.amountDollar, 2) : PriceTag.Yuan + getThousandFormattedNumbers(coinPairInfo.amountYuan ? coinPairInfo.amountYuan : 0, 2)}\n                        </Typography>\n\n\n                    </BoxStyled>\n                    <BoxStyled paddingX={2} display={'flex'} flexDirection={'column'}>\n                        <Typography component={'p'} color={'textSecondary'} display={'flex'}\n                        >\n                            {t('labelAPY')}\n                        </Typography>\n                        <Typography variant={'h4'} marginTop={4}\n                                    component={'span'}> {coinPairInfo.APY ? coinPairInfo.APY : EmptyValueTag}%\n                        </Typography>\n                    </BoxStyled>\n                </Box>\n            </Box>\n            <Box display={'flex'}>\n                <AmmPanelView pair={pair} walletMap={walletMap} snapShotData={snapShotData}/>\n            </Box>\n        </Box>\n\n        <Grid container marginY={3}>\n            <Grid item xs={12}>\n                <Tabs value={tabIndex}\n                    //   onChange={handleChange}\n                      aria-label=\"tabs switch\">\n                    {/* <Tab label={t('labelAll')} {...applyProps(0)} /> */}\n                    <Tab label={t('labelMe')} {...applyProps(1)} />\n                </Tabs>\n                <StylePaper style={{marginTop: `${unit * 2}px`}}>\n                    {/*ammRecordArray*/}\n                    {tabIndex === 0 ? <AmmRecordTable\n                        rawData={ammMarketArray}\n                        handlePageChange={_handlePageChange} page={page}\n                    /> : <AmmRecordTable rawData={myAmmMarketArray} handlePageChange={_handlePageChange}\n                                         page={page}/>}\n                </StylePaper>\n            </Grid>\n\n        </Grid>\n\n    </>\n\n})\n\n\n\n\n\n\n\n","import { AmmCard, AmmProps, EmptyDefault } from '@loopring-web/component-lib';\nimport React from 'react';\nimport { useHistory } from 'react-router-dom';\nimport { AmmCardProps, AmmData, AmmInData, IBData } from '@loopring-web/common-resources';\nimport { Box, Grid } from '@material-ui/core';\nimport { useAmmMiningUI } from './hook';\nimport Tabs from '@material-ui/core/Tabs';\nimport Tab from '@material-ui/core/Tab';\nimport { Trans, withTranslation } from 'react-i18next';\nimport { AmmPoolActivityRule, LoopringMap } from 'loopring-sdk/dist/defs/loopring_defs';\n\ntype ClickHandler = {\n    handleClick: (pair: string) => void\n}\n\nconst AmmCardWrap = React.memo(React.forwardRef((props: AmmCardProps<{ [ key: string ]: any }> & ClickHandler, ref) => {\n    const pair = `${props.coinAInfo.name}-${props.coinBInfo.name}`\n    return props ? <AmmCard ref={ref} {...props} handleClick={() => props.handleClick(pair)}/> : <></>\n}));\n\nconst AmmList = <I extends { [ key: string ]: any }>({ammActivityViewMap}: { ammActivityViewMap: Array<AmmCardProps<I>> }) => {\n    let history = useHistory();\n    const jumpTo = React.useCallback((pair: string) => {\n        if (history) {\n            history.push(`/liquidity/pools/coinPair/${pair}`)\n        }\n    }, [history])\n\n    return <>{ammActivityViewMap.length ? ammActivityViewMap.map((item: AmmCardProps<I>, index) =>\n        <Grid item xs={12} sm={6} lg={4} key={index}>\n            <AmmCardWrap handleClick={jumpTo} {...item as any} />\n        </Grid>\n    ) : <Box flex={1} display={'flex'} alignItems={'center'} justifyContent={'center'} flexDirection={'column'}>\n        <EmptyDefault height={\"calc(100% - 35px)\"} marginTop={10} display={'flex'} flexWrap={'nowrap'} alignItems={'center'} justifyContent={'center'}\n                      flexDirection={'column'} message={() => {\n            return <Trans i18nKey=\"labelEmptyDefault\">\n                Content is Empty\n            </Trans>\n        }}/> </Box>}   </>\n}\n\nexport const AmmMiningView = withTranslation('common')(<T extends AmmData<C extends IBData<I> ? C : IBData<I>>, I,\n    ACD extends AmmInData<I>,\n    C = IBData<I>>({ammProps, t, ammActivityMap, ...rest}: {\n    ammProps: AmmProps<T, I, ACD>,\n    ammActivityMap: LoopringMap<LoopringMap<AmmPoolActivityRule[]>> | undefined,\n} & any) => {\n    const {\n        ammActivityViewMap,\n        ammActivityPastViewMap\n    } = useAmmMiningUI({ammActivityMap});\n    const [tabIndex, setTabIndex] = React.useState<0 | 1>(0);\n    const handleChange = (event: any, newValue: 0 | 1) => {\n        setTabIndex(newValue);\n    }\n\n    return <Grid container spacing={2}>\n        <Grid item xs={12}>\n            <Tabs value={tabIndex}\n                  onChange={handleChange}\n                  aria-label=\"tabs switch\">\n                <Tab label={t('labelCurrentActivities')}/>\n                <Tab label={t('labelPastActivities')}/>\n            </Tabs>\n        </Grid>\n        <AmmList ammActivityViewMap={tabIndex === 0 ? ammActivityViewMap : ammActivityPastViewMap}/>\n    </Grid>\n})\n","import { AmmCardProps } from '@loopring-web/common-resources';\nimport { AmmPoolActivityRule, AmmPoolActivityStatus,LoopringMap } from 'loopring-sdk';\nimport React from 'react';\nimport {\n    makeUIAmmActivityMap\n} from '../../../hooks/help';\n\nimport { useUserRewards } from '../../../stores/userRewards';\n\nexport const useAmmMiningUI = <R extends { [ key: string ]: any }, I extends { [ key: string ]: any }>(\n    {\n        ammActivityMap\n    }: { ammActivityMap: LoopringMap<LoopringMap<AmmPoolActivityRule[]>> | undefined }\n): {\n    ammActivityViewMap: Array<AmmCardProps<I>>,\n    ammActivityPastViewMap: Array<AmmCardProps<I>>\n} => {\n    const  userRewardsMapState =  useUserRewards();// store.getState().userRewardsMap\n    // const {coinMap} = useTokenMap();\n    // const ammMapState = useAmmMap();\n    // const walletLayer2State = useWalletLayer2();\n    const [ammActivityViewMap, setAmmActivityViewMap] = React.useState<Array<AmmCardProps<I>>>([]);\n\n\n    const [ammActivityPastViewMap, setAmmActivityPastViewMap] = React.useState<Array<AmmCardProps<I>>>(\n        []);\n    // const [ammUserRewardMap, setAmmUserRewardMap] = React.useState<AmmUserRewardMap>(\n    //     {});\n\n\n    // );\n    React.useEffect(() => {\n        if(ammActivityMap && Object.keys(ammActivityMap).length>0 ){\n\n           // getAmmPoolUserRewards().then((ammUserRewardMap)=>{\n                // setAmmUserRewardMap(ammUserRewardMap as AmmUserRewardMap);\n                setAmmActivityViewMap(makeUIAmmActivityMap(\n                    {\n                        ammActivityMap,\n                        type: 'AMM_MINING',\n                        ammPoolActivityStatus: [AmmPoolActivityStatus.NotStarted, AmmPoolActivityStatus.InProgress]\n                    }, userRewardsMapState.userRewardsMap\n                ));\n                setAmmActivityPastViewMap(\n                    makeUIAmmActivityMap(\n                        {\n                            ammActivityMap,\n                            type: 'AMM_MINING',\n                            ammPoolActivityStatus: [AmmPoolActivityStatus.EndOfGame]\n                        }, userRewardsMapState.userRewardsMap\n                    ))\n          //  })\n        }\n\n    },[ammActivityMap])\n    React.useEffect(() => {\n            if (userRewardsMapState.status === \"ERROR\") {\n                //TODO: solve error\n                userRewardsMapState.statusUnset();\n            } else if (userRewardsMapState.status === \"DONE\") {\n                userRewardsMapState.statusUnset();\n                setAmmActivityViewMap(\n                    makeUIAmmActivityMap(\n                    {\n                        ammActivityMap,\n                        type: 'AMM_MINING',\n                        ammPoolActivityStatus: [AmmPoolActivityStatus.NotStarted, AmmPoolActivityStatus.InProgress]\n                    }, userRewardsMapState.userRewardsMap\n                ));\n                setAmmActivityPastViewMap(\n                    makeUIAmmActivityMap(\n                        {\n                            ammActivityMap,\n                            type: 'AMM_MINING',\n                            ammPoolActivityStatus: [AmmPoolActivityStatus.EndOfGame]\n                        }, userRewardsMapState.userRewardsMap\n                    ))\n                // if (userRewardsMapState.ammMap) {\n                //     setAmmActivityViewMap(\n                //         makeUIAmmActivityMap(\n                //             {\n                //                 ammActivityMap,\n                //                 type: 'AMM_MINING',\n                //                 ammPoolActivityStatus: [AmmPoolActivityStatus.NotStarted, AmmPoolActivityStatus.InProgress]\n                //             }, ammUserRewardMap\n                //         ))\n                //     setAmmActivityPastViewMap(\n                //         makeUIAmmActivityMap(\n                //             {\n                //                 ammActivityMap,\n                //                 type: 'AMM_MINING',\n                //                 ammPoolActivityStatus: [AmmPoolActivityStatus.EndOfGame]\n                //             }, ammUserRewardMap\n                //         ))\n                //\n                // }\n\n            }\n        },\n        [userRewardsMapState.status]\n    )\n\n\n    return {\n        ammActivityViewMap,\n        ammActivityPastViewMap\n    }\n\n}\n","import { AmmPoolActivityRule, LoopringMap } from 'loopring-sdk';\nimport React from 'react';\nimport { AmmRecordRow, MyPoolRow } from '@loopring-web/component-lib';\nimport { makeWalletLayer2, WalletMapExtend } from '../../../hooks/help/makeWallet';\nimport {\n    getUserAmmTransaction,\n    makeMyAmmMarketArray,\n    makeMyPoolRowWithPoolState,\n    makeSummaryMyAmm,\n    SummaryMyAmm\n} from '../../../hooks/help';\nimport { useTokenMap } from '../../../stores/token';\nimport { useWalletLayer2 } from '../../../stores/walletLayer2';\nimport { useUserRewards } from '../../../stores/userRewards';\nimport { useAmmMap } from '../../../stores/Amm/AmmMap';\nimport { SagaStatus } from '@loopring-web/common-resources';\n\n\nexport const useOverview = <R extends { [ key: string ]: any }, I extends { [ key: string ]: any }>(\n    {\n        ammActivityMap\n    }: { ammActivityMap: LoopringMap<LoopringMap<AmmPoolActivityRule[]>> | undefined }\n): {\n    myAmmMarketArray: AmmRecordRow<R>[],\n    summaryReward: SummaryMyAmm | undefined,\n    myPoolRow: MyPoolRow<R>[]\n    // ammActivityViewMap: Array<AmmCardProps<I>>,\n    // ammActivityPastViewMap: Array<AmmCardProps<I>>\n} => {\n    const {walletLayer2, status: walletLayer2Status} = useWalletLayer2();\n    const userRewardsMapState = useUserRewards();\n    const {marketArray} = useTokenMap();\n    const ammMapState = useAmmMap();\n    const {ammMap} = ammMapState;\n\n    // const [walletMap, setWalletMap] = React.useState<WalletMapExtend<R> | undefined>(undefined);\n    const [summaryReward, setSummaryReward] = React.useState<SummaryMyAmm | undefined>(undefined);\n    const [myPoolRow, setMyPoolRow] = React.useState<MyPoolRow<R>[]>([])\n    const [myAmmMarketArray, setMyAmmMarketArray] = React.useState<AmmRecordRow<R>[]>([]);\n    // const [ammUserRewardMap, setAmmUserRewardMap] = React.useState<AmmUserRewardMap|undefined>(undefined);\n    // const [snapShotData,setSnapShotData] = React.useState<{\n    //     tickerData: TickerData|undefined\n    //     ammPoolsBalance: AmmPoolSnapshot|undefined\n    // }|undefined>(undefined);\n    const walletLayer2DoIt = React.useCallback(() => {\n        const {walletMap: _walletMap} = makeWalletLayer2();\n        // setWalletMap(_walletMap as WalletMapExtend<any>)\n        if (_walletMap) {\n            getUserAmmTransaction()?.then((marketTrades) => {\n                let _myTradeArray = makeMyAmmMarketArray(undefined, marketTrades)\n                setMyAmmMarketArray(_myTradeArray ? _myTradeArray : [])\n            })\n        }\n        return _walletMap\n    }, [makeWalletLayer2, getUserAmmTransaction, makeMyAmmMarketArray, marketArray])\n    const makeMyPoolRow = React.useCallback((_walletMap): MyPoolRow<R>[] => {\n        if (_walletMap && ammMap) {\n            // @ts-ignore\n            const _myPoolRow: MyPoolRow<R>[] = Reflect.ownKeys(_walletMap).reduce((prev: MyPoolRow<R>[], walletKey: string) => {\n                if (/LP-/i.test(walletKey)) {\n                    const ammKey = walletKey.replace('LP-', 'AMM-');\n                    const marketKey = walletKey.replace('LP-', '');\n                    let rowData: MyPoolRow<R> | undefined;\n                    //TODOwebsocket open\n                    //  if(ammPoolSnapShots)\n                    // makeData by snapshot else\n                    // else\n\n                    rowData = makeMyPoolRowWithPoolState(\n                        {\n                            ammDetail: ammMap[ ammKey ],\n                            walletMap: _walletMap,\n                            market: marketKey,\n                            ammUserRewardMap: userRewardsMapState.userRewardsMap\n                        }\n                    ) as any\n                    if (rowData !== undefined) {\n                        prev.push(rowData);\n                    }\n                }\n                return prev\n            }, [] as MyPoolRow<R>[])\n            // console.log('rowData',_myPoolRow);\n            return _myPoolRow;\n        }\n        return [];\n    }, [ammMap, userRewardsMapState.userRewardsMap])\n\n    // React.useEffect(() => {\n    //     if (walletLayer2) {\n    //         const _walletMap = walletLayer2DoIt();\n    //         if (ammMap) {\n    //             const _myPoolRow = makeMyPoolRow(_walletMap)\n    //             setMyPoolRow(_myPoolRow)\n    //         }\n    //     }\n    // }, []);\n    // const {walletLayer2, status: walletLayer2Status} = useWalletLayer2();\n\n    React.useEffect(() => {\n        //ammMapState.ammMap or\n        if (walletLayer2Status === SagaStatus.UNSET && ammMapState.ammMap) {\n            const _walletMap = walletLayer2DoIt();\n            // //TODO check AmmMap state or ammSnapshot sockets\n            // //userRewardsMapState is an option but  walletLayer2 amd ammMapState.ammMap is required\n            //     if () {\n            const _myPoolRow = makeMyPoolRow(_walletMap);\n            setMyPoolRow(_myPoolRow)\n            // }\n        }\n        // }\n    }, [walletLayer2Status])\n\n    React.useEffect(() => {\n        if (ammMapState.status === \"ERROR\") {\n            //TODO: solve error\n            ammMapState.statusUnset();\n        } else if (ammMapState.status === \"DONE\") {\n            ammMapState.statusUnset();\n            //TODO check AmmMap state or ammSnapshot sockets when websocket open  ammMapState done should not effect myPoolRow\n            if (walletLayer2) {\n                const _walletMap = walletLayer2DoIt();\n                //userRewardsMapState is an option and walletLayer2 is required\n                const _myPoolRow = makeMyPoolRow(_walletMap);\n                setMyPoolRow(_myPoolRow);\n            }\n        }\n    }, [ammMapState.status])\n\n    React.useEffect(() => {\n        if (userRewardsMapState.status === \"ERROR\") {\n            //TODO: solve error\n            userRewardsMapState.statusUnset();\n        } else if (userRewardsMapState.status === \"DONE\") {\n            userRewardsMapState.statusUnset();\n            // setAmmUserRewardMap()\n            const summaryReward = makeSummaryMyAmm({userRewardsMap: userRewardsMapState.userRewardsMap});\n            setSummaryReward(summaryReward);\n\n            //TODO check AmmMap state or ammSnapshot sockets\n            if (walletLayer2 && ammMapState.ammMap) {  //  ammMapState.ammMap or websocket\n                //userRewardsMapState is an option and walletLayer2 is required\n                const _myPoolRow = makeMyPoolRow(walletLayer2);\n                setMyPoolRow(_myPoolRow);\n            }\n\n        }\n    }, [userRewardsMapState.status])\n    return {\n        myAmmMarketArray,\n        summaryReward,\n        myPoolRow,\n        // ammActivityViewMap,\n        // ammActivityPastViewMap\n    }\n\n}\n","import React from 'react'\nimport styled from '@emotion/styled'\nimport { Box, Grid, Typography } from '@material-ui/core'\nimport { WithTranslation, withTranslation } from 'react-i18next'\nimport { useHistory } from 'react-router-dom'\nimport {\n    AmmRecordTable,\n    AmmTradeType,\n    ChartType,\n    ScaleAreaChart,\n    TablePaddingX,\n    ToggleButtonGroup,\n    useSettings ,\n    MyPoolTable\n} from '@loopring-web/component-lib'\nimport {\n    Currency, EmptyValueTag,\n    getThousandFormattedNumbers,\n    PriceTag\n} from '@loopring-web/common-resources';\n\nimport { AmmPoolActivityRule, LoopringMap } from 'loopring-sdk/dist/defs/loopring_defs';\nimport { useOverview } from './hook';\nimport { TableWrapStyled } from 'pages/styled'\n\n\n//TODO: FIXED:  demo data\n\n\nconst toggleData = [\n    {value: '24 H', key: '24 H'},\n    {value: '1 W', key: '1 W'},\n    {value: 'ALL', key: 'ALL'},\n]\n\nconst StylePaper = styled(Box)`\n  width: 100%;\n  height: 100%;\n  flex: 1;\n` as typeof Box;\n\nconst StyleWrapper = styled(Grid)`\n  position: relative;\n  width: 100%;\n  background-color: ${({theme}) => theme.colorBase.background().default};\n  border-radius: ${({theme}) => theme.unit}px;\n` as typeof Grid\n\n\n\nconst StyledBtnGroupWrapper = styled(Box)`\n  position: absolute;\n  z-index: 99;\n  top: ${({theme}) => theme.unit}px;\n  width: 100%;\n` as typeof Box\n\n\nexport const MyLiquidity = withTranslation('common')(\n    <R extends { [ key: string ]: any }, I extends { [ key: string ]: any }>\n    ({t, ammActivityMap, ...rest}:\n         WithTranslation &\n         { ammActivityMap: LoopringMap<LoopringMap<AmmPoolActivityRule[]>> | undefined }\n    ) => {\n        const [chartPeriod, setChartPeriod] = React.useState('ALL');\n        const [page, setPage] = React.useState(1);\n        const {currency} = useSettings();\n        const history = useHistory()\n\n        const JumpToLiqudity = React.useCallback((pair, type) => {\n            if (history) {\n                history.push(`/liquidity/pools/coinPair/${pair}?type=${type}`)\n            }\n        }, [history])\n\n        const _handlePageChange = React.useCallback((page: number) => {\n            setPage(page);\n        }, [])\n\n        const {myAmmMarketArray, summaryReward, myPoolRow} = useOverview({ammActivityMap});\n        return (\n            <>\n                <StyleWrapper container spacing={1} padding={3} margin={0}>\n                    <Grid display={'flex'} flexDirection={'column'} justifyContent={'space-around'} item sm={3}>\n                        <Typography variant={'body1'} component={'h5'}\n                                    color={'textSecondary'}>{t('labelTotalPositionValue')}</Typography>\n                        <Typography variant={'h4'} marginTop={1}>\n                            {summaryReward === undefined ? EmptyValueTag : currency === Currency.dollar ? PriceTag.Dollar\n                                + getThousandFormattedNumbers(summaryReward.rewardDollar !== undefined? summaryReward.rewardDollar : 0)\n                                + getThousandFormattedNumbers( summaryReward.feeDollar !== undefined?summaryReward.feeDollar : 0)\n                                : PriceTag.Yuan + getThousandFormattedNumbers(summaryReward.rewardYuan ? summaryReward.rewardYuan : 0)\n                                    +  getThousandFormattedNumbers(summaryReward.feeYuan ? summaryReward.feeYuan : 0)}\n                        </Typography>\n                    </Grid>\n                    <Grid display={'flex'} flexDirection={'column'} justifyContent={'space-around'} item sm={3}>\n                        <Typography variant={'body1'} component={'h5'}\n                                    color={'textSecondary'}>{t('labelFeeRewards')}</Typography>\n                        <Typography variant={'h4'} marginTop={1}>\n                            {summaryReward === undefined ? EmptyValueTag : currency === Currency.dollar ? PriceTag.Dollar\n                                + getThousandFormattedNumbers(summaryReward.feeDollar ? summaryReward.feeDollar : 0)\n                                : PriceTag.Yuan\n                                + getThousandFormattedNumbers(summaryReward.feeYuan ? summaryReward.feeYuan : 0)}\n                        </Typography>\n                    </Grid>\n                    <Grid display={'flex'} flexDirection={'column'} justifyContent={'space-around'} item sm={3}>\n                        <Typography variant={'body1'} component={'h5'}\n                                    color={'textSecondary'}>{t('labelMiningRewards')}</Typography>\n                        <Typography variant={'h4'} marginTop={1}>\n                            {summaryReward === undefined ? EmptyValueTag : currency === Currency.dollar ? PriceTag.Dollar\n                                + getThousandFormattedNumbers(summaryReward.rewardDollar ? summaryReward.rewardDollar : 0)\n                                : PriceTag.Yuan\n                                + getThousandFormattedNumbers(summaryReward.rewardYuan ? summaryReward.rewardYuan : 0)}\n                        </Typography>\n                    </Grid>\n                </StyleWrapper>\n                {/*<StyleWrapper container marginY={2} height={340}>*/}\n                {/*    <StyledBtnGroupWrapper display={'flex'} padding={3} justifyContent={'space-between'}>*/}\n                {/*        <Typography variant={'body1'} component={'h5'}*/}\n                {/*                    color={'textSecondary'}>{t('labelLiquidityValue')}</Typography>*/}\n                {/*        <Box marginRight={-1}>*/}\n                {/*            <ToggleButtonGroup exclusive size=\"small\" {...{*/}\n                {/*                ...rest,*/}\n                {/*                t,*/}\n                {/*                data: toggleData,*/}\n                {/*                value: chartPeriod,*/}\n                {/*                setValue: setChartPeriod*/}\n                {/*            }} />*/}\n                {/*        </Box>*/}\n                {/*    </StyledBtnGroupWrapper>*/}\n                {/*    <ScaleAreaChart type={ChartType.Trend} data={[]}/>*/}\n                {/*</StyleWrapper>*/}\n                <Typography paddingLeft={2} marginTop={2} variant={'h4'}>{t('labelMyAmm')}</Typography>\n                <TableWrapStyled container marginY={2} paddingBottom={2} flex={1} height={568}>\n                    <Grid item xs={12} display={'flex'} flexDirection={'column'}>\n                        <MyPoolTable\n                            rawData={myPoolRow}\n                            pagination={{pageSize: 5}}\n                            handleDeposit={(row: any) => {\n                                const pair = `${row.ammDetail.coinAInfo.name}-${row.ammDetail.coinBInfo.name}`\n                                JumpToLiqudity(pair, 'add')\n                            }}\n                            handleWithdraw={(row: any) => {\n                                const pair = `${row.ammDetail.coinAInfo.name}-${row.ammDetail.coinBInfo.name}`\n                                JumpToLiqudity(pair, 'remove')\n                            }}\n                            handlePageChange={() => {\n                            }}\n                        />\n                    </Grid>\n                </TableWrapStyled>\n                <Typography paddingLeft={2} variant={'h4'}>{t('labelMyAmmRecord')}</Typography>\n                <TableWrapStyled container marginTop={2}  paddingBottom={2} flex={1}>\n                    <Grid item xs={12} display={'flex'} flexDirection={'column'}>\n                        <AmmRecordTable rawData={myAmmMarketArray} handlePageChange={_handlePageChange} page={page}/>\n                    </Grid>\n                </TableWrapStyled>\n            </>\n        )\n    })","import { useRouteMatch } from 'react-router'\n\nimport { Box } from '@material-ui/core'\nimport {\n    SubMenu,\n    SubMenuList as BasicSubMenuList,\n} from '@loopring-web/component-lib'\nimport { withTranslation } from 'react-i18next'\nimport { subMenuLiquidity } from '@loopring-web/common-resources'\nimport { PoolsPanel } from './PoolsPanel'\nimport { CoinPairPanel } from './CoinPairPanel';\nimport { AmmMiningView } from './AmmMining';\nimport { MyLiquidity } from './MyLiquidity'\nimport { useAmmPool } from './hook';\n\nexport const subMenu = subMenuLiquidity\n\nconst SubMenuList = withTranslation(['layout','common'], { withRef: true })(BasicSubMenuList);\nexport const LiquidityPage = () => {\n\n    // const { ammFee } = useAmmPool('LRC', 'ETH')\n    //\n    // console.log('--- > ammFee:', ammFee)\n    //\n    const {ammActivityMap} = useAmmPool();\n    let match: any = useRouteMatch(['/liquidity/:item',':next/']);\n    const selected = match?.params.item ?? 'pools'\n    let matchPair: any = useRouteMatch(['/liquidity/:item/:next/:symbol']);\n    let symbol:any = undefined\n    if (matchPair && matchPair?.params?.next && matchPair.params.item === 'pools') {\n       if(!matchPair.params.symbol){\n           symbol='LRC-ETH';\n       }else{\n           symbol=matchPair.params.symbol;\n       }\n    }\n    \n    return (\n        <>\n            { symbol && <Box display={'flex'} flexDirection={'column'}  flex={1} alignSelf={'flex-start'}>\n              <CoinPairPanel ammActivityMap={ammActivityMap}/>\n            </Box>\n            }\n            {!symbol && <>  <Box width={'200px'} display={'flex'} justifyContent={'stretch'} marginRight={3} marginBottom={3}>\n                    <SubMenu>\n                        <SubMenuList selected={selected} subMenu={subMenu as any} />\n                    </SubMenu>\n                </Box>\n                <Box  minHeight={420}  display={'flex'} alignItems={'stretch'} justifyContent={'stretch'} flexDirection=\"column\" marginTop={0} flex={1} marginBottom={3}>\n                    {(selected === 'pools' && !symbol ) && <PoolsPanel ammActivityMap={ammActivityMap}/>}\n                    {(selected === 'amm-mining' && !symbol ) && <AmmMiningView ammActivityMap={ammActivityMap}/>}\n                    {(selected === 'my-liquidity' && !symbol ) && <MyLiquidity ammActivityMap={ammActivityMap}/>}\n                    {selected === 'orderBook-Mining' && <AmmMiningView ammActivityMap={ammActivityMap}/>}\n                    {/*{selected === 'orders' && <OrderPanel />}*/}\n                </Box>\n             </>\n            }\n        </>\n    )\n\n}\n","import React from 'react';\nimport { useAmmActivityMap } from '../../stores/Amm/AmmActivityMap';\n\nimport { AmmPoolActivityRule, LoopringMap } from 'loopring-sdk';\nimport { useAccount } from '../../stores/account/hook';\nimport { useUserRewards } from '../../stores/userRewards';\nimport { useAmmMap } from '../../stores/Amm/AmmMap';\nimport { SagaStatus } from '@loopring-web/common-resources';\n\nexport const useAmmPool = <R extends {[key:string]:any},I extends {[key:string]:any}>()=>{\n    const {ammActivityMap,status:ammActivityMapStatus}  = useAmmActivityMap()\n    const {account,status:accountStatus} = useAccount();\n    const {ammMap,getAmmMap} = useAmmMap();\n    const [_ammActivityMap,setAmmActivityMap] = React.useState<LoopringMap<LoopringMap<AmmPoolActivityRule[]>>|undefined>(ammActivityMap)\n    // init AmmMap at begin\n    React.useEffect(() => {\n        if (!ammMap || Object.keys(ammMap).length === 0) {\n            getAmmMap();\n        }\n    }, []);\n\n    React.useEffect(() => {\n        if(ammActivityMapStatus === SagaStatus.UNSET){\n            setAmmActivityMap(ammActivityMap)\n        }\n    }, [ammActivityMapStatus])\n    // React.useEffect(() => {\n    //     if(accountStatus === SagaStatus.UNSET){\n    //\n    //     }\n    // }, [accountStatus])\n\n    return {\n        ammActivityMap:_ammActivityMap\n    }\n\n}\n\n","import { WithTranslation, withTranslation } from 'react-i18next';\nimport {\n    FailedConnect,\n    MetaMaskProcess,\n    ModalWalletConnect,\n    ProviderMenu,\n    SuccessConnect,\n    Toast,\n    useOpenModals,\n    WalletConnectProcess,\n    WalletConnectQRCode,\n    WalletConnectStep\n} from '@loopring-web/component-lib';\nimport { ChainId } from 'loopring-sdk'\nimport React, { useEffect, useState } from 'react';\nimport {\n    ConnectProviders,\n    GatewayItem,\n    gatewayList as DefaultGatewayList,\n    SagaStatus\n} from '@loopring-web/common-resources';\nimport { useAccount } from 'stores/account';\nimport { connectProvides, ProcessingType, useConnectHook, walletServices } from '@loopring-web/web3-provider';\nimport { useSystem } from 'stores/system';\nimport { myLog } from '../../utils/log_tools';\nimport { copyToClipBoard } from '../../utils/obj_tools';\nimport { TOAST_TIME } from '../../defs/common_defs';\n\nexport const ModalWalletConnectPanel = withTranslation('common')(({\n                                                                      onClose,\n                                                                      open,\n                                                                      // step,\n                                                                      t,\n                                                                      ...rest\n                                                                  }: {\n    // step?:number,\n    open: boolean, onClose: (e: any) => void\n} & WithTranslation) => {\n    // const [_step, setStep] = React.useState<number>(step === undefined? WalletConnectStep.Provider: step);\n    const {\n        account,\n        updateAccount,\n        setShouldShow,\n        resetAccount,\n        statusUnset: statusAccountUnset,\n        status: accountStatus\n    } = useAccount();\n    const {updateSystem, chainId: _chainId, exchangeInfo} = useSystem();\n    const {modals: {isShowConnect}, setShowConnect, setShowAccount} = useOpenModals();\n    const [qrCodeUrl, setQrCodeUrl] = React.useState<string>('');\n    const [stateCheck, setStateCheck] = React.useState<boolean>(false);\n    const metaMaskCallback = React.useCallback(async () => {\n        await connectProvides.MetaMask();\n        updateAccount({connectName: ConnectProviders.MetaMask});\n        // statusAccountUnset();\n        if (connectProvides.usedProvide) {\n            const chainId = Number(await connectProvides.usedWeb3?.eth.getChainId());\n            updateSystem({chainId: (chainId && chainId === ChainId.GORLI ? chainId as ChainId : ChainId.MAINNET)})\n            return\n        }\n    }, []);\n    const walletConnectCallback = React.useCallback(async () => {\n        await connectProvides.WalletConnect();\n        updateAccount({connectName: ConnectProviders.WalletConnect});\n        // statusAccountUnset();\n        if (connectProvides.usedProvide) {\n            const chainId = Number(await connectProvides.usedWeb3?.eth.getChainId());\n            updateSystem({chainId: (chainId && chainId === ChainId.GORLI ? chainId as ChainId : ChainId.MAINNET)})\n            return\n        }\n    }, []);\n\n    const [processingCallback, setProcessingCallback] = React.useState<{ callback: () => Promise<void> } | undefined>(undefined)\n    useEffect(() => {\n        if (stateCheck === true && [SagaStatus.UNSET].findIndex((ele: string) => ele === accountStatus) !== -1) {\n            myLog('clear cache connect done')\n            setStateCheck(false)\n            if (processingCallback !== undefined) {\n                processingCallback.callback()\n            }\n        }\n\n    }, [accountStatus, stateCheck])\n\n    const gatewayList: GatewayItem[] = [\n        {\n            ...DefaultGatewayList[ 0 ],\n            handleSelect: React.useCallback(async () => {\n                if (account.connectName === DefaultGatewayList[ 0 ].key) {\n                    setShowConnect({isShow: false});\n                } else {\n                    walletServices.sendDisconnect('', 'should new provider')\n                    setShowConnect({isShow: true, step: WalletConnectStep.MetaMaskProcessing});\n                    setProcessingCallback({callback: metaMaskCallback});\n                    setStateCheck(true)\n                }\n\n            }, [account])\n        },\n        {\n            ...DefaultGatewayList[ 1 ],\n            handleSelect: React.useCallback(async () => {\n                walletServices.sendDisconnect('', 'should new provider')\n                setShowConnect({isShow: true, step: WalletConnectStep.WalletConnectProcessing});\n                setProcessingCallback({callback: walletConnectCallback});\n                setStateCheck(true)\n            }, [account])\n        },\n\n    ]\n\n    const handleProcessing = React.useCallback(({type, opts}: { type: keyof typeof ProcessingType, opts: any }) => {\n        const {qrCodeUrl} = opts;\n        if (qrCodeUrl) {\n            setQrCodeUrl(qrCodeUrl)\n            setShowConnect({isShow: true, step: WalletConnectStep.WalletConnectQRCode});\n        }\n    }, []);\n    const [copyToastOpen, setCopyToastOpen] = useState(false);\n    useConnectHook({handleProcessing});\n    // const onCopy = React.useCallback(() => {\n    //\n    //     setCopyToastOpen(true)\n    // }, [account])\n    const walletList = React.useMemo(() => {\n        return Object.values({\n            [ WalletConnectStep.Provider ]: <ProviderMenu gatewayList={gatewayList}\n                                                          providerName={account.connectName} {...{t, ...rest}}/>,\n            [ WalletConnectStep.MetaMaskProcessing ]: <MetaMaskProcess {...{t, ...rest}}/>,\n            [ WalletConnectStep.WalletConnectProcessing ]: <WalletConnectProcess {...{t, ...rest}}/>,\n            [ WalletConnectStep.WalletConnectQRCode ]: <WalletConnectQRCode onCopy={() => {\n                copyToClipBoard(qrCodeUrl);\n                setCopyToastOpen(true);\n            }} url={qrCodeUrl} {...{t, ...rest}}/>,\n            [ WalletConnectStep.SuccessConnect ]: <SuccessConnect  onClose={(e) => {\n                setShouldShow(false);\n                onClose(e);}}\n                providerName={account.connectName} {...{t, ...rest}}/>,\n            [ WalletConnectStep.FailedConnect ]: <FailedConnect{...{t, ...rest}} onRetry={resetAccount}/>,\n        })\n    }, [qrCodeUrl, account])\n    return <>\n        <ModalWalletConnect open={isShowConnect.isShow} onClose={(e) => {\n            setShouldShow(false);\n            onClose(e);\n        }} panelList={walletList} step={isShowConnect.step}/>\n        <Toast alertText={t('Address Copied to Clipboard!')} open={copyToastOpen}\n               autoHideDuration={TOAST_TIME} setOpen={setCopyToastOpen} severity={\"success\"}/>\n    </>\n})\n\n\n","import { updateAccountStatus } from '../../stores/account';\nimport { AccountStep, setShowAccount, setShowConnect } from '@loopring-web/component-lib';\nimport store from '../../stores';\nimport { AccountStatus } from '@loopring-web/common-resources';\nimport { myLog } from 'utils/log_tools';\nimport { LoopringAPI } from 'stores/apis/api';\nimport { connectProvides } from '@loopring-web/web3-provider';\nimport * as sdk from 'loopring-sdk'\nimport { ActionResult, ActionResultCode, REFRESH_RATE } from 'defs/common_defs';\n\nexport async function activeAccount({ reason, shouldShow }: { reason: any, shouldShow: boolean }) {\n    const account = store.getState().account;\n    // const {exchangeInfo} = store.getState().system;\n    if (reason?.response?.data?.resultInfo?.code === 100001) {\n        // deposited, but need update account\n        console.log('SignAccount')\n        store.dispatch(setShowConnect({ isShow: false }));\n        store.dispatch(setShowAccount({ isShow: true, step: AccountStep.SignAccount }));\n        store.dispatch(updateAccountStatus({ readyState: AccountStatus.DEPOSITING }));\n\n    } else {\n        // need to deposit.\n        let activeDeposit = localStorage.getItem('activeDeposit');\n        if (activeDeposit) {\n            activeDeposit = JSON.stringify(activeDeposit);\n        }\n        if (activeDeposit && activeDeposit[account.accAddress]) {\n            console.log('DEPOSITING')\n            store.dispatch(setShowConnect({ isShow: false }));\n            store.dispatch(setShowAccount({ isShow: shouldShow, step: AccountStep.Depositing }));\n            store.dispatch(updateAccountStatus({ readyState: AccountStatus.DEPOSITING }));\n            // store.dispatch(statusAccountUnset(undefined))\n        } else {\n            console.log('NO_ACCOUNT')\n            setShowConnect({ isShow: false });\n            setShowAccount({ isShow: shouldShow, step: AccountStep.NoAccount });\n            store.dispatch(updateAccountStatus({ readyState: AccountStatus.NO_ACCOUNT }));\n            // store.dispatch(statusAccountUnset(undefined));\n        }\n    }\n}\n\nexport async function updateAccountFromServer() {\n\n    const system = store.getState().system\n    const account = store.getState().account\n\n    myLog('before check!', account)\n\n    let result: ActionResult = { code: ActionResultCode.NoError, }\n\n    try {\n\n        if (LoopringAPI.userAPI && LoopringAPI.exchangeAPI && system.exchangeInfo && connectProvides.usedWeb3 && account\n            && system.chainId !== 'unknown' && account.connectName !== 'unknown') {\n            const feeMap = {\n                'ETH': '529000000000000',\n                'LRC': '34000000000000000000',\n                'USDT': '7850000',\n                'DAI': '98100000000000000000',\n            }\n\n            const { accInfo } = (await LoopringAPI.exchangeAPI.getAccount({\n                owner: account.accAddress\n            }))\n\n            if (accInfo?.owner && accInfo?.accountId) {\n\n                const connectName = account.connectName as sdk.ConnectorNames\n\n                try {\n                    const eddsaKey = await sdk\n                        .generateKeyPair(\n                            connectProvides.usedWeb3,\n                            accInfo.owner,\n                            system.exchangeInfo.exchangeAddress,\n                            accInfo.keyNonce as number,\n                            connectName,\n                        )\n\n                    try {\n                        const request: sdk.UpdateAccountRequestV3 = {\n                            exchange: system.exchangeInfo.exchangeAddress,\n                            owner: accInfo.owner,\n                            accountId: accInfo.accountId,\n                            publicKey: { x: eddsaKey.formatedPx, y: eddsaKey.formatedPy },\n                            maxFee: { tokenId: 0, volume: feeMap['ETH'] },\n                            validUntil: sdk.VALID_UNTIL,\n                            nonce: accInfo.nonce as number,\n                        }\n\n                        myLog('req:', request)\n\n                        const updateAccountResponse = await LoopringAPI.userAPI.updateAccount(request,\n                            connectProvides.usedWeb3, system.chainId, connectName)\n\n                        await sdk.sleep(REFRESH_RATE)\n\n                        result.data = updateAccountResponse\n\n                    } catch (reason) {\n                        result.code = ActionResultCode.UpdateAccoutError\n                        result.data = reason\n                    }\n\n                } catch (reason) {\n                    result.code = ActionResultCode.GenEddsaKeyError\n                    result.data = reason\n                }\n            }\n        }\n    } catch (reason) {\n        result.code = ActionResultCode.GetAccError\n        result.data = reason\n    }\n\n    return result\n}","import { Account, AccountStatus } from '@loopring-web/common-resources';\nimport { Subject } from 'rxjs';\nimport { Commands } from './command';\nimport { LoopringAPI } from '../../stores/apis/api';\nimport { myLog } from '../../utils/log_tools';\nimport store from 'stores';\nimport { updateAccountStatus } from 'stores/account';\nimport * as sdk from 'loopring-sdk'\nimport { connectProvides } from '@loopring-web/web3-provider';\nimport { ConnectorNames } from 'loopring-sdk';\n\nconst subject = new Subject<{ status: keyof typeof Commands, data: any, }>();\n\nexport const walletLayer2Services = {\n    //INFO: for update Account and unlock account\n    sendSign: async  () => {\n        // const account = store.getState().account;\n        // const {exchangeInfo} = store.getState().system;\n        subject.next({\n            status: Commands.ProcessSign,\n            data: undefined,\n        })\n        // if (exchangeInfo && LoopringAPI.userAPI && account.nonce !== undefined) {\n        //     const eddsaKey = await generateKeyPair(\n        //         connectProvides.usedWeb3,\n        //         account.accAddress,\n        //         exchangeInfo.exchangeAddress,\n        //         account.nonce - 1,\n        //         account.connectName as any,\n        //     )\n        //     const sk = toHex(toBig(eddsaKey.keyPair.secretKey))\n        //     const {apiKey} = (await LoopringAPI.userAPI.getUserApiKey({\n        //         accountId: account.accountId\n        //     }, sk))\n        //\n        //     walletLayer2Services.sendAccountSigned(apiKey, eddsaKey)\n        //\n        // }\n    },\n    sendErrorUnlock:() => {\n        subject.next({\n            status: Commands.ErrorSign,\n            data: undefined,\n        })\n    },\n\n    sendUpdateAccStatusAndReset: (readyState: AccountStatus, accountId: number = -1) => {\n        store.dispatch(updateAccountStatus({\n            accountId,\n            readyState,\n            apiKey: '',\n            eddsaKey: '',\n            publicKey: '',\n            nonce:undefined,\n        }))\n\n        if(readyState === AccountStatus.ERROR_NETWORK){\n            subject.next({\n                status: Commands.ErrorNetwork,\n                data: undefined,\n            })\n        }else{\n            const {accAddress} =store.getState().account\n            walletLayer2Services.sendCheckAccount(accAddress);\n        }\n\n    },\n\n    //INFO: for lock account todo clear the private info, user click or provider on wrong network\n    sendAccountLock: (accInfo?: sdk.AccountInfo) => {\n        const updateInfo = accInfo ? {\n            readyState:AccountStatus.LOCKED,\n            accountId: accInfo.accountId,\n            nonce: accInfo.nonce,\n            level: accInfo.tags,\n        }:{readyState:AccountStatus.LOCKED,\n            apiKey: '',\n            eddsaKey: '',\n            publicKey: '',\n            nonce: undefined,}\n        store.dispatch(updateAccountStatus(updateInfo))\n        subject.next({\n            status: Commands.LockAccount,\n            data: undefined,\n        })\n    },\n    sendActiveAccountDeposit: () => {\n\n    },\n    sendAccountSigned: (apiKey?:any,eddsaKey?:any) => {\n        const updateInfo = apiKey && eddsaKey ?{\n            apiKey,\n            eddsaKey,\n            publicKey: {\n                x: sdk.toHex(sdk.toBig(eddsaKey.keyPair.publicKeyX)),\n                y: sdk.toHex(sdk.toBig(eddsaKey.keyPair.publicKeyY)),\n            },\n            readyState: AccountStatus.ACTIVATED\n        }:{readyState:AccountStatus.ACTIVATED}\n        store.dispatch(updateAccountStatus(updateInfo));\n        subject.next({\n            status: Commands.AccountUnlocked,\n            data: undefined\n        })\n    },\n    sendNoAccount: () => {\n        store.dispatch(updateAccountStatus({readyState:AccountStatus.NO_ACCOUNT, }))\n        subject.next({\n            status: Commands.NoAccount,\n            data: undefined\n        })\n    },\n    sendNeedUpdateAccount: async(accInfo: sdk.AccountInfo) => {\n        myLog('sendNeedUpdateAccount accInfo:', accInfo)\n        store.dispatch(updateAccountStatus({readyState:AccountStatus.DEPOSITING, }))\n        subject.next({\n            status: Commands.ProcessDeposit,\n            data: accInfo\n        })\n    },\n    sendCheckAccount: async (ethAddress: string) => {\n        const self = this;\n        myLog('After connect >>,checkAccount: step3 processAccountCheck',ethAddress )\n        store.dispatch(updateAccountStatus({accAddress: ethAddress,readyState:AccountStatus.UN_CONNECT}))\n        subject.next({\n            status: Commands.ProcessAccountCheck,\n            data: undefined\n        })\n        if (LoopringAPI.exchangeAPI) {\n            const {accInfo} = (await LoopringAPI.exchangeAPI.getAccount({\n                owner: ethAddress\n            }))\n            myLog('After connect >>,checkAccount: step3',accInfo)\n\n            //TODO code is notaccount\n            if (accInfo === undefined) {\n                walletLayer2Services.sendNoAccount()\n                // subject.next({\n                //     status: Commands.NoAccount,\n                //     data:undefined\n                // })\n            } else {\n                if (accInfo.accountId) {\n                    if (!accInfo.publicKey.x || !accInfo.publicKey.y) {\n                        myLog('-------need update account!')\n                        walletLayer2Services.sendNeedUpdateAccount(accInfo)\n                    } else {\n                        walletLayer2Services.sendAccountLock(accInfo)\n                    }\n                } else {\n                    myLog('unexpected accInfo:', accInfo)\n                    throw Error('unexpected accinfo:' + accInfo)\n                }\n            }\n        }\n\n        // try {\n        //\n        //\n        //     if (accInfo && accInfo.accountId) {\n        //         await unlockAccount({accInfo, shouldShow: shouldShow ?? false})\n        //     }\n        //     statusAccountUnset();\n        // } catch (reason) {\n        //     dumpError400(reason)\n        //     await activeAccount({reason, shouldShow: shouldShow ?? false});\n        //     statusAccountUnset();\n        // }\n\n\n    },\n\n    onSocket: () => subject.asObservable()\n    // clearMessages: () => subject.next(),\n    // onSocket: () => subject.asObservable()\n};","import { AccountStatus } from '@loopring-web/common-resources';\nimport { walletLayer2Services } from './walletLayer2Services';\nimport { Commands } from './command';\n\nexport function lockAccount() {\n    walletLayer2Services.sendAccountLock()\n}\n\nexport function goErrorNetWork(){\n    walletLayer2Services.sendUpdateAccStatusAndReset(AccountStatus.ERROR_NETWORK)\n\n}\n\nexport function cleanLayer2() {\n    walletLayer2Services.sendUpdateAccStatusAndReset(AccountStatus.UN_CONNECT)\n}\n","import { generateKeyPair, sleep, toBig, toHex } from 'loopring-sdk';\nimport { connectProvides } from '@loopring-web/web3-provider';\nimport { LoopringAPI } from '../../stores/apis/api';\nimport store from '../../stores';\nimport { walletLayer2Services } from './walletLayer2Services';\nimport { myLog } from '../../utils/log_tools';\n\nexport async function unlockAccount() {\n    const account = store.getState().account;\n    const {exchangeInfo} = store.getState().system;\n    walletLayer2Services.sendSign()\n    if (exchangeInfo && LoopringAPI.userAPI && account.nonce !== undefined) {\n        try{\n            const eddsaKey = await generateKeyPair(\n                connectProvides.usedWeb3,\n                account.accAddress,\n                exchangeInfo.exchangeAddress,\n                account.nonce - 1,\n                account.connectName as any,\n            )\n            const sk = toHex(toBig(eddsaKey.keyPair.secretKey))\n            const {apiKey} = (await LoopringAPI.userAPI.getUserApiKey({\n                accountId: account.accountId\n            }, sk))\n            myLog('After connect >>,unlockAccount: step2 apiKey',apiKey)\n\n            walletLayer2Services.sendAccountSigned(apiKey, eddsaKey)\n        }catch (e){\n            walletLayer2Services.sendErrorUnlock()\n\n        }\n\n\n\n    }\n}","import React, { useCallback } from 'react';\n\nimport { AccountStep, DepositProps, SwitchData, TradeBtnStatus, useOpenModals } from '@loopring-web/component-lib';\nimport { AccountStatus, CoinMap, ConnectProviders, IBData, WalletMap } from '@loopring-web/common-resources';\nimport * as sdk from 'loopring-sdk';\nimport { useTokenMap } from '../stores/token';\nimport { useAccount } from '../stores/account';\nimport { useSystem } from '../stores/system';\nimport { connectProvides } from '@loopring-web/web3-provider';\nimport { LoopringAPI } from 'stores/apis/api';\nimport { dumpError400, GetAllowancesRequest } from 'loopring-sdk';\nimport { myLog } from 'utils/log_tools';\nimport { useWalletLayer1 } from '../stores/walletLayer1';\nimport { useTranslation } from 'react-i18next';\nimport { ActionResult, ActionResultCode } from 'defs/common_defs';\n\nexport const useDeposit = <R extends IBData<T>, T>(isNewAccount: boolean = false): {\n    depositProps: DepositProps<R, T>\n} => {\n    const {tokenMap, coinMap} = useTokenMap()\n    const {account} = useAccount()\n    const {exchangeInfo, chainId, gasPrice} = useSystem()\n    const [depositValue, setDepositValue] = React.useState<IBData<T>>({\n        belong: undefined,\n        tradeValue: 0,\n        balance: 0\n    } as IBData<unknown>)\n\n    const {walletLayer1} = useWalletLayer1()\n    const {setShowDeposit, setShowAccount}  = useOpenModals()\n\n    const { t } = useTranslation('common')\n\n    // walletMap1: WalletMap<T> | undefined, ShowDeposit: (isShow: boolean, defaultProps?: any) => void\n    const handleDeposit = React.useCallback(async (inputValue: any) => {\n        const {accountId, accAddress, readyState, apiKey, connectName, eddsaKey} = account\n\n        console.log(LoopringAPI.exchangeAPI, connectProvides.usedWeb3)\n\n        let result: ActionResult = { code: ActionResultCode.NoError }\n\n        if ((readyState !== AccountStatus.UN_CONNECT\n            && inputValue.tradeValue)\n            && tokenMap && exchangeInfo?.exchangeAddress\n            && connectProvides.usedWeb3 && LoopringAPI.exchangeAPI) {\n            try {\n                const tokenInfo = tokenMap[inputValue.belong]\n                const gasLimit = parseInt(tokenInfo.gasAmounts.deposit)\n                let nonce = await sdk.getNonce(connectProvides.usedWeb3, account.accAddress)\n\n                const fee = 0\n                \n                const isMetaMask = connectName === ConnectProviders.MetaMask\n\n                const realGasPrice = gasPrice ?? 30\n\n                if (tokenInfo.symbol.toUpperCase() !== 'ETH') {\n\n                    setShowAccount({isShow: true, step: AccountStep.TokenAccessProcess})\n\n                    const req: GetAllowancesRequest = { owner: account.accAddress, token: tokenInfo.symbol}\n\n                    const { tokenAllowances } = await LoopringAPI.exchangeAPI.getAllowances(req, tokenMap)\n    \n                    const allowance = sdk.toBig(tokenAllowances[tokenInfo.symbol])\n    \n                    const curValInWei = sdk.toBig(inputValue.tradeValue).times('1e' + tokenInfo.decimals)\n    \n                    if (curValInWei.gt(allowance)) {\n\n                        myLog(curValInWei, allowance, ' need approveMax!')\n\n                        try {\n                            await sdk.approveMax(connectProvides.usedWeb3, account.accAddress, tokenInfo.address,\n                                exchangeInfo?.depositAddress, realGasPrice, gasLimit, chainId === 'unknown' ? undefined : chainId, nonce, isMetaMask)\n                            nonce += 1\n                        } catch(reason) {\n                            result.code = ActionResultCode.ApproveFailed\n                            result.data = reason\n                            \n                            setShowAccount({isShow: true, step: AccountStep.FailedTokenAccess})\n                            return\n                        }\n\n                        setShowAccount({isShow: true, step: AccountStep.Depositing})\n\n                    } else {\n                        myLog('allowance is enough! don\\'t need approveMax!')\n                    }\n\n                }\n\n                myLog('before deposit:', chainId, connectName, isMetaMask)\n\n                const realChainId = chainId === 'unknown' ? 1 : chainId\n\n                const response2 = await sdk.deposit(connectProvides.usedWeb3, account.accAddress,\n                    exchangeInfo.exchangeAddress, tokenInfo, inputValue.tradeValue, fee,\n                    realGasPrice, gasLimit, realChainId, nonce, isMetaMask)\n\n                myLog('response2:', response2)\n\n                result.data = response2\n\n                setShowAccount({isShow: true, step: AccountStep.Depositing})\n\n            } catch (reason) {\n                dumpError400(reason)\n                result.code = ActionResultCode.DepositFailed\n                result.data = reason\n\n                setShowAccount({isShow: true, step: AccountStep.FailedDeposit})\n            }\n\n        } else {\n            result.code = ActionResultCode.DataNotReady\n        }\n\n        return result\n\n    }, [account, tokenMap, chainId, exchangeInfo, gasPrice, LoopringAPI.exchangeAPI, setShowAccount])\n\n    const onDepositClick = useCallback(async(depositValue) => {\n        myLog('onDepositClick depositValue:', depositValue)\n        setShowDeposit({isShow:false})\n\n        if (depositValue && depositValue.belong) {\n            await handleDeposit(depositValue as R)\n        }\n\n    }, [depositValue, handleDeposit, setShowDeposit, setShowAccount, isNewAccount])\n\n    const handlePanelEvent = useCallback(async(data: SwitchData<any>, switchType: 'Tomenu' | 'Tobutton') => {\n        return new Promise<void>((res: any) => {\n            res();\n        })\n    }, [depositValue, setDepositValue])\n\n    const title = isNewAccount ? t('labelCreateLayer2Title') : t('depositTitleAndActive')\n\n    const depositProps: DepositProps<R, T> = {\n        isNewAccount,\n        title,\n        tradeData: {belong: undefined} as any,\n        coinMap: coinMap as CoinMap<any>,\n        walletMap: walletLayer1 as WalletMap<any>,\n        depositBtnStatus: TradeBtnStatus.AVAILABLE,\n        onDepositClick,\n    }\n\n    return {\n        depositProps: depositProps,\n    }\n}\n","import { WithTranslation, withTranslation } from 'react-i18next';\nimport {\n    AccountStep,\n    ActiveAccountProcess,\n    ApproveAccount,\n    Button,\n    DepositApproveProcess,\n    Depositing,\n    DepositPanel,\n    DepositProps,\n    FailedDeposit,\n    FailedTokenAccess,\n    FailedUnlock,\n    FailedUpdateAcc,\n    HadAccount,\n    ModalAccount,\n    ModalQRCode,\n    NoAccount,\n    ProcessUnlock,\n    SuccessUnlock,\n    Toast,\n    TokenAccessProcess,\n    useOpenModals\n} from '@loopring-web/component-lib';\nimport React, { useCallback, useState } from 'react';\nimport { copyToClipBoard } from 'utils/obj_tools';\nimport { useAccount } from 'stores/account';\nimport { ActionResult, ActionResultCode, REFRESH_RATE, TOAST_TIME } from 'defs/common_defs';\nimport { getShortAddr } from '@loopring-web/common-resources';\nimport { updateAccountFromServer } from 'services/account/activeAccount';\nimport { lockAccount } from 'services/account/lockAccount';\nimport { unlockAccount } from 'services/account/unlockAccount';\nimport { useTokenMap } from 'stores/token';\nimport { myLog } from 'utils/log_tools';\nimport { walletServices } from '@loopring-web/web3-provider';\nimport { useDeposit } from 'modal/useDeposit';\nimport { sleep } from 'loopring-sdk';\n\nimport { walletLayer2Services } from '../../services/account/walletLayer2Services'\n\nexport const ModalAccountInfo = withTranslation('common')(({\n                                                               onClose,\n                                                               etherscanUrl,\n                                                               open,\n                                                               t,\n                                                               ...rest\n                                                           }: {\n    open: boolean,\n    onClose: (e: any) => void,\n    etherscanUrl: string\n} & WithTranslation) => {\n    const {\n        account,\n        shouldShow,\n        updateAccount,\n        setShouldShow,\n        resetAccount,\n    } = useAccount();\n\n    const isNewAccount = true\n\n    const { depositProps } = useDeposit(isNewAccount)\n\n    const { modals: { isShowAccount }, setShowConnect, setShowAccount, } = useOpenModals()\n\n    const [openQRCode, setOpenQRCode] = useState(false)\n    const addressShort = getShortAddr(account.accAddress)\n    \n    const {coinMap} = useTokenMap()\n    \n    const [copyToastOpen, setCopyToastOpen] = useState(false);\n    const onSwitch = useCallback(() => {\n        setShowAccount({isShow: false})\n        setShouldShow(true);\n        setShowConnect({isShow: shouldShow ?? false})\n    }, [setShowConnect, setShowAccount, shouldShow])\n    const onCopy = React.useCallback(() => {\n        copyToClipBoard(account.accAddress);\n        setCopyToastOpen(true)\n    }, [account])\n    const onViewQRCode = React.useCallback(() => {\n        setOpenQRCode(true)\n    }, [])\n    const onDisconnect = React.useCallback(async () => {\n        walletServices.sendDisconnect('', 'customer click disconnect');\n        setShowAccount({ isShow: false })\n    }, [resetAccount, setShowAccount])\n\n    const goDeposit = React.useCallback(() => {\n\n        setShowAccount({isShow: true, step: AccountStep.Deposit});\n\n    }, [setShowAccount])\n\n    const goUpdateAccount = React.useCallback(async() => {\n\n        if (!account.accAddress) {\n            myLog('account.accAddress is nil')\n            return\n        }\n\n        myLog('goActiveAccount....')\n        setShowAccount({isShow: true, step: AccountStep.ActiveAccountProcess});\n\n        const result: ActionResult = await updateAccountFromServer()\n\n        switch (result.code) {\n            case ActionResultCode.NoError:\n                setShowAccount({isShow: true, step: AccountStep.SuccessUnlock})\n                await sleep(REFRESH_RATE)\n                setShowAccount({isShow: false})\n                walletLayer2Services.sendCheckAccount(account.accAddress)\n                break\n            case ActionResultCode.GetAccError:\n            case ActionResultCode.GenEddsaKeyError:\n            case ActionResultCode.UpdateAccoutError:\n                break\n            default:\n                break\n        }\n\n    }, [account, setShowAccount])\n\n    const unlockBtn = React.useMemo(() => {\n        return <Button variant={'contained'} fullWidth size={'medium'} onClick={() => {\n            setShouldShow(true);\n            unlockAccount();\n        }}>{t('labelUnLockLayer2')} </Button>\n    }, [updateAccount]);\n    const lockBtn = React.useMemo(() => {\n        return <Button variant={'contained'} fullWidth size={'medium'} onClick={() => {\n            lockAccount();\n        }}>{t('labelLockLayer2')} </Button>\n    }, [lockAccount]);\n    \n    const title = t(\"labelCreateLayer2Title\")\n    \n    const accountList = React.useMemo(() => {\n        return Object.values({\n            [ AccountStep.NoAccount ]: <NoAccount {...{\n                goDeposit,\n                ...account,\n                etherscanUrl,\n                onSwitch, onCopy,\n                onViewQRCode, onDisconnect, addressShort,\n            }} />,\n            [ AccountStep.Deposit ]: <DepositPanel title={title} {...{\n                ...rest,\n                _height: 'var(--modal-height)',\n                _width: 'var(--modal-width)',\n                ...depositProps,\n                t\n            }} />,\n            [ AccountStep.Depositing ]: <Depositing label={title}\n                                                    etherscanLink={etherscanUrl + account.accAddress}\n                                                    goUpdateAccount={() => goUpdateAccount()}  {...{...rest, t}} />,\n            [ AccountStep.FailedDeposit ]: <FailedDeposit label={title}\n                                                          etherscanLink={etherscanUrl + account.accAddress}\n                                                          onRetry={() => undefined} {...{...rest, t}} />,\n            [ AccountStep.SignAccount ]: <ApproveAccount {...{\n                ...account,\n                etherscanUrl,\n                onSwitch, onCopy,\n                onViewQRCode, onDisconnect, addressShort,\n            }} goActiveAccount={() => {\n                return undefined\n            }}  {...{...rest, t}} />,\n            [ AccountStep.ProcessUnlock ]: <ProcessUnlock providerName={account.connectName} {...{...rest, t}} />,\n            [ AccountStep.SuccessUnlock ]: <SuccessUnlock providerName={account.connectName} {...{...rest, t}} />,\n            [ AccountStep.FailedUnlock ]: <FailedUnlock onRetry={() => {\n                unlockAccount()\n            }} {...{...rest, t}} />,\n            [ AccountStep.HadAccount ]: <HadAccount {...{\n                ...account,\n                onSwitch, onCopy,\n                etherscanUrl,\n                // address: account.accAddress,\n                // connectBy: account.connectName,\n                onViewQRCode, onDisconnect, addressShort,\n                etherscanLink: etherscanUrl + account.accAddress,\n                mainBtn: account.readyState === 'ACTIVATED' ? lockBtn : unlockBtn\n            }} />,\n            [ AccountStep.TokenAccessProcess ]: <TokenAccessProcess label={title}\n                                                    providerName={account.connectName} {...{\n                ...rest,\n                t\n            }} />,\n            [ AccountStep.DepositApproveProcess ]: <DepositApproveProcess label={title}\n                                                        etherscanLink={etherscanUrl + account.accAddress}\n                                                        providerName={account.connectName} {...{\n                ...rest,\n                t\n            }} />,\n            [ AccountStep.ActiveAccountProcess ]: <ActiveAccountProcess providerName={account.connectName} {...{\n                ...rest,\n                t\n            }} />,\n            [ AccountStep.ActiveAccountFailed ]: <FailedUnlock label={title} onRetry={() => {\n                goUpdateAccount()\n            }} {...{...rest, t}} />,\n            [ AccountStep.FailedTokenAccess ]: <FailedTokenAccess label={title} onRetry={() => { goDeposit() }} {...{\n                t, ...rest,\n                coinInfo: coinMap ? coinMap[ 'USTD' ] : undefined\n            }} />,\n\n        })\n    }, [addressShort, account, depositProps, etherscanUrl, onCopy, onSwitch, onDisconnect, onViewQRCode])\n\n    return <>\n        <Toast alertText={t('Address Copied to Clipboard!')} open={copyToastOpen}\n               autoHideDuration={TOAST_TIME} setOpen={setCopyToastOpen} severity={\"success\"}/>\n\n        <ModalQRCode open={openQRCode} onClose={() => setOpenQRCode(false)} title={'ETH Address'}\n                     description={account?.accAddress} url={account?.accAddress}/>\n\n        <ModalAccount open={isShowAccount.isShow} onClose={(e) => {\n            setShouldShow(false);\n            onClose(e);\n        }} panelList={accountList} step={isShowAccount.step}/>\n    </>\n})","import {\n    dumpError400,\n    GetOffchainFeeAmtRequest,\n    LoopringMap,\n    OffchainFeeReqType,\n    toBig,\n    TokenInfo\n} from 'loopring-sdk';\nimport { useAccount } from '../stores/account';\nimport { useState } from 'react';\nimport { useCustomDCEffect } from '../hooks/common/useCustomDCEffect';\nimport { LoopringAPI } from '../stores/apis/api';\nimport * as sdk from 'loopring-sdk';\nimport { BIG10 } from '../defs/swap_defs';\nimport { myLog } from '../utils/log_tools';\n\nexport function useChargeFees(tokenSymbol: string | undefined, requestType: OffchainFeeReqType,\n                                 tokenMap: LoopringMap<TokenInfo> | undefined, amount?: number) {\n\n    const {account} = useAccount()\n\n    const [chargeFeeList, setChargeFeeList] = useState<any[]>([])\n\n    useCustomDCEffect(async () => {\n\n        if (account.accountId === -1 || !tokenSymbol || !tokenMap || !LoopringAPI.userAPI) {\n            return\n        }\n\n        let chargeFeeList: any[] = []\n\n        try {\n            const tokenInfo = tokenMap[ tokenSymbol ]\n\n            const request: GetOffchainFeeAmtRequest = {\n                accountId: account.accountId,\n                tokenSymbol,\n                requestType,\n                amount: amount ? toBig(amount).times('1e' + tokenInfo.decimals).toFixed(0, 0) : undefined\n            }\n\n            const response = await LoopringAPI.userAPI.getOffchainFeeAmt(request, account.apiKey)\n\n            if (response?.raw_data?.fees instanceof Array) {\n                response.raw_data.fees.forEach((item: any) => {\n                    const feeRaw = item.fee\n                    const tokenInfo = tokenMap[ item.token ]\n                    const fee = sdk.toBig(item.fee).div('1e' + tokenInfo.decimals).toNumber()\n                    chargeFeeList.push({belong: item.token, fee, __raw__: feeRaw})\n                })\n\n                setChargeFeeList(chargeFeeList)\n            }\n            myLog('response:', response)\n\n        } catch (reason) {\n            dumpError400(reason)\n        }\n\n\n        setChargeFeeList(chargeFeeList)\n\n    }, [account.accountId, account.apiKey, LoopringAPI.userAPI, requestType, tokenSymbol, tokenMap])\n\n    return {\n        chargeFeeList,\n    }\n\n}","import { useAccount } from '../stores/account';\nimport { AccountStep, useOpenModals } from '@loopring-web/component-lib';\nimport React from 'react';\nimport { sleep } from 'loopring-sdk';\nimport { useAccountHook } from '../services/account/useAccountHook';\n\nexport  function useAccountModal() {\n    const { shouldShow, setShouldShow, statusUnset: statusAccountUnset} = useAccount();\n    const { setShowAccount } = useOpenModals();\n    const handleErrorAccount = React.useCallback(()=>{\n        // updateAccount({readyState:'NO_ACCOUNT'});\n        statusAccountUnset();\n    },[shouldShow])\n    const handleLockAccount = React.useCallback(()=>{\n        // updateAccount({readyState:'NO_ACCOUNT'});\n        statusAccountUnset();\n        setShowAccount({isShow: shouldShow ?? false,step:AccountStep.HadAccount});\n    },[shouldShow])\n    const handleNoAccount = React.useCallback((data: any)=>{\n        // updateAccount({readyState:'NO_ACCOUNT'});\n        statusAccountUnset();\n        setShowAccount({isShow: shouldShow ?? false,step:AccountStep.NoAccount});\n    },[shouldShow])\n    const handleDepositingAccount = React.useCallback(async ()=>{\n        // updateAccount({readyState:'DEPOSITING'});\n        setShowAccount({isShow: shouldShow ?? false,step:AccountStep.Depositing});\n        await sleep(5000)\n        setShouldShow(false)\n        setShowAccount({isShow: false});\n        statusAccountUnset();\n    },[shouldShow])\n    const handleErrorApproveToken = React.useCallback(()=>{\n        // updateAccount({readyState:'DEPOSITING'});\n        setShowAccount({isShow: shouldShow ?? false,step:AccountStep.Depositing});\n    },[shouldShow])\n    const handleErrorDepositSign = React.useCallback(()=>{\n        // updateAccount({readyState:'DEPOSITING'});\n        setShowAccount({isShow: shouldShow ?? false,step:AccountStep.FailedDeposit});\n    },[shouldShow])\n    const handleProcessDeposit = React.useCallback(()=>{\n        // updateAccount({readyState:'DEPOSITING'});\n        setShowAccount({isShow: shouldShow ?? false,step:AccountStep.DepositApproveProcess});\n    },[shouldShow])\n    const handleSignAccount = React.useCallback(()=>{\n        // updateAccount({readyState:'DEPOSITING'});\n        statusAccountUnset();\n        setShowAccount({isShow: shouldShow ?? false,step:AccountStep.SignAccount});\n    },[shouldShow])\n    const handleSignError = React.useCallback(()=>{\n        setShowAccount({isShow: shouldShow ?? false,step:AccountStep.FailedUnlock});\n    },[shouldShow])\n    const handleProcessSign = React.useCallback(()=>{\n        setShowAccount({isShow: shouldShow ?? false,step:AccountStep.ProcessUnlock});\n    },[shouldShow])\n    const handleAccountActive  = React.useCallback(async ()=>{\n\n        //updateAccount({readyState:'ACTIVATED'});\n        setShowAccount({isShow: shouldShow ?? false,step:AccountStep.SuccessUnlock});\n        await sleep(1000)\n        setShouldShow(false)\n        setShowAccount({isShow: false});\n        statusAccountUnset();\n    },[shouldShow])\n    useAccountHook({\n        handleErrorAccount,\n        handleLockAccount,// clear private data\n        handleNoAccount,//\n        // TODO\n        //  step1 Approve account;  click allow from provider\n        //  step2 send to ETH;  click allow from provider\n        handleDepositingAccount,\n        handleErrorApproveToken,\n        handleErrorDepositSign,\n        handleProcessDeposit,// two or one step\n        handleSignAccount, //unlock or update account  sgin\n        handleProcessSign,\n        handleSignError,\n        // handleProcessAccountCheck,\n        handleAccountActive: handleAccountActive,\n    })\n}","import React from 'react';\n// import { walletLa } from './walletServices';\nimport { Commands } from './command';\nimport { walletLayer2Services } from './walletLayer2Services';\n\nexport function useAccountHook(\n    {\n        handleLockAccount,// clear private data\n        handleNoAccount,//\n        handleErrorAccount,\n        // TODO\n        //  step1 Approve account;  click allow from provider\n        //  step2 send to ETH;  click allow from provider\n        handleDepositingAccount,\n        handleErrorApproveToken,\n        handleErrorDepositSign,\n        handleProcessDeposit,// two or one step\n        handleSignAccount, //unlock or update account  assgin\n        handleProcessSign,\n        handleSignError,\n        handleProcessAccountCheck,\n        handleAccountActive,\n    }\n\n        : any) {\n    const subject = React.useMemo(() => walletLayer2Services.onSocket(), []);\n    React.useEffect(() => {\n        const subscription = subject.subscribe(({data, status}: { status: keyof typeof Commands, data?: any }) => {\n            switch (status) {\n                case 'ErrorNetwork':\n                    handleErrorAccount(data);\n                    break;// clear private data\n                case 'LockAccount':\n                    handleLockAccount(data);\n                    break;// clear private data\n                case 'NoAccount':\n                    handleNoAccount(data);\n                    break;//\n                case 'DepositingAccount':\n                    handleDepositingAccount(data);\n                    break;\n                case 'ErrorApproveToken':\n                    handleErrorApproveToken(data);\n                    break;\n                case 'ErrorDepositSign':\n                    handleErrorDepositSign(data);\n                    break;\n                case 'ProcessDeposit':\n                    handleProcessDeposit(data);\n                    break;// two or one step\n                case 'SignAccount':\n                    handleSignAccount(data);\n                    break;//unlock or update account  assgin\n                case 'ProcessSign':\n                    handleProcessSign(data);\n                    break;\n                case 'ErrorSign':\n                    handleSignError(data);\n                    break;\n                case 'AccountUnlocked':\n                    handleAccountActive(data);\n                    break;\n            }\n        });\n        return () => subscription.unsubscribe();\n    }, [subject, handleLockAccount,// clear private data\n        handleErrorAccount,\n        handleNoAccount,//\n        handleDepositingAccount,\n        handleErrorApproveToken,\n        handleErrorDepositSign,\n        handleProcessDeposit,// two or one step\n        handleSignAccount, //unlock or update account  assgin\n        handleProcessSign,\n        handleProcessAccountCheck,]);\n}\n","import {\n    ModalPanel, Toast,\n    useOpenModals\n} from '@loopring-web/component-lib';\nimport { ModalWalletConnectPanel } from './WalletModal';\nimport { ModalAccountInfo } from './AccountModal';\nimport { withTranslation, WithTranslation } from 'react-i18next';\nimport { useTransfer } from './useTransfer';\nimport { useDeposit } from './useDeposit';\nimport { useWithdraw } from './useWithdraw';\nimport { useSystem } from '../stores/system';\nimport { useAccountModal } from './useAccountModal';\nimport { TOAST_TIME } from '../defs/common_defs';\nimport React from 'react';\n\nexport const ModalGroup = withTranslation('common',{withRef: true})(({...rest}:WithTranslation)=>{\n    const {transferProps} = useTransfer();\n    const {depositProps} = useDeposit();\n    const {withdrawProps} = useWithdraw();\n    const {etherscanUrl} = useSystem();\n    useAccountModal();\n    const {modals: {isShowAccount, isShowConnect}, setShowConnect, setShowAccount} = useOpenModals();\n    return  <>\n\n        <ModalPanel transferProps={transferProps}\n                    withDrawProps={withdrawProps}\n                    depositProps={depositProps}\n                    resetProps={{} as any}\n                    ammProps={{} as any}\n                    swapProps={{} as any}\n                    {...{_height: 'var(--modal-height)', _width: 'var(--modal-width)'}}\n        />\n\n        <ModalWalletConnectPanel {...{\n            ...rest,\n            open: isShowConnect.isShow,\n            onClose: () => setShowConnect({isShow: false})\n        }} />\n        <ModalAccountInfo\n            {...{\n                ...rest,\n                etherscanUrl,\n                open: isShowAccount.isShow,\n                onClose: () => setShowAccount({isShow: false})\n            }}\n        ></ModalAccountInfo>\n    </>\n\n} )","import React, { useCallback } from 'react';\n\nimport { SwitchData, TradeBtnStatus, TransferProps, } from '@loopring-web/component-lib';\nimport { AccountStatus, CoinMap, IBData, SagaStatus, WalletMap } from '@loopring-web/common-resources';\nimport { ConnectorNames, dumpError400, OffchainFeeReqType, OriginTransferRequestV3, toBig, VALID_UNTIL } from 'loopring-sdk';\nimport { useTokenMap } from '../stores/token';\nimport { useAccount } from '../stores/account';\nimport { useChargeFees } from './useChargeFees';\nimport { LoopringAPI } from '../stores/apis/api';\nimport { useSystem } from '../stores/system';\nimport { connectProvides } from '@loopring-web/web3-provider';\nimport { useCustomDCEffect } from '../hooks/common/useCustomDCEffect';\nimport { myLog } from 'utils/log_tools';\nimport { useWalletLayer2 } from '../stores/walletLayer2';\nimport { makeWalletLayer2 } from '../hooks/help';\nimport { debug } from 'console';\n\nexport const useTransfer = <R extends IBData<T>, T>(): {\n    // handleTransfer: (inputValue:R) => void,\n    transferProps: TransferProps<R, T>\n    // transferValue: R\n} => {\n    const {tokenMap, coinMap} = useTokenMap();\n    const {account} = useAccount()\n    const {exchangeInfo, chainId} = useSystem();\n    const {walletLayer2, status: walletLayer2Status} = useWalletLayer2();\n    const [walletMap, setWalletMap] = React.useState(makeWalletLayer2().walletMap ?? {} as WalletMap<R>);\n    // const {setShowTransfer}  = useOpenModals();\n    const [transferValue, setTransferValue] = React.useState<IBData<T>>({\n        belong: undefined,\n        tradeValue: 0,\n        balance: 0\n    } as IBData<unknown>)\n    const {chargeFeeList} = useChargeFees(transferValue.belong, OffchainFeeReqType.TRANSFER, tokenMap)\n\n    const [tranferFeeInfo, setTransferFeeInfo] = React.useState<any>()\n    const [payeeAddr, setPayeeAddr] = React.useState<string>('')\n    React.useEffect(()=>{\n        if(walletLayer2Status === SagaStatus.UNSET) {\n            const walletMap = makeWalletLayer2().walletMap ?? {} as WalletMap<R>\n            setWalletMap(walletMap)\n        }\n    },[walletLayer2Status])\n\n    useCustomDCEffect(() => {\n\n        if (chargeFeeList.length > 0) {\n            setTransferFeeInfo(chargeFeeList[0])\n        }\n\n    }, [chargeFeeList, setTransferFeeInfo])\n\n    const onTransferClick = useCallback(async(transferValue) => {\n        const {accountId, accAddress, readyState, apiKey, connectName, eddsaKey} = account\n        console.log('useCallback tranferFeeInfo:', tranferFeeInfo) \n        \n        if (readyState === AccountStatus.ACTIVATED && tokenMap \n            && exchangeInfo && connectProvides.usedWeb3 \n            && transferValue?.belong && tranferFeeInfo?.belong && eddsaKey?.sk) {\n            \n            try {\n                const sellToken = tokenMap[ transferValue.belong as string ]\n                const feeToken = tokenMap[ tranferFeeInfo.belong ]\n                const transferVol = toBig(transferValue.tradeValue).times('1e' + sellToken.decimals).toFixed(0, 0)\n                const storageId = await LoopringAPI.userAPI?.getNextStorageId({\n                    accountId,\n                    sellTokenId: sellToken.tokenId\n                }, apiKey)\n                const req: OriginTransferRequestV3 = {\n                    exchange: exchangeInfo.exchangeAddress,\n                    payerAddr: accAddress,\n                    payerId: accountId,\n                    payeeAddr,\n                    payeeId: 0,\n                    storageId: storageId?.offchainId,\n                    token: {\n                        tokenId: sellToken.tokenId,\n                        volume: transferVol,\n                    },\n                    maxFee: {\n                        tokenId: feeToken.tokenId,\n                        volume: tranferFeeInfo.__raw__,\n                    },\n                    validUntil: VALID_UNTIL,\n                }\n                const response = await LoopringAPI.userAPI?.submitInternalTransfer(req,\n                    connectProvides.usedWeb3,\n                    chainId === 'unknown' ? 5 : chainId, connectName as ConnectorNames,\n                    eddsaKey.sk, apiKey)\n\n                    myLog(response)\n                //TODO check success or failed API\n            } catch (e) {\n                dumpError400(e)\n            }\n\n        } else {\n            return false\n        }\n\n    }, [account, tokenMap, tranferFeeInfo?.belong, transferValue, payeeAddr])\n\n    const handlePanelEvent = useCallback(async (data: SwitchData<R>, switchType: 'Tomenu' | 'Tobutton') => {\n        return new Promise<void>((res: any) => {\n            if (data?.tradeData?.belong) {\n                if (transferValue !== data.tradeData) {\n                    setTransferValue(data.tradeData)\n                }\n            } else {\n                setTransferValue({belong: undefined, tradeValue: 0, balance: 0} as IBData<unknown>)\n            }\n            res();\n        })\n    }, [setTransferValue])\n\n    const handleFeeChange = useCallback((value: { belong: any; \n        fee: number | string; \n        __raw__?: any }): void => {\n            myLog('handleFeeChange:', value)\n            setTransferFeeInfo(value)\n    }, [setTransferFeeInfo])\n\n    const transferProps = {\n        tradeData: { belong: undefined } as any,\n        coinMap: coinMap as CoinMap<T>,\n        walletMap: walletMap as WalletMap<T>, \n        transferBtnStatus: TradeBtnStatus.AVAILABLE,\n        onTransferClick,\n        handleFeeChange,\n        handlePanelEvent,\n        chargeFeeToken: 'ETH',\n        chargeFeeTokenList: chargeFeeList,\n        handleOnAddressChange: (value: any) => {\n            myLog('transfer handleOnAddressChange:', value);\n            setPayeeAddr(value)\n        },\n        handleAddressError: (_value: any) => {\n            return {error: false, message: ''}\n        }\n    }\n\n    return {\n        transferProps ,\n    }\n}\n","import React, { useState } from 'react';\n\nimport { SwitchData, TradeBtnStatus, useOpenModals, WithdrawProps } from '@loopring-web/component-lib';\nimport {\n    AccountStatus,\n    CoinMap,\n    IBData,\n    SagaStatus,\n    WalletMap,\n    WithdrawType,\n    WithdrawTypes\n} from '@loopring-web/common-resources';\nimport { ConnectorNames, dumpError400, OffchainFeeReqType, toBig, VALID_UNTIL } from 'loopring-sdk';\nimport { useTokenMap } from '../stores/token';\nimport { useAccount } from '../stores/account';\nimport { useChargeFees } from './useChargeFees';\nimport { useCustomDCEffect } from '../hooks/common/useCustomDCEffect';\nimport { LoopringAPI } from '../stores/apis/api';\nimport { useSystem } from '../stores/system';\nimport { connectProvides } from '@loopring-web/web3-provider';\nimport { myLog } from 'utils/log_tools';\nimport { useWalletLayer2 } from '../stores/walletLayer2';\nimport { makeWalletLayer2 } from '../hooks/help';\n// import { useCustomDCEffect } from '../../hooks/common/useCustomDCEffect';\n// import { useChargeFeeList } from './hook';\n\nexport const useWithdraw = <R extends IBData<T>, T>(): {\n    // handleWithdraw: (inputValue:R) => void,\n    withdrawProps: WithdrawProps<R, T>\n    // withdrawValue: R\n} => {\n    const {tokenMap, coinMap} = useTokenMap();\n    const {account} = useAccount()\n    const {exchangeInfo, chainId} = useSystem();\n    const [withdrawValue, setWithdrawValue] = React.useState<IBData<T>>({\n        belong: undefined,\n        tradeValue: 0,\n        balance: 0\n    } as IBData<unknown>)\n    const {status:walletLayer2Status} = useWalletLayer2();\n    const [walletMap2, setWalletMap2] = React.useState(makeWalletLayer2().walletMap??{} as WalletMap<R>);\n    const {chargeFeeList} = useChargeFees(withdrawValue.belong, OffchainFeeReqType.OFFCHAIN_WITHDRAWAL, tokenMap)\n    const [withdrawAddr, setWithdrawAddr] = useState<string>()\n    const [withdrawFeeInfo, setWithdrawFeeInfo] = useState<any>(undefined)\n    const [withdrawType, setWithdrawType] = useState<OffchainFeeReqType>(OffchainFeeReqType.OFFCHAIN_WITHDRAWAL)\n    const {setShowWithdraw}  = useOpenModals();\n\n    React.useEffect(()=>{\n        if(walletLayer2Status === SagaStatus.UNSET){\n            const walletMap = makeWalletLayer2().walletMap ?? {} as WalletMap<R>\n            setWalletMap2(walletMap)\n        }\n    },[walletLayer2Status])\n    useCustomDCEffect(() => {\n        if (chargeFeeList.length > 0) {\n            setWithdrawFeeInfo(chargeFeeList[0])\n        }\n    }, [chargeFeeList, setWithdrawFeeInfo])\n\n    const handleWithdraw = React.useCallback(async (inputValue: R) => {\n        const {accountId, accAddress, readyState, apiKey, connectName, eddsaKey} = account\n        if (readyState === AccountStatus.ACTIVATED && tokenMap \n            && exchangeInfo && connectProvides.usedWeb3 \n            && withdrawAddr && withdrawFeeInfo?.belong && eddsaKey?.sk) {\n            try {\n                const withdrawToken = tokenMap[ inputValue.belong as string ]\n                const feeToken = tokenMap[ withdrawFeeInfo.belong ]\n                const withdrawVol = toBig(inputValue.tradeValue).times('1e' + withdrawToken.decimals).toFixed(0, 0)\n                const storageId = await LoopringAPI.userAPI?.getNextStorageId({\n                    accountId: accountId,\n                    sellTokenId: withdrawToken.tokenId\n                }, apiKey)\n                const response = await LoopringAPI.userAPI?.submitOffchainWithdraw({\n                        exchange: exchangeInfo.exchangeAddress,\n                        owner: accAddress,\n                        to: withdrawAddr,\n                        accountId: account.accountId,\n                        storageId: storageId?.offchainId,\n                        token: {\n                            tokenId: withdrawToken.tokenId,\n                            volume: withdrawVol,\n                        },\n                        maxFee: {\n                            tokenId: feeToken.tokenId,\n                            volume: withdrawFeeInfo.__raw__,\n                        },\n                        extraData: '',\n                        minGas: 0,\n                        validUntil: VALID_UNTIL,\n                    },\n                    connectProvides.usedWeb3,\n                    chainId === 'unknown' ? 1 : chainId, connectName as ConnectorNames,\n                    eddsaKey.sk, apiKey)\n\n                    myLog('got response:', response)\n                //TODO check success or failed API\n            } catch (e) {\n                dumpError400(e)\n            }\n\n        } else {\n            return false\n        }\n\n    }, [account, tokenMap, withdrawFeeInfo])\n\n    const withdrawType2 = withdrawType === OffchainFeeReqType.FAST_OFFCHAIN_WITHDRAWAL ? 'Fast' : 'Standard'\n\n    const withdrawProps: WithdrawProps<R, T> = {\n        tradeData: {belong: undefined} as any,\n        coinMap: coinMap as CoinMap<T>,\n        walletMap: walletMap2 as WalletMap<any>,\n        withdrawBtnStatus: TradeBtnStatus.AVAILABLE,\n        withdrawType: withdrawType2,\n        withdrawTypes: WithdrawTypes,\n        onWithdrawClick: () => {\n            if (withdrawValue && withdrawValue.belong) {\n                handleWithdraw(withdrawValue as R)\n            }\n            setShowWithdraw({isShow:false})\n        },\n        handleFeeChange(value: { belong: any; fee: number | string; __raw__?: any }): void {\n            setWithdrawFeeInfo(value as any)\n        },\n        handleWithdrawTypeChange: (value: 'Fast' | 'Standard') => {\n            myLog('handleWithdrawTypeChange', value)\n            const offchainType = value === WithdrawType.Fast ? OffchainFeeReqType.FAST_OFFCHAIN_WITHDRAWAL : OffchainFeeReqType.OFFCHAIN_WITHDRAWAL\n            setWithdrawType(offchainType)\n        },\n        handlePanelEvent: async (data: SwitchData<R>, switchType: 'Tomenu' | 'Tobutton') => {\n            return new Promise((res: any) => {\n                if (data?.tradeData?.belong) {\n                    if (withdrawValue !== data.tradeData) {\n                        setWithdrawValue(data.tradeData)\n                    }\n                } else {\n                    setWithdrawValue({belong: undefined, tradeValue: 0, balance: 0} as IBData<unknown>)\n                }\n\n                res();\n            })\n        },\n        chargeFeeToken: 'ETH',\n        chargeFeeTokenList: chargeFeeList,\n        handleOnAddressChange: (value: any) => {\n            // myLog('withdraw handleOnAddressChange', value);\n            setWithdrawAddr(value)\n        },\n        handleAddressError: (_value: any) => {\n            return {error: false, message: ''}\n        }\n    }\n\n    return {\n        withdrawProps,\n    }\n}\n","import { HashRouter as Router, Route, Switch, } from 'react-router-dom'\n\nimport Header from 'layouts/header'\n\nimport QuotePage from 'pages/QuotePage'\nimport { SwapPage } from 'pages/SwapPage'\n\nimport Container from '@material-ui/core/Container'\nimport { Box } from '@material-ui/core'\nimport { DevWrapper } from '../provider/'\nimport { Layer2Page } from '../pages/Layer2Page'\nimport { LiquidityPage } from '../pages/LiquidityPage'\nimport { ModalGroup } from '../modal';\nimport React from 'react';\n\nconst RouterView = () => {\n\n    return <Router>\n        <Header />\n\n        {/*<Box style={{marginTop: `var(--header-height)`}} flex={1} display={'flex'}>*/}\n        <Container maxWidth=\"lg\" style={{minHeight:'calc(100% - 64px - 32px)',display:'flex',flexDirection:'column'}}>\n            {/*style={{height: '100%' }}*/}\n            <Box display={'flex'} flex={1} alignItems={'stretch'} flexDirection={'row'} marginTop={3}  >\n                <Switch>\n                    <Route exact component={SwapPage} path='/'/>\n                    <Route exact component={QuotePage} path='/markets'/>\n                    <Route component={SwapPage} path='/trading/lite'/>\n                    <Route component={SwapPage} path='/trading/lite(/:symbol)'/>\n\n                    <Route exact component={Layer2Page} path='/layer2'/>\n                    <Route exact component={Layer2Page} path='/layer2/assets'/>\n                    <Route exact component={Layer2Page} path='/layer2/transactions'/>\n                    <Route exact component={Layer2Page} path='/layer2/trades'/>\n                    <Route exact component={Layer2Page} path='/layer2/ammRecords'/>\n                    {/* <Route exact component={Layer2Page} path='/layer2/orders'/> */}\n                    <Route exact component={Layer2Page} path='/layer2/setting'/>\n\n                    <Route exact component={LiquidityPage} path='/liquidity'/>\n                    <Route exact component={LiquidityPage} path='/liquidity/pools/*'/>\n                    <Route exact component={LiquidityPage} path='/liquidity/pools'/>\n                    {/*<Route exact component={LiquidityPage} path='/liquidity/pools/coinPair(/:symbol)'/>*/}\n                    <Route exact component={LiquidityPage} path='/liquidity/amm-mining'/>\n                    <Route exact component={LiquidityPage} path='/liquidity/my-liquidity'/>\n                    <Route exact component={LiquidityPage} path='/liquidity/orderBook-Mining'/>\n                    <Route exact component={LiquidityPage} path='/liquidity/maker-rebates'/>\n\n                    <DevWrapper>\n                        <Route exact path='/debug'>\n                        </Route>\n                    </DevWrapper>\n\n                </Switch>\n            </Box>\n        </Container>\n        {/*</Box>*/}\n        <ModalGroup/>\n    </Router>\n}\n\nexport default RouterView\n","import { cleanLayer2, goErrorNetWork } from './lockAccount';\nimport store from '../../stores';\nimport { cleanAccountStatus, updateAccountStatus } from '../../stores/account';\nimport { updateSystem } from '../../stores/system';\n\nexport const networkUpdate = ({chainId}: any): boolean => {\n    const _chainId = store.getState().system.chainId;\n    if (chainId === 'unknown') {\n        store.dispatch(updateAccountStatus({wrongChain: true, _chainId:chainId}));\n        goErrorNetWork();\n        return false;\n    } else if (chainId !== _chainId && _chainId !== 'unknown' && chainId !== 'unknown') {\n        store.dispatch(updateAccountStatus({_chainId:chainId}));\n        store.dispatch(updateSystem({chainId}));\n        cleanLayer2()\n        window.location.reload();\n        return true;\n    }else{\n        store.dispatch(updateAccountStatus({wrongChain: false, _chainId:chainId}));\n        return true;\n    }\n}\n","import { walletLayer2Services } from './walletLayer2Services';\nimport store from '../../stores';\nimport { cleanAccountStatus, updateAccountStatus } from '../../stores/account';\nimport { myLog } from '../../utils/log_tools';\n\nexport const checkAccount = (newAccAddress: string) => {\n    const account = store.getState().account;\n    if (account.accAddress === '' || account.accAddress !== newAccAddress) {\n        myLog('After connect >>,account part: diff account, clean layer2')\n        store.dispatch(cleanAccountStatus(undefined));\n        walletLayer2Services.sendCheckAccount(newAccAddress);\n    }else if (newAccAddress && newAccAddress !== '') {\n        myLog('After connect >>,checkAccount: step1 address',newAccAddress)\n        if (account &&  account.accountId === -1) {\n            myLog('After connect >>,checkAccount: step1 no account Id')\n            walletLayer2Services.sendCheckAccount(newAccAddress)\n        } else if (account.accountId && account.apiKey && account.eddsaKey) {\n            myLog('After connect >>,checkAccount: step1 have activate account from store, account:', account)\n            walletLayer2Services.sendAccountSigned();\n        } else {\n            myLog('After connect >>,checkAccount: step1 account locked')\n            walletLayer2Services.sendAccountLock();\n        }\n    }\n}","import React from 'react';\nimport { SagaStatus } from '@loopring-web/common-resources';\nimport { useWalletLayer1 } from './stores/walletLayer1';\nimport { useWalletLayer2 } from './stores/walletLayer2';\nimport { useAccount } from './stores/account';\nimport { useUserRewards } from './stores/userRewards';\nimport { useConnect } from './hookConnect';\n\nexport function useAccountInit({state}: { state: keyof typeof SagaStatus }) {\n    const {getUserRewards}  = useUserRewards()\n    useConnect({state})\n    const {\n        updateWalletLayer1,\n        resetLayer1,\n        status: walletLayer1Status,\n        statusUnset: wallet1statusUnset\n    } = useWalletLayer1()\n    const {\n        updateWalletLayer2,\n        resetLayer2,\n        status: walletLayer2Status,\n        statusUnset: wallet2statusUnset\n    } = useWalletLayer2();\n    const {account, status: accountStatus, statusUnset: accountStatusUnset} = useAccount();\n\n    React.useEffect(() => {\n        if (accountStatus === SagaStatus.UNSET && state === SagaStatus.DONE) {\n            switch (account.readyState) {\n                case 'UN_CONNECT':\n                case 'ERROR_NETWORK':\n                    resetLayer1();\n                    break;\n                case 'NO_ACCOUNT':\n                case 'DEPOSITING':\n                case 'LOCKED':\n                    resetLayer2();\n                    if (walletLayer1Status !== SagaStatus.PENDING) {\n                        updateWalletLayer1();\n                    }\n                    break;\n                case 'ACTIVATED':\n                    // \n                    if (walletLayer1Status !== SagaStatus.PENDING) {\n                        updateWalletLayer1();\n                    }\n                    if (walletLayer2Status !== SagaStatus.PENDING) {\n                        updateWalletLayer2();\n                    }\n                    break;\n\n            }\n            getUserRewards();\n        }\n\n    }, [accountStatus, state]);\n    React.useEffect(() => {\n        switch (walletLayer1Status) {\n            case \"ERROR\":\n                wallet1statusUnset();\n                // setState('ERROR')\n                //TODO: show error at button page show error  some retry dispath again\n                break;\n            case \"DONE\":\n                wallet1statusUnset();\n                //setWalletMap1(walletLayer1State.walletLayer1);\n                break;\n            default:\n                break;\n\n        }\n    }, [walletLayer1Status]);\n    React.useEffect(() => {\n        switch (walletLayer2Status) {\n            case \"ERROR\":\n                wallet2statusUnset();\n                // setState('ERROR')\n                //TODO: show error at button page show error  some retry dispath again\n                break;\n            case \"DONE\":\n                wallet2statusUnset();\n                //setWalletMap1(walletLayer1State.walletLayer1);\n                break;\n            default:\n                break;\n\n        }\n    }, [walletLayer2Status])\n}\n","import { useAccount } from './stores/account';\nimport { useSystem } from './stores/system';\nimport { useOpenModals, WalletConnectStep } from '@loopring-web/component-lib';\nimport React from 'react';\nimport { ChainId, sleep } from 'loopring-sdk';\nimport { myLog } from './utils/log_tools';\nimport { networkUpdate } from './services/account/networkUpdate';\nimport { checkAccount } from './services/account/checkAccount';\nimport { ErrorType, useConnectHook } from '@loopring-web/web3-provider';\nimport { SagaStatus } from '@loopring-web/common-resources';\n\nexport  function useConnect({state}: { state: keyof typeof SagaStatus }) {\n    const {account, shouldShow, resetAccount, statusUnset: statusAccountUnset, setShouldShow,status:accountStatus } = useAccount();\n    const {updateSystem, chainId: _chainId, status: systemStatus, statusUnset: systemStatusUnset} = useSystem();\n    const {setShowConnect} = useOpenModals();\n    const [stateAccount,setStateAccount] = React.useState<SagaStatus>(SagaStatus.DONE);\n    React.useEffect(()=>{\n        if(stateAccount === SagaStatus.PENDING && accountStatus === SagaStatus.DONE) {\n            setStateAccount(SagaStatus.DONE)\n            statusAccountUnset();\n        }\n    },[stateAccount,accountStatus])\n    const handleConnect = React.useCallback(async ({\n                                                       accounts,\n                                                       chainId,\n                                                   }: { accounts: string, provider: any, chainId: ChainId | 'unknown' }) => {\n        const accAddress = accounts[ 0 ];\n        myLog('After connect >>,network part start: step1 networkUpdate')\n        const networkFlag = networkUpdate({chainId})\n        myLog('After connect >>,network part done: step2 check account')\n        if(networkFlag){\n            checkAccount(accAddress);\n        }\n        setShouldShow(false)\n        setShowConnect({isShow: shouldShow ?? false, step: WalletConnectStep.SuccessConnect});\n        await sleep(1000)\n        setShowConnect({isShow: false, step: WalletConnectStep.SuccessConnect});\n\n    }, [_chainId, account, shouldShow])\n\n    const handleAccountDisconnect = React.useCallback(async () => {\n        await resetAccount({shouldUpdateProvider:true});\n        setStateAccount(SagaStatus.PENDING)\n    }, [state]);\n\n    const handleError = React.useCallback(async ({type, errorObj}: { type: keyof typeof ErrorType, errorObj: any }) => {\n        updateSystem({chainId: account._chainId ? account._chainId : 1})\n        resetAccount();\n        statusAccountUnset();\n        myLog('Error')\n    }, [account]);\n\n    useConnectHook({handleAccountDisconnect, handleError, handleConnect});\n\n}","import { Trans, useTranslation } from 'react-i18next';\nimport { Box, Container, Link, Typography } from '@material-ui/core';\nimport styled from '@emotion/styled';\nimport { ErrorObject } from '@loopring-web/common-resources';\nimport { getContactInfo } from '../../utils/dt_tools';\n\nconst StyleBox = styled(Box)`\n  background-image: url('./static/images/error_bg.png');\n  background-repeat: no-repeat;\n  background-size: contain;\n  background-position: bottom;\n  white-space: pre-wrap;\n  //h2{\n  //  position: relative;\n  //}\n` as typeof Box\n\nexport const ErrorPage = ({messageKey}: ErrorObject) => {\n    // const {messageKey}: { id?:string,messageKey:string } = {messageKey: 'errorMessageTokenMapIsEmpty'};\n    //TODO: checkRouter\n    const {t} = useTranslation('error');\n    const message = `labelConnectUs`;\n    return <>\n        <Container>\n            {/*style={{height: '100%' }}*/}\n            <StyleBox flex={1} display={'flex'} alignItems={'flex-start'} justifyContent={'center'}\n                      flexDirection={'column'} marginTop={4} height={680} maxWidth={1200}>\n                {/*<StyleBox>*/}\n                <Box textAlign={'center'} position={'relative'} left={128} top={-64}>\n                    <Typography component={'h2'} variant={'h2'}>\n                        {t(messageKey)}\n                    </Typography>\n                    <Typography marginY={2} component={'p'} variant={'body1'} color={'textSecondary'}>\n                        <Trans i18nKey={message}>\n                            If you believe this is indeed a bug, please <Link\n                            component={'a'}\n                            onClick={(e) => {\n                                window.location.href = getContactInfo();\n                                e.preventDefault();\n                            }}\n                        >contact us</Link> <br/> We would appreciate your feedback\n\n                        </Trans>\n                        {/*{t(message)}*/}\n                        {/*{t(messageKey)}*/}\n                    </Typography>\n                </Box>\n                {/*</StyleBox>*/}\n            </StyleBox>\n        </Container>\n\n        {/*<Footer></Footer>*/}\n    </>\n}\n","// import { i18nInstance as i18n  } from \"@loopring-web/common-resources\"\nimport i18n from 'i18next';\n\nconst covertLocale = (rawLocale: string = i18n.language) => {\n    return rawLocale.replace('_', '-')\n}\n\nexport function getLocaleDtFromTs(ts: number | string, locale: string = i18n.language) {\n    if (typeof(ts) === 'string') {\n        ts = parseInt(ts)\n    }\n    const dt = new Date(ts).toLocaleString(covertLocale(locale))\n    return dt\n}\n\nexport function getLocaleDt(dt?: Date, locale: string = i18n.language) {\n    if (dt) {\n        return dt.toLocaleString(covertLocale(locale))\n    }\n    return ''\n}\n\nexport function getContactInfo(subject: string = 'report to loopring website', body: string ='Body Content') {\n    const email = process.env.CONTACT_US_EMAIL ?? 'contact@loopring.io'\n    return `mailto:${email}?subject=${subject}&body=${body}`\n}\n","import { Trans, useTranslation } from 'react-i18next';\nimport { Box, Container, Link, Slide, Typography } from '@material-ui/core';\nimport styled from '@emotion/styled';\nimport { ErrorObject } from '@loopring-web/common-resources';\nimport { getContactInfo } from '../../utils/dt_tools';\n\nconst StyleBox = styled(Box)`\n  //background-image: url('./static/images/error_bg.png');\n  //background-repeat: no-repeat;\n  //background-size: contain;\n  //background-position: bottom;\n  //white-space: pre-wrap;\n  ////h2{\n  ////  position: relative;\n  ////}\n  /*\n  Set the color of the icon\n*/\n  svg path,\n  svg rect{\n    fill: ${({theme}) => theme.colorBase.primaryLight};\n  }\n` as typeof Box\n\nexport const LoadingPage = () => {\n    const {t} = useTranslation('layout');\n    return <>\n        {/*<Container>*/}\n            {/*style={{height: '100%' }}*/}\n            <StyleBox flex={1} display={'flex'} alignItems={'center'} justifyContent={'center'}\n                      flexDirection={'column'} height={'100%'}  width={'100%'}>\n                <div className=\"loader loader--style3\" title=\"2\">\n                    <svg version=\"1.1\" id=\"loader-1\" xmlns=\"http://www.w3.org/2000/svg\"\n                         xmlnsXlink=\"http://www.w3.org/1999/xlink\" x=\"0px\" y=\"0px\"\n                         width=\"40px\" height=\"40px\" viewBox=\"0 0 50 50\" enableBackground={'new 0 0 50 50'}\n                         xmlSpace=\"preserve\">\n  <path fill=\"#000\"\n        d=\"M43.935,25.145c0-10.318-8.364-18.683-18.683-18.683c-10.318,0-18.683,8.365-18.683,18.683h4.068c0-8.071,6.543-14.615,14.615-14.615c8.072,0,14.615,6.543,14.615,14.615H43.935z\">\n    <animateTransform attributeType=\"xml\"\n                      attributeName=\"transform\"\n                      type=\"rotate\"\n                      from=\"0 25 25\"\n                      to=\"360 25 25\"\n                      dur=\"0.6s\"\n                      repeatCount=\"indefinite\"/>\n    </path>\n  </svg>\n                </div>\n                {/*<StyleBox>*/}\n                {/*<Slide direction=\"up\" in={true} mountOnEnter unmountOnExit>*/}\n                {/*<Box textAlign={'center'} >*/}\n                {/*    <Typography component={'h1'} variant={'h1'} fontWeight={500} fontFamily={'DINCondensed2'} fontSize={96} style={{textTransform: \"uppercase\"}} >*/}\n                {/*        {t('titleLoopring')}*/}\n                {/*    </Typography>*/}\n                {/*    <Typography component={'h2'}   marginTop={3}  fontSize={32} fontFamily={'DINCondensed2'}>*/}\n                {/*        {t('labelLoopringDescribe')}*/}\n                {/*    </Typography>*/}\n                {/*    /!*<Typography marginY={2} component={'p'} variant={'body1'} color={'textSecondary'}>*!/*/}\n                {/*    /!*    <Trans i18nKey={message}>*!/*/}\n                {/*    /!*        If you believe this is indeed a bug, please <Link*!/*/}\n                {/*    /!*        component={'a'}*!/*/}\n                {/*    /!*        onClick={(e) => {*!/*/}\n                {/*    /!*            window.location.href = getContactInfo();*!/*/}\n                {/*    /!*            e.preventDefault();*!/*/}\n                {/*    /!*        }}*!/*/}\n                {/*    /!*    >contact us</Link> <br/> We would appreciate your feedback*!/*/}\n\n                {/*    /!*    </Trans>*!/*/}\n                {/*    /!*    /!*{t(message)}*!/*!/*/}\n                {/*    /!*    /!*{t(messageKey)}*!/*!/*/}\n                {/*    /!*</Typography>*!/*/}\n                {/*</Box>*/}\n                {/*</Slide>*/}\n                {/*</StyleBox>*/}\n            </StyleBox>\n\n        {/*</Container>*/}\n\n        {/*<Footer></Footer>*/}\n    </>\n}\n","import { ModalProvider } from 'styled-react-modal'\nimport RouterView from './routers'\nimport { GlobalStyles } from '@material-ui/core';\nimport { css, Theme, useTheme } from '@emotion/react';\nimport { ErrorMap, globalCss, SagaStatus } from '@loopring-web/common-resources';\n// import { GlobalProvider, Web3ReactManager } from './provider/';\nimport { useInit } from './hook';\n// import loadingSvg from '@loopring-web/common-resources/assets/svg/loading.svg';\nimport { ErrorPage } from './pages/ErrorPage';\nimport { LoadingPage } from './pages/LoadingPage';\nimport { GlobalProvider } from './provider';\n\nconst App = () => {\n  const theme: Theme = useTheme();\n  const { state } = useInit();\n  // const [status, setStatus] = React.useState<keyof typeof SagaStatus>('PENDING');\n  // check all status be\n  //TODO  demo if  tokenMapStatus is unset and tokenMap is empty. show error\n  //TODO tokenMapObj.status is pending, show global loading\n  //console.log(tokenMapObj.tokenMap && Object.keys(tokenMapObj.tokenMap).length>0,tokenMapObj.status, tokenMapObj.errorMessage)\n\n  // useEffect(() => {\n  //     if (state === SagaStatus.PENDING || state === SagaStatus.ERROR) {\n  //         setStatus(state)\n  //     } else {\n  //         setStatus('DONE')\n  //     }\n  // }, [state, setStatus])\n\n  return <><GlobalStyles styles={css` \n      ${globalCss({ theme })};\n      body{\n          ${theme.mode === 'dark' ? `\n            color: ${theme.colorBase.textPrimary};\n          ` : ``}\n      }\n      body:before {\n        ${theme.mode === 'dark' ? `\n            background: #191C30;\n            background: ${theme.colorBase.background().bg};\n       ` : ''}\n      }\n      //#root{\n      //  display: flex;\n      //  flex-direction: column;\n      //}\n}`}></GlobalStyles>\n    <ModalProvider>\n      <GlobalProvider>\n        {/*<Web3ReactManager>*/}\n        {state === 'PENDING' ?\n          <LoadingPage />\n          // <ErrorPage {...ErrorMap.LOADING_WHOLE_SITE}/>\n          // <Avatar src={loadingSvg}/>\n          : state === 'ERROR' ? <ErrorPage {...ErrorMap.NO_NETWORK_ERROR} /> : <>\n            <RouterView />\n\n            {/*    <ErrorPage {...ErrorMap.LOADING_WHOLE_SITE}/>*/}\n          </>}\n      </GlobalProvider>\n\n    </ModalProvider></>\n\n\n}\n\nexport default App;\n\n\n","import React from 'react';\nimport { useCustomDCEffect } from 'hooks/common/useCustomDCEffect';\nimport { useSystem } from './stores/system';\nimport { ChainId, sleep } from 'loopring-sdk';\nimport { useAmmMap } from './stores/Amm/AmmMap';\nimport { SagaStatus } from '@loopring-web/common-resources';\nimport { useTokenMap } from './stores/token';\nimport { useAccount } from './stores/account/hook';\nimport { connectProvides, walletServices } from '@loopring-web/web3-provider';\nimport { useAccountInit } from './hookAccountInit';\nimport { useAmmActivityMap } from './stores/Amm/AmmActivityMap';\nimport { useTicker } from './stores/ticker';\nimport { checkAccount } from './services/account/checkAccount';\n// import { statusUnset as accountStatusUnset } from './stores/account';\n\n/**\n * @description\n * @step1 subscribe Connect hook\n * @step2 check the session storage ? choose the provider : none provider\n * @step3 decide china Id by step2\n * @step4 prepare the static date (tokenMap, ammMap, faitPrice, gasPrice, forex, Activities ...)\n * @step5 launch the page\n * @todo each step has error show the ErrorPage , next version for service maintain page.\n */\n\nexport function useInit() {\n    const [state, setState] = React.useState<keyof typeof SagaStatus>('PENDING')\n    // const {updateWalletLayer1, resetLayer1, status:walletLayer1Status,statusUnset:wallet1statusUnset} = useWalletLayer1()\n    // const {updateWalletLayer2, resetLayer2, status:walletLayer2Status,statusUnset:wallet2statusUnset } = useWalletLayer2();\n    const {account, updateAccount, resetAccount, status:accountStatus,statusUnset:accountStatusUnset} = useAccount();\n    const {status: tokenMapStatus, statusUnset: tokenMapStatusUnset}  = useTokenMap();\n    const {status: ammMapStatus, statusUnset: ammMapStatusUnset}  = useAmmMap();\n    const {updateSystem, status: systemStatus, statusUnset: systemStatusUnset} = useSystem();\n    const {status:ammActivityMapStatus,statusUnset:ammActivityMapStatusUnset}  = useAmmActivityMap()\n    const {status: tickerStatus,statusUnset: tickerStatusUnset} = useTicker();\n\n    useCustomDCEffect(async () => {\n        // TODO getSessionAccount infor\n\n        if (account.accAddress !== '' && account.connectName && account.connectName !== 'unknown') {\n            try {\n                await connectProvides[ account.connectName ](account.accAddress);\n                updateAccount({})\n                if (connectProvides.usedProvide && connectProvides.usedWeb3) {\n\n                    // @ts-ignore\n                    let chainId = Number(connectProvides.usedProvide?.connector?.chainId) ??  Number(await connectProvides.usedWeb3.eth.getChainId())\n                    if( ChainId[chainId] === undefined) {\n                        chainId = account._chainId && account._chainId !=='unknown'? account._chainId  :ChainId.MAINNET\n                    }\n                    updateSystem({chainId:chainId as any})\n                    return\n                }\n            } catch (error) {\n                //await resetAccount({shouldUpdateProvider:true});\n                walletServices.sendDisconnect('',`error at init loading  ${error}, disconnect`)\n                const chainId = account._chainId && account._chainId !=='unknown'? account._chainId  :ChainId.MAINNET\n                updateSystem({chainId})\n            }\n        } else  {\n            if(account.accAddress === '' ||  account.connectName === 'unknown' ){\n                resetAccount() \n            }\n            const chainId = account._chainId && account._chainId !=='unknown'? account._chainId  :ChainId.MAINNET\n            updateSystem({chainId})\n        }\n\n    }, [])\n    React.useEffect(() => {\n        switch (systemStatus) {\n            case \"ERROR\":\n                systemStatusUnset();\n                setState('ERROR')\n                //TODO show error at button page show error  some retry dispat again\n                break;\n            case \"DONE\":\n                systemStatusUnset();\n                break;\n            default:\n                break;\n        }\n    }, [systemStatus, systemStatusUnset]);\n    React.useEffect(() => {\n        switch (tokenMapStatus) {\n            case \"ERROR\":\n                tokenMapStatusUnset();\n                setState('ERROR')\n                break;\n            case \"DONE\":\n                tokenMapStatusUnset();\n                break;\n            default:\n                break;\n        }\n        switch (ammMapStatus) {\n            case \"ERROR\":\n                ammMapStatusUnset();\n                setState('ERROR')\n                break;\n            case \"DONE\":\n                ammMapStatusUnset();\n                break;\n            default:\n                break;\n        }\n        if(tokenMapStatus === SagaStatus.UNSET && ammMapStatus ===  SagaStatus.UNSET ){\n            setState('DONE')\n        }\n    }, [tokenMapStatus,ammMapStatus])\n\n    React.useEffect(() => {\n        switch (ammActivityMapStatus) {\n            case \"ERROR\":\n                ammActivityMapStatusUnset();\n                // setState('ERROR')\n                //TODO: show error at button page show error  some retry dispath again\n                break;\n            case \"DONE\":\n                ammActivityMapStatusUnset();\n                break;\n            default:\n                break;\n        }\n    }, [ammActivityMapStatus])\n    React.useEffect(() => {\n        switch (tickerStatus) {\n            case \"ERROR\":\n                console.log(\"ERROR\", 'get ticker error,ui');\n                tickerStatusUnset()\n                break;\n            case \"PENDING\":\n                break;\n            case \"DONE\":\n                tickerStatusUnset();\n                break;\n            default:\n                break;\n        }\n    }, [tickerStatus])\n\n    useAccountInit({state})\n    // React.useEffect(() => {\n    //     if (tokenMapStatus === SagaStatus.ERROR|| tokenState.status === \"ERROR\") {\n    //         //TODO: solve errorx\n    //         ammMapState.statusUnset();\n    //\n    //         setState('ERROR');\n    //     } else if(){\n    //         ammMapState.statusUnset();\n    //         tokenState.statusUnset();\n    //     }\n    //     if (ammMapState.status === \"DONE\" && tokenState.status === \"DONE\") {\n    //\n    //         setState('DONE');\n    //     }\n    // }, [ammMapStatus])\n\n\n    return {\n        state,\n    }\n}\n\n\n","import { Provider } from 'react-redux'\nimport ReactDOM from 'react-dom'\nimport App from './App'\nimport reportWebVitals from './reportWebVitals'\n\n// import { createWeb3ReactRoot, Web3ReactProvider } from '@web3-react/core'\nimport store from 'stores' //{persistor}\n// import { getLibrary } from 'utils/web3_tools'\n// import { NetworkContextName } from 'loopring-sdk'\nimport { getTheme, i18n, provider, ProviderComposer } from \"@loopring-web/common-resources\"\n\nimport { ThemeProvider as MuThemeProvider } from '@material-ui/core'\nimport LocalizationProvider from '@material-ui/pickers/LocalizationProvider'\n\nimport MomentUtils from '@material-ui/lab/AdapterMoment'\n\nimport { ThemeProvider } from \"@emotion/react\"\n\nimport { I18nextProvider } from \"react-i18next\"\n\n// const Web3ProviderNetwork = createWeb3ReactRoot(NetworkContextName)\nconst providers = [\n    provider(LocalizationProvider as any, {dateAdapter: MomentUtils}),\n    provider(I18nextProvider as any, {i18n: i18n}),\n    provider(MuThemeProvider as any, {theme: getTheme('dark')}),\n    provider(ThemeProvider as any, {theme: getTheme('dark')}),\n    provider(Provider as any, {store}),// persistor\n]\n\nReactDOM.render(\n// @ts-ignore\n    <ProviderComposer providers={providers}>\n        {/*<Web3ReactProvider getLibrary={getLibrary}>*/}\n        {/*    <Web3ProviderNetwork getLibrary={getLibrary}>*/}\n        <App/>\n        {/*</Web3ProviderNetwork>*/}\n        {/*</Web3ReactProvider>*/}\n    </ProviderComposer>,\n    document.getElementById('root')\n)\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\n\nif (process.env.NODE_ENV !== 'production') {\n    reportWebVitals(console.log)\n}\n","import { createSlice, PayloadAction, Slice } from '@reduxjs/toolkit'\nimport { AmmMapStates, GetAmmMapParams } from './interface';\nimport { SagaStatus } from '@loopring-web/common-resources';\n\n\nconst initialState: Required<AmmMapStates<object, object>> = {\n    ammMap: undefined,\n    __timer__: -1,\n    status: 'PENDING',\n    errorMessage: null,\n}\nconst ammMapSlice: Slice = createSlice({\n    name: 'ammMap',\n    initialState,\n    reducers: {\n        getAmmMap(state, action: PayloadAction<GetAmmMapParams>) {\n            state.status = SagaStatus.PENDING\n        },\n        getAmmMapStatus(state, action: PayloadAction<AmmMapStates<any, any>>) {\n            // @ts-ignore\n            if (action.error) {\n                state.status = SagaStatus.ERROR\n                // @ts-ignore\n                state.errorMessage = action.error\n            }\n            const {ammMap, __timer__} = action.payload\n            if (ammMap) {\n                state.ammMap = ammMap;\n            }\n            if (__timer__) {\n                state.__timer__ = __timer__;\n            }\n            state.status = SagaStatus.DONE\n        },\n        updateRealTimeAmmMap(state, action: PayloadAction<undefined>) {\n            state.status = SagaStatus.PENDING\n        },\n        statusUnset: state => {\n            state.status = SagaStatus.UNSET\n        }\n    },\n});\nexport { ammMapSlice };\nexport const {getAmmMap, getAmmMapStatus, statusUnset, updateRealTimeAmmMap} = ammMapSlice.actions\n","import { createSlice, PayloadAction, Slice } from '@reduxjs/toolkit'\nimport { SagaStatus, StateBase } from '@loopring-web/common-resources';\nimport { SocketMap } from './interface';\n\nconst initialState: StateBase & { socket: SocketMap } = {\n    socket: {},\n    status: 'PENDING',\n    errorMessage: null,\n}\nconst socketSlice: Slice<StateBase & { socket: SocketMap }> = createSlice({\n    name: 'socket',\n    initialState,\n    reducers: {\n        socketEnd(state, action: PayloadAction<undefined>) {\n            state.socket = {};\n            state.status = SagaStatus.PENDING;\n        },\n        sendSocketTopic(state, action: PayloadAction<{ socket: SocketMap }>) {\n            state.socket = action.payload.socket\n        },\n        getSocketStatus(state, action: PayloadAction<undefined>) {\n\n            // @ts-ignore\n            if (action.error) {\n                state.status = SagaStatus.ERROR\n                // @ts-ignore\n                state.errorMessage = action.error\n            }\n            // state.socket = action.payload.socket\n            state.status = SagaStatus.DONE\n        },\n\n        statusUnset: state => {\n            state.status = SagaStatus.UNSET\n        }\n\n    },\n});\nexport { socketSlice };\nexport const {getSocketStatus, sendSocketTopic, socketEnd, statusUnset} = socketSlice.actions;\n","import { createSlice, PayloadAction, Slice } from '@reduxjs/toolkit'\nimport { TickerStates } from './interface';\nimport { CoinKey, SagaStatus } from '@loopring-web/common-resources';\n\nconst initialState: Required<TickerStates> = {\n    tickerMap: {},\n    status: 'PENDING',\n    errorMessage: null,\n}\nconst tickerMapSlice: Slice = createSlice({\n    name: 'tickerMap',\n    initialState,\n    reducers: {\n        getTicker(state, action: PayloadAction<CoinKey<any>>) {\n            state.status = SagaStatus.PENDING\n        },\n        getTickers(state, action: PayloadAction<Array<CoinKey<any>>>) {\n            state.status = SagaStatus.PENDING\n        },\n        getTickerStatus(state, action: PayloadAction<TickerStates>) {\n            // @ts-ignore\n            if (action.error) {\n                state.status = SagaStatus.ERROR\n                // @ts-ignore\n                state.errorMessage = action.error\n            }\n            state.tickerMap = action.payload.tickerMap;//{...state.tickerMap,...};\n            state.status = SagaStatus.DONE\n        },\n        statusUnset: state => {\n            state.status = SagaStatus.UNSET\n        }\n\n    },\n});\nexport { tickerMapSlice };\nexport const {getTicker, getTickers, getTickerStatus, statusUnset} = tickerMapSlice.actions;","import { createSlice, PayloadAction, Slice } from '@reduxjs/toolkit'\nimport { GetTokenMapParams, TokenMapStates } from './interface';\nimport { SagaStatus } from '@loopring-web/common-resources';\n\nconst initialState: TokenMapStates<object> = {\n    coinMap: {},\n    totalCoinMap: {},\n    addressIndex: undefined,\n    tokenMap: undefined,\n    marketMap: undefined,\n    idIndex: undefined,\n    status: 'PENDING',\n    errorMessage: null,\n}\nconst tokenMapSlice: Slice<TokenMapStates<object>> = createSlice({\n    name: 'tokenMap',\n    initialState,\n    reducers: {\n        getTokenMap(state, action: PayloadAction<GetTokenMapParams<any>>) {\n            state.status = SagaStatus.PENDING\n        },\n        getTokenMapStatus(state, action: PayloadAction<TokenMapStates<object>>) {\n            // @ts-ignore      console.log(action.type)\n            if (action.error) {\n                state.status = SagaStatus.ERROR\n                // @ts-ignore\n                state.errorMessage = action.error\n            }\n\n            const {\n                tokenMap,\n                totalCoinMap,\n                marketMap,\n                addressIndex,\n                idIndex,\n                coinMap,\n                marketArray,\n                marketCoins\n            } = action.payload;\n            if (tokenMap) {\n                state.tokenMap = tokenMap\n            }\n            if (marketMap) {\n                state.marketMap = marketMap\n            }\n            if (addressIndex) {\n                state.addressIndex = addressIndex\n            }\n            if (idIndex) {\n                state.idIndex = idIndex\n            }\n            if (coinMap) {\n                state.coinMap = coinMap\n            }\n            if (totalCoinMap) {\n                state.totalCoinMap = totalCoinMap\n            }\n            if (marketArray) {\n                state.marketArray = marketArray\n            }\n            if (marketCoins) {\n                state.marketCoins = marketCoins\n            }\n            // if (tokenPairsMap) {state.tokenPairsMap = tokenPairsMap }\n            state.status = SagaStatus.DONE;\n        },\n\n        // getTokenPairMap(state, action: PayloadAction<{tokenPairs: TokenPairs }>) {\n        //     const {tokenPairs} = action.payload;\n        //     const tokenPairsMap =  Reflect.ownKeys(tokenPairs).reduce((prev,key)=>{\n        //         // @ts-ignore\n        //         return prev[key as string] =  tokenPairs[key as string].tokenList\n        //     }, {} )\n        //     if (tokenPairsMap) {state.tokenPairsMap = tokenPairsMap }\n        //     // state.status = SagaStatus.PENDING\n        // },\n        statusUnset: state => {\n            state.status = SagaStatus.UNSET\n        }\n\n    },\n});\nexport { tokenMapSlice };\nexport const {getTokenMap, getTokenMapStatus, statusUnset} = tokenMapSlice.actions;","import { useDispatch, useSelector } from 'react-redux'\nimport { getTicker, getTickers, statusUnset } from './reducer';\nimport { TickerStates } from './interface';\nimport { CoinKey } from '@loopring-web/common-resources';\nimport React from 'react';\n\nexport function useTicker(): TickerStates & {\n    updateTickers: (tickerKeys: Array<CoinKey<any>>) => void,\n    updateTicker: (tickerKey: CoinKey<any>) => void,\n    statusUnset: () => void,\n} {\n    const tickerMap: TickerStates = useSelector((state: any) => state.tickerMap)\n    const dispatch = useDispatch();\n    return {\n        ...tickerMap,\n        statusUnset: React.useCallback(() => dispatch(statusUnset(undefined)), [dispatch]),\n        updateTickers: React.useCallback((tickerKeys: Array<CoinKey<any>>) => dispatch(getTickers({tickerKeys})), [dispatch]),\n        updateTicker: React.useCallback((tickerKey: CoinKey<any>) => dispatch(getTicker({tickerKey})), [dispatch]),\n    }\n\n}\n","import { useDispatch, useSelector } from 'react-redux'\nimport { sendSocketTopic, socketEnd } from './reducer';\nimport { SocketMap } from './interface';\nimport React from 'react';\nimport { statusUnset } from '../Amm/AmmMap';\nimport { StateBase } from '@loopring-web/common-resources';\n\nexport function useSocket(): StateBase & {\n    // socketStart:()=>void,\n    statusUnset: () => void,\n    sendSocketTopic: (socket: SocketMap) => void,\n    socketEnd: () => void\n} {\n    const socket: StateBase & { socket: SocketMap } = useSelector((state: any) => state.socket)\n    const dispatch = useDispatch();\n    // const socketStart = () => {\n    //     dispatch(socketSlice.actions.socketStart(undefined))\n    // }\n    // const sendSocketTopic = (socket: SocketMap) => {\n    //     dispatch(socketSlice.actions.sendSocketTopic({socket}))\n    // }\n    // const socketEnd = () => {\n    //     dispatch(socketSlice.actions.socketEnd(undefined))\n    // }\n    // const statusUnset = () => {\n    //     dispatch(socketSlice.actions.statusUnset(undefined))\n    // }\n    return {\n        ...socket,\n        statusUnset: React.useCallback(() => dispatch(statusUnset(undefined)), [dispatch]),\n        sendSocketTopic: React.useCallback((socket: SocketMap) => dispatch(sendSocketTopic({socket})), [dispatch]),\n        socketEnd: React.useCallback(() => dispatch(socketEnd(undefined)), [dispatch]),\n    }\n\n}\n","import React from 'react';\nimport { useAmmMap } from '../../../stores/Amm/AmmMap';\nimport { AmmDetail, CustomError, ErrorMap, SagaStatus, } from '@loopring-web/common-resources';\nimport { deepClone } from '../../../utils/obj_tools';\nimport { useTokenMap } from '../../../stores/token';\nimport { useSocket } from '../../../stores/socket';\nimport { useTicker } from '../../../stores/ticker';\n\n// import { tickerService } from '../../../services/tickerService';\n\nexport function useAmmMapUI<R extends { [ key: string ]: any }, I extends { [ key: string ]: any }>({pageSize}: { pageSize: number }) {\n    const [rawData, setRawData] = React.useState<Array<AmmDetail<any>> | []>([]);\n    const [page, setPage] = React.useState<number>(1);\n    const [timestamp, setTimestamp] = React.useState<NodeJS.Timer | -1>(-1)\n    const {coinMap} = useTokenMap();\n    const {ammMap, status: ammMapStatus,} = useAmmMap();\n    const {\n        tickerMap,\n        status: tickerStatus,\n        updateTickers,\n    } = useTicker();\n    const {status: socketStatus, statusUnset: socketStatusUnset,} = useSocket();\n    const updateRawData = React.useCallback((tickerMap) => {\n        try {\n            const _ammMap = deepClone(ammMap);\n            for (let tickerMapKey in tickerMap) {\n                if (_ammMap[ 'AMM-' + tickerMapKey ]) {\n                    _ammMap[ 'AMM-' + tickerMapKey ].tradeFloat = {\n                        ..._ammMap[ 'AMM-' + tickerMapKey ].tradeFloat,\n                        ...tickerMap[ tickerMapKey ],\n                        // APY: _ammMap['AMM-' + tickerMapKey ].APY\n                    }\n\n                }\n            }\n            setRawData(Object.keys(_ammMap).map((ammKey: string) => {\n                if (coinMap) {\n                    _ammMap[ ammKey ][ 'coinAInfo' ] = coinMap[ _ammMap[ ammKey ][ 'coinA' ] ];\n                    _ammMap[ ammKey ][ 'coinBInfo' ] = coinMap[ _ammMap[ ammKey ][ 'coinB' ] ];\n                }\n                return _ammMap[ ammKey ];\n            }))\n        } catch (error) {\n            throw new CustomError({...ErrorMap.NO_TOKEN_MAP, options: error})\n        }\n\n    }, [ammMap]);\n    const updateTickerLoop = React.useCallback((_keys?: string[]) => {\n\n        if (timestamp !== -1) {\n            clearTimeout(timestamp)\n        }\n\n        setTimestamp(setTimeout(() => {\n            updateTickerLoop(_keys);\n        }, 60000))\n\n        //console.log(_keys)\n        setImmediate(updateTickers, _keys as string[])\n    },[])\n\n    const updateTickersUI = React.useCallback((_page) => {\n        setPage(_page);\n        if (ammMap && Object.keys(ammMap).length > 0) {\n            const _keys = []\n            for (let i = (page - 1) * pageSize; i < Object.keys(ammMap).length && i < (page - 1) * pageSize + pageSize; i++) {\n                _keys.push(Object.keys(ammMap)[ i ]);\n            }\n            \n            // setKeys(_keys);\n            updateTickerLoop(_keys);\n            // try{\n            //    // socketStart({})\n            // }catch (error){\n            //\n            // }\n\n\n        }\n    }, [ammMap, pageSize]);\n    React.useEffect(() => {\n        if (ammMap && Object.keys(ammMap).length !== 0) {\n            updateTickersUI(page)\n        }\n    }, []);\n    React.useEffect(() => {\n        if (tickerStatus === SagaStatus.UNSET){\n            updateRawData(tickerMap)\n        }\n    }, [tickerStatus]);\n    React.useEffect(() => {\n        if(ammMapStatus === SagaStatus.UNSET){\n            updateTickersUI(1)\n        }\n    }, [ammMapStatus, updateTickersUI]);\n    return {\n        page,\n        rawData,\n        updateTickersUI,\n    }\n}\n\n","import { useDispatch, useSelector } from 'react-redux'\nimport { getTokenMap, statusUnset} from './reducer';\nimport { GetTokenMapParams, TokenMapStates } from './interface';\nimport React from 'react';\nimport { PayloadAction } from '@reduxjs/toolkit';\n\nexport function useTokenMap<R extends {[key:string]:any}>(): TokenMapStates<R> & {\n    getTokenMap:(props:PayloadAction<GetTokenMapParams<any>>)=>void,\n    statusUnset:()=>void,\n} {\n    const tokenMap:TokenMapStates<R> = useSelector((state: any) => state.tokenMap)\n    const dispatch = useDispatch();\n\n    return {\n        ...tokenMap,\n        statusUnset:React.useCallback(()=>dispatch(statusUnset(undefined)),[dispatch]),\n        getTokenMap:React.useCallback((props:PayloadAction<GetTokenMapParams<R>>)=>dispatch(getTokenMap(props)),[dispatch]),\n    }\n\n}\n"],"sourceRoot":""}