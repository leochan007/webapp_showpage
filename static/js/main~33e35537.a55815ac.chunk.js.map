{"version":3,"sources":["../node_modules/zrender/lib/core/util.js","../node_modules/zrender/lib/canvas/graphic.js","../node_modules/zrender/lib/graphic/Text.js","../node_modules/zrender/lib/core/bbox.js","../node_modules/zrender/lib/graphic/TSpan.js","../node_modules/zrender/lib/animation/easing.js","../node_modules/zrender/lib/animation/Clip.js","../node_modules/zrender/lib/animation/Animator.js","../node_modules/zrender/lib/contain/windingLine.js","../node_modules/zrender/lib/core/vector.js","../node_modules/zrender/lib/core/LRU.js","../node_modules/zrender/lib/graphic/helper/image.js","../node_modules/zrender/lib/contain/line.js","../node_modules/zrender/lib/contain/util.js","../node_modules/zrender/lib/contain/polygon.js","../node_modules/zrender/lib/graphic/IncrementalDisplayable.js","../node_modules/zrender/lib/graphic/helper/subPixelOptimize.js","../node_modules/zrender/lib/canvas/helper.js","../node_modules/zrender/lib/core/matrix.js","../node_modules/zrender/lib/mixin/Draggable.js","../node_modules/zrender/lib/core/GestureMgr.js","../node_modules/zrender/lib/Handler.js","../node_modules/zrender/lib/Storage.js","../node_modules/zrender/lib/animation/Animation.js","../node_modules/zrender/lib/dom/HandlerProxy.js","../node_modules/zrender/lib/zrender.js","../node_modules/zrender/lib/core/BoundingRect.js","../node_modules/zrender/lib/tool/morphPath.js","../node_modules/zrender/lib/core/curve.js","../node_modules/zrender/lib/graphic/LinearGradient.js","../node_modules/zrender/lib/graphic/helper/roundSector.js","../node_modules/zrender/lib/graphic/shape/Sector.js","../node_modules/zrender/node_modules/tslib/tslib.es6.js","../node_modules/zrender/lib/tool/transformPath.js","../node_modules/zrender/lib/tool/path.js","../node_modules/xtend/immutable.js","../node_modules/zrender/lib/core/env.js","../node_modules/zrender/lib/graphic/helper/parseText.js","../node_modules/zrender/lib/graphic/shape/Circle.js","../node_modules/zrender/lib/graphic/shape/Ellipse.js","../node_modules/zrender/lib/graphic/shape/Polygon.js","../node_modules/zrender/lib/graphic/shape/Polyline.js","../node_modules/zrender/lib/graphic/shape/Line.js","../node_modules/zrender/lib/tool/parseXML.js","../node_modules/zrender/lib/contain/text.js","../node_modules/zrender/lib/core/timsort.js","../node_modules/zrender/lib/animation/requestAnimationFrame.js","../node_modules/zrender/lib/graphic/helper/dashStyle.js","../node_modules/zrender/lib/core/fourPointsTransform.js","../node_modules/zrender/lib/core/dom.js","../node_modules/zrender/lib/contain/cubic.js","../node_modules/zrender/lib/contain/arc.js","../node_modules/zrender/lib/contain/path.js","../node_modules/zrender/lib/graphic/Path.js","../node_modules/zrender/lib/tool/color.js","../node_modules/zrender/lib/core/event.js","../node_modules/zrender/lib/contain/quadratic.js","../node_modules/zrender/lib/graphic/Gradient.js","../node_modules/zrender/lib/core/WeakMap.js","../node_modules/zrender/lib/graphic/helper/smoothSpline.js","../node_modules/zrender/lib/graphic/helper/poly.js","../node_modules/zrender/lib/graphic/helper/smoothBezier.js","../node_modules/zrender/lib/graphic/shape/Ring.js","../node_modules/zrender/lib/graphic/shape/BezierCurve.js","../node_modules/zrender/lib/graphic/shape/Arc.js","../node_modules/zrender/lib/tool/parseSVG.js","../node_modules/zrender/lib/core/Point.js","../node_modules/zrender/lib/graphic/Image.js","../node_modules/zrender/lib/graphic/Displayable.js","../node_modules/zrender/lib/core/Eventful.js","../node_modules/zrender/lib/graphic/CompoundPath.js","../node_modules/zrender/lib/graphic/RadialGradient.js","../node_modules/zrender/lib/core/OrientedBoundingRect.js","../node_modules/zrender/lib/core/PathProxy.js","../node_modules/zrender/lib/config.js","../node_modules/zrender/lib/svg/core.js","../node_modules/zrender/lib/core/arrayDiff.js","../node_modules/zrender/lib/svg/graphic.js","../node_modules/zrender/lib/svg/helper/Definable.js","../node_modules/zrender/lib/svg/helper/GradientManager.js","../node_modules/zrender/lib/svg/helper/PatternManager.js","../node_modules/zrender/lib/svg/helper/ClippathManager.js","../node_modules/zrender/lib/svg/helper/ShadowManager.js","../node_modules/zrender/lib/svg/Painter.js","../node_modules/zrender/lib/canvas/Layer.js","../node_modules/zrender/lib/canvas/Painter.js","../node_modules/zrender/lib/graphic/Group.js","../node_modules/zrender/lib/Element.js","../node_modules/zrender/lib/core/Transformable.js","../node_modules/zrender/lib/graphic/shape/Rect.js","../node_modules/zrender/lib/graphic/helper/roundRect.js"],"names":["BUILTIN_OBJECT","TYPED_ARRAY","objToString","Object","prototype","toString","arrayProto","Array","nativeForEach","forEach","nativeFilter","filter","nativeSlice","slice","nativeMap","map","ctorFunction","constructor","protoFunction","methods","$override","name","fn","idStart","guid","logError","args","_i","arguments","length","console","error","apply","clone","source","result","typeStr","call","isPrimitive","i","len","Ctor","from","isDom","key","hasOwnProperty","merge","target","overwrite","isObject","targetProp","sourceProp","isArray","isBuiltInObject","mergeAll","targetAndSources","extend","assign","defaults","overlay","keysArr","keys","createCanvas","indexOf","array","value","inherits","clazz","baseClazz","clazzPrototype","F","prop","superClass","mixin","override","getOwnPropertyNames","keyList","isArrayLike","data","each","arr","cb","context","push","reduce","memo","find","obj","document","createElement","bind","isFunction","func","concat","curry","this","isString","isStringSafe","isNumber","type","isTypedArray","nodeType","ownerDocument","isGradientObject","colorStops","isPatternObject","image","isRegExp","eqNaN","retrieve","retrieve2","value0","value1","retrieve3","value2","normalizeCssArray","val","assert","condition","message","Error","trim","str","replace","primitiveKey","setAsPrimitive","HashMap","isArr","thisMap","visit","set","get","removeKey","createHashMap","concatArray","a","b","newArray","offset","createObject","proto","properties","create","StyleCtor","hasOwn","own","noop","pathProxyForDraw","PathProxy","styleHasStroke","style","stroke","lineWidth","styleHasFill","fill","doFillPath","ctx","fillOpacity","originalGlobalAlpha","globalAlpha","opacity","doStrokePath","strokeOpacity","createCanvasPattern","pattern","el","createOrUpdateImage","__image","isImageReady","canvasPattern","createPattern","repeat","DOMMatrix","matrix","rotateSelf","rotation","Math","PI","scaleSelf","scaleX","scaleY","translateSelf","x","y","setTransform","SHADOW_NUMBER_PROPS","STROKE_PROPS","bindCommonProps","prevStyle","forceSetAll","scope","styleChanged","flushPathDrawn","DEFAULT_COMMON_STYLE","blend","globalCompositeOperation","propName","dpr","shadowColor","bindPathAndTextCommonStyle","prevEl","getStyle","inHover","fillStyle","strokeStyle","hasStroke","newLineWidth","strokeNoScale","getLineScale","setContextTransform","m","transform","batchFill","batchStroke","__hoverStyle","brushSingle","brush","viewWidth","viewHeight","isLast","shouldBePainted","__dirty","Element","REDARAW_BIT","__isRendered","clipPaths","__clipPaths","prevElClipPaths","forceSetTransform","forceSetStyle","isClipPathChanged","restore","allClipped","save","clipPath","isZeroArea","beginPath","buildPath","shape","clip","updateClipStatus","beforeBrush","innerBeforeBrush","m0","m1","canBatchPath","Path","autoBatch","hasFill","lineDash","strokePercent","canPathBatch","lastDrawType","inBatch","strokePart","firstDraw","path","silent","createPathProxy","hasFillGradient","hasStrokeGradient","hasFillPattern","hasStrokePattern","fillGradient","strokeGradient","fillPattern","strokePattern","rect","getBoundingRect","getCanvasGradient","__canvasFillGradient","__canvasStrokeGradient","__canvasFillPattern","__canvasStrokePattern","normalizeLineDash","lineDashOffset","ctxLineDash","setLineDash","scale","getGlobalScale","setScale","segmentIgnoreThreshold","lineScale_1","rawVal","needsRebuild","SHAPE_CHANGED_BIT","setDPR","setContext","reset","setLineDashOffset","toStatic","pathUpdated","rebuildPath","strokeFirst","brushPath","TSpan","text","font","DEFAULT_FONT","textAlign","textBaseline","hasLineDash","lineScale_2","strokeText","fillText","brushText","ZRImage","bindImageStyle","onload","width","getWidth","height","getHeight","aspect","sWidth","sHeight","sx","sy","drawImage","brushImage","IncrementalDisplayable","displayables","getDisplayables","temporalDisplayables","getTemporalDisplayables","innerScope","getCursor","displayable","innerAfterBrush","afterBrush","i_1","len_1","clearTemporalDisplayables","notClear","brushIncremental","DEFAULT_RICH_TEXT_COLOR","DEFAULT_TEXT_ANIMATION_PROPS","fontSize","lineHeight","textShadowColor","textShadowBlur","textShadowOffsetX","textShadowOffsetY","backgroundColor","padding","borderColor","borderWidth","borderRadius","DEFAULT_COMMON_ANIMATION_PROPS","ZRText","_super","opts","_this","_children","_defaultStyle","attr","__extends","childrenRef","update","_updateSubTexts","child","zlevel","z","z2","culling","cursor","invisible","attachedTransform","updateTransform","copy","getComputedTransform","__hostTarget","updateInnerText","_childCursor","normalizeStyle","rich","_updateRichTexts","_updatePlainTexts","styleUpdated","addSelfToZr","zr","__zr","removeSelfFromZr","_rect","tmpRect","BoundingRect","children","tmpMat","childRect","getLocalTransform","applyTransform","union","setDefaultTextStyle","defaultTextStyle","setTextContent","textContent","_mergeStyle","targetStyle","sourceStyle","sourceRich","targetRich","_mergeRich","richNames","richName","getAnimationStyleProps","_getOrCreateChild","parent","textFont","textPadding","getStyleText","contentBlock","parsePlainText","needDrawBg","needDrawBackground","bgColorDrawn","outerHeight","textLines","lines","defaultStyle","baseX","baseY","align","verticalAlign","textX","textY","adjustTextY","contentHeight","outerWidth_1","boxX","adjustTextX","boxY","_renderBackground","getTextXForPadding","defaultLineWidth","useDefaultFill","textFill","textStroke","getStroke","autoStroke","hasShadow","fixedBoundingRect","overflow","calculatedLineHeight","subElStyle","createStyle","useStyle","shadowBlur","shadowOffsetX","shadowOffsetY","setBoundingRect","parseRichText","contentWidth","outerWidth","xLeft","lineTop","xRight","line","tokens","tokenCount","remainedWidth","leftIndex","lineXLeft","lineXRight","rightIndex","token","_placeToken","parentBgColorDrawn","tokenStyle","styleName","isLineHolder","innerHeight","textWidth","textHeight","topStyle","rectEl","imgEl","rectStyle","textBackgroundColor","textBorderWidth","textBorderColor","isPlainBg","textBorderRadius","self","Rect","rectShape","r","dirtyShape","dirtyStyle","imgStyle","borderDash","borderDashOffset","strokeContainThreshold","commonStyle","makeFont","fontFamily","fontWeight","isNaN","fontStyle","join","Displayable","VALID_TEXT_ALIGN","left","right","center","VALID_TEXT_VERTICAL_ALIGN","top","bottom","middle","mathMin","min","mathMax","max","mathSin","sin","mathCos","cos","PI2","start","vec2","end","extremity","fromPoints","points","p","fromLine","x0","y0","x1","y1","xDim","yDim","fromCubic","x2","y2","x3","y3","cubicExtrema","curve","cubicAt","n","Infinity","fromQuadratic","quadraticExtremum","quadraticAt","tx","ty","fromArc","rx","ry","startAngle","endAngle","anticlockwise","vec2Min","vec2Max","diff","abs","tmp","angle","DEFAULT_TSPAN_STYLE","miterLimit","DEFAULT_PATH_STYLE","w","initDefaultProps","dirtyRectTolerance","easing","linear","k","quadraticIn","quadraticOut","quadraticInOut","cubicIn","cubicOut","cubicInOut","quarticIn","quarticOut","quarticInOut","quinticIn","quinticOut","quinticInOut","sinusoidalIn","sinusoidalOut","sinusoidalInOut","exponentialIn","pow","exponentialOut","exponentialInOut","circularIn","sqrt","circularOut","circularInOut","elasticIn","s","asin","elasticOut","elasticInOut","backIn","backOut","backInOut","bounceIn","bounceOut","bounceInOut","Clip","_initialized","_startTime","_pausedTime","_paused","_life","life","_delay","delay","loop","gap","onframe","ondestroy","onrestart","step","globalTime","deltaTime","percent","easingFunc","easingFuncs","schedule","_restart","remainder","pause","resume","arraySlice","interpolateNumber","p0","p1","interpolate1DArray","out","add1DArray","sign","add2DArray","len2","j","fillArray","val0","val1","arrDim","arr0","arr1","arr0Len","arr1Len","is1DArraySame","catmullRomInterpolate","p2","p3","t","t2","t3","v0","v1","catmullRomInterpolate1DArray","cloneValue","ret","rgba2String","rgba","floor","tmpRgba","Track","keyframes","maxTime","interpolable","_needsSort","_isAllValueEqual","_lastFrame","_lastFramePercent","isFinished","_finished","setFinished","_additiveTrack","needsAnimate","getAdditiveTrack","addKeyframe","time","arrayDim","guessArrayDim","lastFrame","colorArray","color","isValueColor","kf","prepare","additiveTrack","kfs","sort","kfsLen","lastKf","startValue","additiveValue","frameIdx","isAdditive","valueKey","kfsNum","nextFrame","frame","range","targetArr","_additiveValue","useSpline","catmullRomInterpolate2DArray","interpolate2DArray","_addToTarget","Animator","additiveTo","_tracks","_trackKeys","_maxTime","_started","_clip","_target","_loop","_additiveAnimators","getTarget","changeTarget","when","props","whenWithKeys","propNames","tracks","track","initialValue","_getAdditiveTrack","lastFinalKf","isPaused","_doneCallback","_setTracksFinished","doneList","_doneList","_abortedCallback","animation","abortedList","_abortedList","removeClip","tracksKeys","trackName","additiveAnimators","getTrack","forceAnimate","stillHasAdditiveAnimator","onframeList","_onframeList","addClip","stop","forwardToLast","during","done","aborted","getClip","stopTracks","allAborted","saveFinalToTarget","trackKeys","__changeFinalValue","finalProps","pop","windingLine","dir","x_","v","add","v2","scaleAndAdd","sub","lenSquare","lengthSquare","mul","div","dot","normalize","d","distance","dist","distanceSquare","distSquare","negate","lerp","Entry","LinkedList","_len","insert","entry","insertEntry","head","tail","next","prev","remove","clear","LRU","maxSize","_list","_maxSize","_map","put","list","removed","_lastRemovedEntry","leastUsedEntry","globalImageCache","findExistImage","newImageOrSrc","cachedImgObj","hostEl","cbPayload","__zrImageSrc","pendingWrap","pending","Image","onerror","imageOnLoad","__cachedImgObj","src","dirty","containStroke","_l","_a","normalizeRadian","isAroundEqual","contain","incremental","_displayables","_temporaryDisplayables","_cursor","traverse","clearDisplaybles","markRedraw","addDisplayable","notPersistent","addDisplayables","eachPendingDisplayable","needLocalTransform","localPos","transformCoordToLocal","Displayble","round","subPixelOptimizeLine","outputShape","inputShape","subPixelOptimize","subPixelOptimizeRect","originX","originY","originWidth","originHeight","position","positiveOrNegative","doubledPosition","canvasGradient","global","createRadialGradient","createLinearGradient","addColorStop","prevClipPaths","identity","m2","out0","out1","out2","out3","out4","out5","translate","rotate","rad","aa","ac","atx","ab","ad","aty","st","ct","vx","vy","invert","det","Param","e","topTarget","Draggable","handler","on","_dragStart","_drag","_dragEnd","draggingTarget","draggable","_draggingTarget","dragging","_x","offsetX","_y","offsetY","dispatchToElement","event","dx","dy","drift","dropTarget","findHover","lastDropTarget","_dropTarget","GestureMgr","_track","recognize","root","_doTrack","_recognize","touches","trackItem","touch","pos","eventUtil","zrX","zrY","eventName","recognizers","gestureInfo","pointPair","pinch","trackLen","pinchEnd","pinchPre","pinchScale","isFinite","pinchCenter","pinchX","pinchY","SILENT","stopEvent","eventTool","EmptyProxy","dispose","setCursor","Eventful","HoveredResult","handlerNames","Handler","storage","painter","proxy","painterRoot","_hovered","setHandlerProxy","_draggingMgr","util","mousemove","isOutside","isOutsideBoundary","lastHovered","lastHoveredTarget","hovered","hoveredTarget","mouseout","eventControl","zrEventControl","trigger","resize","dispatch","eventArgs","setCursorStyle","cursorStyle","targetInfo","eventKey","eventPacket","eveType","cancelBubble","gestureEvent","wheelDelta","zrDelta","zrByTouch","which","makeEventPacket","eachOtherLayer","layer","exclude","getDisplayList","hoverCheckResult","ignore","isHover","processGesture","stage","_gestureMgr","gestureMgr","dom","res","rectHover","isSilent","ignoreClip","getClipPath","handlerInstance","_downEl","_downPoint","_upEl","invalidZErrorLogged","logInvalidZError","warn","shapeCompareFunc","Storage","_roots","_displayList","_displayListLen","displayableSortFunc","includeIgnore","displayList","updateDisplayList","roots","_updateAndAddDisplayable","env","canvasSupported","timsort","beforeUpdate","afterUpdate","userSetClipPath","currentClipPath","parentClipPath","disp","decalEl","getDecalElement","textGuide","getTextGuideLine","textEl","getTextContent","addRoot","delRoot","l","idx","splice","delAllRoots","getRoots","Animation","_running","_time","_pauseStart","_clipsHead","_clipsTail","addAnimator","animator","removeAnimator","notTriggerFrameAndStageUpdate","Date","getTime","delta","nextClip","_startLoop","requestAnimationFrame","animate","options","globalEventSupported","domSupported","localNativeListenerNames","mouseHandlerNames","pointerEventNameMap","pointerdown","pointerup","pointermove","pointerout","mouse","pointer","zrUtil","nm","globalNativeListenerNames","wheelEventSupported","isPointerFromTouch","pointerType","markTouch","isLocalEl","instance","elTmp","isLocal","domBelongToZr","parentNode","FakeGlobalEvent","stopPropagation","stopImmediatePropagation","preventDefault","currentTarget","clientX","clientY","localDOMHandlers","mousedown","normalizeEvent","__mayPointerCapture","downPoint","__togglePointerCapture","mouseup","toElement","relatedTarget","__pointerCapturing","wheel","mousewheel","touchstart","__lastTouchMoment","touchmove","touchend","click","globalDOMHandlers","pointerCaptureReleasing","mountLocalDOMEventListeners","domHandlers","pointerEventsSupported","nativeEventName","mountSingleDOMEventListener","touchEventsSupported","touching","touchTimer","clearTimeout","setTimeout","setTouchTimer","getNativeEvent","mountGlobalDOMEventListeners","mount","normalizeGlobalEvent","capture","listener","opt","mounted","listenerOpts","addEventListener","domTarget","unmountDOMEventListeners","removeEventListener","DOMHandlerScope","HandlerDomProxy","_localHandlerScope","_globalHandlerScope","isPointerCapturing","globalHandlerScope","useVML","painterCtors","instances","ZRender","id","_sleepAfterStill","_stillFrameAccum","_needsRefresh","_needsRefreshHover","_darkMode","rendererType","renderer","useDirtyRect","handerProxy","node","worker","HandlerProxy","getViewportRoot","_flush","refresh","configLayer","zLevel","config","setBackgroundColor","_backgroundColor","lum","DARK_MODE_THRESHOLD","totalLum","isDarkMode","getBackgroundColor","setDarkMode","darkMode","refreshImmediately","fromInside","flush","triggerRendered","refreshHoverImmediately","elapsedTime","setSleepAfterStill","stillFramesCount","wakeUp","addHover","removeHover","clearHover","refreshHover","getType","clearAnimation","pathToImage","eventHandler","off","Group","init","disposeAll","getInstance","registerPainter","version","lt","Point","rb","lb","rt","minTv","maxTv","other","calculateTransform","intersect","mtv","ax0","ax1","ay0","ay1","bx0","bx1","by0","by1","overlap","dMin","dMax","d0","d1","d2","d3","plain","isZero","maxX","maxY","CMD","PROP_XY","PROP_WH","tmpArr","aroundEqual","pathToBezierCurves","currentSubpath","bezierArray","xi","yi","createNewSubpath","addLine","addArc","cx","cy","tan","c1","s1","c2","s2","x4","y4","hx","hy","cmd","isFirst","L","C","Q","M","A","R","Z","alignSubpath","subpath1","subpath2","len1","shorterPath","shorterLen","shorterBezierCount","eachCurveSubDivCount","ceil","newSubpath","remained","tmpSegX","tmpSegY","actualSubDivCount","cubicSubdivide","createSubpath","lastSubpathSubpath","otherSubpath","lastX","lastY","centroid","signedArea","findBestRingOffset","fromSubBeziers","toSubBeziers","fromCp","toCp","bezierCount","bestScore","bestOffset","cursorOffset","score","reverse","newArr","morphPath","fromPath","toPath","animationOpts","fromPathProxy","toPathProxy","isIndividualMorphingPath","__oldBuildPath","array1","array2","lastSubpath1","lastSubpath2","newArray1","newArray2","newSubpath1","newSubpath2","alignBezierCurves","morphingData","fromArr","toArr","searchAngleIteration","searchAngleRange","fromNeedsReverse","fromSubpathBezier","toSubpathBezier","newFromSubpathBezier","newToSubpathBezier","bestAngle","tmpArr_1","sa","ca","newX1","newY1","to","findBestMorphingRotation","morphT","updateIndividualMorphingPath","morphingPath","morphingPathBuildPath","becomeIndividualMorphingPath","oldDone","oldAborted","oldDuring","animateTo","__morphT","__morphingData","onet","newCp","item","moveTo","bezierCurveTo","isCombiningPath","__combiningSubList","isInAnyMorphing","combine","fromPathList","copyPropsIfDivided","fromIndividuals","separateCount","fromCombiningSubList","dividingMethod","toPathSplittedList","divideShape","doneCount","abortedCalled","morphAnimationOpts","combiningPath","updateCombiningPathSubList","__oldAddSelfToZr","__oldRemoveSelfFromZr","restoreCombiningPath","combiningSubList","combiningAddSelfToZr","combiningRemoveSelfFromZr","combiningChildrenRef","becomeCombiningPath","toIndividuals","count","combiningPathSubListAddRemoveWithZr","method","separate","toPathList","toPathListLen","copyProps","duplicateShape","resultPaths","splitPropIdx","toPathShape","propWH","propXY","subWH","xyCurr","subShape","splitted","Sector","clockwise","angleCurr","r0","splitShape","ctor","mathPow","mathSqrt","EPSILON","EPSILON_NUMERIC","THREE_SQRT","ONE_THIRD","_v0","v2Create","_v1","_v2","isAroundZero","isNotAroundZero","cubicDerivativeAt","cubicRootAt","c","B","t1","disc","K","discSqrt","Y1","Y2","T","theta","acos","ASqrt","extrema","p01","p12","p23","p012","p123","p0123","cubicProjectPoint","interval","_t","v2DistSquare","cubicLength","iteration","px","py","quadraticDerivativeAt","quadraticRootAt","divider","quadraticSubdivide","quadraticProjectPoint","quadraticLength","LinearGradient","globalCoord","Gradient","mathACos","mathATan2","atan2","mathAbs","computeCornerTangents","radius","cr","x01","y01","lo","ox","oy","x11","y11","x10","y10","x00","y00","cx0","cy0","cx1","cy1","dx0","dy0","dx1","dy1","innerRadius","hasRadius","arc","tmpAngles","normalizeArcAngles","cornerRadius","innerCornerRadius","halfRd","icr","cr0","cr1","xrs","yrs","xire","yire","xre","yre","xirs","yirs","it_1","x32","y32","ct0","ct1","lineTo","closePath","SectorShape","getDefaultShape","roundSectorHelper","extendStatics","setPrototypeOf","__proto__","__","mathAtan2","vMag","vRatio","u","vAngle","processArc","fa","fs","psiDeg","psi","xp","yp","lambda","f","cxp","cyp","dTheta","addData","commandReg","numberReg","SVGPath","isPathProxy","setData","createPathOptions","pathProxy","prevCmd","cpx","cpy","subpathX","subpathY","cmdList","match","cmdText","cmdStr","charAt","pLen","parseFloat","ctlPtx","ctlPty","pathData","createPathProxyFromString","innerOpts","getContext","nPoint","v2ApplyTransform","p_1","increaseVersion","transformPath","createFromString","extendFromString","defaultOpts","Sub","mergePath","pathEls","pathList","pathEl","shapeChanged","pathBundle","appendPath","module","exports","Browser","firefox","ie","edge","newEdge","weChat","browser","wxa","svgSupported","wx","getSystemInfoSync","navigator","ua","test","split","SVGRect","window","detect","userAgent","STYLE_REG","truncateText","containerWidth","ellipsis","prepareTruncateOptions","truncateSingleLine","preparedOpts","maxIterations","minChar","cnCharWidth","ascCharWidth","placeholder","ellipsisWidth","textLine","subLength","estimateLength","substr","charCode","charCodeAt","truncate","getLineHeight","truncateLineOverflow","lineOverflow","wrapText","lineCount","truncateMinChar","maxWidth","RichTextToken","RichTextLine","RichTextContentBlock","topWidth","topHeight","wrapInfo","accumWidth","breakAll","lastIndex","exec","matchedIndex","index","pushTokens","substring","pendingList","calculatedHeight","calculatedWidth","stlPadding","truncateLine","finishLine","outer","paddingH","tokenHeight","styleTokenWidth","tokenWidthNotSpecified","percentWidth","bgImg","imageHelper","remainTruncWidth","parseInt","block","strLines","linesWidths","isEmptyStr","newLine","tokenPadding","tokenPaddingH","maxValue","lastIndexOf","parsePercent","tokensLen","breakCharMap","ch","isWordBreakChar","code","isLatin","isBreakAll","lastAccumWidth","currentWord","currentWordWidth","chWidth","inWord","CircleShape","Circle","inBundle","EllipseShape","Ellipse","PolygonShape","smooth","smoothConstraint","Polygon","polyHelper","PolylineShape","Polyline","getDefaultStyle","subPixelOptimizeOutputShape","LineShape","Line","optimizedShape","pointAt","parseXML","svg","DOMParser","parseFromString","svgNode","firstChild","nodeName","toLowerCase","nextSibling","_ctx","_cachedFont","textWidthCache","measureText","cacheOfFont","innerGetBoundingRect","uniondRect","calculateTextPosition","textPosition","halfHeight","textVerticalAlign","makeAscendingRun","hi","compare","runHi","reverseRun","binaryInsertionSort","mid","pivot","gallopLeft","hint","lastOffset","maxOffset","gallopRight","TimSort","runStart","runLength","minGallop","stackSize","mergeAt","start1","length1","start2","length2","cursor1","cursor2","dest","count1","count2","exit","_minGallop","mergeLow","customCursor","customDest","mergeHigh","mergeRuns","forceMergeRuns","pushRun","_runStart","_runLength","remaining","ts","minRun","minRunLength","force","msRequestAnimationFrame","mozRequestAnimationFrame","webkitRequestAnimationFrame","lineType","LN2","log","determinant","rows","rank","rowStart","rowMask","colMask","detCache","cacheKey","fullRank","colStart","subRowMask","subRowStart","sum","colLocalIdx","colTag","buildTransformer","mA","vh","srcPointX","srcPointY","pk","_calcOut","transformLocalCoord","elFrom","elTarget","inX","inY","transformCoordWithViewport","inverse","getBoundingClientRect","isCanvasEl","saved","transformer","markers","transformerName","oldSrcCoords","srcCoords","destCoords","oldCoordTheSame","ii","offsetLeft","offsetTop","preparePointerTransformer","propLR","propTB","marker","idxLR","idxTB","cssText","appendChild","prepareCoordMarkers","toUpperCase","swapExtrema","windingCubic","nRoots","nExtrema","y0_","y1_","unit","windingQuadratic","y_","windingArc","tmp_1","containPath","isStroke","cubic","quadratic","lineCap","DEFAULT_PATH_ANIMATION_PROPS","pathCopyParams","decal","_decalEl","decalElStyle","_init","attrKV","canBeInsideText","getInsideTextFill","pathFill","fillLum","DARK_LABEL_COLOR","LIGHTER_LABEL_COLOR","LIGHT_LABEL_COLOR","getInsideTextStroke","shapeCfg","needsUpdateRect","firstInvoke","rectWithStroke","_rectWithStroke","lineScale","pathContain","animateShape","updateDuringAnimation","targetKey","setShape","keyOrObj","_innerSaveToNormal","toState","normalState","_normalState","_applyStateObj","stateName","state","keepCurrentStates","transition","animationCfg","targetShape","needsRestoreToNormal","targetShapePrimaryProps","shapeKeys","_transitionState","_mergeStates","states","mergedShape","mergedState","defaultProps","pathProto","STYLE_CHANGED_BIT","kCSSColorTable","clampCssByte","clampCssFloat","parseCssInt","parseCssFloat","cssHueToRgb","h","lerpNumber","setRgba","g","copyRgba","colorCache","lastRemovedArr","putToCache","colorStr","rgbaArr","parse","cached","iv","strLen","op","ep","fname","params","alpha","hsla2rgba","hsla","lift","level","colorArr","stringify","toHex","fastLerp","normalizedValue","colors","leftColor","rightColor","dv","fastMapToColor","fullOutput","mapToColor","modifyHSL","H","S","G","vMin","vMax","deltaR","deltaG","deltaB","rgba2hsla","modifyAlpha","arrColor","backgroundLum","random","isDomLevel2","MOUSE_EVENT_REG","clientToLocal","calculate","calculateZrXY","layerX","layerY","ex","ey","box","eventType","targetTouches","changedTouches","rawWheelDelta","deltaX","deltaY","getWheelDeltaMayPolyfill","detail","button","undefined","attachEvent","detachEvent","returnValue","isMiddleOrRightButtonOnMouseUpDown","wmUniqueIndex","WeakMap","_id","_guard","defineProperty","enumerable","configurable","has","TypeError","interpolate","controlPoints","isLoop","constraint","prevPoint","nextPoint","cps","v2Min","v2Max","point","v2Clone","v2Sub","v2Scale","v2Distance","cp0","v2Add","cp1","shift","smoothBezier","cp2","segs","w2","w3","smoothSpline","RingShape","Ring","BezierCurveShape","cpx1","cpy1","someVectorAt","isTangent","cpx2","cpy2","BezierCurve","quadraticCurveTo","tangentAt","ArcShape","Arc","unitX","unitY","nodeParsers","DILIMITER_REG","SVGParser","_defs","_root","_isDefine","_isText","xml","viewBox","getAttribute","parseAttributes","viewBoxRect","viewBoxTransform","_parseNode","viewBoxArr","makeViewBoxTransform","ignoreViewBox","elRoot","ignoreRootClip","setClipPath","xmlNode","parentGroup","parser","defineParsers","def","_parseText","_textX","_textY","inheritStyle","textStyle","internalField","circle","ellipse","pointsArr","pointsStr","parsePoints","polygon","polyline","img","setStyle","gradient","offsetStr","stopColor","_parseGradientColorStops","__inheritedStyle","pointsString","attributesMap","defs","onlyInlineStyle","zrStyle","transformOps_1","transformRegex","valueArr","setLocalTransform","parseTransformAttribute","styleRegResult","styleList","styleRegex","svgAttrName","parseStyleAttribute","attrValue","getPaint","urlRegex","urlMatch","parseSVG","equal","scalar","toArray","fromArray","input","DEFAULT_IMAGE_STYLE","DEFAULT_IMAGE_ANIMATION_PROPS","_getSize","dim","size","imageSource","otherDim","otherDimSize","STYLE_MAGIC_KEY","PRIMARY_STATES_KEYS","considerClipPath","considerAncestors","viewRect","isDisplayableCulled","parent_1","rectContain","coord","getPaintRect","_paintRect","elRect","shadowSize","tolerance","setPrevPaintRect","paintRect","_prevPaintRect","getPrevPaintRect","animateStyle","__inHover","isStyleObject","_savePrimaryToNormal","changedKeys","targetKeys","mergedStyle","dispProto","eventProcessors","_$eventProcessor","query","_$handlers","_h","eventProcessor","normalizeQuery","wrap","callAtLast","zrEventfulCallAtLast","lastWrap","newList","argLen","hItem","afterTrigger","triggerWithContext","CompoundPath","_updatePathDirty","paths","dirtyPath","RadialGradient","extent","extent2","OrientedBoundingRect","_corners","_axes","_origin","fromBoundingRect","corners","axes","overlapped","noMtv","_intersectCheckOneSide","axis","_getProjMinMaxOnAxis","dist0","dist1","origin","proj","proj_1","tmpOutX","tmpOutY","min2","max2","hasTypedArray","Float32Array","modPI2","radian","angles","newStartAngle","newEndAngle","notSaveData","_version","_xi","_yi","_x0","_y0","_saveData","getVersion","_ux","_uy","_lineDash","_dashOffset","_pathSegLen","_pathLen","exceedUnit","_needsDash","_dashedLineTo","_dashedBezierTo","_dashedQuadraticTo","arcTo","_dashIdx","lineDashSum","_dashSum","appendSize","appendPathData","_expandData","newData","dash","dashSum","nDash","bezierLen","tmpLen","Number","MAX_VALUE","_calculateLength","ux","uy","pathSegLen","pathTotalLen","segCount","displayedLength","drawPart","accumLength","isEllipse","breakBuild","d_1","devicePixelRatio","screen","deviceXDPI","logicalXDPI","createElementNS","extractCommon","basePath","oldArr","diagonalPath","equals","newLen","oldLen","newPos","oldPos","commonCount","components","added","indices","pushComponent","last","buildValues","componentPos","componentLen","component","arrayDiff","editLength","maxEditLength","bestPath","execEditLength","addPath","removePath","canAdd","canRemove","NONE","mathRound","degree","round3","round4","svgEl","setAttribute","bindStyle","pathHasFill","pathHasStroke","strokeWidth","strokeScale_1","lineJoin","SVGPathRebuilder","_d","_str","_add","firstCmd","dThetaPositive","isCircle","unifiedTheta","large","_invalid","generateStr","getStr","svgPath","__svgEl","pathVersion","elExt","svgPathBuilder","__svgPathBuilder","__svgPathVersion","svgImage","HTMLImageElement","HTMLCanvasElement","toDataURL","dw","dh","__imageSrc","setAttributeNS","attrXLink","TEXT_ALIGN_TO_ANCHOR","svgText","textSvgEl","attrXML","Definable","zrId","svgRoot","tagNames","markLabel","domName","nextId","_domName","_zrId","_svgRoot","_tagNames","_markLabel","getDefs","isForceCreating","getElementsByTagName","defs_1","insertBefore","contains","doUpdate","onUpdate","addDom","removeDom","removeChild","getDoms","doms","tagName","tags","markAllUnused","that","markDomUsed","markDomUnused","isDomUnused","removeUnused","getSvgProxy","getSvgElement","isLinearGradient","isRadialGradient","isGradient","GradientManager","addWithoutUpdate","svgElement","that_1","fillOrStroke","__dom","markUsed","updateDom","innerHTML","stop_1","colorTool","hex","isPattern","patternDomMap","PatternManager","patternDom","SVGElement","svgWidth","svgHeight","prevImage","imageSrc","createdImage","hasClipPath","ClippathManager","_refGroups","_keyDuplicateCount","_getClipPathGroup","prevDisplayable","keyDuplicateCount","clipPathKey","generateClipPathsKey","clipGroup","parentEl","clipPathEl","_dom","newRefGroupsMap","group","ShadowManager","_shadowDomMap","_shadowDomPool","_getFromPool","shadowDom","domChild","shadowKey","globalScale","toFixed","getShadowKey","_shadowDom","blur","stdDeviation","shadowDomsPool","parseInt10","checkParentAvailable","insertAfter","prevSibling","prepend","SVGPainter","createMethodNotSupport","_opts","svgDom","bgRoot","_gradientManager","_patternManager","_clipPathManager","_shadowManager","viewport","_svgDom","_backgroundRoot","_viewport","_visibleList","getSvgDom","getSvgRoot","getViewportRootOffset","viewportRoot","_paintList","_backgroundNode","bgNode","createSVGElement","tag","paintOne","svgProxy","gradientManager","patternManager","clipPathManager","shadowManager","visibleList","listLen","newVisibleList","prevSvgElement","topPrevSvgElement","currentClipGroup","_getDefs","display","_width","_height","viewportStyle","whIdx","wh","cwh","plt","prb","stl","defaultView","getComputedStyle","viewportNode","outerHTML","encodeURIComponent","returnFalse","createDom","newDom","newDomStyle","Layer","motionBlur","lastFrameAlpha","virtual","maxRepaintRectCount","__firstTimePaint","__used","__drawIndex","__startIndex","__endIndex","__prevStartIndex","__prevEndIndex","domStyle","onselectstart","webkitUserSelect","userSelect","webkitTapHighlightColor","margin","domBack","ctxBack","getElementCount","initContext","setUnpainted","createBackBuffer","createRepaintRects","prevList","hasIntersections","mergedRepaintRects","full","pendingRect","addRectToMergePool","boundingRect","isMerged","minDeltaArea","bestRectToMergeIdx","mergedRect","pendingRect_1","aArea","bArea","deltaArea","shouldPaint","prevRect","curRect","_paintRects","debugGetPaintRects","clearAll","clearColor","repaintRects","haveMotionBLur","doClear","clearRect","clearColorGradientOrPattern","__canvasGradient","__painter","fillRect","HOVER_LAYER_ZLEVEL","CANVAS_ZLEVEL","EL_AFTER_INCREMENTAL_INC","CanvasPainter","_zlevelList","_prevDisplayList","_layers","_layerConfig","_needsManuallyCompositing","singleCanvas","_singleCanvas","rootStyle","zlevelList","layers","rootCanvas","mainLayer","__builtin__","_domRoot","domRoot","createRoot","isSingleCanvas","paintAll","_redrawId","_paintHoverList","hoverLayer","_hoverlayer","getLayer","getHoverLayer","redrawId","_updateLayerStatus","_doPaintList","finished","needsRefreshHover","_compositeManually","eachLayer","self_1","eachBuiltinLayer","layerList","zi","_loop_1","this_1","useTimer","now","startTime","firstEl","repaint","repaintRect","_doPaintEl","draw","currentLayer","insertLayer","layersMap","prevLayer","isLayerValid","prevDom","getLayers","updatePrevLayer","prevZlevel","incrementalLayerCount","_clearLayer","layerConfig","_zlevel","delLayer","clearLayer","getRenderedCanvas","imageLayer","pixelRatio","width_1","height_1","renderToCanvas","canvas","shadowBlurSize","leftMargin","rightMargin","topMargin","bottomMargin","pathTransform","imgShape","isGroup","childAt","childOfName","childCount","_doAdd","addBefore","replaceAt","old","removeAll","eachChild","stopped","includeChildren","PRESERVED_NORMAL_STATE","DEFAULT_ANIMATABLE_MAP","tmpTextPosCalcRes","tmpBoundingRect","animators","currentStates","decomposeTransform","forceUpdate","_textContent","textConfig","local","textStyleChanged","innerOrigin","layoutRect","textOrigin","relOriginX","relOriginY","textOffset","isInside","inside","innerTextDefaultStyle","_innerTextDefaultStyle","insideFill","insideStroke","outsideFill","outsideStroke","getOutsideFill","getOutsideStroke","isDark","setTextConfig","extra","hide","show","saveCurrentToNormalState","fromStateTransition","__fromStateTransition","targetName","primaryKeys","hasState","getState","ensureState","clearStates","noAnimation","useState","toNormalState","stateTransition","stateProxy","useHoverLayer","_toggleHoverLayerFlag","duration","_textGuide","_updateAnimationTargets","useStates","stateObjects","notChange","stateObj","removeState","replaceState","oldState","newState","forceAdd","newStateExists","toggleState","enable","mergedTextConfig","transitionTarget","hasTransition","propNeedsTransition","_attachComponent","componentEl","_detachComponent","_clipPath","removeClipPath","previousTextContent","removeTextContent","Transformable","cfg","setTextGuideLine","guideLine","removeTextGuideLine","stopAnimation","leftAnimators","animationProps","animateFrom","elProto","logs","logDeprecatedError","xKey","yKey","createLegacyProperty","privateKey","enhanceArray","animatable","animateToShallow","finishCount","doneHappened","cfgDone","cfgAborted","doneCb","abortedCb","copyArrShallow","copyValue","sourceArr","len0","topKey","animatableKeys","additive","setToFinal","animateAll","innerKey","keyLen","existsAnimators","existsAnimatorsOnSameTarget","revertedSource","reversedTarget","sourceClone","mIdentity","scaleTmp","tmpTransform","originTransform","setPosition","setOrigin","parentHasTransform","_resolveGlobalScaleRatio","globalScaleRatio","relX","relY","invTransform","transformNode","ancestors","vector","transformCoordToGlobal","RectShape","r1","r2","r3","r4","total","roundRectHelper"],"mappings":"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","file":"static/js/main~33e35537.a55815ac.chunk.js","sourcesContent":["var BUILTIN_OBJECT = {\n    '[object Function]': true,\n    '[object RegExp]': true,\n    '[object Date]': true,\n    '[object Error]': true,\n    '[object CanvasGradient]': true,\n    '[object CanvasPattern]': true,\n    '[object Image]': true,\n    '[object Canvas]': true\n};\nvar TYPED_ARRAY = {\n    '[object Int8Array]': true,\n    '[object Uint8Array]': true,\n    '[object Uint8ClampedArray]': true,\n    '[object Int16Array]': true,\n    '[object Uint16Array]': true,\n    '[object Int32Array]': true,\n    '[object Uint32Array]': true,\n    '[object Float32Array]': true,\n    '[object Float64Array]': true\n};\nvar objToString = Object.prototype.toString;\nvar arrayProto = Array.prototype;\nvar nativeForEach = arrayProto.forEach;\nvar nativeFilter = arrayProto.filter;\nvar nativeSlice = arrayProto.slice;\nvar nativeMap = arrayProto.map;\nvar ctorFunction = function () { }.constructor;\nvar protoFunction = ctorFunction ? ctorFunction.prototype : null;\nvar methods = {};\nexport function $override(name, fn) {\n    methods[name] = fn;\n}\nvar idStart = 0x0907;\nexport function guid() {\n    return idStart++;\n}\nexport function logError() {\n    var args = [];\n    for (var _i = 0; _i < arguments.length; _i++) {\n        args[_i] = arguments[_i];\n    }\n    if (typeof console !== 'undefined') {\n        console.error.apply(console, args);\n    }\n}\nexport function clone(source) {\n    if (source == null || typeof source !== 'object') {\n        return source;\n    }\n    var result = source;\n    var typeStr = objToString.call(source);\n    if (typeStr === '[object Array]') {\n        if (!isPrimitive(source)) {\n            result = [];\n            for (var i = 0, len = source.length; i < len; i++) {\n                result[i] = clone(source[i]);\n            }\n        }\n    }\n    else if (TYPED_ARRAY[typeStr]) {\n        if (!isPrimitive(source)) {\n            var Ctor = source.constructor;\n            if (Ctor.from) {\n                result = Ctor.from(source);\n            }\n            else {\n                result = new Ctor(source.length);\n                for (var i = 0, len = source.length; i < len; i++) {\n                    result[i] = clone(source[i]);\n                }\n            }\n        }\n    }\n    else if (!BUILTIN_OBJECT[typeStr] && !isPrimitive(source) && !isDom(source)) {\n        result = {};\n        for (var key in source) {\n            if (source.hasOwnProperty(key)) {\n                result[key] = clone(source[key]);\n            }\n        }\n    }\n    return result;\n}\nexport function merge(target, source, overwrite) {\n    if (!isObject(source) || !isObject(target)) {\n        return overwrite ? clone(source) : target;\n    }\n    for (var key in source) {\n        if (source.hasOwnProperty(key)) {\n            var targetProp = target[key];\n            var sourceProp = source[key];\n            if (isObject(sourceProp)\n                && isObject(targetProp)\n                && !isArray(sourceProp)\n                && !isArray(targetProp)\n                && !isDom(sourceProp)\n                && !isDom(targetProp)\n                && !isBuiltInObject(sourceProp)\n                && !isBuiltInObject(targetProp)\n                && !isPrimitive(sourceProp)\n                && !isPrimitive(targetProp)) {\n                merge(targetProp, sourceProp, overwrite);\n            }\n            else if (overwrite || !(key in target)) {\n                target[key] = clone(source[key]);\n            }\n        }\n    }\n    return target;\n}\nexport function mergeAll(targetAndSources, overwrite) {\n    var result = targetAndSources[0];\n    for (var i = 1, len = targetAndSources.length; i < len; i++) {\n        result = merge(result, targetAndSources[i], overwrite);\n    }\n    return result;\n}\nexport function extend(target, source) {\n    if (Object.assign) {\n        Object.assign(target, source);\n    }\n    else {\n        for (var key in source) {\n            if (source.hasOwnProperty(key)) {\n                target[key] = source[key];\n            }\n        }\n    }\n    return target;\n}\nexport function defaults(target, source, overlay) {\n    var keysArr = keys(source);\n    for (var i = 0; i < keysArr.length; i++) {\n        var key = keysArr[i];\n        if ((overlay ? source[key] != null : target[key] == null)) {\n            target[key] = source[key];\n        }\n    }\n    return target;\n}\nexport var createCanvas = function () {\n    return methods.createCanvas();\n};\nmethods.createCanvas = function () {\n    return document.createElement('canvas');\n};\nexport function indexOf(array, value) {\n    if (array) {\n        if (array.indexOf) {\n            return array.indexOf(value);\n        }\n        for (var i = 0, len = array.length; i < len; i++) {\n            if (array[i] === value) {\n                return i;\n            }\n        }\n    }\n    return -1;\n}\nexport function inherits(clazz, baseClazz) {\n    var clazzPrototype = clazz.prototype;\n    function F() { }\n    F.prototype = baseClazz.prototype;\n    clazz.prototype = new F();\n    for (var prop in clazzPrototype) {\n        if (clazzPrototype.hasOwnProperty(prop)) {\n            clazz.prototype[prop] = clazzPrototype[prop];\n        }\n    }\n    clazz.prototype.constructor = clazz;\n    clazz.superClass = baseClazz;\n}\nexport function mixin(target, source, override) {\n    target = 'prototype' in target ? target.prototype : target;\n    source = 'prototype' in source ? source.prototype : source;\n    if (Object.getOwnPropertyNames) {\n        var keyList = Object.getOwnPropertyNames(source);\n        for (var i = 0; i < keyList.length; i++) {\n            var key = keyList[i];\n            if (key !== 'constructor') {\n                if ((override ? source[key] != null : target[key] == null)) {\n                    target[key] = source[key];\n                }\n            }\n        }\n    }\n    else {\n        defaults(target, source, override);\n    }\n}\nexport function isArrayLike(data) {\n    if (!data) {\n        return false;\n    }\n    if (typeof data === 'string') {\n        return false;\n    }\n    return typeof data.length === 'number';\n}\nexport function each(arr, cb, context) {\n    if (!(arr && cb)) {\n        return;\n    }\n    if (arr.forEach && arr.forEach === nativeForEach) {\n        arr.forEach(cb, context);\n    }\n    else if (arr.length === +arr.length) {\n        for (var i = 0, len = arr.length; i < len; i++) {\n            cb.call(context, arr[i], i, arr);\n        }\n    }\n    else {\n        for (var key in arr) {\n            if (arr.hasOwnProperty(key)) {\n                cb.call(context, arr[key], key, arr);\n            }\n        }\n    }\n}\nexport function map(arr, cb, context) {\n    if (!arr) {\n        return [];\n    }\n    if (!cb) {\n        return slice(arr);\n    }\n    if (arr.map && arr.map === nativeMap) {\n        return arr.map(cb, context);\n    }\n    else {\n        var result = [];\n        for (var i = 0, len = arr.length; i < len; i++) {\n            result.push(cb.call(context, arr[i], i, arr));\n        }\n        return result;\n    }\n}\nexport function reduce(arr, cb, memo, context) {\n    if (!(arr && cb)) {\n        return;\n    }\n    for (var i = 0, len = arr.length; i < len; i++) {\n        memo = cb.call(context, memo, arr[i], i, arr);\n    }\n    return memo;\n}\nexport function filter(arr, cb, context) {\n    if (!arr) {\n        return [];\n    }\n    if (!cb) {\n        return slice(arr);\n    }\n    if (arr.filter && arr.filter === nativeFilter) {\n        return arr.filter(cb, context);\n    }\n    else {\n        var result = [];\n        for (var i = 0, len = arr.length; i < len; i++) {\n            if (cb.call(context, arr[i], i, arr)) {\n                result.push(arr[i]);\n            }\n        }\n        return result;\n    }\n}\nexport function find(arr, cb, context) {\n    if (!(arr && cb)) {\n        return;\n    }\n    for (var i = 0, len = arr.length; i < len; i++) {\n        if (cb.call(context, arr[i], i, arr)) {\n            return arr[i];\n        }\n    }\n}\nexport function keys(obj) {\n    if (!obj) {\n        return [];\n    }\n    if (Object.keys) {\n        return Object.keys(obj);\n    }\n    var keyList = [];\n    for (var key in obj) {\n        if (obj.hasOwnProperty(key)) {\n            keyList.push(key);\n        }\n    }\n    return keyList;\n}\nfunction bindPolyfill(func, context) {\n    var args = [];\n    for (var _i = 2; _i < arguments.length; _i++) {\n        args[_i - 2] = arguments[_i];\n    }\n    return function () {\n        return func.apply(context, args.concat(nativeSlice.call(arguments)));\n    };\n}\nexport var bind = (protoFunction && isFunction(protoFunction.bind))\n    ? protoFunction.call.bind(protoFunction.bind)\n    : bindPolyfill;\nfunction curry(func) {\n    var args = [];\n    for (var _i = 1; _i < arguments.length; _i++) {\n        args[_i - 1] = arguments[_i];\n    }\n    return function () {\n        return func.apply(this, args.concat(nativeSlice.call(arguments)));\n    };\n}\nexport { curry };\nexport function isArray(value) {\n    if (Array.isArray) {\n        return Array.isArray(value);\n    }\n    return objToString.call(value) === '[object Array]';\n}\nexport function isFunction(value) {\n    return typeof value === 'function';\n}\nexport function isString(value) {\n    return typeof value === 'string';\n}\nexport function isStringSafe(value) {\n    return objToString.call(value) === '[object String]';\n}\nexport function isNumber(value) {\n    return typeof value === 'number';\n}\nexport function isObject(value) {\n    var type = typeof value;\n    return type === 'function' || (!!value && type === 'object');\n}\nexport function isBuiltInObject(value) {\n    return !!BUILTIN_OBJECT[objToString.call(value)];\n}\nexport function isTypedArray(value) {\n    return !!TYPED_ARRAY[objToString.call(value)];\n}\nexport function isDom(value) {\n    return typeof value === 'object'\n        && typeof value.nodeType === 'number'\n        && typeof value.ownerDocument === 'object';\n}\nexport function isGradientObject(value) {\n    return value.colorStops != null;\n}\nexport function isPatternObject(value) {\n    return value.image != null;\n}\nexport function isRegExp(value) {\n    return objToString.call(value) === '[object RegExp]';\n}\nexport function eqNaN(value) {\n    return value !== value;\n}\nexport function retrieve() {\n    var args = [];\n    for (var _i = 0; _i < arguments.length; _i++) {\n        args[_i] = arguments[_i];\n    }\n    for (var i = 0, len = args.length; i < len; i++) {\n        if (args[i] != null) {\n            return args[i];\n        }\n    }\n}\nexport function retrieve2(value0, value1) {\n    return value0 != null\n        ? value0\n        : value1;\n}\nexport function retrieve3(value0, value1, value2) {\n    return value0 != null\n        ? value0\n        : value1 != null\n            ? value1\n            : value2;\n}\nexport function slice(arr) {\n    var args = [];\n    for (var _i = 1; _i < arguments.length; _i++) {\n        args[_i - 1] = arguments[_i];\n    }\n    return nativeSlice.apply(arr, args);\n}\nexport function normalizeCssArray(val) {\n    if (typeof (val) === 'number') {\n        return [val, val, val, val];\n    }\n    var len = val.length;\n    if (len === 2) {\n        return [val[0], val[1], val[0], val[1]];\n    }\n    else if (len === 3) {\n        return [val[0], val[1], val[2], val[1]];\n    }\n    return val;\n}\nexport function assert(condition, message) {\n    if (!condition) {\n        throw new Error(message);\n    }\n}\nexport function trim(str) {\n    if (str == null) {\n        return null;\n    }\n    else if (typeof str.trim === 'function') {\n        return str.trim();\n    }\n    else {\n        return str.replace(/^[\\s\\uFEFF\\xA0]+|[\\s\\uFEFF\\xA0]+$/g, '');\n    }\n}\nvar primitiveKey = '__ec_primitive__';\nexport function setAsPrimitive(obj) {\n    obj[primitiveKey] = true;\n}\nexport function isPrimitive(obj) {\n    return obj[primitiveKey];\n}\nvar HashMap = (function () {\n    function HashMap(obj) {\n        this.data = {};\n        var isArr = isArray(obj);\n        this.data = {};\n        var thisMap = this;\n        (obj instanceof HashMap)\n            ? obj.each(visit)\n            : (obj && each(obj, visit));\n        function visit(value, key) {\n            isArr ? thisMap.set(value, key) : thisMap.set(key, value);\n        }\n    }\n    HashMap.prototype.get = function (key) {\n        return this.data.hasOwnProperty(key) ? this.data[key] : null;\n    };\n    HashMap.prototype.set = function (key, value) {\n        return (this.data[key] = value);\n    };\n    HashMap.prototype.each = function (cb, context) {\n        for (var key in this.data) {\n            if (this.data.hasOwnProperty(key)) {\n                cb.call(context, this.data[key], key);\n            }\n        }\n    };\n    HashMap.prototype.keys = function () {\n        return keys(this.data);\n    };\n    HashMap.prototype.removeKey = function (key) {\n        delete this.data[key];\n    };\n    return HashMap;\n}());\nexport { HashMap };\nexport function createHashMap(obj) {\n    return new HashMap(obj);\n}\nexport function concatArray(a, b) {\n    var newArray = new a.constructor(a.length + b.length);\n    for (var i = 0; i < a.length; i++) {\n        newArray[i] = a[i];\n    }\n    var offset = a.length;\n    for (var i = 0; i < b.length; i++) {\n        newArray[i + offset] = b[i];\n    }\n    return newArray;\n}\nexport function createObject(proto, properties) {\n    var obj;\n    if (Object.create) {\n        obj = Object.create(proto);\n    }\n    else {\n        var StyleCtor = function () { };\n        StyleCtor.prototype = proto;\n        obj = new StyleCtor();\n    }\n    if (properties) {\n        extend(obj, properties);\n    }\n    return obj;\n}\nexport function hasOwn(own, prop) {\n    return own.hasOwnProperty(prop);\n}\nexport function noop() { }\n","import { DEFAULT_COMMON_STYLE } from '../graphic/Displayable';\nimport PathProxy from '../core/PathProxy';\nimport { createOrUpdateImage, isImageReady } from '../graphic/helper/image';\nimport { getCanvasGradient, isClipPathChanged } from './helper';\nimport Path from '../graphic/Path';\nimport ZRImage from '../graphic/Image';\nimport TSpan from '../graphic/TSpan';\nimport { DEFAULT_FONT } from '../contain/text';\nimport { map } from '../core/util';\nimport { normalizeLineDash } from '../graphic/helper/dashStyle';\nimport Element from '../Element';\nimport IncrementalDisplayable from '../graphic/IncrementalDisplayable';\nvar pathProxyForDraw = new PathProxy(true);\nfunction styleHasStroke(style) {\n    var stroke = style.stroke;\n    return !(stroke == null || stroke === 'none' || !(style.lineWidth > 0));\n}\nfunction styleHasFill(style) {\n    var fill = style.fill;\n    return fill != null && fill !== 'none';\n}\nfunction doFillPath(ctx, style) {\n    if (style.fillOpacity != null && style.fillOpacity !== 1) {\n        var originalGlobalAlpha = ctx.globalAlpha;\n        ctx.globalAlpha = style.fillOpacity * style.opacity;\n        ctx.fill();\n        ctx.globalAlpha = originalGlobalAlpha;\n    }\n    else {\n        ctx.fill();\n    }\n}\nfunction doStrokePath(ctx, style) {\n    if (style.strokeOpacity != null && style.strokeOpacity !== 1) {\n        var originalGlobalAlpha = ctx.globalAlpha;\n        ctx.globalAlpha = style.strokeOpacity * style.opacity;\n        ctx.stroke();\n        ctx.globalAlpha = originalGlobalAlpha;\n    }\n    else {\n        ctx.stroke();\n    }\n}\nexport function createCanvasPattern(ctx, pattern, el) {\n    var image = createOrUpdateImage(pattern.image, pattern.__image, el);\n    if (isImageReady(image)) {\n        var canvasPattern = ctx.createPattern(image, pattern.repeat || 'repeat');\n        if (typeof DOMMatrix === 'function') {\n            var matrix = new DOMMatrix();\n            matrix.rotateSelf(0, 0, (pattern.rotation || 0) / Math.PI * 180);\n            matrix.scaleSelf((pattern.scaleX || 1), (pattern.scaleY || 1));\n            matrix.translateSelf((pattern.x || 0), (pattern.y || 0));\n            canvasPattern.setTransform(matrix);\n        }\n        return canvasPattern;\n    }\n}\nfunction brushPath(ctx, el, style, inBatch) {\n    var hasStroke = styleHasStroke(style);\n    var hasFill = styleHasFill(style);\n    var strokePercent = style.strokePercent;\n    var strokePart = strokePercent < 1;\n    var firstDraw = !el.path;\n    if ((!el.silent || strokePart) && firstDraw) {\n        el.createPathProxy();\n    }\n    var path = el.path || pathProxyForDraw;\n    if (!inBatch) {\n        var fill = style.fill;\n        var stroke = style.stroke;\n        var hasFillGradient = hasFill && !!fill.colorStops;\n        var hasStrokeGradient = hasStroke && !!stroke.colorStops;\n        var hasFillPattern = hasFill && !!fill.image;\n        var hasStrokePattern = hasStroke && !!stroke.image;\n        var fillGradient = void 0;\n        var strokeGradient = void 0;\n        var fillPattern = void 0;\n        var strokePattern = void 0;\n        var rect = void 0;\n        if (hasFillGradient || hasStrokeGradient) {\n            rect = el.getBoundingRect();\n        }\n        if (hasFillGradient) {\n            fillGradient = el.__dirty\n                ? getCanvasGradient(ctx, fill, rect)\n                : el.__canvasFillGradient;\n            el.__canvasFillGradient = fillGradient;\n        }\n        if (hasStrokeGradient) {\n            strokeGradient = el.__dirty\n                ? getCanvasGradient(ctx, stroke, rect)\n                : el.__canvasStrokeGradient;\n            el.__canvasStrokeGradient = strokeGradient;\n        }\n        if (hasFillPattern) {\n            fillPattern = (el.__dirty || !el.__canvasFillPattern)\n                ? createCanvasPattern(ctx, fill, el)\n                : el.__canvasFillPattern;\n            el.__canvasFillPattern = fillPattern;\n        }\n        if (hasStrokePattern) {\n            strokePattern = (el.__dirty || !el.__canvasStrokePattern)\n                ? createCanvasPattern(ctx, stroke, el)\n                : el.__canvasStrokePattern;\n            el.__canvasStrokePattern = fillPattern;\n        }\n        if (hasFillGradient) {\n            ctx.fillStyle = fillGradient;\n        }\n        else if (hasFillPattern) {\n            if (fillPattern) {\n                ctx.fillStyle = fillPattern;\n            }\n            else {\n                hasFill = false;\n            }\n        }\n        if (hasStrokeGradient) {\n            ctx.strokeStyle = strokeGradient;\n        }\n        else if (hasStrokePattern) {\n            if (strokePattern) {\n                ctx.strokeStyle = strokePattern;\n            }\n            else {\n                hasStroke = false;\n            }\n        }\n    }\n    var lineDash = style.lineDash && style.lineWidth > 0 && normalizeLineDash(style.lineDash, style.lineWidth);\n    var lineDashOffset = style.lineDashOffset;\n    var ctxLineDash = !!ctx.setLineDash;\n    var scale = el.getGlobalScale();\n    path.setScale(scale[0], scale[1], el.segmentIgnoreThreshold);\n    if (lineDash) {\n        var lineScale_1 = (style.strokeNoScale && el.getLineScale) ? el.getLineScale() : 1;\n        if (lineScale_1 && lineScale_1 !== 1) {\n            lineDash = map(lineDash, function (rawVal) {\n                return rawVal / lineScale_1;\n            });\n            lineDashOffset /= lineScale_1;\n        }\n    }\n    var needsRebuild = true;\n    if (firstDraw || (el.__dirty & Path.SHAPE_CHANGED_BIT)\n        || (lineDash && !ctxLineDash && hasStroke)) {\n        path.setDPR(ctx.dpr);\n        if (strokePart) {\n            path.setContext(null);\n        }\n        else {\n            path.setContext(ctx);\n            needsRebuild = false;\n        }\n        path.reset();\n        if (lineDash && !ctxLineDash) {\n            path.setLineDash(lineDash);\n            path.setLineDashOffset(lineDashOffset);\n        }\n        el.buildPath(path, el.shape, inBatch);\n        path.toStatic();\n        el.pathUpdated();\n    }\n    if (needsRebuild) {\n        path.rebuildPath(ctx, strokePart ? strokePercent : 1);\n    }\n    if (lineDash && ctxLineDash) {\n        ctx.setLineDash(lineDash);\n        ctx.lineDashOffset = lineDashOffset;\n    }\n    if (!inBatch) {\n        if (style.strokeFirst) {\n            if (hasStroke) {\n                doStrokePath(ctx, style);\n            }\n            if (hasFill) {\n                doFillPath(ctx, style);\n            }\n        }\n        else {\n            if (hasFill) {\n                doFillPath(ctx, style);\n            }\n            if (hasStroke) {\n                doStrokePath(ctx, style);\n            }\n        }\n    }\n    if (lineDash && ctxLineDash) {\n        ctx.setLineDash([]);\n    }\n}\nfunction brushImage(ctx, el, style) {\n    var image = el.__image = createOrUpdateImage(style.image, el.__image, el, el.onload);\n    if (!image || !isImageReady(image)) {\n        return;\n    }\n    var x = style.x || 0;\n    var y = style.y || 0;\n    var width = el.getWidth();\n    var height = el.getHeight();\n    var aspect = image.width / image.height;\n    if (width == null && height != null) {\n        width = height * aspect;\n    }\n    else if (height == null && width != null) {\n        height = width / aspect;\n    }\n    else if (width == null && height == null) {\n        width = image.width;\n        height = image.height;\n    }\n    if (style.sWidth && style.sHeight) {\n        var sx = style.sx || 0;\n        var sy = style.sy || 0;\n        ctx.drawImage(image, sx, sy, style.sWidth, style.sHeight, x, y, width, height);\n    }\n    else if (style.sx && style.sy) {\n        var sx = style.sx;\n        var sy = style.sy;\n        var sWidth = width - sx;\n        var sHeight = height - sy;\n        ctx.drawImage(image, sx, sy, sWidth, sHeight, x, y, width, height);\n    }\n    else {\n        ctx.drawImage(image, x, y, width, height);\n    }\n}\nfunction brushText(ctx, el, style) {\n    var text = style.text;\n    text != null && (text += '');\n    if (text) {\n        ctx.font = style.font || DEFAULT_FONT;\n        ctx.textAlign = style.textAlign;\n        ctx.textBaseline = style.textBaseline;\n        var hasLineDash = void 0;\n        if (ctx.setLineDash) {\n            var lineDash = style.lineDash && style.lineWidth > 0 && normalizeLineDash(style.lineDash, style.lineWidth);\n            var lineDashOffset = style.lineDashOffset;\n            if (lineDash) {\n                var lineScale_2 = (style.strokeNoScale && el.getLineScale) ? el.getLineScale() : 1;\n                if (lineScale_2 && lineScale_2 !== 1) {\n                    lineDash = map(lineDash, function (rawVal) {\n                        return rawVal / lineScale_2;\n                    });\n                    lineDashOffset /= lineScale_2;\n                }\n                ctx.setLineDash(lineDash);\n                ctx.lineDashOffset = lineDashOffset;\n                hasLineDash = true;\n            }\n        }\n        if (style.strokeFirst) {\n            if (styleHasStroke(style)) {\n                ctx.strokeText(text, style.x, style.y);\n            }\n            if (styleHasFill(style)) {\n                ctx.fillText(text, style.x, style.y);\n            }\n        }\n        else {\n            if (styleHasFill(style)) {\n                ctx.fillText(text, style.x, style.y);\n            }\n            if (styleHasStroke(style)) {\n                ctx.strokeText(text, style.x, style.y);\n            }\n        }\n        if (hasLineDash) {\n            ctx.setLineDash([]);\n        }\n    }\n}\nvar SHADOW_NUMBER_PROPS = ['shadowBlur', 'shadowOffsetX', 'shadowOffsetY'];\nvar STROKE_PROPS = [\n    ['lineCap', 'butt'], ['lineJoin', 'miter'], ['miterLimit', 10]\n];\nfunction bindCommonProps(ctx, style, prevStyle, forceSetAll, scope) {\n    var styleChanged = false;\n    if (!forceSetAll) {\n        prevStyle = prevStyle || {};\n        if (style === prevStyle) {\n            return false;\n        }\n    }\n    if (forceSetAll || style.opacity !== prevStyle.opacity) {\n        if (!styleChanged) {\n            flushPathDrawn(ctx, scope);\n            styleChanged = true;\n        }\n        ctx.globalAlpha = style.opacity == null ? DEFAULT_COMMON_STYLE.opacity : style.opacity;\n    }\n    if (forceSetAll || style.blend !== prevStyle.blend) {\n        if (!styleChanged) {\n            flushPathDrawn(ctx, scope);\n            styleChanged = true;\n        }\n        ctx.globalCompositeOperation = style.blend || DEFAULT_COMMON_STYLE.blend;\n    }\n    for (var i = 0; i < SHADOW_NUMBER_PROPS.length; i++) {\n        var propName = SHADOW_NUMBER_PROPS[i];\n        if (forceSetAll || style[propName] !== prevStyle[propName]) {\n            if (!styleChanged) {\n                flushPathDrawn(ctx, scope);\n                styleChanged = true;\n            }\n            ctx[propName] = ctx.dpr * (style[propName] || 0);\n        }\n    }\n    if (forceSetAll || style.shadowColor !== prevStyle.shadowColor) {\n        if (!styleChanged) {\n            flushPathDrawn(ctx, scope);\n            styleChanged = true;\n        }\n        ctx.shadowColor = style.shadowColor || DEFAULT_COMMON_STYLE.shadowColor;\n    }\n    return styleChanged;\n}\nfunction bindPathAndTextCommonStyle(ctx, el, prevEl, forceSetAll, scope) {\n    var style = getStyle(el, scope.inHover);\n    var prevStyle = forceSetAll\n        ? null\n        : (prevEl && getStyle(prevEl, scope.inHover) || {});\n    if (style === prevStyle) {\n        return false;\n    }\n    var styleChanged = bindCommonProps(ctx, style, prevStyle, forceSetAll, scope);\n    if (forceSetAll || style.fill !== prevStyle.fill) {\n        if (!styleChanged) {\n            flushPathDrawn(ctx, scope);\n            styleChanged = true;\n        }\n        ctx.fillStyle = style.fill;\n    }\n    if (forceSetAll || style.stroke !== prevStyle.stroke) {\n        if (!styleChanged) {\n            flushPathDrawn(ctx, scope);\n            styleChanged = true;\n        }\n        ctx.strokeStyle = style.stroke;\n    }\n    if (forceSetAll || style.opacity !== prevStyle.opacity) {\n        if (!styleChanged) {\n            flushPathDrawn(ctx, scope);\n            styleChanged = true;\n        }\n        ctx.globalAlpha = style.opacity == null ? 1 : style.opacity;\n    }\n    if (el.hasStroke()) {\n        var lineWidth = style.lineWidth;\n        var newLineWidth = lineWidth / ((style.strokeNoScale && el && el.getLineScale) ? el.getLineScale() : 1);\n        if (ctx.lineWidth !== newLineWidth) {\n            if (!styleChanged) {\n                flushPathDrawn(ctx, scope);\n                styleChanged = true;\n            }\n            ctx.lineWidth = newLineWidth;\n        }\n    }\n    for (var i = 0; i < STROKE_PROPS.length; i++) {\n        var prop = STROKE_PROPS[i];\n        var propName = prop[0];\n        if (forceSetAll || style[propName] !== prevStyle[propName]) {\n            if (!styleChanged) {\n                flushPathDrawn(ctx, scope);\n                styleChanged = true;\n            }\n            ctx[propName] = style[propName] || prop[1];\n        }\n    }\n    return styleChanged;\n}\nfunction bindImageStyle(ctx, el, prevEl, forceSetAll, scope) {\n    return bindCommonProps(ctx, getStyle(el, scope.inHover), prevEl && getStyle(prevEl, scope.inHover), forceSetAll, scope);\n}\nfunction setContextTransform(ctx, el) {\n    var m = el.transform;\n    var dpr = ctx.dpr || 1;\n    if (m) {\n        ctx.setTransform(dpr * m[0], dpr * m[1], dpr * m[2], dpr * m[3], dpr * m[4], dpr * m[5]);\n    }\n    else {\n        ctx.setTransform(dpr, 0, 0, dpr, 0, 0);\n    }\n}\nfunction updateClipStatus(clipPaths, ctx, scope) {\n    var allClipped = false;\n    for (var i = 0; i < clipPaths.length; i++) {\n        var clipPath = clipPaths[i];\n        allClipped = allClipped || clipPath.isZeroArea();\n        setContextTransform(ctx, clipPath);\n        ctx.beginPath();\n        clipPath.buildPath(ctx, clipPath.shape);\n        ctx.clip();\n    }\n    scope.allClipped = allClipped;\n}\nfunction isTransformChanged(m0, m1) {\n    if (m0 && m1) {\n        return m0[0] !== m1[0]\n            || m0[1] !== m1[1]\n            || m0[2] !== m1[2]\n            || m0[3] !== m1[3]\n            || m0[4] !== m1[4]\n            || m0[5] !== m1[5];\n    }\n    else if (!m0 && !m1) {\n        return false;\n    }\n    return true;\n}\nvar DRAW_TYPE_PATH = 1;\nvar DRAW_TYPE_IMAGE = 2;\nvar DRAW_TYPE_TEXT = 3;\nvar DRAW_TYPE_INCREMENTAL = 4;\nfunction canPathBatch(style) {\n    var hasFill = styleHasFill(style);\n    var hasStroke = styleHasStroke(style);\n    return !(style.lineDash\n        || !(+hasFill ^ +hasStroke)\n        || (hasFill && typeof style.fill !== 'string')\n        || (hasStroke && typeof style.stroke !== 'string')\n        || style.strokePercent < 1\n        || style.strokeOpacity < 1\n        || style.fillOpacity < 1);\n}\nfunction flushPathDrawn(ctx, scope) {\n    scope.batchFill && ctx.fill();\n    scope.batchStroke && ctx.stroke();\n    scope.batchFill = '';\n    scope.batchStroke = '';\n}\nfunction getStyle(el, inHover) {\n    return inHover ? (el.__hoverStyle || el.style) : el.style;\n}\nexport function brushSingle(ctx, el) {\n    brush(ctx, el, { inHover: false, viewWidth: 0, viewHeight: 0 }, true);\n}\nexport function brush(ctx, el, scope, isLast) {\n    var m = el.transform;\n    if (!el.shouldBePainted(scope.viewWidth, scope.viewHeight, false, false)) {\n        el.__dirty &= ~Element.REDARAW_BIT;\n        el.__isRendered = false;\n        return;\n    }\n    var clipPaths = el.__clipPaths;\n    var prevElClipPaths = scope.prevElClipPaths;\n    var forceSetTransform = false;\n    var forceSetStyle = false;\n    if (!prevElClipPaths || isClipPathChanged(clipPaths, prevElClipPaths)) {\n        if (prevElClipPaths && prevElClipPaths.length) {\n            flushPathDrawn(ctx, scope);\n            ctx.restore();\n            forceSetStyle = forceSetTransform = true;\n            scope.prevElClipPaths = null;\n            scope.allClipped = false;\n            scope.prevEl = null;\n        }\n        if (clipPaths && clipPaths.length) {\n            flushPathDrawn(ctx, scope);\n            ctx.save();\n            updateClipStatus(clipPaths, ctx, scope);\n            forceSetTransform = true;\n        }\n        scope.prevElClipPaths = clipPaths;\n    }\n    if (scope.allClipped) {\n        el.__isRendered = false;\n        return;\n    }\n    el.beforeBrush && el.beforeBrush();\n    el.innerBeforeBrush();\n    var prevEl = scope.prevEl;\n    if (!prevEl) {\n        forceSetStyle = forceSetTransform = true;\n    }\n    var canBatchPath = el instanceof Path\n        && el.autoBatch\n        && canPathBatch(el.style);\n    if (forceSetTransform || isTransformChanged(m, prevEl.transform)) {\n        flushPathDrawn(ctx, scope);\n        setContextTransform(ctx, el);\n    }\n    else if (!canBatchPath) {\n        flushPathDrawn(ctx, scope);\n    }\n    var style = getStyle(el, scope.inHover);\n    if (el instanceof Path) {\n        if (scope.lastDrawType !== DRAW_TYPE_PATH) {\n            forceSetStyle = true;\n            scope.lastDrawType = DRAW_TYPE_PATH;\n        }\n        bindPathAndTextCommonStyle(ctx, el, prevEl, forceSetStyle, scope);\n        if (!canBatchPath || (!scope.batchFill && !scope.batchStroke)) {\n            ctx.beginPath();\n        }\n        brushPath(ctx, el, style, canBatchPath);\n        if (canBatchPath) {\n            scope.batchFill = style.fill || '';\n            scope.batchStroke = style.stroke || '';\n        }\n    }\n    else {\n        if (el instanceof TSpan) {\n            if (scope.lastDrawType !== DRAW_TYPE_TEXT) {\n                forceSetStyle = true;\n                scope.lastDrawType = DRAW_TYPE_TEXT;\n            }\n            bindPathAndTextCommonStyle(ctx, el, prevEl, forceSetStyle, scope);\n            brushText(ctx, el, style);\n        }\n        else if (el instanceof ZRImage) {\n            if (scope.lastDrawType !== DRAW_TYPE_IMAGE) {\n                forceSetStyle = true;\n                scope.lastDrawType = DRAW_TYPE_IMAGE;\n            }\n            bindImageStyle(ctx, el, prevEl, forceSetStyle, scope);\n            brushImage(ctx, el, style);\n        }\n        else if (el instanceof IncrementalDisplayable) {\n            if (scope.lastDrawType !== DRAW_TYPE_INCREMENTAL) {\n                forceSetStyle = true;\n                scope.lastDrawType = DRAW_TYPE_INCREMENTAL;\n            }\n            brushIncremental(ctx, el, scope);\n        }\n    }\n    if (canBatchPath && isLast) {\n        flushPathDrawn(ctx, scope);\n    }\n    el.innerAfterBrush();\n    el.afterBrush && el.afterBrush();\n    scope.prevEl = el;\n    el.__dirty = 0;\n    el.__isRendered = true;\n}\nfunction brushIncremental(ctx, el, scope) {\n    var displayables = el.getDisplayables();\n    var temporalDisplayables = el.getTemporalDisplayables();\n    ctx.save();\n    var innerScope = {\n        prevElClipPaths: null,\n        prevEl: null,\n        allClipped: false,\n        viewWidth: scope.viewWidth,\n        viewHeight: scope.viewHeight,\n        inHover: scope.inHover\n    };\n    var i;\n    var len;\n    for (i = el.getCursor(), len = displayables.length; i < len; i++) {\n        var displayable = displayables[i];\n        displayable.beforeBrush && displayable.beforeBrush();\n        displayable.innerBeforeBrush();\n        brush(ctx, displayable, innerScope, i === len - 1);\n        displayable.innerAfterBrush();\n        displayable.afterBrush && displayable.afterBrush();\n        innerScope.prevEl = displayable;\n    }\n    for (var i_1 = 0, len_1 = temporalDisplayables.length; i_1 < len_1; i_1++) {\n        var displayable = temporalDisplayables[i_1];\n        displayable.beforeBrush && displayable.beforeBrush();\n        displayable.innerBeforeBrush();\n        brush(ctx, displayable, innerScope, i_1 === len_1 - 1);\n        displayable.innerAfterBrush();\n        displayable.afterBrush && displayable.afterBrush();\n        innerScope.prevEl = displayable;\n    }\n    el.clearTemporalDisplayables();\n    el.notClear = true;\n    ctx.restore();\n}\n","import { __extends } from \"tslib\";\nimport { parseRichText, parsePlainText } from './helper/parseText';\nimport TSpan from './TSpan';\nimport { retrieve2, isString, each, normalizeCssArray, trim, retrieve3, extend, keys, defaults } from '../core/util';\nimport { DEFAULT_FONT, adjustTextX, adjustTextY } from '../contain/text';\nimport ZRImage from './Image';\nimport Rect from './shape/Rect';\nimport BoundingRect from '../core/BoundingRect';\nimport { copy } from '../core/matrix';\nimport Displayable, { DEFAULT_COMMON_ANIMATION_PROPS } from './Displayable';\nvar DEFAULT_RICH_TEXT_COLOR = {\n    fill: '#000'\n};\nvar DEFAULT_STROKE_LINE_WIDTH = 2;\nexport var DEFAULT_TEXT_ANIMATION_PROPS = {\n    style: defaults({\n        fill: true,\n        stroke: true,\n        fillOpacity: true,\n        strokeOpacity: true,\n        lineWidth: true,\n        fontSize: true,\n        lineHeight: true,\n        width: true,\n        height: true,\n        textShadowColor: true,\n        textShadowBlur: true,\n        textShadowOffsetX: true,\n        textShadowOffsetY: true,\n        backgroundColor: true,\n        padding: true,\n        borderColor: true,\n        borderWidth: true,\n        borderRadius: true\n    }, DEFAULT_COMMON_ANIMATION_PROPS.style)\n};\nvar ZRText = (function (_super) {\n    __extends(ZRText, _super);\n    function ZRText(opts) {\n        var _this = _super.call(this) || this;\n        _this.type = 'text';\n        _this._children = [];\n        _this._defaultStyle = DEFAULT_RICH_TEXT_COLOR;\n        _this.attr(opts);\n        return _this;\n    }\n    ZRText.prototype.childrenRef = function () {\n        return this._children;\n    };\n    ZRText.prototype.update = function () {\n        if (this.styleChanged()) {\n            this._updateSubTexts();\n        }\n        for (var i = 0; i < this._children.length; i++) {\n            var child = this._children[i];\n            child.zlevel = this.zlevel;\n            child.z = this.z;\n            child.z2 = this.z2;\n            child.culling = this.culling;\n            child.cursor = this.cursor;\n            child.invisible = this.invisible;\n        }\n        var attachedTransform = this.attachedTransform;\n        if (attachedTransform) {\n            attachedTransform.updateTransform();\n            var m = attachedTransform.transform;\n            if (m) {\n                this.transform = this.transform || [];\n                copy(this.transform, m);\n            }\n            else {\n                this.transform = null;\n            }\n        }\n        else {\n            _super.prototype.update.call(this);\n        }\n    };\n    ZRText.prototype.getComputedTransform = function () {\n        if (this.__hostTarget) {\n            this.__hostTarget.getComputedTransform();\n            this.__hostTarget.updateInnerText(true);\n        }\n        return this.attachedTransform ? this.attachedTransform.getComputedTransform()\n            : _super.prototype.getComputedTransform.call(this);\n    };\n    ZRText.prototype._updateSubTexts = function () {\n        this._childCursor = 0;\n        normalizeTextStyle(this.style);\n        this.style.rich\n            ? this._updateRichTexts()\n            : this._updatePlainTexts();\n        this._children.length = this._childCursor;\n        this.styleUpdated();\n    };\n    ZRText.prototype.addSelfToZr = function (zr) {\n        _super.prototype.addSelfToZr.call(this, zr);\n        for (var i = 0; i < this._children.length; i++) {\n            this._children[i].__zr = zr;\n        }\n    };\n    ZRText.prototype.removeSelfFromZr = function (zr) {\n        _super.prototype.removeSelfFromZr.call(this, zr);\n        for (var i = 0; i < this._children.length; i++) {\n            this._children[i].__zr = null;\n        }\n    };\n    ZRText.prototype.getBoundingRect = function () {\n        if (this.styleChanged()) {\n            this._updateSubTexts();\n        }\n        if (!this._rect) {\n            var tmpRect = new BoundingRect(0, 0, 0, 0);\n            var children = this._children;\n            var tmpMat = [];\n            var rect = null;\n            for (var i = 0; i < children.length; i++) {\n                var child = children[i];\n                var childRect = child.getBoundingRect();\n                var transform = child.getLocalTransform(tmpMat);\n                if (transform) {\n                    tmpRect.copy(childRect);\n                    tmpRect.applyTransform(transform);\n                    rect = rect || tmpRect.clone();\n                    rect.union(tmpRect);\n                }\n                else {\n                    rect = rect || childRect.clone();\n                    rect.union(childRect);\n                }\n            }\n            this._rect = rect || tmpRect;\n        }\n        return this._rect;\n    };\n    ZRText.prototype.setDefaultTextStyle = function (defaultTextStyle) {\n        this._defaultStyle = defaultTextStyle || DEFAULT_RICH_TEXT_COLOR;\n    };\n    ZRText.prototype.setTextContent = function (textContent) {\n        throw new Error('Can\\'t attach text on another text');\n    };\n    ZRText.prototype._mergeStyle = function (targetStyle, sourceStyle) {\n        if (!sourceStyle) {\n            return targetStyle;\n        }\n        var sourceRich = sourceStyle.rich;\n        var targetRich = targetStyle.rich || (sourceRich && {});\n        extend(targetStyle, sourceStyle);\n        if (sourceRich && targetRich) {\n            this._mergeRich(targetRich, sourceRich);\n            targetStyle.rich = targetRich;\n        }\n        else if (targetRich) {\n            targetStyle.rich = targetRich;\n        }\n        return targetStyle;\n    };\n    ZRText.prototype._mergeRich = function (targetRich, sourceRich) {\n        var richNames = keys(sourceRich);\n        for (var i = 0; i < richNames.length; i++) {\n            var richName = richNames[i];\n            targetRich[richName] = targetRich[richName] || {};\n            extend(targetRich[richName], sourceRich[richName]);\n        }\n    };\n    ZRText.prototype.getAnimationStyleProps = function () {\n        return DEFAULT_TEXT_ANIMATION_PROPS;\n    };\n    ZRText.prototype._getOrCreateChild = function (Ctor) {\n        var child = this._children[this._childCursor];\n        if (!child || !(child instanceof Ctor)) {\n            child = new Ctor();\n        }\n        this._children[this._childCursor++] = child;\n        child.__zr = this.__zr;\n        child.parent = this;\n        return child;\n    };\n    ZRText.prototype._updatePlainTexts = function () {\n        var style = this.style;\n        var textFont = style.font || DEFAULT_FONT;\n        var textPadding = style.padding;\n        var text = getStyleText(style);\n        var contentBlock = parsePlainText(text, style);\n        var needDrawBg = needDrawBackground(style);\n        var bgColorDrawn = !!(style.backgroundColor);\n        var outerHeight = contentBlock.outerHeight;\n        var textLines = contentBlock.lines;\n        var lineHeight = contentBlock.lineHeight;\n        var defaultStyle = this._defaultStyle;\n        var baseX = style.x || 0;\n        var baseY = style.y || 0;\n        var textAlign = style.align || defaultStyle.align || 'left';\n        var verticalAlign = style.verticalAlign || defaultStyle.verticalAlign || 'top';\n        var textX = baseX;\n        var textY = adjustTextY(baseY, contentBlock.contentHeight, verticalAlign);\n        if (needDrawBg || textPadding) {\n            var outerWidth_1 = contentBlock.width;\n            textPadding && (outerWidth_1 += textPadding[1] + textPadding[3]);\n            var boxX = adjustTextX(baseX, outerWidth_1, textAlign);\n            var boxY = adjustTextY(baseY, outerHeight, verticalAlign);\n            needDrawBg && this._renderBackground(style, style, boxX, boxY, outerWidth_1, outerHeight);\n        }\n        textY += lineHeight / 2;\n        if (textPadding) {\n            textX = getTextXForPadding(baseX, textAlign, textPadding);\n            if (verticalAlign === 'top') {\n                textY += textPadding[0];\n            }\n            else if (verticalAlign === 'bottom') {\n                textY -= textPadding[2];\n            }\n        }\n        var defaultLineWidth = 0;\n        var useDefaultFill = false;\n        var textFill = getFill('fill' in style\n            ? style.fill\n            : (useDefaultFill = true, defaultStyle.fill));\n        var textStroke = getStroke('stroke' in style\n            ? style.stroke\n            : (!bgColorDrawn\n                && (!defaultStyle.autoStroke || useDefaultFill))\n                ? (defaultLineWidth = DEFAULT_STROKE_LINE_WIDTH, defaultStyle.stroke)\n                : null);\n        var hasShadow = style.textShadowBlur > 0;\n        var fixedBoundingRect = style.width != null\n            && (style.overflow === 'truncate' || style.overflow === 'break' || style.overflow === 'breakAll');\n        var calculatedLineHeight = contentBlock.calculatedLineHeight;\n        for (var i = 0; i < textLines.length; i++) {\n            var el = this._getOrCreateChild(TSpan);\n            var subElStyle = el.createStyle();\n            el.useStyle(subElStyle);\n            subElStyle.text = textLines[i];\n            subElStyle.x = textX;\n            subElStyle.y = textY;\n            if (textAlign) {\n                subElStyle.textAlign = textAlign;\n            }\n            subElStyle.textBaseline = 'middle';\n            subElStyle.opacity = style.opacity;\n            subElStyle.strokeFirst = true;\n            if (hasShadow) {\n                subElStyle.shadowBlur = style.textShadowBlur || 0;\n                subElStyle.shadowColor = style.textShadowColor || 'transparent';\n                subElStyle.shadowOffsetX = style.textShadowOffsetX || 0;\n                subElStyle.shadowOffsetY = style.textShadowOffsetY || 0;\n            }\n            if (textStroke) {\n                subElStyle.stroke = textStroke;\n                subElStyle.lineWidth = style.lineWidth || defaultLineWidth;\n                subElStyle.lineDash = style.lineDash;\n                subElStyle.lineDashOffset = style.lineDashOffset || 0;\n            }\n            if (textFill) {\n                subElStyle.fill = textFill;\n            }\n            subElStyle.font = textFont;\n            textY += lineHeight;\n            if (fixedBoundingRect) {\n                el.setBoundingRect(new BoundingRect(adjustTextX(subElStyle.x, style.width, subElStyle.textAlign), adjustTextY(subElStyle.y, calculatedLineHeight, subElStyle.textBaseline), style.width, calculatedLineHeight));\n            }\n        }\n    };\n    ZRText.prototype._updateRichTexts = function () {\n        var style = this.style;\n        var text = getStyleText(style);\n        var contentBlock = parseRichText(text, style);\n        var contentWidth = contentBlock.width;\n        var outerWidth = contentBlock.outerWidth;\n        var outerHeight = contentBlock.outerHeight;\n        var textPadding = style.padding;\n        var baseX = style.x || 0;\n        var baseY = style.y || 0;\n        var defaultStyle = this._defaultStyle;\n        var textAlign = style.align || defaultStyle.align;\n        var verticalAlign = style.verticalAlign || defaultStyle.verticalAlign;\n        var boxX = adjustTextX(baseX, outerWidth, textAlign);\n        var boxY = adjustTextY(baseY, outerHeight, verticalAlign);\n        var xLeft = boxX;\n        var lineTop = boxY;\n        if (textPadding) {\n            xLeft += textPadding[3];\n            lineTop += textPadding[0];\n        }\n        var xRight = xLeft + contentWidth;\n        if (needDrawBackground(style)) {\n            this._renderBackground(style, style, boxX, boxY, outerWidth, outerHeight);\n        }\n        var bgColorDrawn = !!(style.backgroundColor);\n        for (var i = 0; i < contentBlock.lines.length; i++) {\n            var line = contentBlock.lines[i];\n            var tokens = line.tokens;\n            var tokenCount = tokens.length;\n            var lineHeight = line.lineHeight;\n            var remainedWidth = line.width;\n            var leftIndex = 0;\n            var lineXLeft = xLeft;\n            var lineXRight = xRight;\n            var rightIndex = tokenCount - 1;\n            var token = void 0;\n            while (leftIndex < tokenCount\n                && (token = tokens[leftIndex], !token.align || token.align === 'left')) {\n                this._placeToken(token, style, lineHeight, lineTop, lineXLeft, 'left', bgColorDrawn);\n                remainedWidth -= token.width;\n                lineXLeft += token.width;\n                leftIndex++;\n            }\n            while (rightIndex >= 0\n                && (token = tokens[rightIndex], token.align === 'right')) {\n                this._placeToken(token, style, lineHeight, lineTop, lineXRight, 'right', bgColorDrawn);\n                remainedWidth -= token.width;\n                lineXRight -= token.width;\n                rightIndex--;\n            }\n            lineXLeft += (contentWidth - (lineXLeft - xLeft) - (xRight - lineXRight) - remainedWidth) / 2;\n            while (leftIndex <= rightIndex) {\n                token = tokens[leftIndex];\n                this._placeToken(token, style, lineHeight, lineTop, lineXLeft + token.width / 2, 'center', bgColorDrawn);\n                lineXLeft += token.width;\n                leftIndex++;\n            }\n            lineTop += lineHeight;\n        }\n    };\n    ZRText.prototype._placeToken = function (token, style, lineHeight, lineTop, x, textAlign, parentBgColorDrawn) {\n        var tokenStyle = style.rich[token.styleName] || {};\n        tokenStyle.text = token.text;\n        var verticalAlign = token.verticalAlign;\n        var y = lineTop + lineHeight / 2;\n        if (verticalAlign === 'top') {\n            y = lineTop + token.height / 2;\n        }\n        else if (verticalAlign === 'bottom') {\n            y = lineTop + lineHeight - token.height / 2;\n        }\n        var needDrawBg = !token.isLineHolder && needDrawBackground(tokenStyle);\n        needDrawBg && this._renderBackground(tokenStyle, style, textAlign === 'right'\n            ? x - token.width\n            : textAlign === 'center'\n                ? x - token.width / 2\n                : x, y - token.height / 2, token.width, token.height);\n        var bgColorDrawn = !!tokenStyle.backgroundColor;\n        var textPadding = token.textPadding;\n        if (textPadding) {\n            x = getTextXForPadding(x, textAlign, textPadding);\n            y -= token.height / 2 - textPadding[0] - token.innerHeight / 2;\n        }\n        var el = this._getOrCreateChild(TSpan);\n        var subElStyle = el.createStyle();\n        el.useStyle(subElStyle);\n        var defaultStyle = this._defaultStyle;\n        var useDefaultFill = false;\n        var defaultLineWidth = 0;\n        var textFill = getStroke('fill' in tokenStyle ? tokenStyle.fill\n            : 'fill' in style ? style.fill\n                : (useDefaultFill = true, defaultStyle.fill));\n        var textStroke = getStroke('stroke' in tokenStyle ? tokenStyle.stroke\n            : 'stroke' in style ? style.stroke\n                : (!bgColorDrawn\n                    && !parentBgColorDrawn\n                    && (!defaultStyle.autoStroke || useDefaultFill)) ? (defaultLineWidth = DEFAULT_STROKE_LINE_WIDTH, defaultStyle.stroke)\n                    : null);\n        var hasShadow = tokenStyle.textShadowBlur > 0\n            || style.textShadowBlur > 0;\n        subElStyle.text = token.text;\n        subElStyle.x = x;\n        subElStyle.y = y;\n        if (hasShadow) {\n            subElStyle.shadowBlur = tokenStyle.textShadowBlur || style.textShadowBlur || 0;\n            subElStyle.shadowColor = tokenStyle.textShadowColor || style.textShadowColor || 'transparent';\n            subElStyle.shadowOffsetX = tokenStyle.textShadowOffsetX || style.textShadowOffsetX || 0;\n            subElStyle.shadowOffsetY = tokenStyle.textShadowOffsetY || style.textShadowOffsetY || 0;\n        }\n        subElStyle.textAlign = textAlign;\n        subElStyle.textBaseline = 'middle';\n        subElStyle.font = token.font || DEFAULT_FONT;\n        subElStyle.opacity = retrieve3(tokenStyle.opacity, style.opacity, 1);\n        if (textStroke) {\n            subElStyle.lineWidth = retrieve3(tokenStyle.lineWidth, style.lineWidth, defaultLineWidth);\n            subElStyle.lineDash = retrieve2(tokenStyle.lineDash, style.lineDash);\n            subElStyle.lineDashOffset = style.lineDashOffset || 0;\n            subElStyle.stroke = textStroke;\n        }\n        if (textFill) {\n            subElStyle.fill = textFill;\n        }\n        var textWidth = token.contentWidth;\n        var textHeight = token.contentHeight;\n        el.setBoundingRect(new BoundingRect(adjustTextX(subElStyle.x, textWidth, subElStyle.textAlign), adjustTextY(subElStyle.y, textHeight, subElStyle.textBaseline), textWidth, textHeight));\n    };\n    ZRText.prototype._renderBackground = function (style, topStyle, x, y, width, height) {\n        var textBackgroundColor = style.backgroundColor;\n        var textBorderWidth = style.borderWidth;\n        var textBorderColor = style.borderColor;\n        var isPlainBg = isString(textBackgroundColor);\n        var textBorderRadius = style.borderRadius;\n        var self = this;\n        var rectEl;\n        var imgEl;\n        if (isPlainBg || (textBorderWidth && textBorderColor)) {\n            rectEl = this._getOrCreateChild(Rect);\n            rectEl.useStyle(rectEl.createStyle());\n            rectEl.style.fill = null;\n            var rectShape = rectEl.shape;\n            rectShape.x = x;\n            rectShape.y = y;\n            rectShape.width = width;\n            rectShape.height = height;\n            rectShape.r = textBorderRadius;\n            rectEl.dirtyShape();\n        }\n        if (isPlainBg) {\n            var rectStyle = rectEl.style;\n            rectStyle.fill = textBackgroundColor || null;\n            rectStyle.fillOpacity = retrieve2(style.fillOpacity, 1);\n        }\n        else if (textBackgroundColor && textBackgroundColor.image) {\n            imgEl = this._getOrCreateChild(ZRImage);\n            imgEl.onload = function () {\n                self.dirtyStyle();\n            };\n            var imgStyle = imgEl.style;\n            imgStyle.image = textBackgroundColor.image;\n            imgStyle.x = x;\n            imgStyle.y = y;\n            imgStyle.width = width;\n            imgStyle.height = height;\n        }\n        if (textBorderWidth && textBorderColor) {\n            var rectStyle = rectEl.style;\n            rectStyle.lineWidth = textBorderWidth;\n            rectStyle.stroke = textBorderColor;\n            rectStyle.strokeOpacity = retrieve2(style.strokeOpacity, 1);\n            rectStyle.lineDash = style.borderDash;\n            rectStyle.lineDashOffset = style.borderDashOffset || 0;\n            rectEl.strokeContainThreshold = 0;\n            if (rectEl.hasFill() && rectEl.hasStroke()) {\n                rectStyle.strokeFirst = true;\n                rectStyle.lineWidth *= 2;\n            }\n        }\n        var commonStyle = (rectEl || imgEl).style;\n        commonStyle.shadowBlur = style.shadowBlur || 0;\n        commonStyle.shadowColor = style.shadowColor || 'transparent';\n        commonStyle.shadowOffsetX = style.shadowOffsetX || 0;\n        commonStyle.shadowOffsetY = style.shadowOffsetY || 0;\n        commonStyle.opacity = retrieve3(style.opacity, topStyle.opacity, 1);\n    };\n    ZRText.makeFont = function (style) {\n        var font = '';\n        if (style.fontSize || style.fontFamily || style.fontWeight) {\n            var fontSize = '';\n            if (typeof style.fontSize === 'string'\n                && (style.fontSize.indexOf('px') !== -1\n                    || style.fontSize.indexOf('rem') !== -1\n                    || style.fontSize.indexOf('em') !== -1)) {\n                fontSize = style.fontSize;\n            }\n            else if (!isNaN(+style.fontSize)) {\n                fontSize = style.fontSize + 'px';\n            }\n            else {\n                fontSize = '12px';\n            }\n            font = [\n                style.fontStyle,\n                style.fontWeight,\n                fontSize,\n                style.fontFamily || 'sans-serif'\n            ].join(' ');\n        }\n        return font && trim(font) || style.textFont || style.font;\n    };\n    return ZRText;\n}(Displayable));\nvar VALID_TEXT_ALIGN = { left: true, right: 1, center: 1 };\nvar VALID_TEXT_VERTICAL_ALIGN = { top: 1, bottom: 1, middle: 1 };\nexport function normalizeTextStyle(style) {\n    normalizeStyle(style);\n    each(style.rich, normalizeStyle);\n    return style;\n}\nfunction normalizeStyle(style) {\n    if (style) {\n        style.font = ZRText.makeFont(style);\n        var textAlign = style.align;\n        textAlign === 'middle' && (textAlign = 'center');\n        style.align = (textAlign == null || VALID_TEXT_ALIGN[textAlign]) ? textAlign : 'left';\n        var verticalAlign = style.verticalAlign;\n        verticalAlign === 'center' && (verticalAlign = 'middle');\n        style.verticalAlign = (verticalAlign == null || VALID_TEXT_VERTICAL_ALIGN[verticalAlign]) ? verticalAlign : 'top';\n        var textPadding = style.padding;\n        if (textPadding) {\n            style.padding = normalizeCssArray(style.padding);\n        }\n    }\n}\nfunction getStroke(stroke, lineWidth) {\n    return (stroke == null || lineWidth <= 0 || stroke === 'transparent' || stroke === 'none')\n        ? null\n        : (stroke.image || stroke.colorStops)\n            ? '#000'\n            : stroke;\n}\nfunction getFill(fill) {\n    return (fill == null || fill === 'none')\n        ? null\n        : (fill.image || fill.colorStops)\n            ? '#000'\n            : fill;\n}\nfunction getTextXForPadding(x, textAlign, textPadding) {\n    return textAlign === 'right'\n        ? (x - textPadding[1])\n        : textAlign === 'center'\n            ? (x + textPadding[3] / 2 - textPadding[1] / 2)\n            : (x + textPadding[3]);\n}\nfunction getStyleText(style) {\n    var text = style.text;\n    text != null && (text += '');\n    return text;\n}\nfunction needDrawBackground(style) {\n    return !!(style.backgroundColor\n        || (style.borderWidth && style.borderColor));\n}\nexport default ZRText;\n","import * as vec2 from './vector';\nimport * as curve from './curve';\nvar mathMin = Math.min;\nvar mathMax = Math.max;\nvar mathSin = Math.sin;\nvar mathCos = Math.cos;\nvar PI2 = Math.PI * 2;\nvar start = vec2.create();\nvar end = vec2.create();\nvar extremity = vec2.create();\nexport function fromPoints(points, min, max) {\n    if (points.length === 0) {\n        return;\n    }\n    var p = points[0];\n    var left = p[0];\n    var right = p[0];\n    var top = p[1];\n    var bottom = p[1];\n    for (var i = 1; i < points.length; i++) {\n        p = points[i];\n        left = mathMin(left, p[0]);\n        right = mathMax(right, p[0]);\n        top = mathMin(top, p[1]);\n        bottom = mathMax(bottom, p[1]);\n    }\n    min[0] = left;\n    min[1] = top;\n    max[0] = right;\n    max[1] = bottom;\n}\nexport function fromLine(x0, y0, x1, y1, min, max) {\n    min[0] = mathMin(x0, x1);\n    min[1] = mathMin(y0, y1);\n    max[0] = mathMax(x0, x1);\n    max[1] = mathMax(y0, y1);\n}\nvar xDim = [];\nvar yDim = [];\nexport function fromCubic(x0, y0, x1, y1, x2, y2, x3, y3, min, max) {\n    var cubicExtrema = curve.cubicExtrema;\n    var cubicAt = curve.cubicAt;\n    var n = cubicExtrema(x0, x1, x2, x3, xDim);\n    min[0] = Infinity;\n    min[1] = Infinity;\n    max[0] = -Infinity;\n    max[1] = -Infinity;\n    for (var i = 0; i < n; i++) {\n        var x = cubicAt(x0, x1, x2, x3, xDim[i]);\n        min[0] = mathMin(x, min[0]);\n        max[0] = mathMax(x, max[0]);\n    }\n    n = cubicExtrema(y0, y1, y2, y3, yDim);\n    for (var i = 0; i < n; i++) {\n        var y = cubicAt(y0, y1, y2, y3, yDim[i]);\n        min[1] = mathMin(y, min[1]);\n        max[1] = mathMax(y, max[1]);\n    }\n    min[0] = mathMin(x0, min[0]);\n    max[0] = mathMax(x0, max[0]);\n    min[0] = mathMin(x3, min[0]);\n    max[0] = mathMax(x3, max[0]);\n    min[1] = mathMin(y0, min[1]);\n    max[1] = mathMax(y0, max[1]);\n    min[1] = mathMin(y3, min[1]);\n    max[1] = mathMax(y3, max[1]);\n}\nexport function fromQuadratic(x0, y0, x1, y1, x2, y2, min, max) {\n    var quadraticExtremum = curve.quadraticExtremum;\n    var quadraticAt = curve.quadraticAt;\n    var tx = mathMax(mathMin(quadraticExtremum(x0, x1, x2), 1), 0);\n    var ty = mathMax(mathMin(quadraticExtremum(y0, y1, y2), 1), 0);\n    var x = quadraticAt(x0, x1, x2, tx);\n    var y = quadraticAt(y0, y1, y2, ty);\n    min[0] = mathMin(x0, x2, x);\n    min[1] = mathMin(y0, y2, y);\n    max[0] = mathMax(x0, x2, x);\n    max[1] = mathMax(y0, y2, y);\n}\nexport function fromArc(x, y, rx, ry, startAngle, endAngle, anticlockwise, min, max) {\n    var vec2Min = vec2.min;\n    var vec2Max = vec2.max;\n    var diff = Math.abs(startAngle - endAngle);\n    if (diff % PI2 < 1e-4 && diff > 1e-4) {\n        min[0] = x - rx;\n        min[1] = y - ry;\n        max[0] = x + rx;\n        max[1] = y + ry;\n        return;\n    }\n    start[0] = mathCos(startAngle) * rx + x;\n    start[1] = mathSin(startAngle) * ry + y;\n    end[0] = mathCos(endAngle) * rx + x;\n    end[1] = mathSin(endAngle) * ry + y;\n    vec2Min(min, start, end);\n    vec2Max(max, start, end);\n    startAngle = startAngle % (PI2);\n    if (startAngle < 0) {\n        startAngle = startAngle + PI2;\n    }\n    endAngle = endAngle % (PI2);\n    if (endAngle < 0) {\n        endAngle = endAngle + PI2;\n    }\n    if (startAngle > endAngle && !anticlockwise) {\n        endAngle += PI2;\n    }\n    else if (startAngle < endAngle && anticlockwise) {\n        startAngle += PI2;\n    }\n    if (anticlockwise) {\n        var tmp = endAngle;\n        endAngle = startAngle;\n        startAngle = tmp;\n    }\n    for (var angle = 0; angle < endAngle; angle += Math.PI / 2) {\n        if (angle > startAngle) {\n            extremity[0] = mathCos(angle) * rx + x;\n            extremity[1] = mathSin(angle) * ry + y;\n            vec2Min(min, extremity, min);\n            vec2Max(max, extremity, max);\n        }\n    }\n}\n","import { __extends } from \"tslib\";\nimport Displayable from './Displayable';\nimport { getBoundingRect, DEFAULT_FONT } from '../contain/text';\nimport { DEFAULT_PATH_STYLE } from './Path';\nimport { createObject, defaults } from '../core/util';\nexport var DEFAULT_TSPAN_STYLE = defaults({\n    strokeFirst: true,\n    font: DEFAULT_FONT,\n    x: 0,\n    y: 0,\n    textAlign: 'left',\n    textBaseline: 'top',\n    miterLimit: 2\n}, DEFAULT_PATH_STYLE);\nvar TSpan = (function (_super) {\n    __extends(TSpan, _super);\n    function TSpan() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    TSpan.prototype.hasStroke = function () {\n        var style = this.style;\n        var stroke = style.stroke;\n        return stroke != null && stroke !== 'none' && style.lineWidth > 0;\n    };\n    TSpan.prototype.hasFill = function () {\n        var style = this.style;\n        var fill = style.fill;\n        return fill != null && fill !== 'none';\n    };\n    TSpan.prototype.createStyle = function (obj) {\n        return createObject(DEFAULT_TSPAN_STYLE, obj);\n    };\n    TSpan.prototype.setBoundingRect = function (rect) {\n        this._rect = rect;\n    };\n    TSpan.prototype.getBoundingRect = function () {\n        var style = this.style;\n        if (!this._rect) {\n            var text = style.text;\n            text != null ? (text += '') : (text = '');\n            var rect = getBoundingRect(text, style.font, style.textAlign, style.textBaseline);\n            rect.x += style.x || 0;\n            rect.y += style.y || 0;\n            if (this.hasStroke()) {\n                var w = style.lineWidth;\n                rect.x -= w / 2;\n                rect.y -= w / 2;\n                rect.width += w;\n                rect.height += w;\n            }\n            this._rect = rect;\n        }\n        return this._rect;\n    };\n    TSpan.initDefaultProps = (function () {\n        var tspanProto = TSpan.prototype;\n        tspanProto.dirtyRectTolerance = 10;\n    })();\n    return TSpan;\n}(Displayable));\nTSpan.prototype.type = 'tspan';\nexport default TSpan;\n","var easing = {\n    linear: function (k) {\n        return k;\n    },\n    quadraticIn: function (k) {\n        return k * k;\n    },\n    quadraticOut: function (k) {\n        return k * (2 - k);\n    },\n    quadraticInOut: function (k) {\n        if ((k *= 2) < 1) {\n            return 0.5 * k * k;\n        }\n        return -0.5 * (--k * (k - 2) - 1);\n    },\n    cubicIn: function (k) {\n        return k * k * k;\n    },\n    cubicOut: function (k) {\n        return --k * k * k + 1;\n    },\n    cubicInOut: function (k) {\n        if ((k *= 2) < 1) {\n            return 0.5 * k * k * k;\n        }\n        return 0.5 * ((k -= 2) * k * k + 2);\n    },\n    quarticIn: function (k) {\n        return k * k * k * k;\n    },\n    quarticOut: function (k) {\n        return 1 - (--k * k * k * k);\n    },\n    quarticInOut: function (k) {\n        if ((k *= 2) < 1) {\n            return 0.5 * k * k * k * k;\n        }\n        return -0.5 * ((k -= 2) * k * k * k - 2);\n    },\n    quinticIn: function (k) {\n        return k * k * k * k * k;\n    },\n    quinticOut: function (k) {\n        return --k * k * k * k * k + 1;\n    },\n    quinticInOut: function (k) {\n        if ((k *= 2) < 1) {\n            return 0.5 * k * k * k * k * k;\n        }\n        return 0.5 * ((k -= 2) * k * k * k * k + 2);\n    },\n    sinusoidalIn: function (k) {\n        return 1 - Math.cos(k * Math.PI / 2);\n    },\n    sinusoidalOut: function (k) {\n        return Math.sin(k * Math.PI / 2);\n    },\n    sinusoidalInOut: function (k) {\n        return 0.5 * (1 - Math.cos(Math.PI * k));\n    },\n    exponentialIn: function (k) {\n        return k === 0 ? 0 : Math.pow(1024, k - 1);\n    },\n    exponentialOut: function (k) {\n        return k === 1 ? 1 : 1 - Math.pow(2, -10 * k);\n    },\n    exponentialInOut: function (k) {\n        if (k === 0) {\n            return 0;\n        }\n        if (k === 1) {\n            return 1;\n        }\n        if ((k *= 2) < 1) {\n            return 0.5 * Math.pow(1024, k - 1);\n        }\n        return 0.5 * (-Math.pow(2, -10 * (k - 1)) + 2);\n    },\n    circularIn: function (k) {\n        return 1 - Math.sqrt(1 - k * k);\n    },\n    circularOut: function (k) {\n        return Math.sqrt(1 - (--k * k));\n    },\n    circularInOut: function (k) {\n        if ((k *= 2) < 1) {\n            return -0.5 * (Math.sqrt(1 - k * k) - 1);\n        }\n        return 0.5 * (Math.sqrt(1 - (k -= 2) * k) + 1);\n    },\n    elasticIn: function (k) {\n        var s;\n        var a = 0.1;\n        var p = 0.4;\n        if (k === 0) {\n            return 0;\n        }\n        if (k === 1) {\n            return 1;\n        }\n        if (!a || a < 1) {\n            a = 1;\n            s = p / 4;\n        }\n        else {\n            s = p * Math.asin(1 / a) / (2 * Math.PI);\n        }\n        return -(a * Math.pow(2, 10 * (k -= 1))\n            * Math.sin((k - s) * (2 * Math.PI) / p));\n    },\n    elasticOut: function (k) {\n        var s;\n        var a = 0.1;\n        var p = 0.4;\n        if (k === 0) {\n            return 0;\n        }\n        if (k === 1) {\n            return 1;\n        }\n        if (!a || a < 1) {\n            a = 1;\n            s = p / 4;\n        }\n        else {\n            s = p * Math.asin(1 / a) / (2 * Math.PI);\n        }\n        return (a * Math.pow(2, -10 * k)\n            * Math.sin((k - s) * (2 * Math.PI) / p) + 1);\n    },\n    elasticInOut: function (k) {\n        var s;\n        var a = 0.1;\n        var p = 0.4;\n        if (k === 0) {\n            return 0;\n        }\n        if (k === 1) {\n            return 1;\n        }\n        if (!a || a < 1) {\n            a = 1;\n            s = p / 4;\n        }\n        else {\n            s = p * Math.asin(1 / a) / (2 * Math.PI);\n        }\n        if ((k *= 2) < 1) {\n            return -0.5 * (a * Math.pow(2, 10 * (k -= 1))\n                * Math.sin((k - s) * (2 * Math.PI) / p));\n        }\n        return a * Math.pow(2, -10 * (k -= 1))\n            * Math.sin((k - s) * (2 * Math.PI) / p) * 0.5 + 1;\n    },\n    backIn: function (k) {\n        var s = 1.70158;\n        return k * k * ((s + 1) * k - s);\n    },\n    backOut: function (k) {\n        var s = 1.70158;\n        return --k * k * ((s + 1) * k + s) + 1;\n    },\n    backInOut: function (k) {\n        var s = 1.70158 * 1.525;\n        if ((k *= 2) < 1) {\n            return 0.5 * (k * k * ((s + 1) * k - s));\n        }\n        return 0.5 * ((k -= 2) * k * ((s + 1) * k + s) + 2);\n    },\n    bounceIn: function (k) {\n        return 1 - easing.bounceOut(1 - k);\n    },\n    bounceOut: function (k) {\n        if (k < (1 / 2.75)) {\n            return 7.5625 * k * k;\n        }\n        else if (k < (2 / 2.75)) {\n            return 7.5625 * (k -= (1.5 / 2.75)) * k + 0.75;\n        }\n        else if (k < (2.5 / 2.75)) {\n            return 7.5625 * (k -= (2.25 / 2.75)) * k + 0.9375;\n        }\n        else {\n            return 7.5625 * (k -= (2.625 / 2.75)) * k + 0.984375;\n        }\n    },\n    bounceInOut: function (k) {\n        if (k < 0.5) {\n            return easing.bounceIn(k * 2) * 0.5;\n        }\n        return easing.bounceOut(k * 2 - 1) * 0.5 + 0.5;\n    }\n};\nexport default easing;\n","import easingFuncs from './easing';\nvar Clip = (function () {\n    function Clip(opts) {\n        this._initialized = false;\n        this._startTime = 0;\n        this._pausedTime = 0;\n        this._paused = false;\n        this._life = opts.life || 1000;\n        this._delay = opts.delay || 0;\n        this.loop = opts.loop == null ? false : opts.loop;\n        this.gap = opts.gap || 0;\n        this.easing = opts.easing || 'linear';\n        this.onframe = opts.onframe;\n        this.ondestroy = opts.ondestroy;\n        this.onrestart = opts.onrestart;\n    }\n    Clip.prototype.step = function (globalTime, deltaTime) {\n        if (!this._initialized) {\n            this._startTime = globalTime + this._delay;\n            this._initialized = true;\n        }\n        if (this._paused) {\n            this._pausedTime += deltaTime;\n            return;\n        }\n        var percent = (globalTime - this._startTime - this._pausedTime) / this._life;\n        if (percent < 0) {\n            percent = 0;\n        }\n        percent = Math.min(percent, 1);\n        var easing = this.easing;\n        var easingFunc = typeof easing === 'string'\n            ? easingFuncs[easing] : easing;\n        var schedule = typeof easingFunc === 'function'\n            ? easingFunc(percent)\n            : percent;\n        this.onframe && this.onframe(schedule);\n        if (percent === 1) {\n            if (this.loop) {\n                this._restart(globalTime);\n                this.onrestart && this.onrestart();\n            }\n            else {\n                return true;\n            }\n        }\n        return false;\n    };\n    Clip.prototype._restart = function (globalTime) {\n        var remainder = (globalTime - this._startTime - this._pausedTime) % this._life;\n        this._startTime = globalTime - remainder + this.gap;\n        this._pausedTime = 0;\n    };\n    Clip.prototype.pause = function () {\n        this._paused = true;\n    };\n    Clip.prototype.resume = function () {\n        this._paused = false;\n    };\n    return Clip;\n}());\nexport default Clip;\n","import Clip from './Clip';\nimport * as color from '../tool/color';\nimport { isArrayLike, keys, logError } from '../core/util';\nvar arraySlice = Array.prototype.slice;\nexport function interpolateNumber(p0, p1, percent) {\n    return (p1 - p0) * percent + p0;\n}\nexport function step(p0, p1, percent) {\n    return percent > 0.5 ? p1 : p0;\n}\nexport function interpolate1DArray(out, p0, p1, percent) {\n    var len = p0.length;\n    for (var i = 0; i < len; i++) {\n        out[i] = interpolateNumber(p0[i], p1[i], percent);\n    }\n}\nexport function interpolate2DArray(out, p0, p1, percent) {\n    var len = p0.length;\n    var len2 = len && p0[0].length;\n    for (var i = 0; i < len; i++) {\n        if (!out[i]) {\n            out[i] = [];\n        }\n        for (var j = 0; j < len2; j++) {\n            out[i][j] = interpolateNumber(p0[i][j], p1[i][j], percent);\n        }\n    }\n}\nfunction add1DArray(out, p0, p1, sign) {\n    var len = p0.length;\n    for (var i = 0; i < len; i++) {\n        out[i] = p0[i] + p1[i] * sign;\n    }\n    return out;\n}\nfunction add2DArray(out, p0, p1, sign) {\n    var len = p0.length;\n    var len2 = len && p0[0].length;\n    for (var i = 0; i < len; i++) {\n        if (!out[i]) {\n            out[i] = [];\n        }\n        for (var j = 0; j < len2; j++) {\n            out[i][j] = p0[i][j] + p1[i][j] * sign;\n        }\n    }\n    return out;\n}\nfunction fillArray(val0, val1, arrDim) {\n    var arr0 = val0;\n    var arr1 = val1;\n    if (!arr0.push || !arr1.push) {\n        return;\n    }\n    var arr0Len = arr0.length;\n    var arr1Len = arr1.length;\n    if (arr0Len !== arr1Len) {\n        var isPreviousLarger = arr0Len > arr1Len;\n        if (isPreviousLarger) {\n            arr0.length = arr1Len;\n        }\n        else {\n            for (var i = arr0Len; i < arr1Len; i++) {\n                arr0.push(arrDim === 1 ? arr1[i] : arraySlice.call(arr1[i]));\n            }\n        }\n    }\n    var len2 = arr0[0] && arr0[0].length;\n    for (var i = 0; i < arr0.length; i++) {\n        if (arrDim === 1) {\n            if (isNaN(arr0[i])) {\n                arr0[i] = arr1[i];\n            }\n        }\n        else {\n            for (var j = 0; j < len2; j++) {\n                if (isNaN(arr0[i][j])) {\n                    arr0[i][j] = arr1[i][j];\n                }\n            }\n        }\n    }\n}\nfunction is1DArraySame(arr0, arr1) {\n    var len = arr0.length;\n    if (len !== arr1.length) {\n        return false;\n    }\n    for (var i = 0; i < len; i++) {\n        if (arr0[i] !== arr1[i]) {\n            return false;\n        }\n    }\n    return true;\n}\nfunction is2DArraySame(arr0, arr1) {\n    var len = arr0.length;\n    if (len !== arr1.length) {\n        return false;\n    }\n    var len2 = arr0[0].length;\n    for (var i = 0; i < len; i++) {\n        for (var j = 0; j < len2; j++) {\n            if (arr0[i][j] !== arr1[i][j]) {\n                return false;\n            }\n        }\n    }\n    return true;\n}\nfunction catmullRomInterpolate(p0, p1, p2, p3, t, t2, t3) {\n    var v0 = (p2 - p0) * 0.5;\n    var v1 = (p3 - p1) * 0.5;\n    return (2 * (p1 - p2) + v0 + v1) * t3\n        + (-3 * (p1 - p2) - 2 * v0 - v1) * t2\n        + v0 * t + p1;\n}\nfunction catmullRomInterpolate1DArray(out, p0, p1, p2, p3, t, t2, t3) {\n    var len = p0.length;\n    for (var i = 0; i < len; i++) {\n        out[i] = catmullRomInterpolate(p0[i], p1[i], p2[i], p3[i], t, t2, t3);\n    }\n}\nfunction catmullRomInterpolate2DArray(out, p0, p1, p2, p3, t, t2, t3) {\n    var len = p0.length;\n    var len2 = p0[0].length;\n    for (var i = 0; i < len; i++) {\n        if (!out[i]) {\n            out[1] = [];\n        }\n        for (var j = 0; j < len2; j++) {\n            out[i][j] = catmullRomInterpolate(p0[i][j], p1[i][j], p2[i][j], p3[i][j], t, t2, t3);\n        }\n    }\n}\nexport function cloneValue(value) {\n    if (isArrayLike(value)) {\n        var len = value.length;\n        if (isArrayLike(value[0])) {\n            var ret = [];\n            for (var i = 0; i < len; i++) {\n                ret.push(arraySlice.call(value[i]));\n            }\n            return ret;\n        }\n        return arraySlice.call(value);\n    }\n    return value;\n}\nfunction rgba2String(rgba) {\n    rgba[0] = Math.floor(rgba[0]);\n    rgba[1] = Math.floor(rgba[1]);\n    rgba[2] = Math.floor(rgba[2]);\n    return 'rgba(' + rgba.join(',') + ')';\n}\nfunction guessArrayDim(value) {\n    return isArrayLike(value && value[0]) ? 2 : 1;\n}\nvar tmpRgba = [0, 0, 0, 0];\nvar Track = (function () {\n    function Track(propName) {\n        this.keyframes = [];\n        this.maxTime = 0;\n        this.arrDim = 0;\n        this.interpolable = true;\n        this._needsSort = false;\n        this._isAllValueEqual = true;\n        this._lastFrame = 0;\n        this._lastFramePercent = 0;\n        this.propName = propName;\n    }\n    Track.prototype.isFinished = function () {\n        return this._finished;\n    };\n    Track.prototype.setFinished = function () {\n        this._finished = true;\n        if (this._additiveTrack) {\n            this._additiveTrack.setFinished();\n        }\n    };\n    Track.prototype.needsAnimate = function () {\n        return !this._isAllValueEqual && this.keyframes.length >= 2 && this.interpolable;\n    };\n    Track.prototype.getAdditiveTrack = function () {\n        return this._additiveTrack;\n    };\n    Track.prototype.addKeyframe = function (time, value) {\n        if (time >= this.maxTime) {\n            this.maxTime = time;\n        }\n        else {\n            this._needsSort = true;\n        }\n        var keyframes = this.keyframes;\n        var len = keyframes.length;\n        if (this.interpolable) {\n            if (isArrayLike(value)) {\n                var arrayDim = guessArrayDim(value);\n                if (len > 0 && this.arrDim !== arrayDim) {\n                    this.interpolable = false;\n                    return;\n                }\n                if (arrayDim === 1 && typeof value[0] !== 'number'\n                    || arrayDim === 2 && typeof value[0][0] !== 'number') {\n                    this.interpolable = false;\n                    return;\n                }\n                if (len > 0) {\n                    var lastFrame = keyframes[len - 1];\n                    if (this._isAllValueEqual) {\n                        if (arrayDim === 1) {\n                            if (!is1DArraySame(value, lastFrame.value)) {\n                                this._isAllValueEqual = false;\n                            }\n                        }\n                        else {\n                            this._isAllValueEqual = false;\n                        }\n                    }\n                }\n                this.arrDim = arrayDim;\n            }\n            else {\n                if (this.arrDim > 0) {\n                    this.interpolable = false;\n                    return;\n                }\n                if (typeof value === 'string') {\n                    var colorArray = color.parse(value);\n                    if (colorArray) {\n                        value = colorArray;\n                        this.isValueColor = true;\n                    }\n                    else {\n                        this.interpolable = false;\n                    }\n                }\n                else if (typeof value !== 'number') {\n                    this.interpolable = false;\n                    return;\n                }\n                if (this._isAllValueEqual && len > 0) {\n                    var lastFrame = keyframes[len - 1];\n                    if (this.isValueColor && !is1DArraySame(lastFrame.value, value)) {\n                        this._isAllValueEqual = false;\n                    }\n                    else if (lastFrame.value !== value) {\n                        this._isAllValueEqual = false;\n                    }\n                }\n            }\n        }\n        var kf = {\n            time: time,\n            value: value,\n            percent: 0\n        };\n        this.keyframes.push(kf);\n        return kf;\n    };\n    Track.prototype.prepare = function (additiveTrack) {\n        var kfs = this.keyframes;\n        if (this._needsSort) {\n            kfs.sort(function (a, b) {\n                return a.time - b.time;\n            });\n        }\n        var arrDim = this.arrDim;\n        var kfsLen = kfs.length;\n        var lastKf = kfs[kfsLen - 1];\n        for (var i = 0; i < kfsLen; i++) {\n            kfs[i].percent = kfs[i].time / this.maxTime;\n            if (arrDim > 0 && i !== kfsLen - 1) {\n                fillArray(kfs[i].value, lastKf.value, arrDim);\n            }\n        }\n        if (additiveTrack\n            && this.needsAnimate()\n            && additiveTrack.needsAnimate()\n            && arrDim === additiveTrack.arrDim\n            && this.isValueColor === additiveTrack.isValueColor\n            && !additiveTrack._finished) {\n            this._additiveTrack = additiveTrack;\n            var startValue = kfs[0].value;\n            for (var i = 0; i < kfsLen; i++) {\n                if (arrDim === 0) {\n                    if (this.isValueColor) {\n                        kfs[i].additiveValue\n                            = add1DArray([], kfs[i].value, startValue, -1);\n                    }\n                    else {\n                        kfs[i].additiveValue = kfs[i].value - startValue;\n                    }\n                }\n                else if (arrDim === 1) {\n                    kfs[i].additiveValue = add1DArray([], kfs[i].value, startValue, -1);\n                }\n                else if (arrDim === 2) {\n                    kfs[i].additiveValue = add2DArray([], kfs[i].value, startValue, -1);\n                }\n            }\n        }\n    };\n    Track.prototype.step = function (target, percent) {\n        if (this._finished) {\n            return;\n        }\n        if (this._additiveTrack && this._additiveTrack._finished) {\n            this._additiveTrack = null;\n        }\n        var isAdditive = this._additiveTrack != null;\n        var valueKey = isAdditive ? 'additiveValue' : 'value';\n        var keyframes = this.keyframes;\n        var kfsNum = this.keyframes.length;\n        var propName = this.propName;\n        var arrDim = this.arrDim;\n        var isValueColor = this.isValueColor;\n        var frameIdx;\n        if (percent < 0) {\n            frameIdx = 0;\n        }\n        else if (percent < this._lastFramePercent) {\n            var start = Math.min(this._lastFrame + 1, kfsNum - 1);\n            for (frameIdx = start; frameIdx >= 0; frameIdx--) {\n                if (keyframes[frameIdx].percent <= percent) {\n                    break;\n                }\n            }\n            frameIdx = Math.min(frameIdx, kfsNum - 2);\n        }\n        else {\n            for (frameIdx = this._lastFrame; frameIdx < kfsNum; frameIdx++) {\n                if (keyframes[frameIdx].percent > percent) {\n                    break;\n                }\n            }\n            frameIdx = Math.min(frameIdx - 1, kfsNum - 2);\n        }\n        var nextFrame = keyframes[frameIdx + 1];\n        var frame = keyframes[frameIdx];\n        if (!(frame && nextFrame)) {\n            return;\n        }\n        this._lastFrame = frameIdx;\n        this._lastFramePercent = percent;\n        var range = (nextFrame.percent - frame.percent);\n        if (range === 0) {\n            return;\n        }\n        var w = (percent - frame.percent) / range;\n        var targetArr = isAdditive ? this._additiveValue\n            : (isValueColor ? tmpRgba : target[propName]);\n        if ((arrDim > 0 || isValueColor) && !targetArr) {\n            targetArr = this._additiveValue = [];\n        }\n        if (this.useSpline) {\n            var p1 = keyframes[frameIdx][valueKey];\n            var p0 = keyframes[frameIdx === 0 ? frameIdx : frameIdx - 1][valueKey];\n            var p2 = keyframes[frameIdx > kfsNum - 2 ? kfsNum - 1 : frameIdx + 1][valueKey];\n            var p3 = keyframes[frameIdx > kfsNum - 3 ? kfsNum - 1 : frameIdx + 2][valueKey];\n            if (arrDim > 0) {\n                arrDim === 1\n                    ? catmullRomInterpolate1DArray(targetArr, p0, p1, p2, p3, w, w * w, w * w * w)\n                    : catmullRomInterpolate2DArray(targetArr, p0, p1, p2, p3, w, w * w, w * w * w);\n            }\n            else if (isValueColor) {\n                catmullRomInterpolate1DArray(targetArr, p0, p1, p2, p3, w, w * w, w * w * w);\n                if (!isAdditive) {\n                    target[propName] = rgba2String(targetArr);\n                }\n            }\n            else {\n                var value = void 0;\n                if (!this.interpolable) {\n                    value = p2;\n                }\n                else {\n                    value = catmullRomInterpolate(p0, p1, p2, p3, w, w * w, w * w * w);\n                }\n                if (isAdditive) {\n                    this._additiveValue = value;\n                }\n                else {\n                    target[propName] = value;\n                }\n            }\n        }\n        else {\n            if (arrDim > 0) {\n                arrDim === 1\n                    ? interpolate1DArray(targetArr, frame[valueKey], nextFrame[valueKey], w)\n                    : interpolate2DArray(targetArr, frame[valueKey], nextFrame[valueKey], w);\n            }\n            else if (isValueColor) {\n                interpolate1DArray(targetArr, frame[valueKey], nextFrame[valueKey], w);\n                if (!isAdditive) {\n                    target[propName] = rgba2String(targetArr);\n                }\n            }\n            else {\n                var value = void 0;\n                if (!this.interpolable) {\n                    value = step(frame[valueKey], nextFrame[valueKey], w);\n                }\n                else {\n                    value = interpolateNumber(frame[valueKey], nextFrame[valueKey], w);\n                }\n                if (isAdditive) {\n                    this._additiveValue = value;\n                }\n                else {\n                    target[propName] = value;\n                }\n            }\n        }\n        if (isAdditive) {\n            this._addToTarget(target);\n        }\n    };\n    Track.prototype._addToTarget = function (target) {\n        var arrDim = this.arrDim;\n        var propName = this.propName;\n        var additiveValue = this._additiveValue;\n        if (arrDim === 0) {\n            if (this.isValueColor) {\n                color.parse(target[propName], tmpRgba);\n                add1DArray(tmpRgba, tmpRgba, additiveValue, 1);\n                target[propName] = rgba2String(tmpRgba);\n            }\n            else {\n                target[propName] = target[propName] + additiveValue;\n            }\n        }\n        else if (arrDim === 1) {\n            add1DArray(target[propName], target[propName], additiveValue, 1);\n        }\n        else if (arrDim === 2) {\n            add2DArray(target[propName], target[propName], additiveValue, 1);\n        }\n    };\n    return Track;\n}());\nvar Animator = (function () {\n    function Animator(target, loop, additiveTo) {\n        this._tracks = {};\n        this._trackKeys = [];\n        this._delay = 0;\n        this._maxTime = 0;\n        this._paused = false;\n        this._started = 0;\n        this._clip = null;\n        this._target = target;\n        this._loop = loop;\n        if (loop && additiveTo) {\n            logError('Can\\' use additive animation on looped animation.');\n            return;\n        }\n        this._additiveAnimators = additiveTo;\n    }\n    Animator.prototype.getTarget = function () {\n        return this._target;\n    };\n    Animator.prototype.changeTarget = function (target) {\n        this._target = target;\n    };\n    Animator.prototype.when = function (time, props) {\n        return this.whenWithKeys(time, props, keys(props));\n    };\n    Animator.prototype.whenWithKeys = function (time, props, propNames) {\n        var tracks = this._tracks;\n        for (var i = 0; i < propNames.length; i++) {\n            var propName = propNames[i];\n            var track = tracks[propName];\n            if (!track) {\n                track = tracks[propName] = new Track(propName);\n                var initialValue = void 0;\n                var additiveTrack = this._getAdditiveTrack(propName);\n                if (additiveTrack) {\n                    var lastFinalKf = additiveTrack.keyframes[additiveTrack.keyframes.length - 1];\n                    initialValue = lastFinalKf && lastFinalKf.value;\n                    if (additiveTrack.isValueColor && initialValue) {\n                        initialValue = rgba2String(initialValue);\n                    }\n                }\n                else {\n                    initialValue = this._target[propName];\n                }\n                if (initialValue == null) {\n                    continue;\n                }\n                if (time !== 0) {\n                    track.addKeyframe(0, cloneValue(initialValue));\n                }\n                this._trackKeys.push(propName);\n            }\n            track.addKeyframe(time, cloneValue(props[propName]));\n        }\n        this._maxTime = Math.max(this._maxTime, time);\n        return this;\n    };\n    Animator.prototype.pause = function () {\n        this._clip.pause();\n        this._paused = true;\n    };\n    Animator.prototype.resume = function () {\n        this._clip.resume();\n        this._paused = false;\n    };\n    Animator.prototype.isPaused = function () {\n        return !!this._paused;\n    };\n    Animator.prototype._doneCallback = function () {\n        this._setTracksFinished();\n        this._clip = null;\n        var doneList = this._doneList;\n        if (doneList) {\n            var len = doneList.length;\n            for (var i = 0; i < len; i++) {\n                doneList[i].call(this);\n            }\n        }\n    };\n    Animator.prototype._abortedCallback = function () {\n        this._setTracksFinished();\n        var animation = this.animation;\n        var abortedList = this._abortedList;\n        if (animation) {\n            animation.removeClip(this._clip);\n        }\n        this._clip = null;\n        if (abortedList) {\n            for (var i = 0; i < abortedList.length; i++) {\n                abortedList[i].call(this);\n            }\n        }\n    };\n    Animator.prototype._setTracksFinished = function () {\n        var tracks = this._tracks;\n        var tracksKeys = this._trackKeys;\n        for (var i = 0; i < tracksKeys.length; i++) {\n            tracks[tracksKeys[i]].setFinished();\n        }\n    };\n    Animator.prototype._getAdditiveTrack = function (trackName) {\n        var additiveTrack;\n        var additiveAnimators = this._additiveAnimators;\n        if (additiveAnimators) {\n            for (var i = 0; i < additiveAnimators.length; i++) {\n                var track = additiveAnimators[i].getTrack(trackName);\n                if (track) {\n                    additiveTrack = track;\n                }\n            }\n        }\n        return additiveTrack;\n    };\n    Animator.prototype.start = function (easing, forceAnimate) {\n        if (this._started > 0) {\n            return;\n        }\n        this._started = 1;\n        var self = this;\n        var tracks = [];\n        for (var i = 0; i < this._trackKeys.length; i++) {\n            var propName = this._trackKeys[i];\n            var track = this._tracks[propName];\n            var additiveTrack = this._getAdditiveTrack(propName);\n            var kfs = track.keyframes;\n            track.prepare(additiveTrack);\n            if (track.needsAnimate()) {\n                tracks.push(track);\n            }\n            else if (!track.interpolable) {\n                var lastKf = kfs[kfs.length - 1];\n                if (lastKf) {\n                    self._target[track.propName] = lastKf.value;\n                }\n            }\n        }\n        if (tracks.length || forceAnimate) {\n            var clip = new Clip({\n                life: this._maxTime,\n                loop: this._loop,\n                delay: this._delay,\n                onframe: function (percent) {\n                    self._started = 2;\n                    var additiveAnimators = self._additiveAnimators;\n                    if (additiveAnimators) {\n                        var stillHasAdditiveAnimator = false;\n                        for (var i = 0; i < additiveAnimators.length; i++) {\n                            if (additiveAnimators[i]._clip) {\n                                stillHasAdditiveAnimator = true;\n                                break;\n                            }\n                        }\n                        if (!stillHasAdditiveAnimator) {\n                            self._additiveAnimators = null;\n                        }\n                    }\n                    for (var i = 0; i < tracks.length; i++) {\n                        tracks[i].step(self._target, percent);\n                    }\n                    var onframeList = self._onframeList;\n                    if (onframeList) {\n                        for (var i = 0; i < onframeList.length; i++) {\n                            onframeList[i](self._target, percent);\n                        }\n                    }\n                },\n                ondestroy: function () {\n                    self._doneCallback();\n                }\n            });\n            this._clip = clip;\n            if (this.animation) {\n                this.animation.addClip(clip);\n            }\n            if (easing && easing !== 'spline') {\n                clip.easing = easing;\n            }\n        }\n        else {\n            this._doneCallback();\n        }\n        return this;\n    };\n    Animator.prototype.stop = function (forwardToLast) {\n        if (!this._clip) {\n            return;\n        }\n        var clip = this._clip;\n        if (forwardToLast) {\n            clip.onframe(1);\n        }\n        this._abortedCallback();\n    };\n    Animator.prototype.delay = function (time) {\n        this._delay = time;\n        return this;\n    };\n    Animator.prototype.during = function (cb) {\n        if (cb) {\n            if (!this._onframeList) {\n                this._onframeList = [];\n            }\n            this._onframeList.push(cb);\n        }\n        return this;\n    };\n    Animator.prototype.done = function (cb) {\n        if (cb) {\n            if (!this._doneList) {\n                this._doneList = [];\n            }\n            this._doneList.push(cb);\n        }\n        return this;\n    };\n    Animator.prototype.aborted = function (cb) {\n        if (cb) {\n            if (!this._abortedList) {\n                this._abortedList = [];\n            }\n            this._abortedList.push(cb);\n        }\n        return this;\n    };\n    Animator.prototype.getClip = function () {\n        return this._clip;\n    };\n    Animator.prototype.getTrack = function (propName) {\n        return this._tracks[propName];\n    };\n    Animator.prototype.stopTracks = function (propNames, forwardToLast) {\n        if (!propNames.length || !this._clip) {\n            return true;\n        }\n        var tracks = this._tracks;\n        var tracksKeys = this._trackKeys;\n        for (var i = 0; i < propNames.length; i++) {\n            var track = tracks[propNames[i]];\n            if (track) {\n                if (forwardToLast) {\n                    track.step(this._target, 1);\n                }\n                else if (this._started === 1) {\n                    track.step(this._target, 0);\n                }\n                track.setFinished();\n            }\n        }\n        var allAborted = true;\n        for (var i = 0; i < tracksKeys.length; i++) {\n            if (!tracks[tracksKeys[i]].isFinished()) {\n                allAborted = false;\n                break;\n            }\n        }\n        if (allAborted) {\n            this._abortedCallback();\n        }\n        return allAborted;\n    };\n    Animator.prototype.saveFinalToTarget = function (target, trackKeys) {\n        if (!target) {\n            return;\n        }\n        trackKeys = trackKeys || this._trackKeys;\n        for (var i = 0; i < trackKeys.length; i++) {\n            var propName = trackKeys[i];\n            var track = this._tracks[propName];\n            if (!track || track.isFinished()) {\n                continue;\n            }\n            var kfs = track.keyframes;\n            var lastKf = kfs[kfs.length - 1];\n            if (lastKf) {\n                var val = cloneValue(lastKf.value);\n                if (track.isValueColor) {\n                    val = rgba2String(val);\n                }\n                target[propName] = val;\n            }\n        }\n    };\n    Animator.prototype.__changeFinalValue = function (finalProps, trackKeys) {\n        trackKeys = trackKeys || keys(finalProps);\n        for (var i = 0; i < trackKeys.length; i++) {\n            var propName = trackKeys[i];\n            var track = this._tracks[propName];\n            if (!track) {\n                continue;\n            }\n            var kfs = track.keyframes;\n            if (kfs.length > 1) {\n                var lastKf = kfs.pop();\n                track.addKeyframe(lastKf.time, finalProps[propName]);\n                track.prepare(track.getAdditiveTrack());\n            }\n        }\n    };\n    return Animator;\n}());\nexport default Animator;\n","export default function windingLine(x0, y0, x1, y1, x, y) {\n    if ((y > y0 && y > y1) || (y < y0 && y < y1)) {\n        return 0;\n    }\n    if (y1 === y0) {\n        return 0;\n    }\n    var t = (y - y0) / (y1 - y0);\n    var dir = y1 < y0 ? 1 : -1;\n    if (t === 1 || t === 0) {\n        dir = y1 < y0 ? 0.5 : -0.5;\n    }\n    var x_ = t * (x1 - x0) + x0;\n    return x_ === x ? Infinity : x_ > x ? dir : 0;\n}\n","export function create(x, y) {\n    if (x == null) {\n        x = 0;\n    }\n    if (y == null) {\n        y = 0;\n    }\n    return [x, y];\n}\nexport function copy(out, v) {\n    out[0] = v[0];\n    out[1] = v[1];\n    return out;\n}\nexport function clone(v) {\n    return [v[0], v[1]];\n}\nexport function set(out, a, b) {\n    out[0] = a;\n    out[1] = b;\n    return out;\n}\nexport function add(out, v1, v2) {\n    out[0] = v1[0] + v2[0];\n    out[1] = v1[1] + v2[1];\n    return out;\n}\nexport function scaleAndAdd(out, v1, v2, a) {\n    out[0] = v1[0] + v2[0] * a;\n    out[1] = v1[1] + v2[1] * a;\n    return out;\n}\nexport function sub(out, v1, v2) {\n    out[0] = v1[0] - v2[0];\n    out[1] = v1[1] - v2[1];\n    return out;\n}\nexport function len(v) {\n    return Math.sqrt(lenSquare(v));\n}\nexport var length = len;\nexport function lenSquare(v) {\n    return v[0] * v[0] + v[1] * v[1];\n}\nexport var lengthSquare = lenSquare;\nexport function mul(out, v1, v2) {\n    out[0] = v1[0] * v2[0];\n    out[1] = v1[1] * v2[1];\n    return out;\n}\nexport function div(out, v1, v2) {\n    out[0] = v1[0] / v2[0];\n    out[1] = v1[1] / v2[1];\n    return out;\n}\nexport function dot(v1, v2) {\n    return v1[0] * v2[0] + v1[1] * v2[1];\n}\nexport function scale(out, v, s) {\n    out[0] = v[0] * s;\n    out[1] = v[1] * s;\n    return out;\n}\nexport function normalize(out, v) {\n    var d = len(v);\n    if (d === 0) {\n        out[0] = 0;\n        out[1] = 0;\n    }\n    else {\n        out[0] = v[0] / d;\n        out[1] = v[1] / d;\n    }\n    return out;\n}\nexport function distance(v1, v2) {\n    return Math.sqrt((v1[0] - v2[0]) * (v1[0] - v2[0])\n        + (v1[1] - v2[1]) * (v1[1] - v2[1]));\n}\nexport var dist = distance;\nexport function distanceSquare(v1, v2) {\n    return (v1[0] - v2[0]) * (v1[0] - v2[0])\n        + (v1[1] - v2[1]) * (v1[1] - v2[1]);\n}\nexport var distSquare = distanceSquare;\nexport function negate(out, v) {\n    out[0] = -v[0];\n    out[1] = -v[1];\n    return out;\n}\nexport function lerp(out, v1, v2, t) {\n    out[0] = v1[0] + t * (v2[0] - v1[0]);\n    out[1] = v1[1] + t * (v2[1] - v1[1]);\n    return out;\n}\nexport function applyTransform(out, v, m) {\n    var x = v[0];\n    var y = v[1];\n    out[0] = m[0] * x + m[2] * y + m[4];\n    out[1] = m[1] * x + m[3] * y + m[5];\n    return out;\n}\nexport function min(out, v1, v2) {\n    out[0] = Math.min(v1[0], v2[0]);\n    out[1] = Math.min(v1[1], v2[1]);\n    return out;\n}\nexport function max(out, v1, v2) {\n    out[0] = Math.max(v1[0], v2[0]);\n    out[1] = Math.max(v1[1], v2[1]);\n    return out;\n}\n","var Entry = (function () {\n    function Entry(val) {\n        this.value = val;\n    }\n    return Entry;\n}());\nexport { Entry };\nvar LinkedList = (function () {\n    function LinkedList() {\n        this._len = 0;\n    }\n    LinkedList.prototype.insert = function (val) {\n        var entry = new Entry(val);\n        this.insertEntry(entry);\n        return entry;\n    };\n    LinkedList.prototype.insertEntry = function (entry) {\n        if (!this.head) {\n            this.head = this.tail = entry;\n        }\n        else {\n            this.tail.next = entry;\n            entry.prev = this.tail;\n            entry.next = null;\n            this.tail = entry;\n        }\n        this._len++;\n    };\n    LinkedList.prototype.remove = function (entry) {\n        var prev = entry.prev;\n        var next = entry.next;\n        if (prev) {\n            prev.next = next;\n        }\n        else {\n            this.head = next;\n        }\n        if (next) {\n            next.prev = prev;\n        }\n        else {\n            this.tail = prev;\n        }\n        entry.next = entry.prev = null;\n        this._len--;\n    };\n    LinkedList.prototype.len = function () {\n        return this._len;\n    };\n    LinkedList.prototype.clear = function () {\n        this.head = this.tail = null;\n        this._len = 0;\n    };\n    return LinkedList;\n}());\nexport { LinkedList };\nvar LRU = (function () {\n    function LRU(maxSize) {\n        this._list = new LinkedList();\n        this._maxSize = 10;\n        this._map = {};\n        this._maxSize = maxSize;\n    }\n    LRU.prototype.put = function (key, value) {\n        var list = this._list;\n        var map = this._map;\n        var removed = null;\n        if (map[key] == null) {\n            var len = list.len();\n            var entry = this._lastRemovedEntry;\n            if (len >= this._maxSize && len > 0) {\n                var leastUsedEntry = list.head;\n                list.remove(leastUsedEntry);\n                delete map[leastUsedEntry.key];\n                removed = leastUsedEntry.value;\n                this._lastRemovedEntry = leastUsedEntry;\n            }\n            if (entry) {\n                entry.value = value;\n            }\n            else {\n                entry = new Entry(value);\n            }\n            entry.key = key;\n            list.insertEntry(entry);\n            map[key] = entry;\n        }\n        return removed;\n    };\n    LRU.prototype.get = function (key) {\n        var entry = this._map[key];\n        var list = this._list;\n        if (entry != null) {\n            if (entry !== list.tail) {\n                list.remove(entry);\n                list.insertEntry(entry);\n            }\n            return entry.value;\n        }\n    };\n    LRU.prototype.clear = function () {\n        this._list.clear();\n        this._map = {};\n    };\n    LRU.prototype.len = function () {\n        return this._list.len();\n    };\n    return LRU;\n}());\nexport default LRU;\n","import LRU from '../../core/LRU';\nvar globalImageCache = new LRU(50);\nexport function findExistImage(newImageOrSrc) {\n    if (typeof newImageOrSrc === 'string') {\n        var cachedImgObj = globalImageCache.get(newImageOrSrc);\n        return cachedImgObj && cachedImgObj.image;\n    }\n    else {\n        return newImageOrSrc;\n    }\n}\nexport function createOrUpdateImage(newImageOrSrc, image, hostEl, onload, cbPayload) {\n    if (!newImageOrSrc) {\n        return image;\n    }\n    else if (typeof newImageOrSrc === 'string') {\n        if ((image && image.__zrImageSrc === newImageOrSrc) || !hostEl) {\n            return image;\n        }\n        var cachedImgObj = globalImageCache.get(newImageOrSrc);\n        var pendingWrap = { hostEl: hostEl, cb: onload, cbPayload: cbPayload };\n        if (cachedImgObj) {\n            image = cachedImgObj.image;\n            !isImageReady(image) && cachedImgObj.pending.push(pendingWrap);\n        }\n        else {\n            image = new Image();\n            image.onload = image.onerror = imageOnLoad;\n            globalImageCache.put(newImageOrSrc, image.__cachedImgObj = {\n                image: image,\n                pending: [pendingWrap]\n            });\n            image.src = image.__zrImageSrc = newImageOrSrc;\n        }\n        return image;\n    }\n    else {\n        return newImageOrSrc;\n    }\n}\nfunction imageOnLoad() {\n    var cachedImgObj = this.__cachedImgObj;\n    this.onload = this.onerror = this.__cachedImgObj = null;\n    for (var i = 0; i < cachedImgObj.pending.length; i++) {\n        var pendingWrap = cachedImgObj.pending[i];\n        var cb = pendingWrap.cb;\n        cb && cb(this, pendingWrap.cbPayload);\n        pendingWrap.hostEl.dirty();\n    }\n    cachedImgObj.pending.length = 0;\n}\nexport function isImageReady(image) {\n    return image && image.width && image.height;\n}\n","export function containStroke(x0, y0, x1, y1, lineWidth, x, y) {\n    if (lineWidth === 0) {\n        return false;\n    }\n    var _l = lineWidth;\n    var _a = 0;\n    var _b = x0;\n    if ((y > y0 + _l && y > y1 + _l)\n        || (y < y0 - _l && y < y1 - _l)\n        || (x > x0 + _l && x > x1 + _l)\n        || (x < x0 - _l && x < x1 - _l)) {\n        return false;\n    }\n    if (x0 !== x1) {\n        _a = (y0 - y1) / (x0 - x1);\n        _b = (x0 * y1 - x1 * y0) / (x0 - x1);\n    }\n    else {\n        return Math.abs(x - x0) <= _l / 2;\n    }\n    var tmp = _a * x - y + _b;\n    var _s = tmp * tmp / (_a * _a + 1);\n    return _s <= _l / 2 * _l / 2;\n}\n","var PI2 = Math.PI * 2;\nexport function normalizeRadian(angle) {\n    angle %= PI2;\n    if (angle < 0) {\n        angle += PI2;\n    }\n    return angle;\n}\n","import windingLine from './windingLine';\nvar EPSILON = 1e-8;\nfunction isAroundEqual(a, b) {\n    return Math.abs(a - b) < EPSILON;\n}\nexport function contain(points, x, y) {\n    var w = 0;\n    var p = points[0];\n    if (!p) {\n        return false;\n    }\n    for (var i = 1; i < points.length; i++) {\n        var p2 = points[i];\n        w += windingLine(p[0], p[1], p2[0], p2[1], x, y);\n        p = p2;\n    }\n    var p0 = points[0];\n    if (!isAroundEqual(p[0], p0[0]) || !isAroundEqual(p[1], p0[1])) {\n        w += windingLine(p[0], p[1], p0[0], p0[1], x, y);\n    }\n    return w !== 0;\n}\n","import { __extends } from \"tslib\";\nimport Displayble from './Displayable';\nimport BoundingRect from '../core/BoundingRect';\nvar m = [];\nvar IncrementalDisplayable = (function (_super) {\n    __extends(IncrementalDisplayable, _super);\n    function IncrementalDisplayable() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.notClear = true;\n        _this.incremental = true;\n        _this._displayables = [];\n        _this._temporaryDisplayables = [];\n        _this._cursor = 0;\n        return _this;\n    }\n    IncrementalDisplayable.prototype.traverse = function (cb, context) {\n        cb.call(context, this);\n    };\n    IncrementalDisplayable.prototype.useStyle = function () {\n        this.style = {};\n    };\n    IncrementalDisplayable.prototype.getCursor = function () {\n        return this._cursor;\n    };\n    IncrementalDisplayable.prototype.innerAfterBrush = function () {\n        this._cursor = this._displayables.length;\n    };\n    IncrementalDisplayable.prototype.clearDisplaybles = function () {\n        this._displayables = [];\n        this._temporaryDisplayables = [];\n        this._cursor = 0;\n        this.markRedraw();\n        this.notClear = false;\n    };\n    IncrementalDisplayable.prototype.clearTemporalDisplayables = function () {\n        this._temporaryDisplayables = [];\n    };\n    IncrementalDisplayable.prototype.addDisplayable = function (displayable, notPersistent) {\n        if (notPersistent) {\n            this._temporaryDisplayables.push(displayable);\n        }\n        else {\n            this._displayables.push(displayable);\n        }\n        this.markRedraw();\n    };\n    IncrementalDisplayable.prototype.addDisplayables = function (displayables, notPersistent) {\n        notPersistent = notPersistent || false;\n        for (var i = 0; i < displayables.length; i++) {\n            this.addDisplayable(displayables[i], notPersistent);\n        }\n    };\n    IncrementalDisplayable.prototype.getDisplayables = function () {\n        return this._displayables;\n    };\n    IncrementalDisplayable.prototype.getTemporalDisplayables = function () {\n        return this._temporaryDisplayables;\n    };\n    IncrementalDisplayable.prototype.eachPendingDisplayable = function (cb) {\n        for (var i = this._cursor; i < this._displayables.length; i++) {\n            cb && cb(this._displayables[i]);\n        }\n        for (var i = 0; i < this._temporaryDisplayables.length; i++) {\n            cb && cb(this._temporaryDisplayables[i]);\n        }\n    };\n    IncrementalDisplayable.prototype.update = function () {\n        this.updateTransform();\n        for (var i = this._cursor; i < this._displayables.length; i++) {\n            var displayable = this._displayables[i];\n            displayable.parent = this;\n            displayable.update();\n            displayable.parent = null;\n        }\n        for (var i = 0; i < this._temporaryDisplayables.length; i++) {\n            var displayable = this._temporaryDisplayables[i];\n            displayable.parent = this;\n            displayable.update();\n            displayable.parent = null;\n        }\n    };\n    IncrementalDisplayable.prototype.getBoundingRect = function () {\n        if (!this._rect) {\n            var rect = new BoundingRect(Infinity, Infinity, -Infinity, -Infinity);\n            for (var i = 0; i < this._displayables.length; i++) {\n                var displayable = this._displayables[i];\n                var childRect = displayable.getBoundingRect().clone();\n                if (displayable.needLocalTransform()) {\n                    childRect.applyTransform(displayable.getLocalTransform(m));\n                }\n                rect.union(childRect);\n            }\n            this._rect = rect;\n        }\n        return this._rect;\n    };\n    IncrementalDisplayable.prototype.contain = function (x, y) {\n        var localPos = this.transformCoordToLocal(x, y);\n        var rect = this.getBoundingRect();\n        if (rect.contain(localPos[0], localPos[1])) {\n            for (var i = 0; i < this._displayables.length; i++) {\n                var displayable = this._displayables[i];\n                if (displayable.contain(x, y)) {\n                    return true;\n                }\n            }\n        }\n        return false;\n    };\n    return IncrementalDisplayable;\n}(Displayble));\nexport default IncrementalDisplayable;\n","var round = Math.round;\nexport function subPixelOptimizeLine(outputShape, inputShape, style) {\n    if (!inputShape) {\n        return;\n    }\n    var x1 = inputShape.x1;\n    var x2 = inputShape.x2;\n    var y1 = inputShape.y1;\n    var y2 = inputShape.y2;\n    outputShape.x1 = x1;\n    outputShape.x2 = x2;\n    outputShape.y1 = y1;\n    outputShape.y2 = y2;\n    var lineWidth = style && style.lineWidth;\n    if (!lineWidth) {\n        return outputShape;\n    }\n    if (round(x1 * 2) === round(x2 * 2)) {\n        outputShape.x1 = outputShape.x2 = subPixelOptimize(x1, lineWidth, true);\n    }\n    if (round(y1 * 2) === round(y2 * 2)) {\n        outputShape.y1 = outputShape.y2 = subPixelOptimize(y1, lineWidth, true);\n    }\n    return outputShape;\n}\nexport function subPixelOptimizeRect(outputShape, inputShape, style) {\n    if (!inputShape) {\n        return;\n    }\n    var originX = inputShape.x;\n    var originY = inputShape.y;\n    var originWidth = inputShape.width;\n    var originHeight = inputShape.height;\n    outputShape.x = originX;\n    outputShape.y = originY;\n    outputShape.width = originWidth;\n    outputShape.height = originHeight;\n    var lineWidth = style && style.lineWidth;\n    if (!lineWidth) {\n        return outputShape;\n    }\n    outputShape.x = subPixelOptimize(originX, lineWidth, true);\n    outputShape.y = subPixelOptimize(originY, lineWidth, true);\n    outputShape.width = Math.max(subPixelOptimize(originX + originWidth, lineWidth, false) - outputShape.x, originWidth === 0 ? 0 : 1);\n    outputShape.height = Math.max(subPixelOptimize(originY + originHeight, lineWidth, false) - outputShape.y, originHeight === 0 ? 0 : 1);\n    return outputShape;\n}\nexport function subPixelOptimize(position, lineWidth, positiveOrNegative) {\n    if (!lineWidth) {\n        return position;\n    }\n    var doubledPosition = round(position * 2);\n    return (doubledPosition + round(lineWidth)) % 2 === 0\n        ? doubledPosition / 2\n        : (doubledPosition + (positiveOrNegative ? 1 : -1)) / 2;\n}\n","export function createLinearGradient(ctx, obj, rect) {\n    var x = obj.x == null ? 0 : obj.x;\n    var x2 = obj.x2 == null ? 1 : obj.x2;\n    var y = obj.y == null ? 0 : obj.y;\n    var y2 = obj.y2 == null ? 0 : obj.y2;\n    if (!obj.global) {\n        x = x * rect.width + rect.x;\n        x2 = x2 * rect.width + rect.x;\n        y = y * rect.height + rect.y;\n        y2 = y2 * rect.height + rect.y;\n    }\n    x = isNaN(x) ? 0 : x;\n    x2 = isNaN(x2) ? 1 : x2;\n    y = isNaN(y) ? 0 : y;\n    y2 = isNaN(y2) ? 0 : y2;\n    var canvasGradient = ctx.createLinearGradient(x, y, x2, y2);\n    return canvasGradient;\n}\nexport function createRadialGradient(ctx, obj, rect) {\n    var width = rect.width;\n    var height = rect.height;\n    var min = Math.min(width, height);\n    var x = obj.x == null ? 0.5 : obj.x;\n    var y = obj.y == null ? 0.5 : obj.y;\n    var r = obj.r == null ? 0.5 : obj.r;\n    if (!obj.global) {\n        x = x * width + rect.x;\n        y = y * height + rect.y;\n        r = r * min;\n    }\n    var canvasGradient = ctx.createRadialGradient(x, y, 0, x, y, r);\n    return canvasGradient;\n}\nexport function getCanvasGradient(ctx, obj, rect) {\n    var canvasGradient = obj.type === 'radial'\n        ? createRadialGradient(ctx, obj, rect)\n        : createLinearGradient(ctx, obj, rect);\n    var colorStops = obj.colorStops;\n    for (var i = 0; i < colorStops.length; i++) {\n        canvasGradient.addColorStop(colorStops[i].offset, colorStops[i].color);\n    }\n    return canvasGradient;\n}\nexport function isClipPathChanged(clipPaths, prevClipPaths) {\n    if (clipPaths === prevClipPaths || (!clipPaths && !prevClipPaths)) {\n        return false;\n    }\n    if (!clipPaths || !prevClipPaths || (clipPaths.length !== prevClipPaths.length)) {\n        return true;\n    }\n    for (var i = 0; i < clipPaths.length; i++) {\n        if (clipPaths[i] !== prevClipPaths[i]) {\n            return true;\n        }\n    }\n    return false;\n}\n","export function create() {\n    return [1, 0, 0, 1, 0, 0];\n}\nexport function identity(out) {\n    out[0] = 1;\n    out[1] = 0;\n    out[2] = 0;\n    out[3] = 1;\n    out[4] = 0;\n    out[5] = 0;\n    return out;\n}\nexport function copy(out, m) {\n    out[0] = m[0];\n    out[1] = m[1];\n    out[2] = m[2];\n    out[3] = m[3];\n    out[4] = m[4];\n    out[5] = m[5];\n    return out;\n}\nexport function mul(out, m1, m2) {\n    var out0 = m1[0] * m2[0] + m1[2] * m2[1];\n    var out1 = m1[1] * m2[0] + m1[3] * m2[1];\n    var out2 = m1[0] * m2[2] + m1[2] * m2[3];\n    var out3 = m1[1] * m2[2] + m1[3] * m2[3];\n    var out4 = m1[0] * m2[4] + m1[2] * m2[5] + m1[4];\n    var out5 = m1[1] * m2[4] + m1[3] * m2[5] + m1[5];\n    out[0] = out0;\n    out[1] = out1;\n    out[2] = out2;\n    out[3] = out3;\n    out[4] = out4;\n    out[5] = out5;\n    return out;\n}\nexport function translate(out, a, v) {\n    out[0] = a[0];\n    out[1] = a[1];\n    out[2] = a[2];\n    out[3] = a[3];\n    out[4] = a[4] + v[0];\n    out[5] = a[5] + v[1];\n    return out;\n}\nexport function rotate(out, a, rad) {\n    var aa = a[0];\n    var ac = a[2];\n    var atx = a[4];\n    var ab = a[1];\n    var ad = a[3];\n    var aty = a[5];\n    var st = Math.sin(rad);\n    var ct = Math.cos(rad);\n    out[0] = aa * ct + ab * st;\n    out[1] = -aa * st + ab * ct;\n    out[2] = ac * ct + ad * st;\n    out[3] = -ac * st + ct * ad;\n    out[4] = ct * atx + st * aty;\n    out[5] = ct * aty - st * atx;\n    return out;\n}\nexport function scale(out, a, v) {\n    var vx = v[0];\n    var vy = v[1];\n    out[0] = a[0] * vx;\n    out[1] = a[1] * vy;\n    out[2] = a[2] * vx;\n    out[3] = a[3] * vy;\n    out[4] = a[4] * vx;\n    out[5] = a[5] * vy;\n    return out;\n}\nexport function invert(out, a) {\n    var aa = a[0];\n    var ac = a[2];\n    var atx = a[4];\n    var ab = a[1];\n    var ad = a[3];\n    var aty = a[5];\n    var det = aa * ad - ab * ac;\n    if (!det) {\n        return null;\n    }\n    det = 1.0 / det;\n    out[0] = ad * det;\n    out[1] = -ab * det;\n    out[2] = -ac * det;\n    out[3] = aa * det;\n    out[4] = (ac * aty - ad * atx) * det;\n    out[5] = (ab * atx - aa * aty) * det;\n    return out;\n}\nexport function clone(a) {\n    var b = create();\n    copy(b, a);\n    return b;\n}\n","var Param = (function () {\n    function Param(target, e) {\n        this.target = target;\n        this.topTarget = e && e.topTarget;\n    }\n    return Param;\n}());\nvar Draggable = (function () {\n    function Draggable(handler) {\n        this.handler = handler;\n        handler.on('mousedown', this._dragStart, this);\n        handler.on('mousemove', this._drag, this);\n        handler.on('mouseup', this._dragEnd, this);\n    }\n    Draggable.prototype._dragStart = function (e) {\n        var draggingTarget = e.target;\n        while (draggingTarget && !draggingTarget.draggable) {\n            draggingTarget = draggingTarget.parent;\n        }\n        if (draggingTarget) {\n            this._draggingTarget = draggingTarget;\n            draggingTarget.dragging = true;\n            this._x = e.offsetX;\n            this._y = e.offsetY;\n            this.handler.dispatchToElement(new Param(draggingTarget, e), 'dragstart', e.event);\n        }\n    };\n    Draggable.prototype._drag = function (e) {\n        var draggingTarget = this._draggingTarget;\n        if (draggingTarget) {\n            var x = e.offsetX;\n            var y = e.offsetY;\n            var dx = x - this._x;\n            var dy = y - this._y;\n            this._x = x;\n            this._y = y;\n            draggingTarget.drift(dx, dy, e);\n            this.handler.dispatchToElement(new Param(draggingTarget, e), 'drag', e.event);\n            var dropTarget = this.handler.findHover(x, y, draggingTarget).target;\n            var lastDropTarget = this._dropTarget;\n            this._dropTarget = dropTarget;\n            if (draggingTarget !== dropTarget) {\n                if (lastDropTarget && dropTarget !== lastDropTarget) {\n                    this.handler.dispatchToElement(new Param(lastDropTarget, e), 'dragleave', e.event);\n                }\n                if (dropTarget && dropTarget !== lastDropTarget) {\n                    this.handler.dispatchToElement(new Param(dropTarget, e), 'dragenter', e.event);\n                }\n            }\n        }\n    };\n    Draggable.prototype._dragEnd = function (e) {\n        var draggingTarget = this._draggingTarget;\n        if (draggingTarget) {\n            draggingTarget.dragging = false;\n        }\n        this.handler.dispatchToElement(new Param(draggingTarget, e), 'dragend', e.event);\n        if (this._dropTarget) {\n            this.handler.dispatchToElement(new Param(this._dropTarget, e), 'drop', e.event);\n        }\n        this._draggingTarget = null;\n        this._dropTarget = null;\n    };\n    return Draggable;\n}());\nexport default Draggable;\n","import * as eventUtil from './event';\nvar GestureMgr = (function () {\n    function GestureMgr() {\n        this._track = [];\n    }\n    GestureMgr.prototype.recognize = function (event, target, root) {\n        this._doTrack(event, target, root);\n        return this._recognize(event);\n    };\n    GestureMgr.prototype.clear = function () {\n        this._track.length = 0;\n        return this;\n    };\n    GestureMgr.prototype._doTrack = function (event, target, root) {\n        var touches = event.touches;\n        if (!touches) {\n            return;\n        }\n        var trackItem = {\n            points: [],\n            touches: [],\n            target: target,\n            event: event\n        };\n        for (var i = 0, len = touches.length; i < len; i++) {\n            var touch = touches[i];\n            var pos = eventUtil.clientToLocal(root, touch, {});\n            trackItem.points.push([pos.zrX, pos.zrY]);\n            trackItem.touches.push(touch);\n        }\n        this._track.push(trackItem);\n    };\n    GestureMgr.prototype._recognize = function (event) {\n        for (var eventName in recognizers) {\n            if (recognizers.hasOwnProperty(eventName)) {\n                var gestureInfo = recognizers[eventName](this._track, event);\n                if (gestureInfo) {\n                    return gestureInfo;\n                }\n            }\n        }\n    };\n    return GestureMgr;\n}());\nexport { GestureMgr };\nfunction dist(pointPair) {\n    var dx = pointPair[1][0] - pointPair[0][0];\n    var dy = pointPair[1][1] - pointPair[0][1];\n    return Math.sqrt(dx * dx + dy * dy);\n}\nfunction center(pointPair) {\n    return [\n        (pointPair[0][0] + pointPair[1][0]) / 2,\n        (pointPair[0][1] + pointPair[1][1]) / 2\n    ];\n}\nvar recognizers = {\n    pinch: function (tracks, event) {\n        var trackLen = tracks.length;\n        if (!trackLen) {\n            return;\n        }\n        var pinchEnd = (tracks[trackLen - 1] || {}).points;\n        var pinchPre = (tracks[trackLen - 2] || {}).points || pinchEnd;\n        if (pinchPre\n            && pinchPre.length > 1\n            && pinchEnd\n            && pinchEnd.length > 1) {\n            var pinchScale = dist(pinchEnd) / dist(pinchPre);\n            !isFinite(pinchScale) && (pinchScale = 1);\n            event.pinchScale = pinchScale;\n            var pinchCenter = center(pinchEnd);\n            event.pinchX = pinchCenter[0];\n            event.pinchY = pinchCenter[1];\n            return {\n                type: 'pinch',\n                target: tracks[0].target,\n                event: event\n            };\n        }\n    }\n};\n","import { __extends } from \"tslib\";\nimport * as util from './core/util';\nimport * as vec2 from './core/vector';\nimport Draggable from './mixin/Draggable';\nimport Eventful from './core/Eventful';\nimport * as eventTool from './core/event';\nimport { GestureMgr } from './core/GestureMgr';\nvar SILENT = 'silent';\nfunction makeEventPacket(eveType, targetInfo, event) {\n    return {\n        type: eveType,\n        event: event,\n        target: targetInfo.target,\n        topTarget: targetInfo.topTarget,\n        cancelBubble: false,\n        offsetX: event.zrX,\n        offsetY: event.zrY,\n        gestureEvent: event.gestureEvent,\n        pinchX: event.pinchX,\n        pinchY: event.pinchY,\n        pinchScale: event.pinchScale,\n        wheelDelta: event.zrDelta,\n        zrByTouch: event.zrByTouch,\n        which: event.which,\n        stop: stopEvent\n    };\n}\nfunction stopEvent() {\n    eventTool.stop(this.event);\n}\nvar EmptyProxy = (function (_super) {\n    __extends(EmptyProxy, _super);\n    function EmptyProxy() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.handler = null;\n        return _this;\n    }\n    EmptyProxy.prototype.dispose = function () { };\n    EmptyProxy.prototype.setCursor = function () { };\n    return EmptyProxy;\n}(Eventful));\nvar HoveredResult = (function () {\n    function HoveredResult(x, y) {\n        this.x = x;\n        this.y = y;\n    }\n    return HoveredResult;\n}());\nvar handlerNames = [\n    'click', 'dblclick', 'mousewheel', 'mouseout',\n    'mouseup', 'mousedown', 'mousemove', 'contextmenu'\n];\nvar Handler = (function (_super) {\n    __extends(Handler, _super);\n    function Handler(storage, painter, proxy, painterRoot) {\n        var _this = _super.call(this) || this;\n        _this._hovered = new HoveredResult(0, 0);\n        _this.storage = storage;\n        _this.painter = painter;\n        _this.painterRoot = painterRoot;\n        proxy = proxy || new EmptyProxy();\n        _this.proxy = null;\n        _this.setHandlerProxy(proxy);\n        _this._draggingMgr = new Draggable(_this);\n        return _this;\n    }\n    Handler.prototype.setHandlerProxy = function (proxy) {\n        if (this.proxy) {\n            this.proxy.dispose();\n        }\n        if (proxy) {\n            util.each(handlerNames, function (name) {\n                proxy.on && proxy.on(name, this[name], this);\n            }, this);\n            proxy.handler = this;\n        }\n        this.proxy = proxy;\n    };\n    Handler.prototype.mousemove = function (event) {\n        var x = event.zrX;\n        var y = event.zrY;\n        var isOutside = isOutsideBoundary(this, x, y);\n        var lastHovered = this._hovered;\n        var lastHoveredTarget = lastHovered.target;\n        if (lastHoveredTarget && !lastHoveredTarget.__zr) {\n            lastHovered = this.findHover(lastHovered.x, lastHovered.y);\n            lastHoveredTarget = lastHovered.target;\n        }\n        var hovered = this._hovered = isOutside ? new HoveredResult(x, y) : this.findHover(x, y);\n        var hoveredTarget = hovered.target;\n        var proxy = this.proxy;\n        proxy.setCursor && proxy.setCursor(hoveredTarget ? hoveredTarget.cursor : 'default');\n        if (lastHoveredTarget && hoveredTarget !== lastHoveredTarget) {\n            this.dispatchToElement(lastHovered, 'mouseout', event);\n        }\n        this.dispatchToElement(hovered, 'mousemove', event);\n        if (hoveredTarget && hoveredTarget !== lastHoveredTarget) {\n            this.dispatchToElement(hovered, 'mouseover', event);\n        }\n    };\n    Handler.prototype.mouseout = function (event) {\n        var eventControl = event.zrEventControl;\n        if (eventControl !== 'only_globalout') {\n            this.dispatchToElement(this._hovered, 'mouseout', event);\n        }\n        if (eventControl !== 'no_globalout') {\n            this.trigger('globalout', { type: 'globalout', event: event });\n        }\n    };\n    Handler.prototype.resize = function () {\n        this._hovered = new HoveredResult(0, 0);\n    };\n    Handler.prototype.dispatch = function (eventName, eventArgs) {\n        var handler = this[eventName];\n        handler && handler.call(this, eventArgs);\n    };\n    Handler.prototype.dispose = function () {\n        this.proxy.dispose();\n        this.storage = null;\n        this.proxy = null;\n        this.painter = null;\n    };\n    Handler.prototype.setCursorStyle = function (cursorStyle) {\n        var proxy = this.proxy;\n        proxy.setCursor && proxy.setCursor(cursorStyle);\n    };\n    Handler.prototype.dispatchToElement = function (targetInfo, eventName, event) {\n        targetInfo = targetInfo || {};\n        var el = targetInfo.target;\n        if (el && el.silent) {\n            return;\n        }\n        var eventKey = ('on' + eventName);\n        var eventPacket = makeEventPacket(eventName, targetInfo, event);\n        while (el) {\n            el[eventKey]\n                && (eventPacket.cancelBubble = !!el[eventKey].call(el, eventPacket));\n            el.trigger(eventName, eventPacket);\n            el = el.__hostTarget ? el.__hostTarget : el.parent;\n            if (eventPacket.cancelBubble) {\n                break;\n            }\n        }\n        if (!eventPacket.cancelBubble) {\n            this.trigger(eventName, eventPacket);\n            if (this.painter && this.painter.eachOtherLayer) {\n                this.painter.eachOtherLayer(function (layer) {\n                    if (typeof (layer[eventKey]) === 'function') {\n                        layer[eventKey].call(layer, eventPacket);\n                    }\n                    if (layer.trigger) {\n                        layer.trigger(eventName, eventPacket);\n                    }\n                });\n            }\n        }\n    };\n    Handler.prototype.findHover = function (x, y, exclude) {\n        var list = this.storage.getDisplayList();\n        var out = new HoveredResult(x, y);\n        for (var i = list.length - 1; i >= 0; i--) {\n            var hoverCheckResult = void 0;\n            if (list[i] !== exclude\n                && !list[i].ignore\n                && (hoverCheckResult = isHover(list[i], x, y))) {\n                !out.topTarget && (out.topTarget = list[i]);\n                if (hoverCheckResult !== SILENT) {\n                    out.target = list[i];\n                    break;\n                }\n            }\n        }\n        return out;\n    };\n    Handler.prototype.processGesture = function (event, stage) {\n        if (!this._gestureMgr) {\n            this._gestureMgr = new GestureMgr();\n        }\n        var gestureMgr = this._gestureMgr;\n        stage === 'start' && gestureMgr.clear();\n        var gestureInfo = gestureMgr.recognize(event, this.findHover(event.zrX, event.zrY, null).target, this.proxy.dom);\n        stage === 'end' && gestureMgr.clear();\n        if (gestureInfo) {\n            var type = gestureInfo.type;\n            event.gestureEvent = type;\n            var res = new HoveredResult();\n            res.target = gestureInfo.target;\n            this.dispatchToElement(res, type, gestureInfo.event);\n        }\n    };\n    return Handler;\n}(Eventful));\nutil.each(['click', 'mousedown', 'mouseup', 'mousewheel', 'dblclick', 'contextmenu'], function (name) {\n    Handler.prototype[name] = function (event) {\n        var x = event.zrX;\n        var y = event.zrY;\n        var isOutside = isOutsideBoundary(this, x, y);\n        var hovered;\n        var hoveredTarget;\n        if (name !== 'mouseup' || !isOutside) {\n            hovered = this.findHover(x, y);\n            hoveredTarget = hovered.target;\n        }\n        if (name === 'mousedown') {\n            this._downEl = hoveredTarget;\n            this._downPoint = [event.zrX, event.zrY];\n            this._upEl = hoveredTarget;\n        }\n        else if (name === 'mouseup') {\n            this._upEl = hoveredTarget;\n        }\n        else if (name === 'click') {\n            if (this._downEl !== this._upEl\n                || !this._downPoint\n                || vec2.dist(this._downPoint, [event.zrX, event.zrY]) > 4) {\n                return;\n            }\n            this._downPoint = null;\n        }\n        this.dispatchToElement(hovered, name, event);\n    };\n});\nfunction isHover(displayable, x, y) {\n    if (displayable[displayable.rectHover ? 'rectContain' : 'contain'](x, y)) {\n        var el = displayable;\n        var isSilent = void 0;\n        var ignoreClip = false;\n        while (el) {\n            if (el.ignoreClip) {\n                ignoreClip = true;\n            }\n            if (!ignoreClip) {\n                var clipPath = el.getClipPath();\n                if (clipPath && !clipPath.contain(x, y)) {\n                    return false;\n                }\n                if (el.silent) {\n                    isSilent = true;\n                }\n            }\n            var hostEl = el.__hostTarget;\n            el = hostEl ? hostEl : el.parent;\n        }\n        return isSilent ? SILENT : true;\n    }\n    return false;\n}\nfunction isOutsideBoundary(handlerInstance, x, y) {\n    var painter = handlerInstance.painter;\n    return x < 0 || x > painter.getWidth() || y < 0 || y > painter.getHeight();\n}\nexport default Handler;\n","import * as util from './core/util';\nimport env from './core/env';\nimport Element from './Element';\nimport timsort from './core/timsort';\nvar invalidZErrorLogged = false;\nfunction logInvalidZError() {\n    if (invalidZErrorLogged) {\n        return;\n    }\n    invalidZErrorLogged = true;\n    console.warn('z / z2 / zlevel of displayable is invalid, which may cause unexpected errors');\n}\nfunction shapeCompareFunc(a, b) {\n    if (a.zlevel === b.zlevel) {\n        if (a.z === b.z) {\n            return a.z2 - b.z2;\n        }\n        return a.z - b.z;\n    }\n    return a.zlevel - b.zlevel;\n}\nvar Storage = (function () {\n    function Storage() {\n        this._roots = [];\n        this._displayList = [];\n        this._displayListLen = 0;\n        this.displayableSortFunc = shapeCompareFunc;\n    }\n    Storage.prototype.traverse = function (cb, context) {\n        for (var i = 0; i < this._roots.length; i++) {\n            this._roots[i].traverse(cb, context);\n        }\n    };\n    Storage.prototype.getDisplayList = function (update, includeIgnore) {\n        includeIgnore = includeIgnore || false;\n        var displayList = this._displayList;\n        if (update || !displayList.length) {\n            this.updateDisplayList(includeIgnore);\n        }\n        return displayList;\n    };\n    Storage.prototype.updateDisplayList = function (includeIgnore) {\n        this._displayListLen = 0;\n        var roots = this._roots;\n        var displayList = this._displayList;\n        for (var i = 0, len = roots.length; i < len; i++) {\n            this._updateAndAddDisplayable(roots[i], null, includeIgnore);\n        }\n        displayList.length = this._displayListLen;\n        env.canvasSupported && timsort(displayList, shapeCompareFunc);\n    };\n    Storage.prototype._updateAndAddDisplayable = function (el, clipPaths, includeIgnore) {\n        if (el.ignore && !includeIgnore) {\n            return;\n        }\n        el.beforeUpdate();\n        el.update();\n        el.afterUpdate();\n        var userSetClipPath = el.getClipPath();\n        if (el.ignoreClip) {\n            clipPaths = null;\n        }\n        else if (userSetClipPath) {\n            if (clipPaths) {\n                clipPaths = clipPaths.slice();\n            }\n            else {\n                clipPaths = [];\n            }\n            var currentClipPath = userSetClipPath;\n            var parentClipPath = el;\n            while (currentClipPath) {\n                currentClipPath.parent = parentClipPath;\n                currentClipPath.updateTransform();\n                clipPaths.push(currentClipPath);\n                parentClipPath = currentClipPath;\n                currentClipPath = currentClipPath.getClipPath();\n            }\n        }\n        if (el.childrenRef) {\n            var children = el.childrenRef();\n            for (var i = 0; i < children.length; i++) {\n                var child = children[i];\n                if (el.__dirty) {\n                    child.__dirty |= Element.REDARAW_BIT;\n                }\n                this._updateAndAddDisplayable(child, clipPaths, includeIgnore);\n            }\n            el.__dirty = 0;\n        }\n        else {\n            var disp = el;\n            if (clipPaths && clipPaths.length) {\n                disp.__clipPaths = clipPaths;\n            }\n            else if (disp.__clipPaths && disp.__clipPaths.length > 0) {\n                disp.__clipPaths = [];\n            }\n            if (isNaN(disp.z)) {\n                logInvalidZError();\n                disp.z = 0;\n            }\n            if (isNaN(disp.z2)) {\n                logInvalidZError();\n                disp.z2 = 0;\n            }\n            if (isNaN(disp.zlevel)) {\n                logInvalidZError();\n                disp.zlevel = 0;\n            }\n            this._displayList[this._displayListLen++] = disp;\n        }\n        var decalEl = el.getDecalElement && el.getDecalElement();\n        if (decalEl) {\n            this._updateAndAddDisplayable(decalEl, clipPaths, includeIgnore);\n        }\n        var textGuide = el.getTextGuideLine();\n        if (textGuide) {\n            this._updateAndAddDisplayable(textGuide, clipPaths, includeIgnore);\n        }\n        var textEl = el.getTextContent();\n        if (textEl) {\n            this._updateAndAddDisplayable(textEl, clipPaths, includeIgnore);\n        }\n    };\n    Storage.prototype.addRoot = function (el) {\n        if (el.__zr && el.__zr.storage === this) {\n            return;\n        }\n        this._roots.push(el);\n    };\n    Storage.prototype.delRoot = function (el) {\n        if (el instanceof Array) {\n            for (var i = 0, l = el.length; i < l; i++) {\n                this.delRoot(el[i]);\n            }\n            return;\n        }\n        var idx = util.indexOf(this._roots, el);\n        if (idx >= 0) {\n            this._roots.splice(idx, 1);\n        }\n    };\n    Storage.prototype.delAllRoots = function () {\n        this._roots = [];\n        this._displayList = [];\n        this._displayListLen = 0;\n        return;\n    };\n    Storage.prototype.getRoots = function () {\n        return this._roots;\n    };\n    Storage.prototype.dispose = function () {\n        this._displayList = null;\n        this._roots = null;\n    };\n    return Storage;\n}());\nexport default Storage;\n","import { __extends } from \"tslib\";\nimport Eventful from '../core/Eventful';\nimport requestAnimationFrame from './requestAnimationFrame';\nimport Animator from './Animator';\nvar Animation = (function (_super) {\n    __extends(Animation, _super);\n    function Animation(opts) {\n        var _this = _super.call(this) || this;\n        _this._running = false;\n        _this._time = 0;\n        _this._pausedTime = 0;\n        _this._pauseStart = 0;\n        _this._paused = false;\n        opts = opts || {};\n        _this.stage = opts.stage || {};\n        _this.onframe = opts.onframe || function () { };\n        return _this;\n    }\n    Animation.prototype.addClip = function (clip) {\n        if (clip.animation) {\n            this.removeClip(clip);\n        }\n        if (!this._clipsHead) {\n            this._clipsHead = this._clipsTail = clip;\n        }\n        else {\n            this._clipsTail.next = clip;\n            clip.prev = this._clipsTail;\n            clip.next = null;\n            this._clipsTail = clip;\n        }\n        clip.animation = this;\n    };\n    Animation.prototype.addAnimator = function (animator) {\n        animator.animation = this;\n        var clip = animator.getClip();\n        if (clip) {\n            this.addClip(clip);\n        }\n    };\n    Animation.prototype.removeClip = function (clip) {\n        if (!clip.animation) {\n            return;\n        }\n        var prev = clip.prev;\n        var next = clip.next;\n        if (prev) {\n            prev.next = next;\n        }\n        else {\n            this._clipsHead = next;\n        }\n        if (next) {\n            next.prev = prev;\n        }\n        else {\n            this._clipsTail = prev;\n        }\n        clip.next = clip.prev = clip.animation = null;\n    };\n    Animation.prototype.removeAnimator = function (animator) {\n        var clip = animator.getClip();\n        if (clip) {\n            this.removeClip(clip);\n        }\n        animator.animation = null;\n    };\n    Animation.prototype.update = function (notTriggerFrameAndStageUpdate) {\n        var time = new Date().getTime() - this._pausedTime;\n        var delta = time - this._time;\n        var clip = this._clipsHead;\n        while (clip) {\n            var nextClip = clip.next;\n            var finished = clip.step(time, delta);\n            if (finished) {\n                clip.ondestroy && clip.ondestroy();\n                this.removeClip(clip);\n                clip = nextClip;\n            }\n            else {\n                clip = nextClip;\n            }\n        }\n        this._time = time;\n        if (!notTriggerFrameAndStageUpdate) {\n            this.onframe(delta);\n            this.trigger('frame', delta);\n            this.stage.update && this.stage.update();\n        }\n    };\n    Animation.prototype._startLoop = function () {\n        var self = this;\n        this._running = true;\n        function step() {\n            if (self._running) {\n                requestAnimationFrame(step);\n                !self._paused && self.update();\n            }\n        }\n        requestAnimationFrame(step);\n    };\n    Animation.prototype.start = function () {\n        if (this._running) {\n            return;\n        }\n        this._time = new Date().getTime();\n        this._pausedTime = 0;\n        this._startLoop();\n    };\n    Animation.prototype.stop = function () {\n        this._running = false;\n    };\n    Animation.prototype.pause = function () {\n        if (!this._paused) {\n            this._pauseStart = new Date().getTime();\n            this._paused = true;\n        }\n    };\n    Animation.prototype.resume = function () {\n        if (this._paused) {\n            this._pausedTime += (new Date().getTime()) - this._pauseStart;\n            this._paused = false;\n        }\n    };\n    Animation.prototype.clear = function () {\n        var clip = this._clipsHead;\n        while (clip) {\n            var nextClip = clip.next;\n            clip.prev = clip.next = clip.animation = null;\n            clip = nextClip;\n        }\n        this._clipsHead = this._clipsTail = null;\n    };\n    Animation.prototype.isFinished = function () {\n        return this._clipsHead == null;\n    };\n    Animation.prototype.animate = function (target, options) {\n        options = options || {};\n        this.start();\n        var animator = new Animator(target, options.loop);\n        this.addAnimator(animator);\n        return animator;\n    };\n    return Animation;\n}(Eventful));\nexport default Animation;\n","import { __extends } from \"tslib\";\nimport { addEventListener, removeEventListener, normalizeEvent, getNativeEvent } from '../core/event';\nimport * as zrUtil from '../core/util';\nimport Eventful from '../core/Eventful';\nimport env from '../core/env';\nvar TOUCH_CLICK_DELAY = 300;\nvar globalEventSupported = env.domSupported;\nvar localNativeListenerNames = (function () {\n    var mouseHandlerNames = [\n        'click', 'dblclick', 'mousewheel', 'wheel', 'mouseout',\n        'mouseup', 'mousedown', 'mousemove', 'contextmenu'\n    ];\n    var touchHandlerNames = [\n        'touchstart', 'touchend', 'touchmove'\n    ];\n    var pointerEventNameMap = {\n        pointerdown: 1, pointerup: 1, pointermove: 1, pointerout: 1\n    };\n    var pointerHandlerNames = zrUtil.map(mouseHandlerNames, function (name) {\n        var nm = name.replace('mouse', 'pointer');\n        return pointerEventNameMap.hasOwnProperty(nm) ? nm : name;\n    });\n    return {\n        mouse: mouseHandlerNames,\n        touch: touchHandlerNames,\n        pointer: pointerHandlerNames\n    };\n})();\nvar globalNativeListenerNames = {\n    mouse: ['mousemove', 'mouseup'],\n    pointer: ['pointermove', 'pointerup']\n};\nvar wheelEventSupported = false;\nfunction isPointerFromTouch(event) {\n    var pointerType = event.pointerType;\n    return pointerType === 'pen' || pointerType === 'touch';\n}\nfunction setTouchTimer(scope) {\n    scope.touching = true;\n    if (scope.touchTimer != null) {\n        clearTimeout(scope.touchTimer);\n        scope.touchTimer = null;\n    }\n    scope.touchTimer = setTimeout(function () {\n        scope.touching = false;\n        scope.touchTimer = null;\n    }, 700);\n}\nfunction markTouch(event) {\n    event && (event.zrByTouch = true);\n}\nfunction normalizeGlobalEvent(instance, event) {\n    return normalizeEvent(instance.dom, new FakeGlobalEvent(instance, event), true);\n}\nfunction isLocalEl(instance, el) {\n    var elTmp = el;\n    var isLocal = false;\n    while (elTmp && elTmp.nodeType !== 9\n        && !(isLocal = elTmp.domBelongToZr\n            || (elTmp !== el && elTmp === instance.painterRoot))) {\n        elTmp = elTmp.parentNode;\n    }\n    return isLocal;\n}\nvar FakeGlobalEvent = (function () {\n    function FakeGlobalEvent(instance, event) {\n        this.stopPropagation = zrUtil.noop;\n        this.stopImmediatePropagation = zrUtil.noop;\n        this.preventDefault = zrUtil.noop;\n        this.type = event.type;\n        this.target = this.currentTarget = instance.dom;\n        this.pointerType = event.pointerType;\n        this.clientX = event.clientX;\n        this.clientY = event.clientY;\n    }\n    return FakeGlobalEvent;\n}());\nvar localDOMHandlers = {\n    mousedown: function (event) {\n        event = normalizeEvent(this.dom, event);\n        this.__mayPointerCapture = [event.zrX, event.zrY];\n        this.trigger('mousedown', event);\n    },\n    mousemove: function (event) {\n        event = normalizeEvent(this.dom, event);\n        var downPoint = this.__mayPointerCapture;\n        if (downPoint && (event.zrX !== downPoint[0] || event.zrY !== downPoint[1])) {\n            this.__togglePointerCapture(true);\n        }\n        this.trigger('mousemove', event);\n    },\n    mouseup: function (event) {\n        event = normalizeEvent(this.dom, event);\n        this.__togglePointerCapture(false);\n        this.trigger('mouseup', event);\n    },\n    mouseout: function (event) {\n        event = normalizeEvent(this.dom, event);\n        var element = event.toElement || event.relatedTarget;\n        if (!isLocalEl(this, element)) {\n            if (this.__pointerCapturing) {\n                event.zrEventControl = 'no_globalout';\n            }\n            this.trigger('mouseout', event);\n        }\n    },\n    wheel: function (event) {\n        wheelEventSupported = true;\n        event = normalizeEvent(this.dom, event);\n        this.trigger('mousewheel', event);\n    },\n    mousewheel: function (event) {\n        if (wheelEventSupported) {\n            return;\n        }\n        event = normalizeEvent(this.dom, event);\n        this.trigger('mousewheel', event);\n    },\n    touchstart: function (event) {\n        event = normalizeEvent(this.dom, event);\n        markTouch(event);\n        this.__lastTouchMoment = new Date();\n        this.handler.processGesture(event, 'start');\n        localDOMHandlers.mousemove.call(this, event);\n        localDOMHandlers.mousedown.call(this, event);\n    },\n    touchmove: function (event) {\n        event = normalizeEvent(this.dom, event);\n        markTouch(event);\n        this.handler.processGesture(event, 'change');\n        localDOMHandlers.mousemove.call(this, event);\n    },\n    touchend: function (event) {\n        event = normalizeEvent(this.dom, event);\n        markTouch(event);\n        this.handler.processGesture(event, 'end');\n        localDOMHandlers.mouseup.call(this, event);\n        if (+new Date() - (+this.__lastTouchMoment) < TOUCH_CLICK_DELAY) {\n            localDOMHandlers.click.call(this, event);\n        }\n    },\n    pointerdown: function (event) {\n        localDOMHandlers.mousedown.call(this, event);\n    },\n    pointermove: function (event) {\n        if (!isPointerFromTouch(event)) {\n            localDOMHandlers.mousemove.call(this, event);\n        }\n    },\n    pointerup: function (event) {\n        localDOMHandlers.mouseup.call(this, event);\n    },\n    pointerout: function (event) {\n        if (!isPointerFromTouch(event)) {\n            localDOMHandlers.mouseout.call(this, event);\n        }\n    }\n};\nzrUtil.each(['click', 'dblclick', 'contextmenu'], function (name) {\n    localDOMHandlers[name] = function (event) {\n        event = normalizeEvent(this.dom, event);\n        this.trigger(name, event);\n    };\n});\nvar globalDOMHandlers = {\n    pointermove: function (event) {\n        if (!isPointerFromTouch(event)) {\n            globalDOMHandlers.mousemove.call(this, event);\n        }\n    },\n    pointerup: function (event) {\n        globalDOMHandlers.mouseup.call(this, event);\n    },\n    mousemove: function (event) {\n        this.trigger('mousemove', event);\n    },\n    mouseup: function (event) {\n        var pointerCaptureReleasing = this.__pointerCapturing;\n        this.__togglePointerCapture(false);\n        this.trigger('mouseup', event);\n        if (pointerCaptureReleasing) {\n            event.zrEventControl = 'only_globalout';\n            this.trigger('mouseout', event);\n        }\n    }\n};\nfunction mountLocalDOMEventListeners(instance, scope) {\n    var domHandlers = scope.domHandlers;\n    if (env.pointerEventsSupported) {\n        zrUtil.each(localNativeListenerNames.pointer, function (nativeEventName) {\n            mountSingleDOMEventListener(scope, nativeEventName, function (event) {\n                domHandlers[nativeEventName].call(instance, event);\n            });\n        });\n    }\n    else {\n        if (env.touchEventsSupported) {\n            zrUtil.each(localNativeListenerNames.touch, function (nativeEventName) {\n                mountSingleDOMEventListener(scope, nativeEventName, function (event) {\n                    domHandlers[nativeEventName].call(instance, event);\n                    setTouchTimer(scope);\n                });\n            });\n        }\n        zrUtil.each(localNativeListenerNames.mouse, function (nativeEventName) {\n            mountSingleDOMEventListener(scope, nativeEventName, function (event) {\n                event = getNativeEvent(event);\n                if (!scope.touching) {\n                    domHandlers[nativeEventName].call(instance, event);\n                }\n            });\n        });\n    }\n}\nfunction mountGlobalDOMEventListeners(instance, scope) {\n    if (env.pointerEventsSupported) {\n        zrUtil.each(globalNativeListenerNames.pointer, mount);\n    }\n    else if (!env.touchEventsSupported) {\n        zrUtil.each(globalNativeListenerNames.mouse, mount);\n    }\n    function mount(nativeEventName) {\n        function nativeEventListener(event) {\n            event = getNativeEvent(event);\n            if (!isLocalEl(instance, event.target)) {\n                event = normalizeGlobalEvent(instance, event);\n                scope.domHandlers[nativeEventName].call(instance, event);\n            }\n        }\n        mountSingleDOMEventListener(scope, nativeEventName, nativeEventListener, { capture: true });\n    }\n}\nfunction mountSingleDOMEventListener(scope, nativeEventName, listener, opt) {\n    scope.mounted[nativeEventName] = listener;\n    scope.listenerOpts[nativeEventName] = opt;\n    addEventListener(scope.domTarget, nativeEventName, listener, opt);\n}\nfunction unmountDOMEventListeners(scope) {\n    var mounted = scope.mounted;\n    for (var nativeEventName in mounted) {\n        if (mounted.hasOwnProperty(nativeEventName)) {\n            removeEventListener(scope.domTarget, nativeEventName, mounted[nativeEventName], scope.listenerOpts[nativeEventName]);\n        }\n    }\n    scope.mounted = {};\n}\nvar DOMHandlerScope = (function () {\n    function DOMHandlerScope(domTarget, domHandlers) {\n        this.mounted = {};\n        this.listenerOpts = {};\n        this.touching = false;\n        this.domTarget = domTarget;\n        this.domHandlers = domHandlers;\n    }\n    return DOMHandlerScope;\n}());\nvar HandlerDomProxy = (function (_super) {\n    __extends(HandlerDomProxy, _super);\n    function HandlerDomProxy(dom, painterRoot) {\n        var _this = _super.call(this) || this;\n        _this.__pointerCapturing = false;\n        _this.dom = dom;\n        _this.painterRoot = painterRoot;\n        _this._localHandlerScope = new DOMHandlerScope(dom, localDOMHandlers);\n        if (globalEventSupported) {\n            _this._globalHandlerScope = new DOMHandlerScope(document, globalDOMHandlers);\n        }\n        mountLocalDOMEventListeners(_this, _this._localHandlerScope);\n        return _this;\n    }\n    HandlerDomProxy.prototype.dispose = function () {\n        unmountDOMEventListeners(this._localHandlerScope);\n        if (globalEventSupported) {\n            unmountDOMEventListeners(this._globalHandlerScope);\n        }\n    };\n    HandlerDomProxy.prototype.setCursor = function (cursorStyle) {\n        this.dom.style && (this.dom.style.cursor = cursorStyle || 'default');\n    };\n    HandlerDomProxy.prototype.__togglePointerCapture = function (isPointerCapturing) {\n        this.__mayPointerCapture = null;\n        if (globalEventSupported\n            && ((+this.__pointerCapturing) ^ (+isPointerCapturing))) {\n            this.__pointerCapturing = isPointerCapturing;\n            var globalHandlerScope = this._globalHandlerScope;\n            isPointerCapturing\n                ? mountGlobalDOMEventListeners(this, globalHandlerScope)\n                : unmountDOMEventListeners(globalHandlerScope);\n        }\n    };\n    return HandlerDomProxy;\n}(Eventful));\nexport default HandlerDomProxy;\n","/*!\n* ZRender, a high performance 2d drawing library.\n*\n* Copyright (c) 2013, Baidu Inc.\n* All rights reserved.\n*\n* LICENSE\n* https://github.com/ecomfe/zrender/blob/master/LICENSE.txt\n*/\nimport env from './core/env';\nimport * as zrUtil from './core/util';\nimport Handler from './Handler';\nimport Storage from './Storage';\nimport Animation from './animation/Animation';\nimport HandlerProxy from './dom/HandlerProxy';\nimport { lum } from './tool/color';\nimport { DARK_MODE_THRESHOLD } from './config';\nimport Group from './graphic/Group';\nvar useVML = !env.canvasSupported;\nvar painterCtors = {};\nvar instances = {};\nfunction delInstance(id) {\n    delete instances[id];\n}\nfunction isDarkMode(backgroundColor) {\n    if (!backgroundColor) {\n        return false;\n    }\n    if (typeof backgroundColor === 'string') {\n        return lum(backgroundColor, 1) < DARK_MODE_THRESHOLD;\n    }\n    else if (backgroundColor.colorStops) {\n        var colorStops = backgroundColor.colorStops;\n        var totalLum = 0;\n        var len = colorStops.length;\n        for (var i = 0; i < len; i++) {\n            totalLum += lum(colorStops[i].color, 1);\n        }\n        totalLum /= len;\n        return totalLum < DARK_MODE_THRESHOLD;\n    }\n    return false;\n}\nvar ZRender = (function () {\n    function ZRender(id, dom, opts) {\n        var _this = this;\n        this._sleepAfterStill = 10;\n        this._stillFrameAccum = 0;\n        this._needsRefresh = true;\n        this._needsRefreshHover = true;\n        this._darkMode = false;\n        opts = opts || {};\n        this.dom = dom;\n        this.id = id;\n        var storage = new Storage();\n        var rendererType = opts.renderer || 'canvas';\n        if (useVML) {\n            throw new Error('IE8 support has been dropped since 5.0');\n        }\n        if (!painterCtors[rendererType]) {\n            rendererType = zrUtil.keys(painterCtors)[0];\n        }\n        if (!painterCtors[rendererType]) {\n            throw new Error(\"Renderer '\" + rendererType + \"' is not imported. Please import it first.\");\n        }\n        opts.useDirtyRect = opts.useDirtyRect == null\n            ? false\n            : opts.useDirtyRect;\n        var painter = new painterCtors[rendererType](dom, storage, opts, id);\n        this.storage = storage;\n        this.painter = painter;\n        var handerProxy = (!env.node && !env.worker)\n            ? new HandlerProxy(painter.getViewportRoot(), painter.root)\n            : null;\n        this.handler = new Handler(storage, painter, handerProxy, painter.root);\n        this.animation = new Animation({\n            stage: {\n                update: function () { return _this._flush(true); }\n            }\n        });\n        this.animation.start();\n    }\n    ZRender.prototype.add = function (el) {\n        if (!el) {\n            return;\n        }\n        this.storage.addRoot(el);\n        el.addSelfToZr(this);\n        this.refresh();\n    };\n    ZRender.prototype.remove = function (el) {\n        if (!el) {\n            return;\n        }\n        this.storage.delRoot(el);\n        el.removeSelfFromZr(this);\n        this.refresh();\n    };\n    ZRender.prototype.configLayer = function (zLevel, config) {\n        if (this.painter.configLayer) {\n            this.painter.configLayer(zLevel, config);\n        }\n        this.refresh();\n    };\n    ZRender.prototype.setBackgroundColor = function (backgroundColor) {\n        if (this.painter.setBackgroundColor) {\n            this.painter.setBackgroundColor(backgroundColor);\n        }\n        this.refresh();\n        this._backgroundColor = backgroundColor;\n        this._darkMode = isDarkMode(backgroundColor);\n    };\n    ZRender.prototype.getBackgroundColor = function () {\n        return this._backgroundColor;\n    };\n    ZRender.prototype.setDarkMode = function (darkMode) {\n        this._darkMode = darkMode;\n    };\n    ZRender.prototype.isDarkMode = function () {\n        return this._darkMode;\n    };\n    ZRender.prototype.refreshImmediately = function (fromInside) {\n        if (!fromInside) {\n            this.animation.update(true);\n        }\n        this._needsRefresh = false;\n        this.painter.refresh();\n        this._needsRefresh = false;\n    };\n    ZRender.prototype.refresh = function () {\n        this._needsRefresh = true;\n        this.animation.start();\n    };\n    ZRender.prototype.flush = function () {\n        this._flush(false);\n    };\n    ZRender.prototype._flush = function (fromInside) {\n        var triggerRendered;\n        var start = new Date().getTime();\n        if (this._needsRefresh) {\n            triggerRendered = true;\n            this.refreshImmediately(fromInside);\n        }\n        if (this._needsRefreshHover) {\n            triggerRendered = true;\n            this.refreshHoverImmediately();\n        }\n        var end = new Date().getTime();\n        if (triggerRendered) {\n            this._stillFrameAccum = 0;\n            this.trigger('rendered', {\n                elapsedTime: end - start\n            });\n        }\n        else if (this._sleepAfterStill > 0) {\n            this._stillFrameAccum++;\n            if (this._stillFrameAccum > this._sleepAfterStill) {\n                this.animation.stop();\n            }\n        }\n    };\n    ZRender.prototype.setSleepAfterStill = function (stillFramesCount) {\n        this._sleepAfterStill = stillFramesCount;\n    };\n    ZRender.prototype.wakeUp = function () {\n        this.animation.start();\n        this._stillFrameAccum = 0;\n    };\n    ZRender.prototype.addHover = function (el) {\n    };\n    ZRender.prototype.removeHover = function (el) {\n    };\n    ZRender.prototype.clearHover = function () {\n    };\n    ZRender.prototype.refreshHover = function () {\n        this._needsRefreshHover = true;\n    };\n    ZRender.prototype.refreshHoverImmediately = function () {\n        this._needsRefreshHover = false;\n        if (this.painter.refreshHover && this.painter.getType() === 'canvas') {\n            this.painter.refreshHover();\n        }\n    };\n    ZRender.prototype.resize = function (opts) {\n        opts = opts || {};\n        this.painter.resize(opts.width, opts.height);\n        this.handler.resize();\n    };\n    ZRender.prototype.clearAnimation = function () {\n        this.animation.clear();\n    };\n    ZRender.prototype.getWidth = function () {\n        return this.painter.getWidth();\n    };\n    ZRender.prototype.getHeight = function () {\n        return this.painter.getHeight();\n    };\n    ZRender.prototype.pathToImage = function (e, dpr) {\n        if (this.painter.pathToImage) {\n            return this.painter.pathToImage(e, dpr);\n        }\n    };\n    ZRender.prototype.setCursorStyle = function (cursorStyle) {\n        this.handler.setCursorStyle(cursorStyle);\n    };\n    ZRender.prototype.findHover = function (x, y) {\n        return this.handler.findHover(x, y);\n    };\n    ZRender.prototype.on = function (eventName, eventHandler, context) {\n        this.handler.on(eventName, eventHandler, context);\n        return this;\n    };\n    ZRender.prototype.off = function (eventName, eventHandler) {\n        this.handler.off(eventName, eventHandler);\n    };\n    ZRender.prototype.trigger = function (eventName, event) {\n        this.handler.trigger(eventName, event);\n    };\n    ZRender.prototype.clear = function () {\n        var roots = this.storage.getRoots();\n        for (var i = 0; i < roots.length; i++) {\n            if (roots[i] instanceof Group) {\n                roots[i].removeSelfFromZr(this);\n            }\n        }\n        this.storage.delAllRoots();\n        this.painter.clear();\n    };\n    ZRender.prototype.dispose = function () {\n        this.animation.stop();\n        this.clear();\n        this.storage.dispose();\n        this.painter.dispose();\n        this.handler.dispose();\n        this.animation =\n            this.storage =\n                this.painter =\n                    this.handler = null;\n        delInstance(this.id);\n    };\n    return ZRender;\n}());\nexport function init(dom, opts) {\n    var zr = new ZRender(zrUtil.guid(), dom, opts);\n    instances[zr.id] = zr;\n    return zr;\n}\nexport function dispose(zr) {\n    zr.dispose();\n}\nexport function disposeAll() {\n    for (var key in instances) {\n        if (instances.hasOwnProperty(key)) {\n            instances[key].dispose();\n        }\n    }\n    instances = {};\n}\nexport function getInstance(id) {\n    return instances[id];\n}\nexport function registerPainter(name, Ctor) {\n    painterCtors[name] = Ctor;\n}\nexport var version = '5.0.4';\n;\n","import * as matrix from './matrix';\nimport Point from './Point';\nvar mathMin = Math.min;\nvar mathMax = Math.max;\nvar lt = new Point();\nvar rb = new Point();\nvar lb = new Point();\nvar rt = new Point();\nvar minTv = new Point();\nvar maxTv = new Point();\nvar BoundingRect = (function () {\n    function BoundingRect(x, y, width, height) {\n        if (width < 0 && isFinite(width)) {\n            x = x + width;\n            width = -width;\n        }\n        if (height < 0 && isFinite(height)) {\n            y = y + height;\n            height = -height;\n        }\n        this.x = x;\n        this.y = y;\n        this.width = width;\n        this.height = height;\n    }\n    BoundingRect.prototype.union = function (other) {\n        var x = mathMin(other.x, this.x);\n        var y = mathMin(other.y, this.y);\n        if (isFinite(this.x) && isFinite(this.width)) {\n            this.width = mathMax(other.x + other.width, this.x + this.width) - x;\n        }\n        else {\n            this.width = other.width;\n        }\n        if (isFinite(this.y) && isFinite(this.height)) {\n            this.height = mathMax(other.y + other.height, this.y + this.height) - y;\n        }\n        else {\n            this.height = other.height;\n        }\n        this.x = x;\n        this.y = y;\n    };\n    BoundingRect.prototype.applyTransform = function (m) {\n        BoundingRect.applyTransform(this, this, m);\n    };\n    BoundingRect.prototype.calculateTransform = function (b) {\n        var a = this;\n        var sx = b.width / a.width;\n        var sy = b.height / a.height;\n        var m = matrix.create();\n        matrix.translate(m, m, [-a.x, -a.y]);\n        matrix.scale(m, m, [sx, sy]);\n        matrix.translate(m, m, [b.x, b.y]);\n        return m;\n    };\n    BoundingRect.prototype.intersect = function (b, mtv) {\n        if (!b) {\n            return false;\n        }\n        if (!(b instanceof BoundingRect)) {\n            b = BoundingRect.create(b);\n        }\n        var a = this;\n        var ax0 = a.x;\n        var ax1 = a.x + a.width;\n        var ay0 = a.y;\n        var ay1 = a.y + a.height;\n        var bx0 = b.x;\n        var bx1 = b.x + b.width;\n        var by0 = b.y;\n        var by1 = b.y + b.height;\n        var overlap = !(ax1 < bx0 || bx1 < ax0 || ay1 < by0 || by1 < ay0);\n        if (mtv) {\n            var dMin = Infinity;\n            var dMax = 0;\n            var d0 = Math.abs(ax1 - bx0);\n            var d1 = Math.abs(bx1 - ax0);\n            var d2 = Math.abs(ay1 - by0);\n            var d3 = Math.abs(by1 - ay0);\n            var dx = Math.min(d0, d1);\n            var dy = Math.min(d2, d3);\n            if (ax1 < bx0 || bx1 < ax0) {\n                if (dx > dMax) {\n                    dMax = dx;\n                    if (d0 < d1) {\n                        Point.set(maxTv, -d0, 0);\n                    }\n                    else {\n                        Point.set(maxTv, d1, 0);\n                    }\n                }\n            }\n            else {\n                if (dx < dMin) {\n                    dMin = dx;\n                    if (d0 < d1) {\n                        Point.set(minTv, d0, 0);\n                    }\n                    else {\n                        Point.set(minTv, -d1, 0);\n                    }\n                }\n            }\n            if (ay1 < by0 || by1 < ay0) {\n                if (dy > dMax) {\n                    dMax = dy;\n                    if (d2 < d3) {\n                        Point.set(maxTv, 0, -d2);\n                    }\n                    else {\n                        Point.set(maxTv, 0, d3);\n                    }\n                }\n            }\n            else {\n                if (dx < dMin) {\n                    dMin = dx;\n                    if (d2 < d3) {\n                        Point.set(minTv, 0, d2);\n                    }\n                    else {\n                        Point.set(minTv, 0, -d3);\n                    }\n                }\n            }\n        }\n        if (mtv) {\n            Point.copy(mtv, overlap ? minTv : maxTv);\n        }\n        return overlap;\n    };\n    BoundingRect.prototype.contain = function (x, y) {\n        var rect = this;\n        return x >= rect.x\n            && x <= (rect.x + rect.width)\n            && y >= rect.y\n            && y <= (rect.y + rect.height);\n    };\n    BoundingRect.prototype.clone = function () {\n        return new BoundingRect(this.x, this.y, this.width, this.height);\n    };\n    BoundingRect.prototype.copy = function (other) {\n        BoundingRect.copy(this, other);\n    };\n    BoundingRect.prototype.plain = function () {\n        return {\n            x: this.x,\n            y: this.y,\n            width: this.width,\n            height: this.height\n        };\n    };\n    BoundingRect.prototype.isFinite = function () {\n        return isFinite(this.x)\n            && isFinite(this.y)\n            && isFinite(this.width)\n            && isFinite(this.height);\n    };\n    BoundingRect.prototype.isZero = function () {\n        return this.width === 0 || this.height === 0;\n    };\n    BoundingRect.create = function (rect) {\n        return new BoundingRect(rect.x, rect.y, rect.width, rect.height);\n    };\n    BoundingRect.copy = function (target, source) {\n        target.x = source.x;\n        target.y = source.y;\n        target.width = source.width;\n        target.height = source.height;\n    };\n    BoundingRect.applyTransform = function (target, source, m) {\n        if (!m) {\n            if (target !== source) {\n                BoundingRect.copy(target, source);\n            }\n            return;\n        }\n        if (m[1] < 1e-5 && m[1] > -1e-5 && m[2] < 1e-5 && m[2] > -1e-5) {\n            var sx = m[0];\n            var sy = m[3];\n            var tx = m[4];\n            var ty = m[5];\n            target.x = source.x * sx + tx;\n            target.y = source.y * sy + ty;\n            target.width = source.width * sx;\n            target.height = source.height * sy;\n            if (target.width < 0) {\n                target.x += target.width;\n                target.width = -target.width;\n            }\n            if (target.height < 0) {\n                target.y += target.height;\n                target.height = -target.height;\n            }\n            return;\n        }\n        lt.x = lb.x = source.x;\n        lt.y = rt.y = source.y;\n        rb.x = rt.x = source.x + source.width;\n        rb.y = lb.y = source.y + source.height;\n        lt.transform(m);\n        rt.transform(m);\n        rb.transform(m);\n        lb.transform(m);\n        target.x = mathMin(lt.x, rb.x, lb.x, rt.x);\n        target.y = mathMin(lt.y, rb.y, lb.y, rt.y);\n        var maxX = mathMax(lt.x, rb.x, lb.x, rt.x);\n        var maxY = mathMax(lt.y, rb.y, lb.y, rt.y);\n        target.width = maxX - target.x;\n        target.height = maxY - target.y;\n    };\n    return BoundingRect;\n}());\nexport default BoundingRect;\n","import PathProxy from '../core/PathProxy';\nimport { cubicSubdivide } from '../core/curve';\nimport { defaults, assert, noop, clone } from '../core/util';\nimport { lerp } from '../core/vector';\nimport Rect from '../graphic/shape/Rect';\nimport Sector from '../graphic/shape/Sector';\nvar CMD = PathProxy.CMD;\nvar PI2 = Math.PI * 2;\nvar PROP_XY = ['x', 'y'];\nvar PROP_WH = ['width', 'height'];\nvar tmpArr = [];\nfunction aroundEqual(a, b) {\n    return Math.abs(a - b) < 1e-5;\n}\nexport function pathToBezierCurves(path) {\n    var data = path.data;\n    var len = path.len();\n    var bezierArray = [];\n    var currentSubpath;\n    var xi = 0;\n    var yi = 0;\n    var x0 = 0;\n    var y0 = 0;\n    function createNewSubpath(x, y) {\n        if (currentSubpath && currentSubpath.length > 2) {\n            bezierArray.push(currentSubpath);\n        }\n        currentSubpath = [x, y];\n    }\n    function addLine(x0, y0, x1, y1) {\n        if (!(aroundEqual(x0, x1) && aroundEqual(y0, y1))) {\n            currentSubpath.push(x0, y0, x1, y1, x1, y1);\n        }\n    }\n    function addArc(startAngle, endAngle, cx, cy, rx, ry) {\n        var delta = Math.abs(endAngle - startAngle);\n        var len = Math.tan(delta / 4) * 4 / 3;\n        var dir = endAngle < startAngle ? -1 : 1;\n        var c1 = Math.cos(startAngle);\n        var s1 = Math.sin(startAngle);\n        var c2 = Math.cos(endAngle);\n        var s2 = Math.sin(endAngle);\n        var x1 = c1 * rx + cx;\n        var y1 = s1 * ry + cy;\n        var x4 = c2 * rx + cx;\n        var y4 = s2 * ry + cy;\n        var hx = rx * len * dir;\n        var hy = ry * len * dir;\n        currentSubpath.push(x1 - hx * s1, y1 + hy * c1, x4 + hx * s2, y4 - hy * c2, x4, y4);\n    }\n    var x1;\n    var y1;\n    var x2;\n    var y2;\n    for (var i = 0; i < len;) {\n        var cmd = data[i++];\n        var isFirst = i === 1;\n        if (isFirst) {\n            xi = data[i];\n            yi = data[i + 1];\n            x0 = xi;\n            y0 = yi;\n            if (cmd === CMD.L || cmd === CMD.C || cmd === CMD.Q) {\n                currentSubpath = [x0, y0];\n            }\n        }\n        switch (cmd) {\n            case CMD.M:\n                xi = x0 = data[i++];\n                yi = y0 = data[i++];\n                createNewSubpath(x0, y0);\n                break;\n            case CMD.L:\n                x1 = data[i++];\n                y1 = data[i++];\n                addLine(xi, yi, x1, y1);\n                xi = x1;\n                yi = y1;\n                break;\n            case CMD.C:\n                currentSubpath.push(data[i++], data[i++], data[i++], data[i++], xi = data[i++], yi = data[i++]);\n                break;\n            case CMD.Q:\n                x1 = data[i++];\n                y1 = data[i++];\n                x2 = data[i++];\n                y2 = data[i++];\n                currentSubpath.push(xi + 2 / 3 * (x1 - xi), yi + 2 / 3 * (y1 - yi), x2 + 2 / 3 * (x1 - x2), y2 + 2 / 3 * (y1 - y2), x2, y2);\n                xi = x2;\n                yi = y2;\n                break;\n            case CMD.A:\n                var cx = data[i++];\n                var cy = data[i++];\n                var rx = data[i++];\n                var ry = data[i++];\n                var startAngle = data[i++];\n                var endAngle = data[i++] + startAngle;\n                i += 1;\n                var anticlockwise = !data[i++];\n                x1 = Math.cos(startAngle) * rx + cx;\n                y1 = Math.sin(startAngle) * ry + cy;\n                if (isFirst) {\n                    x0 = x1;\n                    y0 = y1;\n                    createNewSubpath(x0, y0);\n                }\n                else {\n                    addLine(xi, yi, x1, y1);\n                }\n                xi = Math.cos(endAngle) * rx + cx;\n                yi = Math.sin(endAngle) * ry + cy;\n                var step = (anticlockwise ? -1 : 1) * Math.PI / 2;\n                for (var angle = startAngle; anticlockwise ? angle > endAngle : angle < endAngle; angle += step) {\n                    var nextAngle = anticlockwise ? Math.max(angle + step, endAngle)\n                        : Math.min(angle + step, endAngle);\n                    addArc(angle, nextAngle, cx, cy, rx, ry);\n                }\n                break;\n            case CMD.R:\n                x0 = xi = data[i++];\n                y0 = yi = data[i++];\n                x1 = x0 + data[i++];\n                y1 = y0 + data[i++];\n                createNewSubpath(x1, y0);\n                addLine(x1, y0, x1, y1);\n                addLine(x1, y1, x0, y1);\n                addLine(x0, y1, x0, y0);\n                addLine(x0, y0, x1, y0);\n                break;\n            case CMD.Z:\n                currentSubpath && addLine(xi, yi, x0, y0);\n                xi = x0;\n                yi = y0;\n                break;\n        }\n    }\n    if (currentSubpath && currentSubpath.length > 2) {\n        bezierArray.push(currentSubpath);\n    }\n    return bezierArray;\n}\nfunction alignSubpath(subpath1, subpath2) {\n    var len1 = subpath1.length;\n    var len2 = subpath2.length;\n    if (len1 === len2) {\n        return [subpath1, subpath2];\n    }\n    var shorterPath = len1 < len2 ? subpath1 : subpath2;\n    var shorterLen = Math.min(len1, len2);\n    var diff = Math.abs(len2 - len1) / 6;\n    var shorterBezierCount = (shorterLen - 2) / 6;\n    var eachCurveSubDivCount = Math.ceil(diff / shorterBezierCount) + 1;\n    var newSubpath = [shorterPath[0], shorterPath[1]];\n    var remained = diff;\n    var tmpSegX = [];\n    var tmpSegY = [];\n    for (var i = 2; i < shorterLen;) {\n        var x0 = shorterPath[i - 2];\n        var y0 = shorterPath[i - 1];\n        var x1 = shorterPath[i++];\n        var y1 = shorterPath[i++];\n        var x2 = shorterPath[i++];\n        var y2 = shorterPath[i++];\n        var x3 = shorterPath[i++];\n        var y3 = shorterPath[i++];\n        if (remained <= 0) {\n            newSubpath.push(x1, y1, x2, y2, x3, y3);\n            continue;\n        }\n        var actualSubDivCount = Math.min(remained, eachCurveSubDivCount - 1) + 1;\n        for (var k = 1; k <= actualSubDivCount; k++) {\n            var p = k / actualSubDivCount;\n            cubicSubdivide(x0, x1, x2, x3, p, tmpSegX);\n            cubicSubdivide(y0, y1, y2, y3, p, tmpSegY);\n            x0 = tmpSegX[3];\n            y0 = tmpSegY[3];\n            newSubpath.push(tmpSegX[1], tmpSegY[1], tmpSegX[2], tmpSegY[2], x0, y0);\n            x1 = tmpSegX[5];\n            y1 = tmpSegY[5];\n            x2 = tmpSegX[6];\n            y2 = tmpSegY[6];\n        }\n        remained -= actualSubDivCount - 1;\n    }\n    return shorterPath === subpath1 ? [newSubpath, subpath2] : [subpath1, newSubpath];\n}\nfunction createSubpath(lastSubpathSubpath, otherSubpath) {\n    var len = lastSubpathSubpath.length;\n    var lastX = lastSubpathSubpath[len - 2];\n    var lastY = lastSubpathSubpath[len - 1];\n    var newSubpath = [];\n    for (var i = 0; i < otherSubpath.length;) {\n        newSubpath[i++] = lastX;\n        newSubpath[i++] = lastY;\n    }\n    return newSubpath;\n}\nexport function alignBezierCurves(array1, array2) {\n    var _a;\n    var lastSubpath1;\n    var lastSubpath2;\n    var newArray1 = [];\n    var newArray2 = [];\n    for (var i = 0; i < Math.max(array1.length, array2.length); i++) {\n        var subpath1 = array1[i];\n        var subpath2 = array2[i];\n        var newSubpath1 = void 0;\n        var newSubpath2 = void 0;\n        if (!subpath1) {\n            newSubpath1 = createSubpath(lastSubpath1 || subpath2, subpath2);\n            newSubpath2 = subpath2;\n        }\n        else if (!subpath2) {\n            newSubpath2 = createSubpath(lastSubpath2 || subpath1, subpath1);\n            newSubpath1 = subpath1;\n        }\n        else {\n            _a = alignSubpath(subpath1, subpath2), newSubpath1 = _a[0], newSubpath2 = _a[1];\n            lastSubpath1 = newSubpath1;\n            lastSubpath2 = newSubpath2;\n        }\n        newArray1.push(newSubpath1);\n        newArray2.push(newSubpath2);\n    }\n    return [newArray1, newArray2];\n}\nexport function centroid(array) {\n    var signedArea = 0;\n    var cx = 0;\n    var cy = 0;\n    var len = array.length;\n    for (var i = 0, j = len - 2; i < len; j = i, i += 2) {\n        var x0 = array[j];\n        var y0 = array[j + 1];\n        var x1 = array[i];\n        var y1 = array[i + 1];\n        var a = x0 * y1 - x1 * y0;\n        signedArea += a;\n        cx += (x0 + x1) * a;\n        cy += (y0 + y1) * a;\n    }\n    if (signedArea === 0) {\n        return [array[0] || 0, array[1] || 0];\n    }\n    return [cx / signedArea / 3, cy / signedArea / 3, signedArea];\n}\nfunction findBestRingOffset(fromSubBeziers, toSubBeziers, fromCp, toCp) {\n    var bezierCount = (fromSubBeziers.length - 2) / 6;\n    var bestScore = Infinity;\n    var bestOffset = 0;\n    var len = fromSubBeziers.length;\n    var len2 = len - 2;\n    for (var offset = 0; offset < bezierCount; offset++) {\n        var cursorOffset = offset * 6;\n        var score = 0;\n        for (var k = 0; k < len; k += 2) {\n            var idx = k === 0 ? cursorOffset : ((cursorOffset + k - 2) % len2 + 2);\n            var x0 = fromSubBeziers[idx] - fromCp[0];\n            var y0 = fromSubBeziers[idx + 1] - fromCp[1];\n            var x1 = toSubBeziers[k] - toCp[0];\n            var y1 = toSubBeziers[k + 1] - toCp[1];\n            var dx = x1 - x0;\n            var dy = y1 - y0;\n            score += dx * dx + dy * dy;\n        }\n        if (score < bestScore) {\n            bestScore = score;\n            bestOffset = offset;\n        }\n    }\n    return bestOffset;\n}\nfunction reverse(array) {\n    var newArr = [];\n    var len = array.length;\n    for (var i = 0; i < len; i += 2) {\n        newArr[i] = array[len - i - 2];\n        newArr[i + 1] = array[len - i - 1];\n    }\n    return newArr;\n}\nfunction findBestMorphingRotation(fromArr, toArr, searchAngleIteration, searchAngleRange) {\n    var result = [];\n    var fromNeedsReverse;\n    for (var i = 0; i < fromArr.length; i++) {\n        var fromSubpathBezier = fromArr[i];\n        var toSubpathBezier = toArr[i];\n        var fromCp = centroid(fromSubpathBezier);\n        var toCp = centroid(toSubpathBezier);\n        if (fromNeedsReverse == null) {\n            fromNeedsReverse = fromCp[2] < 0 !== toCp[2] < 0;\n        }\n        var newFromSubpathBezier = [];\n        var newToSubpathBezier = [];\n        var bestAngle = 0;\n        var bestScore = Infinity;\n        var tmpArr_1 = [];\n        var len = fromSubpathBezier.length;\n        if (fromNeedsReverse) {\n            fromSubpathBezier = reverse(fromSubpathBezier);\n        }\n        var offset = findBestRingOffset(fromSubpathBezier, toSubpathBezier, fromCp, toCp) * 6;\n        var len2 = len - 2;\n        for (var k = 0; k < len2; k += 2) {\n            var idx = (offset + k) % len2 + 2;\n            newFromSubpathBezier[k + 2] = fromSubpathBezier[idx] - fromCp[0];\n            newFromSubpathBezier[k + 3] = fromSubpathBezier[idx + 1] - fromCp[1];\n        }\n        newFromSubpathBezier[0] = fromSubpathBezier[offset] - fromCp[0];\n        newFromSubpathBezier[1] = fromSubpathBezier[offset + 1] - fromCp[1];\n        if (searchAngleIteration > 0) {\n            var step = searchAngleRange / searchAngleIteration;\n            for (var angle = -searchAngleRange / 2; angle <= searchAngleRange / 2; angle += step) {\n                var sa = Math.sin(angle);\n                var ca = Math.cos(angle);\n                var score = 0;\n                for (var k = 0; k < fromSubpathBezier.length; k += 2) {\n                    var x0 = newFromSubpathBezier[k];\n                    var y0 = newFromSubpathBezier[k + 1];\n                    var x1 = toSubpathBezier[k] - toCp[0];\n                    var y1 = toSubpathBezier[k + 1] - toCp[1];\n                    var newX1 = x1 * ca - y1 * sa;\n                    var newY1 = x1 * sa + y1 * ca;\n                    tmpArr_1[k] = newX1;\n                    tmpArr_1[k + 1] = newY1;\n                    var dx = newX1 - x0;\n                    var dy = newY1 - y0;\n                    score += dx * dx + dy * dy;\n                }\n                if (score < bestScore) {\n                    bestScore = score;\n                    bestAngle = angle;\n                    for (var m = 0; m < tmpArr_1.length; m++) {\n                        newToSubpathBezier[m] = tmpArr_1[m];\n                    }\n                }\n            }\n        }\n        else {\n            for (var i_1 = 0; i_1 < len; i_1 += 2) {\n                newToSubpathBezier[i_1] = toSubpathBezier[i_1] - toCp[0];\n                newToSubpathBezier[i_1 + 1] = toSubpathBezier[i_1 + 1] - toCp[1];\n            }\n        }\n        result.push({\n            from: newFromSubpathBezier,\n            to: newToSubpathBezier,\n            fromCp: fromCp,\n            toCp: toCp,\n            rotation: -bestAngle\n        });\n    }\n    return result;\n}\nexport function morphPath(fromPath, toPath, animationOpts) {\n    var fromPathProxy;\n    var toPathProxy;\n    if (!fromPath || !toPath) {\n        return toPath;\n    }\n    !fromPath.path && fromPath.createPathProxy();\n    fromPathProxy = fromPath.path;\n    fromPathProxy.beginPath();\n    fromPath.buildPath(fromPathProxy, fromPath.shape);\n    !toPath.path && toPath.createPathProxy();\n    toPathProxy = toPath.path;\n    toPathProxy === fromPathProxy && (toPathProxy = new PathProxy(false));\n    toPathProxy.beginPath();\n    if (isIndividualMorphingPath(toPath)) {\n        toPath.__oldBuildPath(toPathProxy, toPath.shape);\n    }\n    else {\n        toPath.buildPath(toPathProxy, toPath.shape);\n    }\n    var _a = alignBezierCurves(pathToBezierCurves(fromPathProxy), pathToBezierCurves(toPathProxy)), fromBezierCurves = _a[0], toBezierCurves = _a[1];\n    var morphingData = findBestMorphingRotation(fromBezierCurves, toBezierCurves, 10, Math.PI);\n    becomeIndividualMorphingPath(toPath, morphingData, 0);\n    var oldDone = animationOpts && animationOpts.done;\n    var oldAborted = animationOpts && animationOpts.aborted;\n    var oldDuring = animationOpts && animationOpts.during;\n    toPath.animateTo({\n        __morphT: 1\n    }, defaults({\n        during: function (p) {\n            toPath.dirtyShape();\n            oldDuring && oldDuring(p);\n        },\n        done: function () {\n            restoreIndividualMorphingPath(toPath);\n            toPath.createPathProxy();\n            toPath.dirtyShape();\n            oldDone && oldDone();\n        },\n        aborted: function () {\n            oldAborted && oldAborted();\n        }\n    }, animationOpts));\n    return toPath;\n}\nfunction morphingPathBuildPath(path) {\n    var morphingData = this.__morphingData;\n    var t = this.__morphT;\n    var onet = 1 - t;\n    var newCp = [];\n    for (var i = 0; i < morphingData.length; i++) {\n        var item = morphingData[i];\n        var from = item.from;\n        var to = item.to;\n        var angle = item.rotation * t;\n        var fromCp = item.fromCp;\n        var toCp = item.toCp;\n        var sa = Math.sin(angle);\n        var ca = Math.cos(angle);\n        lerp(newCp, fromCp, toCp, t);\n        for (var m = 0; m < from.length; m += 2) {\n            var x0 = from[m];\n            var y0 = from[m + 1];\n            var x1 = to[m];\n            var y1 = to[m + 1];\n            var x = x0 * onet + x1 * t;\n            var y = y0 * onet + y1 * t;\n            tmpArr[m] = (x * ca - y * sa) + newCp[0];\n            tmpArr[m + 1] = (x * sa + y * ca) + newCp[1];\n        }\n        for (var m = 0; m < from.length;) {\n            if (m === 0) {\n                path.moveTo(tmpArr[m++], tmpArr[m++]);\n            }\n            path.bezierCurveTo(tmpArr[m++], tmpArr[m++], tmpArr[m++], tmpArr[m++], tmpArr[m++], tmpArr[m++]);\n        }\n    }\n}\n;\nfunction becomeIndividualMorphingPath(path, morphingData, morphT) {\n    if (isIndividualMorphingPath(path)) {\n        updateIndividualMorphingPath(path, morphingData, morphT);\n        return;\n    }\n    var morphingPath = path;\n    morphingPath.__oldBuildPath = morphingPath.buildPath;\n    morphingPath.buildPath = morphingPathBuildPath;\n    updateIndividualMorphingPath(morphingPath, morphingData, morphT);\n}\nfunction updateIndividualMorphingPath(morphingPath, morphingData, morphT) {\n    morphingPath.__morphingData = morphingData;\n    morphingPath.__morphT = morphT;\n}\nfunction restoreIndividualMorphingPath(path) {\n    if (isIndividualMorphingPath(path)) {\n        path.buildPath = path.__oldBuildPath;\n        path.__oldBuildPath = path.__morphingData = null;\n    }\n}\nfunction isIndividualMorphingPath(path) {\n    return path.__oldBuildPath != null;\n}\nexport function isCombiningPath(path) {\n    return !!path.__combiningSubList;\n}\nexport function isInAnyMorphing(path) {\n    return isIndividualMorphingPath(path) || isCombiningPath(path);\n}\nexport function combine(fromPathList, toPath, animationOpts, copyPropsIfDivided) {\n    var fromIndividuals = [];\n    var separateCount = 0;\n    for (var i = 0; i < fromPathList.length; i++) {\n        var fromPath = fromPathList[i];\n        if (isCombiningPath(fromPath)) {\n            var fromCombiningSubList = fromPath.__combiningSubList;\n            for (var j = 0; j < fromCombiningSubList.length; j++) {\n                fromIndividuals.push(fromCombiningSubList[j]);\n            }\n            separateCount += fromCombiningSubList.length;\n        }\n        else {\n            fromIndividuals.push(fromPath);\n            separateCount++;\n        }\n    }\n    if (!separateCount) {\n        return;\n    }\n    var dividingMethod = animationOpts ? animationOpts.dividingMethod : null;\n    var toPathSplittedList = divideShape(toPath, separateCount, dividingMethod);\n    assert(toPathSplittedList.length === separateCount);\n    var oldDone = animationOpts && animationOpts.done;\n    var oldAborted = animationOpts && animationOpts.aborted;\n    var oldDuring = animationOpts && animationOpts.during;\n    var doneCount = 0;\n    var abortedCalled = false;\n    var morphAnimationOpts = defaults({\n        during: function (p) {\n            oldDuring && oldDuring(p);\n        },\n        done: function () {\n            doneCount++;\n            if (doneCount === toPathSplittedList.length) {\n                restoreCombiningPath(toPath);\n                oldDone && oldDone();\n            }\n        },\n        aborted: function () {\n            if (!abortedCalled) {\n                abortedCalled = true;\n                oldAborted && oldAborted();\n            }\n        }\n    }, animationOpts);\n    for (var i = 0; i < separateCount; i++) {\n        var from = fromIndividuals[i];\n        var to = toPathSplittedList[i];\n        copyPropsIfDivided && copyPropsIfDivided(toPath, to, true);\n        morphPath(from, to, morphAnimationOpts);\n    }\n    becomeCombiningPath(toPath, toPathSplittedList);\n    return {\n        fromIndividuals: fromIndividuals,\n        toIndividuals: toPathSplittedList,\n        count: separateCount\n    };\n}\nfunction becomeCombiningPath(path, combiningSubList) {\n    if (isCombiningPath(path)) {\n        updateCombiningPathSubList(path, combiningSubList);\n        return;\n    }\n    var combiningPath = path;\n    updateCombiningPathSubList(combiningPath, combiningSubList);\n    combiningPath.__oldAddSelfToZr = path.addSelfToZr;\n    combiningPath.__oldRemoveSelfFromZr = path.removeSelfFromZr;\n    combiningPath.addSelfToZr = combiningAddSelfToZr;\n    combiningPath.removeSelfFromZr = combiningRemoveSelfFromZr;\n    combiningPath.__oldBuildPath = combiningPath.buildPath;\n    combiningPath.buildPath = noop;\n    combiningPath.childrenRef = combiningChildrenRef;\n}\nfunction restoreCombiningPath(path) {\n    if (!isCombiningPath(path)) {\n        return;\n    }\n    var combiningPath = path;\n    updateCombiningPathSubList(combiningPath, null);\n    combiningPath.addSelfToZr = combiningPath.__oldAddSelfToZr;\n    combiningPath.removeSelfFromZr = combiningPath.__oldRemoveSelfFromZr;\n    combiningPath.buildPath = combiningPath.__oldBuildPath;\n    combiningPath.childrenRef =\n        combiningPath.__combiningSubList =\n            combiningPath.__oldAddSelfToZr =\n                combiningPath.__oldRemoveSelfFromZr =\n                    combiningPath.__oldBuildPath = null;\n}\nfunction updateCombiningPathSubList(combiningPath, combiningSubList) {\n    if (combiningPath.__combiningSubList !== combiningSubList) {\n        combiningPathSubListAddRemoveWithZr(combiningPath, 'removeSelfFromZr');\n        combiningPath.__combiningSubList = combiningSubList;\n        if (combiningSubList) {\n            for (var i = 0; i < combiningSubList.length; i++) {\n                combiningSubList[i].parent = combiningPath;\n            }\n        }\n        combiningPathSubListAddRemoveWithZr(combiningPath, 'addSelfToZr');\n    }\n}\nfunction combiningAddSelfToZr(zr) {\n    this.__oldAddSelfToZr(zr);\n    combiningPathSubListAddRemoveWithZr(this, 'addSelfToZr');\n}\nfunction combiningPathSubListAddRemoveWithZr(path, method) {\n    var combiningSubList = path.__combiningSubList;\n    var zr = path.__zr;\n    if (combiningSubList && zr) {\n        for (var i = 0; i < combiningSubList.length; i++) {\n            var child = combiningSubList[i];\n            child[method](zr);\n        }\n    }\n}\nfunction combiningRemoveSelfFromZr(zr) {\n    this.__oldRemoveSelfFromZr(zr);\n    var combiningSubList = this.__combiningSubList;\n    for (var i = 0; i < combiningSubList.length; i++) {\n        var child = combiningSubList[i];\n        child.removeSelfFromZr(zr);\n    }\n}\nfunction combiningChildrenRef() {\n    return this.__combiningSubList;\n}\nexport function separate(fromPath, toPathList, animationOpts, copyPropsIfDivided) {\n    var toPathListLen = toPathList.length;\n    var fromPathList;\n    var dividingMethod = animationOpts ? animationOpts.dividingMethod : null;\n    var copyProps = false;\n    if (isCombiningPath(fromPath)) {\n        var fromCombiningSubList = fromPath.__combiningSubList;\n        if (fromCombiningSubList.length === toPathListLen) {\n            fromPathList = fromCombiningSubList;\n        }\n        else {\n            fromPathList = divideShape(fromPath, toPathListLen, dividingMethod);\n            copyProps = true;\n        }\n    }\n    else {\n        fromPathList = divideShape(fromPath, toPathListLen, dividingMethod);\n        copyProps = true;\n    }\n    assert(fromPathList.length === toPathListLen);\n    for (var i = 0; i < toPathListLen; i++) {\n        if (copyProps && copyPropsIfDivided) {\n            copyPropsIfDivided(fromPath, fromPathList[i], false);\n        }\n        morphPath(fromPathList[i], toPathList[i], animationOpts);\n    }\n    return {\n        fromIndividuals: fromPathList,\n        toIndividuals: toPathList,\n        count: toPathListLen\n    };\n}\nfunction divideShape(path, separateCount, dividingMethod) {\n    return dividingMethod === 'duplicate'\n        ? duplicateShape(path, separateCount)\n        : splitShape(path, separateCount);\n}\nfunction splitShape(path, separateCount) {\n    var resultPaths = [];\n    if (separateCount <= 0) {\n        return resultPaths;\n    }\n    if (separateCount === 1) {\n        return duplicateShape(path, separateCount);\n    }\n    if (path instanceof Rect) {\n        var toPathShape = path.shape;\n        var splitPropIdx = toPathShape.height > toPathShape.width ? 1 : 0;\n        var propWH = PROP_WH[splitPropIdx];\n        var propXY = PROP_XY[splitPropIdx];\n        var subWH = toPathShape[propWH] / separateCount;\n        var xyCurr = toPathShape[propXY];\n        for (var i = 0; i < separateCount; i++, xyCurr += subWH) {\n            var subShape = {\n                x: toPathShape.x,\n                y: toPathShape.y,\n                width: toPathShape.width,\n                height: toPathShape.height\n            };\n            subShape[propXY] = xyCurr;\n            subShape[propWH] = i < separateCount - 1\n                ? subWH\n                : toPathShape[propXY] + toPathShape[propWH] - xyCurr;\n            var splitted = new Rect({ shape: subShape });\n            resultPaths.push(splitted);\n        }\n    }\n    else if (path instanceof Sector) {\n        var toPathShape = path.shape;\n        var clockwise = toPathShape.clockwise;\n        var startAngle = toPathShape.startAngle;\n        var endAngle = toPathShape.endAngle;\n        var endAngleNormalized = normalizeRadian(startAngle, toPathShape.endAngle, clockwise);\n        var step = (endAngleNormalized - startAngle) / separateCount;\n        var angleCurr = startAngle;\n        for (var i = 0; i < separateCount; i++, angleCurr += step) {\n            var splitted = new Sector({\n                shape: {\n                    cx: toPathShape.cx,\n                    cy: toPathShape.cy,\n                    r: toPathShape.r,\n                    r0: toPathShape.r0,\n                    clockwise: clockwise,\n                    startAngle: angleCurr,\n                    endAngle: i === separateCount - 1 ? endAngle : angleCurr + step\n                }\n            });\n            resultPaths.push(splitted);\n        }\n    }\n    else {\n        return duplicateShape(path, separateCount);\n    }\n    return resultPaths;\n}\nfunction duplicateShape(path, separateCount) {\n    var resultPaths = [];\n    if (separateCount <= 0) {\n        return resultPaths;\n    }\n    var ctor = path.constructor;\n    for (var i = 0; i < separateCount; i++) {\n        var sub = new ctor({\n            shape: clone(path.shape)\n        });\n        resultPaths.push(sub);\n    }\n    return resultPaths;\n}\nfunction normalizeRadian(start, end, clockwise) {\n    return end + PI2 * (Math[clockwise ? 'ceil' : 'floor']((start - end) / PI2));\n}\n","import { create as v2Create, distSquare as v2DistSquare } from './vector';\nvar mathPow = Math.pow;\nvar mathSqrt = Math.sqrt;\nvar EPSILON = 1e-8;\nvar EPSILON_NUMERIC = 1e-4;\nvar THREE_SQRT = mathSqrt(3);\nvar ONE_THIRD = 1 / 3;\nvar _v0 = v2Create();\nvar _v1 = v2Create();\nvar _v2 = v2Create();\nfunction isAroundZero(val) {\n    return val > -EPSILON && val < EPSILON;\n}\nfunction isNotAroundZero(val) {\n    return val > EPSILON || val < -EPSILON;\n}\nexport function cubicAt(p0, p1, p2, p3, t) {\n    var onet = 1 - t;\n    return onet * onet * (onet * p0 + 3 * t * p1)\n        + t * t * (t * p3 + 3 * onet * p2);\n}\nexport function cubicDerivativeAt(p0, p1, p2, p3, t) {\n    var onet = 1 - t;\n    return 3 * (((p1 - p0) * onet + 2 * (p2 - p1) * t) * onet\n        + (p3 - p2) * t * t);\n}\nexport function cubicRootAt(p0, p1, p2, p3, val, roots) {\n    var a = p3 + 3 * (p1 - p2) - p0;\n    var b = 3 * (p2 - p1 * 2 + p0);\n    var c = 3 * (p1 - p0);\n    var d = p0 - val;\n    var A = b * b - 3 * a * c;\n    var B = b * c - 9 * a * d;\n    var C = c * c - 3 * b * d;\n    var n = 0;\n    if (isAroundZero(A) && isAroundZero(B)) {\n        if (isAroundZero(b)) {\n            roots[0] = 0;\n        }\n        else {\n            var t1 = -c / b;\n            if (t1 >= 0 && t1 <= 1) {\n                roots[n++] = t1;\n            }\n        }\n    }\n    else {\n        var disc = B * B - 4 * A * C;\n        if (isAroundZero(disc)) {\n            var K = B / A;\n            var t1 = -b / a + K;\n            var t2 = -K / 2;\n            if (t1 >= 0 && t1 <= 1) {\n                roots[n++] = t1;\n            }\n            if (t2 >= 0 && t2 <= 1) {\n                roots[n++] = t2;\n            }\n        }\n        else if (disc > 0) {\n            var discSqrt = mathSqrt(disc);\n            var Y1 = A * b + 1.5 * a * (-B + discSqrt);\n            var Y2 = A * b + 1.5 * a * (-B - discSqrt);\n            if (Y1 < 0) {\n                Y1 = -mathPow(-Y1, ONE_THIRD);\n            }\n            else {\n                Y1 = mathPow(Y1, ONE_THIRD);\n            }\n            if (Y2 < 0) {\n                Y2 = -mathPow(-Y2, ONE_THIRD);\n            }\n            else {\n                Y2 = mathPow(Y2, ONE_THIRD);\n            }\n            var t1 = (-b - (Y1 + Y2)) / (3 * a);\n            if (t1 >= 0 && t1 <= 1) {\n                roots[n++] = t1;\n            }\n        }\n        else {\n            var T = (2 * A * b - 3 * a * B) / (2 * mathSqrt(A * A * A));\n            var theta = Math.acos(T) / 3;\n            var ASqrt = mathSqrt(A);\n            var tmp = Math.cos(theta);\n            var t1 = (-b - 2 * ASqrt * tmp) / (3 * a);\n            var t2 = (-b + ASqrt * (tmp + THREE_SQRT * Math.sin(theta))) / (3 * a);\n            var t3 = (-b + ASqrt * (tmp - THREE_SQRT * Math.sin(theta))) / (3 * a);\n            if (t1 >= 0 && t1 <= 1) {\n                roots[n++] = t1;\n            }\n            if (t2 >= 0 && t2 <= 1) {\n                roots[n++] = t2;\n            }\n            if (t3 >= 0 && t3 <= 1) {\n                roots[n++] = t3;\n            }\n        }\n    }\n    return n;\n}\nexport function cubicExtrema(p0, p1, p2, p3, extrema) {\n    var b = 6 * p2 - 12 * p1 + 6 * p0;\n    var a = 9 * p1 + 3 * p3 - 3 * p0 - 9 * p2;\n    var c = 3 * p1 - 3 * p0;\n    var n = 0;\n    if (isAroundZero(a)) {\n        if (isNotAroundZero(b)) {\n            var t1 = -c / b;\n            if (t1 >= 0 && t1 <= 1) {\n                extrema[n++] = t1;\n            }\n        }\n    }\n    else {\n        var disc = b * b - 4 * a * c;\n        if (isAroundZero(disc)) {\n            extrema[0] = -b / (2 * a);\n        }\n        else if (disc > 0) {\n            var discSqrt = mathSqrt(disc);\n            var t1 = (-b + discSqrt) / (2 * a);\n            var t2 = (-b - discSqrt) / (2 * a);\n            if (t1 >= 0 && t1 <= 1) {\n                extrema[n++] = t1;\n            }\n            if (t2 >= 0 && t2 <= 1) {\n                extrema[n++] = t2;\n            }\n        }\n    }\n    return n;\n}\nexport function cubicSubdivide(p0, p1, p2, p3, t, out) {\n    var p01 = (p1 - p0) * t + p0;\n    var p12 = (p2 - p1) * t + p1;\n    var p23 = (p3 - p2) * t + p2;\n    var p012 = (p12 - p01) * t + p01;\n    var p123 = (p23 - p12) * t + p12;\n    var p0123 = (p123 - p012) * t + p012;\n    out[0] = p0;\n    out[1] = p01;\n    out[2] = p012;\n    out[3] = p0123;\n    out[4] = p0123;\n    out[5] = p123;\n    out[6] = p23;\n    out[7] = p3;\n}\nexport function cubicProjectPoint(x0, y0, x1, y1, x2, y2, x3, y3, x, y, out) {\n    var t;\n    var interval = 0.005;\n    var d = Infinity;\n    var prev;\n    var next;\n    var d1;\n    var d2;\n    _v0[0] = x;\n    _v0[1] = y;\n    for (var _t = 0; _t < 1; _t += 0.05) {\n        _v1[0] = cubicAt(x0, x1, x2, x3, _t);\n        _v1[1] = cubicAt(y0, y1, y2, y3, _t);\n        d1 = v2DistSquare(_v0, _v1);\n        if (d1 < d) {\n            t = _t;\n            d = d1;\n        }\n    }\n    d = Infinity;\n    for (var i = 0; i < 32; i++) {\n        if (interval < EPSILON_NUMERIC) {\n            break;\n        }\n        prev = t - interval;\n        next = t + interval;\n        _v1[0] = cubicAt(x0, x1, x2, x3, prev);\n        _v1[1] = cubicAt(y0, y1, y2, y3, prev);\n        d1 = v2DistSquare(_v1, _v0);\n        if (prev >= 0 && d1 < d) {\n            t = prev;\n            d = d1;\n        }\n        else {\n            _v2[0] = cubicAt(x0, x1, x2, x3, next);\n            _v2[1] = cubicAt(y0, y1, y2, y3, next);\n            d2 = v2DistSquare(_v2, _v0);\n            if (next <= 1 && d2 < d) {\n                t = next;\n                d = d2;\n            }\n            else {\n                interval *= 0.5;\n            }\n        }\n    }\n    if (out) {\n        out[0] = cubicAt(x0, x1, x2, x3, t);\n        out[1] = cubicAt(y0, y1, y2, y3, t);\n    }\n    return mathSqrt(d);\n}\nexport function cubicLength(x0, y0, x1, y1, x2, y2, x3, y3, iteration) {\n    var px = x0;\n    var py = y0;\n    var d = 0;\n    var step = 1 / iteration;\n    for (var i = 1; i <= iteration; i++) {\n        var t = i * step;\n        var x = cubicAt(x0, x1, x2, x3, t);\n        var y = cubicAt(y0, y1, y2, y3, t);\n        var dx = x - px;\n        var dy = y - py;\n        d += Math.sqrt(dx * dx + dy * dy);\n        px = x;\n        py = y;\n    }\n    return d;\n}\nexport function quadraticAt(p0, p1, p2, t) {\n    var onet = 1 - t;\n    return onet * (onet * p0 + 2 * t * p1) + t * t * p2;\n}\nexport function quadraticDerivativeAt(p0, p1, p2, t) {\n    return 2 * ((1 - t) * (p1 - p0) + t * (p2 - p1));\n}\nexport function quadraticRootAt(p0, p1, p2, val, roots) {\n    var a = p0 - 2 * p1 + p2;\n    var b = 2 * (p1 - p0);\n    var c = p0 - val;\n    var n = 0;\n    if (isAroundZero(a)) {\n        if (isNotAroundZero(b)) {\n            var t1 = -c / b;\n            if (t1 >= 0 && t1 <= 1) {\n                roots[n++] = t1;\n            }\n        }\n    }\n    else {\n        var disc = b * b - 4 * a * c;\n        if (isAroundZero(disc)) {\n            var t1 = -b / (2 * a);\n            if (t1 >= 0 && t1 <= 1) {\n                roots[n++] = t1;\n            }\n        }\n        else if (disc > 0) {\n            var discSqrt = mathSqrt(disc);\n            var t1 = (-b + discSqrt) / (2 * a);\n            var t2 = (-b - discSqrt) / (2 * a);\n            if (t1 >= 0 && t1 <= 1) {\n                roots[n++] = t1;\n            }\n            if (t2 >= 0 && t2 <= 1) {\n                roots[n++] = t2;\n            }\n        }\n    }\n    return n;\n}\nexport function quadraticExtremum(p0, p1, p2) {\n    var divider = p0 + p2 - 2 * p1;\n    if (divider === 0) {\n        return 0.5;\n    }\n    else {\n        return (p0 - p1) / divider;\n    }\n}\nexport function quadraticSubdivide(p0, p1, p2, t, out) {\n    var p01 = (p1 - p0) * t + p0;\n    var p12 = (p2 - p1) * t + p1;\n    var p012 = (p12 - p01) * t + p01;\n    out[0] = p0;\n    out[1] = p01;\n    out[2] = p012;\n    out[3] = p012;\n    out[4] = p12;\n    out[5] = p2;\n}\nexport function quadraticProjectPoint(x0, y0, x1, y1, x2, y2, x, y, out) {\n    var t;\n    var interval = 0.005;\n    var d = Infinity;\n    _v0[0] = x;\n    _v0[1] = y;\n    for (var _t = 0; _t < 1; _t += 0.05) {\n        _v1[0] = quadraticAt(x0, x1, x2, _t);\n        _v1[1] = quadraticAt(y0, y1, y2, _t);\n        var d1 = v2DistSquare(_v0, _v1);\n        if (d1 < d) {\n            t = _t;\n            d = d1;\n        }\n    }\n    d = Infinity;\n    for (var i = 0; i < 32; i++) {\n        if (interval < EPSILON_NUMERIC) {\n            break;\n        }\n        var prev = t - interval;\n        var next = t + interval;\n        _v1[0] = quadraticAt(x0, x1, x2, prev);\n        _v1[1] = quadraticAt(y0, y1, y2, prev);\n        var d1 = v2DistSquare(_v1, _v0);\n        if (prev >= 0 && d1 < d) {\n            t = prev;\n            d = d1;\n        }\n        else {\n            _v2[0] = quadraticAt(x0, x1, x2, next);\n            _v2[1] = quadraticAt(y0, y1, y2, next);\n            var d2 = v2DistSquare(_v2, _v0);\n            if (next <= 1 && d2 < d) {\n                t = next;\n                d = d2;\n            }\n            else {\n                interval *= 0.5;\n            }\n        }\n    }\n    if (out) {\n        out[0] = quadraticAt(x0, x1, x2, t);\n        out[1] = quadraticAt(y0, y1, y2, t);\n    }\n    return mathSqrt(d);\n}\nexport function quadraticLength(x0, y0, x1, y1, x2, y2, iteration) {\n    var px = x0;\n    var py = y0;\n    var d = 0;\n    var step = 1 / iteration;\n    for (var i = 1; i <= iteration; i++) {\n        var t = i * step;\n        var x = quadraticAt(x0, x1, x2, t);\n        var y = quadraticAt(y0, y1, y2, t);\n        var dx = x - px;\n        var dy = y - py;\n        d += Math.sqrt(dx * dx + dy * dy);\n        px = x;\n        py = y;\n    }\n    return d;\n}\n","import { __extends } from \"tslib\";\nimport Gradient from './Gradient';\nvar LinearGradient = (function (_super) {\n    __extends(LinearGradient, _super);\n    function LinearGradient(x, y, x2, y2, colorStops, globalCoord) {\n        var _this = _super.call(this, colorStops) || this;\n        _this.x = x == null ? 0 : x;\n        _this.y = y == null ? 0 : y;\n        _this.x2 = x2 == null ? 1 : x2;\n        _this.y2 = y2 == null ? 0 : y2;\n        _this.type = 'linear';\n        _this.global = globalCoord || false;\n        return _this;\n    }\n    return LinearGradient;\n}(Gradient));\nexport default LinearGradient;\n;\n","import { normalizeArcAngles } from '../../core/PathProxy';\nvar PI = Math.PI;\nvar PI2 = PI * 2;\nvar mathSin = Math.sin;\nvar mathCos = Math.cos;\nvar mathACos = Math.acos;\nvar mathATan2 = Math.atan2;\nvar mathAbs = Math.abs;\nvar mathSqrt = Math.sqrt;\nvar mathMax = Math.max;\nvar mathMin = Math.min;\nvar e = 1e-4;\nfunction intersect(x0, y0, x1, y1, x2, y2, x3, y3) {\n    var x10 = x1 - x0;\n    var y10 = y1 - y0;\n    var x32 = x3 - x2;\n    var y32 = y3 - y2;\n    var t = y32 * x10 - x32 * y10;\n    if (t * t < e) {\n        return;\n    }\n    t = (x32 * (y0 - y2) - y32 * (x0 - x2)) / t;\n    return [x0 + t * x10, y0 + t * y10];\n}\nfunction computeCornerTangents(x0, y0, x1, y1, radius, cr, clockwise) {\n    var x01 = x0 - x1;\n    var y01 = y0 - y1;\n    var lo = (clockwise ? cr : -cr) / mathSqrt(x01 * x01 + y01 * y01);\n    var ox = lo * y01;\n    var oy = -lo * x01;\n    var x11 = x0 + ox;\n    var y11 = y0 + oy;\n    var x10 = x1 + ox;\n    var y10 = y1 + oy;\n    var x00 = (x11 + x10) / 2;\n    var y00 = (y11 + y10) / 2;\n    var dx = x10 - x11;\n    var dy = y10 - y11;\n    var d2 = dx * dx + dy * dy;\n    var r = radius - cr;\n    var s = x11 * y10 - x10 * y11;\n    var d = (dy < 0 ? -1 : 1) * mathSqrt(mathMax(0, r * r * d2 - s * s));\n    var cx0 = (s * dy - dx * d) / d2;\n    var cy0 = (-s * dx - dy * d) / d2;\n    var cx1 = (s * dy + dx * d) / d2;\n    var cy1 = (-s * dx + dy * d) / d2;\n    var dx0 = cx0 - x00;\n    var dy0 = cy0 - y00;\n    var dx1 = cx1 - x00;\n    var dy1 = cy1 - y00;\n    if (dx0 * dx0 + dy0 * dy0 > dx1 * dx1 + dy1 * dy1) {\n        cx0 = cx1;\n        cy0 = cy1;\n    }\n    return {\n        cx: cx0,\n        cy: cy0,\n        x01: -ox,\n        y01: -oy,\n        x11: cx0 * (radius / r - 1),\n        y11: cy0 * (radius / r - 1)\n    };\n}\nexport function buildPath(ctx, shape) {\n    var radius = mathMax(shape.r, 0);\n    var innerRadius = mathMax(shape.r0 || 0, 0);\n    var hasRadius = radius > 0;\n    var hasInnerRadius = innerRadius > 0;\n    if (!hasRadius && !hasInnerRadius) {\n        return;\n    }\n    if (!hasRadius) {\n        radius = innerRadius;\n        innerRadius = 0;\n    }\n    if (innerRadius > radius) {\n        var tmp = radius;\n        radius = innerRadius;\n        innerRadius = tmp;\n    }\n    var clockwise = !!shape.clockwise;\n    var startAngle = shape.startAngle;\n    var endAngle = shape.endAngle;\n    var arc;\n    if (startAngle === endAngle) {\n        arc = 0;\n    }\n    else {\n        var tmpAngles = [startAngle, endAngle];\n        normalizeArcAngles(tmpAngles, !clockwise);\n        arc = mathAbs(tmpAngles[0] - tmpAngles[1]);\n    }\n    var x = shape.cx;\n    var y = shape.cy;\n    var cornerRadius = shape.cornerRadius || 0;\n    var innerCornerRadius = shape.innerCornerRadius || 0;\n    if (!(radius > e)) {\n        ctx.moveTo(x, y);\n    }\n    else if (arc > PI2 - e) {\n        ctx.moveTo(x + radius * mathCos(startAngle), y + radius * mathSin(startAngle));\n        ctx.arc(x, y, radius, startAngle, endAngle, !clockwise);\n        if (innerRadius > e) {\n            ctx.moveTo(x + innerRadius * mathCos(endAngle), y + innerRadius * mathSin(endAngle));\n            ctx.arc(x, y, innerRadius, endAngle, startAngle, clockwise);\n        }\n    }\n    else {\n        var halfRd = mathAbs(radius - innerRadius) / 2;\n        var cr = mathMin(halfRd, cornerRadius);\n        var icr = mathMin(halfRd, innerCornerRadius);\n        var cr0 = icr;\n        var cr1 = cr;\n        var xrs = radius * mathCos(startAngle);\n        var yrs = radius * mathSin(startAngle);\n        var xire = innerRadius * mathCos(endAngle);\n        var yire = innerRadius * mathSin(endAngle);\n        var xre = void 0;\n        var yre = void 0;\n        var xirs = void 0;\n        var yirs = void 0;\n        if (cr > e || icr > e) {\n            xre = radius * mathCos(endAngle);\n            yre = radius * mathSin(endAngle);\n            xirs = innerRadius * mathCos(startAngle);\n            yirs = innerRadius * mathSin(startAngle);\n            if (arc < PI) {\n                var it_1 = intersect(xrs, yrs, xirs, yirs, xre, yre, xire, yire);\n                if (it_1) {\n                    var x0 = xrs - it_1[0];\n                    var y0 = yrs - it_1[1];\n                    var x1 = xre - it_1[0];\n                    var y1 = yre - it_1[1];\n                    var a = 1 / mathSin(mathACos((x0 * x1 + y0 * y1) / (mathSqrt(x0 * x0 + y0 * y0) * mathSqrt(x1 * x1 + y1 * y1))) / 2);\n                    var b = mathSqrt(it_1[0] * it_1[0] + it_1[1] * it_1[1]);\n                    cr0 = mathMin(icr, (innerRadius - b) / (a - 1));\n                    cr1 = mathMin(cr, (radius - b) / (a + 1));\n                }\n            }\n        }\n        if (!(arc > e)) {\n            ctx.moveTo(x + xrs, y + yrs);\n        }\n        else if (cr1 > e) {\n            var ct0 = computeCornerTangents(xirs, yirs, xrs, yrs, radius, cr1, clockwise);\n            var ct1 = computeCornerTangents(xre, yre, xire, yire, radius, cr1, clockwise);\n            ctx.moveTo(x + ct0.cx + ct0.x01, y + ct0.cy + ct0.y01);\n            if (cr1 < cr) {\n                ctx.arc(x + ct0.cx, y + ct0.cy, cr1, mathATan2(ct0.y01, ct0.x01), mathATan2(ct1.y01, ct1.x01), !clockwise);\n            }\n            else {\n                ctx.arc(x + ct0.cx, y + ct0.cy, cr1, mathATan2(ct0.y01, ct0.x01), mathATan2(ct0.y11, ct0.x11), !clockwise);\n                ctx.arc(x, y, radius, mathATan2(ct0.cy + ct0.y11, ct0.cx + ct0.x11), mathATan2(ct1.cy + ct1.y11, ct1.cx + ct1.x11), !clockwise);\n                ctx.arc(x + ct1.cx, y + ct1.cy, cr1, mathATan2(ct1.y11, ct1.x11), mathATan2(ct1.y01, ct1.x01), !clockwise);\n            }\n        }\n        else {\n            ctx.moveTo(x + xrs, y + yrs);\n            ctx.arc(x, y, radius, startAngle, endAngle, !clockwise);\n        }\n        if (!(innerRadius > e) || !(arc > e)) {\n            ctx.lineTo(x + xire, y + yire);\n        }\n        else if (cr0 > e) {\n            var ct0 = computeCornerTangents(xire, yire, xre, yre, innerRadius, -cr0, clockwise);\n            var ct1 = computeCornerTangents(xrs, yrs, xirs, yirs, innerRadius, -cr0, clockwise);\n            ctx.lineTo(x + ct0.cx + ct0.x01, y + ct0.cy + ct0.y01);\n            if (cr0 < icr) {\n                ctx.arc(x + ct0.cx, y + ct0.cy, cr0, mathATan2(ct0.y01, ct0.x01), mathATan2(ct1.y01, ct1.x01), !clockwise);\n            }\n            else {\n                ctx.arc(x + ct0.cx, y + ct0.cy, cr0, mathATan2(ct0.y01, ct0.x01), mathATan2(ct0.y11, ct0.x11), !clockwise);\n                ctx.arc(x, y, innerRadius, mathATan2(ct0.cy + ct0.y11, ct0.cx + ct0.x11), mathATan2(ct1.cy + ct1.y11, ct1.cx + ct1.x11), clockwise);\n                ctx.arc(x + ct1.cx, y + ct1.cy, cr0, mathATan2(ct1.y11, ct1.x11), mathATan2(ct1.y01, ct1.x01), !clockwise);\n            }\n        }\n        else {\n            ctx.lineTo(x + xire, y + yire);\n            ctx.arc(x, y, innerRadius, endAngle, startAngle, clockwise);\n        }\n    }\n    ctx.closePath();\n}\n","import { __extends } from \"tslib\";\nimport Path from '../Path';\nimport * as roundSectorHelper from '../helper/roundSector';\nvar SectorShape = (function () {\n    function SectorShape() {\n        this.cx = 0;\n        this.cy = 0;\n        this.r0 = 0;\n        this.r = 0;\n        this.startAngle = 0;\n        this.endAngle = Math.PI * 2;\n        this.clockwise = true;\n        this.cornerRadius = 0;\n        this.innerCornerRadius = 0;\n    }\n    return SectorShape;\n}());\nvar Sector = (function (_super) {\n    __extends(Sector, _super);\n    function Sector(opts) {\n        return _super.call(this, opts) || this;\n    }\n    Sector.prototype.getDefaultShape = function () {\n        return new SectorShape();\n    };\n    Sector.prototype.buildPath = function (ctx, shape) {\n        roundSectorHelper.buildPath(ctx, shape);\n    };\n    Sector.prototype.isZeroArea = function () {\n        return this.shape.startAngle === this.shape.endAngle\n            || this.shape.r === this.shape.r0;\n    };\n    return Sector;\n}(Path));\nSector.prototype.type = 'sector';\nexport default Sector;\n","/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation.\r\n\r\nPermission to use, copy, modify, and/or distribute this software for any\r\npurpose with or without fee is hereby granted.\r\n\r\nTHE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH\r\nREGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY\r\nAND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,\r\nINDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM\r\nLOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR\r\nOTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR\r\nPERFORMANCE OF THIS SOFTWARE.\r\n***************************************************************************** */\r\n/* global Reflect, Promise */\r\n\r\nvar extendStatics = function(d, b) {\r\n    extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\r\n    return extendStatics(d, b);\r\n};\r\n\r\nexport function __extends(d, b) {\r\n    extendStatics(d, b);\r\n    function __() { this.constructor = d; }\r\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n}\r\n\r\nexport var __assign = function() {\r\n    __assign = Object.assign || function __assign(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\r\n        }\r\n        return t;\r\n    }\r\n    return __assign.apply(this, arguments);\r\n}\r\n\r\nexport function __rest(s, e) {\r\n    var t = {};\r\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\r\n        t[p] = s[p];\r\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\r\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\r\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\r\n                t[p[i]] = s[p[i]];\r\n        }\r\n    return t;\r\n}\r\n\r\nexport function __decorate(decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n}\r\n\r\nexport function __param(paramIndex, decorator) {\r\n    return function (target, key) { decorator(target, key, paramIndex); }\r\n}\r\n\r\nexport function __metadata(metadataKey, metadataValue) {\r\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(metadataKey, metadataValue);\r\n}\r\n\r\nexport function __awaiter(thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n}\r\n\r\nexport function __generator(thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (_) try {\r\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [op[0] & 2, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n}\r\n\r\nexport var __createBinding = Object.create ? (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    Object.defineProperty(o, k2, { enumerable: true, get: function() { return m[k]; } });\r\n}) : (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    o[k2] = m[k];\r\n});\r\n\r\nexport function __exportStar(m, o) {\r\n    for (var p in m) if (p !== \"default\" && !Object.prototype.hasOwnProperty.call(o, p)) __createBinding(o, m, p);\r\n}\r\n\r\nexport function __values(o) {\r\n    var s = typeof Symbol === \"function\" && Symbol.iterator, m = s && o[s], i = 0;\r\n    if (m) return m.call(o);\r\n    if (o && typeof o.length === \"number\") return {\r\n        next: function () {\r\n            if (o && i >= o.length) o = void 0;\r\n            return { value: o && o[i++], done: !o };\r\n        }\r\n    };\r\n    throw new TypeError(s ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\r\n}\r\n\r\nexport function __read(o, n) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\r\n    if (!m) return o;\r\n    var i = m.call(o), r, ar = [], e;\r\n    try {\r\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\r\n    }\r\n    catch (error) { e = { error: error }; }\r\n    finally {\r\n        try {\r\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\r\n        }\r\n        finally { if (e) throw e.error; }\r\n    }\r\n    return ar;\r\n}\r\n\r\nexport function __spread() {\r\n    for (var ar = [], i = 0; i < arguments.length; i++)\r\n        ar = ar.concat(__read(arguments[i]));\r\n    return ar;\r\n}\r\n\r\nexport function __spreadArrays() {\r\n    for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;\r\n    for (var r = Array(s), k = 0, i = 0; i < il; i++)\r\n        for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)\r\n            r[k] = a[j];\r\n    return r;\r\n};\r\n\r\nexport function __await(v) {\r\n    return this instanceof __await ? (this.v = v, this) : new __await(v);\r\n}\r\n\r\nexport function __asyncGenerator(thisArg, _arguments, generator) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var g = generator.apply(thisArg, _arguments || []), i, q = [];\r\n    return i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i;\r\n    function verb(n) { if (g[n]) i[n] = function (v) { return new Promise(function (a, b) { q.push([n, v, a, b]) > 1 || resume(n, v); }); }; }\r\n    function resume(n, v) { try { step(g[n](v)); } catch (e) { settle(q[0][3], e); } }\r\n    function step(r) { r.value instanceof __await ? Promise.resolve(r.value.v).then(fulfill, reject) : settle(q[0][2], r); }\r\n    function fulfill(value) { resume(\"next\", value); }\r\n    function reject(value) { resume(\"throw\", value); }\r\n    function settle(f, v) { if (f(v), q.shift(), q.length) resume(q[0][0], q[0][1]); }\r\n}\r\n\r\nexport function __asyncDelegator(o) {\r\n    var i, p;\r\n    return i = {}, verb(\"next\"), verb(\"throw\", function (e) { throw e; }), verb(\"return\"), i[Symbol.iterator] = function () { return this; }, i;\r\n    function verb(n, f) { i[n] = o[n] ? function (v) { return (p = !p) ? { value: __await(o[n](v)), done: n === \"return\" } : f ? f(v) : v; } : f; }\r\n}\r\n\r\nexport function __asyncValues(o) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var m = o[Symbol.asyncIterator], i;\r\n    return m ? m.call(o) : (o = typeof __values === \"function\" ? __values(o) : o[Symbol.iterator](), i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i);\r\n    function verb(n) { i[n] = o[n] && function (v) { return new Promise(function (resolve, reject) { v = o[n](v), settle(resolve, reject, v.done, v.value); }); }; }\r\n    function settle(resolve, reject, d, v) { Promise.resolve(v).then(function(v) { resolve({ value: v, done: d }); }, reject); }\r\n}\r\n\r\nexport function __makeTemplateObject(cooked, raw) {\r\n    if (Object.defineProperty) { Object.defineProperty(cooked, \"raw\", { value: raw }); } else { cooked.raw = raw; }\r\n    return cooked;\r\n};\r\n\r\nvar __setModuleDefault = Object.create ? (function(o, v) {\r\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\r\n}) : function(o, v) {\r\n    o[\"default\"] = v;\r\n};\r\n\r\nexport function __importStar(mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\r\n    __setModuleDefault(result, mod);\r\n    return result;\r\n}\r\n\r\nexport function __importDefault(mod) {\r\n    return (mod && mod.__esModule) ? mod : { default: mod };\r\n}\r\n\r\nexport function __classPrivateFieldGet(receiver, privateMap) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to get private field on non-instance\");\r\n    }\r\n    return privateMap.get(receiver);\r\n}\r\n\r\nexport function __classPrivateFieldSet(receiver, privateMap, value) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to set private field on non-instance\");\r\n    }\r\n    privateMap.set(receiver, value);\r\n    return value;\r\n}\r\n","import PathProxy from '../core/PathProxy';\nimport { applyTransform as v2ApplyTransform } from '../core/vector';\nvar CMD = PathProxy.CMD;\nvar points = [[], [], []];\nvar mathSqrt = Math.sqrt;\nvar mathAtan2 = Math.atan2;\nexport default function transformPath(path, m) {\n    var data = path.data;\n    var len = path.len();\n    var cmd;\n    var nPoint;\n    var i;\n    var j;\n    var k;\n    var p;\n    var M = CMD.M;\n    var C = CMD.C;\n    var L = CMD.L;\n    var R = CMD.R;\n    var A = CMD.A;\n    var Q = CMD.Q;\n    for (i = 0, j = 0; i < len;) {\n        cmd = data[i++];\n        j = i;\n        nPoint = 0;\n        switch (cmd) {\n            case M:\n                nPoint = 1;\n                break;\n            case L:\n                nPoint = 1;\n                break;\n            case C:\n                nPoint = 3;\n                break;\n            case Q:\n                nPoint = 2;\n                break;\n            case A:\n                var x = m[4];\n                var y = m[5];\n                var sx = mathSqrt(m[0] * m[0] + m[1] * m[1]);\n                var sy = mathSqrt(m[2] * m[2] + m[3] * m[3]);\n                var angle = mathAtan2(-m[1] / sy, m[0] / sx);\n                data[i] *= sx;\n                data[i++] += x;\n                data[i] *= sy;\n                data[i++] += y;\n                data[i++] *= sx;\n                data[i++] *= sy;\n                data[i++] += angle;\n                data[i++] += angle;\n                i += 2;\n                j = i;\n                break;\n            case R:\n                p[0] = data[i++];\n                p[1] = data[i++];\n                v2ApplyTransform(p, p, m);\n                data[j++] = p[0];\n                data[j++] = p[1];\n                p[0] += data[i++];\n                p[1] += data[i++];\n                v2ApplyTransform(p, p, m);\n                data[j++] = p[0];\n                data[j++] = p[1];\n        }\n        for (k = 0; k < nPoint; k++) {\n            var p_1 = points[k];\n            p_1[0] = data[i++];\n            p_1[1] = data[i++];\n            v2ApplyTransform(p_1, p_1, m);\n            data[j++] = p_1[0];\n            data[j++] = p_1[1];\n        }\n    }\n    path.increaseVersion();\n}\n","import { __extends } from \"tslib\";\nimport Path from '../graphic/Path';\nimport PathProxy from '../core/PathProxy';\nimport transformPath from './transformPath';\nimport { extend } from '../core/util';\nvar mathSqrt = Math.sqrt;\nvar mathSin = Math.sin;\nvar mathCos = Math.cos;\nvar PI = Math.PI;\nfunction vMag(v) {\n    return Math.sqrt(v[0] * v[0] + v[1] * v[1]);\n}\n;\nfunction vRatio(u, v) {\n    return (u[0] * v[0] + u[1] * v[1]) / (vMag(u) * vMag(v));\n}\n;\nfunction vAngle(u, v) {\n    return (u[0] * v[1] < u[1] * v[0] ? -1 : 1)\n        * Math.acos(vRatio(u, v));\n}\n;\nfunction processArc(x1, y1, x2, y2, fa, fs, rx, ry, psiDeg, cmd, path) {\n    var psi = psiDeg * (PI / 180.0);\n    var xp = mathCos(psi) * (x1 - x2) / 2.0\n        + mathSin(psi) * (y1 - y2) / 2.0;\n    var yp = -1 * mathSin(psi) * (x1 - x2) / 2.0\n        + mathCos(psi) * (y1 - y2) / 2.0;\n    var lambda = (xp * xp) / (rx * rx) + (yp * yp) / (ry * ry);\n    if (lambda > 1) {\n        rx *= mathSqrt(lambda);\n        ry *= mathSqrt(lambda);\n    }\n    var f = (fa === fs ? -1 : 1)\n        * mathSqrt((((rx * rx) * (ry * ry))\n            - ((rx * rx) * (yp * yp))\n            - ((ry * ry) * (xp * xp))) / ((rx * rx) * (yp * yp)\n            + (ry * ry) * (xp * xp))) || 0;\n    var cxp = f * rx * yp / ry;\n    var cyp = f * -ry * xp / rx;\n    var cx = (x1 + x2) / 2.0\n        + mathCos(psi) * cxp\n        - mathSin(psi) * cyp;\n    var cy = (y1 + y2) / 2.0\n        + mathSin(psi) * cxp\n        + mathCos(psi) * cyp;\n    var theta = vAngle([1, 0], [(xp - cxp) / rx, (yp - cyp) / ry]);\n    var u = [(xp - cxp) / rx, (yp - cyp) / ry];\n    var v = [(-1 * xp - cxp) / rx, (-1 * yp - cyp) / ry];\n    var dTheta = vAngle(u, v);\n    if (vRatio(u, v) <= -1) {\n        dTheta = PI;\n    }\n    if (vRatio(u, v) >= 1) {\n        dTheta = 0;\n    }\n    if (dTheta < 0) {\n        var n = Math.round(dTheta / PI * 1e6) / 1e6;\n        dTheta = PI * 2 + (n % 2) * PI;\n    }\n    path.addData(cmd, cx, cy, rx, ry, theta, dTheta, psi, fs);\n}\nvar commandReg = /([mlvhzcqtsa])([^mlvhzcqtsa]*)/ig;\nvar numberReg = /-?([0-9]*\\.)?[0-9]+([eE]-?[0-9]+)?/g;\nfunction createPathProxyFromString(data) {\n    var path = new PathProxy();\n    if (!data) {\n        return path;\n    }\n    var cpx = 0;\n    var cpy = 0;\n    var subpathX = cpx;\n    var subpathY = cpy;\n    var prevCmd;\n    var CMD = PathProxy.CMD;\n    var cmdList = data.match(commandReg);\n    if (!cmdList) {\n        return path;\n    }\n    for (var l = 0; l < cmdList.length; l++) {\n        var cmdText = cmdList[l];\n        var cmdStr = cmdText.charAt(0);\n        var cmd = void 0;\n        var p = cmdText.match(numberReg) || [];\n        var pLen = p.length;\n        for (var i = 0; i < pLen; i++) {\n            p[i] = parseFloat(p[i]);\n        }\n        var off = 0;\n        while (off < pLen) {\n            var ctlPtx = void 0;\n            var ctlPty = void 0;\n            var rx = void 0;\n            var ry = void 0;\n            var psi = void 0;\n            var fa = void 0;\n            var fs = void 0;\n            var x1 = cpx;\n            var y1 = cpy;\n            var len = void 0;\n            var pathData = void 0;\n            switch (cmdStr) {\n                case 'l':\n                    cpx += p[off++];\n                    cpy += p[off++];\n                    cmd = CMD.L;\n                    path.addData(cmd, cpx, cpy);\n                    break;\n                case 'L':\n                    cpx = p[off++];\n                    cpy = p[off++];\n                    cmd = CMD.L;\n                    path.addData(cmd, cpx, cpy);\n                    break;\n                case 'm':\n                    cpx += p[off++];\n                    cpy += p[off++];\n                    cmd = CMD.M;\n                    path.addData(cmd, cpx, cpy);\n                    subpathX = cpx;\n                    subpathY = cpy;\n                    cmdStr = 'l';\n                    break;\n                case 'M':\n                    cpx = p[off++];\n                    cpy = p[off++];\n                    cmd = CMD.M;\n                    path.addData(cmd, cpx, cpy);\n                    subpathX = cpx;\n                    subpathY = cpy;\n                    cmdStr = 'L';\n                    break;\n                case 'h':\n                    cpx += p[off++];\n                    cmd = CMD.L;\n                    path.addData(cmd, cpx, cpy);\n                    break;\n                case 'H':\n                    cpx = p[off++];\n                    cmd = CMD.L;\n                    path.addData(cmd, cpx, cpy);\n                    break;\n                case 'v':\n                    cpy += p[off++];\n                    cmd = CMD.L;\n                    path.addData(cmd, cpx, cpy);\n                    break;\n                case 'V':\n                    cpy = p[off++];\n                    cmd = CMD.L;\n                    path.addData(cmd, cpx, cpy);\n                    break;\n                case 'C':\n                    cmd = CMD.C;\n                    path.addData(cmd, p[off++], p[off++], p[off++], p[off++], p[off++], p[off++]);\n                    cpx = p[off - 2];\n                    cpy = p[off - 1];\n                    break;\n                case 'c':\n                    cmd = CMD.C;\n                    path.addData(cmd, p[off++] + cpx, p[off++] + cpy, p[off++] + cpx, p[off++] + cpy, p[off++] + cpx, p[off++] + cpy);\n                    cpx += p[off - 2];\n                    cpy += p[off - 1];\n                    break;\n                case 'S':\n                    ctlPtx = cpx;\n                    ctlPty = cpy;\n                    len = path.len();\n                    pathData = path.data;\n                    if (prevCmd === CMD.C) {\n                        ctlPtx += cpx - pathData[len - 4];\n                        ctlPty += cpy - pathData[len - 3];\n                    }\n                    cmd = CMD.C;\n                    x1 = p[off++];\n                    y1 = p[off++];\n                    cpx = p[off++];\n                    cpy = p[off++];\n                    path.addData(cmd, ctlPtx, ctlPty, x1, y1, cpx, cpy);\n                    break;\n                case 's':\n                    ctlPtx = cpx;\n                    ctlPty = cpy;\n                    len = path.len();\n                    pathData = path.data;\n                    if (prevCmd === CMD.C) {\n                        ctlPtx += cpx - pathData[len - 4];\n                        ctlPty += cpy - pathData[len - 3];\n                    }\n                    cmd = CMD.C;\n                    x1 = cpx + p[off++];\n                    y1 = cpy + p[off++];\n                    cpx += p[off++];\n                    cpy += p[off++];\n                    path.addData(cmd, ctlPtx, ctlPty, x1, y1, cpx, cpy);\n                    break;\n                case 'Q':\n                    x1 = p[off++];\n                    y1 = p[off++];\n                    cpx = p[off++];\n                    cpy = p[off++];\n                    cmd = CMD.Q;\n                    path.addData(cmd, x1, y1, cpx, cpy);\n                    break;\n                case 'q':\n                    x1 = p[off++] + cpx;\n                    y1 = p[off++] + cpy;\n                    cpx += p[off++];\n                    cpy += p[off++];\n                    cmd = CMD.Q;\n                    path.addData(cmd, x1, y1, cpx, cpy);\n                    break;\n                case 'T':\n                    ctlPtx = cpx;\n                    ctlPty = cpy;\n                    len = path.len();\n                    pathData = path.data;\n                    if (prevCmd === CMD.Q) {\n                        ctlPtx += cpx - pathData[len - 4];\n                        ctlPty += cpy - pathData[len - 3];\n                    }\n                    cpx = p[off++];\n                    cpy = p[off++];\n                    cmd = CMD.Q;\n                    path.addData(cmd, ctlPtx, ctlPty, cpx, cpy);\n                    break;\n                case 't':\n                    ctlPtx = cpx;\n                    ctlPty = cpy;\n                    len = path.len();\n                    pathData = path.data;\n                    if (prevCmd === CMD.Q) {\n                        ctlPtx += cpx - pathData[len - 4];\n                        ctlPty += cpy - pathData[len - 3];\n                    }\n                    cpx += p[off++];\n                    cpy += p[off++];\n                    cmd = CMD.Q;\n                    path.addData(cmd, ctlPtx, ctlPty, cpx, cpy);\n                    break;\n                case 'A':\n                    rx = p[off++];\n                    ry = p[off++];\n                    psi = p[off++];\n                    fa = p[off++];\n                    fs = p[off++];\n                    x1 = cpx, y1 = cpy;\n                    cpx = p[off++];\n                    cpy = p[off++];\n                    cmd = CMD.A;\n                    processArc(x1, y1, cpx, cpy, fa, fs, rx, ry, psi, cmd, path);\n                    break;\n                case 'a':\n                    rx = p[off++];\n                    ry = p[off++];\n                    psi = p[off++];\n                    fa = p[off++];\n                    fs = p[off++];\n                    x1 = cpx, y1 = cpy;\n                    cpx += p[off++];\n                    cpy += p[off++];\n                    cmd = CMD.A;\n                    processArc(x1, y1, cpx, cpy, fa, fs, rx, ry, psi, cmd, path);\n                    break;\n            }\n        }\n        if (cmdStr === 'z' || cmdStr === 'Z') {\n            cmd = CMD.Z;\n            path.addData(cmd);\n            cpx = subpathX;\n            cpy = subpathY;\n        }\n        prevCmd = cmd;\n    }\n    path.toStatic();\n    return path;\n}\nvar SVGPath = (function (_super) {\n    __extends(SVGPath, _super);\n    function SVGPath() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    SVGPath.prototype.applyTransform = function (m) { };\n    return SVGPath;\n}(Path));\nfunction isPathProxy(path) {\n    return path.setData != null;\n}\nfunction createPathOptions(str, opts) {\n    var pathProxy = createPathProxyFromString(str);\n    var innerOpts = extend({}, opts);\n    innerOpts.buildPath = function (path) {\n        if (isPathProxy(path)) {\n            path.setData(pathProxy.data);\n            var ctx = path.getContext();\n            if (ctx) {\n                path.rebuildPath(ctx, 1);\n            }\n        }\n        else {\n            var ctx = path;\n            pathProxy.rebuildPath(ctx, 1);\n        }\n    };\n    innerOpts.applyTransform = function (m) {\n        transformPath(pathProxy, m);\n        this.dirtyShape();\n    };\n    return innerOpts;\n}\nexport function createFromString(str, opts) {\n    return new SVGPath(createPathOptions(str, opts));\n}\nexport function extendFromString(str, defaultOpts) {\n    var innerOpts = createPathOptions(str, defaultOpts);\n    var Sub = (function (_super) {\n        __extends(Sub, _super);\n        function Sub(opts) {\n            var _this = _super.call(this, opts) || this;\n            _this.applyTransform = innerOpts.applyTransform;\n            _this.buildPath = innerOpts.buildPath;\n            return _this;\n        }\n        return Sub;\n    }(SVGPath));\n    return Sub;\n}\nexport function mergePath(pathEls, opts) {\n    var pathList = [];\n    var len = pathEls.length;\n    for (var i = 0; i < len; i++) {\n        var pathEl = pathEls[i];\n        if (!pathEl.path) {\n            pathEl.createPathProxy();\n        }\n        if (pathEl.shapeChanged()) {\n            pathEl.buildPath(pathEl.path, pathEl.shape, true);\n        }\n        pathList.push(pathEl.path);\n    }\n    var pathBundle = new Path(opts);\n    pathBundle.createPathProxy();\n    pathBundle.buildPath = function (path) {\n        if (isPathProxy(path)) {\n            path.appendPath(pathList);\n            var ctx = path.getContext();\n            if (ctx) {\n                path.rebuildPath(ctx, 1);\n            }\n        }\n    };\n    return pathBundle;\n}\n","module.exports = extend\n\nvar hasOwnProperty = Object.prototype.hasOwnProperty;\n\nfunction extend() {\n    var target = {}\n\n    for (var i = 0; i < arguments.length; i++) {\n        var source = arguments[i]\n\n        for (var key in source) {\n            if (hasOwnProperty.call(source, key)) {\n                target[key] = source[key]\n            }\n        }\n    }\n\n    return target\n}\n","var Browser = (function () {\n    function Browser() {\n        this.firefox = false;\n        this.ie = false;\n        this.edge = false;\n        this.newEdge = false;\n        this.weChat = false;\n    }\n    return Browser;\n}());\nvar Env = (function () {\n    function Env() {\n        this.browser = new Browser();\n        this.node = false;\n        this.wxa = false;\n        this.worker = false;\n        this.canvasSupported = false;\n        this.svgSupported = false;\n        this.touchEventsSupported = false;\n        this.pointerEventsSupported = false;\n        this.domSupported = false;\n    }\n    return Env;\n}());\nvar env = new Env();\nif (typeof wx === 'object' && typeof wx.getSystemInfoSync === 'function') {\n    env.wxa = true;\n    env.canvasSupported = true;\n    env.touchEventsSupported = true;\n}\nelse if (typeof document === 'undefined' && typeof self !== 'undefined') {\n    env.worker = true;\n    env.canvasSupported = true;\n}\nelse if (typeof navigator === 'undefined') {\n    env.node = true;\n    env.canvasSupported = true;\n    env.svgSupported = true;\n}\nelse {\n    detect(navigator.userAgent, env);\n}\nfunction detect(ua, env) {\n    var browser = env.browser;\n    var firefox = ua.match(/Firefox\\/([\\d.]+)/);\n    var ie = ua.match(/MSIE\\s([\\d.]+)/)\n        || ua.match(/Trident\\/.+?rv:(([\\d.]+))/);\n    var edge = ua.match(/Edge?\\/([\\d.]+)/);\n    var weChat = (/micromessenger/i).test(ua);\n    if (firefox) {\n        browser.firefox = true;\n        browser.version = firefox[1];\n    }\n    if (ie) {\n        browser.ie = true;\n        browser.version = ie[1];\n    }\n    if (edge) {\n        browser.edge = true;\n        browser.version = edge[1];\n        browser.newEdge = +edge[1].split('.')[0] > 18;\n    }\n    if (weChat) {\n        browser.weChat = true;\n    }\n    env.canvasSupported = !!document.createElement('canvas').getContext;\n    env.svgSupported = typeof SVGRect !== 'undefined';\n    env.touchEventsSupported = 'ontouchstart' in window && !browser.ie && !browser.edge;\n    env.pointerEventsSupported = 'onpointerdown' in window\n        && (browser.edge || (browser.ie && +browser.version >= 11));\n    env.domSupported = typeof document !== 'undefined';\n}\nexport default env;\n","import * as imageHelper from '../helper/image';\nimport { extend, retrieve2, retrieve3, reduce } from '../../core/util';\nimport { getLineHeight, getWidth } from '../../contain/text';\nvar STYLE_REG = /\\{([a-zA-Z0-9_]+)\\|([^}]*)\\}/g;\nexport function truncateText(text, containerWidth, font, ellipsis, options) {\n    if (!containerWidth) {\n        return '';\n    }\n    var textLines = (text + '').split('\\n');\n    options = prepareTruncateOptions(containerWidth, font, ellipsis, options);\n    for (var i = 0, len = textLines.length; i < len; i++) {\n        textLines[i] = truncateSingleLine(textLines[i], options);\n    }\n    return textLines.join('\\n');\n}\nfunction prepareTruncateOptions(containerWidth, font, ellipsis, options) {\n    options = options || {};\n    var preparedOpts = extend({}, options);\n    preparedOpts.font = font;\n    ellipsis = retrieve2(ellipsis, '...');\n    preparedOpts.maxIterations = retrieve2(options.maxIterations, 2);\n    var minChar = preparedOpts.minChar = retrieve2(options.minChar, 0);\n    preparedOpts.cnCharWidth = getWidth('', font);\n    var ascCharWidth = preparedOpts.ascCharWidth = getWidth('a', font);\n    preparedOpts.placeholder = retrieve2(options.placeholder, '');\n    var contentWidth = containerWidth = Math.max(0, containerWidth - 1);\n    for (var i = 0; i < minChar && contentWidth >= ascCharWidth; i++) {\n        contentWidth -= ascCharWidth;\n    }\n    var ellipsisWidth = getWidth(ellipsis, font);\n    if (ellipsisWidth > contentWidth) {\n        ellipsis = '';\n        ellipsisWidth = 0;\n    }\n    contentWidth = containerWidth - ellipsisWidth;\n    preparedOpts.ellipsis = ellipsis;\n    preparedOpts.ellipsisWidth = ellipsisWidth;\n    preparedOpts.contentWidth = contentWidth;\n    preparedOpts.containerWidth = containerWidth;\n    return preparedOpts;\n}\nfunction truncateSingleLine(textLine, options) {\n    var containerWidth = options.containerWidth;\n    var font = options.font;\n    var contentWidth = options.contentWidth;\n    if (!containerWidth) {\n        return '';\n    }\n    var lineWidth = getWidth(textLine, font);\n    if (lineWidth <= containerWidth) {\n        return textLine;\n    }\n    for (var j = 0;; j++) {\n        if (lineWidth <= contentWidth || j >= options.maxIterations) {\n            textLine += options.ellipsis;\n            break;\n        }\n        var subLength = j === 0\n            ? estimateLength(textLine, contentWidth, options.ascCharWidth, options.cnCharWidth)\n            : lineWidth > 0\n                ? Math.floor(textLine.length * contentWidth / lineWidth)\n                : 0;\n        textLine = textLine.substr(0, subLength);\n        lineWidth = getWidth(textLine, font);\n    }\n    if (textLine === '') {\n        textLine = options.placeholder;\n    }\n    return textLine;\n}\nfunction estimateLength(text, contentWidth, ascCharWidth, cnCharWidth) {\n    var width = 0;\n    var i = 0;\n    for (var len = text.length; i < len && width < contentWidth; i++) {\n        var charCode = text.charCodeAt(i);\n        width += (0 <= charCode && charCode <= 127) ? ascCharWidth : cnCharWidth;\n    }\n    return i;\n}\nexport function parsePlainText(text, style) {\n    text != null && (text += '');\n    var overflow = style.overflow;\n    var padding = style.padding;\n    var font = style.font;\n    var truncate = overflow === 'truncate';\n    var calculatedLineHeight = getLineHeight(font);\n    var lineHeight = retrieve2(style.lineHeight, calculatedLineHeight);\n    var truncateLineOverflow = style.lineOverflow === 'truncate';\n    var width = style.width;\n    var lines;\n    if (width != null && overflow === 'break' || overflow === 'breakAll') {\n        lines = text ? wrapText(text, style.font, width, overflow === 'breakAll', 0).lines : [];\n    }\n    else {\n        lines = text ? text.split('\\n') : [];\n    }\n    var contentHeight = lines.length * lineHeight;\n    var height = retrieve2(style.height, contentHeight);\n    if (contentHeight > height && truncateLineOverflow) {\n        var lineCount = Math.floor(height / lineHeight);\n        lines = lines.slice(0, lineCount);\n    }\n    var outerHeight = height;\n    var outerWidth = width;\n    if (padding) {\n        outerHeight += padding[0] + padding[2];\n        if (outerWidth != null) {\n            outerWidth += padding[1] + padding[3];\n        }\n    }\n    if (text && truncate && outerWidth != null) {\n        var options = prepareTruncateOptions(width, font, style.ellipsis, {\n            minChar: style.truncateMinChar,\n            placeholder: style.placeholder\n        });\n        for (var i = 0; i < lines.length; i++) {\n            lines[i] = truncateSingleLine(lines[i], options);\n        }\n    }\n    if (width == null) {\n        var maxWidth = 0;\n        for (var i = 0; i < lines.length; i++) {\n            maxWidth = Math.max(getWidth(lines[i], font), maxWidth);\n        }\n        width = maxWidth;\n    }\n    return {\n        lines: lines,\n        height: height,\n        outerHeight: outerHeight,\n        lineHeight: lineHeight,\n        calculatedLineHeight: calculatedLineHeight,\n        contentHeight: contentHeight,\n        width: width\n    };\n}\nvar RichTextToken = (function () {\n    function RichTextToken() {\n    }\n    return RichTextToken;\n}());\nvar RichTextLine = (function () {\n    function RichTextLine(tokens) {\n        this.tokens = [];\n        if (tokens) {\n            this.tokens = tokens;\n        }\n    }\n    return RichTextLine;\n}());\nvar RichTextContentBlock = (function () {\n    function RichTextContentBlock() {\n        this.width = 0;\n        this.height = 0;\n        this.contentWidth = 0;\n        this.contentHeight = 0;\n        this.outerWidth = 0;\n        this.outerHeight = 0;\n        this.lines = [];\n    }\n    return RichTextContentBlock;\n}());\nexport { RichTextContentBlock };\nexport function parseRichText(text, style) {\n    var contentBlock = new RichTextContentBlock();\n    text != null && (text += '');\n    if (!text) {\n        return contentBlock;\n    }\n    var topWidth = style.width;\n    var topHeight = style.height;\n    var overflow = style.overflow;\n    var wrapInfo = (overflow === 'break' || overflow === 'breakAll') && topWidth != null\n        ? { width: topWidth, accumWidth: 0, breakAll: overflow === 'breakAll' }\n        : null;\n    var lastIndex = STYLE_REG.lastIndex = 0;\n    var result;\n    while ((result = STYLE_REG.exec(text)) != null) {\n        var matchedIndex = result.index;\n        if (matchedIndex > lastIndex) {\n            pushTokens(contentBlock, text.substring(lastIndex, matchedIndex), style, wrapInfo);\n        }\n        pushTokens(contentBlock, result[2], style, wrapInfo, result[1]);\n        lastIndex = STYLE_REG.lastIndex;\n    }\n    if (lastIndex < text.length) {\n        pushTokens(contentBlock, text.substring(lastIndex, text.length), style, wrapInfo);\n    }\n    var pendingList = [];\n    var calculatedHeight = 0;\n    var calculatedWidth = 0;\n    var stlPadding = style.padding;\n    var truncate = overflow === 'truncate';\n    var truncateLine = style.lineOverflow === 'truncate';\n    var prevToken;\n    function finishLine(line, lineWidth, lineHeight) {\n        line.width = lineWidth;\n        line.lineHeight = lineHeight;\n        calculatedHeight += lineHeight;\n        calculatedWidth = Math.max(calculatedWidth, lineWidth);\n    }\n    outer: for (var i = 0; i < contentBlock.lines.length; i++) {\n        var line = contentBlock.lines[i];\n        var lineHeight = 0;\n        var lineWidth = 0;\n        for (var j = 0; j < line.tokens.length; j++) {\n            var token = line.tokens[j];\n            var tokenStyle = token.styleName && style.rich[token.styleName] || {};\n            var textPadding = token.textPadding = tokenStyle.padding;\n            var paddingH = textPadding ? textPadding[1] + textPadding[3] : 0;\n            var font = token.font = tokenStyle.font || style.font;\n            token.contentHeight = getLineHeight(font);\n            var tokenHeight = retrieve2(tokenStyle.height, token.contentHeight);\n            token.innerHeight = tokenHeight;\n            textPadding && (tokenHeight += textPadding[0] + textPadding[2]);\n            token.height = tokenHeight;\n            token.lineHeight = retrieve3(tokenStyle.lineHeight, style.lineHeight, tokenHeight);\n            token.align = tokenStyle && tokenStyle.align || style.align;\n            token.verticalAlign = tokenStyle && tokenStyle.verticalAlign || 'middle';\n            if (truncateLine && topHeight != null && calculatedHeight + token.lineHeight > topHeight) {\n                if (j > 0) {\n                    line.tokens = line.tokens.slice(0, j);\n                    finishLine(line, lineWidth, lineHeight);\n                    contentBlock.lines = contentBlock.lines.slice(0, i + 1);\n                }\n                else {\n                    contentBlock.lines = contentBlock.lines.slice(0, i);\n                }\n                break outer;\n            }\n            var styleTokenWidth = tokenStyle.width;\n            var tokenWidthNotSpecified = styleTokenWidth == null || styleTokenWidth === 'auto';\n            if (typeof styleTokenWidth === 'string' && styleTokenWidth.charAt(styleTokenWidth.length - 1) === '%') {\n                token.percentWidth = styleTokenWidth;\n                pendingList.push(token);\n                token.contentWidth = getWidth(token.text, font);\n            }\n            else {\n                if (tokenWidthNotSpecified) {\n                    var textBackgroundColor = tokenStyle.backgroundColor;\n                    var bgImg = textBackgroundColor && textBackgroundColor.image;\n                    if (bgImg) {\n                        bgImg = imageHelper.findExistImage(bgImg);\n                        if (imageHelper.isImageReady(bgImg)) {\n                            token.width = Math.max(token.width, bgImg.width * tokenHeight / bgImg.height);\n                        }\n                    }\n                }\n                var remainTruncWidth = truncate && topWidth != null\n                    ? topWidth - lineWidth : null;\n                if (remainTruncWidth != null && remainTruncWidth < token.width) {\n                    if (!tokenWidthNotSpecified || remainTruncWidth < paddingH) {\n                        token.text = '';\n                        token.width = token.contentWidth = 0;\n                    }\n                    else {\n                        token.text = truncateText(token.text, remainTruncWidth - paddingH, font, style.ellipsis, { minChar: style.truncateMinChar });\n                        token.width = token.contentWidth = getWidth(token.text, font);\n                    }\n                }\n                else {\n                    token.contentWidth = getWidth(token.text, font);\n                }\n            }\n            token.width += paddingH;\n            lineWidth += token.width;\n            tokenStyle && (lineHeight = Math.max(lineHeight, token.lineHeight));\n            prevToken = token;\n        }\n        finishLine(line, lineWidth, lineHeight);\n    }\n    contentBlock.outerWidth = contentBlock.width = retrieve2(topWidth, calculatedWidth);\n    contentBlock.outerHeight = contentBlock.height = retrieve2(topHeight, calculatedHeight);\n    contentBlock.contentHeight = calculatedHeight;\n    contentBlock.contentWidth = calculatedWidth;\n    if (stlPadding) {\n        contentBlock.outerWidth += stlPadding[1] + stlPadding[3];\n        contentBlock.outerHeight += stlPadding[0] + stlPadding[2];\n    }\n    for (var i = 0; i < pendingList.length; i++) {\n        var token = pendingList[i];\n        var percentWidth = token.percentWidth;\n        token.width = parseInt(percentWidth, 10) / 100 * contentBlock.width;\n    }\n    return contentBlock;\n}\nfunction pushTokens(block, str, style, wrapInfo, styleName) {\n    var isEmptyStr = str === '';\n    var tokenStyle = styleName && style.rich[styleName] || {};\n    var lines = block.lines;\n    var font = tokenStyle.font || style.font;\n    var newLine = false;\n    var strLines;\n    var linesWidths;\n    if (wrapInfo) {\n        var tokenPadding = tokenStyle.padding;\n        var tokenPaddingH = tokenPadding ? tokenPadding[1] + tokenPadding[3] : 0;\n        if (tokenStyle.width != null && tokenStyle.width !== 'auto') {\n            var outerWidth_1 = parsePercent(tokenStyle.width, wrapInfo.width) + tokenPaddingH;\n            if (lines.length > 0) {\n                if (outerWidth_1 + wrapInfo.accumWidth > wrapInfo.width) {\n                    strLines = str.split('\\n');\n                    newLine = true;\n                }\n            }\n            wrapInfo.accumWidth = outerWidth_1;\n        }\n        else {\n            var res = wrapText(str, font, wrapInfo.width, wrapInfo.breakAll, wrapInfo.accumWidth);\n            wrapInfo.accumWidth = res.accumWidth + tokenPaddingH;\n            linesWidths = res.linesWidths;\n            strLines = res.lines;\n        }\n    }\n    else {\n        strLines = str.split('\\n');\n    }\n    for (var i = 0; i < strLines.length; i++) {\n        var text = strLines[i];\n        var token = new RichTextToken();\n        token.styleName = styleName;\n        token.text = text;\n        token.isLineHolder = !text && !isEmptyStr;\n        if (typeof tokenStyle.width === 'number') {\n            token.width = tokenStyle.width;\n        }\n        else {\n            token.width = linesWidths\n                ? linesWidths[i]\n                : getWidth(text, font);\n        }\n        if (!i && !newLine) {\n            var tokens = (lines[lines.length - 1] || (lines[0] = new RichTextLine())).tokens;\n            var tokensLen = tokens.length;\n            (tokensLen === 1 && tokens[0].isLineHolder)\n                ? (tokens[0] = token)\n                : ((text || !tokensLen || isEmptyStr) && tokens.push(token));\n        }\n        else {\n            lines.push(new RichTextLine([token]));\n        }\n    }\n}\nfunction isLatin(ch) {\n    var code = ch.charCodeAt(0);\n    return code >= 0x21 && code <= 0xFF;\n}\nvar breakCharMap = reduce(',&?/;] '.split(''), function (obj, ch) {\n    obj[ch] = true;\n    return obj;\n}, {});\nfunction isWordBreakChar(ch) {\n    if (isLatin(ch)) {\n        if (breakCharMap[ch]) {\n            return true;\n        }\n        return false;\n    }\n    return true;\n}\nfunction wrapText(text, font, lineWidth, isBreakAll, lastAccumWidth) {\n    var lines = [];\n    var linesWidths = [];\n    var line = '';\n    var currentWord = '';\n    var currentWordWidth = 0;\n    var accumWidth = 0;\n    for (var i = 0; i < text.length; i++) {\n        var ch = text.charAt(i);\n        if (ch === '\\n') {\n            if (currentWord) {\n                line += currentWord;\n                accumWidth += currentWordWidth;\n            }\n            lines.push(line);\n            linesWidths.push(accumWidth);\n            line = '';\n            currentWord = '';\n            currentWordWidth = 0;\n            accumWidth = 0;\n            continue;\n        }\n        var chWidth = getWidth(ch, font);\n        var inWord = isBreakAll ? false : !isWordBreakChar(ch);\n        if (!lines.length\n            ? lastAccumWidth + accumWidth + chWidth > lineWidth\n            : accumWidth + chWidth > lineWidth) {\n            if (!accumWidth) {\n                if (inWord) {\n                    lines.push(currentWord);\n                    linesWidths.push(currentWordWidth);\n                    currentWord = ch;\n                    currentWordWidth = chWidth;\n                }\n                else {\n                    lines.push(ch);\n                    linesWidths.push(chWidth);\n                }\n            }\n            else if (line || currentWord) {\n                if (inWord) {\n                    if (!line) {\n                        line = currentWord;\n                        currentWord = '';\n                        currentWordWidth = 0;\n                        accumWidth = currentWordWidth;\n                    }\n                    lines.push(line);\n                    linesWidths.push(accumWidth - currentWordWidth);\n                    currentWord += ch;\n                    currentWordWidth += chWidth;\n                    line = '';\n                    accumWidth = currentWordWidth;\n                }\n                else {\n                    if (currentWord) {\n                        line += currentWord;\n                        accumWidth += currentWordWidth;\n                        currentWord = '';\n                        currentWordWidth = 0;\n                    }\n                    lines.push(line);\n                    linesWidths.push(accumWidth);\n                    line = ch;\n                    accumWidth = chWidth;\n                }\n            }\n            continue;\n        }\n        accumWidth += chWidth;\n        if (inWord) {\n            currentWord += ch;\n            currentWordWidth += chWidth;\n        }\n        else {\n            if (currentWord) {\n                line += currentWord;\n                currentWord = '';\n                currentWordWidth = 0;\n            }\n            line += ch;\n        }\n    }\n    if (!lines.length && !line) {\n        line = text;\n        currentWord = '';\n        currentWordWidth = 0;\n    }\n    if (currentWord) {\n        line += currentWord;\n    }\n    if (line) {\n        lines.push(line);\n        linesWidths.push(accumWidth);\n    }\n    if (lines.length === 1) {\n        accumWidth += lastAccumWidth;\n    }\n    return {\n        accumWidth: accumWidth,\n        lines: lines,\n        linesWidths: linesWidths\n    };\n}\nfunction parsePercent(value, maxValue) {\n    if (typeof value === 'string') {\n        if (value.lastIndexOf('%') >= 0) {\n            return parseFloat(value) / 100 * maxValue;\n        }\n        return parseFloat(value);\n    }\n    return value;\n}\n","import { __extends } from \"tslib\";\nimport Path from '../Path';\nvar CircleShape = (function () {\n    function CircleShape() {\n        this.cx = 0;\n        this.cy = 0;\n        this.r = 0;\n    }\n    return CircleShape;\n}());\nvar Circle = (function (_super) {\n    __extends(Circle, _super);\n    function Circle(opts) {\n        return _super.call(this, opts) || this;\n    }\n    Circle.prototype.getDefaultShape = function () {\n        return new CircleShape();\n    };\n    Circle.prototype.buildPath = function (ctx, shape, inBundle) {\n        if (inBundle) {\n            ctx.moveTo(shape.cx + shape.r, shape.cy);\n        }\n        ctx.arc(shape.cx, shape.cy, shape.r, 0, Math.PI * 2);\n    };\n    return Circle;\n}(Path));\n;\nCircle.prototype.type = 'circle';\nexport default Circle;\n","import { __extends } from \"tslib\";\nimport Path from '../Path';\nvar EllipseShape = (function () {\n    function EllipseShape() {\n        this.cx = 0;\n        this.cy = 0;\n        this.rx = 0;\n        this.ry = 0;\n    }\n    return EllipseShape;\n}());\nvar Ellipse = (function (_super) {\n    __extends(Ellipse, _super);\n    function Ellipse(opts) {\n        return _super.call(this, opts) || this;\n    }\n    Ellipse.prototype.getDefaultShape = function () {\n        return new EllipseShape();\n    };\n    Ellipse.prototype.buildPath = function (ctx, shape) {\n        var k = 0.5522848;\n        var x = shape.cx;\n        var y = shape.cy;\n        var a = shape.rx;\n        var b = shape.ry;\n        var ox = a * k;\n        var oy = b * k;\n        ctx.moveTo(x - a, y);\n        ctx.bezierCurveTo(x - a, y - oy, x - ox, y - b, x, y - b);\n        ctx.bezierCurveTo(x + ox, y - b, x + a, y - oy, x + a, y);\n        ctx.bezierCurveTo(x + a, y + oy, x + ox, y + b, x, y + b);\n        ctx.bezierCurveTo(x - ox, y + b, x - a, y + oy, x - a, y);\n        ctx.closePath();\n    };\n    return Ellipse;\n}(Path));\nEllipse.prototype.type = 'ellipse';\nexport default Ellipse;\n","import { __extends } from \"tslib\";\nimport Path from '../Path';\nimport * as polyHelper from '../helper/poly';\nvar PolygonShape = (function () {\n    function PolygonShape() {\n        this.points = null;\n        this.smooth = 0;\n        this.smoothConstraint = null;\n    }\n    return PolygonShape;\n}());\nvar Polygon = (function (_super) {\n    __extends(Polygon, _super);\n    function Polygon(opts) {\n        return _super.call(this, opts) || this;\n    }\n    Polygon.prototype.getDefaultShape = function () {\n        return new PolygonShape();\n    };\n    Polygon.prototype.buildPath = function (ctx, shape) {\n        polyHelper.buildPath(ctx, shape, true);\n    };\n    return Polygon;\n}(Path));\n;\nPolygon.prototype.type = 'polygon';\nexport default Polygon;\n","import { __extends } from \"tslib\";\nimport Path from '../Path';\nimport * as polyHelper from '../helper/poly';\nvar PolylineShape = (function () {\n    function PolylineShape() {\n        this.points = null;\n        this.percent = 1;\n        this.smooth = 0;\n        this.smoothConstraint = null;\n    }\n    return PolylineShape;\n}());\nvar Polyline = (function (_super) {\n    __extends(Polyline, _super);\n    function Polyline(opts) {\n        return _super.call(this, opts) || this;\n    }\n    Polyline.prototype.getDefaultStyle = function () {\n        return {\n            stroke: '#000',\n            fill: null\n        };\n    };\n    Polyline.prototype.getDefaultShape = function () {\n        return new PolylineShape();\n    };\n    Polyline.prototype.buildPath = function (ctx, shape) {\n        polyHelper.buildPath(ctx, shape, false);\n    };\n    return Polyline;\n}(Path));\nPolyline.prototype.type = 'polyline';\nexport default Polyline;\n","import { __extends } from \"tslib\";\nimport Path from '../Path';\nimport { subPixelOptimizeLine } from '../helper/subPixelOptimize';\nvar subPixelOptimizeOutputShape = {};\nvar LineShape = (function () {\n    function LineShape() {\n        this.x1 = 0;\n        this.y1 = 0;\n        this.x2 = 0;\n        this.y2 = 0;\n        this.percent = 1;\n    }\n    return LineShape;\n}());\nvar Line = (function (_super) {\n    __extends(Line, _super);\n    function Line(opts) {\n        return _super.call(this, opts) || this;\n    }\n    Line.prototype.getDefaultStyle = function () {\n        return {\n            stroke: '#000',\n            fill: null\n        };\n    };\n    Line.prototype.getDefaultShape = function () {\n        return new LineShape();\n    };\n    Line.prototype.buildPath = function (ctx, shape) {\n        var x1;\n        var y1;\n        var x2;\n        var y2;\n        if (this.subPixelOptimize) {\n            var optimizedShape = subPixelOptimizeLine(subPixelOptimizeOutputShape, shape, this.style);\n            x1 = optimizedShape.x1;\n            y1 = optimizedShape.y1;\n            x2 = optimizedShape.x2;\n            y2 = optimizedShape.y2;\n        }\n        else {\n            x1 = shape.x1;\n            y1 = shape.y1;\n            x2 = shape.x2;\n            y2 = shape.y2;\n        }\n        var percent = shape.percent;\n        if (percent === 0) {\n            return;\n        }\n        ctx.moveTo(x1, y1);\n        if (percent < 1) {\n            x2 = x1 * (1 - percent) + x2 * percent;\n            y2 = y1 * (1 - percent) + y2 * percent;\n        }\n        ctx.lineTo(x2, y2);\n    };\n    Line.prototype.pointAt = function (p) {\n        var shape = this.shape;\n        return [\n            shape.x1 * (1 - p) + shape.x2 * p,\n            shape.y1 * (1 - p) + shape.y2 * p\n        ];\n    };\n    return Line;\n}(Path));\nLine.prototype.type = 'line';\nexport default Line;\n","import { isString } from '../core/util';\nexport function parseXML(svg) {\n    if (isString(svg)) {\n        var parser = new DOMParser();\n        svg = parser.parseFromString(svg, 'text/xml');\n    }\n    var svgNode = svg;\n    if (svgNode.nodeType === 9) {\n        svgNode = svgNode.firstChild;\n    }\n    while (svgNode.nodeName.toLowerCase() !== 'svg' || svgNode.nodeType !== 1) {\n        svgNode = svgNode.nextSibling;\n    }\n    return svgNode;\n}\n","import BoundingRect from '../core/BoundingRect';\nimport { createCanvas } from '../core/util';\nimport LRU from '../core/LRU';\nvar textWidthCache = {};\nexport var DEFAULT_FONT = '12px sans-serif';\nvar _ctx;\nvar _cachedFont;\nfunction defaultMeasureText(text, font) {\n    if (!_ctx) {\n        _ctx = createCanvas().getContext('2d');\n    }\n    if (_cachedFont !== font) {\n        _cachedFont = _ctx.font = font || DEFAULT_FONT;\n    }\n    return _ctx.measureText(text);\n}\nvar methods = {\n    measureText: defaultMeasureText\n};\nexport function $override(name, fn) {\n    methods[name] = fn;\n}\nexport function getWidth(text, font) {\n    font = font || DEFAULT_FONT;\n    var cacheOfFont = textWidthCache[font];\n    if (!cacheOfFont) {\n        cacheOfFont = textWidthCache[font] = new LRU(500);\n    }\n    var width = cacheOfFont.get(text);\n    if (width == null) {\n        width = methods.measureText(text, font).width;\n        cacheOfFont.put(text, width);\n    }\n    return width;\n}\nexport function innerGetBoundingRect(text, font, textAlign, textBaseline) {\n    var width = getWidth(text, font);\n    var height = getLineHeight(font);\n    var x = adjustTextX(0, width, textAlign);\n    var y = adjustTextY(0, height, textBaseline);\n    var rect = new BoundingRect(x, y, width, height);\n    return rect;\n}\nexport function getBoundingRect(text, font, textAlign, textBaseline) {\n    var textLines = ((text || '') + '').split('\\n');\n    var len = textLines.length;\n    if (len === 1) {\n        return innerGetBoundingRect(textLines[0], font, textAlign, textBaseline);\n    }\n    else {\n        var uniondRect = new BoundingRect(0, 0, 0, 0);\n        for (var i = 0; i < textLines.length; i++) {\n            var rect = innerGetBoundingRect(textLines[i], font, textAlign, textBaseline);\n            i === 0 ? uniondRect.copy(rect) : uniondRect.union(rect);\n        }\n        return uniondRect;\n    }\n}\nexport function adjustTextX(x, width, textAlign) {\n    if (textAlign === 'right') {\n        x -= width;\n    }\n    else if (textAlign === 'center') {\n        x -= width / 2;\n    }\n    return x;\n}\nexport function adjustTextY(y, height, verticalAlign) {\n    if (verticalAlign === 'middle') {\n        y -= height / 2;\n    }\n    else if (verticalAlign === 'bottom') {\n        y -= height;\n    }\n    return y;\n}\nexport function getLineHeight(font) {\n    return getWidth('', font);\n}\nexport function measureText(text, font) {\n    return methods.measureText(text, font);\n}\nexport function parsePercent(value, maxValue) {\n    if (typeof value === 'string') {\n        if (value.lastIndexOf('%') >= 0) {\n            return parseFloat(value) / 100 * maxValue;\n        }\n        return parseFloat(value);\n    }\n    return value;\n}\nexport function calculateTextPosition(out, opts, rect) {\n    var textPosition = opts.position || 'inside';\n    var distance = opts.distance != null ? opts.distance : 5;\n    var height = rect.height;\n    var width = rect.width;\n    var halfHeight = height / 2;\n    var x = rect.x;\n    var y = rect.y;\n    var textAlign = 'left';\n    var textVerticalAlign = 'top';\n    if (textPosition instanceof Array) {\n        x += parsePercent(textPosition[0], rect.width);\n        y += parsePercent(textPosition[1], rect.height);\n        textAlign = null;\n        textVerticalAlign = null;\n    }\n    else {\n        switch (textPosition) {\n            case 'left':\n                x -= distance;\n                y += halfHeight;\n                textAlign = 'right';\n                textVerticalAlign = 'middle';\n                break;\n            case 'right':\n                x += distance + width;\n                y += halfHeight;\n                textVerticalAlign = 'middle';\n                break;\n            case 'top':\n                x += width / 2;\n                y -= distance;\n                textAlign = 'center';\n                textVerticalAlign = 'bottom';\n                break;\n            case 'bottom':\n                x += width / 2;\n                y += height + distance;\n                textAlign = 'center';\n                break;\n            case 'inside':\n                x += width / 2;\n                y += halfHeight;\n                textAlign = 'center';\n                textVerticalAlign = 'middle';\n                break;\n            case 'insideLeft':\n                x += distance;\n                y += halfHeight;\n                textVerticalAlign = 'middle';\n                break;\n            case 'insideRight':\n                x += width - distance;\n                y += halfHeight;\n                textAlign = 'right';\n                textVerticalAlign = 'middle';\n                break;\n            case 'insideTop':\n                x += width / 2;\n                y += distance;\n                textAlign = 'center';\n                break;\n            case 'insideBottom':\n                x += width / 2;\n                y += height - distance;\n                textAlign = 'center';\n                textVerticalAlign = 'bottom';\n                break;\n            case 'insideTopLeft':\n                x += distance;\n                y += distance;\n                break;\n            case 'insideTopRight':\n                x += width - distance;\n                y += distance;\n                textAlign = 'right';\n                break;\n            case 'insideBottomLeft':\n                x += distance;\n                y += height - distance;\n                textVerticalAlign = 'bottom';\n                break;\n            case 'insideBottomRight':\n                x += width - distance;\n                y += height - distance;\n                textAlign = 'right';\n                textVerticalAlign = 'bottom';\n                break;\n        }\n    }\n    out = out || {};\n    out.x = x;\n    out.y = y;\n    out.align = textAlign;\n    out.verticalAlign = textVerticalAlign;\n    return out;\n}\n","var DEFAULT_MIN_MERGE = 32;\nvar DEFAULT_MIN_GALLOPING = 7;\nvar DEFAULT_TMP_STORAGE_LENGTH = 256;\nfunction minRunLength(n) {\n    var r = 0;\n    while (n >= DEFAULT_MIN_MERGE) {\n        r |= n & 1;\n        n >>= 1;\n    }\n    return n + r;\n}\nfunction makeAscendingRun(array, lo, hi, compare) {\n    var runHi = lo + 1;\n    if (runHi === hi) {\n        return 1;\n    }\n    if (compare(array[runHi++], array[lo]) < 0) {\n        while (runHi < hi && compare(array[runHi], array[runHi - 1]) < 0) {\n            runHi++;\n        }\n        reverseRun(array, lo, runHi);\n    }\n    else {\n        while (runHi < hi && compare(array[runHi], array[runHi - 1]) >= 0) {\n            runHi++;\n        }\n    }\n    return runHi - lo;\n}\nfunction reverseRun(array, lo, hi) {\n    hi--;\n    while (lo < hi) {\n        var t = array[lo];\n        array[lo++] = array[hi];\n        array[hi--] = t;\n    }\n}\nfunction binaryInsertionSort(array, lo, hi, start, compare) {\n    if (start === lo) {\n        start++;\n    }\n    for (; start < hi; start++) {\n        var pivot = array[start];\n        var left = lo;\n        var right = start;\n        var mid;\n        while (left < right) {\n            mid = left + right >>> 1;\n            if (compare(pivot, array[mid]) < 0) {\n                right = mid;\n            }\n            else {\n                left = mid + 1;\n            }\n        }\n        var n = start - left;\n        switch (n) {\n            case 3:\n                array[left + 3] = array[left + 2];\n            case 2:\n                array[left + 2] = array[left + 1];\n            case 1:\n                array[left + 1] = array[left];\n                break;\n            default:\n                while (n > 0) {\n                    array[left + n] = array[left + n - 1];\n                    n--;\n                }\n        }\n        array[left] = pivot;\n    }\n}\nfunction gallopLeft(value, array, start, length, hint, compare) {\n    var lastOffset = 0;\n    var maxOffset = 0;\n    var offset = 1;\n    if (compare(value, array[start + hint]) > 0) {\n        maxOffset = length - hint;\n        while (offset < maxOffset && compare(value, array[start + hint + offset]) > 0) {\n            lastOffset = offset;\n            offset = (offset << 1) + 1;\n            if (offset <= 0) {\n                offset = maxOffset;\n            }\n        }\n        if (offset > maxOffset) {\n            offset = maxOffset;\n        }\n        lastOffset += hint;\n        offset += hint;\n    }\n    else {\n        maxOffset = hint + 1;\n        while (offset < maxOffset && compare(value, array[start + hint - offset]) <= 0) {\n            lastOffset = offset;\n            offset = (offset << 1) + 1;\n            if (offset <= 0) {\n                offset = maxOffset;\n            }\n        }\n        if (offset > maxOffset) {\n            offset = maxOffset;\n        }\n        var tmp = lastOffset;\n        lastOffset = hint - offset;\n        offset = hint - tmp;\n    }\n    lastOffset++;\n    while (lastOffset < offset) {\n        var m = lastOffset + (offset - lastOffset >>> 1);\n        if (compare(value, array[start + m]) > 0) {\n            lastOffset = m + 1;\n        }\n        else {\n            offset = m;\n        }\n    }\n    return offset;\n}\nfunction gallopRight(value, array, start, length, hint, compare) {\n    var lastOffset = 0;\n    var maxOffset = 0;\n    var offset = 1;\n    if (compare(value, array[start + hint]) < 0) {\n        maxOffset = hint + 1;\n        while (offset < maxOffset && compare(value, array[start + hint - offset]) < 0) {\n            lastOffset = offset;\n            offset = (offset << 1) + 1;\n            if (offset <= 0) {\n                offset = maxOffset;\n            }\n        }\n        if (offset > maxOffset) {\n            offset = maxOffset;\n        }\n        var tmp = lastOffset;\n        lastOffset = hint - offset;\n        offset = hint - tmp;\n    }\n    else {\n        maxOffset = length - hint;\n        while (offset < maxOffset && compare(value, array[start + hint + offset]) >= 0) {\n            lastOffset = offset;\n            offset = (offset << 1) + 1;\n            if (offset <= 0) {\n                offset = maxOffset;\n            }\n        }\n        if (offset > maxOffset) {\n            offset = maxOffset;\n        }\n        lastOffset += hint;\n        offset += hint;\n    }\n    lastOffset++;\n    while (lastOffset < offset) {\n        var m = lastOffset + (offset - lastOffset >>> 1);\n        if (compare(value, array[start + m]) < 0) {\n            offset = m;\n        }\n        else {\n            lastOffset = m + 1;\n        }\n    }\n    return offset;\n}\nfunction TimSort(array, compare) {\n    var minGallop = DEFAULT_MIN_GALLOPING;\n    var length = 0;\n    var tmpStorageLength = DEFAULT_TMP_STORAGE_LENGTH;\n    var stackLength = 0;\n    var runStart;\n    var runLength;\n    var stackSize = 0;\n    length = array.length;\n    if (length < 2 * DEFAULT_TMP_STORAGE_LENGTH) {\n        tmpStorageLength = length >>> 1;\n    }\n    var tmp = [];\n    stackLength = length < 120 ? 5 : length < 1542 ? 10 : length < 119151 ? 19 : 40;\n    runStart = [];\n    runLength = [];\n    function pushRun(_runStart, _runLength) {\n        runStart[stackSize] = _runStart;\n        runLength[stackSize] = _runLength;\n        stackSize += 1;\n    }\n    function mergeRuns() {\n        while (stackSize > 1) {\n            var n = stackSize - 2;\n            if ((n >= 1 && runLength[n - 1] <= runLength[n] + runLength[n + 1])\n                || (n >= 2 && runLength[n - 2] <= runLength[n] + runLength[n - 1])) {\n                if (runLength[n - 1] < runLength[n + 1]) {\n                    n--;\n                }\n            }\n            else if (runLength[n] > runLength[n + 1]) {\n                break;\n            }\n            mergeAt(n);\n        }\n    }\n    function forceMergeRuns() {\n        while (stackSize > 1) {\n            var n = stackSize - 2;\n            if (n > 0 && runLength[n - 1] < runLength[n + 1]) {\n                n--;\n            }\n            mergeAt(n);\n        }\n    }\n    function mergeAt(i) {\n        var start1 = runStart[i];\n        var length1 = runLength[i];\n        var start2 = runStart[i + 1];\n        var length2 = runLength[i + 1];\n        runLength[i] = length1 + length2;\n        if (i === stackSize - 3) {\n            runStart[i + 1] = runStart[i + 2];\n            runLength[i + 1] = runLength[i + 2];\n        }\n        stackSize--;\n        var k = gallopRight(array[start2], array, start1, length1, 0, compare);\n        start1 += k;\n        length1 -= k;\n        if (length1 === 0) {\n            return;\n        }\n        length2 = gallopLeft(array[start1 + length1 - 1], array, start2, length2, length2 - 1, compare);\n        if (length2 === 0) {\n            return;\n        }\n        if (length1 <= length2) {\n            mergeLow(start1, length1, start2, length2);\n        }\n        else {\n            mergeHigh(start1, length1, start2, length2);\n        }\n    }\n    function mergeLow(start1, length1, start2, length2) {\n        var i = 0;\n        for (i = 0; i < length1; i++) {\n            tmp[i] = array[start1 + i];\n        }\n        var cursor1 = 0;\n        var cursor2 = start2;\n        var dest = start1;\n        array[dest++] = array[cursor2++];\n        if (--length2 === 0) {\n            for (i = 0; i < length1; i++) {\n                array[dest + i] = tmp[cursor1 + i];\n            }\n            return;\n        }\n        if (length1 === 1) {\n            for (i = 0; i < length2; i++) {\n                array[dest + i] = array[cursor2 + i];\n            }\n            array[dest + length2] = tmp[cursor1];\n            return;\n        }\n        var _minGallop = minGallop;\n        var count1;\n        var count2;\n        var exit;\n        while (1) {\n            count1 = 0;\n            count2 = 0;\n            exit = false;\n            do {\n                if (compare(array[cursor2], tmp[cursor1]) < 0) {\n                    array[dest++] = array[cursor2++];\n                    count2++;\n                    count1 = 0;\n                    if (--length2 === 0) {\n                        exit = true;\n                        break;\n                    }\n                }\n                else {\n                    array[dest++] = tmp[cursor1++];\n                    count1++;\n                    count2 = 0;\n                    if (--length1 === 1) {\n                        exit = true;\n                        break;\n                    }\n                }\n            } while ((count1 | count2) < _minGallop);\n            if (exit) {\n                break;\n            }\n            do {\n                count1 = gallopRight(array[cursor2], tmp, cursor1, length1, 0, compare);\n                if (count1 !== 0) {\n                    for (i = 0; i < count1; i++) {\n                        array[dest + i] = tmp[cursor1 + i];\n                    }\n                    dest += count1;\n                    cursor1 += count1;\n                    length1 -= count1;\n                    if (length1 <= 1) {\n                        exit = true;\n                        break;\n                    }\n                }\n                array[dest++] = array[cursor2++];\n                if (--length2 === 0) {\n                    exit = true;\n                    break;\n                }\n                count2 = gallopLeft(tmp[cursor1], array, cursor2, length2, 0, compare);\n                if (count2 !== 0) {\n                    for (i = 0; i < count2; i++) {\n                        array[dest + i] = array[cursor2 + i];\n                    }\n                    dest += count2;\n                    cursor2 += count2;\n                    length2 -= count2;\n                    if (length2 === 0) {\n                        exit = true;\n                        break;\n                    }\n                }\n                array[dest++] = tmp[cursor1++];\n                if (--length1 === 1) {\n                    exit = true;\n                    break;\n                }\n                _minGallop--;\n            } while (count1 >= DEFAULT_MIN_GALLOPING || count2 >= DEFAULT_MIN_GALLOPING);\n            if (exit) {\n                break;\n            }\n            if (_minGallop < 0) {\n                _minGallop = 0;\n            }\n            _minGallop += 2;\n        }\n        minGallop = _minGallop;\n        minGallop < 1 && (minGallop = 1);\n        if (length1 === 1) {\n            for (i = 0; i < length2; i++) {\n                array[dest + i] = array[cursor2 + i];\n            }\n            array[dest + length2] = tmp[cursor1];\n        }\n        else if (length1 === 0) {\n            throw new Error();\n        }\n        else {\n            for (i = 0; i < length1; i++) {\n                array[dest + i] = tmp[cursor1 + i];\n            }\n        }\n    }\n    function mergeHigh(start1, length1, start2, length2) {\n        var i = 0;\n        for (i = 0; i < length2; i++) {\n            tmp[i] = array[start2 + i];\n        }\n        var cursor1 = start1 + length1 - 1;\n        var cursor2 = length2 - 1;\n        var dest = start2 + length2 - 1;\n        var customCursor = 0;\n        var customDest = 0;\n        array[dest--] = array[cursor1--];\n        if (--length1 === 0) {\n            customCursor = dest - (length2 - 1);\n            for (i = 0; i < length2; i++) {\n                array[customCursor + i] = tmp[i];\n            }\n            return;\n        }\n        if (length2 === 1) {\n            dest -= length1;\n            cursor1 -= length1;\n            customDest = dest + 1;\n            customCursor = cursor1 + 1;\n            for (i = length1 - 1; i >= 0; i--) {\n                array[customDest + i] = array[customCursor + i];\n            }\n            array[dest] = tmp[cursor2];\n            return;\n        }\n        var _minGallop = minGallop;\n        while (true) {\n            var count1 = 0;\n            var count2 = 0;\n            var exit = false;\n            do {\n                if (compare(tmp[cursor2], array[cursor1]) < 0) {\n                    array[dest--] = array[cursor1--];\n                    count1++;\n                    count2 = 0;\n                    if (--length1 === 0) {\n                        exit = true;\n                        break;\n                    }\n                }\n                else {\n                    array[dest--] = tmp[cursor2--];\n                    count2++;\n                    count1 = 0;\n                    if (--length2 === 1) {\n                        exit = true;\n                        break;\n                    }\n                }\n            } while ((count1 | count2) < _minGallop);\n            if (exit) {\n                break;\n            }\n            do {\n                count1 = length1 - gallopRight(tmp[cursor2], array, start1, length1, length1 - 1, compare);\n                if (count1 !== 0) {\n                    dest -= count1;\n                    cursor1 -= count1;\n                    length1 -= count1;\n                    customDest = dest + 1;\n                    customCursor = cursor1 + 1;\n                    for (i = count1 - 1; i >= 0; i--) {\n                        array[customDest + i] = array[customCursor + i];\n                    }\n                    if (length1 === 0) {\n                        exit = true;\n                        break;\n                    }\n                }\n                array[dest--] = tmp[cursor2--];\n                if (--length2 === 1) {\n                    exit = true;\n                    break;\n                }\n                count2 = length2 - gallopLeft(array[cursor1], tmp, 0, length2, length2 - 1, compare);\n                if (count2 !== 0) {\n                    dest -= count2;\n                    cursor2 -= count2;\n                    length2 -= count2;\n                    customDest = dest + 1;\n                    customCursor = cursor2 + 1;\n                    for (i = 0; i < count2; i++) {\n                        array[customDest + i] = tmp[customCursor + i];\n                    }\n                    if (length2 <= 1) {\n                        exit = true;\n                        break;\n                    }\n                }\n                array[dest--] = array[cursor1--];\n                if (--length1 === 0) {\n                    exit = true;\n                    break;\n                }\n                _minGallop--;\n            } while (count1 >= DEFAULT_MIN_GALLOPING || count2 >= DEFAULT_MIN_GALLOPING);\n            if (exit) {\n                break;\n            }\n            if (_minGallop < 0) {\n                _minGallop = 0;\n            }\n            _minGallop += 2;\n        }\n        minGallop = _minGallop;\n        if (minGallop < 1) {\n            minGallop = 1;\n        }\n        if (length2 === 1) {\n            dest -= length1;\n            cursor1 -= length1;\n            customDest = dest + 1;\n            customCursor = cursor1 + 1;\n            for (i = length1 - 1; i >= 0; i--) {\n                array[customDest + i] = array[customCursor + i];\n            }\n            array[dest] = tmp[cursor2];\n        }\n        else if (length2 === 0) {\n            throw new Error();\n        }\n        else {\n            customCursor = dest - (length2 - 1);\n            for (i = 0; i < length2; i++) {\n                array[customCursor + i] = tmp[i];\n            }\n        }\n    }\n    return {\n        mergeRuns: mergeRuns,\n        forceMergeRuns: forceMergeRuns,\n        pushRun: pushRun\n    };\n}\nexport default function sort(array, compare, lo, hi) {\n    if (!lo) {\n        lo = 0;\n    }\n    if (!hi) {\n        hi = array.length;\n    }\n    var remaining = hi - lo;\n    if (remaining < 2) {\n        return;\n    }\n    var runLength = 0;\n    if (remaining < DEFAULT_MIN_MERGE) {\n        runLength = makeAscendingRun(array, lo, hi, compare);\n        binaryInsertionSort(array, lo, hi, lo + runLength, compare);\n        return;\n    }\n    var ts = TimSort(array, compare);\n    var minRun = minRunLength(remaining);\n    do {\n        runLength = makeAscendingRun(array, lo, hi, compare);\n        if (runLength < minRun) {\n            var force = remaining;\n            if (force > minRun) {\n                force = minRun;\n            }\n            binaryInsertionSort(array, lo, lo + force, lo + runLength, compare);\n            runLength = force;\n        }\n        ts.pushRun(lo, runLength);\n        ts.mergeRuns();\n        remaining -= runLength;\n        lo += runLength;\n    } while (remaining !== 0);\n    ts.forceMergeRuns();\n}\n","var requestAnimationFrame;\nrequestAnimationFrame = (typeof window !== 'undefined'\n    && ((window.requestAnimationFrame && window.requestAnimationFrame.bind(window))\n        || (window.msRequestAnimationFrame && window.msRequestAnimationFrame.bind(window))\n        || window.mozRequestAnimationFrame\n        || window.webkitRequestAnimationFrame)) || function (func) {\n    return setTimeout(func, 16);\n};\nexport default requestAnimationFrame;\n","import { isArray, isNumber } from '../../core/util';\nexport function normalizeLineDash(lineType, lineWidth) {\n    if (!lineType || lineType === 'solid' || !(lineWidth > 0)) {\n        return null;\n    }\n    lineWidth = lineWidth || 1;\n    return lineType === 'dashed'\n        ? [4 * lineWidth, 2 * lineWidth]\n        : lineType === 'dotted'\n            ? [lineWidth]\n            : isNumber(lineType)\n                ? [lineType] : isArray(lineType) ? lineType : null;\n}\n","var LN2 = Math.log(2);\nfunction determinant(rows, rank, rowStart, rowMask, colMask, detCache) {\n    var cacheKey = rowMask + '-' + colMask;\n    var fullRank = rows.length;\n    if (detCache.hasOwnProperty(cacheKey)) {\n        return detCache[cacheKey];\n    }\n    if (rank === 1) {\n        var colStart = Math.round(Math.log(((1 << fullRank) - 1) & ~colMask) / LN2);\n        return rows[rowStart][colStart];\n    }\n    var subRowMask = rowMask | (1 << rowStart);\n    var subRowStart = rowStart + 1;\n    while (rowMask & (1 << subRowStart)) {\n        subRowStart++;\n    }\n    var sum = 0;\n    for (var j = 0, colLocalIdx = 0; j < fullRank; j++) {\n        var colTag = 1 << j;\n        if (!(colTag & colMask)) {\n            sum += (colLocalIdx % 2 ? -1 : 1) * rows[rowStart][j]\n                * determinant(rows, rank - 1, subRowStart, subRowMask, colMask | colTag, detCache);\n            colLocalIdx++;\n        }\n    }\n    detCache[cacheKey] = sum;\n    return sum;\n}\nexport function buildTransformer(src, dest) {\n    var mA = [\n        [src[0], src[1], 1, 0, 0, 0, -dest[0] * src[0], -dest[0] * src[1]],\n        [0, 0, 0, src[0], src[1], 1, -dest[1] * src[0], -dest[1] * src[1]],\n        [src[2], src[3], 1, 0, 0, 0, -dest[2] * src[2], -dest[2] * src[3]],\n        [0, 0, 0, src[2], src[3], 1, -dest[3] * src[2], -dest[3] * src[3]],\n        [src[4], src[5], 1, 0, 0, 0, -dest[4] * src[4], -dest[4] * src[5]],\n        [0, 0, 0, src[4], src[5], 1, -dest[5] * src[4], -dest[5] * src[5]],\n        [src[6], src[7], 1, 0, 0, 0, -dest[6] * src[6], -dest[6] * src[7]],\n        [0, 0, 0, src[6], src[7], 1, -dest[7] * src[6], -dest[7] * src[7]]\n    ];\n    var detCache = {};\n    var det = determinant(mA, 8, 0, 0, 0, detCache);\n    if (det === 0) {\n        return;\n    }\n    var vh = [];\n    for (var i = 0; i < 8; i++) {\n        for (var j = 0; j < 8; j++) {\n            vh[j] == null && (vh[j] = 0);\n            vh[j] += ((i + j) % 2 ? -1 : 1)\n                * determinant(mA, 7, i === 0 ? 1 : 0, 1 << i, 1 << j, detCache)\n                / det * dest[i];\n        }\n    }\n    return function (out, srcPointX, srcPointY) {\n        var pk = srcPointX * vh[6] + srcPointY * vh[7] + 1;\n        out[0] = (srcPointX * vh[0] + srcPointY * vh[1] + vh[2]) / pk;\n        out[1] = (srcPointX * vh[3] + srcPointY * vh[4] + vh[5]) / pk;\n    };\n}\n","import env from './env';\nimport { buildTransformer } from './fourPointsTransform';\nvar EVENT_SAVED_PROP = '___zrEVENTSAVED';\nvar _calcOut = [];\nexport function transformLocalCoord(out, elFrom, elTarget, inX, inY) {\n    return transformCoordWithViewport(_calcOut, elFrom, inX, inY, true)\n        && transformCoordWithViewport(out, elTarget, _calcOut[0], _calcOut[1]);\n}\nexport function transformCoordWithViewport(out, el, inX, inY, inverse) {\n    if (el.getBoundingClientRect && env.domSupported && !isCanvasEl(el)) {\n        var saved = el[EVENT_SAVED_PROP] || (el[EVENT_SAVED_PROP] = {});\n        var markers = prepareCoordMarkers(el, saved);\n        var transformer = preparePointerTransformer(markers, saved, inverse);\n        if (transformer) {\n            transformer(out, inX, inY);\n            return true;\n        }\n    }\n    return false;\n}\nfunction prepareCoordMarkers(el, saved) {\n    var markers = saved.markers;\n    if (markers) {\n        return markers;\n    }\n    markers = saved.markers = [];\n    var propLR = ['left', 'right'];\n    var propTB = ['top', 'bottom'];\n    for (var i = 0; i < 4; i++) {\n        var marker = document.createElement('div');\n        var stl = marker.style;\n        var idxLR = i % 2;\n        var idxTB = (i >> 1) % 2;\n        stl.cssText = [\n            'position: absolute',\n            'visibility: hidden',\n            'padding: 0',\n            'margin: 0',\n            'border-width: 0',\n            'user-select: none',\n            'width:0',\n            'height:0',\n            propLR[idxLR] + ':0',\n            propTB[idxTB] + ':0',\n            propLR[1 - idxLR] + ':auto',\n            propTB[1 - idxTB] + ':auto',\n            ''\n        ].join('!important;');\n        el.appendChild(marker);\n        markers.push(marker);\n    }\n    return markers;\n}\nfunction preparePointerTransformer(markers, saved, inverse) {\n    var transformerName = inverse ? 'invTrans' : 'trans';\n    var transformer = saved[transformerName];\n    var oldSrcCoords = saved.srcCoords;\n    var srcCoords = [];\n    var destCoords = [];\n    var oldCoordTheSame = true;\n    for (var i = 0; i < 4; i++) {\n        var rect = markers[i].getBoundingClientRect();\n        var ii = 2 * i;\n        var x = rect.left;\n        var y = rect.top;\n        srcCoords.push(x, y);\n        oldCoordTheSame = oldCoordTheSame && oldSrcCoords && x === oldSrcCoords[ii] && y === oldSrcCoords[ii + 1];\n        destCoords.push(markers[i].offsetLeft, markers[i].offsetTop);\n    }\n    return (oldCoordTheSame && transformer)\n        ? transformer\n        : (saved.srcCoords = srcCoords,\n            saved[transformerName] = inverse\n                ? buildTransformer(destCoords, srcCoords)\n                : buildTransformer(srcCoords, destCoords));\n}\nexport function isCanvasEl(el) {\n    return el.nodeName.toUpperCase() === 'CANVAS';\n}\n","import * as curve from '../core/curve';\nexport function containStroke(x0, y0, x1, y1, x2, y2, x3, y3, lineWidth, x, y) {\n    if (lineWidth === 0) {\n        return false;\n    }\n    var _l = lineWidth;\n    if ((y > y0 + _l && y > y1 + _l && y > y2 + _l && y > y3 + _l)\n        || (y < y0 - _l && y < y1 - _l && y < y2 - _l && y < y3 - _l)\n        || (x > x0 + _l && x > x1 + _l && x > x2 + _l && x > x3 + _l)\n        || (x < x0 - _l && x < x1 - _l && x < x2 - _l && x < x3 - _l)) {\n        return false;\n    }\n    var d = curve.cubicProjectPoint(x0, y0, x1, y1, x2, y2, x3, y3, x, y, null);\n    return d <= _l / 2;\n}\n","import { normalizeRadian } from './util';\nvar PI2 = Math.PI * 2;\nexport function containStroke(cx, cy, r, startAngle, endAngle, anticlockwise, lineWidth, x, y) {\n    if (lineWidth === 0) {\n        return false;\n    }\n    var _l = lineWidth;\n    x -= cx;\n    y -= cy;\n    var d = Math.sqrt(x * x + y * y);\n    if ((d - _l > r) || (d + _l < r)) {\n        return false;\n    }\n    if (Math.abs(startAngle - endAngle) % PI2 < 1e-4) {\n        return true;\n    }\n    if (anticlockwise) {\n        var tmp = startAngle;\n        startAngle = normalizeRadian(endAngle);\n        endAngle = normalizeRadian(tmp);\n    }\n    else {\n        startAngle = normalizeRadian(startAngle);\n        endAngle = normalizeRadian(endAngle);\n    }\n    if (startAngle > endAngle) {\n        endAngle += PI2;\n    }\n    var angle = Math.atan2(y, x);\n    if (angle < 0) {\n        angle += PI2;\n    }\n    return (angle >= startAngle && angle <= endAngle)\n        || (angle + PI2 >= startAngle && angle + PI2 <= endAngle);\n}\n","import PathProxy from '../core/PathProxy';\nimport * as line from './line';\nimport * as cubic from './cubic';\nimport * as quadratic from './quadratic';\nimport * as arc from './arc';\nimport * as curve from '../core/curve';\nimport windingLine from './windingLine';\nvar CMD = PathProxy.CMD;\nvar PI2 = Math.PI * 2;\nvar EPSILON = 1e-4;\nfunction isAroundEqual(a, b) {\n    return Math.abs(a - b) < EPSILON;\n}\nvar roots = [-1, -1, -1];\nvar extrema = [-1, -1];\nfunction swapExtrema() {\n    var tmp = extrema[0];\n    extrema[0] = extrema[1];\n    extrema[1] = tmp;\n}\nfunction windingCubic(x0, y0, x1, y1, x2, y2, x3, y3, x, y) {\n    if ((y > y0 && y > y1 && y > y2 && y > y3)\n        || (y < y0 && y < y1 && y < y2 && y < y3)) {\n        return 0;\n    }\n    var nRoots = curve.cubicRootAt(y0, y1, y2, y3, y, roots);\n    if (nRoots === 0) {\n        return 0;\n    }\n    else {\n        var w = 0;\n        var nExtrema = -1;\n        var y0_ = void 0;\n        var y1_ = void 0;\n        for (var i = 0; i < nRoots; i++) {\n            var t = roots[i];\n            var unit = (t === 0 || t === 1) ? 0.5 : 1;\n            var x_ = curve.cubicAt(x0, x1, x2, x3, t);\n            if (x_ < x) {\n                continue;\n            }\n            if (nExtrema < 0) {\n                nExtrema = curve.cubicExtrema(y0, y1, y2, y3, extrema);\n                if (extrema[1] < extrema[0] && nExtrema > 1) {\n                    swapExtrema();\n                }\n                y0_ = curve.cubicAt(y0, y1, y2, y3, extrema[0]);\n                if (nExtrema > 1) {\n                    y1_ = curve.cubicAt(y0, y1, y2, y3, extrema[1]);\n                }\n            }\n            if (nExtrema === 2) {\n                if (t < extrema[0]) {\n                    w += y0_ < y0 ? unit : -unit;\n                }\n                else if (t < extrema[1]) {\n                    w += y1_ < y0_ ? unit : -unit;\n                }\n                else {\n                    w += y3 < y1_ ? unit : -unit;\n                }\n            }\n            else {\n                if (t < extrema[0]) {\n                    w += y0_ < y0 ? unit : -unit;\n                }\n                else {\n                    w += y3 < y0_ ? unit : -unit;\n                }\n            }\n        }\n        return w;\n    }\n}\nfunction windingQuadratic(x0, y0, x1, y1, x2, y2, x, y) {\n    if ((y > y0 && y > y1 && y > y2)\n        || (y < y0 && y < y1 && y < y2)) {\n        return 0;\n    }\n    var nRoots = curve.quadraticRootAt(y0, y1, y2, y, roots);\n    if (nRoots === 0) {\n        return 0;\n    }\n    else {\n        var t = curve.quadraticExtremum(y0, y1, y2);\n        if (t >= 0 && t <= 1) {\n            var w = 0;\n            var y_ = curve.quadraticAt(y0, y1, y2, t);\n            for (var i = 0; i < nRoots; i++) {\n                var unit = (roots[i] === 0 || roots[i] === 1) ? 0.5 : 1;\n                var x_ = curve.quadraticAt(x0, x1, x2, roots[i]);\n                if (x_ < x) {\n                    continue;\n                }\n                if (roots[i] < t) {\n                    w += y_ < y0 ? unit : -unit;\n                }\n                else {\n                    w += y2 < y_ ? unit : -unit;\n                }\n            }\n            return w;\n        }\n        else {\n            var unit = (roots[0] === 0 || roots[0] === 1) ? 0.5 : 1;\n            var x_ = curve.quadraticAt(x0, x1, x2, roots[0]);\n            if (x_ < x) {\n                return 0;\n            }\n            return y2 < y0 ? unit : -unit;\n        }\n    }\n}\nfunction windingArc(cx, cy, r, startAngle, endAngle, anticlockwise, x, y) {\n    y -= cy;\n    if (y > r || y < -r) {\n        return 0;\n    }\n    var tmp = Math.sqrt(r * r - y * y);\n    roots[0] = -tmp;\n    roots[1] = tmp;\n    var dTheta = Math.abs(startAngle - endAngle);\n    if (dTheta < 1e-4) {\n        return 0;\n    }\n    if (dTheta >= PI2 - 1e-4) {\n        startAngle = 0;\n        endAngle = PI2;\n        var dir = anticlockwise ? 1 : -1;\n        if (x >= roots[0] + cx && x <= roots[1] + cx) {\n            return dir;\n        }\n        else {\n            return 0;\n        }\n    }\n    if (startAngle > endAngle) {\n        var tmp_1 = startAngle;\n        startAngle = endAngle;\n        endAngle = tmp_1;\n    }\n    if (startAngle < 0) {\n        startAngle += PI2;\n        endAngle += PI2;\n    }\n    var w = 0;\n    for (var i = 0; i < 2; i++) {\n        var x_ = roots[i];\n        if (x_ + cx > x) {\n            var angle = Math.atan2(y, x_);\n            var dir = anticlockwise ? 1 : -1;\n            if (angle < 0) {\n                angle = PI2 + angle;\n            }\n            if ((angle >= startAngle && angle <= endAngle)\n                || (angle + PI2 >= startAngle && angle + PI2 <= endAngle)) {\n                if (angle > Math.PI / 2 && angle < Math.PI * 1.5) {\n                    dir = -dir;\n                }\n                w += dir;\n            }\n        }\n    }\n    return w;\n}\nfunction containPath(path, lineWidth, isStroke, x, y) {\n    var data = path.data;\n    var len = path.len();\n    var w = 0;\n    var xi = 0;\n    var yi = 0;\n    var x0 = 0;\n    var y0 = 0;\n    var x1;\n    var y1;\n    for (var i = 0; i < len;) {\n        var cmd = data[i++];\n        var isFirst = i === 1;\n        if (cmd === CMD.M && i > 1) {\n            if (!isStroke) {\n                w += windingLine(xi, yi, x0, y0, x, y);\n            }\n        }\n        if (isFirst) {\n            xi = data[i];\n            yi = data[i + 1];\n            x0 = xi;\n            y0 = yi;\n        }\n        switch (cmd) {\n            case CMD.M:\n                x0 = data[i++];\n                y0 = data[i++];\n                xi = x0;\n                yi = y0;\n                break;\n            case CMD.L:\n                if (isStroke) {\n                    if (line.containStroke(xi, yi, data[i], data[i + 1], lineWidth, x, y)) {\n                        return true;\n                    }\n                }\n                else {\n                    w += windingLine(xi, yi, data[i], data[i + 1], x, y) || 0;\n                }\n                xi = data[i++];\n                yi = data[i++];\n                break;\n            case CMD.C:\n                if (isStroke) {\n                    if (cubic.containStroke(xi, yi, data[i++], data[i++], data[i++], data[i++], data[i], data[i + 1], lineWidth, x, y)) {\n                        return true;\n                    }\n                }\n                else {\n                    w += windingCubic(xi, yi, data[i++], data[i++], data[i++], data[i++], data[i], data[i + 1], x, y) || 0;\n                }\n                xi = data[i++];\n                yi = data[i++];\n                break;\n            case CMD.Q:\n                if (isStroke) {\n                    if (quadratic.containStroke(xi, yi, data[i++], data[i++], data[i], data[i + 1], lineWidth, x, y)) {\n                        return true;\n                    }\n                }\n                else {\n                    w += windingQuadratic(xi, yi, data[i++], data[i++], data[i], data[i + 1], x, y) || 0;\n                }\n                xi = data[i++];\n                yi = data[i++];\n                break;\n            case CMD.A:\n                var cx = data[i++];\n                var cy = data[i++];\n                var rx = data[i++];\n                var ry = data[i++];\n                var theta = data[i++];\n                var dTheta = data[i++];\n                i += 1;\n                var anticlockwise = !!(1 - data[i++]);\n                x1 = Math.cos(theta) * rx + cx;\n                y1 = Math.sin(theta) * ry + cy;\n                if (!isFirst) {\n                    w += windingLine(xi, yi, x1, y1, x, y);\n                }\n                else {\n                    x0 = x1;\n                    y0 = y1;\n                }\n                var _x = (x - cx) * ry / rx + cx;\n                if (isStroke) {\n                    if (arc.containStroke(cx, cy, ry, theta, theta + dTheta, anticlockwise, lineWidth, _x, y)) {\n                        return true;\n                    }\n                }\n                else {\n                    w += windingArc(cx, cy, ry, theta, theta + dTheta, anticlockwise, _x, y);\n                }\n                xi = Math.cos(theta + dTheta) * rx + cx;\n                yi = Math.sin(theta + dTheta) * ry + cy;\n                break;\n            case CMD.R:\n                x0 = xi = data[i++];\n                y0 = yi = data[i++];\n                var width = data[i++];\n                var height = data[i++];\n                x1 = x0 + width;\n                y1 = y0 + height;\n                if (isStroke) {\n                    if (line.containStroke(x0, y0, x1, y0, lineWidth, x, y)\n                        || line.containStroke(x1, y0, x1, y1, lineWidth, x, y)\n                        || line.containStroke(x1, y1, x0, y1, lineWidth, x, y)\n                        || line.containStroke(x0, y1, x0, y0, lineWidth, x, y)) {\n                        return true;\n                    }\n                }\n                else {\n                    w += windingLine(x1, y0, x1, y1, x, y);\n                    w += windingLine(x0, y1, x0, y0, x, y);\n                }\n                break;\n            case CMD.Z:\n                if (isStroke) {\n                    if (line.containStroke(xi, yi, x0, y0, lineWidth, x, y)) {\n                        return true;\n                    }\n                }\n                else {\n                    w += windingLine(xi, yi, x0, y0, x, y);\n                }\n                xi = x0;\n                yi = y0;\n                break;\n        }\n    }\n    if (!isStroke && !isAroundEqual(yi, y0)) {\n        w += windingLine(xi, yi, x0, y0, x, y) || 0;\n    }\n    return w !== 0;\n}\nexport function contain(pathProxy, x, y) {\n    return containPath(pathProxy, 0, false, x, y);\n}\nexport function containStroke(pathProxy, lineWidth, x, y) {\n    return containPath(pathProxy, lineWidth, true, x, y);\n}\n","import { __extends } from \"tslib\";\nimport Displayable, { DEFAULT_COMMON_STYLE, DEFAULT_COMMON_ANIMATION_PROPS } from './Displayable';\nimport Element from '../Element';\nimport PathProxy from '../core/PathProxy';\nimport * as pathContain from '../contain/path';\nimport { defaults, keys, extend, clone, isString, createObject } from '../core/util';\nimport { lum } from '../tool/color';\nimport { DARK_LABEL_COLOR, LIGHT_LABEL_COLOR, DARK_MODE_THRESHOLD, LIGHTER_LABEL_COLOR } from '../config';\nexport var DEFAULT_PATH_STYLE = defaults({\n    fill: '#000',\n    stroke: null,\n    strokePercent: 1,\n    fillOpacity: 1,\n    strokeOpacity: 1,\n    lineDashOffset: 0,\n    lineWidth: 1,\n    lineCap: 'butt',\n    miterLimit: 10,\n    strokeNoScale: false,\n    strokeFirst: false\n}, DEFAULT_COMMON_STYLE);\nexport var DEFAULT_PATH_ANIMATION_PROPS = {\n    style: defaults({\n        fill: true,\n        stroke: true,\n        strokePercent: true,\n        fillOpacity: true,\n        strokeOpacity: true,\n        lineDashOffset: true,\n        lineWidth: true,\n        miterLimit: true\n    }, DEFAULT_COMMON_ANIMATION_PROPS.style)\n};\nvar pathCopyParams = [\n    'x', 'y', 'rotation', 'scaleX', 'scaleY', 'originX', 'originY', 'invisible',\n    'culling', 'z', 'z2', 'zlevel', 'parent'\n];\nvar Path = (function (_super) {\n    __extends(Path, _super);\n    function Path(opts) {\n        return _super.call(this, opts) || this;\n    }\n    Path.prototype.update = function () {\n        var _this = this;\n        _super.prototype.update.call(this);\n        var style = this.style;\n        if (style.decal) {\n            var decalEl = this._decalEl\n                = this._decalEl || new Path();\n            if (decalEl.buildPath === Path.prototype.buildPath) {\n                decalEl.buildPath = function (ctx) {\n                    _this.buildPath(ctx, _this.shape);\n                };\n            }\n            decalEl.silent = true;\n            var decalElStyle = decalEl.style;\n            for (var key in style) {\n                if (decalElStyle[key] !== style[key]) {\n                    decalElStyle[key] = style[key];\n                }\n            }\n            decalElStyle.fill = style.fill ? style.decal : null;\n            decalElStyle.decal = null;\n            decalElStyle.shadowColor = null;\n            style.strokeFirst && (decalElStyle.stroke = null);\n            for (var i = 0; i < pathCopyParams.length; ++i) {\n                decalEl[pathCopyParams[i]] = this[pathCopyParams[i]];\n            }\n            decalEl.__dirty |= Element.REDARAW_BIT;\n        }\n        else if (this._decalEl) {\n            this._decalEl = null;\n        }\n    };\n    Path.prototype.getDecalElement = function () {\n        return this._decalEl;\n    };\n    Path.prototype._init = function (props) {\n        var keysArr = keys(props);\n        this.shape = this.getDefaultShape();\n        var defaultStyle = this.getDefaultStyle();\n        if (defaultStyle) {\n            this.useStyle(defaultStyle);\n        }\n        for (var i = 0; i < keysArr.length; i++) {\n            var key = keysArr[i];\n            var value = props[key];\n            if (key === 'style') {\n                if (!this.style) {\n                    this.useStyle(value);\n                }\n                else {\n                    extend(this.style, value);\n                }\n            }\n            else if (key === 'shape') {\n                extend(this.shape, value);\n            }\n            else {\n                _super.prototype.attrKV.call(this, key, value);\n            }\n        }\n        if (!this.style) {\n            this.useStyle({});\n        }\n    };\n    Path.prototype.getDefaultStyle = function () {\n        return null;\n    };\n    Path.prototype.getDefaultShape = function () {\n        return {};\n    };\n    Path.prototype.canBeInsideText = function () {\n        return this.hasFill();\n    };\n    Path.prototype.getInsideTextFill = function () {\n        var pathFill = this.style.fill;\n        if (pathFill !== 'none') {\n            if (isString(pathFill)) {\n                var fillLum = lum(pathFill, 0);\n                if (fillLum > 0.5) {\n                    return DARK_LABEL_COLOR;\n                }\n                else if (fillLum > 0.2) {\n                    return LIGHTER_LABEL_COLOR;\n                }\n                return LIGHT_LABEL_COLOR;\n            }\n            else if (pathFill) {\n                return LIGHT_LABEL_COLOR;\n            }\n        }\n        return DARK_LABEL_COLOR;\n    };\n    Path.prototype.getInsideTextStroke = function (textFill) {\n        var pathFill = this.style.fill;\n        if (isString(pathFill)) {\n            var zr = this.__zr;\n            var isDarkMode = !!(zr && zr.isDarkMode());\n            var isDarkLabel = lum(textFill, 0) < DARK_MODE_THRESHOLD;\n            if (isDarkMode === isDarkLabel) {\n                return pathFill;\n            }\n        }\n    };\n    Path.prototype.buildPath = function (ctx, shapeCfg, inBundle) { };\n    Path.prototype.pathUpdated = function () {\n        this.__dirty &= ~Path.SHAPE_CHANGED_BIT;\n    };\n    Path.prototype.createPathProxy = function () {\n        this.path = new PathProxy(false);\n    };\n    Path.prototype.hasStroke = function () {\n        var style = this.style;\n        var stroke = style.stroke;\n        return !(stroke == null || stroke === 'none' || !(style.lineWidth > 0));\n    };\n    Path.prototype.hasFill = function () {\n        var style = this.style;\n        var fill = style.fill;\n        return fill != null && fill !== 'none';\n    };\n    Path.prototype.getBoundingRect = function () {\n        var rect = this._rect;\n        var style = this.style;\n        var needsUpdateRect = !rect;\n        if (needsUpdateRect) {\n            var firstInvoke = false;\n            if (!this.path) {\n                firstInvoke = true;\n                this.createPathProxy();\n            }\n            var path = this.path;\n            if (firstInvoke || (this.__dirty & Path.SHAPE_CHANGED_BIT)) {\n                path.beginPath();\n                this.buildPath(path, this.shape, false);\n                this.pathUpdated();\n            }\n            rect = path.getBoundingRect();\n        }\n        this._rect = rect;\n        if (this.hasStroke() && this.path && this.path.len() > 0) {\n            var rectWithStroke = this._rectWithStroke || (this._rectWithStroke = rect.clone());\n            if (this.__dirty || needsUpdateRect) {\n                rectWithStroke.copy(rect);\n                var lineScale = style.strokeNoScale ? this.getLineScale() : 1;\n                var w = style.lineWidth;\n                if (!this.hasFill()) {\n                    var strokeContainThreshold = this.strokeContainThreshold;\n                    w = Math.max(w, strokeContainThreshold == null ? 4 : strokeContainThreshold);\n                }\n                if (lineScale > 1e-10) {\n                    rectWithStroke.width += w / lineScale;\n                    rectWithStroke.height += w / lineScale;\n                    rectWithStroke.x -= w / lineScale / 2;\n                    rectWithStroke.y -= w / lineScale / 2;\n                }\n            }\n            return rectWithStroke;\n        }\n        return rect;\n    };\n    Path.prototype.contain = function (x, y) {\n        var localPos = this.transformCoordToLocal(x, y);\n        var rect = this.getBoundingRect();\n        var style = this.style;\n        x = localPos[0];\n        y = localPos[1];\n        if (rect.contain(x, y)) {\n            var pathProxy = this.path;\n            if (this.hasStroke()) {\n                var lineWidth = style.lineWidth;\n                var lineScale = style.strokeNoScale ? this.getLineScale() : 1;\n                if (lineScale > 1e-10) {\n                    if (!this.hasFill()) {\n                        lineWidth = Math.max(lineWidth, this.strokeContainThreshold);\n                    }\n                    if (pathContain.containStroke(pathProxy, lineWidth / lineScale, x, y)) {\n                        return true;\n                    }\n                }\n            }\n            if (this.hasFill()) {\n                return pathContain.contain(pathProxy, x, y);\n            }\n        }\n        return false;\n    };\n    Path.prototype.dirtyShape = function () {\n        this.__dirty |= Path.SHAPE_CHANGED_BIT;\n        if (this._rect) {\n            this._rect = null;\n        }\n        if (this._decalEl) {\n            this._decalEl.dirtyShape();\n        }\n        this.markRedraw();\n    };\n    Path.prototype.dirty = function () {\n        this.dirtyStyle();\n        this.dirtyShape();\n    };\n    Path.prototype.animateShape = function (loop) {\n        return this.animate('shape', loop);\n    };\n    Path.prototype.updateDuringAnimation = function (targetKey) {\n        if (targetKey === 'style') {\n            this.dirtyStyle();\n        }\n        else if (targetKey === 'shape') {\n            this.dirtyShape();\n        }\n        else {\n            this.markRedraw();\n        }\n    };\n    Path.prototype.attrKV = function (key, value) {\n        if (key === 'shape') {\n            this.setShape(value);\n        }\n        else {\n            _super.prototype.attrKV.call(this, key, value);\n        }\n    };\n    Path.prototype.setShape = function (keyOrObj, value) {\n        var shape = this.shape;\n        if (!shape) {\n            shape = this.shape = {};\n        }\n        if (typeof keyOrObj === 'string') {\n            shape[keyOrObj] = value;\n        }\n        else {\n            extend(shape, keyOrObj);\n        }\n        this.dirtyShape();\n        return this;\n    };\n    Path.prototype.shapeChanged = function () {\n        return !!(this.__dirty & Path.SHAPE_CHANGED_BIT);\n    };\n    Path.prototype.createStyle = function (obj) {\n        return createObject(DEFAULT_PATH_STYLE, obj);\n    };\n    Path.prototype._innerSaveToNormal = function (toState) {\n        _super.prototype._innerSaveToNormal.call(this, toState);\n        var normalState = this._normalState;\n        if (toState.shape && !normalState.shape) {\n            normalState.shape = extend({}, this.shape);\n        }\n    };\n    Path.prototype._applyStateObj = function (stateName, state, normalState, keepCurrentStates, transition, animationCfg) {\n        _super.prototype._applyStateObj.call(this, stateName, state, normalState, keepCurrentStates, transition, animationCfg);\n        var needsRestoreToNormal = !(state && keepCurrentStates);\n        var targetShape;\n        if (state && state.shape) {\n            if (transition) {\n                if (keepCurrentStates) {\n                    targetShape = state.shape;\n                }\n                else {\n                    targetShape = extend({}, normalState.shape);\n                    extend(targetShape, state.shape);\n                }\n            }\n            else {\n                targetShape = extend({}, keepCurrentStates ? this.shape : normalState.shape);\n                extend(targetShape, state.shape);\n            }\n        }\n        else if (needsRestoreToNormal) {\n            targetShape = normalState.shape;\n        }\n        if (targetShape) {\n            if (transition) {\n                this.shape = extend({}, this.shape);\n                var targetShapePrimaryProps = {};\n                var shapeKeys = keys(targetShape);\n                for (var i = 0; i < shapeKeys.length; i++) {\n                    var key = shapeKeys[i];\n                    if (typeof targetShape[key] === 'object') {\n                        this.shape[key] = targetShape[key];\n                    }\n                    else {\n                        targetShapePrimaryProps[key] = targetShape[key];\n                    }\n                }\n                this._transitionState(stateName, {\n                    shape: targetShapePrimaryProps\n                }, animationCfg);\n            }\n            else {\n                this.shape = targetShape;\n                this.dirtyShape();\n            }\n        }\n    };\n    Path.prototype._mergeStates = function (states) {\n        var mergedState = _super.prototype._mergeStates.call(this, states);\n        var mergedShape;\n        for (var i = 0; i < states.length; i++) {\n            var state = states[i];\n            if (state.shape) {\n                mergedShape = mergedShape || {};\n                this._mergeStyle(mergedShape, state.shape);\n            }\n        }\n        if (mergedShape) {\n            mergedState.shape = mergedShape;\n        }\n        return mergedState;\n    };\n    Path.prototype.getAnimationStyleProps = function () {\n        return DEFAULT_PATH_ANIMATION_PROPS;\n    };\n    Path.prototype.isZeroArea = function () {\n        return false;\n    };\n    Path.extend = function (defaultProps) {\n        var Sub = (function (_super) {\n            __extends(Sub, _super);\n            function Sub(opts) {\n                var _this = _super.call(this, opts) || this;\n                defaultProps.init && defaultProps.init.call(_this, opts);\n                return _this;\n            }\n            Sub.prototype.getDefaultStyle = function () {\n                return clone(defaultProps.style);\n            };\n            Sub.prototype.getDefaultShape = function () {\n                return clone(defaultProps.shape);\n            };\n            return Sub;\n        }(Path));\n        for (var key in defaultProps) {\n            if (typeof defaultProps[key] === 'function') {\n                Sub.prototype[key] = defaultProps[key];\n            }\n        }\n        return Sub;\n    };\n    Path.SHAPE_CHANGED_BIT = 4;\n    Path.initDefaultProps = (function () {\n        var pathProto = Path.prototype;\n        pathProto.type = 'path';\n        pathProto.strokeContainThreshold = 5;\n        pathProto.segmentIgnoreThreshold = 0;\n        pathProto.subPixelOptimize = false;\n        pathProto.autoBatch = false;\n        pathProto.__dirty = Element.REDARAW_BIT | Displayable.STYLE_CHANGED_BIT | Path.SHAPE_CHANGED_BIT;\n    })();\n    return Path;\n}(Displayable));\nexport default Path;\n","import LRU from '../core/LRU';\nvar kCSSColorTable = {\n    'transparent': [0, 0, 0, 0], 'aliceblue': [240, 248, 255, 1],\n    'antiquewhite': [250, 235, 215, 1], 'aqua': [0, 255, 255, 1],\n    'aquamarine': [127, 255, 212, 1], 'azure': [240, 255, 255, 1],\n    'beige': [245, 245, 220, 1], 'bisque': [255, 228, 196, 1],\n    'black': [0, 0, 0, 1], 'blanchedalmond': [255, 235, 205, 1],\n    'blue': [0, 0, 255, 1], 'blueviolet': [138, 43, 226, 1],\n    'brown': [165, 42, 42, 1], 'burlywood': [222, 184, 135, 1],\n    'cadetblue': [95, 158, 160, 1], 'chartreuse': [127, 255, 0, 1],\n    'chocolate': [210, 105, 30, 1], 'coral': [255, 127, 80, 1],\n    'cornflowerblue': [100, 149, 237, 1], 'cornsilk': [255, 248, 220, 1],\n    'crimson': [220, 20, 60, 1], 'cyan': [0, 255, 255, 1],\n    'darkblue': [0, 0, 139, 1], 'darkcyan': [0, 139, 139, 1],\n    'darkgoldenrod': [184, 134, 11, 1], 'darkgray': [169, 169, 169, 1],\n    'darkgreen': [0, 100, 0, 1], 'darkgrey': [169, 169, 169, 1],\n    'darkkhaki': [189, 183, 107, 1], 'darkmagenta': [139, 0, 139, 1],\n    'darkolivegreen': [85, 107, 47, 1], 'darkorange': [255, 140, 0, 1],\n    'darkorchid': [153, 50, 204, 1], 'darkred': [139, 0, 0, 1],\n    'darksalmon': [233, 150, 122, 1], 'darkseagreen': [143, 188, 143, 1],\n    'darkslateblue': [72, 61, 139, 1], 'darkslategray': [47, 79, 79, 1],\n    'darkslategrey': [47, 79, 79, 1], 'darkturquoise': [0, 206, 209, 1],\n    'darkviolet': [148, 0, 211, 1], 'deeppink': [255, 20, 147, 1],\n    'deepskyblue': [0, 191, 255, 1], 'dimgray': [105, 105, 105, 1],\n    'dimgrey': [105, 105, 105, 1], 'dodgerblue': [30, 144, 255, 1],\n    'firebrick': [178, 34, 34, 1], 'floralwhite': [255, 250, 240, 1],\n    'forestgreen': [34, 139, 34, 1], 'fuchsia': [255, 0, 255, 1],\n    'gainsboro': [220, 220, 220, 1], 'ghostwhite': [248, 248, 255, 1],\n    'gold': [255, 215, 0, 1], 'goldenrod': [218, 165, 32, 1],\n    'gray': [128, 128, 128, 1], 'green': [0, 128, 0, 1],\n    'greenyellow': [173, 255, 47, 1], 'grey': [128, 128, 128, 1],\n    'honeydew': [240, 255, 240, 1], 'hotpink': [255, 105, 180, 1],\n    'indianred': [205, 92, 92, 1], 'indigo': [75, 0, 130, 1],\n    'ivory': [255, 255, 240, 1], 'khaki': [240, 230, 140, 1],\n    'lavender': [230, 230, 250, 1], 'lavenderblush': [255, 240, 245, 1],\n    'lawngreen': [124, 252, 0, 1], 'lemonchiffon': [255, 250, 205, 1],\n    'lightblue': [173, 216, 230, 1], 'lightcoral': [240, 128, 128, 1],\n    'lightcyan': [224, 255, 255, 1], 'lightgoldenrodyellow': [250, 250, 210, 1],\n    'lightgray': [211, 211, 211, 1], 'lightgreen': [144, 238, 144, 1],\n    'lightgrey': [211, 211, 211, 1], 'lightpink': [255, 182, 193, 1],\n    'lightsalmon': [255, 160, 122, 1], 'lightseagreen': [32, 178, 170, 1],\n    'lightskyblue': [135, 206, 250, 1], 'lightslategray': [119, 136, 153, 1],\n    'lightslategrey': [119, 136, 153, 1], 'lightsteelblue': [176, 196, 222, 1],\n    'lightyellow': [255, 255, 224, 1], 'lime': [0, 255, 0, 1],\n    'limegreen': [50, 205, 50, 1], 'linen': [250, 240, 230, 1],\n    'magenta': [255, 0, 255, 1], 'maroon': [128, 0, 0, 1],\n    'mediumaquamarine': [102, 205, 170, 1], 'mediumblue': [0, 0, 205, 1],\n    'mediumorchid': [186, 85, 211, 1], 'mediumpurple': [147, 112, 219, 1],\n    'mediumseagreen': [60, 179, 113, 1], 'mediumslateblue': [123, 104, 238, 1],\n    'mediumspringgreen': [0, 250, 154, 1], 'mediumturquoise': [72, 209, 204, 1],\n    'mediumvioletred': [199, 21, 133, 1], 'midnightblue': [25, 25, 112, 1],\n    'mintcream': [245, 255, 250, 1], 'mistyrose': [255, 228, 225, 1],\n    'moccasin': [255, 228, 181, 1], 'navajowhite': [255, 222, 173, 1],\n    'navy': [0, 0, 128, 1], 'oldlace': [253, 245, 230, 1],\n    'olive': [128, 128, 0, 1], 'olivedrab': [107, 142, 35, 1],\n    'orange': [255, 165, 0, 1], 'orangered': [255, 69, 0, 1],\n    'orchid': [218, 112, 214, 1], 'palegoldenrod': [238, 232, 170, 1],\n    'palegreen': [152, 251, 152, 1], 'paleturquoise': [175, 238, 238, 1],\n    'palevioletred': [219, 112, 147, 1], 'papayawhip': [255, 239, 213, 1],\n    'peachpuff': [255, 218, 185, 1], 'peru': [205, 133, 63, 1],\n    'pink': [255, 192, 203, 1], 'plum': [221, 160, 221, 1],\n    'powderblue': [176, 224, 230, 1], 'purple': [128, 0, 128, 1],\n    'red': [255, 0, 0, 1], 'rosybrown': [188, 143, 143, 1],\n    'royalblue': [65, 105, 225, 1], 'saddlebrown': [139, 69, 19, 1],\n    'salmon': [250, 128, 114, 1], 'sandybrown': [244, 164, 96, 1],\n    'seagreen': [46, 139, 87, 1], 'seashell': [255, 245, 238, 1],\n    'sienna': [160, 82, 45, 1], 'silver': [192, 192, 192, 1],\n    'skyblue': [135, 206, 235, 1], 'slateblue': [106, 90, 205, 1],\n    'slategray': [112, 128, 144, 1], 'slategrey': [112, 128, 144, 1],\n    'snow': [255, 250, 250, 1], 'springgreen': [0, 255, 127, 1],\n    'steelblue': [70, 130, 180, 1], 'tan': [210, 180, 140, 1],\n    'teal': [0, 128, 128, 1], 'thistle': [216, 191, 216, 1],\n    'tomato': [255, 99, 71, 1], 'turquoise': [64, 224, 208, 1],\n    'violet': [238, 130, 238, 1], 'wheat': [245, 222, 179, 1],\n    'white': [255, 255, 255, 1], 'whitesmoke': [245, 245, 245, 1],\n    'yellow': [255, 255, 0, 1], 'yellowgreen': [154, 205, 50, 1]\n};\nfunction clampCssByte(i) {\n    i = Math.round(i);\n    return i < 0 ? 0 : i > 255 ? 255 : i;\n}\nfunction clampCssAngle(i) {\n    i = Math.round(i);\n    return i < 0 ? 0 : i > 360 ? 360 : i;\n}\nfunction clampCssFloat(f) {\n    return f < 0 ? 0 : f > 1 ? 1 : f;\n}\nfunction parseCssInt(val) {\n    var str = val;\n    if (str.length && str.charAt(str.length - 1) === '%') {\n        return clampCssByte(parseFloat(str) / 100 * 255);\n    }\n    return clampCssByte(parseInt(str, 10));\n}\nfunction parseCssFloat(val) {\n    var str = val;\n    if (str.length && str.charAt(str.length - 1) === '%') {\n        return clampCssFloat(parseFloat(str) / 100);\n    }\n    return clampCssFloat(parseFloat(str));\n}\nfunction cssHueToRgb(m1, m2, h) {\n    if (h < 0) {\n        h += 1;\n    }\n    else if (h > 1) {\n        h -= 1;\n    }\n    if (h * 6 < 1) {\n        return m1 + (m2 - m1) * h * 6;\n    }\n    if (h * 2 < 1) {\n        return m2;\n    }\n    if (h * 3 < 2) {\n        return m1 + (m2 - m1) * (2 / 3 - h) * 6;\n    }\n    return m1;\n}\nfunction lerpNumber(a, b, p) {\n    return a + (b - a) * p;\n}\nfunction setRgba(out, r, g, b, a) {\n    out[0] = r;\n    out[1] = g;\n    out[2] = b;\n    out[3] = a;\n    return out;\n}\nfunction copyRgba(out, a) {\n    out[0] = a[0];\n    out[1] = a[1];\n    out[2] = a[2];\n    out[3] = a[3];\n    return out;\n}\nvar colorCache = new LRU(20);\nvar lastRemovedArr = null;\nfunction putToCache(colorStr, rgbaArr) {\n    if (lastRemovedArr) {\n        copyRgba(lastRemovedArr, rgbaArr);\n    }\n    lastRemovedArr = colorCache.put(colorStr, lastRemovedArr || (rgbaArr.slice()));\n}\nexport function parse(colorStr, rgbaArr) {\n    if (!colorStr) {\n        return;\n    }\n    rgbaArr = rgbaArr || [];\n    var cached = colorCache.get(colorStr);\n    if (cached) {\n        return copyRgba(rgbaArr, cached);\n    }\n    colorStr = colorStr + '';\n    var str = colorStr.replace(/ /g, '').toLowerCase();\n    if (str in kCSSColorTable) {\n        copyRgba(rgbaArr, kCSSColorTable[str]);\n        putToCache(colorStr, rgbaArr);\n        return rgbaArr;\n    }\n    var strLen = str.length;\n    if (str.charAt(0) === '#') {\n        if (strLen === 4 || strLen === 5) {\n            var iv = parseInt(str.slice(1, 4), 16);\n            if (!(iv >= 0 && iv <= 0xfff)) {\n                setRgba(rgbaArr, 0, 0, 0, 1);\n                return;\n            }\n            setRgba(rgbaArr, ((iv & 0xf00) >> 4) | ((iv & 0xf00) >> 8), (iv & 0xf0) | ((iv & 0xf0) >> 4), (iv & 0xf) | ((iv & 0xf) << 4), strLen === 5 ? parseInt(str.slice(4), 16) / 0xf : 1);\n            putToCache(colorStr, rgbaArr);\n            return rgbaArr;\n        }\n        else if (strLen === 7 || strLen === 9) {\n            var iv = parseInt(str.slice(1, 7), 16);\n            if (!(iv >= 0 && iv <= 0xffffff)) {\n                setRgba(rgbaArr, 0, 0, 0, 1);\n                return;\n            }\n            setRgba(rgbaArr, (iv & 0xff0000) >> 16, (iv & 0xff00) >> 8, iv & 0xff, strLen === 9 ? parseInt(str.slice(7), 16) / 0xff : 1);\n            putToCache(colorStr, rgbaArr);\n            return rgbaArr;\n        }\n        return;\n    }\n    var op = str.indexOf('(');\n    var ep = str.indexOf(')');\n    if (op !== -1 && ep + 1 === strLen) {\n        var fname = str.substr(0, op);\n        var params = str.substr(op + 1, ep - (op + 1)).split(',');\n        var alpha = 1;\n        switch (fname) {\n            case 'rgba':\n                if (params.length !== 4) {\n                    return params.length === 3\n                        ? setRgba(rgbaArr, +params[0], +params[1], +params[2], 1)\n                        : setRgba(rgbaArr, 0, 0, 0, 1);\n                }\n                alpha = parseCssFloat(params.pop());\n            case 'rgb':\n                if (params.length !== 3) {\n                    setRgba(rgbaArr, 0, 0, 0, 1);\n                    return;\n                }\n                setRgba(rgbaArr, parseCssInt(params[0]), parseCssInt(params[1]), parseCssInt(params[2]), alpha);\n                putToCache(colorStr, rgbaArr);\n                return rgbaArr;\n            case 'hsla':\n                if (params.length !== 4) {\n                    setRgba(rgbaArr, 0, 0, 0, 1);\n                    return;\n                }\n                params[3] = parseCssFloat(params[3]);\n                hsla2rgba(params, rgbaArr);\n                putToCache(colorStr, rgbaArr);\n                return rgbaArr;\n            case 'hsl':\n                if (params.length !== 3) {\n                    setRgba(rgbaArr, 0, 0, 0, 1);\n                    return;\n                }\n                hsla2rgba(params, rgbaArr);\n                putToCache(colorStr, rgbaArr);\n                return rgbaArr;\n            default:\n                return;\n        }\n    }\n    setRgba(rgbaArr, 0, 0, 0, 1);\n    return;\n}\nfunction hsla2rgba(hsla, rgba) {\n    var h = (((parseFloat(hsla[0]) % 360) + 360) % 360) / 360;\n    var s = parseCssFloat(hsla[1]);\n    var l = parseCssFloat(hsla[2]);\n    var m2 = l <= 0.5 ? l * (s + 1) : l + s - l * s;\n    var m1 = l * 2 - m2;\n    rgba = rgba || [];\n    setRgba(rgba, clampCssByte(cssHueToRgb(m1, m2, h + 1 / 3) * 255), clampCssByte(cssHueToRgb(m1, m2, h) * 255), clampCssByte(cssHueToRgb(m1, m2, h - 1 / 3) * 255), 1);\n    if (hsla.length === 4) {\n        rgba[3] = hsla[3];\n    }\n    return rgba;\n}\nfunction rgba2hsla(rgba) {\n    if (!rgba) {\n        return;\n    }\n    var R = rgba[0] / 255;\n    var G = rgba[1] / 255;\n    var B = rgba[2] / 255;\n    var vMin = Math.min(R, G, B);\n    var vMax = Math.max(R, G, B);\n    var delta = vMax - vMin;\n    var L = (vMax + vMin) / 2;\n    var H;\n    var S;\n    if (delta === 0) {\n        H = 0;\n        S = 0;\n    }\n    else {\n        if (L < 0.5) {\n            S = delta / (vMax + vMin);\n        }\n        else {\n            S = delta / (2 - vMax - vMin);\n        }\n        var deltaR = (((vMax - R) / 6) + (delta / 2)) / delta;\n        var deltaG = (((vMax - G) / 6) + (delta / 2)) / delta;\n        var deltaB = (((vMax - B) / 6) + (delta / 2)) / delta;\n        if (R === vMax) {\n            H = deltaB - deltaG;\n        }\n        else if (G === vMax) {\n            H = (1 / 3) + deltaR - deltaB;\n        }\n        else if (B === vMax) {\n            H = (2 / 3) + deltaG - deltaR;\n        }\n        if (H < 0) {\n            H += 1;\n        }\n        if (H > 1) {\n            H -= 1;\n        }\n    }\n    var hsla = [H * 360, S, L];\n    if (rgba[3] != null) {\n        hsla.push(rgba[3]);\n    }\n    return hsla;\n}\nexport function lift(color, level) {\n    var colorArr = parse(color);\n    if (colorArr) {\n        for (var i = 0; i < 3; i++) {\n            if (level < 0) {\n                colorArr[i] = colorArr[i] * (1 - level) | 0;\n            }\n            else {\n                colorArr[i] = ((255 - colorArr[i]) * level + colorArr[i]) | 0;\n            }\n            if (colorArr[i] > 255) {\n                colorArr[i] = 255;\n            }\n            else if (colorArr[i] < 0) {\n                colorArr[i] = 0;\n            }\n        }\n        return stringify(colorArr, colorArr.length === 4 ? 'rgba' : 'rgb');\n    }\n}\nexport function toHex(color) {\n    var colorArr = parse(color);\n    if (colorArr) {\n        return ((1 << 24) + (colorArr[0] << 16) + (colorArr[1] << 8) + (+colorArr[2])).toString(16).slice(1);\n    }\n}\nexport function fastLerp(normalizedValue, colors, out) {\n    if (!(colors && colors.length)\n        || !(normalizedValue >= 0 && normalizedValue <= 1)) {\n        return;\n    }\n    out = out || [];\n    var value = normalizedValue * (colors.length - 1);\n    var leftIndex = Math.floor(value);\n    var rightIndex = Math.ceil(value);\n    var leftColor = colors[leftIndex];\n    var rightColor = colors[rightIndex];\n    var dv = value - leftIndex;\n    out[0] = clampCssByte(lerpNumber(leftColor[0], rightColor[0], dv));\n    out[1] = clampCssByte(lerpNumber(leftColor[1], rightColor[1], dv));\n    out[2] = clampCssByte(lerpNumber(leftColor[2], rightColor[2], dv));\n    out[3] = clampCssFloat(lerpNumber(leftColor[3], rightColor[3], dv));\n    return out;\n}\nexport var fastMapToColor = fastLerp;\nexport function lerp(normalizedValue, colors, fullOutput) {\n    if (!(colors && colors.length)\n        || !(normalizedValue >= 0 && normalizedValue <= 1)) {\n        return;\n    }\n    var value = normalizedValue * (colors.length - 1);\n    var leftIndex = Math.floor(value);\n    var rightIndex = Math.ceil(value);\n    var leftColor = parse(colors[leftIndex]);\n    var rightColor = parse(colors[rightIndex]);\n    var dv = value - leftIndex;\n    var color = stringify([\n        clampCssByte(lerpNumber(leftColor[0], rightColor[0], dv)),\n        clampCssByte(lerpNumber(leftColor[1], rightColor[1], dv)),\n        clampCssByte(lerpNumber(leftColor[2], rightColor[2], dv)),\n        clampCssFloat(lerpNumber(leftColor[3], rightColor[3], dv))\n    ], 'rgba');\n    return fullOutput\n        ? {\n            color: color,\n            leftIndex: leftIndex,\n            rightIndex: rightIndex,\n            value: value\n        }\n        : color;\n}\nexport var mapToColor = lerp;\nexport function modifyHSL(color, h, s, l) {\n    var colorArr = parse(color);\n    if (color) {\n        colorArr = rgba2hsla(colorArr);\n        h != null && (colorArr[0] = clampCssAngle(h));\n        s != null && (colorArr[1] = parseCssFloat(s));\n        l != null && (colorArr[2] = parseCssFloat(l));\n        return stringify(hsla2rgba(colorArr), 'rgba');\n    }\n}\nexport function modifyAlpha(color, alpha) {\n    var colorArr = parse(color);\n    if (colorArr && alpha != null) {\n        colorArr[3] = clampCssFloat(alpha);\n        return stringify(colorArr, 'rgba');\n    }\n}\nexport function stringify(arrColor, type) {\n    if (!arrColor || !arrColor.length) {\n        return;\n    }\n    var colorStr = arrColor[0] + ',' + arrColor[1] + ',' + arrColor[2];\n    if (type === 'rgba' || type === 'hsva' || type === 'hsla') {\n        colorStr += ',' + arrColor[3];\n    }\n    return type + '(' + colorStr + ')';\n}\nexport function lum(color, backgroundLum) {\n    var arr = parse(color);\n    return arr\n        ? (0.299 * arr[0] + 0.587 * arr[1] + 0.114 * arr[2]) * arr[3] / 255\n            + (1 - arr[3]) * backgroundLum\n        : 0;\n}\nexport function random() {\n    var r = Math.round(Math.random() * 255);\n    var g = Math.round(Math.random() * 255);\n    var b = Math.round(Math.random() * 255);\n    return 'rgb(' + r + ',' + g + ',' + b + ')';\n}\n","import Eventful from './Eventful';\nimport env from './env';\nimport { isCanvasEl, transformCoordWithViewport } from './dom';\nvar isDomLevel2 = (typeof window !== 'undefined') && !!window.addEventListener;\nvar MOUSE_EVENT_REG = /^(?:mouse|pointer|contextmenu|drag|drop)|click/;\nvar _calcOut = [];\nexport function clientToLocal(el, e, out, calculate) {\n    out = out || {};\n    if (calculate || !env.canvasSupported) {\n        calculateZrXY(el, e, out);\n    }\n    else if (env.browser.firefox\n        && e.layerX != null\n        && e.layerX !== e.offsetX) {\n        out.zrX = e.layerX;\n        out.zrY = e.layerY;\n    }\n    else if (e.offsetX != null) {\n        out.zrX = e.offsetX;\n        out.zrY = e.offsetY;\n    }\n    else {\n        calculateZrXY(el, e, out);\n    }\n    return out;\n}\nfunction calculateZrXY(el, e, out) {\n    if (env.domSupported && el.getBoundingClientRect) {\n        var ex = e.clientX;\n        var ey = e.clientY;\n        if (isCanvasEl(el)) {\n            var box = el.getBoundingClientRect();\n            out.zrX = ex - box.left;\n            out.zrY = ey - box.top;\n            return;\n        }\n        else {\n            if (transformCoordWithViewport(_calcOut, el, ex, ey)) {\n                out.zrX = _calcOut[0];\n                out.zrY = _calcOut[1];\n                return;\n            }\n        }\n    }\n    out.zrX = out.zrY = 0;\n}\nexport function getNativeEvent(e) {\n    return e\n        || window.event;\n}\nexport function normalizeEvent(el, e, calculate) {\n    e = getNativeEvent(e);\n    if (e.zrX != null) {\n        return e;\n    }\n    var eventType = e.type;\n    var isTouch = eventType && eventType.indexOf('touch') >= 0;\n    if (!isTouch) {\n        clientToLocal(el, e, e, calculate);\n        var wheelDelta = getWheelDeltaMayPolyfill(e);\n        e.zrDelta = wheelDelta ? wheelDelta / 120 : -(e.detail || 0) / 3;\n    }\n    else {\n        var touch = eventType !== 'touchend'\n            ? e.targetTouches[0]\n            : e.changedTouches[0];\n        touch && clientToLocal(el, touch, e, calculate);\n    }\n    var button = e.button;\n    if (e.which == null && button !== undefined && MOUSE_EVENT_REG.test(e.type)) {\n        e.which = (button & 1 ? 1 : (button & 2 ? 3 : (button & 4 ? 2 : 0)));\n    }\n    return e;\n}\nfunction getWheelDeltaMayPolyfill(e) {\n    var rawWheelDelta = e.wheelDelta;\n    if (rawWheelDelta) {\n        return rawWheelDelta;\n    }\n    var deltaX = e.deltaX;\n    var deltaY = e.deltaY;\n    if (deltaX == null || deltaY == null) {\n        return rawWheelDelta;\n    }\n    var delta = deltaY !== 0 ? Math.abs(deltaY) : Math.abs(deltaX);\n    var sign = deltaY > 0 ? -1\n        : deltaY < 0 ? 1\n            : deltaX > 0 ? -1\n                : 1;\n    return 3 * delta * sign;\n}\nexport function addEventListener(el, name, handler, opt) {\n    if (isDomLevel2) {\n        el.addEventListener(name, handler, opt);\n    }\n    else {\n        el.attachEvent('on' + name, handler);\n    }\n}\nexport function removeEventListener(el, name, handler, opt) {\n    if (isDomLevel2) {\n        el.removeEventListener(name, handler, opt);\n    }\n    else {\n        el.detachEvent('on' + name, handler);\n    }\n}\nexport var stop = isDomLevel2\n    ? function (e) {\n        e.preventDefault();\n        e.stopPropagation();\n        e.cancelBubble = true;\n    }\n    : function (e) {\n        e.returnValue = false;\n        e.cancelBubble = true;\n    };\nexport function isMiddleOrRightButtonOnMouseUpDown(e) {\n    return e.which === 2 || e.which === 3;\n}\nexport function notLeftMouse(e) {\n    return e.which > 1;\n}\nexport { Eventful as Dispatcher };\n","import { quadraticProjectPoint } from '../core/curve';\nexport function containStroke(x0, y0, x1, y1, x2, y2, lineWidth, x, y) {\n    if (lineWidth === 0) {\n        return false;\n    }\n    var _l = lineWidth;\n    if ((y > y0 + _l && y > y1 + _l && y > y2 + _l)\n        || (y < y0 - _l && y < y1 - _l && y < y2 - _l)\n        || (x > x0 + _l && x > x1 + _l && x > x2 + _l)\n        || (x < x0 - _l && x < x1 - _l && x < x2 - _l)) {\n        return false;\n    }\n    var d = quadraticProjectPoint(x0, y0, x1, y1, x2, y2, x, y, null);\n    return d <= _l / 2;\n}\n","var Gradient = (function () {\n    function Gradient(colorStops) {\n        this.colorStops = colorStops || [];\n    }\n    Gradient.prototype.addColorStop = function (offset, color) {\n        this.colorStops.push({\n            offset: offset,\n            color: color\n        });\n    };\n    return Gradient;\n}());\nexport default Gradient;\n","var wmUniqueIndex = Math.round(Math.random() * 9);\nvar WeakMap = (function () {\n    function WeakMap() {\n        this._id = '__ec_inner_' + wmUniqueIndex++;\n    }\n    WeakMap.prototype.get = function (key) {\n        return this._guard(key)[this._id];\n    };\n    WeakMap.prototype.set = function (key, value) {\n        var target = this._guard(key);\n        if (typeof Object.defineProperty === 'function') {\n            Object.defineProperty(target, this._id, {\n                value: value,\n                enumerable: false,\n                configurable: true\n            });\n        }\n        else {\n            target[this._id] = value;\n        }\n        return this;\n    };\n    WeakMap.prototype[\"delete\"] = function (key) {\n        if (this.has(key)) {\n            delete this._guard(key)[this._id];\n            return true;\n        }\n        return false;\n    };\n    WeakMap.prototype.has = function (key) {\n        return !!this._guard(key)[this._id];\n    };\n    WeakMap.prototype._guard = function (key) {\n        if (key !== Object(key)) {\n            throw TypeError('Value of WeakMap is not a non-null object.');\n        }\n        return key;\n    };\n    return WeakMap;\n}());\nexport default WeakMap;\n","import { distance as v2Distance } from '../../core/vector';\nfunction interpolate(p0, p1, p2, p3, t, t2, t3) {\n    var v0 = (p2 - p0) * 0.5;\n    var v1 = (p3 - p1) * 0.5;\n    return (2 * (p1 - p2) + v0 + v1) * t3\n        + (-3 * (p1 - p2) - 2 * v0 - v1) * t2\n        + v0 * t + p1;\n}\nexport default function smoothSpline(points, isLoop) {\n    var len = points.length;\n    var ret = [];\n    var distance = 0;\n    for (var i = 1; i < len; i++) {\n        distance += v2Distance(points[i - 1], points[i]);\n    }\n    var segs = distance / 2;\n    segs = segs < len ? len : segs;\n    for (var i = 0; i < segs; i++) {\n        var pos = i / (segs - 1) * (isLoop ? len : len - 1);\n        var idx = Math.floor(pos);\n        var w = pos - idx;\n        var p0 = void 0;\n        var p1 = points[idx % len];\n        var p2 = void 0;\n        var p3 = void 0;\n        if (!isLoop) {\n            p0 = points[idx === 0 ? idx : idx - 1];\n            p2 = points[idx > len - 2 ? len - 1 : idx + 1];\n            p3 = points[idx > len - 3 ? len - 1 : idx + 2];\n        }\n        else {\n            p0 = points[(idx - 1 + len) % len];\n            p2 = points[(idx + 1) % len];\n            p3 = points[(idx + 2) % len];\n        }\n        var w2 = w * w;\n        var w3 = w * w2;\n        ret.push([\n            interpolate(p0[0], p1[0], p2[0], p3[0], w, w2, w3),\n            interpolate(p0[1], p1[1], p2[1], p3[1], w, w2, w3)\n        ]);\n    }\n    return ret;\n}\n","import smoothSpline from './smoothSpline';\nimport smoothBezier from './smoothBezier';\nexport function buildPath(ctx, shape, closePath) {\n    var smooth = shape.smooth;\n    var points = shape.points;\n    if (points && points.length >= 2) {\n        if (smooth && smooth !== 'spline') {\n            var controlPoints = smoothBezier(points, smooth, closePath, shape.smoothConstraint);\n            ctx.moveTo(points[0][0], points[0][1]);\n            var len = points.length;\n            for (var i = 0; i < (closePath ? len : len - 1); i++) {\n                var cp1 = controlPoints[i * 2];\n                var cp2 = controlPoints[i * 2 + 1];\n                var p = points[(i + 1) % len];\n                ctx.bezierCurveTo(cp1[0], cp1[1], cp2[0], cp2[1], p[0], p[1]);\n            }\n        }\n        else {\n            if (smooth === 'spline') {\n                points = smoothSpline(points, closePath);\n            }\n            ctx.moveTo(points[0][0], points[0][1]);\n            for (var i = 1, l = points.length; i < l; i++) {\n                ctx.lineTo(points[i][0], points[i][1]);\n            }\n        }\n        closePath && ctx.closePath();\n    }\n}\n","import { min as v2Min, max as v2Max, scale as v2Scale, distance as v2Distance, add as v2Add, clone as v2Clone, sub as v2Sub } from '../../core/vector';\nexport default function smoothBezier(points, smooth, isLoop, constraint) {\n    var cps = [];\n    var v = [];\n    var v1 = [];\n    var v2 = [];\n    var prevPoint;\n    var nextPoint;\n    var min;\n    var max;\n    if (constraint) {\n        min = [Infinity, Infinity];\n        max = [-Infinity, -Infinity];\n        for (var i = 0, len = points.length; i < len; i++) {\n            v2Min(min, min, points[i]);\n            v2Max(max, max, points[i]);\n        }\n        v2Min(min, min, constraint[0]);\n        v2Max(max, max, constraint[1]);\n    }\n    for (var i = 0, len = points.length; i < len; i++) {\n        var point = points[i];\n        if (isLoop) {\n            prevPoint = points[i ? i - 1 : len - 1];\n            nextPoint = points[(i + 1) % len];\n        }\n        else {\n            if (i === 0 || i === len - 1) {\n                cps.push(v2Clone(points[i]));\n                continue;\n            }\n            else {\n                prevPoint = points[i - 1];\n                nextPoint = points[i + 1];\n            }\n        }\n        v2Sub(v, nextPoint, prevPoint);\n        v2Scale(v, v, smooth);\n        var d0 = v2Distance(point, prevPoint);\n        var d1 = v2Distance(point, nextPoint);\n        var sum = d0 + d1;\n        if (sum !== 0) {\n            d0 /= sum;\n            d1 /= sum;\n        }\n        v2Scale(v1, v, -d0);\n        v2Scale(v2, v, d1);\n        var cp0 = v2Add([], point, v1);\n        var cp1 = v2Add([], point, v2);\n        if (constraint) {\n            v2Max(cp0, cp0, min);\n            v2Min(cp0, cp0, max);\n            v2Max(cp1, cp1, min);\n            v2Min(cp1, cp1, max);\n        }\n        cps.push(cp0);\n        cps.push(cp1);\n    }\n    if (isLoop) {\n        cps.push(cps.shift());\n    }\n    return cps;\n}\n","import { __extends } from \"tslib\";\nimport Path from '../Path';\nvar RingShape = (function () {\n    function RingShape() {\n        this.cx = 0;\n        this.cy = 0;\n        this.r = 0;\n        this.r0 = 0;\n    }\n    return RingShape;\n}());\nvar Ring = (function (_super) {\n    __extends(Ring, _super);\n    function Ring(opts) {\n        return _super.call(this, opts) || this;\n    }\n    Ring.prototype.getDefaultShape = function () {\n        return new RingShape();\n    };\n    Ring.prototype.buildPath = function (ctx, shape) {\n        var x = shape.cx;\n        var y = shape.cy;\n        var PI2 = Math.PI * 2;\n        ctx.moveTo(x + shape.r, y);\n        ctx.arc(x, y, shape.r, 0, PI2, false);\n        ctx.moveTo(x + shape.r0, y);\n        ctx.arc(x, y, shape.r0, 0, PI2, true);\n    };\n    return Ring;\n}(Path));\nRing.prototype.type = 'ring';\nexport default Ring;\n","import { __extends } from \"tslib\";\nimport Path from '../Path';\nimport * as vec2 from '../../core/vector';\nimport { quadraticSubdivide, cubicSubdivide, quadraticAt, cubicAt, quadraticDerivativeAt, cubicDerivativeAt } from '../../core/curve';\nvar out = [];\nvar BezierCurveShape = (function () {\n    function BezierCurveShape() {\n        this.x1 = 0;\n        this.y1 = 0;\n        this.x2 = 0;\n        this.y2 = 0;\n        this.cpx1 = 0;\n        this.cpy1 = 0;\n        this.percent = 1;\n    }\n    return BezierCurveShape;\n}());\nfunction someVectorAt(shape, t, isTangent) {\n    var cpx2 = shape.cpx2;\n    var cpy2 = shape.cpy2;\n    if (cpx2 === null || cpy2 === null) {\n        return [\n            (isTangent ? cubicDerivativeAt : cubicAt)(shape.x1, shape.cpx1, shape.cpx2, shape.x2, t),\n            (isTangent ? cubicDerivativeAt : cubicAt)(shape.y1, shape.cpy1, shape.cpy2, shape.y2, t)\n        ];\n    }\n    else {\n        return [\n            (isTangent ? quadraticDerivativeAt : quadraticAt)(shape.x1, shape.cpx1, shape.x2, t),\n            (isTangent ? quadraticDerivativeAt : quadraticAt)(shape.y1, shape.cpy1, shape.y2, t)\n        ];\n    }\n}\nvar BezierCurve = (function (_super) {\n    __extends(BezierCurve, _super);\n    function BezierCurve(opts) {\n        return _super.call(this, opts) || this;\n    }\n    BezierCurve.prototype.getDefaultStyle = function () {\n        return {\n            stroke: '#000',\n            fill: null\n        };\n    };\n    BezierCurve.prototype.getDefaultShape = function () {\n        return new BezierCurveShape();\n    };\n    BezierCurve.prototype.buildPath = function (ctx, shape) {\n        var x1 = shape.x1;\n        var y1 = shape.y1;\n        var x2 = shape.x2;\n        var y2 = shape.y2;\n        var cpx1 = shape.cpx1;\n        var cpy1 = shape.cpy1;\n        var cpx2 = shape.cpx2;\n        var cpy2 = shape.cpy2;\n        var percent = shape.percent;\n        if (percent === 0) {\n            return;\n        }\n        ctx.moveTo(x1, y1);\n        if (cpx2 == null || cpy2 == null) {\n            if (percent < 1) {\n                quadraticSubdivide(x1, cpx1, x2, percent, out);\n                cpx1 = out[1];\n                x2 = out[2];\n                quadraticSubdivide(y1, cpy1, y2, percent, out);\n                cpy1 = out[1];\n                y2 = out[2];\n            }\n            ctx.quadraticCurveTo(cpx1, cpy1, x2, y2);\n        }\n        else {\n            if (percent < 1) {\n                cubicSubdivide(x1, cpx1, cpx2, x2, percent, out);\n                cpx1 = out[1];\n                cpx2 = out[2];\n                x2 = out[3];\n                cubicSubdivide(y1, cpy1, cpy2, y2, percent, out);\n                cpy1 = out[1];\n                cpy2 = out[2];\n                y2 = out[3];\n            }\n            ctx.bezierCurveTo(cpx1, cpy1, cpx2, cpy2, x2, y2);\n        }\n    };\n    BezierCurve.prototype.pointAt = function (t) {\n        return someVectorAt(this.shape, t, false);\n    };\n    BezierCurve.prototype.tangentAt = function (t) {\n        var p = someVectorAt(this.shape, t, true);\n        return vec2.normalize(p, p);\n    };\n    return BezierCurve;\n}(Path));\n;\nBezierCurve.prototype.type = 'bezier-curve';\nexport default BezierCurve;\n","import { __extends } from \"tslib\";\nimport Path from '../Path';\nvar ArcShape = (function () {\n    function ArcShape() {\n        this.cx = 0;\n        this.cy = 0;\n        this.r = 0;\n        this.startAngle = 0;\n        this.endAngle = Math.PI * 2;\n        this.clockwise = true;\n    }\n    return ArcShape;\n}());\nvar Arc = (function (_super) {\n    __extends(Arc, _super);\n    function Arc(opts) {\n        return _super.call(this, opts) || this;\n    }\n    Arc.prototype.getDefaultStyle = function () {\n        return {\n            stroke: '#000',\n            fill: null\n        };\n    };\n    Arc.prototype.getDefaultShape = function () {\n        return new ArcShape();\n    };\n    Arc.prototype.buildPath = function (ctx, shape) {\n        var x = shape.cx;\n        var y = shape.cy;\n        var r = Math.max(shape.r, 0);\n        var startAngle = shape.startAngle;\n        var endAngle = shape.endAngle;\n        var clockwise = shape.clockwise;\n        var unitX = Math.cos(startAngle);\n        var unitY = Math.sin(startAngle);\n        ctx.moveTo(unitX * r + x, unitY * r + y);\n        ctx.arc(x, y, r, startAngle, endAngle, !clockwise);\n    };\n    return Arc;\n}(Path));\nArc.prototype.type = 'arc';\nexport default Arc;\n","import Group from '../graphic/Group';\nimport ZRImage from '../graphic/Image';\nimport Circle from '../graphic/shape/Circle';\nimport Rect from '../graphic/shape/Rect';\nimport Ellipse from '../graphic/shape/Ellipse';\nimport Line from '../graphic/shape/Line';\nimport Path from '../graphic/Path';\nimport Polygon from '../graphic/shape/Polygon';\nimport Polyline from '../graphic/shape/Polyline';\nimport * as matrix from '../core/matrix';\nimport { createFromString } from './path';\nimport { extend, defaults, trim, each, map } from '../core/util';\nimport LinearGradient from '../graphic/LinearGradient';\nimport TSpan from '../graphic/TSpan';\nimport { parseXML } from './parseXML';\nvar DILIMITER_REG = /[\\s,]+/;\nvar nodeParsers;\nvar SVGParser = (function () {\n    function SVGParser() {\n        this._defs = {};\n        this._root = null;\n        this._isDefine = false;\n        this._isText = false;\n    }\n    SVGParser.prototype.parse = function (xml, opt) {\n        opt = opt || {};\n        var svg = parseXML(xml);\n        if (!svg) {\n            throw new Error('Illegal svg');\n        }\n        var root = new Group();\n        this._root = root;\n        var viewBox = svg.getAttribute('viewBox') || '';\n        var width = parseFloat((svg.getAttribute('width') || opt.width));\n        var height = parseFloat((svg.getAttribute('height') || opt.height));\n        isNaN(width) && (width = null);\n        isNaN(height) && (height = null);\n        parseAttributes(svg, root, null, true);\n        var child = svg.firstChild;\n        while (child) {\n            this._parseNode(child, root);\n            child = child.nextSibling;\n        }\n        var viewBoxRect;\n        var viewBoxTransform;\n        if (viewBox) {\n            var viewBoxArr = trim(viewBox).split(DILIMITER_REG);\n            if (viewBoxArr.length >= 4) {\n                viewBoxRect = {\n                    x: parseFloat((viewBoxArr[0] || 0)),\n                    y: parseFloat((viewBoxArr[1] || 0)),\n                    width: parseFloat(viewBoxArr[2]),\n                    height: parseFloat(viewBoxArr[3])\n                };\n            }\n        }\n        if (viewBoxRect && width != null && height != null) {\n            viewBoxTransform = makeViewBoxTransform(viewBoxRect, width, height);\n            if (!opt.ignoreViewBox) {\n                var elRoot = root;\n                root = new Group();\n                root.add(elRoot);\n                elRoot.scaleX = elRoot.scaleY = viewBoxTransform.scale;\n                elRoot.x = viewBoxTransform.x;\n                elRoot.y = viewBoxTransform.y;\n            }\n        }\n        if (!opt.ignoreRootClip && width != null && height != null) {\n            root.setClipPath(new Rect({\n                shape: { x: 0, y: 0, width: width, height: height }\n            }));\n        }\n        return {\n            root: root,\n            width: width,\n            height: height,\n            viewBoxRect: viewBoxRect,\n            viewBoxTransform: viewBoxTransform\n        };\n    };\n    SVGParser.prototype._parseNode = function (xmlNode, parentGroup) {\n        var nodeName = xmlNode.nodeName.toLowerCase();\n        if (nodeName === 'defs') {\n            this._isDefine = true;\n        }\n        else if (nodeName === 'text') {\n            this._isText = true;\n        }\n        var el;\n        if (this._isDefine) {\n            var parser = defineParsers[nodeName];\n            if (parser) {\n                var def = parser.call(this, xmlNode);\n                var id = xmlNode.getAttribute('id');\n                if (id) {\n                    this._defs[id] = def;\n                }\n            }\n        }\n        else {\n            var parser = nodeParsers[nodeName];\n            if (parser) {\n                el = parser.call(this, xmlNode, parentGroup);\n                parentGroup.add(el);\n            }\n        }\n        if (el) {\n            var child = xmlNode.firstChild;\n            while (child) {\n                if (child.nodeType === 1) {\n                    this._parseNode(child, el);\n                }\n                if (child.nodeType === 3 && this._isText) {\n                    this._parseText(child, el);\n                }\n                child = child.nextSibling;\n            }\n        }\n        if (nodeName === 'defs') {\n            this._isDefine = false;\n        }\n        else if (nodeName === 'text') {\n            this._isText = false;\n        }\n    };\n    SVGParser.prototype._parseText = function (xmlNode, parentGroup) {\n        if (xmlNode.nodeType === 1) {\n            var dx = xmlNode.getAttribute('dx') || 0;\n            var dy = xmlNode.getAttribute('dy') || 0;\n            this._textX += parseFloat(dx);\n            this._textY += parseFloat(dy);\n        }\n        var text = new TSpan({\n            style: {\n                text: xmlNode.textContent\n            },\n            x: this._textX || 0,\n            y: this._textY || 0\n        });\n        inheritStyle(parentGroup, text);\n        parseAttributes(xmlNode, text, this._defs);\n        var textStyle = text.style;\n        var fontSize = textStyle.fontSize;\n        if (fontSize && fontSize < 9) {\n            textStyle.fontSize = 9;\n            text.scaleX *= fontSize / 9;\n            text.scaleY *= fontSize / 9;\n        }\n        var font = (textStyle.fontSize || textStyle.fontFamily) && [\n            textStyle.fontStyle,\n            textStyle.fontWeight,\n            (textStyle.fontSize || 12) + 'px',\n            textStyle.fontFamily || 'sans-serif'\n        ].join(' ');\n        textStyle.font = font;\n        var rect = text.getBoundingRect();\n        this._textX += rect.width;\n        parentGroup.add(text);\n        return text;\n    };\n    SVGParser.internalField = (function () {\n        nodeParsers = {\n            'g': function (xmlNode, parentGroup) {\n                var g = new Group();\n                inheritStyle(parentGroup, g);\n                parseAttributes(xmlNode, g, this._defs);\n                return g;\n            },\n            'rect': function (xmlNode, parentGroup) {\n                var rect = new Rect();\n                inheritStyle(parentGroup, rect);\n                parseAttributes(xmlNode, rect, this._defs);\n                rect.setShape({\n                    x: parseFloat(xmlNode.getAttribute('x') || '0'),\n                    y: parseFloat(xmlNode.getAttribute('y') || '0'),\n                    width: parseFloat(xmlNode.getAttribute('width') || '0'),\n                    height: parseFloat(xmlNode.getAttribute('height') || '0')\n                });\n                return rect;\n            },\n            'circle': function (xmlNode, parentGroup) {\n                var circle = new Circle();\n                inheritStyle(parentGroup, circle);\n                parseAttributes(xmlNode, circle, this._defs);\n                circle.setShape({\n                    cx: parseFloat(xmlNode.getAttribute('cx') || '0'),\n                    cy: parseFloat(xmlNode.getAttribute('cy') || '0'),\n                    r: parseFloat(xmlNode.getAttribute('r') || '0')\n                });\n                return circle;\n            },\n            'line': function (xmlNode, parentGroup) {\n                var line = new Line();\n                inheritStyle(parentGroup, line);\n                parseAttributes(xmlNode, line, this._defs);\n                line.setShape({\n                    x1: parseFloat(xmlNode.getAttribute('x1') || '0'),\n                    y1: parseFloat(xmlNode.getAttribute('y1') || '0'),\n                    x2: parseFloat(xmlNode.getAttribute('x2') || '0'),\n                    y2: parseFloat(xmlNode.getAttribute('y2') || '0')\n                });\n                return line;\n            },\n            'ellipse': function (xmlNode, parentGroup) {\n                var ellipse = new Ellipse();\n                inheritStyle(parentGroup, ellipse);\n                parseAttributes(xmlNode, ellipse, this._defs);\n                ellipse.setShape({\n                    cx: parseFloat(xmlNode.getAttribute('cx') || '0'),\n                    cy: parseFloat(xmlNode.getAttribute('cy') || '0'),\n                    rx: parseFloat(xmlNode.getAttribute('rx') || '0'),\n                    ry: parseFloat(xmlNode.getAttribute('ry') || '0')\n                });\n                return ellipse;\n            },\n            'polygon': function (xmlNode, parentGroup) {\n                var pointsStr = xmlNode.getAttribute('points');\n                var pointsArr;\n                if (pointsStr) {\n                    pointsArr = parsePoints(pointsStr);\n                }\n                var polygon = new Polygon({\n                    shape: {\n                        points: pointsArr || []\n                    }\n                });\n                inheritStyle(parentGroup, polygon);\n                parseAttributes(xmlNode, polygon, this._defs);\n                return polygon;\n            },\n            'polyline': function (xmlNode, parentGroup) {\n                var path = new Path();\n                inheritStyle(parentGroup, path);\n                parseAttributes(xmlNode, path, this._defs);\n                var pointsStr = xmlNode.getAttribute('points');\n                var pointsArr;\n                if (pointsStr) {\n                    pointsArr = parsePoints(pointsStr);\n                }\n                var polyline = new Polyline({\n                    shape: {\n                        points: pointsArr || []\n                    }\n                });\n                return polyline;\n            },\n            'image': function (xmlNode, parentGroup) {\n                var img = new ZRImage();\n                inheritStyle(parentGroup, img);\n                parseAttributes(xmlNode, img, this._defs);\n                img.setStyle({\n                    image: xmlNode.getAttribute('xlink:href'),\n                    x: +xmlNode.getAttribute('x'),\n                    y: +xmlNode.getAttribute('y'),\n                    width: +xmlNode.getAttribute('width'),\n                    height: +xmlNode.getAttribute('height')\n                });\n                return img;\n            },\n            'text': function (xmlNode, parentGroup) {\n                var x = xmlNode.getAttribute('x') || '0';\n                var y = xmlNode.getAttribute('y') || '0';\n                var dx = xmlNode.getAttribute('dx') || '0';\n                var dy = xmlNode.getAttribute('dy') || '0';\n                this._textX = parseFloat(x) + parseFloat(dx);\n                this._textY = parseFloat(y) + parseFloat(dy);\n                var g = new Group();\n                inheritStyle(parentGroup, g);\n                parseAttributes(xmlNode, g, this._defs);\n                return g;\n            },\n            'tspan': function (xmlNode, parentGroup) {\n                var x = xmlNode.getAttribute('x');\n                var y = xmlNode.getAttribute('y');\n                if (x != null) {\n                    this._textX = parseFloat(x);\n                }\n                if (y != null) {\n                    this._textY = parseFloat(y);\n                }\n                var dx = xmlNode.getAttribute('dx') || 0;\n                var dy = xmlNode.getAttribute('dy') || 0;\n                var g = new Group();\n                inheritStyle(parentGroup, g);\n                parseAttributes(xmlNode, g, this._defs);\n                this._textX += dx;\n                this._textY += dy;\n                return g;\n            },\n            'path': function (xmlNode, parentGroup) {\n                var d = xmlNode.getAttribute('d') || '';\n                var path = createFromString(d);\n                inheritStyle(parentGroup, path);\n                parseAttributes(xmlNode, path, this._defs);\n                return path;\n            }\n        };\n    })();\n    return SVGParser;\n}());\nvar defineParsers = {\n    'lineargradient': function (xmlNode) {\n        var x1 = parseInt(xmlNode.getAttribute('x1') || '0', 10);\n        var y1 = parseInt(xmlNode.getAttribute('y1') || '0', 10);\n        var x2 = parseInt(xmlNode.getAttribute('x2') || '10', 10);\n        var y2 = parseInt(xmlNode.getAttribute('y2') || '0', 10);\n        var gradient = new LinearGradient(x1, y1, x2, y2);\n        _parseGradientColorStops(xmlNode, gradient);\n        return gradient;\n    }\n};\nfunction _parseGradientColorStops(xmlNode, gradient) {\n    var stop = xmlNode.firstChild;\n    while (stop) {\n        if (stop.nodeType === 1) {\n            var offsetStr = stop.getAttribute('offset');\n            var offset = void 0;\n            if (offsetStr.indexOf('%') > 0) {\n                offset = parseInt(offsetStr, 10) / 100;\n            }\n            else if (offsetStr) {\n                offset = parseFloat(offsetStr);\n            }\n            else {\n                offset = 0;\n            }\n            var stopColor = stop.getAttribute('stop-color') || '#000000';\n            gradient.colorStops.push({\n                offset: offset,\n                color: stopColor\n            });\n        }\n        stop = stop.nextSibling;\n    }\n}\nfunction inheritStyle(parent, child) {\n    if (parent && parent.__inheritedStyle) {\n        if (!child.__inheritedStyle) {\n            child.__inheritedStyle = {};\n        }\n        defaults(child.__inheritedStyle, parent.__inheritedStyle);\n    }\n}\nfunction parsePoints(pointsString) {\n    var list = trim(pointsString).split(DILIMITER_REG);\n    var points = [];\n    for (var i = 0; i < list.length; i += 2) {\n        var x = parseFloat(list[i]);\n        var y = parseFloat(list[i + 1]);\n        points.push([x, y]);\n    }\n    return points;\n}\nvar attributesMap = {\n    'fill': 'fill',\n    'stroke': 'stroke',\n    'stroke-width': 'lineWidth',\n    'opacity': 'opacity',\n    'fill-opacity': 'fillOpacity',\n    'stroke-opacity': 'strokeOpacity',\n    'stroke-dasharray': 'lineDash',\n    'stroke-dashoffset': 'lineDashOffset',\n    'stroke-linecap': 'lineCap',\n    'stroke-linejoin': 'lineJoin',\n    'stroke-miterlimit': 'miterLimit',\n    'font-family': 'fontFamily',\n    'font-size': 'fontSize',\n    'font-style': 'fontStyle',\n    'font-weight': 'fontWeight',\n    'text-align': 'textAlign',\n    'alignment-baseline': 'textBaseline'\n};\nfunction parseAttributes(xmlNode, el, defs, onlyInlineStyle) {\n    var disp = el;\n    var zrStyle = disp.__inheritedStyle || {};\n    if (xmlNode.nodeType === 1) {\n        parseTransformAttribute(xmlNode, el);\n        extend(zrStyle, parseStyleAttribute(xmlNode));\n        if (!onlyInlineStyle) {\n            for (var svgAttrName in attributesMap) {\n                if (attributesMap.hasOwnProperty(svgAttrName)) {\n                    var attrValue = xmlNode.getAttribute(svgAttrName);\n                    if (attrValue != null) {\n                        zrStyle[attributesMap[svgAttrName]] = attrValue;\n                    }\n                }\n            }\n        }\n    }\n    disp.style = disp.style || {};\n    zrStyle.fill != null && (disp.style.fill = getPaint(zrStyle.fill, defs));\n    zrStyle.stroke != null && (disp.style.stroke = getPaint(zrStyle.stroke, defs));\n    each([\n        'lineWidth', 'opacity', 'fillOpacity', 'strokeOpacity', 'miterLimit', 'fontSize'\n    ], function (propName) {\n        zrStyle[propName] != null && (disp.style[propName] = parseFloat(zrStyle[propName]));\n    });\n    if (!zrStyle.textBaseline || zrStyle.textBaseline === 'auto') {\n        zrStyle.textBaseline = 'alphabetic';\n    }\n    if (zrStyle.textBaseline === 'alphabetic') {\n        zrStyle.textBaseline = 'bottom';\n    }\n    if (zrStyle.textAlign === 'start') {\n        zrStyle.textAlign = 'left';\n    }\n    if (zrStyle.textAlign === 'end') {\n        zrStyle.textAlign = 'right';\n    }\n    each(['lineDashOffset', 'lineCap', 'lineJoin',\n        'fontWeight', 'fontFamily', 'fontStyle', 'textAlign', 'textBaseline'\n    ], function (propName) {\n        zrStyle[propName] != null && (disp.style[propName] = zrStyle[propName]);\n    });\n    if (zrStyle.lineDash) {\n        disp.style.lineDash = map(trim(zrStyle.lineDash).split(DILIMITER_REG), function (str) {\n            return parseFloat(str);\n        });\n    }\n    disp.__inheritedStyle = zrStyle;\n}\nvar urlRegex = /url\\(\\s*#(.*?)\\)/;\nfunction getPaint(str, defs) {\n    var urlMatch = defs && str && str.match(urlRegex);\n    if (urlMatch) {\n        var url = trim(urlMatch[1]);\n        var def = defs[url];\n        return def;\n    }\n    return str;\n}\nvar transformRegex = /(translate|scale|rotate|skewX|skewY|matrix)\\(([\\-\\s0-9\\.e,]*)\\)/g;\nfunction parseTransformAttribute(xmlNode, node) {\n    var transform = xmlNode.getAttribute('transform');\n    if (transform) {\n        transform = transform.replace(/,/g, ' ');\n        var transformOps_1 = [];\n        var m = null;\n        transform.replace(transformRegex, function (str, type, value) {\n            transformOps_1.push(type, value);\n            return '';\n        });\n        for (var i = transformOps_1.length - 1; i > 0; i -= 2) {\n            var value = transformOps_1[i];\n            var type = transformOps_1[i - 1];\n            var valueArr = void 0;\n            m = m || matrix.create();\n            switch (type) {\n                case 'translate':\n                    valueArr = trim(value).split(DILIMITER_REG);\n                    matrix.translate(m, m, [parseFloat(valueArr[0]), parseFloat(valueArr[1] || '0')]);\n                    break;\n                case 'scale':\n                    valueArr = trim(value).split(DILIMITER_REG);\n                    matrix.scale(m, m, [parseFloat(valueArr[0]), parseFloat(valueArr[1] || valueArr[0])]);\n                    break;\n                case 'rotate':\n                    valueArr = trim(value).split(DILIMITER_REG);\n                    matrix.rotate(m, m, parseFloat(valueArr[0]));\n                    break;\n                case 'skew':\n                    valueArr = trim(value).split(DILIMITER_REG);\n                    console.warn('Skew transform is not supported yet');\n                    break;\n                case 'matrix':\n                    valueArr = trim(value).split(DILIMITER_REG);\n                    m[0] = parseFloat(valueArr[0]);\n                    m[1] = parseFloat(valueArr[1]);\n                    m[2] = parseFloat(valueArr[2]);\n                    m[3] = parseFloat(valueArr[3]);\n                    m[4] = parseFloat(valueArr[4]);\n                    m[5] = parseFloat(valueArr[5]);\n                    break;\n            }\n        }\n        node.setLocalTransform(m);\n    }\n}\nvar styleRegex = /([^\\s:;]+)\\s*:\\s*([^:;]+)/g;\nfunction parseStyleAttribute(xmlNode) {\n    var style = xmlNode.getAttribute('style');\n    var result = {};\n    if (!style) {\n        return result;\n    }\n    var styleList = {};\n    styleRegex.lastIndex = 0;\n    var styleRegResult;\n    while ((styleRegResult = styleRegex.exec(style)) != null) {\n        styleList[styleRegResult[1]] = styleRegResult[2];\n    }\n    for (var svgAttrName in attributesMap) {\n        if (attributesMap.hasOwnProperty(svgAttrName) && styleList[svgAttrName] != null) {\n            result[attributesMap[svgAttrName]] = styleList[svgAttrName];\n        }\n    }\n    return result;\n}\nexport function makeViewBoxTransform(viewBoxRect, width, height) {\n    var scaleX = width / viewBoxRect.width;\n    var scaleY = height / viewBoxRect.height;\n    var scale = Math.min(scaleX, scaleY);\n    return {\n        scale: scale,\n        x: -(viewBoxRect.x + viewBoxRect.width / 2) * scale + width / 2,\n        y: -(viewBoxRect.y + viewBoxRect.height / 2) * scale + height / 2\n    };\n}\nexport function parseSVG(xml, opt) {\n    var parser = new SVGParser();\n    return parser.parse(xml, opt);\n}\nexport { parseXML };\n","var Point = (function () {\n    function Point(x, y) {\n        this.x = x || 0;\n        this.y = y || 0;\n    }\n    Point.prototype.copy = function (other) {\n        this.x = other.x;\n        this.y = other.y;\n        return this;\n    };\n    Point.prototype.clone = function () {\n        return new Point(this.x, this.y);\n    };\n    Point.prototype.set = function (x, y) {\n        this.x = x;\n        this.y = y;\n        return this;\n    };\n    Point.prototype.equal = function (other) {\n        return other.x === this.x && other.y === this.y;\n    };\n    Point.prototype.add = function (other) {\n        this.x += other.x;\n        this.y += other.y;\n        return this;\n    };\n    Point.prototype.scale = function (scalar) {\n        this.x *= scalar;\n        this.y *= scalar;\n    };\n    Point.prototype.scaleAndAdd = function (other, scalar) {\n        this.x += other.x * scalar;\n        this.y += other.y * scalar;\n    };\n    Point.prototype.sub = function (other) {\n        this.x -= other.x;\n        this.y -= other.y;\n        return this;\n    };\n    Point.prototype.dot = function (other) {\n        return this.x * other.x + this.y * other.y;\n    };\n    Point.prototype.len = function () {\n        return Math.sqrt(this.x * this.x + this.y * this.y);\n    };\n    Point.prototype.lenSquare = function () {\n        return this.x * this.x + this.y * this.y;\n    };\n    Point.prototype.normalize = function () {\n        var len = this.len();\n        this.x /= len;\n        this.y /= len;\n        return this;\n    };\n    Point.prototype.distance = function (other) {\n        var dx = this.x - other.x;\n        var dy = this.y - other.y;\n        return Math.sqrt(dx * dx + dy * dy);\n    };\n    Point.prototype.distanceSquare = function (other) {\n        var dx = this.x - other.x;\n        var dy = this.y - other.y;\n        return dx * dx + dy * dy;\n    };\n    Point.prototype.negate = function () {\n        this.x = -this.x;\n        this.y = -this.y;\n        return this;\n    };\n    Point.prototype.transform = function (m) {\n        if (!m) {\n            return;\n        }\n        var x = this.x;\n        var y = this.y;\n        this.x = m[0] * x + m[2] * y + m[4];\n        this.y = m[1] * x + m[3] * y + m[5];\n        return this;\n    };\n    Point.prototype.toArray = function (out) {\n        out[0] = this.x;\n        out[1] = this.y;\n        return out;\n    };\n    Point.prototype.fromArray = function (input) {\n        this.x = input[0];\n        this.y = input[1];\n    };\n    Point.set = function (p, x, y) {\n        p.x = x;\n        p.y = y;\n    };\n    Point.copy = function (p, p2) {\n        p.x = p2.x;\n        p.y = p2.y;\n    };\n    Point.len = function (p) {\n        return Math.sqrt(p.x * p.x + p.y * p.y);\n    };\n    Point.lenSquare = function (p) {\n        return p.x * p.x + p.y * p.y;\n    };\n    Point.dot = function (p0, p1) {\n        return p0.x * p1.x + p0.y * p1.y;\n    };\n    Point.add = function (out, p0, p1) {\n        out.x = p0.x + p1.x;\n        out.y = p0.y + p1.y;\n    };\n    Point.sub = function (out, p0, p1) {\n        out.x = p0.x - p1.x;\n        out.y = p0.y - p1.y;\n    };\n    Point.scale = function (out, p0, scalar) {\n        out.x = p0.x * scalar;\n        out.y = p0.y * scalar;\n    };\n    Point.scaleAndAdd = function (out, p0, p1, scalar) {\n        out.x = p0.x + p1.x * scalar;\n        out.y = p0.y + p1.y * scalar;\n    };\n    Point.lerp = function (out, p0, p1, t) {\n        var onet = 1 - t;\n        out.x = onet * p0.x + t * p1.x;\n        out.y = onet * p0.y + t * p1.y;\n    };\n    return Point;\n}());\nexport default Point;\n","import { __extends } from \"tslib\";\nimport Displayable, { DEFAULT_COMMON_STYLE, DEFAULT_COMMON_ANIMATION_PROPS } from './Displayable';\nimport BoundingRect from '../core/BoundingRect';\nimport { defaults, createObject } from '../core/util';\nexport var DEFAULT_IMAGE_STYLE = defaults({\n    x: 0,\n    y: 0\n}, DEFAULT_COMMON_STYLE);\nexport var DEFAULT_IMAGE_ANIMATION_PROPS = {\n    style: defaults({\n        x: true,\n        y: true,\n        width: true,\n        height: true,\n        sx: true,\n        sy: true,\n        sWidth: true,\n        sHeight: true\n    }, DEFAULT_COMMON_ANIMATION_PROPS.style)\n};\nfunction isImageLike(source) {\n    return !!(source\n        && typeof source !== 'string'\n        && source.width && source.height);\n}\nvar ZRImage = (function (_super) {\n    __extends(ZRImage, _super);\n    function ZRImage() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    ZRImage.prototype.createStyle = function (obj) {\n        return createObject(DEFAULT_IMAGE_STYLE, obj);\n    };\n    ZRImage.prototype._getSize = function (dim) {\n        var style = this.style;\n        var size = style[dim];\n        if (size != null) {\n            return size;\n        }\n        var imageSource = isImageLike(style.image)\n            ? style.image : this.__image;\n        if (!imageSource) {\n            return 0;\n        }\n        var otherDim = dim === 'width' ? 'height' : 'width';\n        var otherDimSize = style[otherDim];\n        if (otherDimSize == null) {\n            return imageSource[dim];\n        }\n        else {\n            return imageSource[dim] / imageSource[otherDim] * otherDimSize;\n        }\n    };\n    ZRImage.prototype.getWidth = function () {\n        return this._getSize('width');\n    };\n    ZRImage.prototype.getHeight = function () {\n        return this._getSize('height');\n    };\n    ZRImage.prototype.getAnimationStyleProps = function () {\n        return DEFAULT_IMAGE_ANIMATION_PROPS;\n    };\n    ZRImage.prototype.getBoundingRect = function () {\n        var style = this.style;\n        if (!this._rect) {\n            this._rect = new BoundingRect(style.x || 0, style.y || 0, this.getWidth(), this.getHeight());\n        }\n        return this._rect;\n    };\n    return ZRImage;\n}(Displayable));\nZRImage.prototype.type = 'image';\nexport default ZRImage;\n","import { __extends } from \"tslib\";\nimport Element from '../Element';\nimport BoundingRect from '../core/BoundingRect';\nimport { keys, extend, createObject } from '../core/util';\nvar STYLE_MAGIC_KEY = '__zr_style_' + Math.round((Math.random() * 10));\nexport var DEFAULT_COMMON_STYLE = {\n    shadowBlur: 0,\n    shadowOffsetX: 0,\n    shadowOffsetY: 0,\n    shadowColor: '#000',\n    opacity: 1,\n    blend: 'source-over'\n};\nexport var DEFAULT_COMMON_ANIMATION_PROPS = {\n    style: {\n        shadowBlur: true,\n        shadowOffsetX: true,\n        shadowOffsetY: true,\n        shadowColor: true,\n        opacity: true\n    }\n};\nDEFAULT_COMMON_STYLE[STYLE_MAGIC_KEY] = true;\nvar PRIMARY_STATES_KEYS = ['z', 'z2', 'invisible'];\nvar Displayable = (function (_super) {\n    __extends(Displayable, _super);\n    function Displayable(props) {\n        return _super.call(this, props) || this;\n    }\n    Displayable.prototype._init = function (props) {\n        var keysArr = keys(props);\n        for (var i = 0; i < keysArr.length; i++) {\n            var key = keysArr[i];\n            if (key === 'style') {\n                this.useStyle(props[key]);\n            }\n            else {\n                _super.prototype.attrKV.call(this, key, props[key]);\n            }\n        }\n        if (!this.style) {\n            this.useStyle({});\n        }\n    };\n    Displayable.prototype.beforeBrush = function () { };\n    Displayable.prototype.afterBrush = function () { };\n    Displayable.prototype.innerBeforeBrush = function () { };\n    Displayable.prototype.innerAfterBrush = function () { };\n    Displayable.prototype.shouldBePainted = function (viewWidth, viewHeight, considerClipPath, considerAncestors) {\n        var m = this.transform;\n        if (this.ignore\n            || this.invisible\n            || this.style.opacity === 0\n            || (this.culling\n                && isDisplayableCulled(this, viewWidth, viewHeight))\n            || (m && !m[0] && !m[3])) {\n            return false;\n        }\n        if (considerClipPath && this.__clipPaths) {\n            for (var i = 0; i < this.__clipPaths.length; ++i) {\n                if (this.__clipPaths[i].isZeroArea()) {\n                    return false;\n                }\n            }\n        }\n        if (considerAncestors && this.parent) {\n            var parent_1 = this.parent;\n            while (parent_1) {\n                if (parent_1.ignore) {\n                    return false;\n                }\n                parent_1 = parent_1.parent;\n            }\n        }\n        return true;\n    };\n    Displayable.prototype.contain = function (x, y) {\n        return this.rectContain(x, y);\n    };\n    Displayable.prototype.traverse = function (cb, context) {\n        cb.call(context, this);\n    };\n    Displayable.prototype.rectContain = function (x, y) {\n        var coord = this.transformCoordToLocal(x, y);\n        var rect = this.getBoundingRect();\n        return rect.contain(coord[0], coord[1]);\n    };\n    Displayable.prototype.getPaintRect = function () {\n        var rect = this._paintRect;\n        if (!this._paintRect || this.__dirty) {\n            var transform = this.transform;\n            var elRect = this.getBoundingRect();\n            var style = this.style;\n            var shadowSize = style.shadowBlur || 0;\n            var shadowOffsetX = style.shadowOffsetX || 0;\n            var shadowOffsetY = style.shadowOffsetY || 0;\n            rect = this._paintRect || (this._paintRect = new BoundingRect(0, 0, 0, 0));\n            if (transform) {\n                BoundingRect.applyTransform(rect, elRect, transform);\n            }\n            else {\n                rect.copy(elRect);\n            }\n            if (shadowSize || shadowOffsetX || shadowOffsetY) {\n                rect.width += shadowSize * 2 + Math.abs(shadowOffsetX);\n                rect.height += shadowSize * 2 + Math.abs(shadowOffsetY);\n                rect.x = Math.min(rect.x, rect.x + shadowOffsetX - shadowSize);\n                rect.y = Math.min(rect.y, rect.y + shadowOffsetY - shadowSize);\n            }\n            var tolerance = this.dirtyRectTolerance;\n            if (!rect.isZero()) {\n                rect.x = Math.floor(rect.x - tolerance);\n                rect.y = Math.floor(rect.y - tolerance);\n                rect.width = Math.ceil(rect.width + 1 + tolerance * 2);\n                rect.height = Math.ceil(rect.height + 1 + tolerance * 2);\n            }\n        }\n        return rect;\n    };\n    Displayable.prototype.setPrevPaintRect = function (paintRect) {\n        if (paintRect) {\n            this._prevPaintRect = this._prevPaintRect || new BoundingRect(0, 0, 0, 0);\n            this._prevPaintRect.copy(paintRect);\n        }\n        else {\n            this._prevPaintRect = null;\n        }\n    };\n    Displayable.prototype.getPrevPaintRect = function () {\n        return this._prevPaintRect;\n    };\n    Displayable.prototype.animateStyle = function (loop) {\n        return this.animate('style', loop);\n    };\n    Displayable.prototype.updateDuringAnimation = function (targetKey) {\n        if (targetKey === 'style') {\n            this.dirtyStyle();\n        }\n        else {\n            this.markRedraw();\n        }\n    };\n    Displayable.prototype.attrKV = function (key, value) {\n        if (key !== 'style') {\n            _super.prototype.attrKV.call(this, key, value);\n        }\n        else {\n            if (!this.style) {\n                this.useStyle(value);\n            }\n            else {\n                this.setStyle(value);\n            }\n        }\n    };\n    Displayable.prototype.setStyle = function (keyOrObj, value) {\n        if (typeof keyOrObj === 'string') {\n            this.style[keyOrObj] = value;\n        }\n        else {\n            extend(this.style, keyOrObj);\n        }\n        this.dirtyStyle();\n        return this;\n    };\n    Displayable.prototype.dirtyStyle = function () {\n        this.markRedraw();\n        this.__dirty |= Displayable.STYLE_CHANGED_BIT;\n        if (this._rect) {\n            this._rect = null;\n        }\n    };\n    Displayable.prototype.dirty = function () {\n        this.dirtyStyle();\n    };\n    Displayable.prototype.styleChanged = function () {\n        return !!(this.__dirty & Displayable.STYLE_CHANGED_BIT);\n    };\n    Displayable.prototype.styleUpdated = function () {\n        this.__dirty &= ~Displayable.STYLE_CHANGED_BIT;\n    };\n    Displayable.prototype.createStyle = function (obj) {\n        return createObject(DEFAULT_COMMON_STYLE, obj);\n    };\n    Displayable.prototype.useStyle = function (obj) {\n        if (!obj[STYLE_MAGIC_KEY]) {\n            obj = this.createStyle(obj);\n        }\n        if (this.__inHover) {\n            this.__hoverStyle = obj;\n        }\n        else {\n            this.style = obj;\n        }\n        this.dirtyStyle();\n    };\n    Displayable.prototype.isStyleObject = function (obj) {\n        return obj[STYLE_MAGIC_KEY];\n    };\n    Displayable.prototype._innerSaveToNormal = function (toState) {\n        _super.prototype._innerSaveToNormal.call(this, toState);\n        var normalState = this._normalState;\n        if (toState.style && !normalState.style) {\n            normalState.style = this._mergeStyle(this.createStyle(), this.style);\n        }\n        this._savePrimaryToNormal(toState, normalState, PRIMARY_STATES_KEYS);\n    };\n    Displayable.prototype._applyStateObj = function (stateName, state, normalState, keepCurrentStates, transition, animationCfg) {\n        _super.prototype._applyStateObj.call(this, stateName, state, normalState, keepCurrentStates, transition, animationCfg);\n        var needsRestoreToNormal = !(state && keepCurrentStates);\n        var targetStyle;\n        if (state && state.style) {\n            if (transition) {\n                if (keepCurrentStates) {\n                    targetStyle = state.style;\n                }\n                else {\n                    targetStyle = this._mergeStyle(this.createStyle(), normalState.style);\n                    this._mergeStyle(targetStyle, state.style);\n                }\n            }\n            else {\n                targetStyle = this._mergeStyle(this.createStyle(), keepCurrentStates ? this.style : normalState.style);\n                this._mergeStyle(targetStyle, state.style);\n            }\n        }\n        else if (needsRestoreToNormal) {\n            targetStyle = normalState.style;\n        }\n        if (targetStyle) {\n            if (transition) {\n                var sourceStyle = this.style;\n                this.style = this.createStyle(needsRestoreToNormal ? {} : sourceStyle);\n                if (needsRestoreToNormal) {\n                    var changedKeys = keys(sourceStyle);\n                    for (var i = 0; i < changedKeys.length; i++) {\n                        var key = changedKeys[i];\n                        if (key in targetStyle) {\n                            targetStyle[key] = targetStyle[key];\n                            this.style[key] = sourceStyle[key];\n                        }\n                    }\n                }\n                var targetKeys = keys(targetStyle);\n                for (var i = 0; i < targetKeys.length; i++) {\n                    var key = targetKeys[i];\n                    this.style[key] = this.style[key];\n                }\n                this._transitionState(stateName, {\n                    style: targetStyle\n                }, animationCfg, this.getAnimationStyleProps());\n            }\n            else {\n                this.useStyle(targetStyle);\n            }\n        }\n        for (var i = 0; i < PRIMARY_STATES_KEYS.length; i++) {\n            var key = PRIMARY_STATES_KEYS[i];\n            if (state && state[key] != null) {\n                this[key] = state[key];\n            }\n            else if (needsRestoreToNormal) {\n                if (normalState[key] != null) {\n                    this[key] = normalState[key];\n                }\n            }\n        }\n    };\n    Displayable.prototype._mergeStates = function (states) {\n        var mergedState = _super.prototype._mergeStates.call(this, states);\n        var mergedStyle;\n        for (var i = 0; i < states.length; i++) {\n            var state = states[i];\n            if (state.style) {\n                mergedStyle = mergedStyle || {};\n                this._mergeStyle(mergedStyle, state.style);\n            }\n        }\n        if (mergedStyle) {\n            mergedState.style = mergedStyle;\n        }\n        return mergedState;\n    };\n    Displayable.prototype._mergeStyle = function (targetStyle, sourceStyle) {\n        extend(targetStyle, sourceStyle);\n        return targetStyle;\n    };\n    Displayable.prototype.getAnimationStyleProps = function () {\n        return DEFAULT_COMMON_ANIMATION_PROPS;\n    };\n    Displayable.STYLE_CHANGED_BIT = 2;\n    Displayable.initDefaultProps = (function () {\n        var dispProto = Displayable.prototype;\n        dispProto.type = 'displayable';\n        dispProto.invisible = false;\n        dispProto.z = 0;\n        dispProto.z2 = 0;\n        dispProto.zlevel = 0;\n        dispProto.culling = false;\n        dispProto.cursor = 'pointer';\n        dispProto.rectHover = false;\n        dispProto.incremental = false;\n        dispProto._rect = null;\n        dispProto.dirtyRectTolerance = 0;\n        dispProto.__dirty = Element.REDARAW_BIT | Displayable.STYLE_CHANGED_BIT;\n    })();\n    return Displayable;\n}(Element));\nvar tmpRect = new BoundingRect(0, 0, 0, 0);\nvar viewRect = new BoundingRect(0, 0, 0, 0);\nfunction isDisplayableCulled(el, width, height) {\n    tmpRect.copy(el.getBoundingRect());\n    if (el.transform) {\n        tmpRect.applyTransform(el.transform);\n    }\n    viewRect.width = width;\n    viewRect.height = height;\n    return !tmpRect.intersect(viewRect);\n}\nexport default Displayable;\n","var Eventful = (function () {\n    function Eventful(eventProcessors) {\n        if (eventProcessors) {\n            this._$eventProcessor = eventProcessors;\n        }\n    }\n    Eventful.prototype.on = function (event, query, handler, context) {\n        if (!this._$handlers) {\n            this._$handlers = {};\n        }\n        var _h = this._$handlers;\n        if (typeof query === 'function') {\n            context = handler;\n            handler = query;\n            query = null;\n        }\n        if (!handler || !event) {\n            return this;\n        }\n        var eventProcessor = this._$eventProcessor;\n        if (query != null && eventProcessor && eventProcessor.normalizeQuery) {\n            query = eventProcessor.normalizeQuery(query);\n        }\n        if (!_h[event]) {\n            _h[event] = [];\n        }\n        for (var i = 0; i < _h[event].length; i++) {\n            if (_h[event][i].h === handler) {\n                return this;\n            }\n        }\n        var wrap = {\n            h: handler,\n            query: query,\n            ctx: (context || this),\n            callAtLast: handler.zrEventfulCallAtLast\n        };\n        var lastIndex = _h[event].length - 1;\n        var lastWrap = _h[event][lastIndex];\n        (lastWrap && lastWrap.callAtLast)\n            ? _h[event].splice(lastIndex, 0, wrap)\n            : _h[event].push(wrap);\n        return this;\n    };\n    Eventful.prototype.isSilent = function (eventName) {\n        var _h = this._$handlers;\n        return !_h || !_h[eventName] || !_h[eventName].length;\n    };\n    Eventful.prototype.off = function (eventType, handler) {\n        var _h = this._$handlers;\n        if (!_h) {\n            return this;\n        }\n        if (!eventType) {\n            this._$handlers = {};\n            return this;\n        }\n        if (handler) {\n            if (_h[eventType]) {\n                var newList = [];\n                for (var i = 0, l = _h[eventType].length; i < l; i++) {\n                    if (_h[eventType][i].h !== handler) {\n                        newList.push(_h[eventType][i]);\n                    }\n                }\n                _h[eventType] = newList;\n            }\n            if (_h[eventType] && _h[eventType].length === 0) {\n                delete _h[eventType];\n            }\n        }\n        else {\n            delete _h[eventType];\n        }\n        return this;\n    };\n    Eventful.prototype.trigger = function (eventType) {\n        var args = [];\n        for (var _i = 1; _i < arguments.length; _i++) {\n            args[_i - 1] = arguments[_i];\n        }\n        if (!this._$handlers) {\n            return this;\n        }\n        var _h = this._$handlers[eventType];\n        var eventProcessor = this._$eventProcessor;\n        if (_h) {\n            var argLen = args.length;\n            var len = _h.length;\n            for (var i = 0; i < len; i++) {\n                var hItem = _h[i];\n                if (eventProcessor\n                    && eventProcessor.filter\n                    && hItem.query != null\n                    && !eventProcessor.filter(eventType, hItem.query)) {\n                    continue;\n                }\n                switch (argLen) {\n                    case 0:\n                        hItem.h.call(hItem.ctx);\n                        break;\n                    case 1:\n                        hItem.h.call(hItem.ctx, args[0]);\n                        break;\n                    case 2:\n                        hItem.h.call(hItem.ctx, args[0], args[1]);\n                        break;\n                    default:\n                        hItem.h.apply(hItem.ctx, args);\n                        break;\n                }\n            }\n        }\n        eventProcessor && eventProcessor.afterTrigger\n            && eventProcessor.afterTrigger(eventType);\n        return this;\n    };\n    Eventful.prototype.triggerWithContext = function (type) {\n        if (!this._$handlers) {\n            return this;\n        }\n        var _h = this._$handlers[type];\n        var eventProcessor = this._$eventProcessor;\n        if (_h) {\n            var args = arguments;\n            var argLen = args.length;\n            var ctx = args[argLen - 1];\n            var len = _h.length;\n            for (var i = 0; i < len; i++) {\n                var hItem = _h[i];\n                if (eventProcessor\n                    && eventProcessor.filter\n                    && hItem.query != null\n                    && !eventProcessor.filter(type, hItem.query)) {\n                    continue;\n                }\n                switch (argLen) {\n                    case 0:\n                        hItem.h.call(ctx);\n                        break;\n                    case 1:\n                        hItem.h.call(ctx, args[0]);\n                        break;\n                    case 2:\n                        hItem.h.call(ctx, args[0], args[1]);\n                        break;\n                    default:\n                        hItem.h.apply(ctx, args.slice(1, argLen - 1));\n                        break;\n                }\n            }\n        }\n        eventProcessor && eventProcessor.afterTrigger\n            && eventProcessor.afterTrigger(type);\n        return this;\n    };\n    return Eventful;\n}());\nexport default Eventful;\n","import { __extends } from \"tslib\";\nimport Path from './Path';\nvar CompoundPath = (function (_super) {\n    __extends(CompoundPath, _super);\n    function CompoundPath() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.type = 'compound';\n        return _this;\n    }\n    CompoundPath.prototype._updatePathDirty = function () {\n        var paths = this.shape.paths;\n        var dirtyPath = this.shapeChanged();\n        for (var i = 0; i < paths.length; i++) {\n            dirtyPath = dirtyPath || paths[i].shapeChanged();\n        }\n        if (dirtyPath) {\n            this.dirtyShape();\n        }\n    };\n    CompoundPath.prototype.beforeBrush = function () {\n        this._updatePathDirty();\n        var paths = this.shape.paths || [];\n        var scale = this.getGlobalScale();\n        for (var i = 0; i < paths.length; i++) {\n            if (!paths[i].path) {\n                paths[i].createPathProxy();\n            }\n            paths[i].path.setScale(scale[0], scale[1], paths[i].segmentIgnoreThreshold);\n        }\n    };\n    CompoundPath.prototype.buildPath = function (ctx, shape) {\n        var paths = shape.paths || [];\n        for (var i = 0; i < paths.length; i++) {\n            paths[i].buildPath(ctx, paths[i].shape, true);\n        }\n    };\n    CompoundPath.prototype.afterBrush = function () {\n        var paths = this.shape.paths || [];\n        for (var i = 0; i < paths.length; i++) {\n            paths[i].pathUpdated();\n        }\n    };\n    CompoundPath.prototype.getBoundingRect = function () {\n        this._updatePathDirty.call(this);\n        return Path.prototype.getBoundingRect.call(this);\n    };\n    return CompoundPath;\n}(Path));\nexport default CompoundPath;\n","import { __extends } from \"tslib\";\nimport Gradient from './Gradient';\nvar RadialGradient = (function (_super) {\n    __extends(RadialGradient, _super);\n    function RadialGradient(x, y, r, colorStops, globalCoord) {\n        var _this = _super.call(this, colorStops) || this;\n        _this.x = x == null ? 0.5 : x;\n        _this.y = y == null ? 0.5 : y;\n        _this.r = r == null ? 0.5 : r;\n        _this.type = 'radial';\n        _this.global = globalCoord || false;\n        return _this;\n    }\n    return RadialGradient;\n}(Gradient));\nexport default RadialGradient;\n","import Point from './Point';\nvar extent = [0, 0];\nvar extent2 = [0, 0];\nvar minTv = new Point();\nvar maxTv = new Point();\nvar OrientedBoundingRect = (function () {\n    function OrientedBoundingRect(rect, transform) {\n        this._corners = [];\n        this._axes = [];\n        this._origin = [0, 0];\n        for (var i = 0; i < 4; i++) {\n            this._corners[i] = new Point();\n        }\n        for (var i = 0; i < 2; i++) {\n            this._axes[i] = new Point();\n        }\n        if (rect) {\n            this.fromBoundingRect(rect, transform);\n        }\n    }\n    OrientedBoundingRect.prototype.fromBoundingRect = function (rect, transform) {\n        var corners = this._corners;\n        var axes = this._axes;\n        var x = rect.x;\n        var y = rect.y;\n        var x2 = x + rect.width;\n        var y2 = y + rect.height;\n        corners[0].set(x, y);\n        corners[1].set(x2, y);\n        corners[2].set(x2, y2);\n        corners[3].set(x, y2);\n        if (transform) {\n            for (var i = 0; i < 4; i++) {\n                corners[i].transform(transform);\n            }\n        }\n        Point.sub(axes[0], corners[1], corners[0]);\n        Point.sub(axes[1], corners[3], corners[0]);\n        axes[0].normalize();\n        axes[1].normalize();\n        for (var i = 0; i < 2; i++) {\n            this._origin[i] = axes[i].dot(corners[0]);\n        }\n    };\n    OrientedBoundingRect.prototype.intersect = function (other, mtv) {\n        var overlapped = true;\n        var noMtv = !mtv;\n        minTv.set(Infinity, Infinity);\n        maxTv.set(0, 0);\n        if (!this._intersectCheckOneSide(this, other, minTv, maxTv, noMtv, 1)) {\n            overlapped = false;\n            if (noMtv) {\n                return overlapped;\n            }\n        }\n        if (!this._intersectCheckOneSide(other, this, minTv, maxTv, noMtv, -1)) {\n            overlapped = false;\n            if (noMtv) {\n                return overlapped;\n            }\n        }\n        if (!noMtv) {\n            Point.copy(mtv, overlapped ? minTv : maxTv);\n        }\n        return overlapped;\n    };\n    OrientedBoundingRect.prototype._intersectCheckOneSide = function (self, other, minTv, maxTv, noMtv, inverse) {\n        var overlapped = true;\n        for (var i = 0; i < 2; i++) {\n            var axis = this._axes[i];\n            this._getProjMinMaxOnAxis(i, self._corners, extent);\n            this._getProjMinMaxOnAxis(i, other._corners, extent2);\n            if (extent[1] < extent2[0] || extent[0] > extent2[1]) {\n                overlapped = false;\n                if (noMtv) {\n                    return overlapped;\n                }\n                var dist0 = Math.abs(extent2[0] - extent[1]);\n                var dist1 = Math.abs(extent[0] - extent2[1]);\n                if (Math.min(dist0, dist1) > maxTv.len()) {\n                    if (dist0 < dist1) {\n                        Point.scale(maxTv, axis, -dist0 * inverse);\n                    }\n                    else {\n                        Point.scale(maxTv, axis, dist1 * inverse);\n                    }\n                }\n            }\n            else if (minTv) {\n                var dist0 = Math.abs(extent2[0] - extent[1]);\n                var dist1 = Math.abs(extent[0] - extent2[1]);\n                if (Math.min(dist0, dist1) < minTv.len()) {\n                    if (dist0 < dist1) {\n                        Point.scale(minTv, axis, dist0 * inverse);\n                    }\n                    else {\n                        Point.scale(minTv, axis, -dist1 * inverse);\n                    }\n                }\n            }\n        }\n        return overlapped;\n    };\n    OrientedBoundingRect.prototype._getProjMinMaxOnAxis = function (dim, corners, out) {\n        var axis = this._axes[dim];\n        var origin = this._origin;\n        var proj = corners[0].dot(axis) + origin[dim];\n        var min = proj;\n        var max = proj;\n        for (var i = 1; i < corners.length; i++) {\n            var proj_1 = corners[i].dot(axis) + origin[dim];\n            min = Math.min(proj_1, min);\n            max = Math.max(proj_1, max);\n        }\n        out[0] = min;\n        out[1] = max;\n    };\n    return OrientedBoundingRect;\n}());\nexport default OrientedBoundingRect;\n","import * as vec2 from './vector';\nimport BoundingRect from './BoundingRect';\nimport { devicePixelRatio as dpr } from '../config';\nimport { fromLine, fromCubic, fromQuadratic, fromArc } from './bbox';\nimport { cubicAt, cubicLength, cubicSubdivide, quadraticLength, quadraticSubdivide } from './curve';\nvar CMD = {\n    M: 1,\n    L: 2,\n    C: 3,\n    Q: 4,\n    A: 5,\n    Z: 6,\n    R: 7\n};\nvar tmpOutX = [];\nvar tmpOutY = [];\nvar min = [];\nvar max = [];\nvar min2 = [];\nvar max2 = [];\nvar mathMin = Math.min;\nvar mathMax = Math.max;\nvar mathCos = Math.cos;\nvar mathSin = Math.sin;\nvar mathSqrt = Math.sqrt;\nvar mathAbs = Math.abs;\nvar PI = Math.PI;\nvar PI2 = PI * 2;\nvar hasTypedArray = typeof Float32Array !== 'undefined';\nvar tmpAngles = [];\nfunction modPI2(radian) {\n    var n = Math.round(radian / PI * 1e8) / 1e8;\n    return (n % 2) * PI;\n}\nexport function normalizeArcAngles(angles, anticlockwise) {\n    var newStartAngle = modPI2(angles[0]);\n    if (newStartAngle < 0) {\n        newStartAngle += PI2;\n    }\n    var delta = newStartAngle - angles[0];\n    var newEndAngle = angles[1];\n    newEndAngle += delta;\n    if (!anticlockwise && newEndAngle - newStartAngle >= PI2) {\n        newEndAngle = newStartAngle + PI2;\n    }\n    else if (anticlockwise && newStartAngle - newEndAngle >= PI2) {\n        newEndAngle = newStartAngle - PI2;\n    }\n    else if (!anticlockwise && newStartAngle > newEndAngle) {\n        newEndAngle = newStartAngle +\n            (PI2 - modPI2(newStartAngle - newEndAngle));\n    }\n    else if (anticlockwise && newStartAngle < newEndAngle) {\n        newEndAngle = newStartAngle -\n            (PI2 - modPI2(newEndAngle - newStartAngle));\n    }\n    angles[0] = newStartAngle;\n    angles[1] = newEndAngle;\n}\nvar PathProxy = (function () {\n    function PathProxy(notSaveData) {\n        this.dpr = 1;\n        this._version = 0;\n        this._xi = 0;\n        this._yi = 0;\n        this._x0 = 0;\n        this._y0 = 0;\n        this._len = 0;\n        if (notSaveData) {\n            this._saveData = false;\n        }\n        if (this._saveData) {\n            this.data = [];\n        }\n    }\n    PathProxy.prototype.increaseVersion = function () {\n        this._version++;\n    };\n    PathProxy.prototype.getVersion = function () {\n        return this._version;\n    };\n    PathProxy.prototype.setScale = function (sx, sy, segmentIgnoreThreshold) {\n        segmentIgnoreThreshold = segmentIgnoreThreshold || 0;\n        if (segmentIgnoreThreshold > 0) {\n            this._ux = mathAbs(segmentIgnoreThreshold / dpr / sx) || 0;\n            this._uy = mathAbs(segmentIgnoreThreshold / dpr / sy) || 0;\n        }\n    };\n    PathProxy.prototype.setDPR = function (dpr) {\n        this.dpr = dpr;\n    };\n    PathProxy.prototype.setContext = function (ctx) {\n        this._ctx = ctx;\n    };\n    PathProxy.prototype.getContext = function () {\n        return this._ctx;\n    };\n    PathProxy.prototype.beginPath = function () {\n        this._ctx && this._ctx.beginPath();\n        this.reset();\n        return this;\n    };\n    PathProxy.prototype.reset = function () {\n        if (this._saveData) {\n            this._len = 0;\n        }\n        if (this._lineDash) {\n            this._lineDash = null;\n            this._dashOffset = 0;\n        }\n        if (this._pathSegLen) {\n            this._pathSegLen = null;\n            this._pathLen = 0;\n        }\n        this._version++;\n    };\n    PathProxy.prototype.moveTo = function (x, y) {\n        this.addData(CMD.M, x, y);\n        this._ctx && this._ctx.moveTo(x, y);\n        this._x0 = x;\n        this._y0 = y;\n        this._xi = x;\n        this._yi = y;\n        return this;\n    };\n    PathProxy.prototype.lineTo = function (x, y) {\n        var exceedUnit = mathAbs(x - this._xi) > this._ux\n            || mathAbs(y - this._yi) > this._uy\n            || this._len < 5;\n        this.addData(CMD.L, x, y);\n        if (this._ctx && exceedUnit) {\n            this._needsDash ? this._dashedLineTo(x, y)\n                : this._ctx.lineTo(x, y);\n        }\n        if (exceedUnit) {\n            this._xi = x;\n            this._yi = y;\n        }\n        return this;\n    };\n    PathProxy.prototype.bezierCurveTo = function (x1, y1, x2, y2, x3, y3) {\n        this.addData(CMD.C, x1, y1, x2, y2, x3, y3);\n        if (this._ctx) {\n            this._needsDash ? this._dashedBezierTo(x1, y1, x2, y2, x3, y3)\n                : this._ctx.bezierCurveTo(x1, y1, x2, y2, x3, y3);\n        }\n        this._xi = x3;\n        this._yi = y3;\n        return this;\n    };\n    PathProxy.prototype.quadraticCurveTo = function (x1, y1, x2, y2) {\n        this.addData(CMD.Q, x1, y1, x2, y2);\n        if (this._ctx) {\n            this._needsDash ? this._dashedQuadraticTo(x1, y1, x2, y2)\n                : this._ctx.quadraticCurveTo(x1, y1, x2, y2);\n        }\n        this._xi = x2;\n        this._yi = y2;\n        return this;\n    };\n    PathProxy.prototype.arc = function (cx, cy, r, startAngle, endAngle, anticlockwise) {\n        tmpAngles[0] = startAngle;\n        tmpAngles[1] = endAngle;\n        normalizeArcAngles(tmpAngles, anticlockwise);\n        startAngle = tmpAngles[0];\n        endAngle = tmpAngles[1];\n        var delta = endAngle - startAngle;\n        this.addData(CMD.A, cx, cy, r, r, startAngle, delta, 0, anticlockwise ? 0 : 1);\n        this._ctx && this._ctx.arc(cx, cy, r, startAngle, endAngle, anticlockwise);\n        this._xi = mathCos(endAngle) * r + cx;\n        this._yi = mathSin(endAngle) * r + cy;\n        return this;\n    };\n    PathProxy.prototype.arcTo = function (x1, y1, x2, y2, radius) {\n        if (this._ctx) {\n            this._ctx.arcTo(x1, y1, x2, y2, radius);\n        }\n        return this;\n    };\n    PathProxy.prototype.rect = function (x, y, w, h) {\n        this._ctx && this._ctx.rect(x, y, w, h);\n        this.addData(CMD.R, x, y, w, h);\n        return this;\n    };\n    PathProxy.prototype.closePath = function () {\n        this.addData(CMD.Z);\n        var ctx = this._ctx;\n        var x0 = this._x0;\n        var y0 = this._y0;\n        if (ctx) {\n            this._needsDash && this._dashedLineTo(x0, y0);\n            ctx.closePath();\n        }\n        this._xi = x0;\n        this._yi = y0;\n        return this;\n    };\n    PathProxy.prototype.fill = function (ctx) {\n        ctx && ctx.fill();\n        this.toStatic();\n    };\n    PathProxy.prototype.stroke = function (ctx) {\n        ctx && ctx.stroke();\n        this.toStatic();\n    };\n    PathProxy.prototype.setLineDash = function (lineDash) {\n        if (lineDash instanceof Array) {\n            this._lineDash = lineDash;\n            this._dashIdx = 0;\n            var lineDashSum = 0;\n            for (var i = 0; i < lineDash.length; i++) {\n                lineDashSum += lineDash[i];\n            }\n            this._dashSum = lineDashSum;\n            this._needsDash = true;\n        }\n        else {\n            this._lineDash = null;\n            this._needsDash = false;\n        }\n        return this;\n    };\n    PathProxy.prototype.setLineDashOffset = function (offset) {\n        this._dashOffset = offset;\n        return this;\n    };\n    PathProxy.prototype.len = function () {\n        return this._len;\n    };\n    PathProxy.prototype.setData = function (data) {\n        var len = data.length;\n        if (!(this.data && this.data.length === len) && hasTypedArray) {\n            this.data = new Float32Array(len);\n        }\n        for (var i = 0; i < len; i++) {\n            this.data[i] = data[i];\n        }\n        this._len = len;\n    };\n    PathProxy.prototype.appendPath = function (path) {\n        if (!(path instanceof Array)) {\n            path = [path];\n        }\n        var len = path.length;\n        var appendSize = 0;\n        var offset = this._len;\n        for (var i = 0; i < len; i++) {\n            appendSize += path[i].len();\n        }\n        if (hasTypedArray && (this.data instanceof Float32Array)) {\n            this.data = new Float32Array(offset + appendSize);\n        }\n        for (var i = 0; i < len; i++) {\n            var appendPathData = path[i].data;\n            for (var k = 0; k < appendPathData.length; k++) {\n                this.data[offset++] = appendPathData[k];\n            }\n        }\n        this._len = offset;\n    };\n    PathProxy.prototype.addData = function (cmd, a, b, c, d, e, f, g, h) {\n        if (!this._saveData) {\n            return;\n        }\n        var data = this.data;\n        if (this._len + arguments.length > data.length) {\n            this._expandData();\n            data = this.data;\n        }\n        for (var i = 0; i < arguments.length; i++) {\n            data[this._len++] = arguments[i];\n        }\n    };\n    PathProxy.prototype._expandData = function () {\n        if (!(this.data instanceof Array)) {\n            var newData = [];\n            for (var i = 0; i < this._len; i++) {\n                newData[i] = this.data[i];\n            }\n            this.data = newData;\n        }\n    };\n    PathProxy.prototype._dashedLineTo = function (x1, y1) {\n        var dashSum = this._dashSum;\n        var lineDash = this._lineDash;\n        var ctx = this._ctx;\n        var offset = this._dashOffset;\n        var x0 = this._xi;\n        var y0 = this._yi;\n        var dx = x1 - x0;\n        var dy = y1 - y0;\n        var dist = mathSqrt(dx * dx + dy * dy);\n        var x = x0;\n        var y = y0;\n        var nDash = lineDash.length;\n        var dash;\n        var idx;\n        dx /= dist;\n        dy /= dist;\n        if (offset < 0) {\n            offset = dashSum + offset;\n        }\n        offset %= dashSum;\n        x -= offset * dx;\n        y -= offset * dy;\n        while ((dx > 0 && x <= x1) || (dx < 0 && x >= x1)\n            || (dx === 0 && ((dy > 0 && y <= y1) || (dy < 0 && y >= y1)))) {\n            idx = this._dashIdx;\n            dash = lineDash[idx];\n            x += dx * dash;\n            y += dy * dash;\n            this._dashIdx = (idx + 1) % nDash;\n            if ((dx > 0 && x < x0) || (dx < 0 && x > x0) || (dy > 0 && y < y0) || (dy < 0 && y > y0)) {\n                continue;\n            }\n            ctx[idx % 2 ? 'moveTo' : 'lineTo'](dx >= 0 ? mathMin(x, x1) : mathMax(x, x1), dy >= 0 ? mathMin(y, y1) : mathMax(y, y1));\n        }\n        dx = x - x1;\n        dy = y - y1;\n        this._dashOffset = -mathSqrt(dx * dx + dy * dy);\n    };\n    PathProxy.prototype._dashedBezierTo = function (x1, y1, x2, y2, x3, y3) {\n        var ctx = this._ctx;\n        var dashSum = this._dashSum;\n        var offset = this._dashOffset;\n        var lineDash = this._lineDash;\n        var x0 = this._xi;\n        var y0 = this._yi;\n        var bezierLen = 0;\n        var idx = this._dashIdx;\n        var nDash = lineDash.length;\n        var t;\n        var dx;\n        var dy;\n        var x;\n        var y;\n        var tmpLen = 0;\n        if (offset < 0) {\n            offset = dashSum + offset;\n        }\n        offset %= dashSum;\n        for (t = 0; t < 1; t += 0.1) {\n            dx = cubicAt(x0, x1, x2, x3, t + 0.1)\n                - cubicAt(x0, x1, x2, x3, t);\n            dy = cubicAt(y0, y1, y2, y3, t + 0.1)\n                - cubicAt(y0, y1, y2, y3, t);\n            bezierLen += mathSqrt(dx * dx + dy * dy);\n        }\n        for (; idx < nDash; idx++) {\n            tmpLen += lineDash[idx];\n            if (tmpLen > offset) {\n                break;\n            }\n        }\n        t = (tmpLen - offset) / bezierLen;\n        while (t <= 1) {\n            x = cubicAt(x0, x1, x2, x3, t);\n            y = cubicAt(y0, y1, y2, y3, t);\n            idx % 2 ? ctx.moveTo(x, y)\n                : ctx.lineTo(x, y);\n            t += lineDash[idx] / bezierLen;\n            idx = (idx + 1) % nDash;\n        }\n        (idx % 2 !== 0) && ctx.lineTo(x3, y3);\n        dx = x3 - x;\n        dy = y3 - y;\n        this._dashOffset = -mathSqrt(dx * dx + dy * dy);\n    };\n    PathProxy.prototype._dashedQuadraticTo = function (x1, y1, x2, y2) {\n        var x3 = x2;\n        var y3 = y2;\n        x2 = (x2 + 2 * x1) / 3;\n        y2 = (y2 + 2 * y1) / 3;\n        x1 = (this._xi + 2 * x1) / 3;\n        y1 = (this._yi + 2 * y1) / 3;\n        this._dashedBezierTo(x1, y1, x2, y2, x3, y3);\n    };\n    PathProxy.prototype.toStatic = function () {\n        if (!this._saveData) {\n            return;\n        }\n        var data = this.data;\n        if (data instanceof Array) {\n            data.length = this._len;\n            if (hasTypedArray && this._len > 11) {\n                this.data = new Float32Array(data);\n            }\n        }\n    };\n    PathProxy.prototype.getBoundingRect = function () {\n        min[0] = min[1] = min2[0] = min2[1] = Number.MAX_VALUE;\n        max[0] = max[1] = max2[0] = max2[1] = -Number.MAX_VALUE;\n        var data = this.data;\n        var xi = 0;\n        var yi = 0;\n        var x0 = 0;\n        var y0 = 0;\n        var i;\n        for (i = 0; i < this._len;) {\n            var cmd = data[i++];\n            var isFirst = i === 1;\n            if (isFirst) {\n                xi = data[i];\n                yi = data[i + 1];\n                x0 = xi;\n                y0 = yi;\n            }\n            switch (cmd) {\n                case CMD.M:\n                    xi = x0 = data[i++];\n                    yi = y0 = data[i++];\n                    min2[0] = x0;\n                    min2[1] = y0;\n                    max2[0] = x0;\n                    max2[1] = y0;\n                    break;\n                case CMD.L:\n                    fromLine(xi, yi, data[i], data[i + 1], min2, max2);\n                    xi = data[i++];\n                    yi = data[i++];\n                    break;\n                case CMD.C:\n                    fromCubic(xi, yi, data[i++], data[i++], data[i++], data[i++], data[i], data[i + 1], min2, max2);\n                    xi = data[i++];\n                    yi = data[i++];\n                    break;\n                case CMD.Q:\n                    fromQuadratic(xi, yi, data[i++], data[i++], data[i], data[i + 1], min2, max2);\n                    xi = data[i++];\n                    yi = data[i++];\n                    break;\n                case CMD.A:\n                    var cx = data[i++];\n                    var cy = data[i++];\n                    var rx = data[i++];\n                    var ry = data[i++];\n                    var startAngle = data[i++];\n                    var endAngle = data[i++] + startAngle;\n                    i += 1;\n                    var anticlockwise = !data[i++];\n                    if (isFirst) {\n                        x0 = mathCos(startAngle) * rx + cx;\n                        y0 = mathSin(startAngle) * ry + cy;\n                    }\n                    fromArc(cx, cy, rx, ry, startAngle, endAngle, anticlockwise, min2, max2);\n                    xi = mathCos(endAngle) * rx + cx;\n                    yi = mathSin(endAngle) * ry + cy;\n                    break;\n                case CMD.R:\n                    x0 = xi = data[i++];\n                    y0 = yi = data[i++];\n                    var width = data[i++];\n                    var height = data[i++];\n                    fromLine(x0, y0, x0 + width, y0 + height, min2, max2);\n                    break;\n                case CMD.Z:\n                    xi = x0;\n                    yi = y0;\n                    break;\n            }\n            vec2.min(min, min, min2);\n            vec2.max(max, max, max2);\n        }\n        if (i === 0) {\n            min[0] = min[1] = max[0] = max[1] = 0;\n        }\n        return new BoundingRect(min[0], min[1], max[0] - min[0], max[1] - min[1]);\n    };\n    PathProxy.prototype._calculateLength = function () {\n        var data = this.data;\n        var len = this._len;\n        var ux = this._ux;\n        var uy = this._uy;\n        var xi = 0;\n        var yi = 0;\n        var x0 = 0;\n        var y0 = 0;\n        if (!this._pathSegLen) {\n            this._pathSegLen = [];\n        }\n        var pathSegLen = this._pathSegLen;\n        var pathTotalLen = 0;\n        var segCount = 0;\n        for (var i = 0; i < len;) {\n            var cmd = data[i++];\n            var isFirst = i === 1;\n            if (isFirst) {\n                xi = data[i];\n                yi = data[i + 1];\n                x0 = xi;\n                y0 = yi;\n            }\n            var l = -1;\n            switch (cmd) {\n                case CMD.M:\n                    xi = x0 = data[i++];\n                    yi = y0 = data[i++];\n                    break;\n                case CMD.L: {\n                    var x2 = data[i++];\n                    var y2 = data[i++];\n                    var dx = x2 - xi;\n                    var dy = y2 - yi;\n                    if (mathAbs(dx) > ux || mathAbs(dy) > uy || i === len - 1) {\n                        l = Math.sqrt(dx * dx + dy * dy);\n                        xi = x2;\n                        yi = y2;\n                    }\n                    break;\n                }\n                case CMD.C: {\n                    var x1 = data[i++];\n                    var y1 = data[i++];\n                    var x2 = data[i++];\n                    var y2 = data[i++];\n                    var x3 = data[i++];\n                    var y3 = data[i++];\n                    l = cubicLength(xi, yi, x1, y1, x2, y2, x3, y3, 10);\n                    xi = x3;\n                    yi = y3;\n                    break;\n                }\n                case CMD.Q: {\n                    var x1 = data[i++];\n                    var y1 = data[i++];\n                    var x2 = data[i++];\n                    var y2 = data[i++];\n                    l = quadraticLength(xi, yi, x1, y1, x2, y2, 10);\n                    xi = x2;\n                    yi = y2;\n                    break;\n                }\n                case CMD.A:\n                    var cx = data[i++];\n                    var cy = data[i++];\n                    var rx = data[i++];\n                    var ry = data[i++];\n                    var startAngle = data[i++];\n                    var delta = data[i++];\n                    var endAngle = delta + startAngle;\n                    i += 1;\n                    var anticlockwise = !data[i++];\n                    if (isFirst) {\n                        x0 = mathCos(startAngle) * rx + cx;\n                        y0 = mathSin(startAngle) * ry + cy;\n                    }\n                    l = mathMax(rx, ry) * mathMin(PI2, Math.abs(delta));\n                    xi = mathCos(endAngle) * rx + cx;\n                    yi = mathSin(endAngle) * ry + cy;\n                    break;\n                case CMD.R: {\n                    x0 = xi = data[i++];\n                    y0 = yi = data[i++];\n                    var width = data[i++];\n                    var height = data[i++];\n                    l = width * 2 + height * 2;\n                    break;\n                }\n                case CMD.Z: {\n                    var dx = x0 - xi;\n                    var dy = y0 - yi;\n                    l = Math.sqrt(dx * dx + dy * dy);\n                    xi = x0;\n                    yi = y0;\n                    break;\n                }\n            }\n            if (l >= 0) {\n                pathSegLen[segCount++] = l;\n                pathTotalLen += l;\n            }\n        }\n        this._pathLen = pathTotalLen;\n        return pathTotalLen;\n    };\n    PathProxy.prototype.rebuildPath = function (ctx, percent) {\n        var d = this.data;\n        var ux = this._ux;\n        var uy = this._uy;\n        var len = this._len;\n        var x0;\n        var y0;\n        var xi;\n        var yi;\n        var x;\n        var y;\n        var drawPart = percent < 1;\n        var pathSegLen;\n        var pathTotalLen;\n        var accumLength = 0;\n        var segCount = 0;\n        var displayedLength;\n        if (drawPart) {\n            if (!this._pathSegLen) {\n                this._calculateLength();\n            }\n            pathSegLen = this._pathSegLen;\n            pathTotalLen = this._pathLen;\n            displayedLength = percent * pathTotalLen;\n            if (!displayedLength) {\n                return;\n            }\n        }\n        lo: for (var i = 0; i < len;) {\n            var cmd = d[i++];\n            var isFirst = i === 1;\n            if (isFirst) {\n                xi = d[i];\n                yi = d[i + 1];\n                x0 = xi;\n                y0 = yi;\n            }\n            switch (cmd) {\n                case CMD.M:\n                    x0 = xi = d[i++];\n                    y0 = yi = d[i++];\n                    ctx.moveTo(xi, yi);\n                    break;\n                case CMD.L: {\n                    x = d[i++];\n                    y = d[i++];\n                    if (mathAbs(x - xi) > ux || mathAbs(y - yi) > uy || i === len - 1) {\n                        if (drawPart) {\n                            var l = pathSegLen[segCount++];\n                            if (accumLength + l > displayedLength) {\n                                var t = (displayedLength - accumLength) / l;\n                                ctx.lineTo(xi * (1 - t) + x * t, yi * (1 - t) + y * t);\n                                break lo;\n                            }\n                            accumLength += l;\n                        }\n                        ctx.lineTo(x, y);\n                        xi = x;\n                        yi = y;\n                    }\n                    break;\n                }\n                case CMD.C: {\n                    var x1 = d[i++];\n                    var y1 = d[i++];\n                    var x2 = d[i++];\n                    var y2 = d[i++];\n                    var x3 = d[i++];\n                    var y3 = d[i++];\n                    if (drawPart) {\n                        var l = pathSegLen[segCount++];\n                        if (accumLength + l > displayedLength) {\n                            var t = (displayedLength - accumLength) / l;\n                            cubicSubdivide(xi, x1, x2, x3, t, tmpOutX);\n                            cubicSubdivide(yi, y1, y2, y3, t, tmpOutY);\n                            ctx.bezierCurveTo(tmpOutX[1], tmpOutY[1], tmpOutX[2], tmpOutY[2], tmpOutX[3], tmpOutY[3]);\n                            break lo;\n                        }\n                        accumLength += l;\n                    }\n                    ctx.bezierCurveTo(x1, y1, x2, y2, x3, y3);\n                    xi = x3;\n                    yi = y3;\n                    break;\n                }\n                case CMD.Q: {\n                    var x1 = d[i++];\n                    var y1 = d[i++];\n                    var x2 = d[i++];\n                    var y2 = d[i++];\n                    if (drawPart) {\n                        var l = pathSegLen[segCount++];\n                        if (accumLength + l > displayedLength) {\n                            var t = (displayedLength - accumLength) / l;\n                            quadraticSubdivide(xi, x1, x2, t, tmpOutX);\n                            quadraticSubdivide(yi, y1, y2, t, tmpOutY);\n                            ctx.quadraticCurveTo(tmpOutX[1], tmpOutY[1], tmpOutX[2], tmpOutY[2]);\n                            break lo;\n                        }\n                        accumLength += l;\n                    }\n                    ctx.quadraticCurveTo(x1, y1, x2, y2);\n                    xi = x2;\n                    yi = y2;\n                    break;\n                }\n                case CMD.A:\n                    var cx = d[i++];\n                    var cy = d[i++];\n                    var rx = d[i++];\n                    var ry = d[i++];\n                    var startAngle = d[i++];\n                    var delta = d[i++];\n                    var psi = d[i++];\n                    var anticlockwise = !d[i++];\n                    var r = (rx > ry) ? rx : ry;\n                    var scaleX = (rx > ry) ? 1 : rx / ry;\n                    var scaleY = (rx > ry) ? ry / rx : 1;\n                    var isEllipse = mathAbs(rx - ry) > 1e-3;\n                    var endAngle = startAngle + delta;\n                    var breakBuild = false;\n                    if (drawPart) {\n                        var l = pathSegLen[segCount++];\n                        if (accumLength + l > displayedLength) {\n                            endAngle = startAngle + delta * (displayedLength - accumLength) / l;\n                            breakBuild = true;\n                        }\n                        accumLength += l;\n                    }\n                    if (isEllipse && ctx.ellipse) {\n                        ctx.ellipse(cx, cy, rx, ry, psi, startAngle, endAngle, anticlockwise);\n                    }\n                    else {\n                        ctx.arc(cx, cy, r, startAngle, endAngle, anticlockwise);\n                    }\n                    if (breakBuild) {\n                        break lo;\n                    }\n                    if (isFirst) {\n                        x0 = mathCos(startAngle) * rx + cx;\n                        y0 = mathSin(startAngle) * ry + cy;\n                    }\n                    xi = mathCos(endAngle) * rx + cx;\n                    yi = mathSin(endAngle) * ry + cy;\n                    break;\n                case CMD.R:\n                    x0 = xi = d[i];\n                    y0 = yi = d[i + 1];\n                    x = d[i++];\n                    y = d[i++];\n                    var width = d[i++];\n                    var height = d[i++];\n                    if (drawPart) {\n                        var l = pathSegLen[segCount++];\n                        if (accumLength + l > displayedLength) {\n                            var d_1 = displayedLength - accumLength;\n                            ctx.moveTo(x, y);\n                            ctx.lineTo(x + mathMin(d_1, width), y);\n                            d_1 -= width;\n                            if (d_1 > 0) {\n                                ctx.lineTo(x + width, y + mathMin(d_1, height));\n                            }\n                            d_1 -= height;\n                            if (d_1 > 0) {\n                                ctx.lineTo(x + mathMax(width - d_1, 0), y + height);\n                            }\n                            d_1 -= width;\n                            if (d_1 > 0) {\n                                ctx.lineTo(x, y + mathMax(height - d_1, 0));\n                            }\n                            break lo;\n                        }\n                        accumLength += l;\n                    }\n                    ctx.rect(x, y, width, height);\n                    break;\n                case CMD.Z:\n                    if (drawPart) {\n                        var l = pathSegLen[segCount++];\n                        if (accumLength + l > displayedLength) {\n                            var t = (displayedLength - accumLength) / l;\n                            ctx.lineTo(xi * (1 - t) + x0 * t, yi * (1 - t) + y0 * t);\n                            break lo;\n                        }\n                        accumLength += l;\n                    }\n                    ctx.closePath();\n                    xi = x0;\n                    yi = y0;\n            }\n        }\n    };\n    PathProxy.CMD = CMD;\n    PathProxy.initDefaultProps = (function () {\n        var proto = PathProxy.prototype;\n        proto._saveData = true;\n        proto._needsDash = false;\n        proto._dashOffset = 0;\n        proto._dashIdx = 0;\n        proto._dashSum = 0;\n        proto._ux = 0;\n        proto._uy = 0;\n    })();\n    return PathProxy;\n}());\nexport default PathProxy;\n","var dpr = 1;\nif (typeof window !== 'undefined') {\n    dpr = Math.max(window.devicePixelRatio\n        || (window.screen && window.screen.deviceXDPI / window.screen.logicalXDPI)\n        || 1, 1);\n}\nexport var debugMode = 0;\nexport var devicePixelRatio = dpr;\nexport var DARK_MODE_THRESHOLD = 0.4;\nexport var DARK_LABEL_COLOR = '#333';\nexport var LIGHT_LABEL_COLOR = '#ccc';\nexport var LIGHTER_LABEL_COLOR = '#eee';\n","export function createElement(name) {\n    return document.createElementNS('http://www.w3.org/2000/svg', name);\n}\n","function diff(oldArr, newArr, equals) {\n    if (!equals) {\n        equals = function (a, b) {\n            return a === b;\n        };\n    }\n    oldArr = oldArr.slice();\n    newArr = newArr.slice();\n    var newLen = newArr.length;\n    var oldLen = oldArr.length;\n    var editLength = 1;\n    var maxEditLength = newLen + oldLen;\n    var bestPath = [{ newPos: -1, components: [] }];\n    var oldPos = extractCommon(bestPath[0], newArr, oldArr, 0, equals);\n    if (bestPath[0].newPos + 1 >= newLen && oldPos + 1 >= oldLen) {\n        var indices = [];\n        for (var i = 0; i < newArr.length; i++) {\n            indices.push(i);\n        }\n        return [{\n                indices: indices,\n                count: newArr.length,\n                added: false,\n                removed: false\n            }];\n    }\n    function execEditLength() {\n        for (var diagonalPath = -1 * editLength; diagonalPath <= editLength; diagonalPath += 2) {\n            var basePath;\n            var addPath = bestPath[diagonalPath - 1];\n            var removePath = bestPath[diagonalPath + 1];\n            var oldPos = (removePath ? removePath.newPos : 0) - diagonalPath;\n            if (addPath) {\n                bestPath[diagonalPath - 1] = undefined;\n            }\n            var canAdd = addPath && addPath.newPos + 1 < newLen;\n            var canRemove = removePath && 0 <= oldPos && oldPos < oldLen;\n            if (!canAdd && !canRemove) {\n                bestPath[diagonalPath] = undefined;\n                continue;\n            }\n            if (!canAdd || (canRemove && addPath.newPos < removePath.newPos)) {\n                basePath = clonePath(removePath);\n                pushComponent(basePath.components, false, true);\n            }\n            else {\n                basePath = addPath;\n                basePath.newPos++;\n                pushComponent(basePath.components, true, false);\n            }\n            oldPos = extractCommon(basePath, newArr, oldArr, diagonalPath, equals);\n            if (basePath.newPos + 1 >= newLen && oldPos + 1 >= oldLen) {\n                return buildValues(basePath.components);\n            }\n            else {\n                bestPath[diagonalPath] = basePath;\n            }\n        }\n        editLength++;\n    }\n    while (editLength <= maxEditLength) {\n        var ret = execEditLength();\n        if (ret) {\n            return ret;\n        }\n    }\n}\nfunction extractCommon(basePath, newArr, oldArr, diagonalPath, equals) {\n    var newLen = newArr.length;\n    var oldLen = oldArr.length;\n    var newPos = basePath.newPos;\n    var oldPos = newPos - diagonalPath;\n    var commonCount = 0;\n    while (newPos + 1 < newLen && oldPos + 1 < oldLen && equals(newArr[newPos + 1], oldArr[oldPos + 1])) {\n        newPos++;\n        oldPos++;\n        commonCount++;\n    }\n    if (commonCount) {\n        basePath.components.push({\n            count: commonCount,\n            added: false,\n            removed: false,\n            indices: []\n        });\n    }\n    basePath.newPos = newPos;\n    return oldPos;\n}\nfunction pushComponent(components, added, removed) {\n    var last = components[components.length - 1];\n    if (last && last.added === added && last.removed === removed) {\n        components[components.length - 1] = {\n            count: last.count + 1,\n            added: added,\n            removed: removed,\n            indices: []\n        };\n    }\n    else {\n        components.push({\n            count: 1,\n            added: added,\n            removed: removed,\n            indices: []\n        });\n    }\n}\nfunction buildValues(components) {\n    var componentPos = 0;\n    var componentLen = components.length;\n    var newPos = 0;\n    var oldPos = 0;\n    for (; componentPos < componentLen; componentPos++) {\n        var component = components[componentPos];\n        if (!component.removed) {\n            var indices = [];\n            for (var i = newPos; i < newPos + component.count; i++) {\n                indices.push(i);\n            }\n            component.indices = indices;\n            newPos += component.count;\n            if (!component.added) {\n                oldPos += component.count;\n            }\n        }\n        else {\n            for (var i = oldPos; i < oldPos + component.count; i++) {\n                component.indices.push(i);\n            }\n            oldPos += component.count;\n        }\n    }\n    return components;\n}\nfunction clonePath(path) {\n    return { newPos: path.newPos, components: path.components.slice(0) };\n}\nexport default function arrayDiff(oldArr, newArr, equal) {\n    return diff(oldArr, newArr, equal);\n}\n","import { createElement } from './core';\nimport ZRImage from '../graphic/Image';\nimport { DEFAULT_FONT, getLineHeight } from '../contain/text';\nimport { map } from '../core/util';\nimport { normalizeLineDash } from '../graphic/helper/dashStyle';\nvar NONE = 'none';\nvar mathRound = Math.round;\nvar mathSin = Math.sin;\nvar mathCos = Math.cos;\nvar PI = Math.PI;\nvar PI2 = Math.PI * 2;\nvar degree = 180 / PI;\nvar EPSILON = 1e-4;\nfunction round3(val) {\n    return mathRound(val * 1e3) / 1e3;\n}\nfunction round4(val) {\n    return mathRound(val * 1e4) / 1e4;\n}\nfunction isAroundZero(val) {\n    return val < EPSILON && val > -EPSILON;\n}\nfunction pathHasFill(style) {\n    var fill = style.fill;\n    return fill != null && fill !== NONE;\n}\nfunction pathHasStroke(style) {\n    var stroke = style.stroke;\n    return stroke != null && stroke !== NONE;\n}\nfunction setTransform(svgEl, m) {\n    if (m) {\n        attr(svgEl, 'transform', 'matrix('\n            + round3(m[0]) + ','\n            + round3(m[1]) + ','\n            + round3(m[2]) + ','\n            + round3(m[3]) + ','\n            + round4(m[4]) + ','\n            + round4(m[5])\n            + ')');\n    }\n}\nfunction attr(el, key, val) {\n    if (!val || val.type !== 'linear' && val.type !== 'radial') {\n        el.setAttribute(key, val);\n    }\n}\nfunction attrXLink(el, key, val) {\n    el.setAttributeNS('http://www.w3.org/1999/xlink', key, val);\n}\nfunction attrXML(el, key, val) {\n    el.setAttributeNS('http://www.w3.org/XML/1998/namespace', key, val);\n}\nfunction bindStyle(svgEl, style, el) {\n    var opacity = style.opacity == null ? 1 : style.opacity;\n    if (el instanceof ZRImage) {\n        svgEl.style.opacity = opacity + '';\n        return;\n    }\n    if (pathHasFill(style)) {\n        var fill = style.fill;\n        fill = fill === 'transparent' ? NONE : fill;\n        attr(svgEl, 'fill', fill);\n        attr(svgEl, 'fill-opacity', (style.fillOpacity != null ? style.fillOpacity * opacity : opacity) + '');\n    }\n    else {\n        attr(svgEl, 'fill', NONE);\n    }\n    if (pathHasStroke(style)) {\n        var stroke = style.stroke;\n        stroke = stroke === 'transparent' ? NONE : stroke;\n        attr(svgEl, 'stroke', stroke);\n        var strokeWidth = style.lineWidth;\n        var strokeScale_1 = style.strokeNoScale\n            ? el.getLineScale()\n            : 1;\n        attr(svgEl, 'stroke-width', (strokeScale_1 ? strokeWidth / strokeScale_1 : 0) + '');\n        attr(svgEl, 'paint-order', style.strokeFirst ? 'stroke' : 'fill');\n        attr(svgEl, 'stroke-opacity', (style.strokeOpacity != null ? style.strokeOpacity * opacity : opacity) + '');\n        var lineDash = style.lineDash && strokeWidth > 0 && normalizeLineDash(style.lineDash, strokeWidth);\n        if (lineDash) {\n            var lineDashOffset = style.lineDashOffset;\n            if (strokeScale_1 && strokeScale_1 !== 1) {\n                lineDash = map(lineDash, function (rawVal) {\n                    return rawVal / strokeScale_1;\n                });\n                if (lineDashOffset) {\n                    lineDashOffset /= strokeScale_1;\n                    lineDashOffset = mathRound(lineDashOffset);\n                }\n            }\n            attr(svgEl, 'stroke-dasharray', lineDash.join(','));\n            attr(svgEl, 'stroke-dashoffset', (lineDashOffset || 0) + '');\n        }\n        else {\n            attr(svgEl, 'stroke-dasharray', '');\n        }\n        style.lineCap && attr(svgEl, 'stroke-linecap', style.lineCap);\n        style.lineJoin && attr(svgEl, 'stroke-linejoin', style.lineJoin);\n        style.miterLimit && attr(svgEl, 'stroke-miterlimit', style.miterLimit + '');\n    }\n    else {\n        attr(svgEl, 'stroke', NONE);\n    }\n}\nvar SVGPathRebuilder = (function () {\n    function SVGPathRebuilder() {\n    }\n    SVGPathRebuilder.prototype.reset = function () {\n        this._d = [];\n        this._str = '';\n    };\n    SVGPathRebuilder.prototype.moveTo = function (x, y) {\n        this._add('M', x, y);\n    };\n    SVGPathRebuilder.prototype.lineTo = function (x, y) {\n        this._add('L', x, y);\n    };\n    SVGPathRebuilder.prototype.bezierCurveTo = function (x, y, x2, y2, x3, y3) {\n        this._add('C', x, y, x2, y2, x3, y3);\n    };\n    SVGPathRebuilder.prototype.quadraticCurveTo = function (x, y, x2, y2) {\n        this._add('Q', x, y, x2, y2);\n    };\n    SVGPathRebuilder.prototype.arc = function (cx, cy, r, startAngle, endAngle, anticlockwise) {\n        this.ellipse(cx, cy, r, r, 0, startAngle, endAngle, anticlockwise);\n    };\n    SVGPathRebuilder.prototype.ellipse = function (cx, cy, rx, ry, psi, startAngle, endAngle, anticlockwise) {\n        var firstCmd = this._d.length === 0;\n        var dTheta = endAngle - startAngle;\n        var clockwise = !anticlockwise;\n        var dThetaPositive = Math.abs(dTheta);\n        var isCircle = isAroundZero(dThetaPositive - PI2)\n            || (clockwise ? dTheta >= PI2 : -dTheta >= PI2);\n        var unifiedTheta = dTheta > 0 ? dTheta % PI2 : (dTheta % PI2 + PI2);\n        var large = false;\n        if (isCircle) {\n            large = true;\n        }\n        else if (isAroundZero(dThetaPositive)) {\n            large = false;\n        }\n        else {\n            large = (unifiedTheta >= PI) === !!clockwise;\n        }\n        var x0 = round4(cx + rx * mathCos(startAngle));\n        var y0 = round4(cy + ry * mathSin(startAngle));\n        if (isCircle) {\n            if (clockwise) {\n                dTheta = PI2 - 1e-4;\n            }\n            else {\n                dTheta = -PI2 + 1e-4;\n            }\n            large = true;\n            if (firstCmd) {\n                this._d.push('M', x0, y0);\n            }\n        }\n        var x = round4(cx + rx * mathCos(startAngle + dTheta));\n        var y = round4(cy + ry * mathSin(startAngle + dTheta));\n        if (isNaN(x0) || isNaN(y0) || isNaN(rx) || isNaN(ry) || isNaN(psi) || isNaN(degree) || isNaN(x) || isNaN(y)) {\n            return '';\n        }\n        this._d.push('A', round4(rx), round4(ry), mathRound(psi * degree), +large, +clockwise, x, y);\n    };\n    SVGPathRebuilder.prototype.rect = function (x, y, w, h) {\n        this._add('M', x, y);\n        this._add('L', x + w, y);\n        this._add('L', x + w, y + h);\n        this._add('L', x, y + h);\n        this._add('L', x, y);\n    };\n    SVGPathRebuilder.prototype.closePath = function () {\n        if (this._d.length > 0) {\n            this._add('Z');\n        }\n    };\n    SVGPathRebuilder.prototype._add = function (cmd, a, b, c, d, e, f, g, h) {\n        this._d.push(cmd);\n        for (var i = 1; i < arguments.length; i++) {\n            var val = arguments[i];\n            if (isNaN(val)) {\n                this._invalid = true;\n                return;\n            }\n            this._d.push(round4(val));\n        }\n    };\n    SVGPathRebuilder.prototype.generateStr = function () {\n        this._str = this._invalid ? '' : this._d.join(' ');\n        this._d = [];\n    };\n    SVGPathRebuilder.prototype.getStr = function () {\n        return this._str;\n    };\n    return SVGPathRebuilder;\n}());\nvar svgPath = {\n    brush: function (el) {\n        var style = el.style;\n        var svgEl = el.__svgEl;\n        if (!svgEl) {\n            svgEl = createElement('path');\n            el.__svgEl = svgEl;\n        }\n        if (!el.path) {\n            el.createPathProxy();\n        }\n        var path = el.path;\n        if (el.shapeChanged()) {\n            path.beginPath();\n            el.buildPath(path, el.shape);\n            el.pathUpdated();\n        }\n        var pathVersion = path.getVersion();\n        var elExt = el;\n        var svgPathBuilder = elExt.__svgPathBuilder;\n        if (elExt.__svgPathVersion !== pathVersion || !svgPathBuilder || el.style.strokePercent < 1) {\n            if (!svgPathBuilder) {\n                svgPathBuilder = elExt.__svgPathBuilder = new SVGPathRebuilder();\n            }\n            svgPathBuilder.reset();\n            path.rebuildPath(svgPathBuilder, el.style.strokePercent);\n            svgPathBuilder.generateStr();\n            elExt.__svgPathVersion = pathVersion;\n        }\n        attr(svgEl, 'd', svgPathBuilder.getStr());\n        bindStyle(svgEl, style, el);\n        setTransform(svgEl, el.transform);\n    }\n};\nexport { svgPath as path };\nvar svgImage = {\n    brush: function (el) {\n        var style = el.style;\n        var image = style.image;\n        if (image instanceof HTMLImageElement) {\n            image = image.src;\n        }\n        else if (image instanceof HTMLCanvasElement) {\n            image = image.toDataURL();\n        }\n        if (!image) {\n            return;\n        }\n        var x = style.x || 0;\n        var y = style.y || 0;\n        var dw = style.width;\n        var dh = style.height;\n        var svgEl = el.__svgEl;\n        if (!svgEl) {\n            svgEl = createElement('image');\n            el.__svgEl = svgEl;\n        }\n        if (image !== el.__imageSrc) {\n            attrXLink(svgEl, 'href', image);\n            el.__imageSrc = image;\n        }\n        attr(svgEl, 'width', dw + '');\n        attr(svgEl, 'height', dh + '');\n        attr(svgEl, 'x', x + '');\n        attr(svgEl, 'y', y + '');\n        bindStyle(svgEl, style, el);\n        setTransform(svgEl, el.transform);\n    }\n};\nexport { svgImage as image };\nvar TEXT_ALIGN_TO_ANCHOR = {\n    left: 'start',\n    right: 'end',\n    center: 'middle',\n    middle: 'middle'\n};\nfunction adjustTextY(y, lineHeight, textBaseline) {\n    if (textBaseline === 'top') {\n        y += lineHeight / 2;\n    }\n    else if (textBaseline === 'bottom') {\n        y -= lineHeight / 2;\n    }\n    return y;\n}\nvar svgText = {\n    brush: function (el) {\n        var style = el.style;\n        var text = style.text;\n        text != null && (text += '');\n        if (!text || isNaN(style.x) || isNaN(style.y)) {\n            return;\n        }\n        var textSvgEl = el.__svgEl;\n        if (!textSvgEl) {\n            textSvgEl = createElement('text');\n            attrXML(textSvgEl, 'xml:space', 'preserve');\n            el.__svgEl = textSvgEl;\n        }\n        var font = style.font || DEFAULT_FONT;\n        var textSvgElStyle = textSvgEl.style;\n        textSvgElStyle.font = font;\n        textSvgEl.textContent = text;\n        bindStyle(textSvgEl, style, el);\n        setTransform(textSvgEl, el.transform);\n        var x = style.x || 0;\n        var y = adjustTextY(style.y || 0, getLineHeight(font), style.textBaseline);\n        var textAlign = TEXT_ALIGN_TO_ANCHOR[style.textAlign]\n            || style.textAlign;\n        attr(textSvgEl, 'dominant-baseline', 'central');\n        attr(textSvgEl, 'text-anchor', textAlign);\n        attr(textSvgEl, 'x', x + '');\n        attr(textSvgEl, 'y', y + '');\n    }\n};\nexport { svgText as text };\n","import { createElement } from '../core';\nimport * as zrUtil from '../../core/util';\nimport Path from '../../graphic/Path';\nimport ZRImage from '../../graphic/Image';\nimport TSpan from '../../graphic/TSpan';\nimport { path as svgPath, image as svgImage, text as svgText } from '../graphic';\nvar MARK_UNUSED = '0';\nvar MARK_USED = '1';\nvar Definable = (function () {\n    function Definable(zrId, svgRoot, tagNames, markLabel, domName) {\n        this.nextId = 0;\n        this._domName = '_dom';\n        this.createElement = createElement;\n        this._zrId = zrId;\n        this._svgRoot = svgRoot;\n        this._tagNames = typeof tagNames === 'string' ? [tagNames] : tagNames;\n        this._markLabel = markLabel;\n        if (domName) {\n            this._domName = domName;\n        }\n    }\n    Definable.prototype.getDefs = function (isForceCreating) {\n        var svgRoot = this._svgRoot;\n        var defs = this._svgRoot.getElementsByTagName('defs');\n        if (defs.length === 0) {\n            if (isForceCreating) {\n                var defs_1 = svgRoot.insertBefore(this.createElement('defs'), svgRoot.firstChild);\n                if (!defs_1.contains) {\n                    defs_1.contains = function (el) {\n                        var children = defs_1.children;\n                        if (!children) {\n                            return false;\n                        }\n                        for (var i = children.length - 1; i >= 0; --i) {\n                            if (children[i] === el) {\n                                return true;\n                            }\n                        }\n                        return false;\n                    };\n                }\n                return defs_1;\n            }\n            else {\n                return null;\n            }\n        }\n        else {\n            return defs[0];\n        }\n    };\n    Definable.prototype.doUpdate = function (target, onUpdate) {\n        if (!target) {\n            return;\n        }\n        var defs = this.getDefs(false);\n        if (target[this._domName] && defs.contains(target[this._domName])) {\n            if (typeof onUpdate === 'function') {\n                onUpdate(target);\n            }\n        }\n        else {\n            var dom = this.add(target);\n            if (dom) {\n                target[this._domName] = dom;\n            }\n        }\n    };\n    Definable.prototype.add = function (target) {\n        return null;\n    };\n    Definable.prototype.addDom = function (dom) {\n        var defs = this.getDefs(true);\n        if (dom.parentNode !== defs) {\n            defs.appendChild(dom);\n        }\n    };\n    Definable.prototype.removeDom = function (target) {\n        var defs = this.getDefs(false);\n        if (defs && target[this._domName]) {\n            defs.removeChild(target[this._domName]);\n            target[this._domName] = null;\n        }\n    };\n    Definable.prototype.getDoms = function () {\n        var defs = this.getDefs(false);\n        if (!defs) {\n            return [];\n        }\n        var doms = [];\n        zrUtil.each(this._tagNames, function (tagName) {\n            var tags = defs.getElementsByTagName(tagName);\n            for (var i = 0; i < tags.length; i++) {\n                doms.push(tags[i]);\n            }\n        });\n        return doms;\n    };\n    Definable.prototype.markAllUnused = function () {\n        var doms = this.getDoms();\n        var that = this;\n        zrUtil.each(doms, function (dom) {\n            dom[that._markLabel] = MARK_UNUSED;\n        });\n    };\n    Definable.prototype.markDomUsed = function (dom) {\n        dom && (dom[this._markLabel] = MARK_USED);\n    };\n    ;\n    Definable.prototype.markDomUnused = function (dom) {\n        dom && (dom[this._markLabel] = MARK_UNUSED);\n    };\n    ;\n    Definable.prototype.isDomUnused = function (dom) {\n        return dom && dom[this._markLabel] !== MARK_USED;\n    };\n    Definable.prototype.removeUnused = function () {\n        var _this = this;\n        var defs = this.getDefs(false);\n        if (!defs) {\n            return;\n        }\n        var doms = this.getDoms();\n        zrUtil.each(doms, function (dom) {\n            if (_this.isDomUnused(dom)) {\n                defs.removeChild(dom);\n            }\n        });\n    };\n    Definable.prototype.getSvgProxy = function (displayable) {\n        if (displayable instanceof Path) {\n            return svgPath;\n        }\n        else if (displayable instanceof ZRImage) {\n            return svgImage;\n        }\n        else if (displayable instanceof TSpan) {\n            return svgText;\n        }\n        else {\n            return svgPath;\n        }\n    };\n    Definable.prototype.getSvgElement = function (displayable) {\n        return displayable.__svgEl;\n    };\n    return Definable;\n}());\nexport default Definable;\n","import { __extends } from \"tslib\";\nimport Definable from './Definable';\nimport * as zrUtil from '../../core/util';\nimport * as colorTool from '../../tool/color';\nfunction isLinearGradient(value) {\n    return value.type === 'linear';\n}\nfunction isRadialGradient(value) {\n    return value.type === 'radial';\n}\nfunction isGradient(value) {\n    return value && (value.type === 'linear'\n        || value.type === 'radial');\n}\nvar GradientManager = (function (_super) {\n    __extends(GradientManager, _super);\n    function GradientManager(zrId, svgRoot) {\n        return _super.call(this, zrId, svgRoot, ['linearGradient', 'radialGradient'], '__gradient_in_use__') || this;\n    }\n    GradientManager.prototype.addWithoutUpdate = function (svgElement, displayable) {\n        if (displayable && displayable.style) {\n            var that_1 = this;\n            zrUtil.each(['fill', 'stroke'], function (fillOrStroke) {\n                var value = displayable.style[fillOrStroke];\n                if (isGradient(value)) {\n                    var gradient = value;\n                    var defs = that_1.getDefs(true);\n                    var dom = void 0;\n                    if (gradient.__dom) {\n                        dom = gradient.__dom;\n                        if (!defs.contains(gradient.__dom)) {\n                            that_1.addDom(dom);\n                        }\n                    }\n                    else {\n                        dom = that_1.add(gradient);\n                    }\n                    that_1.markUsed(displayable);\n                    var id = dom.getAttribute('id');\n                    svgElement.setAttribute(fillOrStroke, 'url(#' + id + ')');\n                }\n            });\n        }\n    };\n    GradientManager.prototype.add = function (gradient) {\n        var dom;\n        if (isLinearGradient(gradient)) {\n            dom = this.createElement('linearGradient');\n        }\n        else if (isRadialGradient(gradient)) {\n            dom = this.createElement('radialGradient');\n        }\n        else {\n            zrUtil.logError('Illegal gradient type.');\n            return null;\n        }\n        gradient.id = gradient.id || this.nextId++;\n        dom.setAttribute('id', 'zr' + this._zrId\n            + '-gradient-' + gradient.id);\n        this.updateDom(gradient, dom);\n        this.addDom(dom);\n        return dom;\n    };\n    GradientManager.prototype.update = function (gradient) {\n        if (!isGradient(gradient)) {\n            return;\n        }\n        var that = this;\n        this.doUpdate(gradient, function () {\n            var dom = gradient.__dom;\n            if (!dom) {\n                return;\n            }\n            var tagName = dom.tagName;\n            var type = gradient.type;\n            if (type === 'linear' && tagName === 'linearGradient'\n                || type === 'radial' && tagName === 'radialGradient') {\n                that.updateDom(gradient, gradient.__dom);\n            }\n            else {\n                that.removeDom(gradient);\n                that.add(gradient);\n            }\n        });\n    };\n    GradientManager.prototype.updateDom = function (gradient, dom) {\n        if (isLinearGradient(gradient)) {\n            dom.setAttribute('x1', gradient.x + '');\n            dom.setAttribute('y1', gradient.y + '');\n            dom.setAttribute('x2', gradient.x2 + '');\n            dom.setAttribute('y2', gradient.y2 + '');\n        }\n        else if (isRadialGradient(gradient)) {\n            dom.setAttribute('cx', gradient.x + '');\n            dom.setAttribute('cy', gradient.y + '');\n            dom.setAttribute('r', gradient.r + '');\n        }\n        else {\n            zrUtil.logError('Illegal gradient type.');\n            return;\n        }\n        if (gradient.global) {\n            dom.setAttribute('gradientUnits', 'userSpaceOnUse');\n        }\n        else {\n            dom.setAttribute('gradientUnits', 'objectBoundingBox');\n        }\n        dom.innerHTML = '';\n        var colors = gradient.colorStops;\n        for (var i = 0, len = colors.length; i < len; ++i) {\n            var stop_1 = this.createElement('stop');\n            stop_1.setAttribute('offset', colors[i].offset * 100 + '%');\n            var color = colors[i].color;\n            if (color.indexOf('rgba') > -1) {\n                var opacity = colorTool.parse(color)[3];\n                var hex = colorTool.toHex(color);\n                stop_1.setAttribute('stop-color', '#' + hex);\n                stop_1.setAttribute('stop-opacity', opacity + '');\n            }\n            else {\n                stop_1.setAttribute('stop-color', colors[i].color);\n            }\n            dom.appendChild(stop_1);\n        }\n        gradient.__dom = dom;\n    };\n    GradientManager.prototype.markUsed = function (displayable) {\n        if (displayable.style) {\n            var gradient = displayable.style.fill;\n            if (gradient && gradient.__dom) {\n                _super.prototype.markDomUsed.call(this, gradient.__dom);\n            }\n            gradient = displayable.style.stroke;\n            if (gradient && gradient.__dom) {\n                _super.prototype.markDomUsed.call(this, gradient.__dom);\n            }\n        }\n    };\n    return GradientManager;\n}(Definable));\nexport default GradientManager;\n","import { __extends } from \"tslib\";\nimport Definable from './Definable';\nimport * as zrUtil from '../../core/util';\nimport { createOrUpdateImage } from '../../graphic/helper/image';\nimport WeakMap from '../../core/WeakMap';\nfunction isPattern(value) {\n    return value && (!!value.image || !!value.svgElement);\n}\nvar patternDomMap = new WeakMap();\nvar PatternManager = (function (_super) {\n    __extends(PatternManager, _super);\n    function PatternManager(zrId, svgRoot) {\n        return _super.call(this, zrId, svgRoot, ['pattern'], '__pattern_in_use__') || this;\n    }\n    PatternManager.prototype.addWithoutUpdate = function (svgElement, displayable) {\n        if (displayable && displayable.style) {\n            var that_1 = this;\n            zrUtil.each(['fill', 'stroke'], function (fillOrStroke) {\n                var pattern = displayable.style[fillOrStroke];\n                if (isPattern(pattern)) {\n                    var defs = that_1.getDefs(true);\n                    var dom = patternDomMap.get(pattern);\n                    if (dom) {\n                        if (!defs.contains(dom)) {\n                            that_1.addDom(dom);\n                        }\n                    }\n                    else {\n                        dom = that_1.add(pattern);\n                    }\n                    that_1.markUsed(displayable);\n                    var id = dom.getAttribute('id');\n                    svgElement.setAttribute(fillOrStroke, 'url(#' + id + ')');\n                }\n            });\n        }\n    };\n    PatternManager.prototype.add = function (pattern) {\n        if (!isPattern(pattern)) {\n            return;\n        }\n        var dom = this.createElement('pattern');\n        pattern.id = pattern.id == null ? this.nextId++ : pattern.id;\n        dom.setAttribute('id', 'zr' + this._zrId\n            + '-pattern-' + pattern.id);\n        dom.setAttribute('x', '0');\n        dom.setAttribute('y', '0');\n        dom.setAttribute('patternUnits', 'userSpaceOnUse');\n        this.updateDom(pattern, dom);\n        this.addDom(dom);\n        return dom;\n    };\n    PatternManager.prototype.update = function (pattern) {\n        if (!isPattern(pattern)) {\n            return;\n        }\n        var that = this;\n        this.doUpdate(pattern, function () {\n            var dom = patternDomMap.get(pattern);\n            that.updateDom(pattern, dom);\n        });\n    };\n    PatternManager.prototype.updateDom = function (pattern, patternDom) {\n        var svgElement = pattern.svgElement;\n        if (svgElement instanceof SVGElement) {\n            if (svgElement.parentNode !== patternDom) {\n                patternDom.innerHTML = '';\n                patternDom.appendChild(svgElement);\n                patternDom.setAttribute('width', pattern.svgWidth + '');\n                patternDom.setAttribute('height', pattern.svgHeight + '');\n            }\n        }\n        else {\n            var img = void 0;\n            var prevImage = patternDom.getElementsByTagName('image');\n            if (prevImage.length) {\n                if (pattern.image) {\n                    img = prevImage[0];\n                }\n                else {\n                    patternDom.removeChild(prevImage[0]);\n                    return;\n                }\n            }\n            else if (pattern.image) {\n                img = this.createElement('image');\n            }\n            if (img) {\n                var imageSrc = void 0;\n                if (typeof pattern.image === 'string') {\n                    imageSrc = pattern.image;\n                }\n                else if (pattern.image instanceof HTMLImageElement) {\n                    imageSrc = pattern.image.src;\n                }\n                else if (pattern.image instanceof HTMLCanvasElement) {\n                    imageSrc = pattern.image.toDataURL();\n                }\n                if (imageSrc) {\n                    img.setAttribute('href', imageSrc);\n                    img.setAttribute('x', '0');\n                    img.setAttribute('y', '0');\n                    var hostEl = {\n                        dirty: function () { }\n                    };\n                    var createdImage = createOrUpdateImage(imageSrc, img, hostEl, function (img) {\n                        patternDom.setAttribute('width', img.width + '');\n                        patternDom.setAttribute('height', img.height + '');\n                    });\n                    if (createdImage && createdImage.width && createdImage.height) {\n                        patternDom.setAttribute('width', createdImage.width + '');\n                        patternDom.setAttribute('height', createdImage.height + '');\n                    }\n                    patternDom.appendChild(img);\n                }\n            }\n        }\n        var x = pattern.x || 0;\n        var y = pattern.y || 0;\n        var rotation = (pattern.rotation || 0) / Math.PI * 180;\n        var scaleX = pattern.scaleX || 1;\n        var scaleY = pattern.scaleY || 1;\n        var transform = \"translate(\" + x + \", \" + y + \") rotate(\" + rotation + \") scale(\" + scaleX + \", \" + scaleY + \")\";\n        patternDom.setAttribute('patternTransform', transform);\n        patternDomMap.set(pattern, patternDom);\n    };\n    PatternManager.prototype.markUsed = function (displayable) {\n        if (displayable.style) {\n            if (isPattern(displayable.style.fill)) {\n                _super.prototype.markDomUsed.call(this, patternDomMap.get(displayable.style.fill));\n            }\n            if (isPattern(displayable.style.stroke)) {\n                _super.prototype.markDomUsed.call(this, patternDomMap.get(displayable.style.stroke));\n            }\n        }\n    };\n    return PatternManager;\n}(Definable));\nexport default PatternManager;\n","import { __extends } from \"tslib\";\nimport Definable from './Definable';\nimport * as zrUtil from '../../core/util';\nimport { isClipPathChanged } from '../../canvas/helper';\nfunction generateClipPathsKey(clipPaths) {\n    var key = [];\n    if (clipPaths) {\n        for (var i = 0; i < clipPaths.length; i++) {\n            var clipPath = clipPaths[i];\n            key.push(clipPath.id);\n        }\n    }\n    return key.join(',');\n}\nexport function hasClipPath(displayable) {\n    var clipPaths = displayable.__clipPaths;\n    return clipPaths && clipPaths.length > 0;\n}\nvar ClippathManager = (function (_super) {\n    __extends(ClippathManager, _super);\n    function ClippathManager(zrId, svgRoot) {\n        var _this = _super.call(this, zrId, svgRoot, 'clipPath', '__clippath_in_use__') || this;\n        _this._refGroups = {};\n        _this._keyDuplicateCount = {};\n        return _this;\n    }\n    ClippathManager.prototype.markAllUnused = function () {\n        _super.prototype.markAllUnused.call(this);\n        for (var key in this._refGroups) {\n            this.markDomUnused(this._refGroups[key]);\n        }\n        this._keyDuplicateCount = {};\n    };\n    ClippathManager.prototype._getClipPathGroup = function (displayable, prevDisplayable) {\n        if (!hasClipPath(displayable)) {\n            return;\n        }\n        var clipPaths = displayable.__clipPaths;\n        var keyDuplicateCount = this._keyDuplicateCount;\n        var clipPathKey = generateClipPathsKey(clipPaths);\n        if (isClipPathChanged(clipPaths, prevDisplayable && prevDisplayable.__clipPaths)) {\n            keyDuplicateCount[clipPathKey] = keyDuplicateCount[clipPathKey] || 0;\n            keyDuplicateCount[clipPathKey] && (clipPathKey += '-' + keyDuplicateCount[clipPathKey]);\n            keyDuplicateCount[clipPathKey]++;\n        }\n        return this._refGroups[clipPathKey]\n            || (this._refGroups[clipPathKey] = this.createElement('g'));\n    };\n    ClippathManager.prototype.update = function (displayable, prevDisplayable) {\n        var clipGroup = this._getClipPathGroup(displayable, prevDisplayable);\n        if (clipGroup) {\n            this.markDomUsed(clipGroup);\n            this.updateDom(clipGroup, displayable.__clipPaths);\n        }\n        return clipGroup;\n    };\n    ;\n    ClippathManager.prototype.updateDom = function (parentEl, clipPaths) {\n        if (clipPaths && clipPaths.length > 0) {\n            var defs = this.getDefs(true);\n            var clipPath = clipPaths[0];\n            var clipPathEl = void 0;\n            var id = void 0;\n            if (clipPath._dom) {\n                id = clipPath._dom.getAttribute('id');\n                clipPathEl = clipPath._dom;\n                if (!defs.contains(clipPathEl)) {\n                    defs.appendChild(clipPathEl);\n                }\n            }\n            else {\n                id = 'zr' + this._zrId + '-clip-' + this.nextId;\n                ++this.nextId;\n                clipPathEl = this.createElement('clipPath');\n                clipPathEl.setAttribute('id', id);\n                defs.appendChild(clipPathEl);\n                clipPath._dom = clipPathEl;\n            }\n            var svgProxy = this.getSvgProxy(clipPath);\n            svgProxy.brush(clipPath);\n            var pathEl = this.getSvgElement(clipPath);\n            clipPathEl.innerHTML = '';\n            clipPathEl.appendChild(pathEl);\n            parentEl.setAttribute('clip-path', 'url(#' + id + ')');\n            if (clipPaths.length > 1) {\n                this.updateDom(clipPathEl, clipPaths.slice(1));\n            }\n        }\n        else {\n            if (parentEl) {\n                parentEl.setAttribute('clip-path', 'none');\n            }\n        }\n    };\n    ;\n    ClippathManager.prototype.markUsed = function (displayable) {\n        var _this = this;\n        if (displayable.__clipPaths) {\n            zrUtil.each(displayable.__clipPaths, function (clipPath) {\n                if (clipPath._dom) {\n                    _super.prototype.markDomUsed.call(_this, clipPath._dom);\n                }\n            });\n        }\n    };\n    ;\n    ClippathManager.prototype.removeUnused = function () {\n        _super.prototype.removeUnused.call(this);\n        var newRefGroupsMap = {};\n        for (var key in this._refGroups) {\n            var group = this._refGroups[key];\n            if (!this.isDomUnused(group)) {\n                newRefGroupsMap[key] = group;\n            }\n            else if (group.parentNode) {\n                group.parentNode.removeChild(group);\n            }\n        }\n        this._refGroups = newRefGroupsMap;\n    };\n    return ClippathManager;\n}(Definable));\nexport default ClippathManager;\n","import { __extends } from \"tslib\";\nimport Definable from './Definable';\nvar ShadowManager = (function (_super) {\n    __extends(ShadowManager, _super);\n    function ShadowManager(zrId, svgRoot) {\n        var _this = _super.call(this, zrId, svgRoot, ['filter'], '__filter_in_use__', '_shadowDom') || this;\n        _this._shadowDomMap = {};\n        _this._shadowDomPool = [];\n        return _this;\n    }\n    ShadowManager.prototype._getFromPool = function () {\n        var shadowDom = this._shadowDomPool.pop();\n        if (!shadowDom) {\n            shadowDom = this.createElement('filter');\n            shadowDom.setAttribute('id', 'zr' + this._zrId + '-shadow-' + this.nextId++);\n            var domChild = this.createElement('feDropShadow');\n            shadowDom.appendChild(domChild);\n            this.addDom(shadowDom);\n        }\n        return shadowDom;\n    };\n    ShadowManager.prototype.update = function (svgElement, displayable) {\n        var style = displayable.style;\n        if (hasShadow(style)) {\n            var shadowKey = getShadowKey(displayable);\n            var shadowDom = displayable._shadowDom = this._shadowDomMap[shadowKey];\n            if (!shadowDom) {\n                shadowDom = this._getFromPool();\n                this._shadowDomMap[shadowKey] = shadowDom;\n            }\n            this.updateDom(svgElement, displayable, shadowDom);\n        }\n        else {\n            this.remove(svgElement, displayable);\n        }\n    };\n    ShadowManager.prototype.remove = function (svgElement, displayable) {\n        if (displayable._shadowDom != null) {\n            displayable._shadowDom = null;\n            svgElement.style.filter = '';\n        }\n    };\n    ShadowManager.prototype.updateDom = function (svgElement, displayable, shadowDom) {\n        var domChild = shadowDom.children[0];\n        var style = displayable.style;\n        var globalScale = displayable.getGlobalScale();\n        var scaleX = globalScale[0];\n        var scaleY = globalScale[1];\n        if (!scaleX || !scaleY) {\n            return;\n        }\n        var offsetX = style.shadowOffsetX || 0;\n        var offsetY = style.shadowOffsetY || 0;\n        var blur = style.shadowBlur;\n        var color = style.shadowColor;\n        domChild.setAttribute('dx', offsetX / scaleX + '');\n        domChild.setAttribute('dy', offsetY / scaleY + '');\n        domChild.setAttribute('flood-color', color);\n        var stdDx = blur / 2 / scaleX;\n        var stdDy = blur / 2 / scaleY;\n        var stdDeviation = stdDx + ' ' + stdDy;\n        domChild.setAttribute('stdDeviation', stdDeviation);\n        shadowDom.setAttribute('x', '-100%');\n        shadowDom.setAttribute('y', '-100%');\n        shadowDom.setAttribute('width', '300%');\n        shadowDom.setAttribute('height', '300%');\n        displayable._shadowDom = shadowDom;\n        var id = shadowDom.getAttribute('id');\n        svgElement.style.filter = 'url(#' + id + ')';\n    };\n    ShadowManager.prototype.removeUnused = function () {\n        var defs = this.getDefs(false);\n        if (!defs) {\n            return;\n        }\n        var shadowDomsPool = this._shadowDomPool;\n        for (var key in this._shadowDomMap) {\n            var dom = this._shadowDomMap[key];\n            shadowDomsPool.push(dom);\n        }\n        this._shadowDomMap = {};\n    };\n    return ShadowManager;\n}(Definable));\nexport default ShadowManager;\nfunction hasShadow(style) {\n    return style\n        && (style.shadowBlur || style.shadowOffsetX || style.shadowOffsetY);\n}\nfunction getShadowKey(displayable) {\n    var style = displayable.style;\n    var globalScale = displayable.getGlobalScale();\n    return [\n        style.shadowColor,\n        (style.shadowBlur || 0).toFixed(2),\n        (style.shadowOffsetX || 0).toFixed(2),\n        (style.shadowOffsetY || 0).toFixed(2),\n        globalScale[0],\n        globalScale[1]\n    ].join(',');\n}\n","import { createElement } from './core';\nimport * as util from '../core/util';\nimport Path from '../graphic/Path';\nimport ZRImage from '../graphic/Image';\nimport TSpan from '../graphic/TSpan';\nimport arrayDiff from '../core/arrayDiff';\nimport GradientManager from './helper/GradientManager';\nimport PatternManager from './helper/PatternManager';\nimport ClippathManager, { hasClipPath } from './helper/ClippathManager';\nimport ShadowManager from './helper/ShadowManager';\nimport { path as svgPath, image as svgImage, text as svgText } from './graphic';\nfunction parseInt10(val) {\n    return parseInt(val, 10);\n}\nfunction getSvgProxy(el) {\n    if (el instanceof Path) {\n        return svgPath;\n    }\n    else if (el instanceof ZRImage) {\n        return svgImage;\n    }\n    else if (el instanceof TSpan) {\n        return svgText;\n    }\n    else {\n        return svgPath;\n    }\n}\nfunction checkParentAvailable(parent, child) {\n    return child && parent && child.parentNode !== parent;\n}\nfunction insertAfter(parent, child, prevSibling) {\n    if (checkParentAvailable(parent, child) && prevSibling) {\n        var nextSibling = prevSibling.nextSibling;\n        nextSibling ? parent.insertBefore(child, nextSibling)\n            : parent.appendChild(child);\n    }\n}\nfunction prepend(parent, child) {\n    if (checkParentAvailable(parent, child)) {\n        var firstChild = parent.firstChild;\n        firstChild ? parent.insertBefore(child, firstChild)\n            : parent.appendChild(child);\n    }\n}\nfunction remove(parent, child) {\n    if (child && parent && child.parentNode === parent) {\n        parent.removeChild(child);\n    }\n}\nfunction removeFromMyParent(child) {\n    if (child && child.parentNode) {\n        child.parentNode.removeChild(child);\n    }\n}\nfunction getSvgElement(displayable) {\n    return displayable.__svgEl;\n}\nvar SVGPainter = (function () {\n    function SVGPainter(root, storage, opts, zrId) {\n        this.type = 'svg';\n        this.refreshHover = createMethodNotSupport('refreshHover');\n        this.pathToImage = createMethodNotSupport('pathToImage');\n        this.configLayer = createMethodNotSupport('configLayer');\n        this.root = root;\n        this.storage = storage;\n        this._opts = opts = util.extend({}, opts || {});\n        var svgDom = createElement('svg');\n        svgDom.setAttributeNS('http://www.w3.org/2000/xmlns/', 'xmlns', 'http://www.w3.org/2000/svg');\n        svgDom.setAttributeNS('http://www.w3.org/2000/xmlns/', 'xmlns:xlink', 'http://www.w3.org/1999/xlink');\n        svgDom.setAttribute('version', '1.1');\n        svgDom.setAttribute('baseProfile', 'full');\n        svgDom.style.cssText = 'user-select:none;position:absolute;left:0;top:0;';\n        var bgRoot = createElement('g');\n        svgDom.appendChild(bgRoot);\n        var svgRoot = createElement('g');\n        svgDom.appendChild(svgRoot);\n        this._gradientManager = new GradientManager(zrId, svgRoot);\n        this._patternManager = new PatternManager(zrId, svgRoot);\n        this._clipPathManager = new ClippathManager(zrId, svgRoot);\n        this._shadowManager = new ShadowManager(zrId, svgRoot);\n        var viewport = document.createElement('div');\n        viewport.style.cssText = 'overflow:hidden;position:relative';\n        this._svgDom = svgDom;\n        this._svgRoot = svgRoot;\n        this._backgroundRoot = bgRoot;\n        this._viewport = viewport;\n        root.appendChild(viewport);\n        viewport.appendChild(svgDom);\n        this.resize(opts.width, opts.height);\n        this._visibleList = [];\n    }\n    SVGPainter.prototype.getType = function () {\n        return 'svg';\n    };\n    SVGPainter.prototype.getViewportRoot = function () {\n        return this._viewport;\n    };\n    SVGPainter.prototype.getSvgDom = function () {\n        return this._svgDom;\n    };\n    SVGPainter.prototype.getSvgRoot = function () {\n        return this._svgRoot;\n    };\n    SVGPainter.prototype.getViewportRootOffset = function () {\n        var viewportRoot = this.getViewportRoot();\n        if (viewportRoot) {\n            return {\n                offsetLeft: viewportRoot.offsetLeft || 0,\n                offsetTop: viewportRoot.offsetTop || 0\n            };\n        }\n    };\n    SVGPainter.prototype.refresh = function () {\n        var list = this.storage.getDisplayList(true);\n        this._paintList(list);\n    };\n    SVGPainter.prototype.setBackgroundColor = function (backgroundColor) {\n        if (this._backgroundRoot && this._backgroundNode) {\n            this._backgroundRoot.removeChild(this._backgroundNode);\n        }\n        var bgNode = createElement('rect');\n        bgNode.setAttribute('width', this.getWidth());\n        bgNode.setAttribute('height', this.getHeight());\n        bgNode.setAttribute('x', 0);\n        bgNode.setAttribute('y', 0);\n        bgNode.setAttribute('id', 0);\n        bgNode.style.fill = backgroundColor;\n        this._backgroundRoot.appendChild(bgNode);\n        this._backgroundNode = bgNode;\n    };\n    SVGPainter.prototype.createSVGElement = function (tag) {\n        return createElement(tag);\n    };\n    SVGPainter.prototype.paintOne = function (el) {\n        var svgProxy = getSvgProxy(el);\n        svgProxy && svgProxy.brush(el);\n        return getSvgElement(el);\n    };\n    SVGPainter.prototype._paintList = function (list) {\n        var gradientManager = this._gradientManager;\n        var patternManager = this._patternManager;\n        var clipPathManager = this._clipPathManager;\n        var shadowManager = this._shadowManager;\n        gradientManager.markAllUnused();\n        patternManager.markAllUnused();\n        clipPathManager.markAllUnused();\n        shadowManager.markAllUnused();\n        var svgRoot = this._svgRoot;\n        var visibleList = this._visibleList;\n        var listLen = list.length;\n        var newVisibleList = [];\n        for (var i = 0; i < listLen; i++) {\n            var displayable = list[i];\n            var svgProxy = getSvgProxy(displayable);\n            var svgElement = getSvgElement(displayable);\n            if (!displayable.invisible) {\n                if (displayable.__dirty || !svgElement) {\n                    svgProxy && svgProxy.brush(displayable);\n                    svgElement = getSvgElement(displayable);\n                    if (svgElement && displayable.style) {\n                        gradientManager.update(displayable.style.fill);\n                        gradientManager.update(displayable.style.stroke);\n                        patternManager.update(displayable.style.fill);\n                        patternManager.update(displayable.style.stroke);\n                        shadowManager.update(svgElement, displayable);\n                    }\n                    displayable.__dirty = 0;\n                }\n                if (svgElement) {\n                    newVisibleList.push(displayable);\n                }\n            }\n        }\n        var diff = arrayDiff(visibleList, newVisibleList);\n        var prevSvgElement;\n        var topPrevSvgElement;\n        for (var i = 0; i < diff.length; i++) {\n            var item = diff[i];\n            if (item.removed) {\n                for (var k = 0; k < item.count; k++) {\n                    var displayable = visibleList[item.indices[k]];\n                    var svgElement = getSvgElement(displayable);\n                    hasClipPath(displayable) ? removeFromMyParent(svgElement)\n                        : remove(svgRoot, svgElement);\n                }\n            }\n        }\n        var prevDisplayable;\n        var currentClipGroup;\n        for (var i = 0; i < diff.length; i++) {\n            var item = diff[i];\n            if (item.removed) {\n                continue;\n            }\n            for (var k = 0; k < item.count; k++) {\n                var displayable = newVisibleList[item.indices[k]];\n                var clipGroup = clipPathManager.update(displayable, prevDisplayable);\n                if (clipGroup !== currentClipGroup) {\n                    prevSvgElement = topPrevSvgElement;\n                    if (clipGroup) {\n                        prevSvgElement ? insertAfter(svgRoot, clipGroup, prevSvgElement)\n                            : prepend(svgRoot, clipGroup);\n                        topPrevSvgElement = clipGroup;\n                        prevSvgElement = null;\n                    }\n                    currentClipGroup = clipGroup;\n                }\n                var svgElement = getSvgElement(displayable);\n                prevSvgElement\n                    ? insertAfter(currentClipGroup || svgRoot, svgElement, prevSvgElement)\n                    : prepend(currentClipGroup || svgRoot, svgElement);\n                prevSvgElement = svgElement || prevSvgElement;\n                if (!currentClipGroup) {\n                    topPrevSvgElement = prevSvgElement;\n                }\n                gradientManager.markUsed(displayable);\n                gradientManager.addWithoutUpdate(svgElement, displayable);\n                patternManager.markUsed(displayable);\n                patternManager.addWithoutUpdate(svgElement, displayable);\n                clipPathManager.markUsed(displayable);\n                prevDisplayable = displayable;\n            }\n        }\n        gradientManager.removeUnused();\n        patternManager.removeUnused();\n        clipPathManager.removeUnused();\n        shadowManager.removeUnused();\n        this._visibleList = newVisibleList;\n    };\n    SVGPainter.prototype._getDefs = function (isForceCreating) {\n        var svgRoot = this._svgDom;\n        var defs = svgRoot.getElementsByTagName('defs');\n        if (defs.length === 0) {\n            if (isForceCreating) {\n                var defs_1 = svgRoot.insertBefore(createElement('defs'), svgRoot.firstChild);\n                if (!defs_1.contains) {\n                    defs_1.contains = function (el) {\n                        var children = defs_1.children;\n                        if (!children) {\n                            return false;\n                        }\n                        for (var i = children.length - 1; i >= 0; --i) {\n                            if (children[i] === el) {\n                                return true;\n                            }\n                        }\n                        return false;\n                    };\n                }\n                return defs_1;\n            }\n            else {\n                return null;\n            }\n        }\n        else {\n            return defs[0];\n        }\n    };\n    SVGPainter.prototype.resize = function (width, height) {\n        var viewport = this._viewport;\n        viewport.style.display = 'none';\n        var opts = this._opts;\n        width != null && (opts.width = width);\n        height != null && (opts.height = height);\n        width = this._getSize(0);\n        height = this._getSize(1);\n        viewport.style.display = '';\n        if (this._width !== width || this._height !== height) {\n            this._width = width;\n            this._height = height;\n            var viewportStyle = viewport.style;\n            viewportStyle.width = width + 'px';\n            viewportStyle.height = height + 'px';\n            var svgRoot = this._svgDom;\n            svgRoot.setAttribute('width', width + '');\n            svgRoot.setAttribute('height', height + '');\n        }\n        if (this._backgroundNode) {\n            this._backgroundNode.setAttribute('width', width);\n            this._backgroundNode.setAttribute('height', height);\n        }\n    };\n    SVGPainter.prototype.getWidth = function () {\n        return this._width;\n    };\n    SVGPainter.prototype.getHeight = function () {\n        return this._height;\n    };\n    SVGPainter.prototype._getSize = function (whIdx) {\n        var opts = this._opts;\n        var wh = ['width', 'height'][whIdx];\n        var cwh = ['clientWidth', 'clientHeight'][whIdx];\n        var plt = ['paddingLeft', 'paddingTop'][whIdx];\n        var prb = ['paddingRight', 'paddingBottom'][whIdx];\n        if (opts[wh] != null && opts[wh] !== 'auto') {\n            return parseFloat(opts[wh]);\n        }\n        var root = this.root;\n        var stl = document.defaultView.getComputedStyle(root);\n        return ((root[cwh] || parseInt10(stl[wh]) || parseInt10(root.style[wh]))\n            - (parseInt10(stl[plt]) || 0)\n            - (parseInt10(stl[prb]) || 0)) | 0;\n    };\n    SVGPainter.prototype.dispose = function () {\n        this.root.innerHTML = '';\n        this._svgRoot\n            = this._backgroundRoot\n                = this._svgDom\n                    = this._backgroundNode\n                        = this._viewport\n                            = this.storage\n                                = null;\n    };\n    SVGPainter.prototype.clear = function () {\n        var viewportNode = this._viewport;\n        if (viewportNode && viewportNode.parentNode) {\n            viewportNode.parentNode.removeChild(viewportNode);\n        }\n    };\n    SVGPainter.prototype.toDataURL = function () {\n        this.refresh();\n        var svgDom = this._svgDom;\n        var outerHTML = svgDom.outerHTML\n            || (svgDom.parentNode && svgDom.parentNode).innerHTML;\n        var html = encodeURIComponent(outerHTML.replace(/></g, '>\\n\\r<'));\n        return 'data:image/svg+xml;charset=UTF-8,' + html;\n    };\n    return SVGPainter;\n}());\nfunction createMethodNotSupport(method) {\n    return function () {\n        util.logError('In SVG mode painter not support method \"' + method + '\"');\n    };\n}\nexport default SVGPainter;\n","import { __extends } from \"tslib\";\nimport * as util from '../core/util';\nimport { devicePixelRatio } from '../config';\nimport Eventful from '../core/Eventful';\nimport Element from '../Element';\nimport { getCanvasGradient } from './helper';\nimport { createCanvasPattern } from './graphic';\nimport BoundingRect from '../core/BoundingRect';\nfunction returnFalse() {\n    return false;\n}\nfunction createDom(id, painter, dpr) {\n    var newDom = util.createCanvas();\n    var width = painter.getWidth();\n    var height = painter.getHeight();\n    var newDomStyle = newDom.style;\n    if (newDomStyle) {\n        newDomStyle.position = 'absolute';\n        newDomStyle.left = '0';\n        newDomStyle.top = '0';\n        newDomStyle.width = width + 'px';\n        newDomStyle.height = height + 'px';\n        newDom.setAttribute('data-zr-dom-id', id);\n    }\n    newDom.width = width * dpr;\n    newDom.height = height * dpr;\n    return newDom;\n}\n;\nvar Layer = (function (_super) {\n    __extends(Layer, _super);\n    function Layer(id, painter, dpr) {\n        var _this = _super.call(this) || this;\n        _this.motionBlur = false;\n        _this.lastFrameAlpha = 0.7;\n        _this.dpr = 1;\n        _this.virtual = false;\n        _this.config = {};\n        _this.incremental = false;\n        _this.zlevel = 0;\n        _this.maxRepaintRectCount = 5;\n        _this.__dirty = true;\n        _this.__firstTimePaint = true;\n        _this.__used = false;\n        _this.__drawIndex = 0;\n        _this.__startIndex = 0;\n        _this.__endIndex = 0;\n        _this.__prevStartIndex = null;\n        _this.__prevEndIndex = null;\n        var dom;\n        dpr = dpr || devicePixelRatio;\n        if (typeof id === 'string') {\n            dom = createDom(id, painter, dpr);\n        }\n        else if (util.isObject(id)) {\n            dom = id;\n            id = dom.id;\n        }\n        _this.id = id;\n        _this.dom = dom;\n        var domStyle = dom.style;\n        if (domStyle) {\n            dom.onselectstart = returnFalse;\n            domStyle.webkitUserSelect = 'none';\n            domStyle.userSelect = 'none';\n            domStyle.webkitTapHighlightColor = 'rgba(0,0,0,0)';\n            domStyle['-webkit-touch-callout'] = 'none';\n            domStyle.padding = '0';\n            domStyle.margin = '0';\n            domStyle.borderWidth = '0';\n        }\n        _this.domBack = null;\n        _this.ctxBack = null;\n        _this.painter = painter;\n        _this.config = null;\n        _this.dpr = dpr;\n        return _this;\n    }\n    Layer.prototype.getElementCount = function () {\n        return this.__endIndex - this.__startIndex;\n    };\n    Layer.prototype.afterBrush = function () {\n        this.__prevStartIndex = this.__startIndex;\n        this.__prevEndIndex = this.__endIndex;\n    };\n    Layer.prototype.initContext = function () {\n        this.ctx = this.dom.getContext('2d');\n        this.ctx.dpr = this.dpr;\n    };\n    Layer.prototype.setUnpainted = function () {\n        this.__firstTimePaint = true;\n    };\n    Layer.prototype.createBackBuffer = function () {\n        var dpr = this.dpr;\n        this.domBack = createDom('back-' + this.id, this.painter, dpr);\n        this.ctxBack = this.domBack.getContext('2d');\n        if (dpr !== 1) {\n            this.ctxBack.scale(dpr, dpr);\n        }\n    };\n    Layer.prototype.createRepaintRects = function (displayList, prevList, viewWidth, viewHeight) {\n        if (this.__firstTimePaint) {\n            this.__firstTimePaint = false;\n            return null;\n        }\n        var mergedRepaintRects = [];\n        var maxRepaintRectCount = this.maxRepaintRectCount;\n        var full = false;\n        var pendingRect = new BoundingRect(0, 0, 0, 0);\n        function addRectToMergePool(rect) {\n            if (!rect.isFinite() || rect.isZero()) {\n                return;\n            }\n            if (mergedRepaintRects.length === 0) {\n                var boundingRect = new BoundingRect(0, 0, 0, 0);\n                boundingRect.copy(rect);\n                mergedRepaintRects.push(boundingRect);\n            }\n            else {\n                var isMerged = false;\n                var minDeltaArea = Infinity;\n                var bestRectToMergeIdx = 0;\n                for (var i = 0; i < mergedRepaintRects.length; ++i) {\n                    var mergedRect = mergedRepaintRects[i];\n                    if (mergedRect.intersect(rect)) {\n                        var pendingRect_1 = new BoundingRect(0, 0, 0, 0);\n                        pendingRect_1.copy(mergedRect);\n                        pendingRect_1.union(rect);\n                        mergedRepaintRects[i] = pendingRect_1;\n                        isMerged = true;\n                        break;\n                    }\n                    else if (full) {\n                        pendingRect.copy(rect);\n                        pendingRect.union(mergedRect);\n                        var aArea = rect.width * rect.height;\n                        var bArea = mergedRect.width * mergedRect.height;\n                        var pendingArea = pendingRect.width * pendingRect.height;\n                        var deltaArea = pendingArea - aArea - bArea;\n                        if (deltaArea < minDeltaArea) {\n                            minDeltaArea = deltaArea;\n                            bestRectToMergeIdx = i;\n                        }\n                    }\n                }\n                if (full) {\n                    mergedRepaintRects[bestRectToMergeIdx].union(rect);\n                    isMerged = true;\n                }\n                if (!isMerged) {\n                    var boundingRect = new BoundingRect(0, 0, 0, 0);\n                    boundingRect.copy(rect);\n                    mergedRepaintRects.push(boundingRect);\n                }\n                if (!full) {\n                    full = mergedRepaintRects.length >= maxRepaintRectCount;\n                }\n            }\n        }\n        for (var i = this.__startIndex; i < this.__endIndex; ++i) {\n            var el = displayList[i];\n            if (el) {\n                var shouldPaint = el.shouldBePainted(viewWidth, viewHeight, true, true);\n                var prevRect = el.__isRendered && ((el.__dirty & Element.REDARAW_BIT) || !shouldPaint)\n                    ? el.getPrevPaintRect()\n                    : null;\n                if (prevRect) {\n                    addRectToMergePool(prevRect);\n                }\n                var curRect = shouldPaint && ((el.__dirty & Element.REDARAW_BIT) || !el.__isRendered)\n                    ? el.getPaintRect()\n                    : null;\n                if (curRect) {\n                    addRectToMergePool(curRect);\n                }\n            }\n        }\n        for (var i = this.__prevStartIndex; i < this.__prevEndIndex; ++i) {\n            var el = prevList[i];\n            var shouldPaint = el.shouldBePainted(viewWidth, viewHeight, true, true);\n            if (el && (!shouldPaint || !el.__zr) && el.__isRendered) {\n                var prevRect = el.getPrevPaintRect();\n                if (prevRect) {\n                    addRectToMergePool(prevRect);\n                }\n            }\n        }\n        var hasIntersections;\n        do {\n            hasIntersections = false;\n            for (var i = 0; i < mergedRepaintRects.length;) {\n                if (mergedRepaintRects[i].isZero()) {\n                    mergedRepaintRects.splice(i, 1);\n                    continue;\n                }\n                for (var j = i + 1; j < mergedRepaintRects.length;) {\n                    if (mergedRepaintRects[i].intersect(mergedRepaintRects[j])) {\n                        hasIntersections = true;\n                        mergedRepaintRects[i].union(mergedRepaintRects[j]);\n                        mergedRepaintRects.splice(j, 1);\n                    }\n                    else {\n                        j++;\n                    }\n                }\n                i++;\n            }\n        } while (hasIntersections);\n        this._paintRects = mergedRepaintRects;\n        return mergedRepaintRects;\n    };\n    Layer.prototype.debugGetPaintRects = function () {\n        return (this._paintRects || []).slice();\n    };\n    Layer.prototype.resize = function (width, height) {\n        var dpr = this.dpr;\n        var dom = this.dom;\n        var domStyle = dom.style;\n        var domBack = this.domBack;\n        if (domStyle) {\n            domStyle.width = width + 'px';\n            domStyle.height = height + 'px';\n        }\n        dom.width = width * dpr;\n        dom.height = height * dpr;\n        if (domBack) {\n            domBack.width = width * dpr;\n            domBack.height = height * dpr;\n            if (dpr !== 1) {\n                this.ctxBack.scale(dpr, dpr);\n            }\n        }\n    };\n    Layer.prototype.clear = function (clearAll, clearColor, repaintRects) {\n        var dom = this.dom;\n        var ctx = this.ctx;\n        var width = dom.width;\n        var height = dom.height;\n        clearColor = clearColor || this.clearColor;\n        var haveMotionBLur = this.motionBlur && !clearAll;\n        var lastFrameAlpha = this.lastFrameAlpha;\n        var dpr = this.dpr;\n        var self = this;\n        if (haveMotionBLur) {\n            if (!this.domBack) {\n                this.createBackBuffer();\n            }\n            this.ctxBack.globalCompositeOperation = 'copy';\n            this.ctxBack.drawImage(dom, 0, 0, width / dpr, height / dpr);\n        }\n        var domBack = this.domBack;\n        function doClear(x, y, width, height) {\n            ctx.clearRect(x, y, width, height);\n            if (clearColor && clearColor !== 'transparent') {\n                var clearColorGradientOrPattern = void 0;\n                if (util.isGradientObject(clearColor)) {\n                    clearColorGradientOrPattern = clearColor.__canvasGradient\n                        || getCanvasGradient(ctx, clearColor, {\n                            x: 0,\n                            y: 0,\n                            width: width,\n                            height: height\n                        });\n                    clearColor.__canvasGradient = clearColorGradientOrPattern;\n                }\n                else if (util.isPatternObject(clearColor)) {\n                    clearColorGradientOrPattern = createCanvasPattern(ctx, clearColor, {\n                        dirty: function () {\n                            self.setUnpainted();\n                            self.__painter.refresh();\n                        }\n                    });\n                }\n                ctx.save();\n                ctx.fillStyle = clearColorGradientOrPattern || clearColor;\n                ctx.fillRect(x, y, width, height);\n                ctx.restore();\n            }\n            if (haveMotionBLur) {\n                ctx.save();\n                ctx.globalAlpha = lastFrameAlpha;\n                ctx.drawImage(domBack, x, y, width, height);\n                ctx.restore();\n            }\n        }\n        ;\n        if (!repaintRects || haveMotionBLur) {\n            doClear(0, 0, width, height);\n        }\n        else if (repaintRects.length) {\n            util.each(repaintRects, function (rect) {\n                doClear(rect.x * dpr, rect.y * dpr, rect.width * dpr, rect.height * dpr);\n            });\n        }\n    };\n    return Layer;\n}(Eventful));\nexport default Layer;\n","import { devicePixelRatio } from '../config';\nimport * as util from '../core/util';\nimport Layer from './Layer';\nimport requestAnimationFrame from '../animation/requestAnimationFrame';\nimport ZRImage from '../graphic/Image';\nimport env from '../core/env';\nimport { brush, brushSingle } from './graphic';\nimport Element from '../Element';\nvar HOVER_LAYER_ZLEVEL = 1e5;\nvar CANVAS_ZLEVEL = 314159;\nvar EL_AFTER_INCREMENTAL_INC = 0.01;\nvar INCREMENTAL_INC = 0.001;\nfunction parseInt10(val) {\n    return parseInt(val, 10);\n}\nfunction isLayerValid(layer) {\n    if (!layer) {\n        return false;\n    }\n    if (layer.__builtin__) {\n        return true;\n    }\n    if (typeof (layer.resize) !== 'function'\n        || typeof (layer.refresh) !== 'function') {\n        return false;\n    }\n    return true;\n}\nfunction createRoot(width, height) {\n    var domRoot = document.createElement('div');\n    domRoot.style.cssText = [\n        'position:relative',\n        'width:' + width + 'px',\n        'height:' + height + 'px',\n        'padding:0',\n        'margin:0',\n        'border-width:0'\n    ].join(';') + ';';\n    return domRoot;\n}\nvar CanvasPainter = (function () {\n    function CanvasPainter(root, storage, opts, id) {\n        this.type = 'canvas';\n        this._zlevelList = [];\n        this._prevDisplayList = [];\n        this._layers = {};\n        this._layerConfig = {};\n        this._needsManuallyCompositing = false;\n        this.type = 'canvas';\n        var singleCanvas = !root.nodeName\n            || root.nodeName.toUpperCase() === 'CANVAS';\n        this._opts = opts = util.extend({}, opts || {});\n        this.dpr = opts.devicePixelRatio || devicePixelRatio;\n        this._singleCanvas = singleCanvas;\n        this.root = root;\n        var rootStyle = root.style;\n        if (rootStyle) {\n            rootStyle.webkitTapHighlightColor = 'transparent';\n            rootStyle.webkitUserSelect = 'none';\n            rootStyle.userSelect = 'none';\n            rootStyle['-webkit-touch-callout'] = 'none';\n            root.innerHTML = '';\n        }\n        this.storage = storage;\n        var zlevelList = this._zlevelList;\n        this._prevDisplayList = [];\n        var layers = this._layers;\n        if (!singleCanvas) {\n            this._width = this._getSize(0);\n            this._height = this._getSize(1);\n            var domRoot = this._domRoot = createRoot(this._width, this._height);\n            root.appendChild(domRoot);\n        }\n        else {\n            var rootCanvas = root;\n            var width = rootCanvas.width;\n            var height = rootCanvas.height;\n            if (opts.width != null) {\n                width = opts.width;\n            }\n            if (opts.height != null) {\n                height = opts.height;\n            }\n            this.dpr = opts.devicePixelRatio || 1;\n            rootCanvas.width = width * this.dpr;\n            rootCanvas.height = height * this.dpr;\n            this._width = width;\n            this._height = height;\n            var mainLayer = new Layer(rootCanvas, this, this.dpr);\n            mainLayer.__builtin__ = true;\n            mainLayer.initContext();\n            layers[CANVAS_ZLEVEL] = mainLayer;\n            mainLayer.zlevel = CANVAS_ZLEVEL;\n            zlevelList.push(CANVAS_ZLEVEL);\n            this._domRoot = root;\n        }\n    }\n    CanvasPainter.prototype.getType = function () {\n        return 'canvas';\n    };\n    CanvasPainter.prototype.isSingleCanvas = function () {\n        return this._singleCanvas;\n    };\n    CanvasPainter.prototype.getViewportRoot = function () {\n        return this._domRoot;\n    };\n    CanvasPainter.prototype.getViewportRootOffset = function () {\n        var viewportRoot = this.getViewportRoot();\n        if (viewportRoot) {\n            return {\n                offsetLeft: viewportRoot.offsetLeft || 0,\n                offsetTop: viewportRoot.offsetTop || 0\n            };\n        }\n    };\n    CanvasPainter.prototype.refresh = function (paintAll) {\n        var list = this.storage.getDisplayList(true);\n        var prevList = this._prevDisplayList;\n        var zlevelList = this._zlevelList;\n        this._redrawId = Math.random();\n        this._paintList(list, prevList, paintAll, this._redrawId);\n        for (var i = 0; i < zlevelList.length; i++) {\n            var z = zlevelList[i];\n            var layer = this._layers[z];\n            if (!layer.__builtin__ && layer.refresh) {\n                var clearColor = i === 0 ? this._backgroundColor : null;\n                layer.refresh(clearColor);\n            }\n        }\n        if (this._opts.useDirtyRect) {\n            this._prevDisplayList = list.slice();\n        }\n        return this;\n    };\n    CanvasPainter.prototype.refreshHover = function () {\n        this._paintHoverList(this.storage.getDisplayList(false));\n    };\n    CanvasPainter.prototype._paintHoverList = function (list) {\n        var len = list.length;\n        var hoverLayer = this._hoverlayer;\n        hoverLayer && hoverLayer.clear();\n        if (!len) {\n            return;\n        }\n        var scope = {\n            inHover: true,\n            viewWidth: this._width,\n            viewHeight: this._height\n        };\n        var ctx;\n        for (var i = 0; i < len; i++) {\n            var el = list[i];\n            if (el.__inHover) {\n                if (!hoverLayer) {\n                    hoverLayer = this._hoverlayer = this.getLayer(HOVER_LAYER_ZLEVEL);\n                }\n                if (!ctx) {\n                    ctx = hoverLayer.ctx;\n                    ctx.save();\n                }\n                brush(ctx, el, scope, i === len - 1);\n            }\n        }\n        if (ctx) {\n            ctx.restore();\n        }\n    };\n    CanvasPainter.prototype.getHoverLayer = function () {\n        return this.getLayer(HOVER_LAYER_ZLEVEL);\n    };\n    CanvasPainter.prototype.paintOne = function (ctx, el) {\n        brushSingle(ctx, el);\n    };\n    CanvasPainter.prototype._paintList = function (list, prevList, paintAll, redrawId) {\n        if (this._redrawId !== redrawId) {\n            return;\n        }\n        paintAll = paintAll || false;\n        this._updateLayerStatus(list);\n        var _a = this._doPaintList(list, prevList, paintAll), finished = _a.finished, needsRefreshHover = _a.needsRefreshHover;\n        if (this._needsManuallyCompositing) {\n            this._compositeManually();\n        }\n        if (needsRefreshHover) {\n            this._paintHoverList(list);\n        }\n        if (!finished) {\n            var self_1 = this;\n            requestAnimationFrame(function () {\n                self_1._paintList(list, prevList, paintAll, redrawId);\n            });\n        }\n        else {\n            this.eachLayer(function (layer) {\n                layer.afterBrush && layer.afterBrush();\n            });\n        }\n    };\n    CanvasPainter.prototype._compositeManually = function () {\n        var ctx = this.getLayer(CANVAS_ZLEVEL).ctx;\n        var width = this._domRoot.width;\n        var height = this._domRoot.height;\n        ctx.clearRect(0, 0, width, height);\n        this.eachBuiltinLayer(function (layer) {\n            if (layer.virtual) {\n                ctx.drawImage(layer.dom, 0, 0, width, height);\n            }\n        });\n    };\n    CanvasPainter.prototype._doPaintList = function (list, prevList, paintAll) {\n        var _this = this;\n        var layerList = [];\n        var useDirtyRect = this._opts.useDirtyRect;\n        for (var zi = 0; zi < this._zlevelList.length; zi++) {\n            var zlevel = this._zlevelList[zi];\n            var layer = this._layers[zlevel];\n            if (layer.__builtin__\n                && layer !== this._hoverlayer\n                && (layer.__dirty || paintAll)) {\n                layerList.push(layer);\n            }\n        }\n        var finished = true;\n        var needsRefreshHover = false;\n        var _loop_1 = function (k) {\n            var layer = layerList[k];\n            var ctx = layer.ctx;\n            var repaintRects = useDirtyRect\n                && layer.createRepaintRects(list, prevList, this_1._width, this_1._height);\n            ctx.save();\n            var start = paintAll ? layer.__startIndex : layer.__drawIndex;\n            var useTimer = !paintAll && layer.incremental && Date.now;\n            var startTime = useTimer && Date.now();\n            var clearColor = layer.zlevel === this_1._zlevelList[0]\n                ? this_1._backgroundColor : null;\n            if (layer.__startIndex === layer.__endIndex) {\n                layer.clear(false, clearColor, repaintRects);\n            }\n            else if (start === layer.__startIndex) {\n                var firstEl = list[start];\n                if (!firstEl.incremental || !firstEl.notClear || paintAll) {\n                    layer.clear(false, clearColor, repaintRects);\n                }\n            }\n            if (start === -1) {\n                console.error('For some unknown reason. drawIndex is -1');\n                start = layer.__startIndex;\n            }\n            var i;\n            var repaint = function (repaintRect) {\n                var scope = {\n                    inHover: false,\n                    allClipped: false,\n                    prevEl: null,\n                    viewWidth: _this._width,\n                    viewHeight: _this._height\n                };\n                for (i = start; i < layer.__endIndex; i++) {\n                    var el = list[i];\n                    if (el.__inHover) {\n                        needsRefreshHover = true;\n                    }\n                    _this._doPaintEl(el, layer, useDirtyRect, repaintRect, scope, i === layer.__endIndex - 1);\n                    if (useTimer) {\n                        var dTime = Date.now() - startTime;\n                        if (dTime > 15) {\n                            break;\n                        }\n                    }\n                }\n                if (scope.prevElClipPaths) {\n                    ctx.restore();\n                }\n            };\n            if (repaintRects) {\n                if (repaintRects.length === 0) {\n                    i = layer.__endIndex;\n                }\n                else {\n                    var dpr = this_1.dpr;\n                    for (var r = 0; r < repaintRects.length; ++r) {\n                        var rect = repaintRects[r];\n                        ctx.save();\n                        ctx.beginPath();\n                        ctx.rect(rect.x * dpr, rect.y * dpr, rect.width * dpr, rect.height * dpr);\n                        ctx.clip();\n                        repaint(rect);\n                        ctx.restore();\n                    }\n                }\n            }\n            else {\n                ctx.save();\n                repaint();\n                ctx.restore();\n            }\n            layer.__drawIndex = i;\n            if (layer.__drawIndex < layer.__endIndex) {\n                finished = false;\n            }\n        };\n        var this_1 = this;\n        for (var k = 0; k < layerList.length; k++) {\n            _loop_1(k);\n        }\n        if (env.wxa) {\n            util.each(this._layers, function (layer) {\n                if (layer && layer.ctx && layer.ctx.draw) {\n                    layer.ctx.draw();\n                }\n            });\n        }\n        return {\n            finished: finished,\n            needsRefreshHover: needsRefreshHover\n        };\n    };\n    CanvasPainter.prototype._doPaintEl = function (el, currentLayer, useDirtyRect, repaintRect, scope, isLast) {\n        var ctx = currentLayer.ctx;\n        if (useDirtyRect) {\n            var paintRect = el.getPaintRect();\n            if (!repaintRect || paintRect && paintRect.intersect(repaintRect)) {\n                brush(ctx, el, scope, isLast);\n                el.setPrevPaintRect(paintRect);\n            }\n        }\n        else {\n            brush(ctx, el, scope, isLast);\n        }\n    };\n    CanvasPainter.prototype.getLayer = function (zlevel, virtual) {\n        if (this._singleCanvas && !this._needsManuallyCompositing) {\n            zlevel = CANVAS_ZLEVEL;\n        }\n        var layer = this._layers[zlevel];\n        if (!layer) {\n            layer = new Layer('zr_' + zlevel, this, this.dpr);\n            layer.zlevel = zlevel;\n            layer.__builtin__ = true;\n            if (this._layerConfig[zlevel]) {\n                util.merge(layer, this._layerConfig[zlevel], true);\n            }\n            else if (this._layerConfig[zlevel - EL_AFTER_INCREMENTAL_INC]) {\n                util.merge(layer, this._layerConfig[zlevel - EL_AFTER_INCREMENTAL_INC], true);\n            }\n            if (virtual) {\n                layer.virtual = virtual;\n            }\n            this.insertLayer(zlevel, layer);\n            layer.initContext();\n        }\n        return layer;\n    };\n    CanvasPainter.prototype.insertLayer = function (zlevel, layer) {\n        var layersMap = this._layers;\n        var zlevelList = this._zlevelList;\n        var len = zlevelList.length;\n        var domRoot = this._domRoot;\n        var prevLayer = null;\n        var i = -1;\n        if (layersMap[zlevel]) {\n            util.logError('ZLevel ' + zlevel + ' has been used already');\n            return;\n        }\n        if (!isLayerValid(layer)) {\n            util.logError('Layer of zlevel ' + zlevel + ' is not valid');\n            return;\n        }\n        if (len > 0 && zlevel > zlevelList[0]) {\n            for (i = 0; i < len - 1; i++) {\n                if (zlevelList[i] < zlevel\n                    && zlevelList[i + 1] > zlevel) {\n                    break;\n                }\n            }\n            prevLayer = layersMap[zlevelList[i]];\n        }\n        zlevelList.splice(i + 1, 0, zlevel);\n        layersMap[zlevel] = layer;\n        if (!layer.virtual) {\n            if (prevLayer) {\n                var prevDom = prevLayer.dom;\n                if (prevDom.nextSibling) {\n                    domRoot.insertBefore(layer.dom, prevDom.nextSibling);\n                }\n                else {\n                    domRoot.appendChild(layer.dom);\n                }\n            }\n            else {\n                if (domRoot.firstChild) {\n                    domRoot.insertBefore(layer.dom, domRoot.firstChild);\n                }\n                else {\n                    domRoot.appendChild(layer.dom);\n                }\n            }\n        }\n        layer.__painter = this;\n    };\n    CanvasPainter.prototype.eachLayer = function (cb, context) {\n        var zlevelList = this._zlevelList;\n        for (var i = 0; i < zlevelList.length; i++) {\n            var z = zlevelList[i];\n            cb.call(context, this._layers[z], z);\n        }\n    };\n    CanvasPainter.prototype.eachBuiltinLayer = function (cb, context) {\n        var zlevelList = this._zlevelList;\n        for (var i = 0; i < zlevelList.length; i++) {\n            var z = zlevelList[i];\n            var layer = this._layers[z];\n            if (layer.__builtin__) {\n                cb.call(context, layer, z);\n            }\n        }\n    };\n    CanvasPainter.prototype.eachOtherLayer = function (cb, context) {\n        var zlevelList = this._zlevelList;\n        for (var i = 0; i < zlevelList.length; i++) {\n            var z = zlevelList[i];\n            var layer = this._layers[z];\n            if (!layer.__builtin__) {\n                cb.call(context, layer, z);\n            }\n        }\n    };\n    CanvasPainter.prototype.getLayers = function () {\n        return this._layers;\n    };\n    CanvasPainter.prototype._updateLayerStatus = function (list) {\n        this.eachBuiltinLayer(function (layer, z) {\n            layer.__dirty = layer.__used = false;\n        });\n        function updatePrevLayer(idx) {\n            if (prevLayer) {\n                if (prevLayer.__endIndex !== idx) {\n                    prevLayer.__dirty = true;\n                }\n                prevLayer.__endIndex = idx;\n            }\n        }\n        if (this._singleCanvas) {\n            for (var i_1 = 1; i_1 < list.length; i_1++) {\n                var el = list[i_1];\n                if (el.zlevel !== list[i_1 - 1].zlevel || el.incremental) {\n                    this._needsManuallyCompositing = true;\n                    break;\n                }\n            }\n        }\n        var prevLayer = null;\n        var incrementalLayerCount = 0;\n        var prevZlevel;\n        var i;\n        for (i = 0; i < list.length; i++) {\n            var el = list[i];\n            var zlevel = el.zlevel;\n            var layer = void 0;\n            if (prevZlevel !== zlevel) {\n                prevZlevel = zlevel;\n                incrementalLayerCount = 0;\n            }\n            if (el.incremental) {\n                layer = this.getLayer(zlevel + INCREMENTAL_INC, this._needsManuallyCompositing);\n                layer.incremental = true;\n                incrementalLayerCount = 1;\n            }\n            else {\n                layer = this.getLayer(zlevel + (incrementalLayerCount > 0 ? EL_AFTER_INCREMENTAL_INC : 0), this._needsManuallyCompositing);\n            }\n            if (!layer.__builtin__) {\n                util.logError('ZLevel ' + zlevel + ' has been used by unkown layer ' + layer.id);\n            }\n            if (layer !== prevLayer) {\n                layer.__used = true;\n                if (layer.__startIndex !== i) {\n                    layer.__dirty = true;\n                }\n                layer.__startIndex = i;\n                if (!layer.incremental) {\n                    layer.__drawIndex = i;\n                }\n                else {\n                    layer.__drawIndex = -1;\n                }\n                updatePrevLayer(i);\n                prevLayer = layer;\n            }\n            if ((el.__dirty & Element.REDARAW_BIT) && !el.__inHover) {\n                layer.__dirty = true;\n                if (layer.incremental && layer.__drawIndex < 0) {\n                    layer.__drawIndex = i;\n                }\n            }\n        }\n        updatePrevLayer(i);\n        this.eachBuiltinLayer(function (layer, z) {\n            if (!layer.__used && layer.getElementCount() > 0) {\n                layer.__dirty = true;\n                layer.__startIndex = layer.__endIndex = layer.__drawIndex = 0;\n            }\n            if (layer.__dirty && layer.__drawIndex < 0) {\n                layer.__drawIndex = layer.__startIndex;\n            }\n        });\n    };\n    CanvasPainter.prototype.clear = function () {\n        this.eachBuiltinLayer(this._clearLayer);\n        return this;\n    };\n    CanvasPainter.prototype._clearLayer = function (layer) {\n        layer.clear();\n    };\n    CanvasPainter.prototype.setBackgroundColor = function (backgroundColor) {\n        this._backgroundColor = backgroundColor;\n        util.each(this._layers, function (layer) {\n            layer.setUnpainted();\n        });\n    };\n    CanvasPainter.prototype.configLayer = function (zlevel, config) {\n        if (config) {\n            var layerConfig = this._layerConfig;\n            if (!layerConfig[zlevel]) {\n                layerConfig[zlevel] = config;\n            }\n            else {\n                util.merge(layerConfig[zlevel], config, true);\n            }\n            for (var i = 0; i < this._zlevelList.length; i++) {\n                var _zlevel = this._zlevelList[i];\n                if (_zlevel === zlevel || _zlevel === zlevel + EL_AFTER_INCREMENTAL_INC) {\n                    var layer = this._layers[_zlevel];\n                    util.merge(layer, layerConfig[zlevel], true);\n                }\n            }\n        }\n    };\n    CanvasPainter.prototype.delLayer = function (zlevel) {\n        var layers = this._layers;\n        var zlevelList = this._zlevelList;\n        var layer = layers[zlevel];\n        if (!layer) {\n            return;\n        }\n        layer.dom.parentNode.removeChild(layer.dom);\n        delete layers[zlevel];\n        zlevelList.splice(util.indexOf(zlevelList, zlevel), 1);\n    };\n    CanvasPainter.prototype.resize = function (width, height) {\n        if (!this._domRoot.style) {\n            if (width == null || height == null) {\n                return;\n            }\n            this._width = width;\n            this._height = height;\n            this.getLayer(CANVAS_ZLEVEL).resize(width, height);\n        }\n        else {\n            var domRoot = this._domRoot;\n            domRoot.style.display = 'none';\n            var opts = this._opts;\n            width != null && (opts.width = width);\n            height != null && (opts.height = height);\n            width = this._getSize(0);\n            height = this._getSize(1);\n            domRoot.style.display = '';\n            if (this._width !== width || height !== this._height) {\n                domRoot.style.width = width + 'px';\n                domRoot.style.height = height + 'px';\n                for (var id in this._layers) {\n                    if (this._layers.hasOwnProperty(id)) {\n                        this._layers[id].resize(width, height);\n                    }\n                }\n                this.refresh(true);\n            }\n            this._width = width;\n            this._height = height;\n        }\n        return this;\n    };\n    CanvasPainter.prototype.clearLayer = function (zlevel) {\n        var layer = this._layers[zlevel];\n        if (layer) {\n            layer.clear();\n        }\n    };\n    CanvasPainter.prototype.dispose = function () {\n        this.root.innerHTML = '';\n        this.root =\n            this.storage =\n                this._domRoot =\n                    this._layers = null;\n    };\n    CanvasPainter.prototype.getRenderedCanvas = function (opts) {\n        opts = opts || {};\n        if (this._singleCanvas && !this._compositeManually) {\n            return this._layers[CANVAS_ZLEVEL].dom;\n        }\n        var imageLayer = new Layer('image', this, opts.pixelRatio || this.dpr);\n        imageLayer.initContext();\n        imageLayer.clear(false, opts.backgroundColor || this._backgroundColor);\n        var ctx = imageLayer.ctx;\n        if (opts.pixelRatio <= this.dpr) {\n            this.refresh();\n            var width_1 = imageLayer.dom.width;\n            var height_1 = imageLayer.dom.height;\n            this.eachLayer(function (layer) {\n                if (layer.__builtin__) {\n                    ctx.drawImage(layer.dom, 0, 0, width_1, height_1);\n                }\n                else if (layer.renderToCanvas) {\n                    ctx.save();\n                    layer.renderToCanvas(ctx);\n                    ctx.restore();\n                }\n            });\n        }\n        else {\n            var scope = {\n                inHover: false,\n                viewWidth: this._width,\n                viewHeight: this._height\n            };\n            var displayList = this.storage.getDisplayList(true);\n            for (var i = 0, len = displayList.length; i < len; i++) {\n                var el = displayList[i];\n                brush(ctx, el, scope, i === len - 1);\n            }\n        }\n        return imageLayer.dom;\n    };\n    CanvasPainter.prototype.getWidth = function () {\n        return this._width;\n    };\n    CanvasPainter.prototype.getHeight = function () {\n        return this._height;\n    };\n    CanvasPainter.prototype._getSize = function (whIdx) {\n        var opts = this._opts;\n        var wh = ['width', 'height'][whIdx];\n        var cwh = ['clientWidth', 'clientHeight'][whIdx];\n        var plt = ['paddingLeft', 'paddingTop'][whIdx];\n        var prb = ['paddingRight', 'paddingBottom'][whIdx];\n        if (opts[wh] != null && opts[wh] !== 'auto') {\n            return parseFloat(opts[wh]);\n        }\n        var root = this.root;\n        var stl = document.defaultView.getComputedStyle(root);\n        return ((root[cwh] || parseInt10(stl[wh]) || parseInt10(root.style[wh]))\n            - (parseInt10(stl[plt]) || 0)\n            - (parseInt10(stl[prb]) || 0)) | 0;\n    };\n    CanvasPainter.prototype.pathToImage = function (path, dpr) {\n        dpr = dpr || this.dpr;\n        var canvas = document.createElement('canvas');\n        var ctx = canvas.getContext('2d');\n        var rect = path.getBoundingRect();\n        var style = path.style;\n        var shadowBlurSize = style.shadowBlur * dpr;\n        var shadowOffsetX = style.shadowOffsetX * dpr;\n        var shadowOffsetY = style.shadowOffsetY * dpr;\n        var lineWidth = path.hasStroke() ? style.lineWidth : 0;\n        var leftMargin = Math.max(lineWidth / 2, -shadowOffsetX + shadowBlurSize);\n        var rightMargin = Math.max(lineWidth / 2, shadowOffsetX + shadowBlurSize);\n        var topMargin = Math.max(lineWidth / 2, -shadowOffsetY + shadowBlurSize);\n        var bottomMargin = Math.max(lineWidth / 2, shadowOffsetY + shadowBlurSize);\n        var width = rect.width + leftMargin + rightMargin;\n        var height = rect.height + topMargin + bottomMargin;\n        canvas.width = width * dpr;\n        canvas.height = height * dpr;\n        ctx.scale(dpr, dpr);\n        ctx.clearRect(0, 0, width, height);\n        ctx.dpr = dpr;\n        var pathTransform = {\n            x: path.x,\n            y: path.y,\n            scaleX: path.scaleX,\n            scaleY: path.scaleY,\n            rotation: path.rotation,\n            originX: path.originX,\n            originY: path.originY\n        };\n        path.x = leftMargin - rect.x;\n        path.y = topMargin - rect.y;\n        path.rotation = 0;\n        path.scaleX = 1;\n        path.scaleY = 1;\n        path.updateTransform();\n        if (path) {\n            brush(ctx, path, {\n                inHover: false,\n                viewWidth: this._width,\n                viewHeight: this._height\n            }, true);\n        }\n        var imgShape = new ZRImage({\n            style: {\n                x: 0,\n                y: 0,\n                image: canvas\n            }\n        });\n        util.extend(path, pathTransform);\n        return imgShape;\n    };\n    return CanvasPainter;\n}());\nexport default CanvasPainter;\n;\n","import { __extends } from \"tslib\";\nimport * as zrUtil from '../core/util';\nimport Element from '../Element';\nimport BoundingRect from '../core/BoundingRect';\nvar Group = (function (_super) {\n    __extends(Group, _super);\n    function Group(opts) {\n        var _this = _super.call(this) || this;\n        _this.isGroup = true;\n        _this._children = [];\n        _this.attr(opts);\n        return _this;\n    }\n    Group.prototype.childrenRef = function () {\n        return this._children;\n    };\n    Group.prototype.children = function () {\n        return this._children.slice();\n    };\n    Group.prototype.childAt = function (idx) {\n        return this._children[idx];\n    };\n    Group.prototype.childOfName = function (name) {\n        var children = this._children;\n        for (var i = 0; i < children.length; i++) {\n            if (children[i].name === name) {\n                return children[i];\n            }\n        }\n    };\n    Group.prototype.childCount = function () {\n        return this._children.length;\n    };\n    Group.prototype.add = function (child) {\n        if (child) {\n            if (child !== this && child.parent !== this) {\n                this._children.push(child);\n                this._doAdd(child);\n            }\n            if (child.__hostTarget) {\n                throw 'This elemenet has been used as an attachment';\n            }\n        }\n        return this;\n    };\n    Group.prototype.addBefore = function (child, nextSibling) {\n        if (child && child !== this && child.parent !== this\n            && nextSibling && nextSibling.parent === this) {\n            var children = this._children;\n            var idx = children.indexOf(nextSibling);\n            if (idx >= 0) {\n                children.splice(idx, 0, child);\n                this._doAdd(child);\n            }\n        }\n        return this;\n    };\n    Group.prototype.replaceAt = function (child, index) {\n        var children = this._children;\n        var old = children[index];\n        if (child && child !== this && child.parent !== this && child !== old) {\n            children[index] = child;\n            old.parent = null;\n            var zr = this.__zr;\n            if (zr) {\n                old.removeSelfFromZr(zr);\n            }\n            this._doAdd(child);\n        }\n        return this;\n    };\n    Group.prototype._doAdd = function (child) {\n        if (child.parent) {\n            child.parent.remove(child);\n        }\n        child.parent = this;\n        var zr = this.__zr;\n        if (zr && zr !== child.__zr) {\n            child.addSelfToZr(zr);\n        }\n        zr && zr.refresh();\n    };\n    Group.prototype.remove = function (child) {\n        var zr = this.__zr;\n        var children = this._children;\n        var idx = zrUtil.indexOf(children, child);\n        if (idx < 0) {\n            return this;\n        }\n        children.splice(idx, 1);\n        child.parent = null;\n        if (zr) {\n            child.removeSelfFromZr(zr);\n        }\n        zr && zr.refresh();\n        return this;\n    };\n    Group.prototype.removeAll = function () {\n        var children = this._children;\n        var zr = this.__zr;\n        for (var i = 0; i < children.length; i++) {\n            var child = children[i];\n            if (zr) {\n                child.removeSelfFromZr(zr);\n            }\n            child.parent = null;\n        }\n        children.length = 0;\n        return this;\n    };\n    Group.prototype.eachChild = function (cb, context) {\n        var children = this._children;\n        for (var i = 0; i < children.length; i++) {\n            var child = children[i];\n            cb.call(context, child, i);\n        }\n        return this;\n    };\n    Group.prototype.traverse = function (cb, context) {\n        for (var i = 0; i < this._children.length; i++) {\n            var child = this._children[i];\n            var stopped = cb.call(context, child);\n            if (child.isGroup && !stopped) {\n                child.traverse(cb, context);\n            }\n        }\n        return this;\n    };\n    Group.prototype.addSelfToZr = function (zr) {\n        _super.prototype.addSelfToZr.call(this, zr);\n        for (var i = 0; i < this._children.length; i++) {\n            var child = this._children[i];\n            child.addSelfToZr(zr);\n        }\n    };\n    Group.prototype.removeSelfFromZr = function (zr) {\n        _super.prototype.removeSelfFromZr.call(this, zr);\n        for (var i = 0; i < this._children.length; i++) {\n            var child = this._children[i];\n            child.removeSelfFromZr(zr);\n        }\n    };\n    Group.prototype.getBoundingRect = function (includeChildren) {\n        var tmpRect = new BoundingRect(0, 0, 0, 0);\n        var children = includeChildren || this._children;\n        var tmpMat = [];\n        var rect = null;\n        for (var i = 0; i < children.length; i++) {\n            var child = children[i];\n            if (child.ignore || child.invisible) {\n                continue;\n            }\n            var childRect = child.getBoundingRect();\n            var transform = child.getLocalTransform(tmpMat);\n            if (transform) {\n                BoundingRect.applyTransform(tmpRect, childRect, transform);\n                rect = rect || tmpRect.clone();\n                rect.union(tmpRect);\n            }\n            else {\n                rect = rect || childRect.clone();\n                rect.union(childRect);\n            }\n        }\n        return rect || tmpRect;\n    };\n    return Group;\n}(Element));\nGroup.prototype.type = 'group';\nexport default Group;\n","import Transformable from './core/Transformable';\nimport Animator, { cloneValue } from './animation/Animator';\nimport BoundingRect from './core/BoundingRect';\nimport Eventful from './core/Eventful';\nimport { calculateTextPosition, parsePercent } from './contain/text';\nimport { guid, isObject, keys, extend, indexOf, logError, mixin, isArrayLike, isTypedArray } from './core/util';\nimport { LIGHT_LABEL_COLOR, DARK_LABEL_COLOR } from './config';\nimport { parse, stringify } from './tool/color';\nimport env from './core/env';\nexport var PRESERVED_NORMAL_STATE = '__zr_normal__';\nvar PRIMARY_STATES_KEYS = ['x', 'y', 'scaleX', 'scaleY', 'originX', 'originY', 'rotation', 'ignore'];\nvar DEFAULT_ANIMATABLE_MAP = {\n    x: true,\n    y: true,\n    scaleX: true,\n    scaleY: true,\n    originX: true,\n    originY: true,\n    rotation: true,\n    ignore: false\n};\nvar tmpTextPosCalcRes = {};\nvar tmpBoundingRect = new BoundingRect(0, 0, 0, 0);\nvar Element = (function () {\n    function Element(props) {\n        this.id = guid();\n        this.animators = [];\n        this.currentStates = [];\n        this.states = {};\n        this._init(props);\n    }\n    Element.prototype._init = function (props) {\n        this.attr(props);\n    };\n    Element.prototype.drift = function (dx, dy, e) {\n        switch (this.draggable) {\n            case 'horizontal':\n                dy = 0;\n                break;\n            case 'vertical':\n                dx = 0;\n                break;\n        }\n        var m = this.transform;\n        if (!m) {\n            m = this.transform = [1, 0, 0, 1, 0, 0];\n        }\n        m[4] += dx;\n        m[5] += dy;\n        this.decomposeTransform();\n        this.markRedraw();\n    };\n    Element.prototype.beforeUpdate = function () { };\n    Element.prototype.afterUpdate = function () { };\n    Element.prototype.update = function () {\n        this.updateTransform();\n        if (this.__dirty) {\n            this.updateInnerText();\n        }\n    };\n    Element.prototype.updateInnerText = function (forceUpdate) {\n        var textEl = this._textContent;\n        if (textEl && (!textEl.ignore || forceUpdate)) {\n            if (!this.textConfig) {\n                this.textConfig = {};\n            }\n            var textConfig = this.textConfig;\n            var isLocal = textConfig.local;\n            var attachedTransform = textEl.attachedTransform;\n            var textAlign = void 0;\n            var textVerticalAlign = void 0;\n            var textStyleChanged = false;\n            if (isLocal) {\n                attachedTransform.parent = this;\n            }\n            else {\n                attachedTransform.parent = null;\n            }\n            var innerOrigin = false;\n            attachedTransform.x = textEl.x;\n            attachedTransform.y = textEl.y;\n            attachedTransform.originX = textEl.originX;\n            attachedTransform.originY = textEl.originY;\n            attachedTransform.rotation = textEl.rotation;\n            attachedTransform.scaleX = textEl.scaleX;\n            attachedTransform.scaleY = textEl.scaleY;\n            if (textConfig.position != null) {\n                var layoutRect = tmpBoundingRect;\n                if (textConfig.layoutRect) {\n                    layoutRect.copy(textConfig.layoutRect);\n                }\n                else {\n                    layoutRect.copy(this.getBoundingRect());\n                }\n                if (!isLocal) {\n                    layoutRect.applyTransform(this.transform);\n                }\n                if (this.calculateTextPosition) {\n                    this.calculateTextPosition(tmpTextPosCalcRes, textConfig, layoutRect);\n                }\n                else {\n                    calculateTextPosition(tmpTextPosCalcRes, textConfig, layoutRect);\n                }\n                attachedTransform.x = tmpTextPosCalcRes.x;\n                attachedTransform.y = tmpTextPosCalcRes.y;\n                textAlign = tmpTextPosCalcRes.align;\n                textVerticalAlign = tmpTextPosCalcRes.verticalAlign;\n                var textOrigin = textConfig.origin;\n                if (textOrigin && textConfig.rotation != null) {\n                    var relOriginX = void 0;\n                    var relOriginY = void 0;\n                    if (textOrigin === 'center') {\n                        relOriginX = layoutRect.width * 0.5;\n                        relOriginY = layoutRect.height * 0.5;\n                    }\n                    else {\n                        relOriginX = parsePercent(textOrigin[0], layoutRect.width);\n                        relOriginY = parsePercent(textOrigin[1], layoutRect.height);\n                    }\n                    innerOrigin = true;\n                    attachedTransform.originX = -attachedTransform.x + relOriginX + (isLocal ? 0 : layoutRect.x);\n                    attachedTransform.originY = -attachedTransform.y + relOriginY + (isLocal ? 0 : layoutRect.y);\n                }\n            }\n            if (textConfig.rotation != null) {\n                attachedTransform.rotation = textConfig.rotation;\n            }\n            var textOffset = textConfig.offset;\n            if (textOffset) {\n                attachedTransform.x += textOffset[0];\n                attachedTransform.y += textOffset[1];\n                if (!innerOrigin) {\n                    attachedTransform.originX = -textOffset[0];\n                    attachedTransform.originY = -textOffset[1];\n                }\n            }\n            var isInside = textConfig.inside == null\n                ? (typeof textConfig.position === 'string' && textConfig.position.indexOf('inside') >= 0)\n                : textConfig.inside;\n            var innerTextDefaultStyle = this._innerTextDefaultStyle || (this._innerTextDefaultStyle = {});\n            var textFill = void 0;\n            var textStroke = void 0;\n            var autoStroke = void 0;\n            if (isInside && this.canBeInsideText()) {\n                textFill = textConfig.insideFill;\n                textStroke = textConfig.insideStroke;\n                if (textFill == null || textFill === 'auto') {\n                    textFill = this.getInsideTextFill();\n                }\n                if (textStroke == null || textStroke === 'auto') {\n                    textStroke = this.getInsideTextStroke(textFill);\n                    autoStroke = true;\n                }\n            }\n            else {\n                textFill = textConfig.outsideFill;\n                textStroke = textConfig.outsideStroke;\n                if (textFill == null || textFill === 'auto') {\n                    textFill = this.getOutsideFill();\n                }\n                if (textStroke == null || textStroke === 'auto') {\n                    textStroke = this.getOutsideStroke(textFill);\n                    autoStroke = true;\n                }\n            }\n            textFill = textFill || '#000';\n            if (textFill !== innerTextDefaultStyle.fill\n                || textStroke !== innerTextDefaultStyle.stroke\n                || autoStroke !== innerTextDefaultStyle.autoStroke\n                || textAlign !== innerTextDefaultStyle.align\n                || textVerticalAlign !== innerTextDefaultStyle.verticalAlign) {\n                textStyleChanged = true;\n                innerTextDefaultStyle.fill = textFill;\n                innerTextDefaultStyle.stroke = textStroke;\n                innerTextDefaultStyle.autoStroke = autoStroke;\n                innerTextDefaultStyle.align = textAlign;\n                innerTextDefaultStyle.verticalAlign = textVerticalAlign;\n                textEl.setDefaultTextStyle(innerTextDefaultStyle);\n            }\n            if (textStyleChanged) {\n                textEl.dirtyStyle();\n            }\n            textEl.markRedraw();\n        }\n    };\n    Element.prototype.canBeInsideText = function () {\n        return true;\n    };\n    Element.prototype.getInsideTextFill = function () {\n        return '#fff';\n    };\n    Element.prototype.getInsideTextStroke = function (textFill) {\n        return '#000';\n    };\n    Element.prototype.getOutsideFill = function () {\n        return this.__zr && this.__zr.isDarkMode() ? LIGHT_LABEL_COLOR : DARK_LABEL_COLOR;\n    };\n    Element.prototype.getOutsideStroke = function (textFill) {\n        var backgroundColor = this.__zr && this.__zr.getBackgroundColor();\n        var colorArr = typeof backgroundColor === 'string' && parse(backgroundColor);\n        if (!colorArr) {\n            colorArr = [255, 255, 255, 1];\n        }\n        var alpha = colorArr[3];\n        var isDark = this.__zr.isDarkMode();\n        for (var i = 0; i < 3; i++) {\n            colorArr[i] = colorArr[i] * alpha + (isDark ? 0 : 255) * (1 - alpha);\n        }\n        colorArr[3] = 1;\n        return stringify(colorArr, 'rgba');\n    };\n    Element.prototype.traverse = function (cb, context) { };\n    Element.prototype.attrKV = function (key, value) {\n        if (key === 'textConfig') {\n            this.setTextConfig(value);\n        }\n        else if (key === 'textContent') {\n            this.setTextContent(value);\n        }\n        else if (key === 'clipPath') {\n            this.setClipPath(value);\n        }\n        else if (key === 'extra') {\n            this.extra = this.extra || {};\n            extend(this.extra, value);\n        }\n        else {\n            this[key] = value;\n        }\n    };\n    Element.prototype.hide = function () {\n        this.ignore = true;\n        this.markRedraw();\n    };\n    Element.prototype.show = function () {\n        this.ignore = false;\n        this.markRedraw();\n    };\n    Element.prototype.attr = function (keyOrObj, value) {\n        if (typeof keyOrObj === 'string') {\n            this.attrKV(keyOrObj, value);\n        }\n        else if (isObject(keyOrObj)) {\n            var obj = keyOrObj;\n            var keysArr = keys(obj);\n            for (var i = 0; i < keysArr.length; i++) {\n                var key = keysArr[i];\n                this.attrKV(key, keyOrObj[key]);\n            }\n        }\n        this.markRedraw();\n        return this;\n    };\n    Element.prototype.saveCurrentToNormalState = function (toState) {\n        this._innerSaveToNormal(toState);\n        var normalState = this._normalState;\n        for (var i = 0; i < this.animators.length; i++) {\n            var animator = this.animators[i];\n            var fromStateTransition = animator.__fromStateTransition;\n            if (fromStateTransition && fromStateTransition !== PRESERVED_NORMAL_STATE) {\n                continue;\n            }\n            var targetName = animator.targetName;\n            var target = targetName\n                ? normalState[targetName] : normalState;\n            animator.saveFinalToTarget(target);\n        }\n    };\n    Element.prototype._innerSaveToNormal = function (toState) {\n        var normalState = this._normalState;\n        if (!normalState) {\n            normalState = this._normalState = {};\n        }\n        if (toState.textConfig && !normalState.textConfig) {\n            normalState.textConfig = this.textConfig;\n        }\n        this._savePrimaryToNormal(toState, normalState, PRIMARY_STATES_KEYS);\n    };\n    Element.prototype._savePrimaryToNormal = function (toState, normalState, primaryKeys) {\n        for (var i = 0; i < primaryKeys.length; i++) {\n            var key = primaryKeys[i];\n            if (toState[key] != null && !(key in normalState)) {\n                normalState[key] = this[key];\n            }\n        }\n    };\n    Element.prototype.hasState = function () {\n        return this.currentStates.length > 0;\n    };\n    Element.prototype.getState = function (name) {\n        return this.states[name];\n    };\n    Element.prototype.ensureState = function (name) {\n        var states = this.states;\n        if (!states[name]) {\n            states[name] = {};\n        }\n        return states[name];\n    };\n    Element.prototype.clearStates = function (noAnimation) {\n        this.useState(PRESERVED_NORMAL_STATE, false, noAnimation);\n    };\n    Element.prototype.useState = function (stateName, keepCurrentStates, noAnimation) {\n        var toNormalState = stateName === PRESERVED_NORMAL_STATE;\n        var hasStates = this.hasState();\n        if (!hasStates && toNormalState) {\n            return;\n        }\n        var currentStates = this.currentStates;\n        var animationCfg = this.stateTransition;\n        if (indexOf(currentStates, stateName) >= 0 && (keepCurrentStates || currentStates.length === 1)) {\n            return;\n        }\n        var state;\n        if (this.stateProxy && !toNormalState) {\n            state = this.stateProxy(stateName);\n        }\n        if (!state) {\n            state = (this.states && this.states[stateName]);\n        }\n        if (!state && !toNormalState) {\n            logError(\"State \" + stateName + \" not exists.\");\n            return;\n        }\n        if (!toNormalState) {\n            this.saveCurrentToNormalState(state);\n        }\n        var useHoverLayer = !!(state && state.hoverLayer);\n        if (useHoverLayer) {\n            this._toggleHoverLayerFlag(true);\n        }\n        this._applyStateObj(stateName, state, this._normalState, keepCurrentStates, !noAnimation && !this.__inHover && animationCfg && animationCfg.duration > 0, animationCfg);\n        if (this._textContent) {\n            this._textContent.useState(stateName, keepCurrentStates);\n        }\n        if (this._textGuide) {\n            this._textGuide.useState(stateName, keepCurrentStates);\n        }\n        if (toNormalState) {\n            this.currentStates = [];\n            this._normalState = {};\n        }\n        else {\n            if (!keepCurrentStates) {\n                this.currentStates = [stateName];\n            }\n            else {\n                this.currentStates.push(stateName);\n            }\n        }\n        this._updateAnimationTargets();\n        this.markRedraw();\n        if (!useHoverLayer && this.__inHover) {\n            this._toggleHoverLayerFlag(false);\n            this.__dirty &= ~Element.REDARAW_BIT;\n        }\n        return state;\n    };\n    Element.prototype.useStates = function (states, noAnimation) {\n        if (!states.length) {\n            this.clearStates();\n        }\n        else {\n            var stateObjects = [];\n            var currentStates = this.currentStates;\n            var len = states.length;\n            var notChange = len === currentStates.length;\n            if (notChange) {\n                for (var i = 0; i < len; i++) {\n                    if (states[i] !== currentStates[i]) {\n                        notChange = false;\n                        break;\n                    }\n                }\n            }\n            if (notChange) {\n                return;\n            }\n            for (var i = 0; i < len; i++) {\n                var stateName = states[i];\n                var stateObj = void 0;\n                if (this.stateProxy) {\n                    stateObj = this.stateProxy(stateName, states);\n                }\n                if (!stateObj) {\n                    stateObj = this.states[stateName];\n                }\n                if (stateObj) {\n                    stateObjects.push(stateObj);\n                }\n            }\n            var useHoverLayer = !!(stateObjects[len - 1] && stateObjects[len - 1].hoverLayer);\n            if (useHoverLayer) {\n                this._toggleHoverLayerFlag(true);\n            }\n            var mergedState = this._mergeStates(stateObjects);\n            var animationCfg = this.stateTransition;\n            this.saveCurrentToNormalState(mergedState);\n            this._applyStateObj(states.join(','), mergedState, this._normalState, false, !noAnimation && !this.__inHover && animationCfg && animationCfg.duration > 0, animationCfg);\n            if (this._textContent) {\n                this._textContent.useStates(states);\n            }\n            if (this._textGuide) {\n                this._textGuide.useStates(states);\n            }\n            this._updateAnimationTargets();\n            this.currentStates = states.slice();\n            this.markRedraw();\n            if (!useHoverLayer && this.__inHover) {\n                this._toggleHoverLayerFlag(false);\n                this.__dirty &= ~Element.REDARAW_BIT;\n            }\n        }\n    };\n    Element.prototype._updateAnimationTargets = function () {\n        for (var i = 0; i < this.animators.length; i++) {\n            var animator = this.animators[i];\n            if (animator.targetName) {\n                animator.changeTarget(this[animator.targetName]);\n            }\n        }\n    };\n    Element.prototype.removeState = function (state) {\n        var idx = indexOf(this.currentStates, state);\n        if (idx >= 0) {\n            var currentStates = this.currentStates.slice();\n            currentStates.splice(idx, 1);\n            this.useStates(currentStates);\n        }\n    };\n    Element.prototype.replaceState = function (oldState, newState, forceAdd) {\n        var currentStates = this.currentStates.slice();\n        var idx = indexOf(currentStates, oldState);\n        var newStateExists = indexOf(currentStates, newState) >= 0;\n        if (idx >= 0) {\n            if (!newStateExists) {\n                currentStates[idx] = newState;\n            }\n            else {\n                currentStates.splice(idx, 1);\n            }\n        }\n        else if (forceAdd && !newStateExists) {\n            currentStates.push(newState);\n        }\n        this.useStates(currentStates);\n    };\n    Element.prototype.toggleState = function (state, enable) {\n        if (enable) {\n            this.useState(state, true);\n        }\n        else {\n            this.removeState(state);\n        }\n    };\n    Element.prototype._mergeStates = function (states) {\n        var mergedState = {};\n        var mergedTextConfig;\n        for (var i = 0; i < states.length; i++) {\n            var state = states[i];\n            extend(mergedState, state);\n            if (state.textConfig) {\n                mergedTextConfig = mergedTextConfig || {};\n                extend(mergedTextConfig, state.textConfig);\n            }\n        }\n        if (mergedTextConfig) {\n            mergedState.textConfig = mergedTextConfig;\n        }\n        return mergedState;\n    };\n    Element.prototype._applyStateObj = function (stateName, state, normalState, keepCurrentStates, transition, animationCfg) {\n        var needsRestoreToNormal = !(state && keepCurrentStates);\n        if (state && state.textConfig) {\n            this.textConfig = extend({}, keepCurrentStates ? this.textConfig : normalState.textConfig);\n            extend(this.textConfig, state.textConfig);\n        }\n        else if (needsRestoreToNormal) {\n            if (normalState.textConfig) {\n                this.textConfig = normalState.textConfig;\n            }\n        }\n        var transitionTarget = {};\n        var hasTransition = false;\n        for (var i = 0; i < PRIMARY_STATES_KEYS.length; i++) {\n            var key = PRIMARY_STATES_KEYS[i];\n            var propNeedsTransition = transition && DEFAULT_ANIMATABLE_MAP[key];\n            if (state && state[key] != null) {\n                if (propNeedsTransition) {\n                    hasTransition = true;\n                    transitionTarget[key] = state[key];\n                }\n                else {\n                    this[key] = state[key];\n                }\n            }\n            else if (needsRestoreToNormal) {\n                if (normalState[key] != null) {\n                    if (propNeedsTransition) {\n                        hasTransition = true;\n                        transitionTarget[key] = normalState[key];\n                    }\n                    else {\n                        this[key] = normalState[key];\n                    }\n                }\n            }\n        }\n        if (!transition) {\n            for (var i = 0; i < this.animators.length; i++) {\n                var animator = this.animators[i];\n                var targetName = animator.targetName;\n                animator.__changeFinalValue(targetName\n                    ? (state || normalState)[targetName]\n                    : (state || normalState));\n            }\n        }\n        if (hasTransition) {\n            this._transitionState(stateName, transitionTarget, animationCfg);\n        }\n    };\n    Element.prototype._attachComponent = function (componentEl) {\n        if (componentEl.__zr && !componentEl.__hostTarget) {\n            throw new Error('Text element has been added to zrender.');\n        }\n        if (componentEl === this) {\n            throw new Error('Recursive component attachment.');\n        }\n        var zr = this.__zr;\n        if (zr) {\n            componentEl.addSelfToZr(zr);\n        }\n        componentEl.__zr = zr;\n        componentEl.__hostTarget = this;\n    };\n    Element.prototype._detachComponent = function (componentEl) {\n        if (componentEl.__zr) {\n            componentEl.removeSelfFromZr(componentEl.__zr);\n        }\n        componentEl.__zr = null;\n        componentEl.__hostTarget = null;\n    };\n    Element.prototype.getClipPath = function () {\n        return this._clipPath;\n    };\n    Element.prototype.setClipPath = function (clipPath) {\n        if (this._clipPath && this._clipPath !== clipPath) {\n            this.removeClipPath();\n        }\n        this._attachComponent(clipPath);\n        this._clipPath = clipPath;\n        this.markRedraw();\n    };\n    Element.prototype.removeClipPath = function () {\n        var clipPath = this._clipPath;\n        if (clipPath) {\n            this._detachComponent(clipPath);\n            this._clipPath = null;\n            this.markRedraw();\n        }\n    };\n    Element.prototype.getTextContent = function () {\n        return this._textContent;\n    };\n    Element.prototype.setTextContent = function (textEl) {\n        var previousTextContent = this._textContent;\n        if (previousTextContent === textEl) {\n            return;\n        }\n        if (previousTextContent && previousTextContent !== textEl) {\n            this.removeTextContent();\n        }\n        if (textEl.__zr && !textEl.__hostTarget) {\n            throw new Error('Text element has been added to zrender.');\n        }\n        textEl.attachedTransform = new Transformable();\n        this._attachComponent(textEl);\n        this._textContent = textEl;\n        this.markRedraw();\n    };\n    Element.prototype.setTextConfig = function (cfg) {\n        if (!this.textConfig) {\n            this.textConfig = {};\n        }\n        extend(this.textConfig, cfg);\n        this.markRedraw();\n    };\n    Element.prototype.removeTextContent = function () {\n        var textEl = this._textContent;\n        if (textEl) {\n            textEl.attachedTransform = null;\n            this._detachComponent(textEl);\n            this._textContent = null;\n            this._innerTextDefaultStyle = null;\n            this.markRedraw();\n        }\n    };\n    Element.prototype.getTextGuideLine = function () {\n        return this._textGuide;\n    };\n    Element.prototype.setTextGuideLine = function (guideLine) {\n        if (this._textGuide && this._textGuide !== guideLine) {\n            this.removeTextGuideLine();\n        }\n        this._attachComponent(guideLine);\n        this._textGuide = guideLine;\n        this.markRedraw();\n    };\n    Element.prototype.removeTextGuideLine = function () {\n        var textGuide = this._textGuide;\n        if (textGuide) {\n            this._detachComponent(textGuide);\n            this._textGuide = null;\n            this.markRedraw();\n        }\n    };\n    Element.prototype.markRedraw = function () {\n        this.__dirty |= Element.REDARAW_BIT;\n        var zr = this.__zr;\n        if (zr) {\n            if (this.__inHover) {\n                zr.refreshHover();\n            }\n            else {\n                zr.refresh();\n            }\n        }\n        if (this.__hostTarget) {\n            this.__hostTarget.markRedraw();\n        }\n    };\n    Element.prototype.dirty = function () {\n        this.markRedraw();\n    };\n    Element.prototype._toggleHoverLayerFlag = function (inHover) {\n        this.__inHover = inHover;\n        var textContent = this._textContent;\n        var textGuide = this._textGuide;\n        if (textContent) {\n            textContent.__inHover = inHover;\n        }\n        if (textGuide) {\n            textGuide.__inHover = inHover;\n        }\n    };\n    Element.prototype.addSelfToZr = function (zr) {\n        this.__zr = zr;\n        var animators = this.animators;\n        if (animators) {\n            for (var i = 0; i < animators.length; i++) {\n                zr.animation.addAnimator(animators[i]);\n            }\n        }\n        if (this._clipPath) {\n            this._clipPath.addSelfToZr(zr);\n        }\n        if (this._textContent) {\n            this._textContent.addSelfToZr(zr);\n        }\n        if (this._textGuide) {\n            this._textGuide.addSelfToZr(zr);\n        }\n    };\n    Element.prototype.removeSelfFromZr = function (zr) {\n        this.__zr = null;\n        var animators = this.animators;\n        if (animators) {\n            for (var i = 0; i < animators.length; i++) {\n                zr.animation.removeAnimator(animators[i]);\n            }\n        }\n        if (this._clipPath) {\n            this._clipPath.removeSelfFromZr(zr);\n        }\n        if (this._textContent) {\n            this._textContent.removeSelfFromZr(zr);\n        }\n        if (this._textGuide) {\n            this._textGuide.removeSelfFromZr(zr);\n        }\n    };\n    Element.prototype.animate = function (key, loop) {\n        var target = key ? this[key] : this;\n        if (!target) {\n            logError('Property \"'\n                + key\n                + '\" is not existed in element '\n                + this.id);\n            return;\n        }\n        var animator = new Animator(target, loop);\n        this.addAnimator(animator, key);\n        return animator;\n    };\n    Element.prototype.addAnimator = function (animator, key) {\n        var zr = this.__zr;\n        var el = this;\n        animator.during(function () {\n            el.updateDuringAnimation(key);\n        }).done(function () {\n            var animators = el.animators;\n            var idx = indexOf(animators, animator);\n            if (idx >= 0) {\n                animators.splice(idx, 1);\n            }\n        });\n        this.animators.push(animator);\n        if (zr) {\n            zr.animation.addAnimator(animator);\n        }\n        zr && zr.wakeUp();\n    };\n    Element.prototype.updateDuringAnimation = function (key) {\n        this.markRedraw();\n    };\n    Element.prototype.stopAnimation = function (scope, forwardToLast) {\n        var animators = this.animators;\n        var len = animators.length;\n        var leftAnimators = [];\n        for (var i = 0; i < len; i++) {\n            var animator = animators[i];\n            if (!scope || scope === animator.scope) {\n                animator.stop(forwardToLast);\n            }\n            else {\n                leftAnimators.push(animator);\n            }\n        }\n        this.animators = leftAnimators;\n        return this;\n    };\n    Element.prototype.animateTo = function (target, cfg, animationProps) {\n        animateTo(this, target, cfg, animationProps);\n    };\n    Element.prototype.animateFrom = function (target, cfg, animationProps) {\n        animateTo(this, target, cfg, animationProps, true);\n    };\n    Element.prototype._transitionState = function (stateName, target, cfg, animationProps) {\n        var animators = animateTo(this, target, cfg, animationProps);\n        for (var i = 0; i < animators.length; i++) {\n            animators[i].__fromStateTransition = stateName;\n        }\n    };\n    Element.prototype.getBoundingRect = function () {\n        return null;\n    };\n    Element.prototype.getPaintRect = function () {\n        return null;\n    };\n    Element.REDARAW_BIT = 1;\n    Element.initDefaultProps = (function () {\n        var elProto = Element.prototype;\n        elProto.type = 'element';\n        elProto.name = '';\n        elProto.ignore = false;\n        elProto.silent = false;\n        elProto.isGroup = false;\n        elProto.draggable = false;\n        elProto.dragging = false;\n        elProto.ignoreClip = false;\n        elProto.__inHover = false;\n        elProto.__dirty = Element.REDARAW_BIT;\n        var logs = {};\n        function logDeprecatedError(key, xKey, yKey) {\n            if (!logs[key + xKey + yKey]) {\n                console.warn(\"DEPRECATED: '\" + key + \"' has been deprecated. use '\" + xKey + \"', '\" + yKey + \"' instead\");\n                logs[key + xKey + yKey] = true;\n            }\n        }\n        function createLegacyProperty(key, privateKey, xKey, yKey) {\n            Object.defineProperty(elProto, key, {\n                get: function () {\n                    logDeprecatedError(key, xKey, yKey);\n                    if (!this[privateKey]) {\n                        var pos = this[privateKey] = [];\n                        enhanceArray(this, pos);\n                    }\n                    return this[privateKey];\n                },\n                set: function (pos) {\n                    logDeprecatedError(key, xKey, yKey);\n                    this[xKey] = pos[0];\n                    this[yKey] = pos[1];\n                    this[privateKey] = pos;\n                    enhanceArray(this, pos);\n                }\n            });\n            function enhanceArray(self, pos) {\n                Object.defineProperty(pos, 0, {\n                    get: function () {\n                        return self[xKey];\n                    },\n                    set: function (val) {\n                        self[xKey] = val;\n                    }\n                });\n                Object.defineProperty(pos, 1, {\n                    get: function () {\n                        return self[yKey];\n                    },\n                    set: function (val) {\n                        self[yKey] = val;\n                    }\n                });\n            }\n        }\n        if (Object.defineProperty && (!env.browser.ie || env.browser.version > 8)) {\n            createLegacyProperty('position', '_legacyPos', 'x', 'y');\n            createLegacyProperty('scale', '_legacyScale', 'scaleX', 'scaleY');\n            createLegacyProperty('origin', '_legacyOrigin', 'originX', 'originY');\n        }\n    })();\n    return Element;\n}());\nmixin(Element, Eventful);\nmixin(Element, Transformable);\nfunction animateTo(animatable, target, cfg, animationProps, reverse) {\n    cfg = cfg || {};\n    var animators = [];\n    animateToShallow(animatable, '', animatable, target, cfg, animationProps, animators, reverse);\n    var finishCount = animators.length;\n    var doneHappened = false;\n    var cfgDone = cfg.done;\n    var cfgAborted = cfg.aborted;\n    var doneCb = function () {\n        doneHappened = true;\n        finishCount--;\n        if (finishCount <= 0) {\n            doneHappened\n                ? (cfgDone && cfgDone())\n                : (cfgAborted && cfgAborted());\n        }\n    };\n    var abortedCb = function () {\n        finishCount--;\n        if (finishCount <= 0) {\n            doneHappened\n                ? (cfgDone && cfgDone())\n                : (cfgAborted && cfgAborted());\n        }\n    };\n    if (!finishCount) {\n        cfgDone && cfgDone();\n    }\n    if (animators.length > 0 && cfg.during) {\n        animators[0].during(function (target, percent) {\n            cfg.during(percent);\n        });\n    }\n    for (var i = 0; i < animators.length; i++) {\n        var animator = animators[i];\n        if (doneCb) {\n            animator.done(doneCb);\n        }\n        if (abortedCb) {\n            animator.aborted(abortedCb);\n        }\n        animator.start(cfg.easing, cfg.force);\n    }\n    return animators;\n}\nfunction copyArrShallow(source, target, len) {\n    for (var i = 0; i < len; i++) {\n        source[i] = target[i];\n    }\n}\nfunction is2DArray(value) {\n    return isArrayLike(value[0]);\n}\nfunction copyValue(target, source, key) {\n    if (isArrayLike(source[key])) {\n        if (!isArrayLike(target[key])) {\n            target[key] = [];\n        }\n        if (isTypedArray(source[key])) {\n            var len = source[key].length;\n            if (target[key].length !== len) {\n                target[key] = new (source[key].constructor)(len);\n                copyArrShallow(target[key], source[key], len);\n            }\n        }\n        else {\n            var sourceArr = source[key];\n            var targetArr = target[key];\n            var len0 = sourceArr.length;\n            if (is2DArray(sourceArr)) {\n                var len1 = sourceArr[0].length;\n                for (var i = 0; i < len0; i++) {\n                    if (!targetArr[i]) {\n                        targetArr[i] = Array.prototype.slice.call(sourceArr[i]);\n                    }\n                    else {\n                        copyArrShallow(targetArr[i], sourceArr[i], len1);\n                    }\n                }\n            }\n            else {\n                copyArrShallow(targetArr, sourceArr, len0);\n            }\n            targetArr.length = sourceArr.length;\n        }\n    }\n    else {\n        target[key] = source[key];\n    }\n}\nfunction animateToShallow(animatable, topKey, source, target, cfg, animationProps, animators, reverse) {\n    var animatableKeys = [];\n    var changedKeys = [];\n    var targetKeys = keys(target);\n    var duration = cfg.duration;\n    var delay = cfg.delay;\n    var additive = cfg.additive;\n    var setToFinal = cfg.setToFinal;\n    var animateAll = !isObject(animationProps);\n    for (var k = 0; k < targetKeys.length; k++) {\n        var innerKey = targetKeys[k];\n        if (source[innerKey] != null\n            && target[innerKey] != null\n            && (animateAll || animationProps[innerKey])) {\n            if (isObject(target[innerKey]) && !isArrayLike(target[innerKey])) {\n                if (topKey) {\n                    if (!reverse) {\n                        source[innerKey] = target[innerKey];\n                        animatable.updateDuringAnimation(topKey);\n                    }\n                    continue;\n                }\n                animateToShallow(animatable, innerKey, source[innerKey], target[innerKey], cfg, animationProps && animationProps[innerKey], animators, reverse);\n            }\n            else {\n                animatableKeys.push(innerKey);\n                changedKeys.push(innerKey);\n            }\n        }\n        else if (!reverse) {\n            source[innerKey] = target[innerKey];\n            animatable.updateDuringAnimation(topKey);\n            changedKeys.push(innerKey);\n        }\n    }\n    var keyLen = animatableKeys.length;\n    if (keyLen > 0\n        || (cfg.force && !animators.length)) {\n        var existsAnimators = animatable.animators;\n        var existsAnimatorsOnSameTarget = [];\n        for (var i = 0; i < existsAnimators.length; i++) {\n            if (existsAnimators[i].targetName === topKey) {\n                existsAnimatorsOnSameTarget.push(existsAnimators[i]);\n            }\n        }\n        if (!additive && existsAnimatorsOnSameTarget.length) {\n            for (var i = 0; i < existsAnimatorsOnSameTarget.length; i++) {\n                var allAborted = existsAnimatorsOnSameTarget[i].stopTracks(changedKeys);\n                if (allAborted) {\n                    var idx = indexOf(existsAnimators, existsAnimatorsOnSameTarget[i]);\n                    existsAnimators.splice(idx, 1);\n                }\n            }\n        }\n        var revertedSource = void 0;\n        var reversedTarget = void 0;\n        var sourceClone = void 0;\n        if (reverse) {\n            reversedTarget = {};\n            if (setToFinal) {\n                revertedSource = {};\n            }\n            for (var i = 0; i < keyLen; i++) {\n                var innerKey = animatableKeys[i];\n                reversedTarget[innerKey] = source[innerKey];\n                if (setToFinal) {\n                    revertedSource[innerKey] = target[innerKey];\n                }\n                else {\n                    source[innerKey] = target[innerKey];\n                }\n            }\n        }\n        else if (setToFinal) {\n            sourceClone = {};\n            for (var i = 0; i < keyLen; i++) {\n                var innerKey = animatableKeys[i];\n                sourceClone[innerKey] = cloneValue(source[innerKey]);\n                copyValue(source, target, innerKey);\n            }\n        }\n        var animator = new Animator(source, false, additive ? existsAnimatorsOnSameTarget : null);\n        animator.targetName = topKey;\n        if (cfg.scope) {\n            animator.scope = cfg.scope;\n        }\n        if (setToFinal && revertedSource) {\n            animator.whenWithKeys(0, revertedSource, animatableKeys);\n        }\n        if (sourceClone) {\n            animator.whenWithKeys(0, sourceClone, animatableKeys);\n        }\n        animator.whenWithKeys(duration == null ? 500 : duration, reverse ? reversedTarget : target, animatableKeys).delay(delay || 0);\n        animatable.addAnimator(animator, topKey);\n        animators.push(animator);\n    }\n}\nexport default Element;\n","import * as matrix from './matrix';\nimport * as vector from './vector';\nvar mIdentity = matrix.identity;\nvar EPSILON = 5e-5;\nfunction isNotAroundZero(val) {\n    return val > EPSILON || val < -EPSILON;\n}\nvar scaleTmp = [];\nvar tmpTransform = [];\nvar originTransform = matrix.create();\nvar abs = Math.abs;\nvar Transformable = (function () {\n    function Transformable() {\n    }\n    Transformable.prototype.setPosition = function (arr) {\n        this.x = arr[0];\n        this.y = arr[1];\n    };\n    Transformable.prototype.setScale = function (arr) {\n        this.scaleX = arr[0];\n        this.scaleY = arr[1];\n    };\n    Transformable.prototype.setOrigin = function (arr) {\n        this.originX = arr[0];\n        this.originY = arr[1];\n    };\n    Transformable.prototype.needLocalTransform = function () {\n        return isNotAroundZero(this.rotation)\n            || isNotAroundZero(this.x)\n            || isNotAroundZero(this.y)\n            || isNotAroundZero(this.scaleX - 1)\n            || isNotAroundZero(this.scaleY - 1);\n    };\n    Transformable.prototype.updateTransform = function () {\n        var parent = this.parent;\n        var parentHasTransform = parent && parent.transform;\n        var needLocalTransform = this.needLocalTransform();\n        var m = this.transform;\n        if (!(needLocalTransform || parentHasTransform)) {\n            m && mIdentity(m);\n            return;\n        }\n        m = m || matrix.create();\n        if (needLocalTransform) {\n            this.getLocalTransform(m);\n        }\n        else {\n            mIdentity(m);\n        }\n        if (parentHasTransform) {\n            if (needLocalTransform) {\n                matrix.mul(m, parent.transform, m);\n            }\n            else {\n                matrix.copy(m, parent.transform);\n            }\n        }\n        this.transform = m;\n        this._resolveGlobalScaleRatio(m);\n    };\n    Transformable.prototype._resolveGlobalScaleRatio = function (m) {\n        var globalScaleRatio = this.globalScaleRatio;\n        if (globalScaleRatio != null && globalScaleRatio !== 1) {\n            this.getGlobalScale(scaleTmp);\n            var relX = scaleTmp[0] < 0 ? -1 : 1;\n            var relY = scaleTmp[1] < 0 ? -1 : 1;\n            var sx = ((scaleTmp[0] - relX) * globalScaleRatio + relX) / scaleTmp[0] || 0;\n            var sy = ((scaleTmp[1] - relY) * globalScaleRatio + relY) / scaleTmp[1] || 0;\n            m[0] *= sx;\n            m[1] *= sx;\n            m[2] *= sy;\n            m[3] *= sy;\n        }\n        this.invTransform = this.invTransform || matrix.create();\n        matrix.invert(this.invTransform, m);\n    };\n    Transformable.prototype.getLocalTransform = function (m) {\n        return Transformable.getLocalTransform(this, m);\n    };\n    Transformable.prototype.getComputedTransform = function () {\n        var transformNode = this;\n        var ancestors = [];\n        while (transformNode) {\n            ancestors.push(transformNode);\n            transformNode = transformNode.parent;\n        }\n        while (transformNode = ancestors.pop()) {\n            transformNode.updateTransform();\n        }\n        return this.transform;\n    };\n    Transformable.prototype.setLocalTransform = function (m) {\n        if (!m) {\n            return;\n        }\n        var sx = m[0] * m[0] + m[1] * m[1];\n        var sy = m[2] * m[2] + m[3] * m[3];\n        if (isNotAroundZero(sx - 1)) {\n            sx = Math.sqrt(sx);\n        }\n        if (isNotAroundZero(sy - 1)) {\n            sy = Math.sqrt(sy);\n        }\n        if (m[0] < 0) {\n            sx = -sx;\n        }\n        if (m[3] < 0) {\n            sy = -sy;\n        }\n        this.rotation = Math.atan2(-m[1] / sy, m[0] / sx);\n        if (sx < 0 && sy < 0) {\n            this.rotation += Math.PI;\n            sx = -sx;\n            sy = -sy;\n        }\n        this.x = m[4];\n        this.y = m[5];\n        this.scaleX = sx;\n        this.scaleY = sy;\n    };\n    Transformable.prototype.decomposeTransform = function () {\n        if (!this.transform) {\n            return;\n        }\n        var parent = this.parent;\n        var m = this.transform;\n        if (parent && parent.transform) {\n            matrix.mul(tmpTransform, parent.invTransform, m);\n            m = tmpTransform;\n        }\n        var ox = this.originX;\n        var oy = this.originY;\n        if (ox || oy) {\n            originTransform[4] = ox;\n            originTransform[5] = oy;\n            matrix.mul(tmpTransform, m, originTransform);\n            tmpTransform[4] -= ox;\n            tmpTransform[5] -= oy;\n            m = tmpTransform;\n        }\n        this.setLocalTransform(m);\n    };\n    Transformable.prototype.getGlobalScale = function (out) {\n        var m = this.transform;\n        out = out || [];\n        if (!m) {\n            out[0] = 1;\n            out[1] = 1;\n            return out;\n        }\n        out[0] = Math.sqrt(m[0] * m[0] + m[1] * m[1]);\n        out[1] = Math.sqrt(m[2] * m[2] + m[3] * m[3]);\n        if (m[0] < 0) {\n            out[0] = -out[0];\n        }\n        if (m[3] < 0) {\n            out[1] = -out[1];\n        }\n        return out;\n    };\n    Transformable.prototype.transformCoordToLocal = function (x, y) {\n        var v2 = [x, y];\n        var invTransform = this.invTransform;\n        if (invTransform) {\n            vector.applyTransform(v2, v2, invTransform);\n        }\n        return v2;\n    };\n    Transformable.prototype.transformCoordToGlobal = function (x, y) {\n        var v2 = [x, y];\n        var transform = this.transform;\n        if (transform) {\n            vector.applyTransform(v2, v2, transform);\n        }\n        return v2;\n    };\n    Transformable.prototype.getLineScale = function () {\n        var m = this.transform;\n        return m && abs(m[0] - 1) > 1e-10 && abs(m[3] - 1) > 1e-10\n            ? Math.sqrt(abs(m[0] * m[3] - m[2] * m[1]))\n            : 1;\n    };\n    Transformable.getLocalTransform = function (target, m) {\n        m = m || [];\n        mIdentity(m);\n        var ox = target.originX || 0;\n        var oy = target.originY || 0;\n        var sx = target.scaleX;\n        var sy = target.scaleY;\n        var rotation = target.rotation || 0;\n        var x = target.x;\n        var y = target.y;\n        m[4] -= ox;\n        m[5] -= oy;\n        m[0] *= sx;\n        m[1] *= sy;\n        m[2] *= sx;\n        m[3] *= sy;\n        m[4] *= sx;\n        m[5] *= sy;\n        if (rotation) {\n            matrix.rotate(m, m, rotation);\n        }\n        m[4] += ox;\n        m[5] += oy;\n        m[4] += x;\n        m[5] += y;\n        return m;\n    };\n    Transformable.initDefaultProps = (function () {\n        var proto = Transformable.prototype;\n        proto.x = 0;\n        proto.y = 0;\n        proto.scaleX = 1;\n        proto.scaleY = 1;\n        proto.originX = 0;\n        proto.originY = 0;\n        proto.rotation = 0;\n        proto.globalScaleRatio = 1;\n    })();\n    return Transformable;\n}());\n;\nexport default Transformable;\n","import { __extends } from \"tslib\";\nimport Path from '../Path';\nimport * as roundRectHelper from '../helper/roundRect';\nimport { subPixelOptimizeRect } from '../helper/subPixelOptimize';\nvar RectShape = (function () {\n    function RectShape() {\n        this.x = 0;\n        this.y = 0;\n        this.width = 0;\n        this.height = 0;\n    }\n    return RectShape;\n}());\nvar subPixelOptimizeOutputShape = {};\nvar Rect = (function (_super) {\n    __extends(Rect, _super);\n    function Rect(opts) {\n        return _super.call(this, opts) || this;\n    }\n    Rect.prototype.getDefaultShape = function () {\n        return new RectShape();\n    };\n    Rect.prototype.buildPath = function (ctx, shape) {\n        var x;\n        var y;\n        var width;\n        var height;\n        if (this.subPixelOptimize) {\n            var optimizedShape = subPixelOptimizeRect(subPixelOptimizeOutputShape, shape, this.style);\n            x = optimizedShape.x;\n            y = optimizedShape.y;\n            width = optimizedShape.width;\n            height = optimizedShape.height;\n            optimizedShape.r = shape.r;\n            shape = optimizedShape;\n        }\n        else {\n            x = shape.x;\n            y = shape.y;\n            width = shape.width;\n            height = shape.height;\n        }\n        if (!shape.r) {\n            ctx.rect(x, y, width, height);\n        }\n        else {\n            roundRectHelper.buildPath(ctx, shape);\n        }\n    };\n    Rect.prototype.isZeroArea = function () {\n        return !this.shape.width || !this.shape.height;\n    };\n    return Rect;\n}(Path));\nRect.prototype.type = 'rect';\nexport default Rect;\n","export function buildPath(ctx, shape) {\n    var x = shape.x;\n    var y = shape.y;\n    var width = shape.width;\n    var height = shape.height;\n    var r = shape.r;\n    var r1;\n    var r2;\n    var r3;\n    var r4;\n    if (width < 0) {\n        x = x + width;\n        width = -width;\n    }\n    if (height < 0) {\n        y = y + height;\n        height = -height;\n    }\n    if (typeof r === 'number') {\n        r1 = r2 = r3 = r4 = r;\n    }\n    else if (r instanceof Array) {\n        if (r.length === 1) {\n            r1 = r2 = r3 = r4 = r[0];\n        }\n        else if (r.length === 2) {\n            r1 = r3 = r[0];\n            r2 = r4 = r[1];\n        }\n        else if (r.length === 3) {\n            r1 = r[0];\n            r2 = r4 = r[1];\n            r3 = r[2];\n        }\n        else {\n            r1 = r[0];\n            r2 = r[1];\n            r3 = r[2];\n            r4 = r[3];\n        }\n    }\n    else {\n        r1 = r2 = r3 = r4 = 0;\n    }\n    var total;\n    if (r1 + r2 > width) {\n        total = r1 + r2;\n        r1 *= width / total;\n        r2 *= width / total;\n    }\n    if (r3 + r4 > width) {\n        total = r3 + r4;\n        r3 *= width / total;\n        r4 *= width / total;\n    }\n    if (r2 + r3 > height) {\n        total = r2 + r3;\n        r2 *= height / total;\n        r3 *= height / total;\n    }\n    if (r1 + r4 > height) {\n        total = r1 + r4;\n        r1 *= height / total;\n        r4 *= height / total;\n    }\n    ctx.moveTo(x + r1, y);\n    ctx.lineTo(x + width - r2, y);\n    r2 !== 0 && ctx.arc(x + width - r2, y + r2, r2, -Math.PI / 2, 0);\n    ctx.lineTo(x + width, y + height - r3);\n    r3 !== 0 && ctx.arc(x + width - r3, y + height - r3, r3, 0, Math.PI / 2);\n    ctx.lineTo(x + r4, y + height);\n    r4 !== 0 && ctx.arc(x + r4, y + height - r4, r4, Math.PI / 2, Math.PI);\n    ctx.lineTo(x, y + r1);\n    r1 !== 0 && ctx.arc(x + r1, y + r1, r1, Math.PI, Math.PI * 1.5);\n}\n"],"sourceRoot":""}