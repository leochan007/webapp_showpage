(this["webpackJsonp@loopring-web/webapp"]=this["webpackJsonp@loopring-web/webapp"]||[]).push([[7],{106:function(e,t,n){"use strict";n.d(t,"a",(function(){return r})),n.d(t,"b",(function(){return o})),n.d(t,"c",(function(){return i})),n.d(t,"d",(function(){return s})),n.d(t,"e",(function(){return u}));var a,c=n(13);!function(e){e.processed="processed",e.no_such_order="no_such_order",e.too_many_times="too_many_times"}(a||(a={}));var r=Object(c.H)(0),o=Object(c.H)(1),i=Object(c.H)(10),s=Object(c.H)(1e4),u=1e4},111:function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var a=n(1906);function c(e,t){Object(a.a)(e,[t||{}])}},117:function(e,t,n){"use strict";n.d(t,"f",(function(){return S})),n.d(t,"a",(function(){return P})),n.d(t,"c",(function(){return R})),n.d(t,"d",(function(){return D})),n.d(t,"e",(function(){return M})),n.d(t,"b",(function(){return U}));var a,c=n(4),r=n.n(c),o=n(23),i=n(6),s=n(1),u=n.n(s),l=n(47),d=n(111),b=n(142),f=n(159),p=n(40),m=n(13),j=n(14),O=n(174),v=(a={},Object(j.a)(a,m.f.Unknown,void 0),Object(j.a)(a,m.f.Injected,O.b),Object(j.a)(a,m.f.Network,O.d),Object(j.a)(a,m.f.WalletConnect,O.f),Object(j.a)(a,m.f.WalletLink,O.g),Object(j.a)(a,m.f.Ledger,O.c),Object(j.a)(a,m.f.Trezor,O.e),Object(j.a)(a,m.f.Authereum,O.a),a),h=n(120),g=n(981),x=n.n(g),A=n(1996),y=n(338),k=n.n(y),w=n(99),T=n(207),C=n(48),I=n(172),_=n(160),E=n(124);function S(){var e=Object(f.a)(),t=e.connector,n=e.library,a=e.account,c=e.chainId,r=e.active,o=e.error;return{account:a,connector:t,library:n,chainId:c,active:r,isConnected:r&&!x.a.isBlank(a),error:o}}function P(){var e=Object(l.c)((function(e){return e.account}));return{account:e,isNoAccount:function(){return e.status===p.b.NOACCOUNT},isActivated:function(){return e.status===p.b.ACTIVATED},apiKey:e.apiKey,eddsaKey:e.eddsaKey,accountId:e.accountId}}function N(){var e,t=Object(l.b)(),n=(e=Object(p.a)(),function(t,n){var a=e.states[t];if(void 0===a)throw new Error("No transitions defined for ".concat(t));var c=a[n];if(void 0===c)throw new Error("Unknown transition for event ".concat(n," in state ").concat(t));return c});return{sendEvent:u.a.useCallback((function(e,a){var c=n(e.status,a);c&&t(Object(h.e)(c))}),[n,t])}}function R(){var e=Object(f.a)().activate,t=N().sendEvent,n=Object(l.b)(),a=u.a.useState(),c=Object(i.a)(a,2),r=c[0],o=c[1];return{connect:u.a.useCallback((function(a){var c=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=v[a];o(r),e(r),n(Object(h.h)(a)),c&&t(C.a.getState().account,p.c.Reset),t(C.a.getState().account,p.c.Connecting),console.log("try Connecting...")}),[e,n,t]),activatingConnector:r}}function D(){var e=Object(f.a)().deactivate,t=Object(l.b)();return{disconnect:u.a.useCallback((function(){e(),t(Object(h.b)(void 0))}),[e,t])}}function M(){var e=Object(l.b)(),t=Object(w.b)(),n=Object(w.c)(),a=Object(b.b)().tradingInfo,c=S().connector,i=N().sendEvent;return{lock:u.a.useCallback(function(){var e=Object(o.a)(r.a.mark((function e(t){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:console.log("useCallback lock:",t.status),i(t,p.c.Lock);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[i]),unlock:u.a.useCallback(function(){var s=Object(o.a)(r.a.mark((function o(s){var u,l,d,b,f,j,O,v,g;return r.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(n&&t&&c&&s.accountId&&(null===(u=a.exchangeInfo)||void 0===u?void 0:u.exchangeAddress)&&s.status===p.b.LOCKED){r.next=5;break}return console.log("accountId:",s.accountId),console.log("exchangeAddress:",a.exchangeInfo),console.log("enter !! account.status:",s.status),r.abrupt("return");case 5:if(console.log("useUnlock useCallback:",s.status),s.status===p.b.LOCKED){r.next=8;break}throw Error("unexpected status:"+s.status);case 8:return d=void 0,b=void 0,f=void 0,r.prev=11,r.next=14,c.getProvider();case 14:if(j=r.sent,O=new k.a(j),console.log("useUnlock eddsaKey:",s.eddsaKey),s.eddsaKey){r.next=24;break}return r.next=20,m.x(O,s.accAddr,null===(v=a.exchangeInfo)||void 0===v?void 0:v.exchangeAddress,s.nonce-1,s.connectName);case 20:g=r.sent,b=Object(m.J)(Object(m.H)(g.keyPair.secretKey)),r.next=25;break;case 24:b=s.eddsaKey;case 25:return r.next=27,n.getUserApiKey({accountId:s.accountId},b);case 27:f=r.sent,console.log("useUnlock apikey:",f),d=p.c.Unlock,r.next=36;break;case 32:r.prev=32,r.t0=r.catch(11),console.log(r.t0),d=p.c.Reset;case 36:b&&e(Object(h.i)(b)),(null===(l=f)||void 0===l?void 0:l.apiKey)&&e(Object(h.f)(f.apiKey)),console.log("next event:",d),d&&i(s,d);case 40:case"end":return r.stop()}}),o,null,[[11,32]])})));return function(e){return s.apply(this,arguments)}}(),[e,i,t,n,c,a.exchangeInfo])}}function U(){var e,t=Object(l.b)(),n=P().account,a=N().sendEvent,c=Object(w.b)(),i=Object(w.c)(),s=S(),u=s.account,f=(s.active,s.isConnected),j=s.chainId,O=s.connector,v=Object(E.c)().marketArray,g=u,x=Object(A.a)(j),y=Object(A.a)(u),k=Object(b.b)().tradingInfo;Object(d.a)(Object(o.a)(r.a.mark((function e(){var s,l;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return l=function(){return(l=Object(o.a)(r.a.mark((function e(){var o,l,d;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n&&g&&c&&i&&O&&(null===(o=k.exchangeInfo)||void 0===o?void 0:o.exchangeAddress)){e.next=2;break}return e.abrupt("return");case 2:if(!(x&&j&&x!==j||y&&u&&y!==u)||n.status===p.b.UNCONNNECTED){e.next=7;break}return console.log("checkStatus try to resetFunc"),t(Object(h.b)(void 0)),a(n,p.c.Reset),e.abrupt("return");case 7:s(),e.t0=n.status,e.next=e.t0===p.b.UNCONNNECTED?11:e.t0===p.b.CONNECTED?15:e.t0===p.b.NOACCOUNT?30:e.t0===p.b.DEPOSITING?31:e.t0===p.b.DEPOSIT_TO_CONFIREM?34:e.t0===p.b.UNACTIVATED?35:e.t0===p.b.ARPROVING?38:e.t0===p.b.APPROV_TO_CONFIRM?41:e.t0===p.b.LOCKED?44:e.t0===p.b.ACTIVATED?46:51;break;case 11:return f&&(t(Object(h.h)(m.f.Injected)),a(n,p.c.Connecting)),t(Object(I.a)(void 0)),t(Object(_.a)(void 0)),e.abrupt("break",52);case 15:return e.prev=15,e.next=18,c.getAccount({owner:g});case 18:l=e.sent.accInfo,n.accAddr&&n.eddsaKey&&l.owner===n.accAddr||(t(Object(h.d)(l)),(null===v||void 0===v?void 0:v.length)&&t(Object(I.b)(void 0))),(null===n||void 0===n?void 0:n.connectName)!==(null===n||void 0===n?void 0:n.connectNameTemp)&&t(Object(h.g)(n.connectNameTemp)),a(n,p.c.HasPubkey),e.next=29;break;case 24:e.prev=24,e.t1=e.catch(15),Object(m.w)(e.t1),g&&t(Object(h.c)(g)),e.t1.response&&e.t1.response.data&&e.t1.response.data.resultInfo&&101002===e.t1.response.data.resultInfo.code&&a(n,p.c.ErrorResponse);case 29:case 30:return e.abrupt("break",52);case 31:return!0,a(n,p.c.FinishDeposit),e.abrupt("break",52);case 34:return e.abrupt("break",52);case 35:return!1,e.abrupt("break",52);case 38:return!1,e.abrupt("break",52);case 41:return!1,e.abrupt("break",52);case 44:return t(Object(I.a)(void 0)),e.abrupt("break",52);case 46:return T.a.checkTimeout(!0),d=setInterval((function(){var e=T.a.checkTimeout();n.status===p.b.ACTIVATED&&e&&(clearInterval(d),a(n,p.c.Lock))}),1e3),T.a.setHandler(d),t(Object(_.b)(void 0)),e.abrupt("break",52);case 51:return e.abrupt("break",52);case 52:case"end":return e.stop()}}),e,null,[[15,24]])})))).apply(this,arguments)},s=function(){var e=T.a.getHandler();n.status!==p.b.ACTIVATED&&e&&clearInterval(e)},function(){return l.apply(this,arguments)}(),e.abrupt("return",(function(){s()}));case 5:case"end":return e.stop()}}),e)}))),[I.b,_.b,I.a,_.a,c,i,n,x,j,g,t,O,null===(e=k.exchangeInfo)||void 0===e?void 0:e.exchangeAddress])}},120:function(e,t,n){"use strict";n.d(t,"b",(function(){return l})),n.d(t,"c",(function(){return d})),n.d(t,"f",(function(){return b})),n.d(t,"g",(function(){return f})),n.d(t,"h",(function(){return p})),n.d(t,"d",(function(){return m})),n.d(t,"e",(function(){return j})),n.d(t,"i",(function(){return O}));var a=n(81),c=n(13),r=n(40),o=n(207),i=function(){var e=Object({NODE_ENV:"production",PUBLIC_URL:".",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_RPC_URL_1:"https://mainnet.eth.loopring.network",REACT_APP_MAGIC_API_KEY:"pk_test_398B82F5F0E88874",REACT_APP_API_URL:"api3.loopring.io",REACT_APP_RPC_URL_5:"https://goerli.infura.io/v3/84842078b09946638c03157f83405213",REACT_APP_TEST_INTERVAL:"4hr",REACT_APP_API_URL_UAT:"uat2.loopring.io",REACT_APP_PORTIS_DAPP_ID:"e9be171c-2b7f-4ff0-8db9-327707511ee2",REACT_APP_FORTMATIC_API_KEY:"pk_test_A6260FCBAA2EBDFB"}).REACT_APP_TEST_ACCOUND_ID?Object({NODE_ENV:"production",PUBLIC_URL:".",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_RPC_URL_1:"https://mainnet.eth.loopring.network",REACT_APP_MAGIC_API_KEY:"pk_test_398B82F5F0E88874",REACT_APP_API_URL:"api3.loopring.io",REACT_APP_RPC_URL_5:"https://goerli.infura.io/v3/84842078b09946638c03157f83405213",REACT_APP_TEST_INTERVAL:"4hr",REACT_APP_API_URL_UAT:"uat2.loopring.io",REACT_APP_PORTIS_DAPP_ID:"e9be171c-2b7f-4ff0-8db9-327707511ee2",REACT_APP_FORTMATIC_API_KEY:"pk_test_A6260FCBAA2EBDFB"}).REACT_APP_TEST_ACCOUND_ID:o.a.getAccountId(),t=Object({NODE_ENV:"production",PUBLIC_URL:".",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_RPC_URL_1:"https://mainnet.eth.loopring.network",REACT_APP_MAGIC_API_KEY:"pk_test_398B82F5F0E88874",REACT_APP_API_URL:"api3.loopring.io",REACT_APP_RPC_URL_5:"https://goerli.infura.io/v3/84842078b09946638c03157f83405213",REACT_APP_TEST_INTERVAL:"4hr",REACT_APP_API_URL_UAT:"uat2.loopring.io",REACT_APP_PORTIS_DAPP_ID:"e9be171c-2b7f-4ff0-8db9-327707511ee2",REACT_APP_FORTMATIC_API_KEY:"pk_test_A6260FCBAA2EBDFB"}).REACT_APP_TEST_API_KEY?Object({NODE_ENV:"production",PUBLIC_URL:".",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_RPC_URL_1:"https://mainnet.eth.loopring.network",REACT_APP_MAGIC_API_KEY:"pk_test_398B82F5F0E88874",REACT_APP_API_URL:"api3.loopring.io",REACT_APP_RPC_URL_5:"https://goerli.infura.io/v3/84842078b09946638c03157f83405213",REACT_APP_TEST_INTERVAL:"4hr",REACT_APP_API_URL_UAT:"uat2.loopring.io",REACT_APP_PORTIS_DAPP_ID:"e9be171c-2b7f-4ff0-8db9-327707511ee2",REACT_APP_FORTMATIC_API_KEY:"pk_test_A6260FCBAA2EBDFB"}).REACT_APP_TEST_API_KEY:o.a.getApikey(),n=Object({NODE_ENV:"production",PUBLIC_URL:".",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_RPC_URL_1:"https://mainnet.eth.loopring.network",REACT_APP_MAGIC_API_KEY:"pk_test_398B82F5F0E88874",REACT_APP_API_URL:"api3.loopring.io",REACT_APP_RPC_URL_5:"https://goerli.infura.io/v3/84842078b09946638c03157f83405213",REACT_APP_TEST_INTERVAL:"4hr",REACT_APP_API_URL_UAT:"uat2.loopring.io",REACT_APP_PORTIS_DAPP_ID:"e9be171c-2b7f-4ff0-8db9-327707511ee2",REACT_APP_FORTMATIC_API_KEY:"pk_test_A6260FCBAA2EBDFB"}).REACT_APP_TEST_OWNER?Object({NODE_ENV:"production",PUBLIC_URL:".",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_RPC_URL_1:"https://mainnet.eth.loopring.network",REACT_APP_MAGIC_API_KEY:"pk_test_398B82F5F0E88874",REACT_APP_API_URL:"api3.loopring.io",REACT_APP_RPC_URL_5:"https://goerli.infura.io/v3/84842078b09946638c03157f83405213",REACT_APP_TEST_INTERVAL:"4hr",REACT_APP_API_URL_UAT:"uat2.loopring.io",REACT_APP_PORTIS_DAPP_ID:"e9be171c-2b7f-4ff0-8db9-327707511ee2",REACT_APP_FORTMATIC_API_KEY:"pk_test_A6260FCBAA2EBDFB"}).REACT_APP_TEST_OWNER:o.a.getAccount(),a=Object({NODE_ENV:"production",PUBLIC_URL:".",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_RPC_URL_1:"https://mainnet.eth.loopring.network",REACT_APP_MAGIC_API_KEY:"pk_test_398B82F5F0E88874",REACT_APP_API_URL:"api3.loopring.io",REACT_APP_RPC_URL_5:"https://goerli.infura.io/v3/84842078b09946638c03157f83405213",REACT_APP_TEST_INTERVAL:"4hr",REACT_APP_API_URL_UAT:"uat2.loopring.io",REACT_APP_PORTIS_DAPP_ID:"e9be171c-2b7f-4ff0-8db9-327707511ee2",REACT_APP_FORTMATIC_API_KEY:"pk_test_A6260FCBAA2EBDFB"}).REACT_APP_TEST_EDDSA_KEY?Object({NODE_ENV:"production",PUBLIC_URL:".",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_RPC_URL_1:"https://mainnet.eth.loopring.network",REACT_APP_MAGIC_API_KEY:"pk_test_398B82F5F0E88874",REACT_APP_API_URL:"api3.loopring.io",REACT_APP_RPC_URL_5:"https://goerli.infura.io/v3/84842078b09946638c03157f83405213",REACT_APP_TEST_INTERVAL:"4hr",REACT_APP_API_URL_UAT:"uat2.loopring.io",REACT_APP_PORTIS_DAPP_ID:"e9be171c-2b7f-4ff0-8db9-327707511ee2",REACT_APP_FORTMATIC_API_KEY:"pk_test_A6260FCBAA2EBDFB"}).REACT_APP_TEST_EDDSA_KEY:o.a.getEddsakey();return console.log("defaultApiKey:",JSON.stringify(t)),{accAddr:n,status:r.b.UNCONNNECTED,accountId:e,publicKey:{},nonce:0,isContractAddress:!1,apiKey:t,eddsaKey:a,connectName:c.f.Unknown,connectNameTemp:c.f.Unknown}},s=Object(a.c)({name:"account",initialState:i(),reducers:{reset:function(e){var t=i();console.log("!!! reset account!",t),Object.assign(e,t)},setAccAddr:function(e,t){e.accAddr=t.payload},setAccountInfo:function(e,t){e.accAddr=t.payload.owner,e.accountId=t.payload.accountId,e.nonce=t.payload.nonce,e.publicKey=t.payload.publicKey},setApikey:function(e,t){e.apiKey=t.payload},setAccountStatus:function(e,t){e.status=t.payload},setEddsaKey:function(e,t){e.eddsaKey=t.payload},setConnectName:function(e,t){e.connectName=t.payload},setConnectNameTemp:function(e,t){e.connectNameTemp=t.payload},setIsContractAddress:function(e,t){e.isContractAddress=t.payload}}}),u=s.actions,l=u.reset,d=u.setAccAddr,b=u.setApikey,f=u.setConnectName,p=u.setConnectNameTemp,m=u.setAccountInfo,j=u.setAccountStatus,O=u.setEddsaKey;u.setIsContractAddress;t.a=s},124:function(e,t,n){"use strict";n.d(t,"c",(function(){return o})),n.d(t,"b",(function(){return r.c})),n.d(t,"a",(function(){return r.a}));var a=n(2),c=n(47),r=n(272);function o(){var e=Object(c.c)((function(e){return e.tokenMap})),t=Object(c.b)();return Object(a.a)(Object(a.a)({},e),{},{statusUnset:function(){t(r.c.actions.statusUnset(void 0))},updateTokenMap:function(){t(r.c.actions.getTokenMap(void 0))}})}},126:function(e,t,n){"use strict";n.d(t,"d",(function(){return o})),n.d(t,"a",(function(){return r.a})),n.d(t,"b",(function(){return r.b})),n.d(t,"c",(function(){return r.d}));var a=n(2),c=n(47),r=n(188),o=function(){var e=Object(c.c)((function(e){return e.amm.ammMap})),t=Object(c.b)();return Object(a.a)(Object(a.a)({},e),{},{statusUnset:function(){t(r.a.actions.statusUnset(void 0))},updateAmmMap:function(){t(r.a.actions.getAmmMap(void 0))}})}},142:function(e,t,n){"use strict";n.d(t,"a",(function(){return p})),n.d(t,"b",(function(){return m})),n.d(t,"f",(function(){return j})),n.d(t,"h",(function(){return O})),n.d(t,"g",(function(){return v})),n.d(t,"d",(function(){return h})),n.d(t,"e",(function(){return g})),n.d(t,"c",(function(){return x})),n.d(t,"i",(function(){return A}));var a=n(4),c=n.n(a),r=n(23),o=n(99),i=n(47),s=n(111),u=n(48),l=n(194),d=n(13),b=n(159),f=n(1);function p(){return u.a.getState().system.chainId}function m(){var e=Object(i.c)((function(e){return e.trading}));return{tradingInfo:e,chainId:e.chainId}}function j(){var e=Object(b.a)().chainId,t=Object(i.b)();Object(f.useEffect)((function(){t(Object(l.e)(null!==e&&void 0!==e?e:d.e.GORLI))}),[e,t])}function O(){var e=Object(i.b)(),t=Object(o.b)();Object(s.a)(Object(r.a)(c.a.mark((function n(){var a;return c.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(t){n.next=2;break}return n.abrupt("return");case 2:return n.prev=2,n.next=5,t.getMixMarkets();case 5:a=n.sent,e(Object(l.h)(a)),n.next=12;break;case 9:n.prev=9,n.t0=n.catch(2),Object(d.w)(n.t0);case 12:case"end":return n.stop()}}),n,null,[[2,9]])}))),[t])}function v(){var e=Object(i.b)(),t=Object(o.b)();Object(s.a)(Object(r.a)(c.a.mark((function n(){var a;return c.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(t){n.next=2;break}return n.abrupt("return");case 2:return n.prev=2,n.next=5,t.getExchangeInfo();case 5:a=n.sent,e(Object(l.f)(a.exchangeInfo)),n.next=12;break;case 9:n.prev=9,n.t0=n.catch(2),Object(d.w)(n.t0);case 12:case"end":return n.stop()}}),n,null,[[2,9]])}))),[t])}function h(){var e=Object(i.b)(),t=Object(o.a)();Object(s.a)(Object(r.a)(c.a.mark((function n(){var a;return c.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(t){n.next=2;break}return n.abrupt("return");case 2:return n.prev=2,n.next=5,t.getAmmPoolConf();case 5:a=n.sent,e(Object(l.c)(a)),n.next=12;break;case 9:n.prev=9,n.t0=n.catch(2),Object(d.w)(n.t0);case 12:case"end":return n.stop()}}),n,null,[[2,9]])}))),[t])}function g(){var e=Object(i.b)(),t=Object(o.a)();Object(s.a)(Object(r.a)(c.a.mark((function n(){var a;return c.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(t){n.next=2;break}return n.abrupt("return");case 2:return n.prev=2,n.next=5,t.getAmmPoolStats();case 5:a=n.sent,e(Object(l.d)(a)),n.next=12;break;case 9:n.prev=9,n.t0=n.catch(2),Object(d.w)(n.t0);case 12:case"end":return n.stop()}}),n,null,[[2,9]])}))),[t])}function x(){var e=Object(i.b)(),t=Object(o.a)();Object(s.a)(Object(r.a)(c.a.mark((function n(){var a;return c.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(t){n.next=2;break}return n.abrupt("return");case 2:return n.prev=2,n.next=5,t.getAmmPoolActivityRules();case 5:a=n.sent,e(Object(l.b)(a.activityRules)),n.next=12;break;case 9:n.prev=9,n.t0=n.catch(2),Object(d.w)(n.t0);case 12:case"end":return n.stop()}}),n,null,[[2,9]])}))),[t])}function A(){var e=Object(i.b)(),t=Object(o.b)();Object(s.a)(Object(r.a)(c.a.mark((function n(){var a;return c.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(t){n.next=2;break}return n.abrupt("return");case 2:return n.prev=2,n.next=5,t.getTokens();case 5:a=n.sent,e(Object(l.j)(a)),n.next=12;break;case 9:n.prev=9,n.t0=n.catch(2),Object(d.w)(n.t0);case 12:case"end":return n.stop()}}),n,null,[[2,9]])}))),[t])}},159:function(e,t,n){"use strict";n.d(t,"a",(function(){return u})),n.d(t,"c",(function(){return l})),n.d(t,"b",(function(){return d})),n.d(t,"d",(function(){return b}));var a=n(6),c=n(1),r=n(47),o=n(190),i=n(174),s=n(13);function u(){var e=Object(o.d)(),t=Object(o.d)(s.k);return e.active?e:t}function l(){var e=u().chainId,t=Object(c.useState)(""),n=Object(a.a)(t,2),r=n[0],o=n[1];return Object(c.useEffect)((function(){switch(e){case s.e.MAINNET:o("https://etherscan.io/address/");break;default:o("https://goerli.etherscan.io/address/")}}),[e]),{etherscanUrl:r}}function d(){var e=Object(o.d)(),t=e.activate,n=e.active,r=Object(c.useState)(!1),s=Object(a.a)(r,2),u=s[0],l=s[1];return Object(c.useEffect)((function(){i.b.isAuthorized().then((function(e){e?(console.log("useEagerConnect isAuthorized"),t(i.b,void 0,!0).catch((function(){l(!0)}))):(console.log("useEagerConnect NOT isAuthorized"),l(!0))}))}),[]),Object(c.useEffect)((function(){!u&&n&&l(!0)}),[u,n]),u}function b(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:void 0,t=Object(o.d)(),n=t.active,a=t.error,s=t.activate,u=t.chainId,l=Object(r.b)();Object(c.useEffect)((function(){var t=window.ethereum,c=function(){console.log("--------------------------\x3e reConnectInjected"),s(i.b),e&&e()};if(t&&t.on&&!n&&!a){var r=function(e){console.log("Handling 'chainChanged' event with payload",e),c()},o=function(e){console.log("---------------------------------------------"),console.log("Handling 'accountsChanged' event with payload",e),console.log("before reset accounts.length=",e.length),e.length>0&&(console.log("before reset!!!!!!!!!!!!!!!!1"),c())};return t.on("chainChanged",r),t.on("accountsChanged",o),function(){t.removeListener&&(t.removeListener("chainChanged",r),t.removeListener("accountsChanged",o))}}}),[n,a,u,s,l])}},160:function(e,t,n){"use strict";n.d(t,"c",(function(){return o})),n.d(t,"d",(function(){return r.d})),n.d(t,"b",(function(){return r.c})),n.d(t,"a",(function(){return r.b}));var a=n(2),c=n(47),r=n(254);function o(){var e=Object(c.c)((function(e){return e.walletLayer2})),t=Object(c.b)();return Object(a.a)(Object(a.a)({},e),{},{resetLayer2:function(){t(r.d.actions.reset(void 0))},statusUnset:function(){t(r.d.actions.statusUnset(void 0))},updateWalletLayer2:function(){t(r.d.actions.getWalletLayer2(void 0))}})}},172:function(e,t,n){"use strict";n.d(t,"c",(function(){return o})),n.d(t,"d",(function(){return r.d})),n.d(t,"b",(function(){return r.c})),n.d(t,"a",(function(){return r.b}));var a=n(2),c=n(47),r=n(253);function o(){var e=Object(c.c)((function(e){return e.walletLayer1})),t=Object(c.b)();return Object(a.a)(Object(a.a)({},e),{},{resetLayer1:function(){t(r.d.actions.reset(void 0))},statusUnset:function(){t(r.d.actions.statusUnset(void 0))},updateWalletLayer1:function(){t(r.d.actions.updateWalletLayer1(void 0))}})}},174:function(e,t,n){"use strict";n.d(t,"b",(function(){return f})),n.d(t,"d",(function(){return p})),n.d(t,"f",(function(){return m})),n.d(t,"g",(function(){return j})),n.d(t,"c",(function(){return O})),n.d(t,"e",(function(){return v})),n.d(t,"a",(function(){return h}));var a=n(444),c=n(975),r=n(537),o=n(976),i=n(977),s=n(979),u=n(980),l=12e3,d="https://mainnet.eth.loopring.network",b="https://goerli.infura.io/v3/84842078b09946638c03157f83405213";console.log("RPC_URLS 1:",d),console.log("RPC_URLS 5:",b);var f=new a.a({supportedChainIds:[1,5]}),p=new c.a({urls:{1:d,5:b},defaultChainId:1}),m=new r.b({rpc:{1:d},bridge:"https://bridge.walletconnect.org",qrcode:!0,pollingInterval:l}),j=new o.a({url:d,appName:"Loopring DEX"}),O=new i.a({chainId:1,url:d,pollingInterval:l}),v=new s.a({chainId:1,url:d,pollingInterval:l,manifestEmail:"dummy@abc.xyz",manifestAppUrl:"http://localhost:1234"}),h=new u.a({chainId:42})},188:function(e,t,n){"use strict";n.d(t,"a",(function(){return o})),n.d(t,"b",(function(){return s})),n.d(t,"c",(function(){return u})),n.d(t,"d",(function(){return l}));var a=n(81),c=n(58),r={ammMap:void 0,__timer__:-1,status:"UNSET",errorMessage:null},o=Object(a.c)({name:"ammMap",initialState:r,reducers:{getAmmMap:function(e,t){e.status=c.a.PENDING},getAmmMapStatus:function(e,t){t.error&&(e.status=c.a.ERROR,e.errorMessage=t.error);var n=t.payload,a=n.ammMap,r=n.__timer__;a&&(e.ammMap=a),r&&(e.__timer__=r),e.status=c.a.DONE},updateRealTimeAmmMap:function(e,t){e.status=c.a.PENDING},statusUnset:function(e){e.status=c.a.UNSET}}}),i=o.actions,s=i.getAmmMap,u=i.getAmmMapStatus,l=(i.statusUnset,i.updateRealTimeAmmMap)},1880:function(e,t,n){"use strict";n.r(t);var a=n(47),c=n(146),r=n.n(c),o=n(913),i=n(190),s=n(48),u=n(445),l=n(13),d=n(10),b=n(2038),f=n(220),p=n(1997),m=n(134),j=n(1998),O=n(0),v=Object(i.c)(l.k),h=[Object(d.Z)(f.b,{dateAdapter:p.a}),Object(d.Z)(j.a,{i18n:d.Y}),Object(d.Z)(b.a,{theme:Object(d.U)("dark")}),Object(d.Z)(m.c,{theme:Object(d.U)("dark")}),Object(d.Z)(a.a,{store:s.a})];r.a.render(Object(O.jsx)(d.E,{providers:h,children:Object(O.jsx)(i.b,{getLibrary:u.a,children:Object(O.jsx)(v,{getLibrary:u.a,children:Object(O.jsx)(o.a,{})})})}),document.getElementById("root"))},189:function(e,t,n){"use strict";n.d(t,"d",(function(){return r})),n.d(t,"a",(function(){return i})),n.d(t,"b",(function(){return s})),n.d(t,"c",(function(){return u}));var a=n(81),c=n(58),r=Object(a.c)({name:"socket",initialState:{socket:{},status:"UNSET",errorMessage:null},reducers:{socketEnd:function(e,t){e.status=c.a.PENDING},sendNewMessage:function(e,t){e.socket=t.payload.socket},getSocketStatus:function(e,t){t.error&&(e.status=c.a.ERROR,e.errorMessage=t.error),e.status=c.a.DONE},statusUnset:function(e){e.status=c.a.UNSET}}}),o=r.actions,i=o.getSocketStatus,s=o.sendNewMessage,u=o.socketEnd;o.statusUnset},194:function(e,t,n){"use strict";n.d(t,"e",(function(){return i})),n.d(t,"d",(function(){return s})),n.d(t,"b",(function(){return u})),n.d(t,"g",(function(){return l})),n.d(t,"i",(function(){return d})),n.d(t,"c",(function(){return b})),n.d(t,"h",(function(){return f})),n.d(t,"j",(function(){return p})),n.d(t,"f",(function(){return m}));var a=n(81),c={chainId:n(13).e.GORLI,interval:"4hr",ammPoolConf:{},ammActivityRules:{},ammPoolStats:{},markets:[],marketTrades:{},tokens:{},tickerMap:{},refreshRate:1e3,refreshRateSlow:3e3},r=Object(a.c)({name:"trading",initialState:c,reducers:{setChainId:function(e,t){e.chainId=t.payload},changeTradingInterval:function(e,t){e.interval=t.payload},setTickerMap:function(e,t){e.tickerMap=t.payload},setAmmPoolStats:function(e,t){e.ammPoolStats=t.payload},setAmmActivityRules:function(e,t){e.ammActivityRules=t.payload},setAmmPoolConf:function(e,t){e.ammPoolConf=t.payload},setMarketTrades:function(e,t){e.marketTrades=t.payload},setMarkets:function(e,t){e.markets=t.payload},setTokens:function(e,t){e.tokens=t.payload},setExchangeInfo:function(e,t){e.exchangeInfo=t.payload}}}),o=r.actions,i=o.setChainId,s=o.setAmmPoolStats,u=o.setAmmActivityRules,l=o.setMarketTrades,d=o.setTickerMap,b=o.setAmmPoolConf,f=(o.changeTradingInterval,o.setMarkets),p=o.setTokens,m=o.setExchangeInfo;t.a=r},207:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var a,c=n(9),r=n(11);!function(e){e.Handler="handler",e.AccountId="account_id",e.Account="account",e.Apikey="apikey",e.Eddsakey="eddsakey",e.ActiveTime="active_time",e.AmmOrder="amm_order",e.HardwareAddresses="hardware_addresses"}(a||(a={}));var o=function(){function e(){Object(c.a)(this,e)}return Object(r.a)(e,null,[{key:"getHandler",value:function(){var e=sessionStorage.getItem(a.Handler);try{if(void 0!==e&&null!==e)return parseInt(e)}catch(t){}}},{key:"setHandler",value:function(e){sessionStorage.setItem(a.Handler,e)}},{key:"clearHandler",value:function(){sessionStorage.removeItem(a.Handler)}},{key:"checkTimeout",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=localStorage.getItem(a.ActiveTime),n=(new Date).getTime();if(null===t||e)e&&console.log("force reset!!"),localStorage.setItem(a.ActiveTime,n.toString());else{var c=new Date(parseInt(t));if(n-c.getTime()>6e5)return console.log("TIMEOUT! now:".concat(n," dateTimeStr:").concat(t," delta:").concat(n-c.getTime())),sessionStorage.clear(),localStorage.setItem(a.ActiveTime,n.toString()),!0}return!1}},{key:"getAccountId",value:function(){var e=sessionStorage.getItem(a.AccountId);try{if(e)return parseInt(e)}catch(t){}}},{key:"setAccountId",value:function(e){sessionStorage.setItem(a.AccountId,e.toString())}},{key:"getAccount",value:function(){return sessionStorage.getItem(a.Account)}},{key:"setAccount",value:function(e){sessionStorage.setItem(a.Account,e)}},{key:"getApikey",value:function(){return sessionStorage.getItem(a.Apikey)}},{key:"setApikey",value:function(e){sessionStorage.setItem(a.Apikey,e)}},{key:"getEddsakey",value:function(){return sessionStorage.getItem(a.Eddsakey)}},{key:"setEddsakey",value:function(e){sessionStorage.setItem(a.Eddsakey,e)}},{key:"getAmmOrder",value:function(){var e=localStorage.getItem(a.AmmOrder);return e||""}},{key:"setAmmOrder",value:function(e){localStorage.setItem(a.AmmOrder,e)}},{key:"clearAmmOrder",value:function(){localStorage.removeItem(a.AmmOrder)}},{key:"isHardwareAddress",value:function(e){var t=localStorage.getItem(a.HardwareAddresses);return!(!t||!t.includes(e.toLowerCase()))}},{key:"saveHardwareAddress",value:function(e){var t=localStorage.getItem(a.HardwareAddresses);if(t){if(!0!==t.includes(e.toLowerCase())){var n=t+","+e.toLowerCase();localStorage.setItem(a.HardwareAddresses,n)}}else localStorage.setItem(a.HardwareAddresses,e.toLowerCase())}}]),e}()},222:function(e,t,n){"use strict";n.d(t,"b",(function(){return o})),n.d(t,"a",(function(){return i}));var a=n(4),c=n.n(a),r=n(23);function o(e){if(!e||!(e instanceof Object)||"function"==typeof e)return e||void 0;var t=new(0,e.constructor);for(var n in e)e.hasOwnProperty(n)&&(t[n]=o(e[n]));return t}function i(e){return s.apply(this,arguments)}function s(){return(s=Object(r.a)(c.a.mark((function e(t){var n;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(document.execCommand&&(n=document.createElement("textarea"),document.body.appendChild(n),n.value=t,n.select(),document.execCommand("copy"),document.body.removeChild(n)),!navigator.clipboard){e.next=4;break}return e.next=4,navigator.clipboard.writeText(t);case 4:if(!window.clipboardData){e.next=8;break}return window.clipboardData.setData("Text",t),console.log("clipboardData:",t),e.abrupt("return",!0);case 8:return e.abrupt("return",!1);case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}},225:function(e,t,n){"use strict";n.d(t,"d",(function(){return o})),n.d(t,"a",(function(){return s})),n.d(t,"c",(function(){return u})),n.d(t,"b",(function(){return l}));var a=n(2),c=n(81),r=n(58),o=Object(c.c)({name:"tickerMap",initialState:{tickerMap:{},status:"UNSET",errorMessage:null},reducers:{getTicker:function(e,t){e.status=r.a.PENDING},getTickers:function(e,t){e.status=r.a.PENDING},getTickerStatus:function(e,t){t.error&&(e.status=r.a.ERROR,e.errorMessage=t.error),e.tickerMap=Object(a.a)(Object(a.a)({},e.tickerMap),t.payload.tickerMap),e.status=r.a.DONE},statusUnset:function(e){e.status=r.a.UNSET}}}),i=o.actions,s=i.getTicker,u=i.getTickers,l=i.getTickerStatus;i.statusUnset},245:function(e,t,n){"use strict";n.d(t,"a",(function(){return o})),n.d(t,"b",(function(){return r.c}));var a=n(2),c=n(47),r=n(255);function o(){var e=Object(c.c)((function(e){return e.userRewardsMap})),t=Object(c.b)();return Object(a.a)(Object(a.a)({},e),{},{statusUnset:function(){t(r.c.actions.statusUnset(void 0))},updateUserRewards:function(){t(r.c.actions.getUserRewards(void 0))}})}},251:function(e,t,n){"use strict";n.d(t,"b",(function(){return i})),n.d(t,"e",(function(){return u})),n.d(t,"a",(function(){return l})),n.d(t,"c",(function(){return d})),n.d(t,"d",(function(){return b}));var a=n(81),c=n(252),r=n(58),o={env:c.a.PROD,chainId:"unknown",baseURL:"",socketURL:"",faitPrices:void 0,gasPrice:void 0,forex:void 0,__timer__:-1,status:"UNSET",errorMessage:null,exchangeInfo:void 0,topics:[]},i=Object(a.c)({name:"system",initialState:o,reducers:{updateSystem:function(e,t){e.chainId=t.payload.chainId,e.status=r.a.PENDING},updateSocketURL:function(e,t){e.socketURL=t.payload.socketURL},updateRealTimeObj:function(e,t){var n=t.payload,a=n.forex,c=n.faitPrices,r=n.gasPrice;a&&(e.forex=a),c&&(e.faitPrices=c),r&&(e.gasPrice=r)},getSystemStatus:function(e,t){t.error&&(e.status=r.a.ERROR,e.errorMessage=t.error);var n=t.payload,a=n.env,c=n.baseURL,o=n.faitPrices,i=n.gasPrice,s=n.forex,u=n.exchangeInfo,l=n.__timer__;a&&(e.env=a),c&&(e.baseURL=c),o&&(e.faitPrices=o),i&&(e.gasPrice=i),s&&(e.forex=s),u&&(e.exchangeInfo=u),l&&(e.__timer__=l),e.status=r.a.DONE},statusUnset:function(e){e.status=r.a.UNSET}}}),s=i.actions,u=s.updateSystem,l=(s.setTopics,s.getSystemStatus),d=(s.statusUnset,s.updateRealTimeObj),b=s.updateSocketURL},252:function(e,t,n){"use strict";var a,c;n.d(t,"a",(function(){return a})),n.d(t,"b",(function(){return c})),function(e){e.DEV="DEV",e.UAT="UAT",e.PROD="PROD"}(a||(a={})),function(e){e.NONETWORK="unknown"}(c||(c={}))},253:function(e,t,n){"use strict";n.d(t,"d",(function(){return i})),n.d(t,"c",(function(){return u})),n.d(t,"a",(function(){return l})),n.d(t,"b",(function(){return d}));var a=n(2),c=n(81),r=n(58),o={walletLayer1:void 0,status:"UNSET",errorMessage:null},i=Object(c.c)({name:"walletLayer1",initialState:o,reducers:{updateWalletLayer1:function(e,t){e.status=r.a.PENDING},reset:function(e,t){e.walletLayer1=void 0,e.status=r.a.UNSET},getWalletLayer1Status:function(e,t){t.error&&(e.status=r.a.ERROR,e.errorMessage=t.error),e.walletLayer1=Object(a.a)({},t.payload.walletLayer1),e.status=r.a.DONE},statusUnset:function(e){e.status=r.a.UNSET}}}),s=i.actions,u=s.updateWalletLayer1,l=s.getWalletLayer1Status,d=(s.statusUnset,s.reset)},254:function(e,t,n){"use strict";n.d(t,"d",(function(){return i})),n.d(t,"c",(function(){return u})),n.d(t,"a",(function(){return l})),n.d(t,"b",(function(){return d}));var a=n(2),c=n(81),r=n(58),o={walletLayer2:void 0,status:"UNSET",errorMessage:null},i=Object(c.c)({name:"walletLayer2S",initialState:o,reducers:{updateWalletLayer2:function(e,t){e.status=r.a.PENDING},reset:function(e,t){e.walletLayer2=void 0,e.status=r.a.UNSET},getWalletLayer2Status:function(e,t){t.error&&(e.status=r.a.ERROR,e.errorMessage=t.error),e.walletLayer2=Object(a.a)({},t.payload.walletLayer2),e.status=r.a.DONE},statusUnset:function(e){e.status=r.a.UNSET}}}),s=i.actions,u=s.updateWalletLayer2,l=s.getWalletLayer2Status,d=(s.statusUnset,s.reset)},255:function(e,t,n){"use strict";n.d(t,"c",(function(){return i})),n.d(t,"a",(function(){return u})),n.d(t,"b",(function(){return l}));var a=n(2),c=n(81),r=n(58),o={userRewardsMap:void 0,status:"UNSET",errorMessage:null,__timer__:-1},i=Object(c.c)({name:"userRewardsMap",initialState:o,reducers:{getUserRewards:function(e,t){e.status=r.a.PENDING},getUserRewardsStatus:function(e,t){t.error&&(e.status=r.a.ERROR,e.errorMessage=t.error),e.userRewardsMap=Object(a.a)(Object(a.a)({},e.userRewardsMap),t.payload.userRewardsMap),t.payload.__timer__&&(e.__timer__=t.payload.__timer__),e.status=r.a.DONE},statusUnset:function(e){e.status=r.a.UNSET}}}),s=i.actions,u=s.getUserRewards,l=s.getUserRewardsStatus;s.statusUnset},271:function(e,t,n){"use strict";n.d(t,"a",(function(){return o})),n.d(t,"b",(function(){return s})),n.d(t,"c",(function(){return u}));var a=n(2),c=n(81),r=n(58),o=Object(c.c)({name:"ammActivityMap",initialState:{ammActivityMap:{},status:"UNSET",errorMessage:null},reducers:{getAmmActivityMap:function(e,t){e.status=r.a.PENDING},getAmmActivityMapStatus:function(e,t){t.error&&(e.status=r.a.ERROR,e.errorMessage=t.error),e.ammActivityMap=Object(a.a)({},t.payload.ammActivityMap),e.status=r.a.DONE},statusUnset:function(e){e.status=r.a.UNSET}}}),i=o.actions,s=i.getAmmActivityMap,u=i.getAmmActivityMapStatus;i.statusUnset},272:function(e,t,n){"use strict";n.d(t,"c",(function(){return o})),n.d(t,"a",(function(){return s})),n.d(t,"b",(function(){return u}));var a=n(81),c=n(58),r={coinMap:{},addressIndex:void 0,tokenMap:void 0,marketMap:void 0,idIndex:void 0,status:"UNSET",errorMessage:null},o=Object(a.c)({name:"tokenMap",initialState:r,reducers:{getTokenMap:function(e,t){e.status=c.a.PENDING},getTokenMapStatus:function(e,t){t.error&&(e.status=c.a.ERROR,e.errorMessage=t.error);var n=t.payload,a=n.tokenMap,r=n.marketMap,o=n.addressIndex,i=n.idIndex,s=n.coinMap,u=n.marketArray,l=n.marketCoins;a&&(e.tokenMap=a),r&&(e.marketMap=r),o&&(e.addressIndex=o),i&&(e.idIndex=i),s&&(e.coinMap=s),u&&(e.marketArray=u),l&&(e.marketCoins=l),e.status=c.a.DONE},statusUnset:function(e){e.status=c.a.UNSET}}}),i=o.actions,s=i.getTokenMap,u=i.getTokenMapStatus;i.getTokenPairMap,i.statusUnset},297:function(e,t,n){"use strict";n.d(t,"c",(function(){return o})),n.d(t,"a",(function(){return r.b})),n.d(t,"b",(function(){return r.d}));var a=n(2),c=n(47),r=n(251);function o(){var e=Object(c.c)((function(e){return e.system})),t=Object(c.b)();return Object(a.a)(Object(a.a)({},e),{},{statusUnset:function(){t(r.b.actions.statusUnset(void 0))},updateSystem:function(e){t(r.b.actions.updateSystem(e))}})}n(252)},381:function(e,t,n){"use strict";n.d(t,"b",(function(){return r})),n.d(t,"a",(function(){return s}));var a=n(506),c=n(13);n(122),n(106);function r(e,t){return o(t[e])}function o(e){if(e){var t=a.utils.getAddress(e.address);return"https://exchange.loopring.io/assets/images/ethereum/assets/".concat(t,"/logo.png")}return""}var i=function(e,t){if(!e)throw Error("no tokens list!");return e[t]};function s(e,t,n,a,r){try{var o=i(e,t),s=a||o.precision,u=c.H(n).div("1e"+o.decimals);return c.I(u,s,r)}catch(l){}return"0"}},382:function(e,t,n){"use strict";n.d(t,"b",(function(){return o})),n.d(t,"a",(function(){return r.d}));var a=n(2),c=n(47),r=n(225);function o(){var e=Object(c.c)((function(e){return e.tickerMap})),t=Object(c.b)();return Object(a.a)(Object(a.a)({},e),{},{statusUnset:function(){t(r.d.actions.statusUnset(void 0))},updateTickers:function(e){t(r.d.actions.getTickers({tickerKeys:e}))},updateTicker:function(e){t(r.d.actions.getTicker({tickerKey:e}))}})}},383:function(e,t,n){"use strict";n.d(t,"c",(function(){return o})),n.d(t,"a",(function(){return r.a})),n.d(t,"b",(function(){return r.b}));var a=n(2),c=n(47),r=n(271);function o(){var e=Object(c.c)((function(e){return e.amm.ammActivityMap})),t=Object(c.b)();return Object(a.a)(Object(a.a)({},e),{},{statusUnset:function(){t(r.a.actions.statusUnset(void 0))},updateAmmActivityMap:function(){t(r.a.actions.getAmmActivityMap(void 0))}})}},40:function(e,t,n){"use strict";var a,c;n.d(t,"b",(function(){return a})),n.d(t,"c",(function(){return c})),n.d(t,"a",(function(){return r})),function(e){e.UNKNOWN="UNKNOWN",e.UNCONNNECTED="UNCONNNECTED",e.CONNECTED="CONNECTED",e.NOACCOUNT="NOACCOUNT",e.DEPOSITING="DEPOSITING",e.DEPOSIT_TO_CONFIREM="DEPOSIT_TO_CONFIREM",e.UNACTIVATED="UNACTIVATED",e.ARPROVING="ARPROVING",e.APPROV_TO_CONFIRM="APPROV_TO_CONFIRM",e.LOCKED="LOCKED",e.ACTIVATED="ACTIVATED"}(a||(a={})),function(e){e.Reset="Reset",e.Connecting="Connecting",e.HasPubkey="HasPubkey",e.HasNoPubkey="HasNoPubkey",e.ErrorResponse="ErrorResponse",e.FinishDeposit="FinishDeposit",e.DepositConfirmed="DepositConfirmed",e.IsSmartWallet="IsSmartWallet",e.ApproveSubmit="ApproveSubmit",e.ApproveConfirmed="ApproveConfirmed",e.Unlock="Unlock",e.Lock="Lock"}(c||(c={}));var r=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:a.UNCONNNECTED;return{initialState:e,states:{UNCONNNECTED:{Connecting:a.CONNECTED,Reset:a.UNCONNNECTED},CONNECTED:{HasPubkey:a.LOCKED,HasNoPubkey:a.UNACTIVATED,ErrorResponse:a.NOACCOUNT,Reset:a.UNCONNNECTED},NOACCOUNT:{ErrorResponse:a.NOACCOUNT,Reset:a.UNCONNNECTED},DEPOSITING:{FinishDeposit:a.DEPOSIT_TO_CONFIREM,Reset:a.UNCONNNECTED},DEPOSIT_TO_CONFIREM:{HasPubkey:a.ACTIVATED,HasNoPubkey:a.DEPOSIT_TO_CONFIREM,ErrorResponse:a.DEPOSIT_TO_CONFIREM,Reset:a.UNCONNNECTED},UNACTIVATED:{IsSmartWallet:a.ARPROVING,Reset:a.UNCONNNECTED},ARPROVING:{ApproveSubmit:a.APPROV_TO_CONFIRM,Reset:a.UNCONNNECTED},APPROV_TO_CONFIRM:{ApproveConfirmed:a.ACTIVATED,Reset:a.UNCONNNECTED},LOCKED:{Unlock:a.ACTIVATED,Reset:a.UNCONNNECTED},ACTIVATED:{Lock:a.LOCKED,Reset:a.UNCONNNECTED}}}}},445:function(e,t,n){"use strict";n.d(t,"a",(function(){return c})),n.d(t,"b",(function(){return r}));n(4),n(23),n(990),n(85),n(1894),n(230);var a=n(1895);n(190),n(444),n(537);function c(e){var t=new a.a(e);return t.pollingInterval=1e4,t}function r(e){if(e&&void 0!==e&&null!==e&&""!==e.trim())return e.substr(0,6)+"..."+e.substr(e.length-4);console.log("getShortAddr got empty!")}},446:function(e,t,n){"use strict";n.d(t,"b",(function(){return f})),n.d(t,"c",(function(){return T})),n.d(t,"a",(function(){return C}));var a,c=n(68),r=n(1),o=n.n(r),i=n(207),s=n(117),u=n(142),l=n(0);!function(e){e.Click="click",e.Scroll="scroll",e.Mouseover="mouseover"}(a||(a={}));var d=[a.Click,a.Scroll],b=Object(c.debounce)((function(){i.a.checkTimeout(!0)}),100),f=function(e){var t=e.children;return Object(u.g)(),Object(u.h)(),Object(u.i)(),Object(u.d)(),Object(u.c)(),Object(u.e)(),Object(u.f)(),Object(s.b)(),Object(r.useEffect)((function(){return d.forEach((function(e){document.addEventListener(e,b)})),function(){d.forEach((function(e){document.removeEventListener(e,b)}))}}),[]),Object(l.jsx)(o.a.Fragment,{children:t})},p=n(6),m=n(299),j=n(927),O=n(190),v=n(174),h=n(159),g=n(120),x=n(13),A=n(47),y=n(40);var k=Object(m.a)("div",{target:"e1vtmr5h1"})({name:"17nbj0f",styles:"display:flex;align-items:center;justify-content:center;height:20rem"}),w=Object(m.a)("h2",{target:"e1vtmr5h0"})("color:",(function(e){return e.theme.colorBase.error}),";");function T(e){var t=e.children,n=Object(j.a)().t,a=Object(O.d)().active,c=Object(O.d)(x.k),o=c.active,i=c.error,s=c.activate,u=Object(h.b)();Object(r.useEffect)((function(){!u||o||i||a||s(v.d)}),[u,o,i,s,a]);var d=Object(A.b)();Object(h.d)((function(){console.log("onReConnectInjected"),d(Object(g.b)(void 0)),d(Object(g.e)(y.b.UNCONNNECTED))}),!u);var b=Object(r.useState)(!1),f=Object(p.a)(b,2),m=f[0],T=f[1];return Object(r.useEffect)((function(){var e=setTimeout((function(){T(!0)}),600);return function(){clearTimeout(e)}}),[]),u?!a&&i?Object(l.jsx)(k,{children:Object(l.jsx)(w,{children:n("unknownError")})}):a||o?t:m?Object(l.jsx)(k,{}):null:null}var C=function(e){e.children;return Object(l.jsx)(o.a.Fragment,{children:null})}},45:function(e,t,n){"use strict";n.d(t,"d",(function(){return o})),n.d(t,"c",(function(){return i})),n.d(t,"b",(function(){return s})),n.d(t,"a",(function(){return u}));var a=n(9),c=n(13),r=n(142),o=function(){return new c.p(Object(r.a)())},i=function(){return new c.i(Object(r.a)())},s=function(){return new c.c(Object(r.a)())},u=function e(){Object(a.a)(this,e)};u.userAPI=void 0,u.exchangeAPI=void 0,u.ammpoolAPI=void 0,u.walletAPI=void 0,u.wsAPI=void 0,u.InitApi=function(e){u.userAPI=new c.p(e),u.exchangeAPI=new c.i(e),u.ammpoolAPI=new c.c(e),u.walletAPI=new c.r(e),u.wsAPI=new c.s(e)}},48:function(e,t,n){"use strict";var a=n(35),c=n(202),r=n(81),o=(n(47),n(666)),i=n(971),s=n(972),u=Object(r.b)("global/updateVersion"),l=n(120),d=n(194),b=function(){return(new Date).getTime()},f={},p=Object(r.c)({name:"transactions",initialState:f,reducers:{reset:function(e){Object.assign(e,f)},addTransaction:function(e,t){var n,a,c=t.payload,r=c.chainId,o=c.from,i=c.hash,s=c.approval,u=c.summary,l=c.claim;if(null===(n=e[r])||void 0===n?void 0:n[i])throw Error("the existing TX can't be added again");(null!==(a=e[r])&&void 0!==a?a:{})[i]={hash:i,approval:s,summary:u,claim:l,from:o,addedTime:b()}},clearAllTransactions:function(e,t){var n=t.payload;e[n]&&(e[n]={})},checkedTransaction:function(e,t){var n,a=t.payload,c=a.chainId,r=a.hash,o=a.blockNumber,i=null===(n=e[c])||void 0===n?void 0:n[r];i&&(i.lastCheckedBlockNumber?i.lastCheckedBlockNumber=Math.max(o,i.lastCheckedBlockNumber):i.lastCheckedBlockNumber=o)},finalizeTransaction:function(e,t){var n,a=t.payload,c=a.chainId,r=a.hash,o=a.receipt,i=null===(n=e[c])||void 0===n?void 0:n[r];i&&(i.receipt=o,i.confirmedTime=b())}}}),m=p.actions,j=(m.reset,m.addTransaction,m.clearAllTransactions,m.checkedTransaction,m.finalizeTransaction,p),O=n(26),v=n(2),h=n(58),g=Object(r.c)({name:"ammTrades",initialState:{ammTrades:[],status:"UNSET",errorMessage:null},reducers:{getAmmTrades:function(e,t){e.status=h.a.PENDING},getAmmTradesStatus:function(e,t){t.error&&(e.status=h.a.ERROR,e.errorMessage=t.error),e.ammTrades=Object(v.a)({},t.payload.ammTrades),e.status=h.a.DONE},statusUnset:function(e){e.status=h.a.UNSET}}}),x=g.actions,A=x.getAmmTrades,y=x.getAmmTradesStatus;x.statusUnset;var k=n(126),w=n(383),T=n(4),C=n.n(T),I=n(23),_=n(39),E=n(271),S=n(45),P=C.a.mark(D),N=C.a.mark(M),R=function(){var e=Object(I.a)(C.a.mark((function e(){var t,n;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!S.a.ammpoolAPI){e.next=8;break}return e.next=3,S.a.ammpoolAPI.getAmmPoolActivityRules();case 3:return t=e.sent,n=t.groupByRuleTypeAndStatus,e.abrupt("return",{data:n});case 8:return e.abrupt("return",{data:void 0});case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();function D(){var e,t;return C.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,Object(_.b)(R);case 3:return e=n.sent,t=e.data,n.next=7,Object(_.d)(Object(E.c)({ammActivityMap:t}));case 7:n.next=13;break;case 9:return n.prev=9,n.t0=n.catch(0),n.next=13,Object(_.d)(Object(E.c)(n.t0));case 13:case"end":return n.stop()}}),P,null,[[0,9]])}function M(){return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(_.a)([Object(_.f)(E.b,D)]);case 2:case"end":return e.stop()}}),N)}var U=n(6),L=n(188),B=n(13),F=n(62),K=C.a.mark(z),V=C.a.mark(q),W=C.a.mark(X),H=C.a.mark(J),Y=function(e){var t=e.ammPoolState,n=e.keyPair,a=wt.getState().tokenMap.idIndex,c=n.match(/(\w+)-(\w+)/i),r=Object(U.a)(c,3),o=r[1],i=r[2],s=wt.getState().system,u=s.forex,l=s.faitPrices;if(a&&o&&i&&l&&u){var d={amountDollar:parseFloat(t.liquidityUSD),amountYuan:parseFloat(t.liquidityUSD)/(u||6.5),totalLPToken:Object(F.a)("LP-"+n,t.lpLiquidity),totalA:Object(F.a)(o,t.liquidity[0]),totalB:Object(F.a)(i,t.liquidity[1]),rewardValue:t.rewards[0]?Object(F.a)(a[t.rewards[0].tokenId],t.rewards[0].volume):void 0,rewardToken:t.rewards[0]?a[t.rewards[0].tokenId]:void 0,rewardValue2:t.rewards[1]?Object(F.a)(a[t.rewards[1].tokenId],t.rewards[1].volume):void 0,rewardToken2:t.rewards[1]?a[t.rewards[1].tokenId]:void 0},b=Object(F.b)(o,t.fees[0]),f=Object(F.b)(i,t.fees[1]),p=l[o]&&l[i]?Object(B.H)(b||0).times(l[o].price).plus(Object(B.H)(f||0).times(l[i].price)):void 0,m=p?p.times(u):void 0;return Object(v.a)(Object(v.a)({},d),{},{feeA:null===b||void 0===b?void 0:b.toNumber(),feeB:null===f||void 0===f?void 0:f.toNumber(),feeDollar:p?p.toNumber():void 0,feeYuan:m?m.toNumber():void 0,tradeFloat:{change:void 0,timeUnit:"24h"},APY:1*parseInt(t.apyBips)/100})}},G=function(){var e=Object(I.a)(C.a.mark((function e(t){var n,a,c,r,o,i,s,u;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.ammpools,a={},e.next=4,Object(S.b)().getAmmPoolStats();case 4:return c=e.sent,r=c.ammPoolStats,(o=wt.getState().amm.ammMap.__timer__)&&-1!==o&&clearInterval(o),o=setInterval(Object(I.a)(C.a.mark((function e(){var t;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(S.b)().getAmmPoolStats();case 2:t=e.sent.ammPoolStats,wt.dispatch(Object(L.d)({ammPoolStats:t}));case 4:case"end":return e.stop()}}),e)}))),9e5),i=wt.getState(),s=i.tokenMap,s.coinMap,u=s.idIndex,Reflect.ownKeys(n).forEach(function(){var e=Object(I.a)(C.a.mark((function e(t){var c,o,i,s;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:(c=n[t]).market===t&&c.tokens.pooled&&u&&(o=u[c.tokens.pooled[0]],i=u[c.tokens.pooled[1]],s=Object(v.a)(Object(v.a)({coinA:o,coinB:i,isNew:!(Date.now()-Number(c.createdAt)>2592e5),isActivity:7===c.status,address:c.address},Y({ammPoolState:r[t],keyPair:"".concat(o,"-").concat(i)})),{},{__rawConfig__:c}),a[c.market]=s);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),e.abrupt("return",{ammMap:a,__timer__:o});case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();function z(e){var t,n,a,c,r;return C.a.wrap((function(o){for(;;)switch(o.prev=o.next){case 0:return t=e.payload,o.prev=1,n=t.ammpools,o.next=5,Object(_.b)(G,{ammpools:n});case 5:return a=o.sent,c=a.ammMap,r=a.__timer__,console.log("--- getPostsSaga:",c),o.next=11,Object(_.d)(Object(L.c)({ammMap:c,__timer__:r}));case 11:o.next=17;break;case 13:return o.prev=13,o.t0=o.catch(1),o.next=17,Object(_.d)(Object(L.c)(o.t0));case 17:case"end":return o.stop()}}),K,null,[[1,13]])}function q(e){var t,n,a;return C.a.wrap((function(c){for(;;)switch(c.prev=c.next){case 0:return t=e.payload,c.prev=1,n=t.ammPoolStats,a=wt.getState().amm.ammMap.ammMap,n&&Reflect.ownKeys(n).map((function(e){var t=e.replace("AMM-","");return a[e]=Object(v.a)(Object(v.a)({},a[e]),Y({ammPoolState:n[e],keyPair:t})),a})),c.next=7,Object(_.d)(Object(L.c)({ammMap:a}));case 7:c.next=13;break;case 9:return c.prev=9,c.t0=c.catch(1),c.next=13,Object(_.d)(Object(L.c)(c.t0));case 13:case"end":return c.stop()}}),V,null,[[1,9]])}function X(){return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(_.a)([Object(_.f)(L.b,z)]);case 2:case"end":return e.stop()}}),W)}function J(){return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(_.a)([Object(_.f)(L.d,q)]);case 2:case"end":return e.stop()}}),H)}var Z=[Object(_.c)(X),Object(_.c)(J)],Q=C.a.mark(te),$=C.a.mark(ne),ee=function(){return new Promise((function(e){e([{side:"Buy",amount:{sell:{belong:"ETH",tradeValue:.1},buy:{belong:"LRC",tradeValue:123}},time:Date.now(),fee:.02,priceValue:.123,priceToken:"LRC"},{side:"Buy",amount:{sell:{belong:"ETH",tradeValue:.1},buy:{belong:"LRC",tradeValue:123}},time:Date.now(),fee:.02,priceValue:.123,priceToken:"LRC"}])}))};function te(){var e,t,n;return C.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,Object(_.b)(ee);case 3:return e=a.sent,t=e.data,n=t,a.next=8,Object(_.d)(y(n));case 8:a.next=14;break;case 10:return a.prev=10,a.t0=a.catch(0),a.next=14,Object(_.d)(y(a.t0));case 14:case"end":return a.stop()}}),Q,null,[[0,10]])}function ne(){return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(_.a)([Object(_.f)(A,te)]);case 2:case"end":return e.stop()}}),$)}var ae=Object(c.b)({ammTrades:g.reducer,ammMap:k.a.reducer,ammActivityMap:w.a.reducer}),ce=[Object(_.c)(M)].concat(Object(a.a)(Z),[Object(_.c)(ne)]),re=n(124),oe=n(14),ie=n(272),se=n(381),ue=C.a.mark(be),le=C.a.mark(fe),de=function(){var e=Object(I.a)(C.a.mark((function e(t){var n,a,c,r,o,i,s,u;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.tokensMap,a=t.pairs,c=t.marketArr,r=t.tokenArr,o={},i=n,s={},u={},Reflect.ownKeys(n).forEach((function(e){e.startsWith("LP-")||(o[e]={icon:Object(se.b)(e,n),name:e,simpleName:e,description:"",company:""}),a[e]&&a[e].tokenList&&(n[e].tradePairs=a[e].tokenList),s=Object(v.a)(Object(v.a)({},s),{},Object(oe.a)({},n[e].address,e)),u=Object(v.a)(Object(v.a)({},u),{},Object(oe.a)({},n[e].tokenId,e))})),e.abrupt("return",{data:{coinMap:o,addressIndex:s,idIndex:u,tokenMap:i,marketArray:c,marketCoins:r}});case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();function be(e){var t,n,a,c,r,o,i,s;return C.a.wrap((function(u){for(;;)switch(u.prev=u.next){case 0:return t=e.payload,u.prev=1,n=t.tokensMap,a=t.marketMap,c=t.pairs,r=t.marketArr,o=t.tokenArr,u.next=5,Object(_.b)(de,{tokensMap:n,pairs:c,marketArr:r,tokenArr:o});case 5:return i=u.sent,s=i.data,u.next=9,Object(_.d)(Object(ie.b)(Object(v.a)(Object(v.a)({},s),{},{marketMap:a})));case 9:u.next=15;break;case 11:return u.prev=11,u.t0=u.catch(1),u.next=15,Object(_.d)(Object(ie.b)(u.t0));case 15:case"end":return u.stop()}}),ue,null,[[1,11]])}function fe(){return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(_.a)([Object(_.f)(ie.a,be)]);case 2:case"end":return e.stop()}}),le)}var pe=[Object(_.c)(fe)],me=n(225),je=n(29),Oe=C.a.mark(xe),ve=C.a.mark(Ae),he=C.a.mark(ye),ge=function(){var e=Object(I.a)(C.a.mark((function e(t){var n,a,c,r,o;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=wt.getState().system,a=n.faitPrices,c=n.forex,e.next=3,Object(S.c)().getMixTicker({market:t.join(",")});case 3:return r=e.sent,o=Reflect.ownKeys(r.tickMap).reduce((function(e,t){var n=r.tickMap[t];if(n&&n.base&&c&&a&&a[n.base]){var o=Object(F.b)(n.base,n.base_token_volume),i=null===o||void 0===o?void 0:o.times(a[n.base].price),s=null===i||void 0===i?void 0:i.times(c),u=n.change?100*n.change:void 0;e[t]={timeUnit:"24h",priceDollar:null===i||void 0===i?void 0:i.toNumber(),priceYuan:null===s||void 0===s?void 0:s.toNumber(),volume:null===o||void 0===o?void 0:o.toNumber(),change:u,floatTag:n.close>n.open?"increase":"decrease",reward:0,rewardToken:"",__rawTicker__:n}}return e}),{}),e.abrupt("return",{data:o});case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();function xe(e){var t,n,a,c,r;return C.a.wrap((function(o){for(;;)switch(o.prev=o.next){case 0:if(t=e.payload,o.prev=1,n=t.tickerKey,a=t.tickerKeys,console.log("getPostsSaga tickerKey",n,a),!(n||a&&a.length)){o.next=13;break}return o.next=7,Object(_.b)(ge,n?[n]:a);case 7:return c=o.sent,r=c.data,o.next=11,Object(_.d)(Object(me.b)({tickerMap:r}));case 11:o.next=14;break;case 13:throw new je.c(je.e.NO_TOKEN_KEY_LIST);case 14:o.next=20;break;case 16:return o.prev=16,o.t0=o.catch(1),o.next=20,Object(_.d)(Object(me.b)(o.t0));case 20:case"end":return o.stop()}}),Oe,null,[[1,16]])}function Ae(){return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(_.a)([Object(_.f)(me.a,xe)]);case 2:case"end":return e.stop()}}),ve)}function ye(){return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(_.a)([Object(_.f)(me.c,xe)]);case 2:case"end":return e.stop()}}),he)}var ke=[Object(_.c)(Ae),Object(_.c)(ye)],we=n(251),Te=n(252),Ce=C.a.mark(Se),Ie=C.a.mark(Pe),_e=C.a.mark((function e(t){var n,a,c,r,o,i,s,u,d;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return wt.dispatch(Object(l.b)(void 0)),e.next=3,Object(_.b)(Object(I.a)(C.a.mark((function e(){var t;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,null===(t=S.a.exchangeAPI)||void 0===t?void 0:t.getTokens();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)}))));case 3:return n=e.sent,a=n.tokenSymbolMap,e.next=7,Object(_.b)(Object(I.a)(C.a.mark((function e(){var t;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,null===(t=S.a.ammpoolAPI)||void 0===t?void 0:t.getAmmPoolConf();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)}))));case 7:return c=e.sent,r=c.ammpools,e.next=11,Object(_.b)(Object(I.a)(C.a.mark((function e(){var t;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",null===(t=S.a.exchangeAPI)||void 0===t?void 0:t.getMixMarkets());case 1:case"end":return e.stop()}}),e)}))));case 11:return o=e.sent,i=o.pairs,s=o.marketArr,u=o.tokenArr,d=o.markets,wt.dispatch(Object(re.a)({tokensMap:a,marketMap:d,pairs:i,marketArr:s,tokenArr:u})),e.next=19,Object(_.e)("tokenMap/getTokenMapStatus");case 19:wt.dispatch(Object(k.b)({ammpools:r})),wt.dispatch(Object(w.b)({ammpools:r})),wt.getState().tokenMap.status;case 22:case"end":return e.stop()}}),e)})),Ee=function(){var e=Object(I.a)(C.a.mark((function e(t){var n,a,c,r,o,i,s,u;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n="localhost"===window.location.hostname?Te.a.DEV:B.e.GORLI===t?Te.a.UAT:Te.a.PROD,(t=B.e.GORLI===t?B.e.GORLI:B.e.MAINNET===t?B.e.MAINNET:Te.b.NONETWORK)!==Te.b.NONETWORK){e.next=6;break}throw new je.c(je.e.NO_NETWORK_ERROR);case 6:if(S.a.InitApi(t),!S.a.exchangeAPI){e.next=24;break}return e.next=10,S.a.exchangeAPI.getExchangeInfo();case 10:return a=e.sent,c=a.exchangeInfo,e.next=14,S.a.exchangeAPI.getFiatPrice({legal:"CNY"});case 14:return r=e.sent.fiatPrices,e.next=17,Object(S.c)().getGasPrice();case 17:return e.t0=e.sent.gasPrice,o=e.t0/1e9,i=B.e.MAINNET===t?"https://api3.loopring.io":"https://uat2.loopring.io",s=r.USDT.price,u=function(e){return e&&-1!==e&&clearInterval(e),setInterval(Object(I.a)(C.a.mark((function e(){var t,n,a;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(S.c)().getFiatPrice({legal:"CNY"});case 2:return t=e.sent.fiatPrices,e.next=5,Object(S.c)().getGasPrice();case 5:e.t0=e.sent.gasPrice,n=e.t0/1e9,a=t.USDT,wt.dispatch(Object(k.c)(void 0)),wt.dispatch(Object(we.c)({faitPrices:t,gasPrice:n,forex:a}));case 10:case"end":return e.stop()}}),e)}))),3e5)}(u=wt.getState().system.__timer__),e.abrupt("return",{chainId:t,env:n,baseURL:i,faitPrices:r,gasPrice:o,forex:s,exchangeInfo:c,__timer__:u});case 24:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();function Se(e){var t,n,a,c,r,o,i,s,u,l;return C.a.wrap((function(d){for(;;)switch(d.prev=d.next){case 0:return t=e.payload,d.prev=1,n=t.chainId,d.next=5,Object(_.b)(Ee,n);case 5:return a=d.sent,c=a.env,r=a.baseURL,o=a.faitPrices,i=a.gasPrice,s=a.forex,u=a.exchangeInfo,l=a.__timer__,d.next=15,Object(_.d)(Object(we.a)({env:c,baseURL:r,faitPrices:o,gasPrice:i,forex:s,exchangeInfo:u,__timer__:l}));case 15:return d.next=17,Object(_.b)(_e,n);case 17:d.next=23;break;case 19:return d.prev=19,d.t0=d.catch(1),d.next=23,Object(_.d)(Object(we.a)(d.t0));case 23:case"end":return d.stop()}}),Ce,null,[[1,19]])}function Pe(){return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(_.a)([Object(_.f)(we.e,Se)]);case 2:case"end":return e.stop()}}),Ie)}var Ne=[Object(_.c)(Pe)],Re=n(253),De=C.a.mark(Le),Me=C.a.mark(Be),Ue=function(){var e=Object(I.a)(C.a.mark((function e(){var t,n,a,c,r,o,i,s,u;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=Object(S.c)(),n=wt.getState().account,a=n.accAddr,n.accountId,c=wt.getState().tokenMap,r=c.tokenMap,o=c.marketCoins,e.next=5,t.getTokenBalances({owner:a,token:o.join()},r);case 5:return i=e.sent,(s=i.tokenBalances)&&(u=Reflect.ownKeys(s).reduce((function(e,t){return Object(v.a)(Object(v.a)({},e),{},Object(oe.a)({},t,{belong:t,count:Object(se.a)(r,t,s[t])}))}),{})),e.abrupt("return",{walletLayer1:u});case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();function Le(){var e,t;return C.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,Object(_.b)(Ue);case 3:return e=n.sent,t=e.walletLayer1,n.next=7,Object(_.d)(Object(Re.a)({walletLayer1:t}));case 7:n.next=13;break;case 9:return n.prev=9,n.t0=n.catch(0),n.next=13,Object(_.d)(Object(Re.a)(n.t0));case 13:case"end":return n.stop()}}),De,null,[[0,9]])}function Be(){return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(_.a)([Object(_.f)(Re.c,Le)]);case 2:case"end":return e.stop()}}),Me)}var Fe=[Object(_.c)(Be)],Ke=n(254),Ve=C.a.mark(Ye),We=C.a.mark(Ge),He=function(){var e=Object(I.a)(C.a.mark((function e(){var t,n,a,c,r,o,i,s,u;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=Object(S.d)(),n=wt.getState().account,a=n.accountId,c=n.apiKey,r=wt.getState().tokenMap,r.tokenMap,o=r.idIndex,r.marketCoins,!c||!a){e.next=9;break}return e.next=6,t.getUserBalances({accountId:a,tokens:""},c);case 6:s=e.sent,(u=s.userBalances)&&(i=Reflect.ownKeys(u).reduce((function(e,t){return Object(v.a)(Object(v.a)({},e),{},Object(oe.a)({},o[t],u[Number(t)]))}),{}));case 9:return e.abrupt("return",{walletLayer2:i});case 10:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();function Ye(){var e,t;return C.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,Object(_.b)(He);case 3:return e=n.sent,t=e.walletLayer2,n.next=7,Object(_.d)(Object(Ke.a)({walletLayer2:t}));case 7:n.next=13;break;case 9:return n.prev=9,n.t0=n.catch(0),n.next=13,Object(_.d)(Object(Ke.a)(n.t0));case 13:case"end":return n.stop()}}),Ve,null,[[0,9]])}function Ge(){return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(_.a)([Object(_.f)(Ke.c,Ye)]);case 2:case"end":return e.stop()}}),We)}var ze=[Object(_.c)(Ge)],qe=n(255),Xe=C.a.mark(Qe),Je=C.a.mark($e),Ze=function(){var e=Object(I.a)(C.a.mark((function e(t){var n,a;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=wt.getState().account.accountId,a=wt.getState().userRewardsMap.__timer__,!S.a.ammpoolAPI){e.next=7;break}return a=function(e){return e&&-1!==e&&clearInterval(e),setTimeout(Object(I.a)(C.a.mark((function e(){return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:wt.dispatch(Object(qe.a)(void 0));case 1:case"end":return e.stop()}}),e)}))),12e5)}(a),e.abrupt("return",S.a.ammpoolAPI.getAmmPoolUserRewards({owner:n}).then((function(e){return{data:e.ammUserRewardMap,__timer__:a}})));case 7:return e.abrupt("return",Promise.reject({data:void 0,__timer__:a}));case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();function Qe(e){var t,n,a;return C.a.wrap((function(c){for(;;)switch(c.prev=c.next){case 0:return e.payload,c.prev=1,c.next=4,Object(_.b)(Ze);case 4:return t=c.sent,n=t.data,a=t.__timer__,c.next=9,Object(_.d)(Object(qe.b)({userRewardsMap:n,__timer__:a}));case 9:c.next=15;break;case 11:return c.prev=11,c.t0=c.catch(1),c.next=15,Object(_.d)(Object(qe.b)(c.t0));case 15:case"end":return c.stop()}}),Xe,null,[[1,11]])}function $e(){return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(_.a)([Object(_.f)(qe.a,Qe)]);case 2:case"end":return e.stop()}}),Je)}var et=[Object(_.c)($e)],tt=n(189),nt=n(667),at=C.a.mark(it),ct=C.a.mark(st),rt=C.a.mark(ut),ot=C.a.mark(lt);function it(){return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Object(_.b)(nt.a);case 3:return e.next=5,Object(_.d)(Object(tt.a)(void 0));case 5:e.next=11;break;case 7:return e.prev=7,e.t0=e.catch(0),e.next=11,Object(_.d)(Object(tt.a)(e.t0));case 11:case"end":return e.stop()}}),at,null,[[0,7]])}function st(e){var t,n,a;return C.a.wrap((function(c){for(;;)switch(c.prev=c.next){case 0:return t=e.payload,c.prev=1,n=wt.getState().system.chainId,a=t.socket,c.next=6,Object(_.b)(nt.b,{chainId:n,socket:a});case 6:return c.next=8,Object(_.d)(Object(tt.a)(void 0));case 8:c.next=14;break;case 10:return c.prev=10,c.t0=c.catch(1),c.next=14,Object(_.d)(Object(tt.a)(c.t0));case 14:case"end":return c.stop()}}),ct,null,[[1,10]])}function ut(){return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(_.a)([Object(_.f)(tt.c,it)]);case 2:case"end":return e.stop()}}),rt)}function lt(){return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(_.a)([Object(_.f)(tt.b,st)]);case 2:case"end":return e.stop()}}),ot)}var dt=[Object(_.c)(ut),Object(_.c)(lt)],bt=C.a.mark(ft);function ft(){return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(_.a)([].concat(Object(a.a)(pe),Object(a.a)(Fe),Object(a.a)(ze),Object(a.a)(Ne),Object(a.a)(ce),Object(a.a)(ke),Object(a.a)(et),Object(a.a)(dt)));case 2:case"end":return e.stop()}}),bt)}var pt=ft,mt=n(382),jt=n(297),Ot=n(172),vt=n(160),ht=n(539),gt=n(245),xt=Object(i.a)(),At=Object(c.b)({account:l.a.reducer,socket:ht.a.reducer,settings:O.eb.reducer,system:jt.a.reducer,trading:d.a.reducer,transactions:j.reducer,modals:O.V.reducer,userRewardsMap:gt.b.reducer,amm:ae,tokenMap:re.b.reducer,walletLayer2:vt.d.reducer,walletLayer1:Ot.d.reducer,tickerMap:mt.a.reducer}),yt=["settings"],kt=Object(r.a)({reducer:At,middleware:[].concat(Object(a.a)(Object(r.d)({thunk:!1,serializableCheck:!1})),[Object(o.save)({states:yt}),xt]),devTools:!1,enhancers:[s.reduxBatch],preloadedState:Object(o.load)({states:yt})});kt.dispatch(u()),kt.dispatch(Object(O.W)(kt.getState().settings.language)),xt.run(pt,kt.dispatch);var wt=t.a=kt},539:function(e,t,n){"use strict";n.d(t,"b",(function(){return o})),n.d(t,"a",(function(){return r.d}));var a=n(2),c=n(47),r=n(189);function o(){var e=Object(c.c)((function(e){return e.socket})),t=Object(c.b)();return Object(a.a)(Object(a.a)({},e),{},{statusUnset:function(){t(r.d.actions.statusUnset(void 0))},sendNewMessage:function(e){t(r.d.actions.sendNewMessage(e))},socketEnd:function(){t(r.d.actions.socketEnd(void 0))}})}},58:function(e,t,n){"use strict";var a;n.d(t,"a",(function(){return a})),function(e){e.UNSET="UNSET",e.PENDING="PENDING",e.ERROR="ERROR",e.DONE="DONE"}(a||(a={}))},62:function(e,t,n){"use strict";n.d(t,"a",(function(){return o})),n.d(t,"b",(function(){return i}));var a=n(48),c=n(13),r=n(106),o=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:a.a.getState().tokenMap.tokenMap,c=i(e,t,n);return c?c.toNumber():void 0},i=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:a.a.getState().tokenMap.tokenMap;if(n&&n[e]&&"undefined"!==typeof t)try{return Object(c.H)(t).div(r.c.pow(n[e].decimals))}catch(o){throw o}}},667:function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return g})),n.d(t,"b",(function(){return A}));var a,c,r=n(35),o=n(6),i=n(4),s=n.n(i),u=n(23),l=n(2),d=n(14),b=n(13),f=n(45),p=n(48),m=n(297),j=n(973),O=n(974);!function(e){e.pingpong="pingpong",e.account="account",e.order="order",e.orderbook="orderbook",e.trade="trade",e.ticker="ticker",e.candlestick="candlestick",e.ammpool="ammpool"}(c||(c={}));var v={fn:function(t){"ping"===t.data&&e.looperingSocket.send("pong")}};window.socketEventMap=Object(d.a)({},b.t,v);var h=function(){var e=window||globalThis;return!(!e.looperingSocket||!e.looperingSocket.send)},g=function(){var e=Object(u.a)(s.a.mark((function e(){var t,n,a;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=window||globalThis,!(n=t.loopringSocket)){e.next=8;break}return a=new Promise((function(e,t){n.onclose=function(t){e("Socket is closed, ".concat(t.reason))}})),n.close(),e.abrupt("return",a);case 8:Promise.resolve("no websocket");case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),x=function(){var e=Object(u.a)(s.a.mark((function e(t){var n,a,c,r,i,u,l,d,j;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.chainId,a=t.socket,"unknown"===n||!f.a.wsAPI||!a){e.next=11;break}return c=n===b.e.GORLI?"uat2.loopring.io":"api3.loopring.io",e.next=5,f.a.wsAPI.getWsKey();case 5:r=e.sent,i=r.wsKey,u="wss://ws.".concat(c,"/v3/ws?wsApiKey=").concat(i),p.a.dispatch(Object(m.b)({socketURL:u})),l=window||globalThis;try{d=new WebSocket(u),l.looperingSocket=d,d.onopen=function(){console.log("WebSocket is open now.")},d.onmessage=function(e){console.log("Message:",e.data);var t=e.data;if("string"===typeof t)window.socketEventMap.pingPong.fn.call(window.socketEventMap.pingPong.deps,e);else{var n=Object(o.a)(t.topic,1)[0],a=t.data;if(n){var c=window.socketEventMap[n],r=c.fn,i=c.deps;"function"==typeof r&&r.call(i,a)}}},d.onclose=function(e){console.log("Socket is closed. Reconnect will be attempted in 1 second.",e.reason),setTimeout((function(){x.call(l,n)}),1e3)},d.onerror=function(e){console.error("Socket encountered error: ","Closing socket"),d.close(WebSocket.CLOSED)}}catch(s){console.log("connect error, not from reconnect"),(j=window||globalThis).__wsTimer__?(j.__wsTimer__.timer&&-1!==j.__wsTimer__.timer&&clearTimeout(j.__wsTimer__.timer),j.__wsTimer__.timer=-1,j.__wsTimer__.count++):j.__wsTimer__={timer:-1,count:0},j.__wsTimer__.count<5?j.__wsTimer__.timer=setTimeout((function(){x.call(j,n)}),1e3*j.__wsTimer__.count):d.onclose()}case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),A=function(){var e=Object(u.a)(s.a.mark((function e(t){var n;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=t.socket,t.chainId,n&&Reflect.ownKeys(n).length?(void(window.socketEventMap=Object(d.a)({},c.pingpong,v)),y(),h()?(window||globalThis).looperingSocket.send():x({socket:n})):h()||g();case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),y=function(e){var t=e.socket,n=[],a=[];return Reflect.ownKeys(t).map((function(e){switch(e){case c.account:(a=t[c.account].map((function(e){return Object(b.y)(e)})))&&a.length&&(k(c.account),n=[].concat(Object(r.a)(n),Object(r.a)(a)));break;case c.order:(a=t[c.order].map((function(e){return Object(b.D)(e)})))&&a.length&&(k(c.order),n=[].concat(Object(r.a)(n),Object(r.a)(a)));break;case c.orderbook:(a=t[c.orderbook].map((function(e){return Object(b.E)(e)})))&&a.length&&(k(c.orderbook),n=[].concat(Object(r.a)(n),Object(r.a)(a)));break;case c.trade:(a=t[c.trade].map((function(e){return getTradeArg(e)})))&&a.length&&(k(c.trade),n=[].concat(Object(r.a)(n),Object(r.a)(a)));break;case c.ticker:(a=t[c.ticker].map((function(e){return getTickerArg(e)})))&&a.length&&(k(c.ticker),n=[].concat(Object(r.a)(n),Object(r.a)(a)));break;case c.candlestick:(a=t[c.candlestick].map((function(e){return getCandlestickArg(e)})))&&a.length&&(k(c.candlestick),n=[].concat(Object(r.a)(n),Object(r.a)(a)));break;case c.ammpool:(a=t[c.ammpool].map((function(e){return getAmmpoolArg(e)})))&&a.length&&(k(c.ammpool),n=[].concat(Object(r.a)(n),Object(r.a)(a)))}return n}))},k=function(e){var t,n;t=e,n={fn:w[e]},window.socketEventMap=Object(l.a)(Object(l.a)({},window.socketEventMap),{},Object(d.a)({},t,n))},w=(a={},Object(d.a)(a,c.account,(function(e){})),Object(d.a)(a,c.order,(function(e){})),Object(d.a)(a,c.orderbook,(function(e){})),Object(d.a)(a,c.trade,(function(e){})),Object(d.a)(a,c.ticker,(function(e){var t=Object(o.a)(e,11),n=t[0],a=t[1],c=t[2],r=t[3],i=t[4],s=t[5],u=t[6],l=t[7],d=t[8],b=t[9],f=t[10];j.a.sendTicker({market:n,timestamp:a,size:c,volume:r,open:i,high:s,low:u,close:l,count:d,bid:b,ask:f})})),Object(d.a)(a,c.candlestick,(function(e){})),Object(d.a)(a,c.ammpool,(function(e){var t=Object(o.a)(e,5),n=t[0],a=t[1],c=t[2],r=Object(o.a)(t[3],2),i=r[0],s=r[1],u=t[4];O.a.sendAmmPool({poolName:n,poolAddress:a,pooled:c,lp:{tokenId:i,volume:s},risky:u})})),a)}).call(this,n(67))},670:function(e,t,n){"use strict";n.d(t,"a",(function(){return p}));var a=n(12),c=n(927),r=n(1966),o=n(459),i=n(2030),s=n(100),u=n(2031),l=n(19);n(256);var d,b=n(0),f=Object(l.a)(o.a)(d||(d=Object(a.a)(["\n  background-image: url('./static/images/error_bg.png');\n  background-repeat: no-repeat;\n  background-size: contain;\n  background-position: bottom;\n  white-space: pre-wrap;\n  //h2{\n  //  position: relative;\n  //}\n"]))),p=function(e){var t=e.messageKey,n=Object(c.a)("error").t;return Object(b.jsx)(b.Fragment,{children:Object(b.jsx)(i.a,{children:Object(b.jsx)(f,{flex:1,display:"flex",alignItems:"flex-start",justifyContent:"center",flexDirection:"column",marginTop:4,height:680,maxWidth:1200,children:Object(b.jsxs)(o.a,{textAlign:"center",position:"relative",left:128,top:-64,children:[Object(b.jsx)(s.a,{component:"h2",variant:"h2",children:n(t)}),Object(b.jsx)(s.a,{marginY:2,component:"p",variant:"body1",color:"textSecondary",children:Object(b.jsxs)(r.a,{i18nKey:"labelConnectUs",children:["If you believe this is indeed a bug, please ",Object(b.jsx)(u.a,{component:"a",onClick:function(e){window.location.href=function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"report to loopring website",n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"Body Content",a=null!==(e=Object({NODE_ENV:"production",PUBLIC_URL:".",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_RPC_URL_1:"https://mainnet.eth.loopring.network",REACT_APP_MAGIC_API_KEY:"pk_test_398B82F5F0E88874",REACT_APP_API_URL:"api3.loopring.io",REACT_APP_RPC_URL_5:"https://goerli.infura.io/v3/84842078b09946638c03157f83405213",REACT_APP_TEST_INTERVAL:"4hr",REACT_APP_API_URL_UAT:"uat2.loopring.io",REACT_APP_PORTIS_DAPP_ID:"e9be171c-2b7f-4ff0-8db9-327707511ee2",REACT_APP_FORTMATIC_API_KEY:"pk_test_A6260FCBAA2EBDFB"}).CONTACT_US_EMAIL)&&void 0!==e?e:"contact@loopring.io";return"mailto:".concat(a,"?subject=").concat(t,"&body=").concat(n)}(),e.preventDefault()},children:"contact us"})," ",Object(b.jsx)("br",{})," We would appreciate your feedback"]})})]})})})})}},973:function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var a=new(n(1001).a),c={sendTicker:function(e){return a.next({tickerMap:e})},onSocket:function(){return a.asObservable()}}},974:function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var a=new(n(1001).a),c={sendAmmPool:function(e){return a.next({ammPoolMap:e})},onSocket:function(){return a.asObservable()}}},984:function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return p}));var a=n(2),c=n(6),r=n(1),o=n.n(r),i=n(126),s=n(29),u=n(222),l=n(58),d=n(124),b=n(539),f=n(382);function p(t){var n=t.pageSize,r=o.a.useState([]),p=Object(c.a)(r,2),m=p[0],j=p[1],O=o.a.useState(1),v=Object(c.a)(O,2),h=v[0],g=v[1],x=o.a.useState(-1),A=Object(c.a)(x,2),y=A[0],k=A[1],w=Object(d.c)().coinMap,T=Object(i.d)(),C=T.ammMap,I=T.status,_=T.statusUnset,E=Object(f.b)(),S=E.tickerMap,P=E.status,N=E.statusUnset,R=E.updateTickers,D=Object(b.b)(),M=(D.status,D.statusUnset,o.a.useCallback((function(e){try{var t=Object(u.b)(C);for(var n in e)t["AMM-"+n]&&(t["AMM-"+n].tradeFloat=Object(a.a)(Object(a.a)({},t["AMM-"+n].tradeFloat),e[n]));j(Object.keys(t).map((function(e){return w&&(t[e].coinAInfo=w[t[e].coinA],t[e].coinBInfo=w[t[e].coinB]),t[e]})))}catch(c){throw new s.c(Object(a.a)(Object(a.a)({},s.e.NO_TOKEN_MAP),{},{options:c}))}}),[C])),U=o.a.useCallback((function(t){-1!==y&&clearTimeout(y),k(setTimeout((function(){U(t)}),6e4)),e(R,t)}),[]),L=o.a.useCallback((function(e){if(g(e),C&&Object.keys(C).length>0){for(var t=[],a=(h-1)*n;a<Object.keys(C).length&&a<(h-1)*n+n;a++)t.push(Object.keys(C)[a]);U(t)}}),[C,n]);return o.a.useEffect((function(){C&&0!==Object.keys(C).length&&L(h)}),[]),o.a.useEffect((function(){switch(P){case"ERROR":console.log("ERROR","get ticker error,ui"),N();break;case"PENDING":break;case"DONE":N(),M(S)}}),[P,N]),o.a.useEffect((function(){switch(I){case"ERROR":console.log("ERROR","get ammMap error,ui"),_();break;case l.a.PENDING:console.log("PENDING","get ammMap error,ui");break;case l.a.DONE:_(),L(1)}}),[I,_,L]),{page:h,rawData:m,updateTickersUI:L}}}).call(this,n(342).setImmediate)},987:function(e,t,n){"use strict";n.d(t,"a",(function(){return v}));var a=n(4),c=n.n(a),r=n(23),o=n(6),i=n(1),s=n.n(i),u=n(988),l=n.n(u),d=n(111),b=n(297),f=n(13),p=n(126),m=n(124),j=n(172),O=n(117);function v(){var e=s.a.useState("PENDING"),t=Object(o.a)(e,2),n=t[0],a=t[1],i=Object(b.c)(),u=Object(m.c)(),v=Object(p.d)(),h=Object(O.a)(),g=Object(j.c)();return Object(d.a)(Object(r.a)(c.a.mark((function e(){var t,n,a;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=function(e){console.log("handleChainChanged chainId: ",e),i.updateSystem({chainId:e}),window.location.reload()},e.next=3,l()();case 3:if(!(n=e.sent)){e.next=14;break}return e.t0=Number,e.next=8,n.request({method:"eth_chainId"});case 8:e.t1=e.sent,a=(0,e.t0)(e.t1),n.on("chainChanged",(function(){t(a)})),i.updateSystem({chainId:a}),e.next=16;break;case 14:i.updateSystem({chainId:f.e.MAINNET}),console.log("web3 is not found");case 16:case"end":return e.stop()}}),e)}))),[]),s.a.useEffect((function(){switch(i.status){case"ERROR":i.statusUnset(),a("ERROR");break;case"DONE":i.statusUnset()}}),[i]),s.a.useEffect((function(){"ERROR"===v.status||"ERROR"===u.status?(v.statusUnset(),u.statusUnset(),a("ERROR")):"DONE"===v.status&&"DONE"===u.status&&(v.statusUnset(),u.statusUnset(),h.accountId&&g.updateWalletLayer1(),a("DONE"))}),[v,u]),{state:n}}},989:function(e,t,n){"use strict";var a,c,r,o,i=n(137),s=n(95),u=n(2),l=n(6),d=n(1),b=n.n(d),f=n(26),p=n(29),m=n(2009),j=n(2004),O=n(1902),v=n(4),h=n.n(v),g=n(23),x=n(927),A=n(117),y=n(445),k=n(40),w=n(111);!function(e){e.dark="dark",e.light="light"}(a||(a={})),function(e){e.en="en_US",e.cn="zh_CN"}(c||(c={})),function(e){e[e.NORMAL=0]="NORMAL",e[e.ERROR=1]="ERROR",e[e.UNKNOWN=2]="UNKNOWN"}(r||(r={})),function(e){e[e.UNKNOWN=0]="UNKNOWN",e[e.LOADING=1]="LOADING",e[e.WALLET=2]="WALLET"}(o||(o={}));var T=n(48),C=n(13),I=n(100),_=n(159),E=n(47);function S(){var e=Object(E.b)(),t=Object(x.a)("common").t;return{ShowDeposit:Object(d.useCallback)((function(n){var a=T.a.getState().account.status===k.b.NOACCOUNT;console.log("isNoAccount: ",a,t("depositTitleAndActive"));var c={isShow:n,props:{title:t(a?"depositTitleAndActive":"depositTitle"),description:"depositAndActiveDescription"}};e(Object(f.Z)(c))}),[e,t]),ShowTransfer:Object(d.useCallback)((function(t){return e(Object(f.bb)({isShow:t}))}),[e]),ShowWithdraw:Object(d.useCallback)((function(t){return e(Object(f.cb)({isShow:t}))}),[e]),ShowResetAccount:Object(d.useCallback)((function(t){return e(Object(f.ab)({isShow:t}))}),[e])}}var P=n(338),N=n.n(P),R=n(99);function D(e,t,n){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"PromiseJob",c=!0,r=function(){e()&&e().then((function(e){c?t(n?e[n]:e):console.log(a+" unmounted!")})).catch((function(e){console.error(e)}))},o=function(){c=!1};return{handler:r,cleanUp:o}}function M(e,t,n){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:void 0,c=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[],r=D(e,t,n,a),o=r.handler,i=r.cleanUp;Object(d.useEffect)((function(){return o(),function(){return i()}}),c)}function U(){var e=Object(d.useState)(),t=Object(l.a)(e,2),n=t[0],a=t[1],c=Object(R.b)();return M((function(){if(c)return c.getExchangeInfo()}),a,"exchangeInfo","useGetExchangeInfo",[c]),{exchangeInfo:n}}function L(){var e=Object(d.useState)(),t=Object(l.a)(e,2),n=t[0],a=t[1],c=Object(R.b)();return M((function(){if(c)return c.getTokens()}),a,void 0,"useGetTokens",[c]),{tokens:n}}var B=n(14),F=n(381),K=function(){var e,t=T.a.getState().walletLayer2.walletLayer2,n=T.a.getState().tokenMap.tokenMap;return t&&(e=Reflect.ownKeys(t).reduce((function(e,a){var c=t[a],r=c.total,o=c.locked,i=c.pending.withdraw,s=C.H(r).minus(C.H(o)).minus(C.H(i)).toString();return Object(u.a)(Object(u.a)({},e),{},Object(B.a)({},a,{belong:a,count:Object(F.a)(n,a,s),detail:t[a]}))}),{})),{walletMap:e}},V=n(160),W=n(124),H=n(45),Y=n(106),G=n(172),z=n(0);function q(e,t,n){var a=Object(R.c)(),c=Object(A.a)(),r=c.accountId,o=c.apiKey,i=Object(d.useState)([]),s=Object(l.a)(i,2),u=s[0],b=s[1];return Object(w.a)(Object(g.a)(h.a.mark((function c(){var i,s,u;return h.a.wrap((function(c){for(;;)switch(c.prev=c.next){case 0:if(console.log("!!!!!!!!!useCustomDCEffect useChargeFeeList:",e,r),r&&e&&n){c.next=3;break}return c.abrupt("return");case 3:return i=[],c.prev=4,s={accountId:r,tokenSymbol:e,requestType:t},c.next=8,a.getOffchainFeeAmt(s,o);case 8:(u=c.sent)&&(u.raw_data.fees.forEach((function(e,t){var a=n[e.token],c=C.H(e.fee).div(Y.c.pow(C.H(a.decimals))).toNumber();i.push({belong:e.token,fee:c})})),b(i)),console.log("response:",u),c.next=16;break;case 13:c.prev=13,c.t0=c.catch(4),Object(C.w)(c.t0);case 16:b(i);case 17:case"end":return c.stop()}}),c,null,[[4,13]])}))),[r,o,e,n]),{chargeFeeList:u}}function X(){var e=S(),t=e.ShowDeposit,n=e.ShowTransfer,a=e.ShowWithdraw,c=e.ShowResetAccount,r=Object(A.f)(),o=r.chainId,i=r.isConnected,s=r.connector,u=U().exchangeInfo,m=Object(A.a)(),j=m.account,O=m.apiKey,v=m.accountId,x=m.eddsaKey,y=Object(W.c)(),k=y.coinMap,w=y.tokenMap,I=(y.marketArray,y.marketCoins,y.marketMap,Object(V.c)()),_=Object(G.c)(),E=Object(d.useState)(void 0),P=Object(l.a)(E,2),R=P[0],D=P[1],M=Object(d.useState)(void 0),L=Object(l.a)(M,2),B=L[0],F=L[1];b.a.useEffect((function(){if(I.walletLayer2){var e=K().walletMap;D(e)}_.walletLayer1&&D(_.walletLayer1)}),[]),b.a.useEffect((function(){switch(I.status){case"ERROR":I.statusUnset();break;case"DONE":I.statusUnset();var e=K().walletMap;F(e)}}),[I.status]),b.a.useEffect((function(){switch(_.status){case"ERROR":_.statusUnset();break;case"DONE":_.statusUnset(),D(_.walletLayer1)}}),[_.status]);var Y=Object(d.useCallback)(function(){var e=Object(g.a)(h.a.mark((function e(t,n){var a,c,r,l,d,b,f,p,m,O;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(H.a.exchangeAPI&&w&&i&&s&&(null===u||void 0===u?void 0:u.exchangeAddress)&&(null===u||void 0===u?void 0:u.depositAddress)){e.next=3;break}return console.log("exchangeInfo:".concat(u," deposit exit!!!!!")),e.abrupt("return");case 3:return e.prev=3,c=w[t],e.next=7,s.getProvider();case 7:return r=e.sent,l=new N.a(r),d=j.connectName===C.f.Injected,console.log("sendByMetaMask:",d),d=!0,b=null!==(a=T.a.getState().system.gasPrice)&&void 0!==a?a:30,f=35e4,e.next=16,C.C(l,j.accAddr);case 16:return p=e.sent,console.log("gasPrice:",b),console.log("account.connectName:",j.connectName," tokenInfo:",c),e.next=21,C.u(l,j.accAddr,c.address,null===u||void 0===u?void 0:u.depositAddress,b,f,o,p,d);case 21:return m=e.sent,console.log("response:",m),0,e.next=26,C.v(l,j.accAddr,null===u||void 0===u?void 0:u.exchangeAddress,c,n,0,b,f,o,p+1,d);case 26:O=e.sent,console.log("response2:",O),e.next=33;break;case 30:e.prev=30,e.t0=e.catch(3),Object(C.w)(e.t0);case 33:case"end":return e.stop()}}),e,null,[[3,30]])})));return function(t,n){return e.apply(this,arguments)}}(),[o,i,s,j,w,u,H.a.exchangeAPI]),z=Object(d.useCallback)(function(){var e=Object(g.a)(h.a.mark((function e(t,n){var a,c,r,i,l,d;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log("withdraw apiKey:",O," exchangeInfo:",u," exchangeAddr:",u.exchangeAddress),H.a.userAPI&&j&&j.accountId&&j.accAddr&&s&&o&&O&&u&&u.exchangeAddress){e.next=4;break}return console.log("return directly!!!!!",j,s,o,O,u),e.abrupt("return");case 4:return"5500000000000000000","5500000000000000000",console.log("exchangeAddress:",u.exchangeAddress),e.prev=7,a={accountId:j.accountId,sellTokenId:1},e.next=11,H.a.userAPI.getNextStorageId(a,O);case 11:return c=e.sent,r={exchange:u.exchangeAddress,owner:j.accAddr,to:j.accAddr,accountId:j.accountId,storageId:c.offchainId,token:{tokenId:"1",volume:"100000000000000000000"},maxFee:{tokenId:"1",volume:"9400000000000000000"},extraData:"",minGas:0,validUntil:C.q},e.next=15,s.getProvider();case 15:return i=e.sent,l=new N.a(i),e.next=19,H.a.userAPI.submitOffchainWithdraw(r,l,o,C.f.Injected,j.eddsaKey,O,!1);case 19:d=e.sent,console.log(d),e.next=26;break;case 23:e.prev=23,e.t0=e.catch(7),Object(C.w)(e.t0);case 26:case"end":return e.stop()}}),e,null,[[7,23]])})));return function(t,n){return e.apply(this,arguments)}}(),[O,j,s,u,o,H.a.userAPI]),X=Object(d.useCallback)(function(){var e=Object(g.a)(h.a.mark((function e(t){var n,a,c,r,i,l,d,b,f,p,m=arguments;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=m.length>1&&void 0!==m[1]?m[1]:"0xb6AdaC3e924B4985Ad74646FEa3610f14cDFB79c",H.a.userAPI&&H.a.exchangeAPI&&s&&O&&o&&v&&(null===j||void 0===j?void 0:j.accAddr)){e.next=3;break}return e.abrupt("return");case 3:return a={accountId:v,sellTokenId:1},e.next=6,H.a.userAPI.getNextStorageId(a,O);case 6:return c=e.sent,console.log("amt: ".concat(t," storageId:").concat(JSON.stringify(c))),e.prev=8,e.next=11,s.getProvider();case 11:return r=e.sent,i=new N.a(r),l=j.connectName,l=C.f.Injected,e.next=17,H.a.exchangeAPI.getAccount({owner:n});case 17:return d=e.sent,b=0,d&&(b=d.accInfo.accountId),f={exchange:u.exchangeAddress,payerAddr:j.accAddr,payerId:v,payeeAddr:n,payeeId:b,storageId:c.offchainId,token:{tokenId:"1",volume:"100000000000000000000"},maxFee:{tokenId:"1",volume:"9400000000000000000"},validUntil:C.q},console.log("request2:".concat(JSON.stringify(f))),e.next=24,H.a.userAPI.submitInternalTransfer(f,i,o,l,x,O,!1);case 24:p=e.sent,console.log(p),e.next=31;break;case 28:e.prev=28,e.t0=e.catch(8),Object(C.w)(e.t0);case 31:case"end":return e.stop()}}),e,null,[[8,28]])})));return function(t){return e.apply(this,arguments)}}(),[O,v,j,s,u,o,x,H.a.userAPI,H.a.exchangeAPI]),J=Object(d.useState)({belong:void 0,tradeValue:0,balance:0}),Z=Object(l.a)(J,2),Q=Z[0],$=Z[1],ee={tradeData:{belong:void 0},coinMap:k,walletMap:R,depositBtnStatus:f.K.AVAILABLE,onDepositClick:function(e){console.log("1. onDepositClick",Q),Q&&Q.belong&&Y(Q.belong.toString(),Q.tradeValue),t(!1)},handlePanelEvent:function(){var e=Object(g.a)(h.a.mark((function e(t,n){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e){var n;(null===t||void 0===t||null===(n=t.tradeData)||void 0===n?void 0:n.belong)?(Q!==t.tradeData&&$(t.tradeData),se(t.tradeData.belong)):$({belong:void 0,tradeValue:0,balance:0}),e()})));case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()},te=Object(d.useState)({belong:void 0,tradeValue:0,balance:0}),ne=Object(l.a)(te,2),ae=ne[0],ce=ne[1],re=Object(d.useState)(""),oe=Object(l.a)(re,2),ie=oe[0],se=oe[1],ue=Object(d.useState)(p.n.Standard),le=Object(l.a)(ue,2),de=le[0],be=(le[1],q(ie,C.l.OFFCHAIN_WITHDRAWAL,w).chargeFeeList),fe={tradeData:{belong:void 0},coinMap:k,walletMap:B,withdrawBtnStatus:f.K.AVAILABLE,onWithdrawClick:function(e){console.log("Swap button click",ae),ae&&ae.belong&&z(ae.belong.toString(),ae.tradeValue),a(!1)},handlePanelEvent:function(){var e=Object(g.a)(h.a.mark((function e(t,n){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("withdrawProps handlePanelEvent: ",t,n),console.log("withdrawProps withdrawValue: ",ae),e.abrupt("return",new Promise((function(e){var n;(null===t||void 0===t||null===(n=t.tradeData)||void 0===n?void 0:n.belong)?(ae!==t.tradeData&&ce(t.tradeData),se(t.tradeData.belong)):ce({belong:void 0,tradeValue:0,balance:0}),e()})));case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),withdrawType:de,withdrawTypes:p.o,chargeFeeToken:"ETH",chargeFeeTokenList:be,handleOnAddressChange:function(e){console.log("handleOnAddressChange",e)},handleAddressError:function(e){return{error:!0,message:"any error"}}},pe=Object(d.useState)({belong:void 0,tradeValue:0,balance:0}),me=Object(l.a)(pe,2),je=me[0],Oe=me[1],ve=Object(d.useState)(""),he=Object(l.a)(ve,2),ge=he[0],xe=he[1],Ae=q(ge,C.l.TRANSFER,w).chargeFeeList,ye={tradeData:{belong:void 0},coinMap:k,walletMap:B,transferBtnStatus:f.K.AVAILABLE,onTransferClick:function(e){console.log("onTransferClick:",je),je&&je.belong&&X(je.tradeValue),n(!1)},handlePanelEvent:function(){var e=Object(g.a)(h.a.mark((function e(t,n){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e){var n;(null===t||void 0===t||null===(n=t.tradeData)||void 0===n?void 0:n.belong)?(je!==t.tradeData&&Oe(t.tradeData),xe(t.tradeData.belong)):Oe({belong:void 0,tradeValue:0,balance:0}),e()})));case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),chargeFeeToken:"ETH",chargeFeeTokenList:Ae,handleOnAddressChange:function(e){console.log("handleOnAddressChange",e)},handleAddressError:function(e){return{error:!0,message:"any error"}}},ke=Object(d.useState)({belong:void 0,tradeValue:0,balance:0}),we=Object(l.a)(ke,2),Te=we[0],Ce=we[1];return{depositProps:ee,withdrawProps:fe,transferProps:ye,resetProps:{tradeData:{belong:void 0},coinMap:k,walletMap:B,resetBtnStatus:f.K.AVAILABLE,onResetClick:function(e){console.log("onResetClick",Te),Te&&Te.belong,c(!1)},handlePanelEvent:function(){var e=Object(g.a)(h.a.mark((function e(t,n){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e){var n;(null===t||void 0===t||null===(n=t.tradeData)||void 0===n?void 0:n.belong)?Te!==t.tradeData&&Ce(t.tradeData):Ce({belong:void 0,tradeValue:0,balance:0}),e()})));case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),fee:{count:234,price:123}},ammProps:{ammDepositData:{coinA:{belong:"ETH",balance:.3,tradeValue:0},coinB:{belong:"LRC",balance:1e3,tradeValue:0},slippage:""},ammWithdrawData:{coinA:{belong:"ETH",balance:.3,tradeValue:0},coinB:{belong:"LRC",balance:1e3,tradeValue:0},slippage:""},ammCalcData:{myCoinA:{belong:"ETH",balance:1e3,tradeValue:0},myCoinB:{belong:"LRC",balance:1e3,tradeValue:0},AtoB:50,coinInfoMap:k,slippage:.5,fee:"1%"},handleDepositEvent:function(e,t){console.log("handleDepositEvent",e,t)},handleWithDrawEvent:function(e,t){console.log("handleWithDrawEvent",e,t)},onAmmWithdrawClick:function(e){console.log("onAmmWithdrawClick",e)},onAmmDepositClick:function(e){console.log("onAmmDepositClick",e)}},swapProps:{tradeData:void 0,tradeCalcData:{coinSell:"ETH",coinBuy:"LRC",BtoS:0,StoB:0,sellCoinInfoMap:k,buyCoinInfoMap:k,walletMap:{},slippage:.5,priceImpact:"12",minimumReceived:"1%",fee:"1%"},onSwapClick:function(e){console.log("Swap button click",e)},handleSwapPanelEvent:function(){var e=Object(g.a)(h.a.mark((function e(t,n){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:console.log(t,n);case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()}}}var J=n(222),Z=n(33),Q=n(1886),$=n(1897),ee=n(459),te=["onClose","open","t"],ne=Object(Q.a)("common")((function(e){var t=e.onClose,n=e.open,a=e.t,c=Object(Z.a)(e,te);return Object(z.jsx)($.a,{open:n,onClose:t,"aria-labelledby":"Account information","aria-describedby":"show layer2 address, unlock/locked loopring wallet, copy address",children:Object(z.jsx)(f.s,{style:{boxShadow:"24"},children:Object(z.jsxs)(ee.a,{paddingTop:3,paddingBottom:3,display:"flex",flexDirection:"column",minWidth:"var(--modal-width)",children:[Object(z.jsx)(f.r,Object(u.a)({onClose:t},Object(u.a)(Object(u.a)({},c),{},{t:a}))),Object(z.jsx)(f.a,Object(u.a)({},c))]})})})})),ae=function(e){var t=Object.assign({},e),n=X(),c=n.depositProps,r=n.withdrawProps,o=n.transferProps,i=n.resetProps,v=n.ammProps,P=n.swapProps,N=Object(s.g)(),R=function(){var e=Object(x.a)(["common","layout"]),t=e.i18n,n=e.t,c=Object(f.hb)(),r=c.setTheme,o=c.themeMode,i=c.language,s=c.setLanguage,d=S().ShowDeposit,m=Object(f.gb)(),j=m.modals,O=j.isShowAccountInfo,v=j.isShowConnect,P=m.setShowConnect,N=m.setShowAccountInfo,R=b.a.useState(!1),D=Object(l.a)(R,2),M=(D[0],D[1],b.a.useReducer((function(e){return!e}),!1)[1]),U=Object(A.a)().account,L=Object(A.e)(),B=L.lock,F=L.unlock,K=Object(A.c)().connect,V=Object(_.c)().etherscanUrl,W=(Object(E.b)(),[Object(u.a)(Object(u.a)({},p.p[0]),{},{handleSelect:function(){console.log("try to connect to ",C.f.Injected),K(C.f.Injected,!0),P({isShow:!1})}}),Object(u.a)(Object(u.a)({},p.p[1]),{},{handleSelect:function(){K(C.f.WalletConnect,!0),P({isShow:!1})}}),Object(u.a)(Object(u.a)({},p.p[2]),{},{handleSelect:function(){K(C.f.Ledger,!0),P({isShow:!1})}}),Object(u.a)(Object(u.a)({},p.p[3]),{},{handleSelect:function(){K(C.f.Trezor,!0),P({isShow:!1})}})]),H=b.a.useState(void 0),Y=Object(l.a)(H,2),G=Y[0],q=Y[1],X=b.a.useCallback(Object(g.a)(h.a.mark((function e(){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:console.log("onNotification click");case 1:case"end":return e.stop()}}),e)}))),[]),J=b.a.useCallback(Object(g.a)(h.a.mark((function e(){var t;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=T.a.getState().account,console.log("onWalletBtnConnect click: ".concat(t.status)),e.t0=t.status,e.next=e.t0===k.b.UNCONNNECTED?5:e.t0===k.b.NOACCOUNT||e.t0===k.b.CONNECTED||e.t0===k.b.LOCKED||e.t0===k.b.ACTIVATED?7:9;break;case 5:return P({isShow:!0}),e.abrupt("break",10);case 7:return N({isShow:!0}),e.abrupt("break",10);case 9:return e.abrupt("break",10);case 10:case"end":return e.stop()}}),e)}))),[P,B,F,d,N]),Z=b.a.useCallback(function(){var e=Object(g.a)(h.a.mark((function e(t){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t===a.dark?r(a.light):r(a.dark);case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[r]),Q=function(e){s(e)};Object(w.a)((function(){p.u[p.a.WalletConnect]=Object(u.a)(Object(u.a)({},p.u[p.a.WalletConnect]),{},{handleClick:J}),p.u[p.a.Theme]=Object(u.a)(Object(u.a)({},p.u[p.a.Theme]),{},{themeMode:o,handleClick:Z}),p.u[p.a.Language]=Object(u.a)(Object(u.a)({},p.u[p.a.Language]),{},{handleChange:Q})}),[o,i,t,J,Z,Q,X,n]);var $=function(e){var t=e.onClick;return Object(z.jsx)(f.i,{className:"unlock",startIcon:Object(z.jsx)(p.i,{fontSize:"large"}),onClick:function(e){t(e)},variant:"outlined",children:Object(z.jsxs)(I.a,{variant:"body2",marginTop:.5,children:["   ",n("labelUnLockLayer2")," "]})})},ee=b.a.useCallback((function(e){B(U)}),[U]),te=b.a.useCallback((function(e){F(U)}),[U]),ne=function(e){var t=e.onClick;return Object(z.jsx)(f.i,{className:"lock",startIcon:Object(z.jsx)(p.k,{fontSize:"large"}),onClick:function(e){t(e)},variant:"outlined",children:Object(z.jsxs)(I.a,{variant:"body2",marginTop:.5,children:["  ",n("labelLockLayer2")," "]})})};return Object(w.a)((function(){if(!U)return console.log("account"+U+"* exit"),void q(void 0);var e=U.status,t=Object(y.b)(null===U||void 0===U?void 0:U.accAddr),a=function(e){var n,a=e.status;p.s[p.g.Layer2]=Object(u.a)(Object(u.a)({},p.s[p.g.Layer2]),{},{status:p.h.default}),a===k.b.ACTIVATED?(n={addressShort:t||"",address:null===U||void 0===U?void 0:U.accAddr,level:"VIP 1",etherscanLink:V+(null===U||void 0===U?void 0:U.accAddr),mainBtn:Object(z.jsx)(ne,{onClick:function(e){ee(e)}}),connectBy:""},N({isShow:!1})):a===k.b.LOCKED?(n={addressShort:t||"",address:null===U||void 0===U?void 0:U.accAddr,level:"VIP 1",etherscanLink:V+(null===U||void 0===U?void 0:U.accAddr),mainBtn:Object(z.jsx)($,{onClick:function(e){te(e)}}),connectBy:""},N({isShow:!0})):a===k.b.UNACTIVATED||a===k.b.NOACCOUNT||a===k.b.DEPOSITING||a===k.b.DEPOSIT_TO_CONFIREM||a===k.b.ARPROVING||a===k.b.APPROV_TO_CONFIRM?(n={addressShort:t||"",address:null===U||void 0===U?void 0:U.accAddr,level:"VIP 1",etherscanLink:V+(null===U||void 0===U?void 0:U.accAddr),connectBy:""},N({isShow:!1})):N({isShow:!1}),a===k.b.NOACCOUNT&&(n.onLock=function(){N({isShow:!1}),d(!0)}),q(n)};switch(e){case k.b.UNCONNNECTED:p.u[p.a.WalletConnect]=Object(u.a)(Object(u.a)({},p.u[p.a.WalletConnect]),{},{label:n("labelConnectWallet"),status:p.m.default}),p.s[p.g.Layer2]=Object(u.a)(Object(u.a)({},p.s[p.g.Layer2]),{},{status:p.h.hidden}),N({isShow:!1});break;case k.b.LOCKED:p.u[p.a.WalletConnect]=Object(u.a)(Object(u.a)({},p.u[p.a.WalletConnect]),{},{label:t,status:p.m.connect}),a({status:e});break;case k.b.ACTIVATED:p.u[p.a.WalletConnect]=Object(u.a)(Object(u.a)({},p.u[p.a.WalletConnect]),{},{label:t,status:p.m.unlock}),a({status:e});break;case k.b.UNACTIVATED:case k.b.NOACCOUNT:p.u[p.a.WalletConnect]=Object(u.a)(Object(u.a)({},p.u[p.a.WalletConnect]),{},{label:t,status:p.m.noAccount}),a({status:e});break;case k.b.DEPOSITING:case k.b.DEPOSIT_TO_CONFIREM:case k.b.ARPROVING:case k.b.APPROV_TO_CONFIRM:p.u[p.a.WalletConnect]=Object(u.a)(Object(u.a)({},p.u[p.a.WalletConnect]),{},{label:t,status:p.m.accountPending}),a({status:e})}M()}),[U,V,q]),{headerToolBarData:p.u,headerMenuData:p.s,gatewayList:W,isShowConnect:v,isShowAccountInfo:O,setShowAccountInfo:N,setShowConnect:P,account:U,accountInfoProps:G}}(),D=R.headerToolBarData,M=R.headerMenuData,L=R.gatewayList,B=R.isShowConnect,F=R.isShowAccountInfo,K=R.setShowAccountInfo,V=R.setShowConnect,W=R.account,H=R.accountInfoProps,Y=(U().exchangeInfo,Object(A.d)().disconnect),G=Object(d.useCallback)((function(){K({isShow:!1}),V({isShow:!0})}),[V,K]),q=Object(d.useState)(!1),Z=Object(l.a)(q,2),Q=Z[0],$=Z[1],ee=Object(d.useState)(!1),te=Object(l.a)(ee,2),ae=te[0],ce=te[1],re=Object(x.a)("commom").t,oe=function(){ce(!1)};return Object(z.jsxs)(z.Fragment,{children:[Object(z.jsx)(m.a,{open:ae,autoHideDuration:2500,onClose:oe,children:Object(z.jsx)(j.a,{onClose:oe,severity:"success",children:re("Address Copied to Clipboard!")})}),Object(z.jsx)(f.u,{open:Q,onClose:function(){return $(!1)},title:"ETH Address",description:W.accAddr,url:W.accAddr}),Object(z.jsx)(f.t,{transferProps:o,withDrawProps:r,depositProps:c,resetProps:i,ammProps:v,swapProps:P}),Object(z.jsxs)(f.o,{children:[!1,!1,Object(z.jsx)(f.n,Object(u.a)(Object(u.a)({},t),{},{headerMenuData:M,headerToolBarData:D,selected:"/"===N.pathname?p.t:N.pathname}))]}),Object(z.jsx)(O.a,{}),Object(z.jsx)(f.v,Object(u.a)({},Object(u.a)(Object(u.a)({},t),{},{gatewayList:L,open:B.isShow,onClose:function(){return V({isShow:!1})}}))),Object(z.jsx)(ne,Object(u.a)({open:F.isShow,onClose:function(){K({isShow:!1})},onCopy:function(){Object(J.a)(W.accAddr),ce(!0)},onViewQRCode:function(){$(!0)},onDisconnect:function(){Y(),K({isShow:!1})},onSwitch:G},Object(u.a)(Object(u.a)({},H),t)))]})},ce=n(299),re=n(1004),oe=n(35),ie=n(382),se=16;function ue(e,t,n){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:se,c=e.target;return c.clientHeight+c.scrollTop===c.scrollHeight&&t*a>=n}var le=Object(ce.a)(re.a,{target:"e19jzbou1"})("& .MuiGrid-root:not(:last-of-type)>div{margin-right:",(function(e){return 3*e.theme.unit}),"px;}"),de=Object(ce.a)(re.a,{target:"e19jzbou0"})("&{background-color:",(function(e){return e.theme.colorBase.background().default}),";",(function(e){return e.theme.border.defaultFrame({c_key:"blur",d_R:1})}),";.rdg{height:100%;}}",(function(e){var t=e.theme;return Object(f.G)({pLeft:3*t.unit,pRight:3*t.unit})}),";"),be=Object(Q.a)("common")((function(e){var t=function(){var e=Object(ie.b)(),t=e.tickerMap,n=e.status,a=e.statusUnset,c=e.updateTickers,r=T.a.getState().tokenMap,o=r.marketArray,i=r.coinMap,s=o?o.slice(0,4):["LRC-ETH","LRC-ETH","LRC-ETH","LRC-ETH"],d=o?o.filter((function(e){return-1===s.findIndex((function(t){return t===e}))})):[],f=b.a.useState([]),p=Object(l.a)(f,2),m=p[0],j=p[1],O=b.a.useState([]),v=Object(l.a)(O,2),x=v[0],A=v[1],y=b.a.useState([]),k=Object(l.a)(y,2),w=(k[0],k[1]),C=b.a.useState([0,2]),I=Object(l.a)(C,2),_=I[0],E=I[1],S=b.a.useCallback((function(e,t){if(d){var n=d.slice(e*se,t*se),a=n.slice(0,se);w(a),E([e,t]),0===e&&(n=s.concat(n)),c(n)}}),[o,se,s]);b.a.useEffect((function(){var e=Object(l.a)(_,2),t=e[0],n=e[1];S(t,n)}),[]),b.a.useEffect((function(){switch(n){case"ERROR":console.log("ERROR","get ticker error,ui"),a();break;case"PENDING":break;case"DONE":a(),P(t)}}),[n,a]);var P=b.a.useCallback((function(e){var t=[],n=Reflect.ownKeys(e).reduce((function(n,a){var c=a.match(/(\w+)-(\w+)/i),r=Object(l.a)(c,3),o=r[1],i=r[2],d=Object(u.a)(Object(u.a)({},e[a]),{},{pair:{coinA:o,coinB:i}});return-1!==s.findIndex((function(e){return e===a}))&&t.push(Object(J.b)(d)),n.push(d),n}),[]);if(j([].concat(Object(oe.a)(m),Object(oe.a)(n))),0===_[0]&&t.length>0){for(;t.length<4;)t.push(Object(J.b)(t[0]));var a=t.reduce((function(e,t){if(i){var n=t.pair,a=n.coinA,c=n.coinB,r={tradeFloat:t,coinAInfo:i[a],coinBInfo:i[c]};e.push(r)}return e}),[]);A(a)}}),[m,_]),N=b.a.useCallback(function(){var e=Object(g.a)(h.a.mark((function e(t){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:ue(t,_[1],d.length,se);case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[_,se,n]);return{tickList:m,recommendations:x,handleScroll:N}}(),n=t.recommendations,a=(t.handleScroll,t.tickList);return Object(z.jsxs)(ee.a,{display:"flex",flexDirection:"column",flex:1,height:770,children:[Object(z.jsx)(le,{container:!0,children:n.map((function(t,n){return Object(z.jsx)(re.a,{item:!0,xs:3,children:Object(z.jsx)(f.p,Object(u.a)({},Object(u.a)(Object(u.a)({},t),e)))},t.coinAInfo+t.coinBInfo+n)}))}),Object(z.jsx)(de,{container:!0,marginY:3,paddingY:2,flex:1,children:Object(z.jsx)(re.a,{item:!0,xs:12,display:"flex",children:Object(z.jsx)(f.A,Object(u.a)({onVisibleRowsChange:function(e){console.log(e)},rawData:a},Object(u.a)({},e)))})})]})})),fe=n(12),pe=n(10),me=n(508),je=[{value:f.j.Trend,key:f.j.Trend,label:"label"+f.j.Trend},{value:f.j.Depth,key:f.j.Depth,label:"label"+f.j.Depth}];var Oe,ve,he,ge,xe,Ae,ye=["props","coinAInfo","coinBInfo","tradeFloat","marketArray","t"],ke=function(e){e.props;var t=e.coinAInfo,n=e.coinBInfo,a=e.tradeFloat,c=e.marketArray,r=e.t,o=Object(Z.a)(e,ye),i=function(e,t,n,a,c){var r=je.map((function(e){var t=e.value,n=e.label,a=e.key;return{value:t,tlabel:c(n),key:a,JSX:Object(z.jsx)(z.Fragment,{children:c(n)})}})),o=Object(C.B)(a,null===t||void 0===t?void 0:t.name,null===n||void 0===n?void 0:n.name),i=o.market,s=o.amm,u=Object(d.useState)(f.j.Trend),b=Object(l.a)(u,2),p=b[0],m=b[1],j=Object(d.useState)(pe.e.D1),O=Object(l.a)(j,2),v=O[0],x=(O[1],Object(d.useState)(void 0)),A=Object(l.a)(x,2),y=A[0],k=A[1],T=Object(d.useCallback)((function(e,t){k(void 0),m(t)}),[k,m]),I=Object(R.b)(),_=Object.keys(pe.e).reduce((function(e,t){var n={value:pe.e[t],key:pe.e[t],label:"label"+pe.e[t]};return e.push({value:n.value,tlabel:c(n.label?n.label:n.key),key:n.key,JSX:Object(z.jsx)(z.Fragment,{children:c(n.label?n.label:n.key)})}),e}),[]);return Object(w.a)(Object(g.a)(h.a.mark((function e(){var t,n,a,c,r,o,u,l;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=!0,I&&i&&s){e.next=3;break}return e.abrupt("return");case 3:if(p!==f.j.Trend){e.next=17;break}return n={market:s,interval:C.o.min15,limit:96},e.prev=5,e.next=8,I.getCandlestick(n);case 8:a=e.sent,t&&(c=a.candlesticks.map((function(e){return{timeStamp:e.timestamp,low:e.low,high:e.high,open:e.open,close:e.close,volume:e.quoteVol}})),console.log("useBasicInfo amm: ".concat(s," candlesticks originData: "),c),k(c)),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(5),Object(C.w)(e.t0,"ChartPanel getCandlestick");case 15:e.next=30;break;case 17:return r={market:i},e.prev=18,e.next=21,I.getMixDepth(r);case 21:o=e.sent,u=o.depth,console.log("useBasicInfo depth:",u),t&&(l={bidsPrices:u.bids_prices,bidsAmtTotals:u.bids_amtTotals,asksPrices:u.asks_prices,asksAmtTotals:u.asks_amtTotals},k(l)),e.next=30;break;case 27:e.prev=27,e.t1=e.catch(18),Object(C.w)(e.t1);case 30:return e.abrupt("return",(function(){t=!1}));case 31:case"end":return e.stop()}}),e,null,[[5,12],[18,27]])}))),[I,s,i,p]),{chartUnit:v,chartType:p,tgItemJSXs:r,tgItemJSXsPriceChart:_,handleChange:T,originData:y}}(0,t,n,c,r),s=i.chartType,b=i.tgItemJSXs,p=i.tgItemJSXsPriceChart,m=i.handleChange,j=i.originData,O=Object(f.hb)().upColor;return Object(z.jsxs)(z.Fragment,{children:[Object(z.jsx)(re.a,{item:!0,xs:8,children:Object(z.jsx)(me.d,Object(u.a)({},Object(u.a)(Object(u.a)({coinAInfo:t,coinBInfo:n},o),{},{t:r,tradeFloat:a})))}),Object(z.jsx)(re.a,{item:!0,xs:4,display:"flex",justifyContent:"flex-end",alignItems:"flex-end",children:Object(z.jsx)(f.I,Object(u.a)(Object(u.a)({exclusive:!0},Object(u.a)(Object(u.a)({},o),{},{t:r,tgItemJSXs:b,value:s})),{},{handleChange:m}))}),Object(z.jsx)(re.a,{item:!0,xs:12,children:Object(z.jsx)(ee.a,{minHeight:256,maxHeight:256,display:"block",style:{height:"100%",width:"100%"},children:Object(z.jsx)(f.C,{type:s,data:null!==j&&void 0!==j?j:[],riseColor:O,handleMove:function(){}})})}),Object(z.jsx)(re.a,{item:!0,xs:12,height:24,display:"flex",justifyContent:"flex-end",children:Object(z.jsx)(f.I,Object(u.a)(Object(u.a)({exclusive:!0},Object(u.a)(Object(u.a)({},o),{},{t:r,tgItemJSXs:p,value:pe.e.D1,size:"small"})),{},{handleChange:function(){}}))})]})},we=n(2002),Te=n(2029),Ce=n(2008),Ie=n(19),_e=Object(Ie.a)(ee.a)(Oe||(Oe=Object(fe.a)(["\n  width: 100%;\n  height: 100%;\n  flex: 1;\n  background-color: ",";\n  border-radius: ","px;\n  padding: 20px;\n\n  .tableWrapper {\n    margin-top: ","px;\n    border: 1px solid ",";\n    border-radius: ","px;\n    padding: 26px;\n  }\n"])),(function(e){return e.theme.colorBase.background().default}),(function(e){return e.theme.unit}),(function(e){return 1.5*e.theme.unit}),(function(e){return e.theme.colorBase.borderColor}),(function(e){return e.theme.unit})),Ee=function(e){return{id:"simple-tab-".concat(e),"aria-controls":"simple-tabpanel-".concat(e)}},Se=Ie.a.div(ve||(ve=Object(fe.a)(["\n          position: relative;\n          width: 100%;\n          margin-top: ","px;\n        "])),(function(e){return 4*e.theme.unit})),Pe=Object(Ie.a)(f.m)(he||(he=Object(fe.a)(["\n          position: absolute;\n          top: 0;\n          right: ","px;\n          margin: ","px 0 0 0;\n        "])),(function(e){return e.theme.unit}),(function(e){return e.theme.unit})),Ne=Object(Q.a)("common")((function(e){var t=e.tradeArray,n=e.myTradeArray,a=e.t,c=Object(d.useState)(!1),r=Object(l.a)(c,2),o=r[0],i=r[1],s=Object(d.useState)(1),b=Object(l.a)(s,2),p=b[0],m=b[1];return Object(z.jsxs)(Se,{children:[Object(z.jsx)(Pe,{control:Object(z.jsx)(Ce.a,{checked:o,size:"small",checkedIcon:Object(z.jsx)(pe.h,{}),icon:Object(z.jsx)(pe.f,{}),color:"default",onChange:function(){i((function(e){return!e}))}}),label:a("labelTradePanelHideOtherPairs")}),Object(z.jsxs)(we.a,{value:p,onChange:function(e,t){m(t)},"aria-label":"tabs switch",children:[Object(z.jsx)(Te.a,Object(u.a)({label:a("labelMyTrade")},Ee(0))),Object(z.jsx)(Te.a,Object(u.a)({label:a("labelRecent")},Ee(1)))]}),Object(z.jsx)(_e,{marginTop:2,children:0===p?Object(z.jsx)(f.L,{rawData:n}):Object(z.jsx)(f.L,{rawData:t})})]})})),Re=n(627),De=n(126),Me=n(114),Ue=void 0;!function(e){e[e.UNKNOWN=0]="UNKNOWN",e[e.UNCONNNECTED=1]="UNCONNNECTED",e[e.CONNECTED=2]="CONNECTED",e[e.NOACCOUNT=3]="NOACCOUNT",e[e.DEPOSITING=4]="DEPOSITING",e[e.DEPOSIT_TO_CONFIREM=5]="DEPOSIT_TO_CONFIREM",e[e.UNACTIVATED=6]="UNACTIVATED",e[e.ARPROVING=7]="ARPROVING",e[e.APPROV_TO_CONFIRM=8]="APPROV_TO_CONFIRM",e[e.LOCKED=9]="LOCKED",e[e.ACTIVATED=10]="ACTIVATED",e[e.DEFAULT=11]="DEFAULT"}(Ae||(Ae={}));var Le=function(e){var t,n;switch(T.a.getState().account.status){case k.b.UNKNOWN:var a=e[Ae.UNKNOWN]?e[Ae.UNKNOWN]:[],c=Object(l.a)(a,2);return t=c[0],n=c[1],"function"===typeof t?t.call(Ue,n):void 0;case k.b.UNCONNNECTED:var r=e[Ae.UNCONNNECTED]?e[Ae.UNCONNNECTED]:[],o=Object(l.a)(r,2);if(t=o[0],n=o[1],"function"===typeof t)return t.call(Ue,n);break;case k.b.CONNECTED:var i=e[Ae.CONNECTED]?e[Ae.CONNECTED]:[],s=Object(l.a)(i,2);if(t=s[0],n=s[1],"function"===typeof t)return t.call(Ue,n);break;case k.b.NOACCOUNT:var u=e[Ae.NOACCOUNT]?e[Ae.NOACCOUNT]:[],d=Object(l.a)(u,2);if(t=d[0],n=d[1],"function"===typeof t)return t.call(Ue,n);break;case k.b.DEPOSITING:var b=e[Ae.DEPOSITING]?e[Ae.DEPOSITING]:[],f=Object(l.a)(b,2);if(t=f[0],n=f[1],"function"===typeof t)return t.call(Ue,n);break;case k.b.DEPOSIT_TO_CONFIREM:var p=e[Ae.DEPOSIT_TO_CONFIREM]?e[Ae.DEPOSIT_TO_CONFIREM]:[],m=Object(l.a)(p,2);if(t=m[0],n=m[1],"function"===typeof t)return t.call(Ue,n);break;case k.b.UNACTIVATED:var j=e[Ae.UNACTIVATED]?e[Ae.UNACTIVATED]:[],O=Object(l.a)(j,2);if(t=O[0],n=O[1],"function"===typeof t)return t.call(Ue,n);break;case k.b.ARPROVING:var v=e[Ae.ARPROVING]?e[Ae.ARPROVING]:[],h=Object(l.a)(v,2);if(t=h[0],n=h[1],"function"===typeof t)return t.call(Ue,n);break;case k.b.APPROV_TO_CONFIRM:var g=e[Ae.APPROV_TO_CONFIRM]?e[Ae.APPROV_TO_CONFIRM]:[],x=Object(l.a)(g,2);if(t=x[0],n=x[1],"function"===typeof t)return t.call(Ue,n);break;case k.b.LOCKED:var A=e[Ae.LOCKED]?e[Ae.LOCKED]:[],y=Object(l.a)(A,2);if(t=y[0],n=y[1],"function"===typeof t)return t.call(Ue,n);break;case k.b.ACTIVATED:var w=e[Ae.ACTIVATED]?e[Ae.ACTIVATED]:[],C=Object(l.a)(w,2);if(t=C[0],n=C[1],"function"===typeof t)return t.call(Ue,n)}var I=e[Ae.DEFAULT]?e[Ae.DEFAULT]:[],_=Object(l.a)(I,2);if(t=_[0],n=_[1],"function"===typeof t)return t.call(Ue,n)},Be=(ge={},Object(B.a)(ge,Ae.UNCONNNECTED,[function(){return"labelConnectWallet"}]),Object(B.a)(ge,Ae.DEFAULT,[function(){return"depositTitleAndActive"}]),Object(B.a)(ge,Ae.ACTIVATED,[function(){}]),Object(B.a)(ge,Ae.LOCKED,[function(){return"labelUnLock"}]),ge),Fe=(xe={},Object(B.a)(xe,Ae.UNCONNNECTED,[function(){T.a.dispatch(Object(f.Y)({isShow:!0}))}]),Object(B.a)(xe,Ae.DEFAULT,[function(){T.a.dispatch(Object(f.Z)({isShow:!0}))}]),Object(B.a)(xe,Ae.LOCKED,[function(){T.a.dispatch(Object(f.X)({isShow:!0}))}]),xe);function Ke(e){var t=e.coinKey,n=e._tradeCalcData,a=e.tokenMap,c=e.coinMap;if(t){var r=t.match(/(\w+)-(\w+)/i),o=Object(l.a)(r,3),i=(o[0],o[1]),s=o[2];if(i&&c&&c[i]&&(n.coinSell=i),i!==s&&s&&-1!==a[i].tradePairs.findIndex((function(e){return e===s})))return n.coinBuy=s,n}return n.coinSell&&""!==n.coinSell?(n.coinBuy&&""!==n.coinBuy&&"undefined"!==n.coinBuy||(a&&a[n.coinSell].tradePairs?n.coinBuy=a[n.coinSell].tradePairs[0]:(n.coinSell="LRC",n.coinBuy="ETH")),n):(n.coinSell="LRC",n.coinBuy="ETH",n)}var Ve,We=n(62),He=function(e){var t=e.coinKey,n=e.ammKey,a=e.ammMap;return new Promise((function(e,c){H.a.ammpoolAPI&&H.a.exchangeAPI?Promise.all([H.a.ammpoolAPI.getAmmPoolSnapshot({poolAddress:a[n].address}),H.a.exchangeAPI.getMixTicker({market:t})]).then((function(t){var n=Object(l.a)(t,2),a=n[0].ammPoolSnapshot,c=n[1].tickMap;e({ammPoolsBalance:a,tickMap:c})})):c(new p.c(p.e.NO_SDK))}))},Ye=function(e){var t,n,a=e.coinKey,c=(e.market,e.ammPoolsBalance),r=e.tokenMap,o=e.tickerData,i=e._tradeCalcData,s=e.coinMap,d=e.marketCoins,b=a.match(/(\w+)-(\w+)/i),f=Object(l.a)(b,3),m=f[1];f[2];if(n=o.base===m?Number(o.close):0!==Number(o.close)?1/Number(o.close):0,isNaN(n)&&c){var j,O=Object(C.A)(a),v=O.base,h=O.quote,g=c.pooled[0],x=c.pooled[1];if(v&&h&&r[v].tokenId===g.tokenId)j=[[v,g.volume],[h,x.volume]];else{if(!v||!h||r[v].tokenId!==x.tokenId)throw new p.c(p.e.NO_SUPPORT_PAIR);j=[[h,x.volume],[v,g.volume]]}var A,y=j,k=Object(l.a)(y,2),w=k[0],T=k[1];if(w&&T)n=null===(A=Object(We.b)(T[0],T[1]))||void 0===A?void 0:A.div(Object(We.b)(w[0],w[1])||1).toNumber()}return i.StoB=n,i.BtoS=0!==n&&void 0!==n?1/(1*n):0,i.sellCoinInfoMap=s&&(null===d||void 0===d?void 0:d.reduce((function(e,t){return Object(u.a)(Object(u.a)({},e),{},Object(B.a)({},t,s[t]))}),{})),i.buyCoinInfoMap=s&&r&&(null===(t=r[i.coinSell].tradePairs)||void 0===t?void 0:t.reduce((function(e,t){return Object(u.a)(Object(u.a)({},e),{},Object(B.a)({},t,s[t]))}),{})),{_tradeCalcData:i}},Ge=function(e){var t=isNaN(e.close)?0:e.close,n=isNaN(e.close)||isNaN(e.open)||e.open===e.close?p.f.none:e.close>e.open?p.f.increase:p.f.decrease;return{change:(e.close-e.open)/e.open,timeUnit:"24h",priceYuan:t,priceDollar:t,floatTag:n,reward:0}},ze=function(e){var t=Object(H.d)(),n=T.a.getState().account,a=n.accountId,c=n.apiKey;return t.getUserTrades({accountId:a},c).then((function(e){return e.userTrades}))},qe=function(e,t){var n=[];return t.forEach((function(e){try{var t,a=Object(C.A)(e.market),c=a.base,r=a.quote;T.a.getState().system.forex,T.a.getState().settings.currency;if(T.a.getState().tokenMap.tokenMap)n.push({side:e.side===C.n.Sell?pe.P.Sell:pe.P.Buy,amount:{from:{key:c,value:c?Object(We.a)(c,e.volume):void 0},to:{key:r,value:c?null===(t=Object(We.b)(c,e.volume))||void 0===t?void 0:t.times(e.price).toNumber():void 0}},price:{key:"",value:C.H(e.price).toNumber()},fee:{key:"",value:r?Object(We.a)(r,e.fee):void 0},time:parseInt(e.tradeTime.toString())})}catch(o){console.log(o)}})),n},Xe=function(){var e,t=T.a.getState().account,n=t.accountId,a=t.apiKey;return null===(e=H.a.ammpoolAPI)||void 0===e?void 0:e.getUserAmmPoolTxs({accountId:n},a).then((function(e){return e.userAmmPoolTxs}))},Je=function(e,t){var n=[],a=T.a.getState().tokenMap,c=a.tokenMap,r=a.coinMap,o=a.idIndex;return t.forEach((function(t){try{var a=T.a.getState().system.forex;if(r&&c&&o&&(!e||c["LP-"+e].tokenId===t.lpToken.tokenId)){var i,s,u=o[t.lpToken.tokenId].match(/LP-(\w+)-(\w+)/i),d=Object(l.a)(u,3),b=d[1],p=d[2];n.push({type:t.txType===C.b.JOIN?f.e.add:f.e.remove,totalDollar:1e3,totalYuan:1e3/Number(a),amountA:Object(We.a)(b,null===(i=t.poolTokens[0])||void 0===i?void 0:i.actualAmount),amountB:Object(We.a)(b,null===(s=t.poolTokens[1])||void 0===s?void 0:s.actualAmount),time:Number(t.updatedAt),coinA:r[b],coinB:r[p],status:t.txStatus})}return n}catch(m){console.log(m)}})),n},Ze=function(e){void 0!==typeof e.customSlippage&&T.a.dispatch(Object(f.db)(e.customSlippage))},Qe=n(68),$e=["sell","buy","slippage"],et=Object(Re.default)(ee.a)(Ve||(Ve=Object(fe.a)(["\n  @media only screen and (min-height: 680px ) and (min-width:1024px){\n    position: fixed;\n  }\n"]))),tt=Object(Q.a)("common")((function(e){var t=Object.assign({},e),n=function(){var e=p.r.wait,t=Object(s.h)(":symbol"),n=Object(W.c)(),a=n.coinMap,c=n.tokenMap,r=n.marketArray,o=n.marketCoins,i=n.marketMap,f=Object(De.d)().ammMap,m=Object(A.a)().account,j=Object(V.c)(),O=b.a.useState(void 0),v=Object(l.a)(O,2),x=v[0],y=v[1],I=b.a.useState(void 0),_=Object(l.a)(I,2),E=_[0],S=_[1],P=b.a.useState([]),N=Object(l.a)(P,2),R=N[0],D=N[1],M=b.a.useState([]),U=Object(l.a)(M,2),L=U[0],F=U[1],Y=b.a.useState(void 0),G=Object(l.a)(Y,2),z=G[0],q=G[1],X=b.a.useState({coinAInfo:void 0,coinBInfo:void 0}),J=Object(l.a)(X,2),Q=J[0],$=J[1],ee=b.a.useState(void 0),te=Object(l.a)(ee,2),ne=te[0],ae=te[1],ce=b.a.useState(void 0),re=Object(l.a)(ce,2),ie=re[0],se=re[1],ue=Object(d.useState)(),le=Object(l.a)(ue,2),de=le[0],be=le[1];b.a.useEffect((function(){var e,n=null!==(e=null===t||void 0===t?void 0:t.params.symbol)&&void 0!==e?e:void 0;je(n,void 0,void 0,void 0)}),[]),b.a.useEffect((function(){}),[]),b.a.useEffect((function(){switch(j.status){case"ERROR":j.statusUnset();break;case"DONE":j.statusUnset();var e=K().walletMap;if(E){var t,n,a,c;S(Object(u.a)(Object(u.a)({},E),{},{walletMap:e})),y({sell:{belong:E.sellCoinInfoMap?null===(t=E.sellCoinInfoMap[E.coinSell])||void 0===t?void 0:t.simpleName:void 0,balance:e?null===(n=e[E.coinSell])||void 0===n?void 0:n.count:0},buy:{belong:E.sellCoinInfoMap?null===(a=E.sellCoinInfoMap[E.coinBuy])||void 0===a?void 0:a.simpleName:void 0,balance:e?null===(c=e[E.coinBuy])||void 0===c?void 0:c.count:0}});var o=Object(C.B)(r,E.coinSell,E.coinBuy);o.amm,o.market,ze().then((function(e){var t=qe(0,e);F(t||[])}))}}}),[j.status,F]),b.a.useEffect((function(){}),[]),Object(w.a)((function(){var e=Le(Be);se(e)}),[m.status,Be]);var fe=function(){var e=Object(g.a)(h.a.mark((function e(t,n){var a;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.tradeData,e.abrupt("return",new Promise((function(e){switch(n){case Me.a.SEll_CLICK:case Me.a.BUY_CLICK:break;case Me.a.SELL_SELECTED:je("".concat(a.sell.belong,"-").concat(a.buy.belong),"sell",a,ne);break;case Me.a.BUY_SELECTED:je("".concat(a.sell.belong,"-").concat(a.buy.belong),"buy",a,ne);break;case Me.a.EXCHANGE_CLICK:je("".concat(a.sell.belong,"-").concat(a.buy.belong),void 0,void 0,ne)}e(void 0)})));case 2:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),pe=function(){var e=Object(g.a)(h.a.mark((function e(t,n,a){var o,s,l,d,b,p,m,j,O,v,g,x;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n[t].tradeValue&&E&&("sell"===t?n.buy.tradeValue=C.H(n.sell.tradeValue).times(E.StoB).toNumber():n.sell.tradeValue=C.H(n.buy.tradeValue).times(E.BtoS).toNumber()),d="".concat(null===(o=Q.coinAInfo)||void 0===o?void 0:o.simpleName,"-").concat(null===(s=Q.coinBInfo)||void 0===s?void 0:s.simpleName),e.next=4,null===(l=H.a.exchangeAPI)||void 0===l?void 0:l.getMixDepth({market:d});case 4:if(b=e.sent,r&&c&&i&&b&&f&&E){e.next=8;break}return p=Object(u.a)({},E),e.abrupt("return",{_tradeData:n,_tradeCalcData:p});case 8:return j=(j=(m="sell"===t)?n.sell.tradeValue:n.buy.tradeValue)?j.toString():"0",O=n.sell.belong,v=n.buy.belong,g=C.F(j,O,v,m,r,c,i,null===b||void 0===b?void 0:b.depth,Object(B.a)({},"AMM-"+d,f["AMM-"+d].__rawConfig__),a,"6","200"),console.log("output:",g),be(g),E.priceImpact=null===g||void 0===g?void 0:g.priceImpact,m?n.buy.tradeValue=(null===g||void 0===g?void 0:g.output)?parseFloat(null===g||void 0===g?void 0:g.output):0:n.sell.tradeValue=(null===g||void 0===g?void 0:g.output)?parseFloat(null===g||void 0===g?void 0:g.output):0,x=Object(u.a)({},E),e.abrupt("return",{_tradeData:n,_tradeCalcData:x});case 20:case"end":return e.stop()}}),e)})));return function(t,n,a){return e.apply(this,arguments)}}(),me=b.a.useCallback(Qe.debounce(function(){var e=Object(g.a)(h.a.mark((function e(t,n,a){var c,r,o;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,pe(t,n,a);case 2:c=e.sent,r=c._tradeData,o=c._tradeCalcData,y(r),S(o);case 7:case"end":return e.stop()}}),e)})));return function(t,n,a){return e.apply(this,arguments)}}(),2*e),[y,S,pe]),je=function(){var e=Object(g.a)(h.a.mark((function e(t,n,i,s){var d,b,m,O,v,g,A,k,w,T,I,_,P,N;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:E&&t==="".concat(E.coinSell,"-").concat(E.coinBuy)&&i&&n&&(!x||x[n].tradeValue!==i[n].tradeValue)?me(n,i,s):(d={},b=void 0,m=Ke({coinKey:t,_tradeCalcData:{},tokenMap:c,coinMap:a}),O=Object(C.B)(r,m.coinSell,m.coinBuy),v=O.amm,g=O.market,A=g.match(/(\w+)-(\w+)/i),k=Object(l.a)(A,3),w=k[1],T=k[2],S(Object(u.a)(Object(u.a)({},E),m)),a&&$({coinAInfo:a[w],coinBInfo:a[T]}),j.walletLayer2&&(I=K(),_=I.walletMap,m.walletMap=_,ze().then((function(e){var t=qe(0,e);F(t||[])}))),P=[],r&&v&&g&&f&&(P=[null===(N=H.a.exchangeAPI)||void 0===N?void 0:N.getMarketTrades({market:g}),He({coinKey:g,ammKey:v,ammMap:f})],Promise.all(Object(oe.a)(P)).then((function(e){var t=Object(l.a)(e,2),n=t[0].marketTrades,r=t[1],i=r.ammPoolsBalance,s=r.tickMap;if(ae(i),c){var u,f,p,j,O=Ye({coinKey:"".concat(m.coinSell,"-").concat(m.coinBuy),market:g,ammPoolsBalance:i,tickerData:s[g]?s[g]:{},tokenMap:c,_tradeCalcData:m,coinMap:a,marketCoins:o})._tradeCalcData;m=O,d=Ge(s[g]?s[g]:{}),b=qe(0,n),S(m),q(d),D(b),y({sell:{belong:m.sellCoinInfoMap?null===(u=m.sellCoinInfoMap[m.coinSell])||void 0===u?void 0:u.simpleName:void 0,balance:m.walletMap?null===(f=m.walletMap[m.coinSell])||void 0===f?void 0:f.count:0},buy:{belong:m.sellCoinInfoMap?null===(p=m.sellCoinInfoMap[m.coinBuy])||void 0===p?void 0:p.simpleName:void 0,balance:m.walletMap?null===(j=m.walletMap[m.coinBuy])||void 0===j?void 0:j.count:0}})}})).catch((function(e){throw new p.c(Object(u.a)(Object(u.a)({},p.e.TRADE_LITE_SET_PAIR_ERROR),{},{options:e}))}))));case 1:case"end":return e.stop()}}),e)})));return function(t,n,a,c){return e.apply(this,arguments)}}();return{tradeCalcData:E,tradeFloat:z,tradeArray:R,myTradeArray:L,tradeData:x,pair:Q,marketArray:r,onSwapClick:function(e){var t=e.sell,n=e.buy,a=e.slippage,r=Object(Z.a)(e,$e),o=Object.assign(Fe,Object(B.a)({},Ae.ACTIVATED,[Object(g.a)(h.a.mark((function e(){var o,i,s,u,l,d,b;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(o=T.a.getState().system.exchangeInfo,H.a.userAPI&&c&&o&&m.status===k.b.ACTIVATED){e.next=3;break}return e.abrupt("return");case 3:return console.log("onSwap",t,n,a),console.log("onSwap output:",de),console.log("onSwap account:",m),i=c[t.belong],s=c[n.belong],u={accountId:m.accountId,sellTokenId:i.tokenId},e.next=11,H.a.userAPI.getNextStorageId(u,m.apiKey);case 11:return l=e.sent,e.prev=12,d={exchange:o.exchangeAddress,accountId:m.accountId,storageId:l.orderId,sellToken:{tokenId:i.tokenId,volume:de.amountS},buyToken:{tokenId:s.tokenId,volume:de.amountBOutSlip},allOrNone:!1,validUntil:C.q,maxFeeBips:60,fillAmountBOrS:!1,orderType:C.m.ClassAmm,eddsaSignature:""},console.log(d),e.next=17,H.a.userAPI.submitOrder(d,m.eddsaKey,m.apiKey);case 17:b=e.sent,console.log(b),e.next=24;break;case 21:e.prev=21,e.t0=e.catch(12),Object(C.w)(e.t0);case 24:r.__cache__&&Ze(r.__cache__);case 25:case"end":return e.stop()}}),e,null,[[12,21]])}))),{sell:t,buy:n,slippage:a}]));Le(o)},swapBtnI18nKey:ie,handleSwapPanelEvent:fe}}(),a=n.tradeCalcData,c=n.tradeData,r=n.tradeFloat,o=n.tradeArray,i=n.myTradeArray,m=n.marketArray,j=n.handleSwapPanelEvent,O=n.onSwapClick,v=n.pair,x=n.swapBtnI18nKey;return Object(z.jsxs)(z.Fragment,{children:[Object(z.jsxs)(re.a,{container:!0,marginRight:3,alignContent:"flex-start",children:[Object(z.jsx)(ke,Object(u.a)({},Object(u.a)(Object(u.a)(Object(u.a)({},t),v),{},{marketArray:m,tradeFloat:r,tradeArray:o}))),Object(z.jsx)(Ne,{tradeArray:o,myTradeArray:i})]}),Object(z.jsx)(ee.a,{display:"flex",style:{minWidth:"var(--swap-box-width)"},children:Object(z.jsx)(et,{children:Object(z.jsx)(f.F,Object(u.a)({tradeData:c,tradeCalcData:a,onSwapClick:O,swapBtnI18nKey:x},Object(u.a)({handleSwapPanelEvent:j},t)))})})]})}));function nt(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:C.h,n=Object(_.a)(),a=n.chainId,c=n.active,r=function(){if(c&&a)return new e(a,t)},o=Object(d.useMemo)(r,[e,a,c,t]);return o}var at=[{key:0,value:"Connecting"},{key:1,value:"Connected"},{key:2,value:"Closing"},{key:3,value:"Closed"}],ct=function(e){var t=e.topics,n=e.verify,a=e.needApiKey,c=e.apiKey,r=Object(d.useRef)(null),o=Object(d.useState)(void 0),i=Object(l.a)(o,2),s=i[0],u=i[1],b=Object(d.useState)({key:0,value:"Connecting"}),f=Object(l.a)(b,2),p=f[0],m=f[1],j=Object(_.a)().chainId,O=nt(C.s),v=function(){O&&j&&O.getWsKey().then((function(e){var n="wss://ws.";switch(j){case C.e.MAINNET:n+="api3.loopring.io";break;default:n+="uat2.loopring.io",n="wss://ws.uat2.loopring.io"}n+="/v3/ws?wsApiKey="+e;try{r.current=new WebSocket(n);r.current.onopen=function(e){var n,o;m(at[null!==(n=null===(o=r.current)||void 0===o?void 0:o.readyState)&&void 0!==n?n:0]),function(e){var t={op:"sub",unsubscribeAll:"true",topics:e};a&&c&&(t.apiKey=c);var n=JSON.stringify(t);g(n)}(t)},r.current.onclose=function(e){var t,n;m(at[null!==(t=null===(n=r.current)||void 0===n?void 0:n.readyState)&&void 0!==t?t:0])},r.current.onerror=function(e){var t,n;m(at[null!==(t=null===(n=r.current)||void 0===n?void 0:n.readyState)&&void 0!==t?t:0])},r.current.onmessage=function(e){u(e.data)}}catch(o){console.log(o)}}))},h=function(){var e;null===(e=r.current)||void 0===e||e.close()},g=function(e){var t;null===(t=r.current)||void 0===t||t.send(e)};return Object(d.useEffect)((function(){return n&&(r.current&&3!==r.current.readyState||v()),function(){var e;null===(e=r.current)||void 0===e||e.close()}}),[r,n]),{wsData:s,readyState:p,sendMessage:g,closeWebSocket:h,reconnect:function(){try{h(),r.current=null,v()}catch(e){console.log(e)}}}};function rt(e){var t=[];t.push(Object(C.G)("LRC-ETH")),t.push(Object(C.z)("0x18920d6E6Fb7EbE057a4DD9260D6D95845c95036"));return{socketData:function(e,t,n){var a=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],c=Object(d.useState)({}),r=Object(l.a)(c,2),o=r[0],i=r[1],s=Object(d.useState)(!0),u=Object(l.a)(s,2),b=u[0],f=u[1];Object(d.useEffect)((function(){var e=!0;return console.log("enter checkIsLocalPage"),document.addEventListener("visibilitychange",(function(){var t=!0;"hidden"===document.visibilityState&&(t=!1),e?f(t):console.log("unmounted! dont setIsLocalPage!")})),function(){e=!1}}),[]);var p=ct({topics:e,apiKey:n,needApiKey:t,verify:a}),m=p.wsData,j=p.readyState,O=p.closeWebSocket,v=p.reconnect,h=p.sendMessage;return Object(d.useEffect)((function(){if((!t||n)&&a){if("ping"===m)try{h("pong")}catch(e){console.log(e)}else m&&i(JSON.parse(m));3===j.key&&b&&v(),b||O()}}),[m,j,b,a,n]),{socketData:o}}(t,!1,e).socketData}}var ot,it,st,ut,lt,dt,bt,ft,pt,mt,jt,Ot,vt,ht,gt,xt,At,yt=function(){Object(d.useRef)(null);var e=Object(A.a)(),t=e.account,n=(e.isNoAccount,rt(e.apiKey).socketData),a=function(){var e=Object(d.useState)(),t=Object(l.a)(e,2),n=t[0],a=t[1],c=Object(R.b)();return M((function(){if(c)return c.getMarkets()}),a,void 0,"useGetMarkets",[c]),{markets:n}}().markets,c=U().exchangeInfo,r=L().tokens,o=function(){var e=Object(d.useState)(),t=Object(l.a)(e,2),n=t[0],a=t[1],c=Object(R.b)();return M((function(){if(c)return c.getGasPrice()}),a,void 0,"useGetGas",[c]),{gas:n}}().gas;null===o||void 0===o||o.data;console.log("account:",t),console.log("exchangeInfo:",c),console.log("tokens:",r);t.accAddr&&t.accAddr;return Object(z.jsxs)("div",{children:["Debug",Object(z.jsxs)("div",{children:["account:",JSON.stringify(t)]}),Object(z.jsxs)("div",{children:["eddsaKey:",t.eddsaKey]}),Object(z.jsxs)("div",{children:["wsdata: ",JSON.stringify(n)]}),Object(z.jsx)("div",{children:"----------------------------"}),Object(z.jsxs)("div",{children:["markets:",JSON.stringify(a)]}),Object(z.jsx)("div",{children:"----------------------------"}),Object(z.jsxs)("div",{children:["depositAddress:",null===c||void 0===c?void 0:c.depositAddress]}),Object(z.jsxs)("div",{children:["exchangeAddress:",null===c||void 0===c?void 0:c.exchangeAddress]}),Object(z.jsx)("div",{children:"----------------------------"}),Object(z.jsxs)("div",{children:["tokens:",JSON.stringify(r)]}),Object(z.jsx)("div",{children:"----------------------------"})]})},kt=n(2030),wt=n(446),Tt=Object(Ie.a)(ee.a)(ot||(ot=Object(fe.a)(["\n  display: flex;\n  flex-direction: column;\n  width: 100%;\n  height: 100%;\n  flex: 1;\n  background-color: ",";\n  border-radius: ","px;\n  padding: 20px;\n\n  .title {\n    font-family: Gilroy-Medium;\n    font-size: ","px;\n    line-height: 19px;\n  }\n\n  .tableWrapper {\n    display: flex;\n    margin-top: 20px;\n    border: 1px solid ",";\n    border-radius: ","px;\n    padding: 26px;\n    flex: 1;\n    \n    .rdg {\n      flex: 1;\n    }\n  }\n"])),(function(e){return e.theme.colorBase.background().default}),(function(e){return e.theme.unit}),(function(e){return 3*e.theme.unit}),(function(e){return e.theme.colorBase.borderColor}),(function(e){return e.theme.unit})),Ct=Object(Q.a)("common")((function(e){var t=b.a.useRef(null),n=b.a.useState(10),a=Object(l.a)(n,2),c=a[0],r=a[1],o=b.a.useState([]),i=Object(l.a)(o,2),s=i[0],p=i[1],m=T.a.getState().account,j=m.accountId,O=m.apiKey;return Object(d.useEffect)((function(){!function(){var e=Object(g.a)(h.a.mark((function e(){var t,n;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(H.a&&H.a.userAPI&&j&&O)){e.next=6;break}return e.next=3,H.a.userAPI.getUserTranferList({accountId:j},O);case 3:t=e.sent,n=t.userTransfers.map((function(e){return{token:e.symbol,from:e.senderAddress,to:e.receiverAddress,amount:Number(Object(We.a)(e.symbol,e.amount)),fee:{unit:e.feeTokenSymbol||"",value:Number(Object(We.a)(e.symbol,e.feeAmount||0))},memo:e.memo||"",time:e.timestamp,txnHash:e.hash,status:"processed"===e.status?f.N.processed:"processing"===e.status?f.N.processing:"received"===e.status?f.N.received:f.N.failed,tradeType:"TRANSFER"===e.txType?f.P.transfer:"DEPOSIT"===e.txType?f.P.deposit:f.P.withdraw}})),p(n);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()()}),[j,O]),b.a.useEffect((function(){var e,n=null===t||void 0===t||null===(e=t.current)||void 0===e?void 0:e.offsetHeight;n&&r(Math.floor((n-120)/44)-2)}),[t,c]),Object(z.jsxs)(Tt,{ref:t,children:[Object(z.jsx)("div",{className:"title",children:"Transactions"}),Object(z.jsx)("div",{className:"tableWrapper",children:Object(z.jsx)(f.O,Object(u.a)({},Object(u.a)({rawData:s,pagination:{pageSize:c}},e)))})]})})),It=n(1901),_t=["t"],Et=Object(Ie.a)(ee.a)(it||(it=Object(fe.a)(["\n  width: 100%;\n  height: 100%;\n  flex: 1;\n  background-color: ",";\n  border-radius: ","px;\n  padding: 20px;\n\n  .title {\n    font-family: Gilroy-Medium;\n    font-size: ","px;\n    line-height: 19px;\n  }\n\n  .tableWrapper {\n    display: flex;\n    flex: 1;\n    height: 100%;\n    border: 1px solid ",";\n    border-radius: ","px;\n    padding: 26px;\n  }\n"])),(function(e){return e.theme.colorBase.background().default}),(function(e){return e.theme.unit}),(function(e){return 3*e.theme.unit}),(function(e){return e.theme.colorBase.borderColor}),(function(e){return e.theme.unit})),St=Object(Ie.a)(ee.a)(st||(st=Object(fe.a)(["\n  height: 225px;\n\n  > div {\n    position: relative;\n    width: calc(50% - 6px);\n    height: 100%;\n    background-color: ",";\n    border: 1px solid ",";\n    border-radius: ","px;\n    padding: ","px ","px;\n  }\n"])),(function(e){return e.theme.colorBase.background().default}),(function(e){return e.theme.colorBase.borderColor}),(function(e){return e.theme.unit}),(function(e){return 2.5*e.theme.unit}),(function(e){return 3*e.theme.unit})),Pt=Object(Ie.a)(ee.a)(ut||(ut=Object(fe.a)(["\n  position: absolute;\n  z-index: 10000;\n  right: ","px;\n  bottom: ","px;\n"])),(function(e){return 3*e.theme.unit}),(function(e){return 2.5*e.theme.unit})),Nt=[{value:"24 H",key:"24 H"},{value:"1 W",key:"1 W"},{value:"ALL",key:"ALL"}],Rt=(Math.random(),Math.random(),Math.random(),Math.random(),Math.random(),Math.random(),Math.random(),Math.random(),Math.random(),Math.random(),Object(Q.a)("common")((function(e){var t=e.t,n=Object(Z.a)(e,_t),a=Object(d.useRef)(null),c=Object(d.useState)(10),r=Object(l.a)(c,2),o=r[0],i=r[1],s=Object(d.useState)("24 H"),b=Object(l.a)(s,2),p=b[0],m=b[1],j=Object(d.useState)([]),O=Object(l.a)(j,2),v=O[0],x=O[1],A=T.a.getState().walletLayer2.walletLayer2,y=T.a.getState().amm.ammMap.ammMap;Object(d.useEffect)((function(){!function(){var e=Object(g.a)(h.a.mark((function e(){var t,n;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(H.a&&H.a.walletAPI&&A)){e.next=5;break}return e.next=3,null===(t=H.a.walletAPI)||void 0===t?void 0:t.getUserAssets({wallet:"0xeF041462825bFdF79b2f1f02A70b2753cB5b1516",assetType:C.d.DEX,limit:30});case 3:(n=e.sent).userAssets.length&&n.userAssets.length&&x(n.userAssets.map((function(e){return{timeStamp:Number(e.createdAt),close:Number(e.amount)}})));case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()()}),[A]),Object(d.useEffect)((function(){var e,t=null===a||void 0===a||null===(e=a.current)||void 0===e?void 0:e.offsetHeight;t&&i(Math.floor((t-120)/44)-1)}),[a,o]);var k=S(),w=k.ShowDeposit,_=k.ShowTransfer,E=k.ShowWithdraw,P=(k.ShowResetAccount,Object(G.c)().updateWalletLayer1),N=Object(d.useCallback)((function(){P(),w(!0)}),[]),R={assetInfo:{totalAsset:v.length?v[v.length-1].close:0,priceTag:pe.C.Dollar},onShowDeposit:N,onShowTransfer:function(){_(!0)},onShowWithdraw:function(){E(!0)}},D=L().tokens,M=(null===D||void 0===D||D.tokenSymbolMap,T.a.getState().system.faitPrices),U=M?Object.entries(M).map((function(e){return{token:e[0],detail:e[1]}})):[],B=Object.entries(T.a.getState().tokenMap.tokenMap||{}).map((function(e){return{token:e[0],tokenDetail:e[1]}})),F=A?Object.keys(A):[],K=A?Object.values(A):[],V=F.map((function(e,t){var n,a,c=3===e.split("-").length,r=e.split("-");r.splice(0,1,"AMM");var o=c?r.join("-"):"",i=Object.keys(y),s=Number(null===(n=U.find((function(t){return t.token===e})))||void 0===n?void 0:n.detail.price)/Number(null===(a=U.find((function(e){return"USDT"===e.token})))||void 0===a?void 0:a.detail.price);return{name:e,value:o?i.includes(o)&&y[o]?y[o].amountDollar:0:Number(Object(We.a)(e,K[t].total))*s}})),W=F.map((function(e,t){var n,a,c,r=K[t],o=Number(null===(n=U.find((function(t){return t.token===e})))||void 0===n?void 0:n.detail.price)/Number(null===(a=U.find((function(e){return"USDT"===e.token})))||void 0===a?void 0:a.detail.price),i=Number(Object(We.a)(e,r.total)),s=Number(Object(We.a)(e,r.locked));return{token:{type:(null===(c=B.find((function(t){return t.token===e})))||void 0===c?void 0:c.tokenDetail.isLpToken)?f.J.lp:f.J.single,value:e},amount:i,available:i-s,locked:s,smallBalance:o*Number(Object(We.a)(e,K[t].total))<1}}));return Object(z.jsxs)(z.Fragment,{children:[Object(z.jsx)(ee.a,{children:Object(z.jsx)(f.f,Object(u.a)({},Object(u.a)(Object(u.a)({t:t},n),R)))}),Object(z.jsxs)(St,{display:"flex",justifyContent:"space-between",alignItems:"center",marginTop:2,children:[Object(z.jsxs)(It.a,{component:"div",children:[Object(z.jsx)(I.a,{component:"span",color:"textSecondary",variant:"body1",children:"Asset Distribution"}),Object(z.jsx)(f.l,{data:V})]}),Object(z.jsxs)(It.a,{component:"div",children:[Object(z.jsx)(I.a,{component:"span",color:"textSecondary",variant:"body1",children:"Total Assets"}),Object(z.jsx)(f.C,{type:f.j.Trend,data:v}),Object(z.jsx)(Pt,{children:Object(z.jsx)(f.I,Object(u.a)({exclusive:!0,size:"small"},Object(u.a)(Object(u.a)({},n),{},{t:t,data:Nt,value:p,setValue:m})))})]})]}),Object(z.jsx)(Et,{marginTop:2,children:Object(z.jsx)("div",{className:"tableWrapper",ref:a,children:Object(z.jsx)(f.g,Object(u.a)({},Object(u.a)({rawData:W,pagination:{pageSize:o},showFiliter:!0},n)))})})]})}))),Dt=Object(Ie.a)(ee.a)(lt||(lt=Object(fe.a)(["\n  display: flex;\n  flex-direction: column;\n  width: 100%;\n  height: 100%;\n  flex: 1;\n  background-color: ",";\n  border-radius: ","px;\n  padding: 20px;\n\n  .title {\n    font-family: Gilroy-Medium;\n    font-size: ","px;\n    line-height: 19px;\n  }\n\n  .tableWrapper {\n    display: flex;\n    flex: 1;\n    margin-top: 20px;\n    border: 1px solid ",";\n    border-radius: ","px;\n    padding: 26px;\n\n    .rdg {\n      flex: 1;\n    }\n  }\n"])),(function(e){return e.theme.colorBase.background().default}),(function(e){return e.theme.unit}),(function(e){return 3*e.theme.unit}),(function(e){return e.theme.colorBase.borderColor}),(function(e){return e.theme.unit})),Mt=Object(Q.a)("common")((function(e){var t=b.a.useRef(null),n=b.a.useState(10),a=Object(l.a)(n,2),c=a[0],r=a[1],o=b.a.useState([]),i=Object(l.a)(o,2),s=i[0],p=i[1],m=T.a.getState().account,j=m.accountId,O=m.apiKey;return Object(d.useEffect)((function(){!function(){var e=Object(g.a)(h.a.mark((function e(){var t;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(H.a&&H.a.userAPI&&j&&O)){e.next=5;break}return e.next=3,H.a.userAPI.getUserTrades({accountId:j},O);case 3:(t=e.sent)&&t.userTrades&&p(t.userTrades.map((function(e){var t=e.market.split("-"),n=t[t.length-2],a=t[t.length-1];return{side:e.side,price:{key:n,value:Number(e.price)},fee:{key:n,value:Number(Object(We.a)(n,e.fee))},time:Number(e.tradeTime),amount:{from:{key:n,value:Number(Object(We.a)(n,e.volume))},to:{key:a,value:Number(Object(We.a)(n,e.volume))/Number(e.price)}}}})));case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()()}),[j,O]),b.a.useEffect((function(){var e,n=null===t||void 0===t||null===(e=t.current)||void 0===e?void 0:e.offsetHeight;n&&r(Math.floor((n-120)/44)-2)}),[t,c]),Object(z.jsx)(z.Fragment,{children:Object(z.jsxs)(Dt,{ref:t,children:[Object(z.jsx)("div",{className:"title",children:"Trades"}),Object(z.jsx)("div",{className:"tableWrapper",children:Object(z.jsx)(f.L,Object(u.a)({},Object(u.a)({rawData:s,pagination:{pageSize:c}},e)))})]})})})),Ut=Object(Ie.a)(ee.a)(dt||(dt=Object(fe.a)(["\n    display: flex;\n    flex-direction: column;\n    width: 100%;\n    height: 100%;\n    flex: 1;\n    background-color: ",";\n    border-radius: ","px;\n    padding: 20px;\n\n    .title {\n        font-family: Gilroy-Medium;\n        font-size: ","px;\n        line-height: 19px;\n    }\n\n    .tableWrapper {\n        display: flex;\n        flex: 1;\n        margin-top: 20px;\n        border: 1px solid ",";\n        border-radius: ","px;\n        padding: 26px;\n\n        .rdg {\n            flex: 1;\n        }\n    }\n"])),(function(e){return e.theme.colorBase.background().default}),(function(e){return e.theme.unit}),(function(e){return 3*e.theme.unit}),(function(e){return e.theme.colorBase.borderColor}),(function(e){return e.theme.unit})),Lt=Object(Q.a)("common")((function(e){var t=b.a.useRef(null),n=b.a.useState(10),a=Object(l.a)(n,2),c=a[0],r=a[1],o=b.a.useState([]),i=Object(l.a)(o,2),s=i[0],p=i[1],m=T.a.getState().account,j=m.accountId,O=m.apiKey;return Object(d.useEffect)((function(){!function(){var e=Object(g.a)(h.a.mark((function e(){var t;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(H.a&&H.a.userAPI&&j&&O)){e.next=5;break}return e.next=3,H.a.userAPI.getOrders({accountId:j},O);case 3:(t=e.sent)&&Array.isArray(t.orders)&&t.orders.length&&p(t.orders.map((function(e){var t=e.market.split("-"),n=t[t.length-2],a=t[t.length-1],c=e.volumes,r=c.baseAmount,o=c.quoteAmount,i=c.baseFilled,s=c.quoteFilled;return{side:"BUY"===e.side?pe.P.Buy:pe.P.Sell,amount:{from:{key:n,value:Number(Object(We.a)(n,r))},to:{key:a,value:Number(Object(We.a)(a,o))}},average:Number(Object(We.a)(a,s))/Number(Object(We.a)(n,i)),filledAmount:{from:{key:n,value:Number(Object(We.a)(n,i))},to:{key:a,value:Number(Object(We.a)(a,s))}},filledPrice:{key:a,value:Number(e.price)},time:1e3*e.validity.start,status:e.status,detailTable:[]}})));case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()()}),[j,O]),b.a.useEffect((function(){var e,n=null===t||void 0===t||null===(e=t.current)||void 0===e?void 0:e.offsetHeight;n&&r(Math.floor((n-120)/44)-2)}),[t,c]),Object(z.jsx)(z.Fragment,{children:Object(z.jsxs)(Ut,{ref:t,children:[Object(z.jsx)("div",{className:"title",children:"Order History"}),Object(z.jsx)("div",{className:"tableWrapper",children:Object(z.jsx)(f.w,Object(u.a)({},Object(u.a)({pagination:{pageSize:c},rawData:s},e)))})]})})})),Bt=n(2037),Ft=n(2035),Kt=n(1898),Vt=n(1966),Wt=n(134),Ht=["t","i18n"],Yt=Object(Ie.a)(re.a)(bt||(bt=Object(fe.a)(["\n  width: 100%;\n  height: 100%;\n  background-color: ",";\n  ",";\n"])),(function(e){return e.theme.colorBase.background().default}),(function(e){return e.theme.border.defaultFrame({c_key:"blur",d_R:1})})),Gt=Object(Ie.a)(Bt.a)((function(e){var t=e.theme;return{"& .Mui-checked":{color:t.colorBase.textPrimary,"& + .MuiSwitch-track.MuiSwitch-track":{border:"solid ".concat(t.colorBase.success)},"& .MuiSwitch-thumb":{backgroundColor:t.colorBase.success}},"& .MuiSwitch-track":{border:"solid ".concat(t.colorBase.error),opacity:1},"& .MuiSwitch-thumb":{backgroundColor:t.colorBase.error}}})),zt=function(e){var t=e.t,n=e.currency,a=e.label,c=e.handleChange,r=b.a.useState(n||p.b.dollar),o=Object(l.a)(r,2),i=o[0],s=o[1],u=b.a.useCallback((function(e){s(e.target.value),c&&c(e.target.value)}),[c]);return Object(z.jsxs)(f.x,{"aria-label":t(a),IconComponent:p.d,labelId:"language-selected",id:"language-selected",value:i,autoWidth:!0,onChange:u,children:[Object(z.jsxs)(f.y,{value:p.b.dollar,children:["$ ",t("labelUSDollar")]}),Object(z.jsxs)(f.y,{value:p.b.yen,children:["\xa5 ",t("labelCNYYuan")]})]})},qt=Object(Ie.a)(Ft.a)(ft||(ft=Object(fe.a)(["\n  margin: ","px 0 ","px 0px;\n"])),(function(e){return e.theme.unit}),(function(e){return e.theme.unit})),Xt=(Object(Ie.a)(Ft.a)(pt||(pt=Object(fe.a)(["\n  margin: 0;\n  flex: 1;\n  width: 1px;\n  height: ","px;\n  background: ",";\n"])),(function(e){return 3*e.theme.unit}),(function(e){return e.theme.colorBase.focus})),Object(Q.a)(["common","layout"])((function(e){var t=e.t,n=e.i18n,a=Object(Z.a)(e,Ht),c=Object(Wt.f)(),r=Object(f.hb)(),o=r.setUpColor,i=r.setLanguage,s=r.setCurrency,l=r.currency,d=r.upColor,b=n.language;return Object(z.jsxs)(re.a,{container:!0,direction:"column",justifyContent:"space-between",alignItems:"stretch",flexWrap:"nowrap",children:[Object(z.jsx)(I.a,{variant:"h4",component:"h3",marginY:1,paddingLeft:2,children:t("labelTitleSecurity")}),Object(z.jsxs)(Yt,{item:!0,xs:12,display:"flex",flexDirection:"column",marginBottom:2,paddingY:2,children:[Object(z.jsxs)(ee.a,{component:"section",display:"flex",flexDirection:"column",children:[Object(z.jsx)(I.a,{variant:"h5",component:"h4",paddingX:2,children:t("labelTitleResetL2Keypair")}),Object(z.jsx)(qt,{}),Object(z.jsxs)(re.a,{container:!0,display:"flex",flexDirection:"row",justifyContent:"stretch",alignItems:"flex-start",paddingX:2,marginBottom:2,children:[Object(z.jsx)(re.a,{item:!0,xs:8,display:"flex",flexDirection:"column",children:Object(z.jsx)(I.a,{variant:"body1",component:"p",children:Object(z.jsxs)(Vt.a,{i18nKey:"resetDescription",children:["Create a new signing key for layer-2 authentication (no backup needed). This will",Object(z.jsx)(f.R,{component:"span",children:"cancel all your pending orders"}),"."]})})}),Object(z.jsx)(re.a,{item:!0,xs:4,display:"flex",flexDirection:"column",justifyContent:"space-evenly",alignItems:"flex-end",alignSelf:"stretch",children:Object(z.jsx)(Kt.a,{variant:"outlined",size:"medium",color:"primary",children:t("labelBtnReset")})}),Object(z.jsx)(re.a,{item:!0,xs:12,display:"flex",flexDirection:"row",justifyContent:"flex-end",alignItems:"center",alignSelf:"stretch",children:Object(z.jsx)(I.a,{variant:"body2",component:"p",paddingTop:1,children:t("labelHadChangPassword",{passDay:"14 hours"})})})]})]}),Object(z.jsxs)(ee.a,{component:"section",display:"flex",flexDirection:"column",children:[Object(z.jsx)(I.a,{variant:"h5",component:"h4",paddingX:2,children:t("labelTitleExportAccount")}),Object(z.jsx)(qt,{}),Object(z.jsxs)(re.a,{container:!0,display:"flex",flexDirection:"row",justifyContent:"stretch",alignItems:"flex-start",paddingX:2,marginBottom:2,children:[Object(z.jsx)(re.a,{item:!0,xs:7,display:"flex",flexDirection:"column",children:Object(z.jsx)(I.a,{variant:"body1",component:"p",children:t("descriptionExportAccount")})}),Object(z.jsx)(re.a,{item:!0,xs:5,display:"flex",flexDirection:"column",justifyContent:"space-evenly",alignItems:"flex-end",alignSelf:"stretch",children:Object(z.jsxs)(re.a,{item:!0,children:[" ",Object(z.jsx)(Kt.a,{variant:"outlined",size:"medium",color:"primary",children:t("labelBtnExportAccount")})]})})]})]})]}),Object(z.jsx)(I.a,{variant:"h4",component:"h3",marginY:1,paddingLeft:2,children:t("labelTitlePreferences")}),Object(z.jsx)(Yt,{item:!0,xs:12,display:"flex",flexDirection:"column",marginBottom:2,paddingY:2,children:Object(z.jsxs)(ee.a,{component:"section",display:"flex",flexDirection:"column",children:[Object(z.jsxs)(re.a,{container:!0,display:"flex",flexDirection:"row",justifyContent:"stretch",alignItems:"flex-start",paddingX:2,marginBottom:2,children:[Object(z.jsx)(re.a,{item:!0,xs:7,display:"flex",flexDirection:"column",children:Object(z.jsx)(I.a,{variant:"body1",component:"p",children:t("labelLanguage")})}),Object(z.jsx)(re.a,{item:!0,xs:5,display:"flex",flexDirection:"column",justifyContent:"space-evenly",alignItems:"flex-end",alignSelf:"stretch",children:Object(z.jsx)(re.a,{item:!0,children:Object(z.jsx)(f.h,Object(u.a)({},Object(u.a)(Object(u.a)({t:t},a),{},{language:b,label:"languageSetting",handleChange:function(e){i(e),n.changeLanguage(e)}})))})})]}),Object(z.jsxs)(re.a,{container:!0,display:"flex",flexDirection:"row",justifyContent:"stretch",alignItems:"flex-start",paddingX:2,marginBottom:2,children:[Object(z.jsx)(re.a,{item:!0,xs:7,display:"flex",flexDirection:"column",children:Object(z.jsx)(I.a,{variant:"body1",component:"p",children:t("labelCurrency")})}),Object(z.jsx)(re.a,{item:!0,xs:5,display:"flex",flexDirection:"column",justifyContent:"space-evenly",alignItems:"flex-end",alignSelf:"stretch",children:Object(z.jsx)(re.a,{item:!0,children:Object(z.jsx)(zt,Object(u.a)({},Object(u.a)(Object(u.a)({t:t},a),{},{currency:l,label:"currencySetting",handleChange:function(e){s(e)}})))})})]}),Object(z.jsxs)(re.a,{container:!0,display:"flex",flexDirection:"row",justifyContent:"stretch",alignItems:"flex-start",paddingX:2,children:[Object(z.jsx)(re.a,{item:!0,xs:7,display:"flex",flexDirection:"column",children:Object(z.jsx)(I.a,{variant:"body1",component:"p",children:t("labelColors")})}),Object(z.jsxs)(re.a,{item:!0,xs:5,display:"flex",flexDirection:"row",justifyContent:"flex-end",alignItems:"center",alignSelf:"stretch",children:[Object(z.jsx)(I.a,{variant:"body1",component:"span",paddingX:2,children:Object(z.jsxs)(Vt.a,{i18nKey:"whichColorIsUp",children:[Object(z.jsxs)("span",{style:{textTransform:"capitalize",color:d===p.l.green?c.colorBase.success:c.colorBase.error},children:[{up:d===p.l.green?t("labelgreen"):t("labelred")}," up"]}),"and ",Object(z.jsxs)("span",{style:{textTransform:"capitalize",color:d===p.l.green?c.colorBase.error:c.colorBase.success},children:[{down:d===p.l.green?t("labelred"):t("labelgreen")}," down"]})]})}),Object(z.jsx)(Gt,{checked:d===p.l.green,color:"default",onChange:function(e){e.target.checked?o(p.l.green):o(p.l.red)}})]})]})]})})]})}))),Jt=["t"],Zt=p.v,Qt=Object(Ie.a)(ee.a)(mt||(mt=Object(fe.a)(["\n  ","\n   \n"])),(function(e){var t=e.theme;return"\n    background-color: ".concat(t.colorBase.background().default,";\n    width: 100%;\n    min-width:auto;\n    ").concat(t.border.defaultFrame({c_key:"blur"}),";\n    & > div{\n      background-color:initial;\n      border:0;\n      width:auto;\n      min-width: var(--swap-box-width);\n      max-width: 520px;\n    }\n    ")})),$t=Object(Q.a)(["layout","common"],{withRef:!0})(f.E),en=function(){var e,t=Object(s.h)("/layer2/:item"),n=T.a.getState().account.status,a=Object(x.a)(),c=a.t,r=Object(Z.a)(a,Jt),o=null!==(e=null===t||void 0===t?void 0:t.params.item)&&void 0!==e?e:"assets",i=X().depositProps;return Object(z.jsxs)(z.Fragment,{children:["  ",n===k.b.NOACCOUNT||n===k.b.DEPOSITING||n===k.b.DEPOSIT_TO_CONFIREM?Object(z.jsx)(Qt,{display:"flex",flexWrap:"wrap",alignItems:"center",justifyContent:"center",alignContent:"flex-start",children:Object(z.jsx)(f.k,Object(u.a)(Object(u.a)({},Object(u.a)(Object(u.a)(Object(u.a)({},r),i),{},{title:c("depositTitleAndActive"),description:"depositAndActiveDescription"})),{},{children:" "}))}):Object(z.jsxs)(z.Fragment,{children:[Object(z.jsx)(ee.a,{width:"200px",display:"flex",justifyContent:"stretch",marginRight:3,children:Object(z.jsx)(f.D,{children:Object(z.jsx)($t,{selected:o,subMenu:Zt})})}),Object(z.jsxs)(ee.a,{minHeight:420,display:"flex",alignItems:"stretch",flexDirection:"column",marginTop:0,flex:1,children:["assets"===o&&Object(z.jsx)(Rt,{}),"transactions"===o&&Object(z.jsx)(Ct,{}),"trades"===o&&Object(z.jsx)(Mt,{}),"orders"===o&&Object(z.jsx)(Lt,{}),"setting"===o&&Object(z.jsx)(Xt,{})]})]})]})},tn=n(984),nn=["t","ammActivityMap"],an=Object(Ie.a)(ee.a)(jt||(jt=Object(fe.a)(["\n  width: 100%;\n  height: 100%;\n  flex: 1;\n  background-color: ",";\n  border-radius: ","px;\n\n  .rdg {\n    flex: 1;\n  }\n\n"])),(function(e){return e.theme.colorBase.background().default}),(function(e){return e.theme.unit})),cn=Object(Q.a)("common")((function(e){e.t,e.ammActivityMap,Object(Z.a)(e,nn);var t=b.a.useRef(null),n=b.a.useState(10),a=Object(l.a)(n,2),c=a[0],r=a[1],o=Object(tn.a)({pageSize:c}),i=o.updateTickersUI,s=o.rawData,u=o.page;b.a.useEffect((function(){var e,n=null===t||void 0===t||null===(e=t.current)||void 0===e?void 0:e.offsetHeight;n&&r(Math.floor((n-120)/44)-1)}),[t,c]);var d=b.a.useCallback((function(e){i(e)}),[i]);return Object(z.jsx)(z.Fragment,{children:Object(z.jsx)(an,{display:"flex",flexDirection:"column",ref:t,children:Object(z.jsx)(f.z,{rawData:s,handlePageChange:d,page:u,pagination:{pageSize:c}})})})})),rn=n(2011),on=n(2031),sn=n(2010),un=function(e){var t=e.pair,n=e._ammCalcData,a=e.ammType,c=(e.tokenMap,e.coinMap),r=e.walletMap,o=e.ammMap,i=e.tickerData,s=e.ammPoolsBalance;if(n.coinInfoMap=c,i&&(n.AtoB=Number(i.close)),isNaN(n.AtoB)&&s){var u=Object(We.b)(t.coinAInfo.simpleName,s.pooled[0].volume),l=Object(We.b)(t.coinBInfo.simpleName,s.pooled[1].volume);n.AtoB=l&&u&&l.div(u).toNumber()}if(t.coinAInfo)if(a===f.c.Deposit){var d,b;n.myCoinA={belong:t.coinAInfo.simpleName,balance:r?null===(d=r[t.coinAInfo.simpleName])||void 0===d?void 0:d.count:0},n.myCoinB={belong:t.coinBInfo.simpleName,balance:r?null===(b=r[t.coinBInfo.simpleName])||void 0===b?void 0:b.count:0}}else{var p="".concat(t.coinAInfo.simpleName,"-").concat(t.coinBInfo.simpleName),m=0,j=0;if(r){var O,v=r?null===(O=r["LP-"+p])||void 0===O?void 0:O.count:0,h=o["AMM-"+p],g=h.totalLPToken,x=h.totalA,A=h.totalB;x&&g&&A&&(m=x/g*v,j=A/g*v)}n.myCoinA={belong:t.coinAInfo.simpleName,balance:m},n.myCoinB={belong:t.coinBInfo.simpleName,balance:j}}return n},ln=n(173),dn=["pair","walletMap","ammType","snapShotData"],bn=function(e){var t=e.pair,n=e.walletMap,a=e.ammType,c=e.snapShotData,r=Object(Z.a)(e,dn),o=function(e){var t=e.pair,n=e.walletMap,a=e.ammType,c=e.snapShotData,r=Object(W.c)(),o=r.coinMap,i=r.tokenMap,s=Object(De.d)().ammMap,d=Object(A.a)().account,p=b.a.useState(),m=Object(l.a)(p,2),j=m[0],O=m[1],v=b.a.useState({coinA:{belong:void 0},coinB:{belong:void 0},slippage:.5}),x=Object(l.a)(v,2),y=x[0],k=x[1],T=b.a.useState({coinA:{belong:void 0},coinB:{belong:void 0},slippage:.5}),C=Object(l.a)(T,2),I=C[0],_=C[1],E=b.a.useState(void 0),S=Object(l.a)(E,2),P=S[0],N=S[1],R=b.a.useState(void 0),D=Object(l.a)(R,2),M=D[0],U=D[1],L=b.a.useCallback(function(){var e=Object(g.a)(h.a.mark((function e(t){var r;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=un({pair:t,ammType:a,_ammCalcData:{},tokenMap:i,coinMap:o,walletMap:n,ammMap:s,tickerData:null===c||void 0===c?void 0:c.tickerData,ammPoolsBalance:null===c||void 0===c?void 0:c.ammPoolsBalance}),O(Object(u.a)(Object(u.a)({},j),r)),r.myCoinA&&(a===f.c.Deposit?k({coinA:r.myCoinA,coinB:r.myCoinB,slippage:.5}):_({coinA:r.myCoinA,coinB:r.myCoinB,slippage:.5}));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[c,n]),F=b.a.useCallback((function(e,t){console.log("handleDepositEvent",e,t)}),[]),K=b.a.useCallback((function(e,t){console.log("handleDepositEvent",e,t)}),[]);b.a.useEffect((function(){c&&L(t)}),[c,t,L,n]),Object(w.a)((function(){var e=Le(Be);N(e),U(e)}),[d.status,Be]);var V=b.a.useCallback((function(e){var t=Object.assign(Fe,Object(B.a)({},Ae.ACTIVATED,[function(e){console.log("onAmmWithdraw",e),e.__cache__&&Ze(e.__cache__)},e]));Le(t)}),[]),H=b.a.useCallback((function(e){var t=Object.assign(Fe,Object(B.a)({},Ae.ACTIVATED,[function(){console.log(" onAmmDeposit",e),e.__cache__&&Ze(e.__cache__)},e]));Le(t)}),[]);return{ammCalcData:j,ammDepositData:y,ammWithdrawData:I,handleDepositEvent:F,handleWithDrawEvent:K,onAmmWithdrawClick:V,onAmmDepositClick:H,ammDepositBtnI18nKey:P,ammWithdrawBtnI18nKey:M}}({pair:t,snapShotData:c,walletMap:n,ammType:a||f.c.Deposit}),i=o.ammCalcData,s=o.ammDepositData,d=o.ammWithdrawData,p=o.handleDepositEvent,m=o.handleWithDrawEvent,j=o.onAmmWithdrawClick,O=o.onAmmDepositClick,v=o.ammDepositBtnI18nKey,x=o.ammWithdrawBtnI18nKey,y=b.a.useCallback((function(){if((!c||!c.tradeData||!c.ammPoolsBalance)&&void 0===v&&void 0===x)return!0}),[c,x,x]);return Object(z.jsxs)(z.Fragment,{children:[" ",t?Object(z.jsx)(f.b,Object(u.a)(Object(u.a)({},Object(u.a)({},r)),{},{ammWithdrawData:d,ammDepositData:s,ammCalcData:i,handleDepositEvent:p,handleWithDrawEvent:m,onAmmWithdrawClick:j,onAmmDepositClick:O,tabSelected:a||f.c.Deposit,ammDepositBtnI18nKey:v,ammWithdrawBtnI18nKey:x,ammDepositBtnStatus:y()?ln.h.LOADING:ln.h.AVAILABLE,ammWithdrawBtnStatus:y()?ln.h.LOADING:ln.h.AVAILABLE})):Object(z.jsx)(ee.a,{width:"var(--swap-box-width)"})]})},fn=n(101),pn=n.n(fn),mn=n(297),jn=n(122),On=n.n(jn),vn=n(453),hn=function(e,t){var n=e.ammActivityMap,a=e.type,c=e.ammPoolActivityStatus,r=T.a.getState().tokenMap,o=r.coinMap,i=r.tokenMap,s=r.idIndex,u={};return n&&n[a]&&c.forEach((function(e){n[a][e]&&n[a][e].reduce((function(n,a){if(o&&a.awardRules[0]&&s&&i){var c,r=s[a.awardRules[0].tokenId],u={rewardToken:o[r],myRewards:e===C.a.InProgress&&t&&t[a.market]?Object(We.a)(r,null===(c=t[a.market])||void 0===c?void 0:c.currentRewards[0].volume):0,duration:{from:new Date(null===a||void 0===a?void 0:a.rangeFrom),to:new Date(null===a||void 0===a?void 0:a.rangeTo)},isPass:C.a.EndOfGame===e};n[a.market]?n[a.market].push(u):n[a.market]=[u]}return n}),u)})),gn(u)},gn=function(e,t){var n=T.a.getState().tokenMap.coinMap,a=T.a.getState().amm.ammMap.ammMap;try{return e&&n?Reflect.ownKeys(e).reduce((function(t,c){var r=a[c];if(r&&r.coinA&&n&&e[c]){var o=e[c].map((function(e){return Object(u.a)(Object(u.a)({},Object(J.b)(r)),{},{coinAInfo:n[r.coinA],coinBInfo:n[r.coinB],activity:e})}));t=[].concat(Object(oe.a)(t),Object(oe.a)(o))}return t}),[]):[]}catch(c){return console.log(c),[]}},xn=function(e){var t,n,a,c,r,o,i,s,u,l,d,b,f,p,m=e.coinA,j=e.coinB,O=e.ammUserReward,v=e.idIndex,h=e.faitPrices,g=e.forex,x=e.walletMap,A=e.snapShotData;if(O&&(t=O.currentRewards[0]?v[O.currentRewards[0].tokenId]:void 0,n=O.currentRewards[1]?v[O.currentRewards[1].tokenId]:void 0,a=O?Object(We.b)(m,O.feeRewards[0]):Object(C.H)(0),c=O?Object(We.b)(j,O.feeRewards[1]):Object(C.H)(0),a=a||Object(C.H)(0),c=c||Object(C.H)(0),o=(r=a.times(h[m].price).plus(c.times(h[j].price))).times(g),i=t?Object(We.b)(t,O.currentRewards[0].volume):Object(C.H)(0),s=n?Object(We.b)(n,O.currentRewards[1].volume):Object(C.H)(0),i=i||Object(C.H)(0),s=s||Object(C.H)(0),l=(u=i.times(t?h[t].price:1).plus(s.times(n?h[n].price:1))).times(g)),x&&x["LP-"+m+"-"+j]&&A){var y=new On.a(_walletMap["LP-"+m+"-"+j].detail.total).div(A.ammPoolsBalance.lp.volume);d=y.times(Object(We.b)(m,A.ammPoolsBalance.pooled[0].volume)||1),b=y.times(Object(We.b)(j,A.ammPoolsBalance.pooled[1].volume)||1),p=(f=d.times(h[m].price).plus(b.times(h[j].price))).times(g)}return{feeA:a?a.toNumber():void 0,feeB:c?c.toNumber():void 0,reward:i?i.toNumber():void 0,rewardToken:t?vn.a[t]:void 0,reward2:s?s.toNumber():void 0,rewardToken2:n?vn.a[n]:void 0,rewardDollar:u?u.toNumber():void 0,rewardYuan:l?l.toNumber():void 0,feeDollar:r?r.toNumber():void 0,feeYuan:o?o.toNumber():void 0,ammDetail:{coinAInfo:vn.a[m],coinBInfo:vn.a[j]},balanceA:d?d.toNumber():void 0,balanceB:b?b.toNumber():void 0,balanceDollar:f?f.toNumber():void 0,balanceYuan:p?p.toNumber():void 0}},An=function(e,t,n,a){var c=T.a.getState().tokenMap,r=c.coinMap,o=c.idIndex,i=c.tokenMap,s=T.a.getState().system,u=s.faitPrices,d=s.forex,b=e.match(/(\w+)-(\w+)/i),f=Object(l.a)(b,3),p=f[1],m=f[2];if(n&&n["AMM-"+e]&&a&&a.ammPoolsBalance){var j=n["AMM-"+e];if(r&&i&&o&&d&&u)return xn({coinA:p,coinB:m,ammUserReward:j,idIndex:o,faitPrices:u,forex:d,walletMap:t,snapShotData:a})}return{feeA:void 0,feeB:void 0,feeDollar:void 0,feeYuan:void 0,reward:void 0,rewardToken:void 0,balanceA:void 0,balanceB:void 0,balanceYuan:void 0,balanceDollar:void 0}},yn=n(245),kn=function(e){var t=e.ammMap,n=e.coinMap,a=e.ammActivityMap,c=e.ammKey;if(t&&n){var r=Object(J.b)(t[c]),o=a[c];return r&&r.coinA&&(r.myCoinA=n[r.coinA],r.myCoinB=n[r.coinB],r.activity=o||{}),r}},wn=["t","ammActivityMap"],Tn=Object(Ie.a)(ee.a)(Ot||(Ot=Object(fe.a)(["\n  ",";\n  background-color: ",";\n"])),(function(e){return e.theme.border.defaultFrame({c_key:"blur"})}),(function(e){return e.theme.colorBase.background().default})),Cn=Object(Ie.a)(ee.a)(vt||(vt=Object(fe.a)(["\n  width: 100%;\n  height: calc(100% - 64px);\n  \n  //height: 100%;\n  flex: 1;\n  background-color: ",";\n  border-radius: ","px;\n  padding: ","px 0 ;\n  .rdg {\n    \n    flex: 1;\n  }\n\n"])),(function(e){return e.theme.colorBase.background().default}),(function(e){return e.theme.unit}),(function(e){return e.theme.unit})),In=function(e){return{id:"simple-tab-".concat(e),"aria-controls":"tabpanel-".concat(e)}},_n=Object(Q.a)("common")((function(e){var t,n,a,c,r,o,i,d,p,m,j,O,v,h,g,x,A,y=e.t,k=e.ammActivityMap,w=Object(Z.a)(e,wn),_=Object(f.hb)().currency,E=function(e){var t=Object(s.h)("/liquidity/pools/coinPair/:symbol"),n=Object(W.c)(),a=n.coinMap,c=n.tokenMap,r=n.marketArray,o=(Object(mn.c)().faitPrices,Object(De.d)()),i=Object(yn.a)(),d=o.ammMap,f=o.updateAmmMap,p=Object(V.c)(),m=b.a.useState(void 0),j=Object(l.a)(m,2),O=j[0],v=j[1],h=b.a.useState([]),g=Object(l.a)(h,2),x=g[0],A=(g[1],b.a.useState([])),y=Object(l.a)(A,2),k=y[0],w=y[1],I=b.a.useState(void 0),_=Object(l.a)(I,2),E=_[0],S=_[1],P=b.a.useState(void 0),N=Object(l.a)(P,2),R=N[0],D=N[1],M=b.a.useState({feeA:0,feeB:0,feeDollar:0,feeYuan:0,reward:0,rewardToken:void 0,balanceA:0,balanceB:0,balanceYuan:0,balanceDollar:0}),U=Object(l.a)(M,2),L=U[0],B=U[1],F=b.a.useState({myCoinA:void 0,myCoinB:void 0,activity:void 0,totalRewards:void 0,amountDollar:void 0,amountYuan:void 0,totalLPToken:void 0,totalA:void 0,totalB:void 0,rewardToken:void 0,rewardValue:void 0,feeA:void 0,feeB:void 0,isNew:void 0,isActivity:void 0,APY:void 0}),H=Object(l.a)(F,2),Y=H[0],G=H[1],z=b.a.useState(void 0),q=Object(l.a)(z,2),X=q[0],J=q[1],Z=b.a.useState({coinAInfo:void 0,coinBInfo:void 0}),Q=Object(l.a)(Z,2),$=Q[0],ee=Q[1],te=b.a.useCallback((function(e){var t,n=K().walletMap;return v(n),n&&(null===(t=Xe())||void 0===t||t.then((function(t){var n=Je(e,t);w(n||[])}))),n}),[K,Xe,Je,r,$]);return b.a.useEffect((function(){var n,o=null!==(n=null===t||void 0===t?void 0:t.params.symbol)&&void 0!==n?n:void 0,i={},s=o.match(/(\w+)-(\w+)/i),b=Object(l.a)(s,3),m=b[1],j=b[2],O=Object(C.B)(r,m,j),v=O.amm,h=O.market,g=kn({ammMap:d,coinMap:a,ammActivityMap:e,ammKey:v});if(G(g||{}),a&&ee({coinAInfo:a[m],coinBInfo:a[j]}),p.walletLayer2&&te(h),v&&h&&d){f();var x=[He({coinKey:h,ammKey:v,ammMap:d})];Promise.all([].concat(x)).then((function(e){var t=Object(l.a)(e,1)[0],n=t.ammPoolsBalance,a=t.tickMap;if(c){var r={tickerData:a[h],ammPoolsBalance:n};i=Ge(a[h]?a[h]:{}),J(i),G(Object(u.a)({},g)),D(r)}})).catch((function(e){throw console.log(e),Error}))}}),[]),b.a.useEffect((function(){var e,t,n=Object(C.B)(r,null===(e=$.coinAInfo)||void 0===e?void 0:e.simpleName,null===(t=$.coinBInfo)||void 0===t?void 0:t.simpleName).market;if(n&&R&&R.ammPoolsBalance)switch(p.status){case"ERROR":p.statusUnset();break;case"DONE":p.statusUnset();var a=te(n),c=An(n,a,E,R);B(c)}}),[p.status,E]),b.a.useEffect((function(){var e,t,n=Object(C.B)(r,null===(e=$.coinAInfo)||void 0===e?void 0:e.simpleName,null===(t=$.coinBInfo)||void 0===t?void 0:t.simpleName).market;if(n)switch(i.status){case"ERROR":i.statusUnset();break;case"DONE":var a=T.a.getState().userRewardsMap.userRewardsMap;S(a);var c=An(n,O,E,R);B(c)}}),[i.status,i.statusUnset]),b.a.useEffect((function(){if("ERROR"===o.status)o.statusUnset();else if("DONE"===o.status){var t,n;if(o.statusUnset(),o.ammMap&&(null===(t=$.coinAInfo)||void 0===t?void 0:t.simpleName)&&(null===(n=$.coinBInfo)||void 0===n?void 0:n.simpleName)){var c=kn({ammMap:d,coinMap:a,ammActivityMap:e,ammKey:"AMM-"+$.coinAInfo.simpleName+$.coinBInfo.simpleName});G(Object(u.a)(Object(u.a)(Object(u.a)({},Y),c),{},{tradeFloat:Y.tradeFloat}))}}}),[o.status,o.ammMap,o.statusUnset,$,e,c]),{walletMap:O,myAmm:L,coinPairInfo:Y,snapShotData:R,pair:$,tradeFloat:X,ammMarketArray:x,myAmmMarketArray:k}}({ammActivityMap:k}),S=E.tradeFloat,P=E.snapShotData,N=E.pair,R=E.coinPairInfo,D=E.walletMap,M=E.ammMarketArray,U=E.myAmmMarketArray,L=E.myAmm,B=b.a.useState(0),F=Object(l.a)(B,2),H=F[0],Y=F[1],G=b.a.useState((null===w||void 0===w?void 0:w.page)?w.page:1),q=Object(l.a)(G,2),X=q[0],J=q[1],Q=b.a.useCallback((function(e){J(e)}),[]);return Object(z.jsxs)(z.Fragment,{children:[Object(z.jsxs)(re.a,{container:!0,children:[Object(z.jsx)(re.a,{item:!0,xs:8,children:Object(z.jsxs)(rn.a,{"aria-label":"breadcrumb",children:[Object(z.jsx)(on.a,{color:"textSecondary",href:"/#/liquidity/pools",children:y("labelAmmList")}),Object(z.jsxs)(I.a,{color:"textSecondary",display:"flex",alignItems:"center",justifyContent:"center",children:[null===(t=N.coinAInfo)||void 0===t?void 0:t.simpleName,"-",null===(n=N.coinBInfo)||void 0===n?void 0:n.simpleName]})]})}),Object(z.jsx)(re.a,{item:!0,xs:4,alignItems:"center",justifyContent:"flex-end",display:"flex",children:Object(z.jsx)(on.a,{href:"/#/liquidity/pools",variant:"h5",children:y("labelBack")})})]}),Object(z.jsx)(re.a,{container:!0,marginTop:3,children:Object(z.jsx)(re.a,{item:!0,xs:7,children:Object(z.jsx)(f.M,Object(u.a)({},Object(u.a)(Object(u.a)(Object(u.a)({},w),{},{t:y},N),{},{tradeFloat:S,isNew:!1})))})}),Object(z.jsxs)(ee.a,{flex:1,display:"flex",alignItems:"stretch",flexDirection:"row",marginTop:3,children:[Object(z.jsx)(ee.a,{flex:1,display:"flex",children:Object(z.jsxs)(re.a,{container:!0,spacing:2,wrap:"nowrap",children:[Object(z.jsxs)(re.a,{item:!0,md:5,xs:12,paddingRight:2,display:"flex",flexDirection:"column",alignItems:"stretch",justifyContent:"flex-start",children:[Object(z.jsxs)(Tn,{paddingY:3,marginBottom:2,paddingX:2.5,display:"flex",flexDirection:"column",children:[Object(z.jsxs)(I.a,{component:"p",color:"textSecondary",display:"flex",justifyContent:"space-between",children:[Object(z.jsx)(I.a,{component:"span",style:{textTransform:"capitalize"},children:y("labelLiquidity")}),Object(z.jsx)(I.a,{component:"span",style:{textTransform:"uppercase"},children:y("labelAPY")})]}),Object(z.jsx)(I.a,{component:"p",color:"textPrimary",display:"flex",justifyContent:"space-between",marginTop:1,children:Object(z.jsxs)(z.Fragment,{children:[Object(z.jsxs)(I.a,{component:"span",children:[" ","undefined"===typeof R.amountDollar?"N/A":_===pe.k.dollar?pe.C.Dollar+Object(pe.V)(R.amountDollar):pe.C.Yuan+Object(pe.V)(R.amountYuan?R.amountYuan:0)]}),Object(z.jsxs)(I.a,{component:"span",children:[" ",R.APY?R.APY:"N/A","%"]})]})}),Object(z.jsxs)(I.a,{component:"p",color:"textSecondary",display:"flex",justifyContent:"space-between",marginTop:2,children:[Object(z.jsxs)(I.a,{component:"span",color:"textSecondary",children:[Object(z.jsx)(sn.a,{mdDown:!0,children:y("labelLPTotal")}),y("labelLPTokens")]}),Object(z.jsx)(I.a,{component:"span",color:"textSecondary",children:R.totalLPToken})]}),Object(z.jsxs)(I.a,{component:"p",color:"textSecondary",display:"flex",justifyContent:"space-between",marginTop:1,children:[Object(z.jsxs)(I.a,{component:"span",color:"textSecondary",children:[Object(z.jsx)(sn.a,{mdDown:!0,children:y("labelLPTotal")}),null===(a=R.myCoinA)||void 0===a?void 0:a.simpleName]}),Object(z.jsx)(I.a,{component:"span",color:"textSecondary",children:R.totalA})]}),Object(z.jsxs)(I.a,{component:"p",color:"textSecondary",display:"flex",justifyContent:"space-between",marginTop:1,children:[Object(z.jsxs)(I.a,{component:"span",color:"textSecondary",children:[Object(z.jsx)(sn.a,{mdDown:!0,children:y("labelLPTotal")}),null===(c=R.myCoinB)||void 0===c?void 0:c.simpleName]}),Object(z.jsx)(I.a,{component:"span",color:"textSecondary",children:R.totalB})]})]}),Object(z.jsxs)(Tn,{paddingY:3,marginBottom:2,paddingX:2.5,display:"flex",flexDirection:"column",children:[Object(z.jsxs)(I.a,{component:"p",color:"textSecondary",display:"flex",justifyContent:"space-between",alignItems:"center",children:[Object(z.jsxs)(I.a,{component:"span",color:"textSecondary",variant:"body2",style:{textTransform:"capitalize"},children:[null===(r=R.tradeFloat)||void 0===r?void 0:r.timeUnit," ",y("labelVolume")]}),Object(z.jsxs)(I.a,{component:"span",color:"textSecondary",children:[y("labelFee")," "]})]}),Object(z.jsxs)(I.a,{component:"p",color:"textSecondary",display:"flex",justifyContent:"space-between",marginTop:1,alignItems:"center",children:[Object(z.jsx)(I.a,{component:"span",variant:"h4",color:"textPrimary",children:_===pe.k.dollar?pe.C.Dollar+Object(pe.V)(R.tradeFloat&&R.tradeFloat.priceDollar?R.tradeFloat.priceDollar:0):pe.C.Yuan+Object(pe.V)(R.tradeFloat&&R.tradeFloat.priceYuan?R.tradeFloat.priceYuan:0)}),Object(z.jsxs)(I.a,{noWrap:!0,textAlign:"center",component:"span",color:"textSecondary",variant:"body2",textOverflow:"ellipsis",display:"flex",alignItems:"center",children:[Object(z.jsxs)(I.a,{component:"span",color:"inherit",variant:"inherit",display:"flex",flexDirection:"column",children:[Object(z.jsx)(I.a,{component:"span",color:"inherit",variant:"inherit",children:null===(o=R.myCoinA)||void 0===o?void 0:o.simpleName}),Object(z.jsx)(I.a,{component:"span",color:"inherit",variant:"inherit",children:R.feeA?Object(pe.V)(R.feeA):"N/A"})]}),Object(z.jsx)(I.a,{component:"span",color:"inherit",variant:"h5",paddingX:1,children:" + "}),Object(z.jsxs)(I.a,{component:"span",color:"inherit",variant:"inherit",display:"flex",flexDirection:"column",children:[Object(z.jsx)(I.a,{component:"span",color:"inherit",variant:"inherit",children:null===(i=R.myCoinB)||void 0===i?void 0:i.simpleName}),Object(z.jsx)(I.a,{component:"span",color:"inherit",variant:"inherit",children:R.feeB?Object(pe.V)(R.feeB):"N/A"})]})]})]})]}),Object(z.jsxs)(Tn,{paddingY:3,marginBottom:2,paddingX:2.5,display:"flex",flexDirection:"column",children:[Object(z.jsx)(I.a,{component:"p",color:"textSecondary",display:"flex",justifyContent:"space-between",children:Object(z.jsxs)(I.a,{component:"span",color:"textSecondary",children:[" ",y("labelMyPoolShare")]})}),Object(z.jsxs)(I.a,{component:"p",color:"textSecondary",display:"flex",justifyContent:"space-between",marginTop:1,children:[Object(z.jsxs)(I.a,{component:"span",color:"textSecondary",children:[Object(z.jsx)(z.Fragment,{children:L.balanceA?Object(pe.V)(L.balanceA,2):"N/A"}),Object(z.jsxs)(z.Fragment,{children:[" ",null===(d=R.myCoinA)||void 0===d?void 0:d.simpleName]})]}),Object(z.jsxs)(I.a,{component:"span",color:"textecondary",variant:"h5",children:[" ",L.feeA?Object(pe.V)(L.feeA):"N/A"," ",null===(p=R.myCoinA)||void 0===p?void 0:p.simpleName,"  "]})]}),Object(z.jsxs)(I.a,{component:"p",color:"textSecondary",display:"flex",justifyContent:"space-between",marginTop:1,children:[Object(z.jsxs)(I.a,{component:"span",color:"textSecondary",children:[Object(z.jsx)(z.Fragment,{children:L.balanceB?Object(pe.V)(L.balanceB,2):"N/A"}),Object(z.jsxs)(z.Fragment,{children:[" ",null===(m=R.myCoinB)||void 0===m?void 0:m.simpleName]})]}),Object(z.jsxs)(I.a,{component:"span",color:"textSecondary",variant:"h5",children:[" ",L.feeB?Object(pe.V)(L.feeB):"N/A"," ",null===(j=R.myCoinB)||void 0===j?void 0:j.simpleName]})]})]}),Object(z.jsxs)(Tn,{paddingY:3,paddingX:2.5,display:"flex",flexDirection:"column",children:[Object(z.jsxs)(ee.a,{display:"flex",flexDirection:"row",justifyContent:"space-between",children:[Object(z.jsxs)(I.a,{display:"flex",flexDirection:"column",component:"div",children:[Object(z.jsx)(I.a,{variant:"body2",component:"h5",color:"textSecondary",children:y("labelReward")}),Object(z.jsx)(I.a,{variant:"body1",component:"span",color:"textPrimary",children:"undefined"===typeof R.isActivity?"N/A":Object(z.jsxs)(z.Fragment,{children:[Object(z.jsxs)(I.a,{component:"span",children:[R.activity?Object(pe.V)(R.activity.totalRewards):"N/A"," "]}),Object(z.jsx)(I.a,{component:"span",children:null===(O=R.activity)||void 0===O||null===(v=O.rewardToken)||void 0===v?void 0:v.simpleName})]})})]}),Object(z.jsxs)(I.a,{display:"flex",flexDirection:"column",alignItems:"flex-end",component:"div",children:[Object(z.jsx)(I.a,{variant:"body2",component:"h5",color:"textSecondary",children:y("labelMyReward")}),Object(z.jsx)(I.a,{variant:"body1",component:"span",color:"textPrimary",children:"undefined"===typeof L.reward?"N/A":Object(z.jsxs)(z.Fragment,{children:[Object(z.jsxs)(I.a,{component:"span",children:[" ",Object(pe.V)(L.reward)," "]}),Object(z.jsxs)(I.a,{component:"span",children:[" ",null===(h=R.activity)||void 0===h||null===(g=h.rewardToken)||void 0===g?void 0:g.simpleName]})]})})]})]}),Object(z.jsx)(I.a,{alignSelf:"flex-start",variant:"body2",color:"textSecondary",component:"span",marginTop:1,children:"undefined"===typeof R.isActivity?y("labelNoActiveEvent"):Object(z.jsxs)(z.Fragment,{children:[y("labelDate")," :",Object(z.jsxs)(z.Fragment,{children:[" ",pn()(null===(x=R.activity)||void 0===x?void 0:x.duration.from).format("L")+" - "+pn()(null===(A=R.activity)||void 0===A?void 0:A.duration.to).format("L")]})]})})]})]}),Object(z.jsx)(sn.a,{mdDown:!0,children:Object(z.jsx)(re.a,{item:!0,md:7,paddingRight:2})})]})}),Object(z.jsx)(ee.a,{display:"flex",children:Object(z.jsx)(bn,{pair:N,walletMap:D,snapShotData:P})})]}),Object(z.jsx)(re.a,{container:!0,marginY:3,children:Object(z.jsxs)(re.a,{item:!0,xs:12,children:[Object(z.jsxs)(we.a,{value:H,onChange:function(e,t){Y(t),J(1)},"aria-label":"tabs switch",children:[Object(z.jsx)(Te.a,Object(u.a)({label:y("labelAll")},In(0))),Object(z.jsx)(Te.a,Object(u.a)({label:y("labelMe")},In(1)))]}),Object(z.jsx)(Cn,{marginTop:2,children:0===H?Object(z.jsx)(f.d,{rawData:M,handlePageChange:Q,page:X}):Object(z.jsx)(f.d,{rawData:U,handlePageChange:Q,page:X})})]})})]})})),En=n(986),Sn=["ammProps","t","ammActivityMap"],Pn=b.a.memo(b.a.forwardRef((function(e,t){return e?Object(z.jsx)(En.a,Object(u.a)({ref:t},e)):Object(z.jsx)(z.Fragment,{})}))),Nn=function(e){var t=e.ammActivityViewMap;return Object(z.jsx)(z.Fragment,{children:t.map((function(e,t){return Object(z.jsx)(re.a,{item:!0,xs:12,sm:6,lg:4,children:Object(z.jsx)(Pn,Object(u.a)({},e))},t)}))})},Rn=Object(Q.a)("common")((function(e){e.ammProps;var t=e.t,n=e.ammActivityMap,a=(Object(Z.a)(e,Sn),function(e){var t=e.ammActivityMap,n=Object(yn.a)(),a=b.a.useState([]),c=Object(l.a)(a,2),r=c[0],o=c[1],i=b.a.useState([]),s=Object(l.a)(i,2),u=s[0],d=s[1];return b.a.useEffect((function(){t&&Object.keys(t).length>0&&(o(hn({ammActivityMap:t,type:"AMM_MINING",ammPoolActivityStatus:[C.a.NotStarted,C.a.InProgress]},n.userRewardsMap)),d(hn({ammActivityMap:t,type:"AMM_MINING",ammPoolActivityStatus:[C.a.EndOfGame]},n.userRewardsMap)))}),[t]),b.a.useEffect((function(){"ERROR"===n.status?n.statusUnset():"DONE"===n.status&&(n.statusUnset(),o(hn({ammActivityMap:t,type:"AMM_MINING",ammPoolActivityStatus:[C.a.NotStarted,C.a.InProgress]},n.userRewardsMap)),d(hn({ammActivityMap:t,type:"AMM_MINING",ammPoolActivityStatus:[C.a.EndOfGame]},n.userRewardsMap)))}),[n.status]),{ammActivityViewMap:r,ammActivityPastViewMap:u}}({ammActivityMap:n})),c=a.ammActivityViewMap,r=a.ammActivityPastViewMap,o=b.a.useState(0),i=Object(l.a)(o,2),s=i[0],u=i[1];return Object(z.jsxs)(re.a,{container:!0,spacing:2,children:[Object(z.jsx)(re.a,{item:!0,xs:12,children:Object(z.jsxs)(we.a,{value:s,onChange:function(e,t){u(t)},"aria-label":"tabs switch",children:[Object(z.jsx)(Te.a,{label:t("labelCurrentActivities")}),Object(z.jsx)(Te.a,{label:t("labelPastActivities")})]})}),Object(z.jsx)(Nn,{ammActivityViewMap:0===s?c:r})]})})),Dn=n(511),Mn=function(e){var t=e.market,n=e.ammDetail,a=e.walletMap,c=e.ammUserRewardMap;if(a&&n)return function(e,t,n,a){var c,r,o,i,s=T.a.getState().tokenMap,d=s.coinMap,b=s.idIndex,f=s.tokenMap,p=T.a.getState().system,m=p.faitPrices,j=p.forex,O=e.match(/(\w+)-(\w+)/i),v=Object(l.a)(O,3),h=v[1],g=v[2],x={};if(t&&t["LP-"+h+"-"+g]&&j){var A=new On.a(t["LP-"+h+"-"+g].detail.total).div(a.totalLPToken);c=A.times(Object(We.b)(h,a.totalA?a.totalA:0)||1),r=A.times(Object(We.b)(g,a.totalB?a.totalB:0)||1),i=(o=c.times(m[h].price).plus(r.times(m[g].price))).times(j),x={balanceA:c.toNumber(),balanceB:r.toNumber(),balanceYuan:i.toNumber(),balanceDollar:o.toNumber()}}if(n&&n["AMM-"+e]&&a&&j){var y,k,w,I,_,E,S,P,N,R,D=n["AMM-"+e];return d&&f&&b&&j&&m&&D&&(y=D.currentRewards[0]?b[D.currentRewards[0].tokenId]:void 0,k=D.currentRewards[1]?b[D.currentRewards[1].tokenId]:void 0,w=D?Object(We.b)(h,D.feeRewards[0]):Object(C.H)(0),I=D?Object(We.b)(g,D.feeRewards[1]):Object(C.H)(0),w=w||Object(C.H)(0),I=I||Object(C.H)(0),E=(_=w.times(m[h].price).plus(I.times(m[g].price))).times(j),S=y?Object(We.b)(y,D.currentRewards[0].volume):Object(C.H)(0),P=k?Object(We.b)(k,D.currentRewards[1].volume):Object(C.H)(0),S=S||Object(C.H)(0),P=P||Object(C.H)(0),R=(N=S.times(y?m[y].price:1).plus(P.times(k?m[k].price:1))).times(j),x=Object(u.a)(Object(u.a)({},x),{},{feeA:w?w.toNumber():void 0,feeB:I?I.toNumber():void 0,reward:S?S.toNumber():void 0,rewardToken:y?d[y]:void 0,reward2:P?P.toNumber():void 0,rewardToken2:k?d[k]:void 0,rewardDollar:N?N.toNumber():void 0,rewardYuan:R?R.toNumber():void 0,feeDollar:_?_.toNumber():void 0,feeYuan:E?E.toNumber():void 0,ammDetail:{coinAInfo:h?d[h]:void 0,coinBInfo:g?d[g]:void 0}})),x}return{feeA:void 0,feeB:void 0,feeDollar:void 0,feeYuan:void 0,reward:void 0,rewardToken:void 0,balanceA:void 0,balanceB:void 0,balanceYuan:void 0,balanceDollar:void 0}}(t,a,c,n)},Un=function(e){e.ammActivityMap;var t=Object(V.c)(),n=Object(yn.a)(),a=Object(W.c)().marketArray,c=Object(De.d)(),r=c.ammMap,o=b.a.useState(void 0),i=Object(l.a)(o,2),s=(i[0],i[1]),u=b.a.useState(void 0),d=Object(l.a)(u,2),f=d[0],p=d[1],m=b.a.useState([]),j=Object(l.a)(m,2),O=j[0],v=j[1],h=b.a.useState([]),g=Object(l.a)(h,2),x=g[0],A=g[1],y=b.a.useCallback((function(){var e,t=K().walletMap;(s(t),t)&&(null===(e=Xe())||void 0===e||e.then((function(e){var t=Je(void 0,e);A(t||[])})));return t}),[K,Xe,Je,a]),k=b.a.useCallback((function(e){return e&&r?Reflect.ownKeys(e).reduce((function(t,a){if(/LP-/i.test(a)){var c,o=a.replace("LP-","AMM-"),i=a.replace("LP-","");void 0!==(c=Mn({ammDetail:r[o],walletMap:e,market:i,ammUserRewardMap:n.userRewardsMap}))&&t.push(c)}return t}),[]):[]}),[r,n.userRewardsMap]);return b.a.useEffect((function(){if(t.walletLayer2){var e=y();if(r){var n=k(e);v(n)}}}),[]),b.a.useEffect((function(){switch(t.status){case"ERROR":t.statusUnset();break;case"DONE":t.statusUnset();var e=y();if(c.ammMap){var n=k(e);v(n)}}}),[t.status]),b.a.useEffect((function(){if("ERROR"===c.status)c.statusUnset();else if("DONE"===c.status&&(c.statusUnset(),t.walletLayer2)){var e=k(t.walletLayer2);v(e)}}),[c.status]),b.a.useEffect((function(){if("ERROR"===n.status)n.statusUnset();else if("DONE"===n.status){n.statusUnset();var e=function(e){var t=e.userRewardsMap,n=T.a.getState().tokenMap,a=n.coinMap,c=n.idIndex,r=n.tokenMap,o=T.a.getState().system,i=o.faitPrices,s=o.forex;if(t&&c&&a&&r&&i&&s)return Object.keys(t).reduce((function(e,n){if(/AMM-/i.test(n)){var a=n.match(/AMM-(\w+)-(\w+)/i),r=Object(l.a)(a,3),o=r[1],u=r[2],d=t[n],b=xn({coinB:u,coinA:o,ammUserReward:d,idIndex:c,faitPrices:i,forex:s}),f=b.rewardDollar,p=b.rewardYuan,m=b.feeDollar,j=b.feeYuan;e.rewardDollar=f?Object(C.H)(f).plus(e.rewardDollar).toNumber():0,e.rewardYuan=p?Object(C.H)(p).plus(e.rewardYuan).toNumber():0,e.feeDollar=m?Object(C.H)(m).plus(e.feeDollar).toNumber():0,e.feeYuan=j?Object(C.H)(j).plus(e.feeYuan).toNumber():0}return e}),{rewardDollar:0,rewardYuan:0,feeDollar:0,feeYuan:0})}({userRewardsMap:n.userRewardsMap});if(p(e),t.walletLayer2&&c.ammMap){var a=k(t.walletLayer2);v(a)}}}),[n.status]),{myAmmMarketArray:x,summaryReward:f,myPoolRow:O}},Ln=["t","ammActivityMap"],Bn=[{value:"24 H",key:"24 H"},{value:"1 W",key:"1 W"},{value:"ALL",key:"ALL"}],Fn=(Object(Ie.a)(ee.a)(ht||(ht=Object(fe.a)(["\n  width: 100%;\n  height: 100%;\n  flex: 1;\n"]))),Object(Ie.a)(re.a)(gt||(gt=Object(fe.a)(["\n  position: relative;\n  width: 100%;\n  background-color: ",";\n  border-radius: ","px;\n"])),(function(e){return e.theme.colorBase.background().default}),(function(e){return e.theme.unit}))),Kn=Object(Ie.a)(ee.a)(xt||(xt=Object(fe.a)(["\n  position: absolute;\n  z-index: 99;\n  top: ","px;\n  width: 100%;\n"])),(function(e){return e.theme.unit})),Vn=Object(Ie.a)(re.a)(At||(At=Object(fe.a)(["\n  & {\n    background-color: ",";\n    ",";\n  }\n\n  ","\n"])),(function(e){return e.theme.colorBase.background().default}),(function(e){return e.theme.border.defaultFrame({c_key:"blur",d_R:1})}),(function(e){var t=e.theme;return Object(f.G)({pLeft:3*t.unit,pRight:3*t.unit})})),Wn=Object(Q.a)("common")((function(e){var t=e.t,n=e.ammActivityMap,a=Object(Z.a)(e,Ln),c=b.a.useState("ALL"),r=Object(l.a)(c,2),o=r[0],i=r[1],s=b.a.useState(1),d=Object(l.a)(s,2),m=d[0],j=d[1],O=Object(f.hb)().currency,v=b.a.useCallback((function(e){j(e)}),[]),h=Un({ammActivityMap:n}),g=h.myAmmMarketArray,x=h.summaryReward,A=h.myPoolRow;return Object(z.jsxs)(z.Fragment,{children:[Object(z.jsxs)(Fn,{container:!0,spacing:1,padding:3,margin:0,children:[Object(z.jsxs)(re.a,{display:"flex",flexDirection:"column",justifyContent:"space-around",item:!0,sm:3,children:[Object(z.jsx)(I.a,{variant:"body1",component:"h5",color:"textSecondary",children:t("labelTotalPositionValue")}),Object(z.jsx)(I.a,{variant:"h4",marginTop:1,children:void 0===x?"N/A":O===p.b.dollar?p.j.Dollar+Object(p.q)(void 0!==x.rewardDollar?x.rewardDollar:0)+Object(p.q)(void 0!==x.feeDollar?x.feeDollar:0):p.j.Yuan+Object(p.q)(x.rewardYuan?x.rewardYuan:0)+Object(p.q)(x.feeYuan?x.feeYuan:0)})]}),Object(z.jsxs)(re.a,{display:"flex",flexDirection:"column",justifyContent:"space-around",item:!0,sm:3,children:[Object(z.jsx)(I.a,{variant:"body1",component:"h5",color:"textSecondary",children:t("labelFeeRewards")}),Object(z.jsx)(I.a,{variant:"h4",marginTop:1,children:void 0===x?"N/A":O===p.b.dollar?p.j.Dollar+Object(p.q)(x.feeDollar?x.feeDollar:0):p.j.Yuan+Object(p.q)(x.feeYuan?x.feeYuan:0)})]}),Object(z.jsxs)(re.a,{display:"flex",flexDirection:"column",justifyContent:"space-around",item:!0,sm:3,children:[Object(z.jsx)(I.a,{variant:"body1",component:"h5",color:"textSecondary",children:t("labelMiningRewards")}),Object(z.jsx)(I.a,{variant:"h4",marginTop:1,children:void 0===x?"N/A":O===p.b.dollar?p.j.Dollar+Object(p.q)(x.rewardDollar?x.rewardDollar:0):p.j.Yuan+Object(p.q)(x.rewardYuan?x.rewardYuan:0)})]})]}),Object(z.jsxs)(Fn,{container:!0,marginY:2,height:340,children:[Object(z.jsxs)(Kn,{display:"flex",padding:3,justifyContent:"space-between",children:[Object(z.jsx)(I.a,{variant:"body1",component:"h5",color:"textSecondary",children:t("labelLiquidityValue")}),Object(z.jsx)(ee.a,{marginRight:-1,children:Object(z.jsx)(f.I,Object(u.a)({exclusive:!0,size:"small"},Object(u.a)(Object(u.a)({},a),{},{t:t,data:Bn,value:o,setValue:i})))})]}),Object(z.jsx)(f.C,{type:f.j.Trend,data:[]})]}),Object(z.jsx)(I.a,{paddingLeft:2,variant:"h4",children:t("labelMyAmm")}),Object(z.jsx)(Vn,{container:!0,marginY:2,paddingY:2,flex:1,height:568,children:Object(z.jsx)(re.a,{item:!0,xs:12,display:"flex",flexDirection:"column",children:Object(z.jsx)(Dn.a,{rawData:A,pagination:{pageSize:5},handleDeposit:function(e){console.log()},handleWithdraw:function(e){console.log()},handlePageChange:function(){}})})}),Object(z.jsx)(I.a,{paddingLeft:2,variant:"h4",children:t("labelMyAmmRecord")}),Object(z.jsx)(Vn,{container:!0,marginTop:2,paddingY:2,flex:1,children:Object(z.jsx)(re.a,{item:!0,xs:12,display:"flex",flexDirection:"column",children:Object(z.jsx)(f.d,{rawData:g,handlePageChange:v,page:m})})})]})})),Hn=n(383),Yn=p.w,Gn=Object(Q.a)(["layout","common"],{withRef:!0})(f.E),zn=function(){var e,t,n=function(){var e=Object(Hn.c)(),t=Object(yn.a)().updateUserRewards,n=Object(A.a)().account,a=Object(De.d)(),c=a.ammMap,r=a.updateAmmMap,o=b.a.useState(e.ammActivityMap),i=Object(l.a)(o,2),s=i[0],u=i[1];return b.a.useEffect((function(){c&&0!==Object.keys(c).length||r()}),[]),b.a.useEffect((function(){switch(e.status){case"ERROR":e.statusUnset();break;case"DONE":e.statusUnset(),u(e.ammActivityMap)}}),[e.status]),b.a.useEffect((function(){n.accountId&&t()}),[n.accountId]),{ammActivityMap:s}}().ammActivityMap,a=Object(s.h)(["/liquidity/:item",":next/"]),c=null!==(e=null===a||void 0===a?void 0:a.params.item)&&void 0!==e?e:"pools",r=Object(s.h)(["/liquidity/:item/:next/:symbol"]),o=void 0;return r&&(null===r||void 0===r||null===(t=r.params)||void 0===t?void 0:t.next)&&"pools"===r.params.item&&(o=r.params.symbol?r.params.symbol:"LRC-ETH"),Object(z.jsxs)(z.Fragment,{children:[o&&Object(z.jsx)(ee.a,{display:"flex",flexDirection:"column",flex:1,alignSelf:"flex-start",children:Object(z.jsx)(_n,{ammActivityMap:n})}),!o&&Object(z.jsxs)(z.Fragment,{children:["  ",Object(z.jsx)(ee.a,{width:"200px",display:"flex",justifyContent:"stretch",marginRight:3,marginBottom:3,children:Object(z.jsx)(f.D,{children:Object(z.jsx)(Gn,{selected:c,subMenu:Yn})})}),Object(z.jsxs)(ee.a,{minHeight:420,display:"flex",alignItems:"stretch",justifyContent:"stretch",flexDirection:"column",marginTop:0,flex:1,marginBottom:3,children:["pools"===c&&!o&&Object(z.jsx)(cn,{ammActivityMap:n}),"amm-mining"===c&&!o&&Object(z.jsx)(Rn,{ammActivityMap:n}),"my-liquidity"===c&&!o&&Object(z.jsx)(Wn,{ammActivityMap:n}),"orderBook-Mining"===c&&Object(z.jsx)(Rn,{ammActivityMap:n})]})]})]})};t.a=function(){return Object(z.jsxs)(i.a,{children:[Object(z.jsx)(ae,{}),Object(z.jsx)(kt.a,{maxWidth:"lg",style:{minHeight:"calc(100% - 64px - 32px)",display:"flex",flexDirection:"column"},children:Object(z.jsx)(ee.a,{display:"flex",flex:1,alignItems:"stretch",flexDirection:"row",marginTop:3,children:Object(z.jsxs)(s.c,{children:[Object(z.jsx)(s.a,{exact:!0,component:tt,path:"/"}),Object(z.jsx)(s.a,{exact:!0,component:be,path:"/markets"}),Object(z.jsx)(s.a,{component:tt,path:"/trading/lite"}),Object(z.jsx)(s.a,{component:tt,path:"/trading/lite(/:symbol)"}),Object(z.jsx)(s.a,{exact:!0,component:en,path:"/layer2"}),Object(z.jsx)(s.a,{exact:!0,component:en,path:"/layer2/assets"}),Object(z.jsx)(s.a,{exact:!0,component:en,path:"/layer2/transactions"}),Object(z.jsx)(s.a,{exact:!0,component:en,path:"/layer2/trades"}),Object(z.jsx)(s.a,{exact:!0,component:en,path:"/layer2/orders"}),Object(z.jsx)(s.a,{exact:!0,component:en,path:"/layer2/setting"}),Object(z.jsx)(s.a,{exact:!0,component:zn,path:"/liquidity"}),Object(z.jsx)(s.a,{exact:!0,component:zn,path:"/liquidity/pools/*"}),Object(z.jsx)(s.a,{exact:!0,component:zn,path:"/liquidity/pools"}),Object(z.jsx)(s.a,{exact:!0,component:zn,path:"/liquidity/amm-mining"}),Object(z.jsx)(s.a,{exact:!0,component:zn,path:"/liquidity/my-liquidity"}),Object(z.jsx)(s.a,{exact:!0,component:zn,path:"/liquidity/orderBook-Mining"}),Object(z.jsx)(s.a,{exact:!0,component:zn,path:"/liquidity/maker-rebates"}),Object(z.jsx)(wt.a,{children:Object(z.jsx)(s.a,{exact:!0,path:"/debug",children:Object(z.jsx)(yt,{})})})]})})})]})}},99:function(e,t,n){"use strict";n.d(t,"b",(function(){return i})),n.d(t,"a",(function(){return s})),n.d(t,"c",(function(){return u}));var a=n(13),c=n(47),r=n(1);function o(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:a.h,n=Object(c.c)((function(e){return e.trading})),o=n.chainId,i=function(){if(o)return new e(o,t)},s=Object(r.useMemo)(i,[e,o,t]);return s}function i(){return o(a.i)}function s(){return o(a.c)}function u(){return o(a.p)}}},[[1880,9,4,2,3,1,8,5,6]]]);
//# sourceMappingURL=main~a97bfcba.f89c5daa.chunk.js.map